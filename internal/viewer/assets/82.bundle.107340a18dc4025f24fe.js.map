{"version":3,"file":"82.bundle.107340a18dc4025f24fe.js","mappings":"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KACf,CAAC,IAAK,IAAK,GAAI,KACf,CAAC,GAAI,IAAK,IAAK,KACf,CAAC,IAAK,GAAI,IAAK,KACf,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,GAAI,IAAK,IAAK,KACf,CAAC,IAAK,GAAI,IAAK,KACf,CAAC,IAAK,IAAK,GAAI,KACf,CAAC,GAAI,IAAK,IAAK,KACf,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,GAAI,KACf,CAAC,GAAI,IAAK,IAAK,KACf,CAAC,IAAK,GAAI,IAAK,KACf,CAAC,IAAK,IAAK,GAAI,KACf,CAAC,GAAI,IAAK,IAAK,KACf,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,GAAI,KACf,CAAC,GAAI,IAAK,IAAK,KACf,CAAC,IAAK,GAAI,IAAK,KACf,CAAC,IAAK,IAAK,GAAI,KACf,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,GAAI,IAAK,KACf,CAAC,IAAK,IAAK,GAAI,KACf,CAAC,GAAI,IAAK,IAAK,KACf,CAAC,IAAK,GAAI,IAAK,KACf,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,GAAI,IAAK,KACf,CAAC,IAAK,IAAK,GAAI,KACf,CAAC,GAAI,GAAI,IAAK,KACd,CAAC,IAAK,GAAI,GAAI,KACd,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,GAAI,IAAK,IAAK,KACf,CAAC,IAAK,GAAI,IAAK,KACf,CAAC,GAAI,IAAK,GAAI,KACd,CAAC,IAAK,GAAI,IAAK,KACf,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,GAAI,KACf,CAAC,GAAI,IAAK,IAAK,KACf,CAAC,IAAK,GAAI,GAAI,KACd,CAAC,GAAI,IAAK,IAAK,KACf,CAAC,IAAK,GAAI,IAAK,KACf,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,GAAI,KACf,CAAC,GAAI,GAAI,IAAK,KACd,CAAC,IAAK,IAAK,GAAI,KACf,CAAC,GAAI,IAAK,IAAK,KACf,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,GAAI,IAAK,KACf,CAAC,GAAI,IAAK,GAAI,KACd,CAAC,IAAK,GAAI,IAAK,KACf,CAAC,IAAK,IAAK,GAAI,KACf,CAAC,GAAI,IAAK,IAAK,KACf,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,GAAI,KACf,CAAC,GAAI,IAAK,IAAK,KACf,CAAC,IAAK,GAAI,IAAK,KACf,CAAC,IAAK,IAAK,GAAI,KACf,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,GAAI,IAAK,KACf,CAAC,IAAK,IAAK,GAAI,KACf,CAAC,GAAI,IAAK,IAAK,KACf,CAAC,IAAK,GAAI,IAAK,KACf,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,GAAI,IAAK,KACf,CAAC,IAAK,IAAK,GAAI,KACf,CAAC,GAAI,IAAK,IAAK,KACf,CAAC,IAAK,GAAI,IAAK,KACf,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,GAAI,IAAK,IAAK,KACf,CAAC,IAAK,GAAI,IAAK,KACf,CAAC,IAAK,IAAK,GAAI,KACf,CAAC,GAAI,IAAK,IAAK,KACf,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,GAAI,KACf,CAAC,GAAI,IAAK,IAAK,KACf,CAAC,IAAK,GAAI,IAAK,KACf,CAAC,IAAK,IAAK,GAAI,KACf,CAAC,GAAI,IAAK,IAAK,KACf,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,GAAI,KACf,CAAC,GAAI,IAAK,IAAK,KACf,CAAC,IAAK,GAAI,IAAK,KACf,CAAC,IAAK,IAAK,GAAI,KACf,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,GAAI,IAAK,KACf,CAAC,IAAK,IAAK,GAAI,KACf,CAAC,GAAI,IAAK,IAAK,KACf,CAAC,IAAK,GAAI,IAAK,KACf,CAAC,GAAI,IAAK,GAAI,KACd,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,GAAI,IAAK,KACf,CAAC,IAAK,IAAK,GAAI,KACf,CAAC,GAAI,IAAK,IAAK,KACf,CAAC,IAAK,GAAI,GAAI,KACd,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,GAAI,IAAK,IAAK,KACf,CAAC,IAAK,GAAI,IAAK,KACf,CAAC,IAAK,IAAK,GAAI,KACf,CAAC,IAAK,GAAI,IAAK,KACf,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,GAAI,IAAK,IAAK,KACf,CAAC,IAAK,GAAI,GAAI,KACd,CAAC,GAAI,IAAK,IAAK,KACf,CAAC,IAAK,GAAI,IAAK,KACf,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,GAAI,KACf,CAAC,GAAI,GAAI,IAAK,KACd,CAAC,IAAK,IAAK,GAAI,KACf,CAAC,GAAI,IAAK,IAAK,KACf,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,GAAI,IAAK,KACf,CAAC,GAAI,IAAK,GAAI,KACd,CAAC,IAAK,GAAI,IAAK,KACf,CAAC,IAAK,IAAK,GAAI,KACf,CAAC,GAAI,IAAK,IAAK,KACf,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,GAAI,KACf,CAAC,GAAI,IAAK,IAAK,KACf,CAAC,IAAK,GAAI,IAAK,KACf,CAAC,IAAK,IAAK,GAAI,KACf,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,GAAI,IAAK,KACf,CAAC,IAAK,IAAK,GAAI,KACf,CAAC,GAAI,IAAK,IAAK,KACf,CAAC,IAAK,GAAI,IAAK,KACf,CAAC,IAAK,IAAK,GAAI,KACf,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,GAAI,IAAK,KACf,CAAC,IAAK,IAAK,GAAI,KACf,CAAC,GAAI,IAAK,IAAK,KACf,CAAC,IAAK,GAAI,IAAK,KACf,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,GAAI,IAAK,IAAK,KACf,CAAC,IAAK,GAAI,IAAK,KACf,CAAC,IAAK,IAAK,GAAI,KACf,CAAC,GAAI,IAAK,IAAK,KACf,CAAC,IAAK,IAAK,IA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I,IAAIC,OAAO,IAAIC,KAAK,IAAIC,KAAK,IAAIC,MAAM,IAAIC,MAAM,IAAIC,KAAK,IAAIC,OAAO,IAAIC,MAAM,IAAIC,KAAK,IAAIC,KAAK,IAAIC,MAAM,IAAIC,OAAO,IAAIC,OAAO,IAAIC,OAAO,IAAIC,OAAO,IAAIC,OAAO,IAAIC,OAAO,IAAIC,MAAM,IAAIC,OAAO,IAAIC,KAAK,IAAIC,MAAM,IAAIC,MAAM,IAAIC,OAAO,IAAIC,OAAO,IAAIC,OAAO,IAAIC,MAAM,IAAIC,KAAK,IAAIC,OAAO,IAAIC,OAAO,IAAIC,MAAM,IAAIC,KAAK,IAAIC,IAAI,IAAIC,OAAO,IAAIC,OAAO,IAAIC,OAAO,IAAIC,MAAM,IAAIC,OAAO,IAAIC,KAAK,IAAIC,MAAM,IAAIC,OAAO,IAAIC,OAAO,IAAIC,OAAO,IAAIC,MAAM,IAAIC,KAAK,IAAIC,OAAO,IAAIC,MAAM,IAAIC,MAAM,IAAIC,OAAO,IAAIC,OAAO,IAAIC,MAAM,IAAIC,OAAO,IAAIC,KAAK,IAAIC,MAAM,IAAIC,MAAM,IAAIC,OAAO,IAAIC,OAAO,IAAIC,OAAO,IAAIC,MAAM,IAAIC,KAAK,IAAIC,OAAO,IAAIC,OAAO,IAAIC,MAAM,IAAIC,KAAK,IAAIC,IAAI,IAAIC,OAAO,IAAIC,OAAO,IAAIC,OAAO,IAAIC,MAAM,IAAIC,OAAO,IAAIC,KAAK,IAAIC,OAAO,IAAIC,OAAO,IAAIC,OAAO,IAAIC,OAAO,IAAIC,MAAM,IAAIC,KAAK,IAAIC,OAAO,IAAIC,MAAM,IAAIC,KAAK,IAAIC,MAAM,IAAIC,MAAM,IAAIC,OAAO,IAAIC,OAAO,IAAIC,KAAK,IAAIC,KAAK,IAAIC,KAAK,IAAIC,MAAM,IAAIC,MAAM,IAAIC,KAAK,IAAIC,MAAM,IAAIC,MAAM,IAAIC,QAAQ,IAAIC,KAAK,IAAIC,IAAI,IAAIC,MAAM,IAAIC,KAAK,IAAIC,MAAM,IAAIC,OAAO,IAAIC,GAAG,IAAIC,GAAG,IAAIC,GAAG,IAAIC,QAAQ,IAAIC,GAAG,IAAIC,IAAI,IAAIC,MAAM,IAAIC,IAAI,IAAIC,QAAQ,IAAIC,IAAI,IAAIC,IAAI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","sources":["webpack:///../../../node_modules/@cornerstonejs/tools/src/enums/ToolBindings.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/enums/ToolModes.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/enums/AnnotationStyleStates.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/enums/Events.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/enums/SegmentationRepresentations.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/enums/Touch.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/stateManagement/annotation/annotationLocking.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/stateManagement/annotation/annotationSelection.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/stateManagement/annotation/annotationVisibility.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/stateManagement/annotation/FrameOfReferenceSpecificAnnotationManager.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/store/svgNodeCache.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/store/state.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/store/addTool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventListeners/mouse/getMouseEventPoints.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventListeners/mouse/mouseDoubleClickListener.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventListeners/mouse/mouseMoveListener.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventListeners/mouse/mouseDownListener.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventListeners/mouse/index.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventListeners/touch/preventGhostClick.js","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventListeners/touch/getTouchEventPoints.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/touch/index.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventListeners/touch/touchStartListener.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventListeners/touch/index.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventListeners/wheel/normalizeWheel.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventListeners/wheel/wheelListener.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventListeners/wheel/index.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventListeners/keyboard/keyDownListener.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventListeners/keyboard/index.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/constants/COLOR_LUT.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/displayTools/Contour/contourConfig.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/displayTools/Labelmap/labelmapConfig.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/stateManagement/segmentation/SegmentationStateManager.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/stateManagement/segmentation/triggerSegmentationEvents.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/stateManagement/segmentation/helpers/normalizeSegmentationInput.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/stateManagement/segmentation/segmentationState.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/stateManagement/segmentation/config/segmentationConfig.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/displayTools/Labelmap/addLabelmapToElement.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/displayTools/Labelmap/removeLabelmapFromElement.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/displayTools/Labelmap/labelmapDisplay.ts","webpack:///../../../node_modules/@kitware/vtk.js/Filters/General/AppendPolyData.js","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/displayTools/Contour/utils.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/displayTools/Contour/contourConfigCache.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/displayTools/Contour/addContourSetsToElement.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/displayTools/Contour/updateContourSets.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/displayTools/Contour/removeContourFromElement.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/displayTools/Contour/contourDisplay.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/displayTools/Contour/addOrUpdateContourSets.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/stateManagement/segmentation/removeSegmentationsFromToolGroup.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/displayTools/Labelmap/validateRepresentationData.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/stateManagement/segmentation/helpers/validateSegmentationInput.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/stateManagement/segmentation/addSegmentations.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/displayTools/Surface/removeSurfaceFromElement.ts","webpack:///../../../node_modules/@kitware/vtk.js/Common/Core/PriorityQueue.js","webpack:///../../../node_modules/@kitware/vtk.js/Common/DataModel/Polygon/Constants.js","webpack:///../../../node_modules/@kitware/vtk.js/Common/DataModel/Polygon.js","webpack:///../../../node_modules/@kitware/vtk.js/Common/DataModel/IncrementalOctreeNode.js","webpack:///../../../node_modules/@kitware/vtk.js/Common/DataModel/Locator.js","webpack:///../../../node_modules/@kitware/vtk.js/Common/DataModel/AbstractPointLocator.js","webpack:///../../../node_modules/@kitware/vtk.js/Common/DataModel/IncrementalOctreePointLocator.js","webpack:///../../../node_modules/@kitware/vtk.js/Filters/General/ContourTriangulator/Constants.js","webpack:///../../../node_modules/@kitware/vtk.js/Filters/General/ContourTriangulator/helper.js","webpack:///../../../node_modules/@kitware/vtk.js/Filters/General/ContourTriangulator.js","webpack:///../../../node_modules/@kitware/vtk.js/Filters/General/ClipClosedSurface/Constants.js","webpack:///../../../node_modules/@kitware/vtk.js/Filters/General/ClipClosedSurface.js","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/pointToString.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/displayTools/Surface/addSurfaceToElement.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/displayTools/Surface/surfaceDisplay.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/stateManagement/segmentation/addSegmentationRepresentations.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/stateManagement/segmentation/activeSegmentation.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/stateManagement/segmentation/segmentLocking.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/stateManagement/segmentation/config/segmentationColor.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/stateManagement/segmentation/config/segmentationVisibility.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/stateManagement/segmentation/segmentIndex.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/base/BaseTool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/drawingSvg/getSvgDrawingHelper.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/drawingSvg/draw.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/drawingSvg/_getHash.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/drawingSvg/setAttributesIfNecessary.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/drawingSvg/setNewAttributesIfValid.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/drawingSvg/drawCircle.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/drawingSvg/drawEllipse.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/drawingSvg/drawHandles.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/drawingSvg/drawLine.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/drawingSvg/drawPolyline.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/drawingSvg/drawTextBox.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/math/vec2/findClosestPoint.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/drawingSvg/drawLink.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/drawingSvg/drawLinkedTextBox.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/drawingSvg/drawRect.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/drawingSvg/drawArrow.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/drawingSvg/drawRedactionRect.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/getToolsWithModesForElement.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/triggerAnnotationRender.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/planar/filterAnnotationsWithinSlice.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/planar/filterAnnotationsForDisplay.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/stateManagement/annotation/config/ToolStyle.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/stateManagement/annotation/config/helpers.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/stateManagement/annotation/config/getState.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/stateManagement/annotation/config/getFont.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/base/AnnotationDisplayTool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/base/AnnotationTool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/displayTools/SegmentationDisplayTool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/segmentation/triggerSegmentationRender.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventListeners/segmentation/segmentationRepresentationModifiedEventListener.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventListeners/segmentation/segmentationDataModifiedEventListener.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventListeners/segmentation/segmentationRepresentationRemovedEventListener.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventListeners/segmentation/segmentationModifiedEventListener.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/getAnnotationNearPoint.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/isObject.js","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/debounce.js","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/throttle.js","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/clip.js","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/calibrateImageSpacing.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/triggerAnnotationRenderForViewportIds.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/scroll.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/viewport/jumpToSlice.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/pointInShapeCallback.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/boundingBox/extend2DBoundingBoxInViewAxis.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/boundingBox/getBoundingBoxAroundShape.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/pointInSurroundingSphereCallback.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/math/sphere/pointInSphere.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/roundNumber.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/segmentation/strategies/utils/isWithinThreshold.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/segmentation/strategies/fillSphere.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/segmentation/strategies/eraseSphere.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/math/ellipse/pointInEllipse.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/math/ellipse/getCanvasEllipseCorners.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/segmentation/strategies/fillCircle.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/segmentation/strategies/eraseCircle.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/cursors/MouseCursor.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/cursors/ImageMouseCursor.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/cursors/SVGCursorDescriptor.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/cursors/SVGMouseCursor.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/cursors/setCursorForElement.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/cursors/index.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/cursors/elementCursor.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/segmentation/BrushTool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/segmentation/utilities.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/segmentation/thresholdVolumeByRange.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/PanTool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/TrackballRotateTool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/WindowLevelTool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/StackScrollTool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/math/angle/angleBetweenLines.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/PlanarRotateTool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/StackScrollToolMouseWheelTool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/ZoomTool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/VolumeRotateMouseWheelTool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/planar/getWorldWidthAndHeightFromCorners.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/planar/getPointInLineOfSightWithCriteria.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/planar/index.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/viewport/jumpToWorld.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/MIPJumpToClickTool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/viewportFilters/filterViewportsWithFrameOfReferenceUID.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/viewportFilters/filterViewportsWithToolEnabled.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/viewportFilters/filterViewportsWithParallelNormals.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/viewportFilters/getViewportIdsWithToolToRender.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/math/vec2/liangBarksyClip.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/math/line/distanceToPointSquared.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/math/line/distanceToPoint.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/math/line/intersectLine.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/CrosshairsTool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/MagnifyTool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/math/point/distanceToPoint.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/math/circle/getCanvasCircleRadius.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/math/circle/getCanvasCircleCorners.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/AdvancedMagnifyViewport.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/AdvancedMagnifyViewportManager.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/AdvancedMagnifyTool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/ReferenceLinesTool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/OverlayGridTool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/SegmentationIntersectionTool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/getCalibratedUnits.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/drawing/getTextBoxCoordsCanvas.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/annotation/BidirectionalTool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/annotation/LengthTool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/getModalityUnit.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/viewport/isViewportPreScaled.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/annotation/ProbeTool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/annotation/DragProbeTool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/math/rectangle/distanceToPoint.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/math/basic/Calculator.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/math/basic/BasicStatsCalculator.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/annotation/RectangleROITool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/planar/getWorldWidthAndHeightFromTwoPoints.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/annotation/EllipticalROITool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/annotation/CircleROITool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/math/polyline/getIntersectionWithPolyline.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/math/polyline/getSubPixelSpacingAndXYDirections.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/math/polyline/pointsAreWithinCloseContourProximity.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/math/polyline/addCanvasPointsToArray.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/math/polyline/pointCanProjectOnLine.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/math/polyline/calculateAreaOfPoints.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/planarFreehandROITool/interpolation/interpolateSegmentPoints.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/planarFreehandROITool/interpolation/algorithms/bspline.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/planarFreehandROITool/interpolatePoints.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/annotation/planarFreehandROITool/findOpenUShapedContourVectorToPeak.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/annotation/planarFreehandROITool/drawLoop.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/annotation/planarFreehandROITool/editLoopCommon.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/annotation/planarFreehandROITool/closedContourEditLoop.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/annotation/planarFreehandROITool/openContourEditLoop.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/annotation/planarFreehandROITool/openContourEndEditLoop.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/annotation/planarFreehandROITool/renderMethods.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/annotation/PlanarFreehandROITool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/annotation/ArrowAnnotateTool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/annotation/AngleTool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/math/midPoint.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/annotation/CobbAngleTool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/ReferenceCursors.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/ScaleOverlayTool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/segmentation/strategies/fillRectangle.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/segmentation/strategies/eraseRectangle.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/segmentation/RectangleScissorsTool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/segmentation/CircleScissorsTool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/segmentation/SphereScissorsTool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/segmentation/RectangleROIThresholdTool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/segmentation/RectangleROIStartEndThresholdTool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/segmentation/floodFill.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/segmentation/PaintFillTool.ts","webpack:///../../../node_modules/@kitware/vtk.js/Interaction/Widgets/OrientationMarkerWidget/Constants.js","webpack:///../../../node_modules/@kitware/vtk.js/Interaction/Widgets/OrientationMarkerWidget.js","webpack:///../../../node_modules/@kitware/vtk.js/Common/Core/ImageHelper.js","webpack:///../../../node_modules/@kitware/vtk.js/Rendering/Core/AnnotatedCubeActor/Presets.js","webpack:///../../../node_modules/@kitware/vtk.js/Rendering/Core/AnnotatedCubeActor.js","webpack:///../../../node_modules/@kitware/vtk.js/Filters/Sources/ConeSource.js","webpack:///../../../node_modules/@kitware/vtk.js/Filters/Sources/CylinderSource.js","webpack:///../../../node_modules/@kitware/vtk.js/Filters/Sources/ArrowSource.js","webpack:///../../../node_modules/@kitware/vtk.js/Rendering/Core/AxesActor.js","webpack:///../../../node_modules/fflate/esm/browser.js","webpack:///../../../node_modules/@kitware/vtk.js/IO/Core/DataAccessHelper.js","webpack:///../../../node_modules/@kitware/vtk.js/Common/Core/Base64.js","webpack:///../../../node_modules/@kitware/vtk.js/IO/Core/BinaryHelper.js","webpack:///../../../node_modules/@kitware/vtk.js/Common/Core/Endian.js","webpack:///../../../node_modules/@kitware/vtk.js/IO/Core/DataAccessHelper/LiteHttpDataAccessHelper.js","webpack:///../../../node_modules/@kitware/vtk.js/IO/XML/XMLReader.js","webpack:///../../../node_modules/@kitware/vtk.js/IO/XML/XMLPolyDataReader.js","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/OrientationMarkerTool.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/rectangleROITool/getBoundsIJKFromRectangleAnnotations.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/segmentation/rectangleROIThresholdVolumeByRange.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/segmentation/createMergedLabelmapForIndex.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/segmentation/isValidRepresentationConfig.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/segmentation/getDefaultRepresentationConfig.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/segmentation/createLabelmapVolumeForViewport.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/segmentation/brushSizeForToolGroup.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/segmentation/brushThresholdForToolGroup.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/segmentation/thresholdSegmentationByRange.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/orientation/getOrientationStringLPS.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/orientation/invertOrientationStringLPS.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/cine/events.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/cine/state.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/cine/playClip.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/planarFreehandROITool/interpolateAnnotation.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/planarFreehandROITool/index.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/stackPrefetch/state.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/stackPrefetch/stackPrefetchUtils.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/stackPrefetch/stackPrefetch.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/stackPrefetch/stackContextPrefetch.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/dynamicVolume/getDataInTime.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/dynamicVolume/generateImageFromTimeData.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/polyData/utils.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/voi/colorbar/enums/ColorbarRangeTextPosition.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/voi/colorbar/common/isRangeValid.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/voi/colorbar/common/isColorbarSizeValid.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/voi/colorbar/common/areColorbarRangesEqual.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/voi/colorbar/common/areColorbarSizesEqual.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/voi/colorbar/ColorbarCanvas.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/math/vec3/interpolateVec3.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/voi/colorbar/ColorbarTicks.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/widgets/Widget.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/voi/colorbar/Colorbar.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/voi/colorbar/common/isRangeTextPositionValid.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/voi/colorbar/ViewportColorbar.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/utilities/getVOIMultipliers.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventListeners/annotations/annotationSelectionListener.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventListeners/annotations/annotationModifiedListener.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventDispatchers/imageRenderedEventDispatcher.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventDispatchers/shared/customCallbackHandler.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventDispatchers/mouseEventHandlers/mouseClick.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventDispatchers/mouseEventHandlers/mouseDoubleClick.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/store/filterToolsWithMoveableHandles.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/store/filterToolsWithAnnotationsForElement.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/store/filterMoveableAnnotationTools.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventDispatchers/shared/getMouseModifier.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventDispatchers/shared/getActiveToolForMouseEvent.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventDispatchers/shared/getToolsWithModesForMouseEvent.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventDispatchers/mouseEventHandlers/mouseDownAnnotationAction.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventDispatchers/shared/getToolsWithActionsForMouseEvent.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventDispatchers/mouseEventHandlers/mouseDown.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventDispatchers/mouseEventHandlers/mouseDownActivate.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventDispatchers/mouseEventHandlers/mouseDrag.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventDispatchers/mouseEventHandlers/mouseMove.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventDispatchers/mouseEventHandlers/mouseUp.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventDispatchers/mouseEventHandlers/mouseWheel.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventDispatchers/mouseToolEventDispatcher.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventDispatchers/shared/getActiveToolForKeyboardEvent.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventDispatchers/keyboardEventHandlers/keyDown.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventDispatchers/keyboardEventHandlers/keyUp.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventDispatchers/keyboardToolEventDispatcher.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventDispatchers/cameraModifiedEventDispatcher.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventDispatchers/imageSpacingCalibratedEventDispatcher.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventDispatchers/shared/getActiveToolForTouchEvent.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventDispatchers/shared/getToolsWithModesForTouchEvent.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventDispatchers/touchEventHandlers/touchStart.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventDispatchers/touchEventHandlers/touchStartActivate.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventDispatchers/touchEventHandlers/touchDrag.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventDispatchers/touchEventHandlers/touchEnd.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventDispatchers/touchEventHandlers/touchTap.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventDispatchers/touchEventHandlers/touchPress.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/eventDispatchers/touchToolEventDispatcher.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/store/addEnabledElement.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/store/SynchronizerManager/getSynchronizersForViewport.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/store/ToolGroupManager/getToolGroupForViewport.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/store/removeEnabledElement.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/store/cancelActiveManipulations.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/store/SynchronizerManager/Synchronizer.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/store/SynchronizerManager/createSynchronizer.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/store/SynchronizerManager/destroy.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/store/SynchronizerManager/getSynchronizer.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/store/SynchronizerManager/getAllSynchronizers.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/store/SynchronizerManager/destroySynchronizer.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/store/ToolGroupManager/ToolGroup.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/store/ToolGroupManager/createToolGroup.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/store/ToolGroupManager/destroyToolGroup.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/store/ToolGroupManager/destroy.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/store/ToolGroupManager/getToolGroup.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/store/ToolGroupManager/getAllToolGroups.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/store/ToolGroupManager/getToolGroupsWithToolName.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/stateManagement/annotation/annotationState.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/stateManagement/annotation/helpers/state.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/init.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/synchronizers/callbacks/cameraSyncCallback.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/synchronizers/synchronizers/createCameraPositionSynchronizer.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/synchronizers/callbacks/voiSyncCallback.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/synchronizers/synchronizers/createVOISynchronizer.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/synchronizers/callbacks/zoomPanSyncCallback.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/synchronizers/synchronizers/createZoomPanSynchronizer.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/synchronizers/callbacks/stackImageSyncCallback.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/synchronizers/callbacks/areViewportsCoplanar .ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/synchronizers/synchronizers/createStackImageSynchronizer.ts","webpack:///../../../node_modules/@cornerstonejs/tools/src/tools/annotation/VideoRedactionTool.ts","webpack:///../../../node_modules/@kitware/vtk.js/Common/DataModel/EdgeLocator.js","webpack:///../../../node_modules/lodash.get/index.js","webpack:///../../../node_modules/xmlbuilder2/lib/xmlbuilder2.min.js"],"sourcesContent":["/**\n * Mouse This enum enumerates the different buttons returned by `.buttons` on the mouse event.\n * These values are used when setting a tool active in a tool group.\n *\n * See also: https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/buttons\n */\nenum MouseBindings {\n  /** usually the left button */\n  Primary = 1,\n  /** usually the right button */\n  Secondary = 2,\n  Primary_And_Secondary = 3,\n  /** usually mouse wheel button */\n  Auxiliary = 4,\n  Primary_And_Auxiliary = 5,\n  Secondary_And_Auxiliary = 6,\n  Primary_And_Secondary_And_Auxiliary = 7,\n  /** usually \"Browser Back\" button */\n  Fourth_Button = 8,\n  /** usually \"Browser Forward\" button */\n  Fifth_Button = 16,\n}\n\nenum KeyboardBindings {\n  Shift = 16,\n  Ctrl = 17,\n  Alt = 18,\n  Meta = 91,\n  ShiftCtrl = 1617,\n  ShiftAlt = 1618,\n  ShiftMeta = 1691,\n  CtrlAlt = 1718,\n  CtrlMeta = 1791,\n  AltMeta = 1891,\n}\n\nexport { MouseBindings, KeyboardBindings };\n","/**\n * ToolModes - This enum defines the 4 tool states which are available.\n */\nenum ToolModes {\n  /**\n   * Active:\n   * - Can be actively used by mouse/touch events mapped to its `ToolBinding`s.\n   * - Can add data if an annotation tool.\n   * - Can be passively interacted by grabbing a tool or its handles.\n   * - Renders data if the tool has a `renderAnnotation` method.\n   */\n  Active = 'Active',\n  /**\n   * Passive:\n   * - Can be passively interacted by grabbing a tool or its handles.\n   * - Renders data if the tool has a `renderAnnotation` method.\n   */\n  Passive = 'Passive',\n  /**\n   * Enabled:\n   * - Renders data if the tool has a `renderAnnotation` method.\n   */\n  Enabled = 'Enabled',\n  /**\n   * Disabled:\n   * - Annotation does not render.\n   */\n  Disabled = 'Disabled',\n}\n\nexport default ToolModes;\n","/**\n * AnnotationStyleStates - This enum defines the 4 possible states available for\n *  a Annotation instance.\n *\n * Default:\n *   The default state for the annotation instance\n * Highlighted:\n *   The annotation should be rendered in \"highlighted\" mode in response to\n *   direct user interaction;\n * Selected:\n *   The annotation has been selected by the user;\n * Locked:\n *   The annotation has been locked;\n */\nenum AnnotationStyleStates {\n  Default = '',\n  Highlighted = 'Highlighted',\n  Selected = 'Selected',\n  Locked = 'Locked',\n}\n\nexport default AnnotationStyleStates;\n","/**\n *  The events for cornerstoneTools3D Tools. Native Mouse and Keyboard events are\n *  captured, normalized, and re-triggered with a `CORNERSTONE_TOOLS` prefix. This\n *  allows us to handle events consistently across different browsers.\n *\n */\nenum Events {\n  ///////////////////////////////////////\n  //            Tools\n  ///////////////////////////////////////\n\n  /**\n   * Triggers on the eventTarget when a new tools is activated.\n   *\n   * Make use of {@link EventTypes.ToolActivatedEventType | Tool Activated Event Type  }\n   * for typing your event listeners for this tool activated event, and see what event\n   * detail is included in {@link EventTypes.ToolActivatedEventDetail | Tool Activated Event Detail}.\n   */\n  TOOL_ACTIVATED = 'CORNERSTONE_TOOLS_TOOL_ACTIVATED',\n\n  /**\n   * Triggers on the eventTarget when a mode of a tool is changed (active, passive, enabled and disabled).\n   *\n   * Make use of {@link EventTypes.ToolModeChangedEventType | Tool Mode Changed Event Type  }\n   * for typing your event listeners for this tool activated event, and see what event\n   * detail is included in {@link EventTypes.ToolModeChangedEventDetail | Tool Mode Changed Event Detail}.\n   */\n  TOOL_MODE_CHANGED = 'CORNERSTONE_TOOLS_TOOL_MODE_CHANGED',\n\n  ///////////////////////////////////////\n  //            Annotations\n  ///////////////////////////////////////\n\n  /**\n   * Triggers on the eventTarget when a new annotation is added to the state.\n   *\n   * Make use of {@link EventTypes.AnnotationAddedEventType | Annotation Added Event Type  }\n   * for typing your event listeners for this annotation added event, and see what event\n   * detail is included in {@link EventTypes.AnnotationAddedEventDetail | Annotation Added Event Detail}.\n   */\n  ANNOTATION_ADDED = 'CORNERSTONE_TOOLS_ANNOTATION_ADDED',\n\n  /**\n   * Triggers on the eventTarget when a new annotation is completed its drawing\n   * Make use of {@link EventTypes.AnnotationCompletedEventType | Annotation Completed Event Type }\n   * for typing your event listeners for this annotation completed event, and see what event\n   * detail is included in {@link EventTypes.AnnotationCompletedEventDetail | Annotation Completed Event Detail}.\n   */\n  ANNOTATION_COMPLETED = 'CORNERSTONE_TOOLS_ANNOTATION_COMPLETED',\n\n  /**\n   * Triggers on the eventTarget when an annotation is modified (e.g. a handle is modified).\n   * Make use of {@link EventTypes.AnnotationModifiedEventType | Annotation Modified Event Type}\n   * for typing your event listeners for this annotation modified event, and see what\n   * event detail is included in {@link EventTypes.AnnotationModifiedEventDetail | Annotation Modified Event Detail}.\n   */\n  ANNOTATION_MODIFIED = 'CORNERSTONE_TOOLS_ANNOTATION_MODIFIED',\n\n  /**\n   * Triggers on the eventTarget when an annotation is removed from the annotations manager.\n   * Make use of {@link EventTypes.AnnotationRemovedEventType | Annotation Removed Event Type}\n   * for typing your event listeners for this annotation removed event, and see what\n   * event detail is included in {@link EventTypes.AnnotationRemovedEventDetail | Annotation Removed Event Detail}.\n   */\n  ANNOTATION_REMOVED = 'CORNERSTONE_TOOLS_ANNOTATION_REMOVED',\n\n  /**\n   * Triggers on the eventTarget when an annotation selection status is changed.\n   * Make use of {@link EventTypes.AnnotationSelectionChangeEventType | Annotation Selection Change Event Type}\n   * for typing your event listeners for this annotation selection change event, and see what\n   * event detail is included in {@link EventTypes.AnnotationSelectionChangeEventDetail | Annotation Selection Change Event Detail}.\n   */\n  ANNOTATION_SELECTION_CHANGE = 'CORNERSTONE_TOOLS_ANNOTATION_SELECTION_CHANGE',\n\n  /**\n   * Triggers on the eventTarget when an annotation locked status is changed.\n   * Make use of {@link EventTypes.AnnotationLockChangeEventType | Annotation Lock Change Event Type}\n   * for typing your event listeners for this annotation lock change event, and see what\n   * event detail is included in {@link EventTypes.AnnotationLockChangeEventDetail | Annotation Lock Change Event Detail}.\n   */\n  ANNOTATION_LOCK_CHANGE = 'CORNERSTONE_TOOLS_ANNOTATION_LOCK_CHANGE',\n\n  /**\n   * Triggers on the eventTarget when an annotation visible status is changed.\n   * Make use of {@link EventTypes.AnnotationVisibilityChangeEventType | Annotation Visible Change Event Type}\n   * for typing your event listeners for this annotation Hide change event, and see what\n   * event detail is included in {@link EventTypes.AnnotationVisibilityChangeEventDetail | Annotation Visible Change Event Detail}.\n   */\n  ANNOTATION_VISIBILITY_CHANGE = 'CORNERSTONE_TOOLS_ANNOTATION_VISIBILITY_CHANGE',\n\n  /**\n   * Triggers on the eventTarget when an annotation is rendered.\n   * Make use of {@link EventTypes.AnnotationRenderedEventType | Annotation Rendered Event Type}\n   * for typing your event listeners for this annotation rendered event, and see what\n   * event detail is included in {@link EventTypes.AnnotationRenderedEventDetail | Annotation Rendered Event Detail}.\n   */\n  ANNOTATION_RENDERED = 'CORNERSTONE_TOOLS_ANNOTATION_RENDERED',\n\n  ///////////////////////////////////////\n  //        Segmentations Events\n  ///////////////////////////////////////\n\n  /**\n   * Triggers on the eventTarget when a Segmentation is updated in the state manager.\n   * Make use of {@link EventTypes.SegmentationModifiedEventType | Segmentation Modified Event Type}\n   * for typing your event listeners for this segmentation modified event, and see what\n   * event detail is included in {@link EventTypes.SegmentationModifiedEventDetail | Segmentation Modified Event Detail}.\n   */\n  SEGMENTATION_MODIFIED = 'CORNERSTONE_TOOLS_SEGMENTATION_MODIFIED',\n\n  /**\n   * Triggers on the eventTarget when a Segmentation is rendered by the Segmentation Rendering Engine.\n   * Make use of {@link EventTypes.SegmentationRenderedEventType | Segmentation Rendered Event Type}\n   * for typing your event listeners for this segmentation rendered event, and see what\n   * event detail is included in {@link EventTypes.SegmentationRenderedEventDetail | Segmentation Rendered Event Detail}.\n   */\n  SEGMENTATION_RENDERED = 'CORNERSTONE_TOOLS_SEGMENTATION_RENDERED',\n\n  /**\n   * Triggers on the eventTarget when a Segmentation representation of a toolGroup is modified in the state manager.\n   * Make use of {@link EventTypes.SegmentationRepresentationModifiedEventType | Segmentation Representation Modified Event Type}\n   * for typing your event listeners for this segmentation representation modified event, and see what\n   * event detail is included in {@link EventTypes.SegmentationRepresentationModifiedEventDetail | Segmentation Representation Modified Event Detail}.\n   */\n  SEGMENTATION_REPRESENTATION_MODIFIED = 'CORNERSTONE_TOOLS_SEGMENTATION_REPRESENTATION_MODIFIED',\n\n  /**\n   * Triggers on the eventTarget when a Segmentation is removed from the state manager.\n   * Make use of {@link EventTypes.SegmentationRemovedEventType | Segmentation Removed Event Type}\n   * for typing your event listeners for this segmentation removed event, and see what\n   * event detail is included in {@link EventTypes.SegmentationRemovedEventDetail | Segmentation Removed Event Detail}.\n   */\n  SEGMENTATION_REMOVED = 'CORNERSTONE_TOOLS_SEGMENTATION_REMOVED',\n\n  /**\n   * Triggers on the eventTarget when a Segmentation representation of a toolGroup is removed in the state manager.\n   * Make use of {@link EventTypes.SegmentationRepresentationRemovedEventType | Segmentation Representation Removed Event Type}\n   * for typing your event listeners for this segmentation representation removed event, and see what\n   * event detail is included in {@link EventTypes.SegmentationRepresentationRemovedEventDetail | Segmentation Representation Removed Event Detail}.\n   */\n  SEGMENTATION_REPRESENTATION_REMOVED = 'CORNERSTONE_TOOLS_SEGMENTATION_REPRESENTATION_REMOVED',\n\n  /**\n   * Triggers on the eventTarget when a Segmentation data is modified (e.g., by brush tool).\n   * Make use of {@link EventTypes.SegmentationDataModifiedEventType | Segmentation Data Modified Event Type}\n   * for typing your event listeners for this segmentation data modified event, and see what\n   * event detail is included in {@link EventTypes.SegmentationDataModifiedEventDetail | Segmentation Data Modified Event Detail}.\n   */\n  SEGMENTATION_DATA_MODIFIED = 'CORNERSTONE_TOOLS_SEGMENTATION_DATA_MODIFIED',\n\n  ///////////////////////////////////////\n  //         Keyboard Events\n  ///////////////////////////////////////\n\n  /**\n   * Triggers on the eventTarget when a key on the keyboard is pressed.\n   * Make use of {@link EventTypes.KeyDownEventType | Key Down Event Type}\n   * for typing your event listeners for this key down event, and see what\n   * event detail is included in {@link EventTypes.KeyDownEventDetail | Key Down Event Detail}.\n   */\n  KEY_DOWN = 'CORNERSTONE_TOOLS_KEY_DOWN',\n\n  /**\n   * Triggers on the eventTarget when a key on the keyboard is released.\n   * Make use of {@link EventTypes.KeyUpEventType | Key Up Event Type}\n   * for typing your event listeners for this key up event, and see what\n   * event detail is included in {@link EventTypes.KeyUpEventDetail | Key Up Event Detail}.\n   */\n  KEY_UP = 'CORNERSTONE_TOOLS_KEY_UP',\n\n  ///////////////////////////////////////\n  //      Mouse Events\n  ///////////////////////////////////////\n\n  /**\n   * Triggers on the eventTarget when the mouse is pressed down, it is CornerstoneTools normalized event.\n   * Make use of {@link EventTypes.MouseDownEventType | Mouse Down Event Type}\n   * for typing your event listeners for this mouse down event, and see what\n   * event detail is included in {@link EventTypes.MouseDownEventDetail | Mouse Down Event Detail}.\n   */\n  MOUSE_DOWN = 'CORNERSTONE_TOOLS_MOUSE_DOWN',\n\n  /**\n   * Triggers on the eventTarget when the mouse is released, it is CornerstoneTools normalized event.\n   * Make use of {@link EventTypes.MouseUpEventType | Mouse Up Event Type}\n   * for typing your event listeners for this mouse up event, and see what\n   * event detail is included in {@link EventTypes.MouseUpEventDetail | Mouse Up Event Detail}.\n   */\n  MOUSE_UP = 'CORNERSTONE_TOOLS_MOUSE_UP',\n\n  /**\n   * Triggers on the eventTarget when a handled `MOUSE_DOWN` event does not `stopPropagation`. The hook\n   * we use to create new annotation for mouse events.\n   * Make use of {@link EventTypes.MouseDownActivateEventType | Mouse Down Activate Event Type}\n   * for typing your event listeners for this mouse down activate event, and see what\n   * event detail is included in {@link EventTypes.MouseDownActivateEventDetail | Mouse Down Activate Event Detail}.\n   */\n  MOUSE_DOWN_ACTIVATE = 'CORNERSTONE_TOOLS_MOUSE_DOWN_ACTIVATE',\n\n  /**\n   * Triggers on the event target when mouse is dragging an annotation or textBox.\n   * Make use of {@link EventTypes.MouseDragEventType | Mouse Drag Event Type}\n   * for typing your event listeners for this mouse drag event, and see what\n   * event detail is included in {@link EventTypes.MouseDragEventDetail | Mouse Drag Event Detail}.\n   */\n  MOUSE_DRAG = 'CORNERSTONE_TOOLS_MOUSE_DRAG',\n\n  /**\n   * Triggers on the eventTarget, when the mouse is moved, it is CornerstoneTools normalized event.\n   * It can be just a mouse move or when double click is performed and annotation\n   * drawing can be performed with just mouse move.\n   * Make use of {@link EventTypes.MouseMoveEventType | Mouse Move Event Type}\n   * for typing your event listeners for this mouse move event, and see what\n   * event detail is included in {@link EventTypes.MouseMoveEventDetail | Mouse Move Event Detail}.\n   */\n  MOUSE_MOVE = 'CORNERSTONE_TOOLS_MOUSE_MOVE',\n\n  /**\n   * Triggers on the eventTarget when a mouse click is detected. It is CornerstoneTools normalized event.\n   * Make use of {@link EventTypes.MouseClickEventType | Mouse Click Event Type}\n   * for typing your event listeners for this mouse click event, and see what\n   * event detail is included in {@link EventTypes.MouseClickEventDetail | Mouse Click Event Detail}.\n   */\n  MOUSE_CLICK = 'CORNERSTONE_TOOLS_MOUSE_CLICK',\n\n  /**\n   * Triggers on the eventTarget when a mouse double click is detected. It is CornerstoneTools normalized event.\n   * Make use of {@link EventTypes.MouseDoubleClickEventType | Mouse Double Click Event Type}\n   * for typing your event listeners for this mouse double click event, and see what\n   * event detail is included in {@link EventTypes.MouseDoubleClickEventDetail | Mouse Double Click Event Detail}.\n   */\n  MOUSE_DOUBLE_CLICK = 'CORNERSTONE_TOOLS_MOUSE_DOUBLE_CLICK',\n\n  /**\n   * Triggers on the eventTarget when a mouse wheel event is detected. It is CornerstoneTools normalized event.\n   * Make use of {@link EventTypes.MouseWheelEventType | Mouse Wheel Event Type}\n   * for typing your event listeners for this mouse wheel event, and see what\n   * event detail is included in {@link EventTypes.MouseWheelEventDetail | Mouse Wheel Event Detail}.\n   */\n  MOUSE_WHEEL = 'CORNERSTONE_TOOLS_MOUSE_WHEEL',\n\n  // Todo: not being fired as of now\n  // ANNOTATION_COMPLETED = 'CORNERSTONE_TOOLS_ANNOTATION_COMPLETED',\n  // Todo: not implemented yet\n  // KEY_PRESS = 'CORNERSTONE_TOOLS_KEY_PRESS',\n\n  //////////////////////\n  //   Touch Events   //\n  //////////////////////\n  // The event flow looks like the following\n  // Touch Start -> (optional) Touch Press -> Touch Drag -> (optional) Touch Swipe -> Touch End\n  // Touch Tap\n  // mousedown\n  // mousedown, Touch Start, and Tap are mutually exclusive events\n  TOUCH_START = 'CORNERSTONE_TOOLS_TOUCH_START',\n  TOUCH_START_ACTIVATE = 'CORNERSTONE_TOOLS_TOUCH_START_ACTIVATE',\n  TOUCH_PRESS = 'CORNERSTONE_TOOLS_TOUCH_PRESS',\n  TOUCH_DRAG = 'CORNERSTONE_TOOLS_TOUCH_DRAG',\n  TOUCH_END = 'CORNERSTONE_TOOLS_TOUCH_END',\n  TOUCH_TAP = 'CORNERSTONE_TOOLS_TAP',\n  TOUCH_SWIPE = 'CORNERSTONE_TOOLS_SWIPE',\n}\n\nexport default Events;\n","/**\n * Segmentations on viewports can be visualized in different ways. This enum\n * defines the different ways of visualizing segmentations. Currently, only\n * labelmap is supported.\n */\nenum SegmentationRepresentations {\n  Labelmap = 'LABELMAP',\n  Contour = 'CONTOUR',\n  Surface = 'SURFACE',\n}\n\nexport default SegmentationRepresentations;\n","enum Swipe {\n  UP = 'UP',\n  DOWN = 'DOWN',\n  LEFT = 'LEFT',\n  RIGHT = 'RIGHT',\n}\n\nexport { Swipe };\n","import { eventTarget, triggerEvent } from '@cornerstonejs/core';\nimport { Events } from '../../enums';\nimport { Annotation } from '../../types';\nimport { AnnotationLockChangeEventDetail } from '../../types/EventTypes';\n\n/*\n * Constants\n */\nconst globalLockedAnnotationsSet: Set<Annotation> = new Set();\n\n/*\n * Interface (Public API)\n */\n\n/**\n * Set the \"Locked\" state of a given annotation instance.\n *\n * @triggers ANNOTATION_LOCK_CHANGE\n *\n * @param annotation - The annotation instance which will have\n * its locked state changed. An event will only be triggered if the locked state\n * of the given annotation instance changed.\n * @param locked - A boolean value indicating if the instance should\n * be locked (true) or not (false)\n */\nfunction setAnnotationLocked(annotation: Annotation, locked = true): void {\n  const detail = makeEventDetail();\n  if (annotation) {\n    if (locked) {\n      lock(annotation, globalLockedAnnotationsSet, detail);\n    } else {\n      unlock(annotation, globalLockedAnnotationsSet, detail);\n    }\n  }\n  publish(detail, globalLockedAnnotationsSet);\n}\n\n/**\n * Clears all the locked annotation\n *\n */\nfunction unlockAllAnnotations(): void {\n  const detail = makeEventDetail();\n  clearLockedAnnotationsSet(globalLockedAnnotationsSet, detail);\n  publish(detail, globalLockedAnnotationsSet);\n}\n\n/**\n * Returns an array of all the annotation that is currently locked\n * @returns An array of tool specific annotation objects.\n *\n */\nfunction getAnnotationsLocked(): Array<Annotation> {\n  return Array.from(globalLockedAnnotationsSet);\n}\n\n/**\n * Given a Annotation object, return true if it is locked.\n * @param annotation - Annotation\n * @returns A boolean value.\n */\nfunction isAnnotationLocked(annotation: Annotation): boolean {\n  return globalLockedAnnotationsSet.has(annotation);\n}\n\n/**\n * Get the number of locked annotation objects in the global set of locked annotation\n * objects.\n * @returns The number of locked annotation objects.\n *\n */\nfunction getAnnotationsLockedCount(): number {\n  return globalLockedAnnotationsSet.size;\n}\n\n/**\n * Properly initialize the isLocked on annotation, and set it as locked if\n * isLocked is true.\n * @param annotation - The annotation object to be checked.\n */\nfunction checkAndDefineIsLockedProperty(annotation: Annotation): void {\n  if (annotation) {\n    const isLocked = !!annotation.isLocked;\n    if (shouldDefineIsLockedProperty(annotation)) {\n      Object.defineProperty(annotation, 'isLocked', {\n        configurable: false,\n        enumerable: true,\n        set: setIsLocked,\n        get: getIsLocked,\n      });\n    }\n    setAnnotationLocked(annotation, isLocked);\n  }\n}\n\n/*\n * Private Helpers\n */\n\nfunction makeEventDetail(): AnnotationLockChangeEventDetail {\n  return Object.freeze({\n    added: [],\n    removed: [],\n    locked: [],\n  });\n}\n\nfunction lock(\n  annotation: Annotation,\n  lockedAnnotationsSet: Set<Annotation>,\n  detail: AnnotationLockChangeEventDetail\n): void {\n  if (!lockedAnnotationsSet.has(annotation)) {\n    lockedAnnotationsSet.add(annotation);\n    detail.added.push(annotation);\n  }\n}\n\nfunction unlock(\n  annotation: Annotation,\n  lockedAnnotationsSet: Set<Annotation>,\n  detail: AnnotationLockChangeEventDetail\n): void {\n  if (lockedAnnotationsSet.delete(annotation)) {\n    detail.removed.push(annotation);\n  }\n}\n\nfunction clearLockedAnnotationsSet(\n  lockedAnnotationsSet: Set<Annotation>,\n  detail: AnnotationLockChangeEventDetail\n): void {\n  lockedAnnotationsSet.forEach((annotation) => {\n    unlock(annotation, lockedAnnotationsSet, detail);\n  });\n}\n\nfunction publish(\n  detail: AnnotationLockChangeEventDetail,\n  lockedAnnotationsSet: Set<Annotation>\n) {\n  if (detail.added.length > 0 || detail.removed.length > 0) {\n    lockedAnnotationsSet.forEach((item) => void detail.locked.push(item));\n    triggerEvent(eventTarget, Events.ANNOTATION_LOCK_CHANGE, detail);\n  }\n}\n\nfunction shouldDefineIsLockedProperty(annotation: Annotation): boolean {\n  const descriptor = Object.getOwnPropertyDescriptor(annotation, 'isLocked');\n  if (descriptor) {\n    return (\n      descriptor.configurable &&\n      (descriptor.set !== setIsLocked || descriptor.get !== getIsLocked)\n    );\n  }\n  return Object.isExtensible(annotation);\n}\n\nfunction setIsLocked(locked: boolean) {\n  setAnnotationLocked(this as Annotation, locked);\n}\n\nfunction getIsLocked() {\n  return isAnnotationLocked(this as Annotation);\n}\n\n/*\n * Exports\n */\n\nexport {\n  setAnnotationLocked,\n  getAnnotationsLocked,\n  getAnnotationsLockedCount,\n  unlockAllAnnotations,\n  isAnnotationLocked,\n  checkAndDefineIsLockedProperty,\n};\n","import { eventTarget, triggerEvent } from '@cornerstonejs/core';\nimport { Events } from '../../enums';\nimport { AnnotationSelectionChangeEventDetail } from '../../types/EventTypes';\nimport { getAnnotation } from './annotationState';\n\n/*\n * Constants\n */\n\nconst selectedAnnotationUIDs: Set<string> = new Set();\n\n/*\n * Interface (Public API)\n */\n\n/**\n * Set a given annotationUID as selected or deselected based on the provided\n * selected value.\n *\n * @param annotationUID - The annotation UID to be selected\n * @param selected - When true, the annotation is selected. When false, the annotation is deselected.\n * @param preserveSelected - When true, preserves existing\n *  selections (i.e., the given annotation is appended to the selection set).\n *  When false (the default behavior) the currently selected items are discarded\n *  (i.e., the given annotation instance replaces the currently selected ones).\n */\nfunction setAnnotationSelected(\n  annotationUID: string,\n  selected = true,\n  preserveSelected = false\n): void {\n  if (selected) {\n    selectAnnotation(annotationUID, preserveSelected);\n  } else {\n    deselectAnnotation(annotationUID);\n  }\n}\n\n/**\n * Set a given annotation as selected.\n *\n * @param annotationUID - The annotation UID to be selected\n * @param preserveSelected - When true, preserves existing\n *  selections (i.e., the given annotation is appended to the selection set).\n *  When false (the default behavior) the currently selected items are discarded\n *  (i.e., the given annotation instance replaces the currently selected ones).\n */\nfunction selectAnnotation(\n  annotationUID: string,\n  preserveSelected = false\n): void {\n  const detail = makeEventDetail();\n  if (!preserveSelected) {\n    clearSelectionSet(selectedAnnotationUIDs, detail);\n  }\n  if (annotationUID && !selectedAnnotationUIDs.has(annotationUID)) {\n    selectedAnnotationUIDs.add(annotationUID);\n    detail.added.push(annotationUID);\n  }\n  publish(detail, selectedAnnotationUIDs);\n}\n\n/**\n * Deselect one or all annotations.\n *\n * @param annotationUID - If an annotation is provided that instance will be removed from\n * the internal selection set. If none is given, ALL selections will be cleared.\n */\nfunction deselectAnnotation(annotationUID?: string): void {\n  const detail = makeEventDetail();\n  if (annotationUID) {\n    if (selectedAnnotationUIDs.delete(annotationUID)) {\n      detail.removed.push(annotationUID);\n    }\n  } else {\n    clearSelectionSet(selectedAnnotationUIDs, detail);\n  }\n  publish(detail, selectedAnnotationUIDs);\n}\n\n/**\n * Return an array of ALL the selected annotationUIDs\n * @returns An array of Annotation UIDs\n */\nfunction getAnnotationsSelected(): Array<string> {\n  return Array.from(selectedAnnotationUIDs);\n}\n\n/**\n * Given a tool name, return ALL the annotationUIDs for that tool that are selected\n * @param toolName - The name of the tool you want to get the selected annotation for\n * @returns An array of annotationUIDs\n */\nfunction getAnnotationsSelectedByToolName(toolName: string): Array<string> {\n  return getAnnotationsSelected().filter((annotationUID) => {\n    const annotation = getAnnotation(annotationUID);\n    return annotation.metadata.toolName === toolName;\n  });\n}\n\n/**\n * Given an annotationUID, return true if it is selected, false\n * otherwise.\n * @param annotationUID - Annotation UID\n * @returns A boolean value.\n */\nfunction isAnnotationSelected(annotationUID: string): boolean {\n  return selectedAnnotationUIDs.has(annotationUID);\n}\n\n/**\n * Return the number of the selected annotation\n * @returns The size of the selected annotation set\n */\nfunction getAnnotationsSelectedCount(): number {\n  return selectedAnnotationUIDs.size;\n}\n\n/*\n * Private Helpers\n */\n\nfunction makeEventDetail(): AnnotationSelectionChangeEventDetail {\n  return Object.freeze({\n    added: [],\n    removed: [],\n    selection: [],\n  });\n}\n\nfunction clearSelectionSet(\n  selectionSet: Set<string>,\n  detail: AnnotationSelectionChangeEventDetail\n): void {\n  selectionSet.forEach((value) => {\n    if (selectionSet.delete(value)) {\n      detail.removed.push(value);\n    }\n  });\n}\n\nfunction publish(\n  detail: AnnotationSelectionChangeEventDetail,\n  selectionSet: Set<string>\n) {\n  if (detail.added.length > 0 || detail.removed.length > 0) {\n    selectionSet.forEach((item) => void detail.selection.push(item));\n    triggerEvent(eventTarget, Events.ANNOTATION_SELECTION_CHANGE, detail);\n  }\n}\n\n/*\n * Exports\n */\n\nexport {\n  setAnnotationSelected,\n  getAnnotationsSelected,\n  getAnnotationsSelectedByToolName,\n  getAnnotationsSelectedCount,\n  deselectAnnotation,\n  isAnnotationSelected,\n};\n","import { eventTarget, triggerEvent } from '@cornerstonejs/core';\nimport { getAnnotation } from './annotationState';\nimport { Events } from '../../enums';\nimport { Annotation } from '../../types';\nimport { AnnotationVisibilityChangeEventDetail } from '../../types/EventTypes';\nimport {\n  isAnnotationSelected,\n  deselectAnnotation,\n} from './annotationSelection';\n\n/*\n * It stores all hidden annotation uids.\n */\nconst globalHiddenAnnotationUIDsSet: Set<string> = new Set();\n\n/*\n * Interface (Public API)\n */\n\n/**\n * Set the \"visible\" state of a given annotation instance.\n *\n * @event ANNOTATION_VISIBILITY_CHANGE\n *\n * @param annotationUID - The annotation uid which will have\n * its visible state changed. An event will only be triggered if the visible state\n * of the given annotation instance changed.\n * @param visible - A boolean value indicating if the instance should\n * be visible (true) or not (false)\n */\nfunction setAnnotationVisibility(annotationUID: string, visible = true): void {\n  const detail = makeEventDetail();\n  if (annotationUID) {\n    if (visible) {\n      show(annotationUID, globalHiddenAnnotationUIDsSet, detail);\n    } else {\n      hide(annotationUID, globalHiddenAnnotationUIDsSet, detail);\n    }\n  }\n  publish(detail);\n}\n\n/**\n * Clears all the hidden annotations.\n *\n */\nfunction showAllAnnotations(): void {\n  const detail = makeEventDetail();\n  globalHiddenAnnotationUIDsSet.forEach((annotationUID) => {\n    show(annotationUID, globalHiddenAnnotationUIDsSet, detail);\n  });\n  publish(detail);\n}\n\n/**\n * Given an annotation UID, return true if it is visible, false if hidden and undefined if does not exist.\n * @param annotationUID - The annotation uid to tell if is visible or not.\n * @returns A boolean value or value if does not exist.\n */\nfunction isAnnotationVisible(annotationUID: string): boolean | undefined {\n  const annotation = getAnnotation(annotationUID);\n\n  if (annotation) {\n    return !globalHiddenAnnotationUIDsSet.has(annotationUID);\n  }\n}\n/**\n * It decorates given annotation with isVisible property.\n * It properly initializes the isVisible on annotation(the property will be create if does not exist yet)\n *\n * @param annotation - The annotation object to be checked.\n */\nfunction checkAndDefineIsVisibleProperty(annotation: Annotation): void {\n  if (annotation) {\n    const isVisible = annotation.isVisible ?? true;\n    if (shouldDefineIsVisibleProperty(annotation)) {\n      Object.defineProperty(annotation, 'isVisible', {\n        configurable: false,\n        enumerable: true,\n        set: setIsVisible,\n        get: getIsVisible,\n      });\n    }\n    setAnnotationVisibility(annotation.annotationUID, isVisible);\n  }\n}\n\n/*\n * Private Helpers\n */\nfunction makeEventDetail(): AnnotationVisibilityChangeEventDetail {\n  return Object.freeze({\n    lastVisible: [],\n    lastHidden: [],\n    hidden: [],\n  });\n}\n\nfunction show(\n  annotationUID: string,\n  annotationUIDsSet: Set<string>,\n  detail: AnnotationVisibilityChangeEventDetail\n): void {\n  if (annotationUIDsSet.delete(annotationUID)) {\n    detail.lastVisible.push(annotationUID);\n  }\n}\n\nfunction hide(\n  annotationUID: string,\n  annotationUIDsSet: Set<string>,\n  detail: AnnotationVisibilityChangeEventDetail\n): void {\n  if (!annotationUIDsSet.has(annotationUID)) {\n    annotationUIDsSet.add(annotationUID);\n    if (isAnnotationSelected(annotationUID)) {\n      deselectAnnotation(annotationUID);\n    }\n    detail.lastHidden.push(annotationUID);\n  }\n}\n\nfunction publish(detail: AnnotationVisibilityChangeEventDetail) {\n  if (detail.lastHidden.length > 0 || detail.lastVisible.length > 0) {\n    globalHiddenAnnotationUIDsSet.forEach(\n      (item) => void detail.hidden.push(item)\n    );\n    triggerEvent(eventTarget, Events.ANNOTATION_VISIBILITY_CHANGE, detail);\n  }\n}\n\nfunction shouldDefineIsVisibleProperty(annotation: Annotation): boolean {\n  const descriptor = Object.getOwnPropertyDescriptor(annotation, 'isVisible');\n  if (descriptor) {\n    return (\n      descriptor.configurable &&\n      (descriptor.set !== setIsVisible || descriptor.get !== getIsVisible)\n    );\n  }\n  return Object.isExtensible(annotation);\n}\n\nfunction setIsVisible(hidden: boolean) {\n  setAnnotationVisibility((this as Annotation).annotationUID, hidden);\n}\n\nfunction getIsVisible() {\n  return isAnnotationVisible((this as Annotation).annotationUID);\n}\n\nexport {\n  setAnnotationVisibility,\n  showAllAnnotations,\n  isAnnotationVisible,\n  checkAndDefineIsVisibleProperty,\n};\n","import cloneDeep from 'lodash.clonedeep';\nimport {\n  Annotation,\n  Annotations,\n  AnnotationState,\n  GroupSpecificAnnotations,\n} from '../../types/AnnotationTypes';\n\nimport { AnnotationGroupSelector, IAnnotationManager } from '../../types';\n\nimport {\n  Enums,\n  eventTarget,\n  getEnabledElement,\n  Types,\n  utilities,\n} from '@cornerstonejs/core';\n\nimport { checkAndDefineIsLockedProperty } from './annotationLocking';\nimport { checkAndDefineIsVisibleProperty } from './annotationVisibility';\n\n/**\n * This is the default annotation manager. It stores annotations by default\n * based on the FrameOfReferenceUID. However, it is possible to override the\n * getAnnotationStateKey function to store annotations based on any other\n * property of the element. When you write your custom annotation manager, you\n * can use the setAnnotationManager function to set your custom annotation.\n *\n * Note that this class is a singleton and should not be instantiated directly.\n * To get the stored annotations information you can use ToolState helpers.\n */\nclass FrameOfReferenceSpecificAnnotationManager implements IAnnotationManager {\n  private annotations: AnnotationState;\n  public readonly uid: string;\n\n  /**\n   * @param uid - The uid of the state manager. If omitted it is autogenerated.\n   */\n  constructor(uid?: string) {\n    if (!uid) {\n      uid = utilities.uuidv4();\n    }\n    this.annotations = {};\n    this.uid = uid;\n\n    // Listen to the IMAGE_VOLUME_MODIFIED event to invalidate data.\n    eventTarget.addEventListener(\n      Enums.Events.IMAGE_VOLUME_MODIFIED,\n      this._imageVolumeModifiedHandler\n    );\n  }\n\n  /**\n   * Default annotation manager works with FrameOfReferenceUID as the key. The\n   * manager adds them under the FrameOfReferenceUID for the element being\n   * annotated.\n   *\n   * @param annotationGroupSelector - element or a string that is provided\n   * to the annotation manager to get the key.\n   * @returns - The annotation state key for the element.\n   */\n  getGroupKey = (annotationGroupSelector: AnnotationGroupSelector): string => {\n    if (typeof annotationGroupSelector === 'string') {\n      return annotationGroupSelector;\n    }\n\n    const element = annotationGroupSelector;\n    const enabledElement = getEnabledElement(element);\n\n    if (!enabledElement) {\n      throw new Error(\n        'Element not enabled, you must have an enabled element if you are not providing a FrameOfReferenceUID'\n      );\n    }\n\n    return enabledElement.FrameOfReferenceUID;\n  };\n\n  /**\n   * When a volume is modified we invalidate all of the `annotations` on the\n   * volume's `FrameOfReferenceUID`. This is mainly to update statistics calculations\n   * when an annotation is drawn whilst data is still loading.\n   *\n   * @param evt - The IMAGE_VOLUME_MODIFIED rendering event.\n   */\n  _imageVolumeModifiedHandler = (\n    evt: Types.EventTypes.ImageVolumeModifiedEvent\n  ) => {\n    const eventDetail = evt.detail;\n    const { FrameOfReferenceUID } = eventDetail;\n\n    const annotations = this.annotations;\n    const frameOfReferenceSpecificAnnotations =\n      annotations[FrameOfReferenceUID];\n\n    if (!frameOfReferenceSpecificAnnotations) {\n      return;\n    }\n\n    Object.keys(frameOfReferenceSpecificAnnotations).forEach((toolName) => {\n      const toolSpecificAnnotations =\n        frameOfReferenceSpecificAnnotations[toolName];\n\n      toolSpecificAnnotations.forEach((annotation) => {\n        const invalidated = annotation.invalidated;\n\n        if (invalidated !== undefined) {\n          annotation.invalidated = true;\n        }\n      });\n    });\n  };\n\n  /**\n   * Returns all the available frameOfReferences inside the state manager\n   * @returns - All the added frames of references inside the manager\n   */\n  getFramesOfReference = (): Array<string> => {\n    return Object.keys(this.annotations);\n  };\n\n  /**\n   * Returns the annotations associated with the specified frameOfReference and tool, or\n   * all annotations for the group if the tool name is not provided.\n   *\n   * @param groupKey - The annotation group key to retrieve annotations for (in default manager it is FrameOfReferenceUID).\n   * @param toolName - Optional. The name of the tool to retrieve annotations for.\n   * @returns The annotations associated with the specified group (default FrameOfReferenceUID) and tool,\n   * or all annotations for the group (FrameOfReferenceUID) if the tool name is not provided.\n   */\n  getAnnotations = (\n    groupKey: string,\n    toolName?: string\n  ): GroupSpecificAnnotations | Annotations => {\n    const annotations = this.annotations;\n\n    if (!annotations[groupKey]) {\n      return [];\n    }\n\n    if (toolName) {\n      return annotations[groupKey][toolName];\n    }\n\n    return annotations[groupKey];\n  };\n\n  /**\n   * Given the unique identified for the some `annotation`, returns the `annotation`\n   * from the `annotations`. Each `annotation` has a unique identifier.\n   *\n   * @param annotationUID - The unique identifier of the `annotation`.\n   * @returns The retrieved `annotation`.\n   */\n  getAnnotation = (annotationUID: string): Annotation | undefined => {\n    const annotations = this.annotations;\n\n    for (const frameOfReferenceUID in annotations) {\n      const frameOfReferenceAnnotations = annotations[frameOfReferenceUID];\n\n      for (const toolName in frameOfReferenceAnnotations) {\n        const toolSpecificAnnotations = frameOfReferenceAnnotations[toolName];\n\n        for (const annotation of toolSpecificAnnotations) {\n          if (annotationUID === annotation.annotationUID) {\n            return annotation;\n          }\n        }\n      }\n    }\n  };\n\n  /**\n   * A function that returns the number of annotations for a given tool in the\n   * specific group (default FrameOfReferenceUID) IF no groupKey (FrameOfReferenceUID) is provided,\n   * it will return the number of annotations for the tool in all groups (FrameOfReferenceUIDs)\n   *\n   * @param groupKey - The annotation group key to retrieve annotations for (in default manager it is FrameOfReferenceUID).\n   * @param toolName - The name of the tool to retrieve data for.\n   *\n   * @returns The number of annotations for a given tool in the state\n   */\n  getNumberOfAnnotations = (groupKey: string, toolName?: string): number => {\n    const annotations = this.getAnnotations(groupKey, toolName);\n\n    if (!annotations.length) {\n      return 0;\n    }\n\n    if (toolName) {\n      return (annotations as Annotations).length;\n    }\n\n    let total = 0;\n\n    for (const toolName in annotations) {\n      total += annotations[toolName].length;\n    }\n\n    return total;\n  };\n\n  /**\n   * Adds an instance of `Annotation` to the `annotations`.\n   *\n   * @param annotation - The annotation to add.\n   * @param groupKey - The annotation group key to add the annotation to (in default manager it is FrameOfReferenceUID).\n   */\n  addAnnotation = (annotation: Annotation, groupKey?: string): void => {\n    const { metadata } = annotation;\n    const { FrameOfReferenceUID, toolName } = metadata;\n\n    groupKey = groupKey || FrameOfReferenceUID;\n\n    const annotations = this.annotations;\n\n    let frameOfReferenceSpecificAnnotations = annotations[groupKey];\n\n    if (!frameOfReferenceSpecificAnnotations) {\n      annotations[groupKey] = {};\n\n      frameOfReferenceSpecificAnnotations = annotations[groupKey];\n    }\n\n    let toolSpecificAnnotations = frameOfReferenceSpecificAnnotations[toolName];\n\n    if (!toolSpecificAnnotations) {\n      frameOfReferenceSpecificAnnotations[toolName] = [];\n\n      toolSpecificAnnotations = frameOfReferenceSpecificAnnotations[toolName];\n    }\n\n    toolSpecificAnnotations.push(annotation);\n    checkAndDefineIsLockedProperty(annotation);\n    checkAndDefineIsVisibleProperty(annotation);\n  };\n\n  /**\n   * Given the unique identified for the some `annotation`, removes the `annotation`\n   * from the `annotations`.\n   *\n   * @param annotationUID - The unique identifier of the `annotation` to remove.\n   */\n  removeAnnotation = (annotationUID: string): void => {\n    const { annotations } = this;\n\n    for (const groupKey in annotations) {\n      const groupAnnotations = annotations[groupKey];\n\n      for (const toolName in groupAnnotations) {\n        const toolAnnotations = groupAnnotations[toolName];\n\n        const index = toolAnnotations.findIndex(\n          (annotation) => annotation.annotationUID === annotationUID\n        );\n\n        if (index !== -1) {\n          toolAnnotations.splice(index, 1);\n\n          if (toolAnnotations.length === 0) {\n            delete groupAnnotations[toolName];\n          }\n        }\n      }\n\n      if (Object.keys(groupAnnotations).length === 0) {\n        delete annotations[groupKey];\n      }\n    }\n  };\n\n  /**\n   * Removes all annotations associated with the specified group (FrameOfReferenceUID) and tool, or\n   * all annotations for the group (FrameOfReferenceUID) if the tool name is not provided.\n   *\n   * @param groupKey - The group key to remove annotations for (in default manager it is FrameOfReferenceUID).\n   * @param toolName - Optional. The name of the tool to remove annotations for.\n   */\n  removeAnnotations = (groupKey: string, toolName?: string): void => {\n    const annotations = this.annotations;\n    if (annotations[groupKey]) {\n      if (toolName) {\n        delete annotations[groupKey][toolName];\n      } else {\n        delete annotations[groupKey];\n      }\n    }\n  };\n\n  /**\n   * Returns a section of the annotations. Useful for serialization.\n   * If both groupKey (default manager is FrameOfReferenceUID) and toolName are provided, returns the corresponding Annotations instance\n   * for that groupKey (FrameOfReferenceUID) and toolName.\n   * If only groupKey is provided, returns the corresponding FrameOfReferenceSpecificAnnotations instance\n   * for that groupKey.\n   * If neither groupKey nor toolName is provided, returns the entire AnnotationState object.\n   * @param groupKey - Optional. The group key (e.g. FrameOfReferenceUID) to retrieve annotations for.\n   * @param toolName - Optional. The name of the tool to retrieve annotations for.\n   * @returns A section of the annotations.\n   */\n  saveAnnotations = (\n    groupKey?: string,\n    toolName?: string\n  ): AnnotationState | GroupSpecificAnnotations | Annotations => {\n    const annotations = this.annotations;\n\n    if (groupKey && toolName) {\n      const frameOfReferenceSpecificAnnotations = annotations[groupKey];\n\n      if (!frameOfReferenceSpecificAnnotations) {\n        return;\n      }\n\n      const toolSpecificAnnotations =\n        frameOfReferenceSpecificAnnotations[toolName];\n\n      return cloneDeep(toolSpecificAnnotations);\n    } else if (groupKey) {\n      const frameOfReferenceSpecificAnnotations = annotations[groupKey];\n\n      return cloneDeep(frameOfReferenceSpecificAnnotations);\n    }\n\n    return cloneDeep(annotations);\n  };\n\n  /**\n   * Restores a section of the `annotations`. Useful for loading in serialized data.\n   *\n   * - If no arguments are given, the entire `AnnotationState` instance is restored.\n   * - If the `FrameOfReferenceUID` is given, the corresponding\n   * `FrameOfReferenceSpecificAnnotations` instance is restored.\n   * - If both the `FrameOfReferenceUID` and the `toolName` are are given, the\n   * corresponding `Annotations` instance is restored.\n   *\n   * @param groupKey - A filter string for restoring only the `annotations` of a specific frame of reference.\n   * @param toolName - A filter string for restoring `annotation` for a specific tool on a specific frame of reference.\n   */\n  restoreAnnotations = (\n    state: AnnotationState | GroupSpecificAnnotations | Annotations,\n    groupKey?: string,\n    toolName?: string\n  ): void => {\n    const annotations = this.annotations;\n\n    if (groupKey && toolName) {\n      // Set Annotations for FrameOfReferenceUID and toolName.\n\n      let frameOfReferenceSpecificAnnotations = annotations[groupKey];\n\n      if (!frameOfReferenceSpecificAnnotations) {\n        annotations[groupKey] = {};\n\n        frameOfReferenceSpecificAnnotations = annotations[groupKey];\n      }\n\n      frameOfReferenceSpecificAnnotations[toolName] = <Annotations>state;\n    } else if (groupKey) {\n      // Set FrameOfReferenceSpecificAnnotations for FrameOfReferenceUID.\n\n      annotations[groupKey] = <GroupSpecificAnnotations>state;\n    } else {\n      // Set entire annotations\n      this.annotations = <AnnotationState>cloneDeep(state);\n    }\n  };\n\n  /**\n   * A function that returns the number of all annotations in the annotation state\n   *\n   * @returns The number of all annotations in the state\n   */\n  getNumberOfAllAnnotations = (): number => {\n    let count = 0;\n    const annotations = this.annotations;\n    for (const groupKey in annotations) {\n      const frameOfReferenceSpecificAnnotations = annotations[groupKey];\n      for (const toolName in frameOfReferenceSpecificAnnotations) {\n        const toolSpecificAnnotations =\n          frameOfReferenceSpecificAnnotations[toolName];\n        count += toolSpecificAnnotations.length;\n      }\n    }\n    return count;\n  };\n\n  /**\n   * Removes all annotations in the annotation state.\n   */\n  removeAllAnnotations = (): void => {\n    this.annotations = {};\n  };\n}\n\nconst defaultFrameOfReferenceSpecificAnnotationManager =\n  new FrameOfReferenceSpecificAnnotationManager('DEFAULT');\n\nexport { defaultFrameOfReferenceSpecificAnnotationManager };\nexport default FrameOfReferenceSpecificAnnotationManager;\n","let svgNodeCache = {};\n\nexport function resetSvgNodeCache(): void {\n  svgNodeCache = {};\n}\n\nexport default svgNodeCache;\n","import _cloneDeep from 'lodash.clonedeep';\n\nimport { IToolGroup, IToolClassReference } from '../types';\nimport Synchronizer from './SynchronizerManager/Synchronizer';\nimport svgNodeCache, { resetSvgNodeCache } from './svgNodeCache';\n\ninterface ICornerstoneTools3dState {\n  isInteractingWithTool: boolean;\n  isMultiPartToolActive: boolean;\n  tools: Record<\n    string,\n    {\n      toolClass: IToolClassReference;\n    }\n  >;\n  toolGroups: Array<IToolGroup>;\n  synchronizers: Array<Synchronizer>;\n  svgNodeCache: Record<string, unknown>;\n  enabledElements: Array<unknown>;\n  handleRadius: number;\n}\n\nconst defaultState: ICornerstoneTools3dState = {\n  isInteractingWithTool: false,\n  isMultiPartToolActive: false,\n  tools: {},\n  toolGroups: [],\n  synchronizers: [],\n  svgNodeCache: svgNodeCache,\n  // Should this be named... canvases?\n  enabledElements: [], // switch to Uids?\n  handleRadius: 6,\n};\n\nlet state: ICornerstoneTools3dState = {\n  isInteractingWithTool: false,\n  isMultiPartToolActive: false,\n  tools: {},\n  toolGroups: [],\n  synchronizers: [],\n  svgNodeCache: svgNodeCache,\n  // Should this be named... canvases?\n  enabledElements: [], // switch to Uids?\n  handleRadius: 6,\n};\n\nfunction resetCornerstoneToolsState(): void {\n  resetSvgNodeCache();\n  state = _cloneDeep(defaultState);\n}\n\nexport {\n  ICornerstoneTools3dState,\n  resetCornerstoneToolsState,\n  state,\n  state as default,\n};\n","import { state } from './state';\n\n/**\n * Adds the tool class to the cornerstoneTools to be used later. This function\n * should be called before creating the toolGroups and adding tools and setting their mode.\n * The flow is:\n * - addTool(ToolClass) // where ToolClass is the tool constructor imported from CornerstoneTools or created by a 3rd party\n * - createToolGroup(toolGroupId)\n * - toolGroup.addTool(${toolName}) // NOT THE TOOL CLASS\n * - toolGroup.setToolActive(${toolName})\n *\n * @param ToolClass - A tool calls to instantiate.\n * @param toolOptions - The tool-specific configuration options for the tool.\n * @returns\n */\nexport function addTool(ToolClass): void {\n  // Check if tool exists and name is not undefined\n  const toolName = ToolClass.toolName;\n  const toolAlreadyAdded = state.tools[toolName] !== undefined;\n\n  if (!toolName) {\n    throw new Error(`No Tool Found for the ToolClass ${ToolClass.name}`);\n  }\n\n  if (toolAlreadyAdded) {\n    throw new Error(`${toolName} has already been added globally`);\n  }\n\n  // Stores the toolNames and ToolClass to be instantiated in the toolGroup on toolGroup.addTool\n  state.tools[toolName] = {\n    toolClass: ToolClass,\n  };\n}\n\n/**\n * Removes the tool class from the cornerstoneTools.\n *\n * @param ToolClass - A tool calls to instantiate.\n */\nexport function removeTool(ToolClass): void {\n  const toolName = ToolClass.toolName;\n\n  if (!toolName) {\n    throw new Error(`No tool found for: ${ToolClass.name}`);\n  }\n\n  if (!state.tools[toolName] !== undefined) {\n    delete state.tools[toolName];\n  } else {\n    throw new Error(\n      `${toolName} cannot be removed because it has not been added`\n    );\n  }\n}\n\nexport default addTool;\n","import { getEnabledElement } from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\nimport { IPoints } from '../../types';\n\n/**\n * Given a native mouse event, get the associated cornerstone3D enabled element\n * and derive a set of coordinates useful for tools.\n * @param evt - The Mouse event.\n * @param element - The DOM HTMLDivElement that the event was triggered on.\n * @returns The points related to the event in the form of a `IPoints` object containing\n * the following properties: `page`, `client`, `canvas`, and `world` details of the event.\n */\nexport default function getMouseEventPoints(\n  evt: MouseEvent,\n  element?: HTMLDivElement\n): IPoints {\n  const elementToUse = element || (evt.currentTarget as HTMLDivElement);\n  const { viewport } = getEnabledElement(elementToUse);\n  const clientPoint = _clientToPoint(evt);\n  const pagePoint = _pageToPoint(evt);\n  const canvasPoint = _pagePointsToCanvasPoints(elementToUse, pagePoint);\n  const worldPoint = viewport.canvasToWorld(canvasPoint);\n\n  return {\n    page: pagePoint,\n    client: clientPoint,\n    canvas: canvasPoint,\n    world: worldPoint,\n  };\n}\n\n/**\n * Converts point from page coordinates to canvas coordinates.\n * @param element - HTMLDivElement\n * @param pagePoint - Point in page coordinates pageX and pageY\n *\n * @returns The canvas coordinate points\n */\nfunction _pagePointsToCanvasPoints(\n  element: HTMLDivElement,\n  pagePoint: Types.Point2\n): Types.Point2 {\n  const rect = element.getBoundingClientRect();\n  return [\n    pagePoint[0] - rect.left - window.pageXOffset,\n    pagePoint[1] - rect.top - window.pageYOffset,\n  ];\n}\n\n/**\n * Converts the event's `pageX` and `pageY` properties to Types.Point2 format\n *\n * @param evt - The Mouse `Event`\n */\nfunction _pageToPoint(evt: MouseEvent): Types.Point2 {\n  return [evt.pageX, evt.pageY];\n}\n\n/**\n * Converts the event's `clientX` and `clientY` properties to Types.Point2 format\n * @param evt - The Mouse `Event`\n */\nfunction _clientToPoint(evt: MouseEvent): Types.Point2 {\n  return [evt.clientX, evt.clientY];\n}\n","import { getEnabledElement, triggerEvent } from '@cornerstonejs/core';\nimport Events from '../../enums/Events';\nimport getMouseEventPoints from './getMouseEventPoints';\nimport { EventTypes, IPoints } from '../../types';\n\n/**\n * Captures and normalizes the double click event. Emits as a cornerstoneTools3D\n * double click event.\n *\n * @param evt - The mouse event.\n */\nfunction mouseDoubleClickListener(evt: MouseEvent): void {\n  const element = <HTMLDivElement>evt.currentTarget;\n\n  const { viewportId, renderingEngineId } = getEnabledElement(element);\n\n  const startPoints = getMouseEventPoints(evt, element);\n  const deltaPoints: IPoints = {\n    page: [0, 0],\n    client: [0, 0],\n    canvas: [0, 0],\n    world: [0, 0, 0],\n  };\n\n  const eventDetail: EventTypes.MouseDoubleClickEventDetail = {\n    event: evt,\n    eventName: Events.MOUSE_DOUBLE_CLICK,\n    viewportId,\n    renderingEngineId,\n    camera: {},\n    element,\n    startPoints,\n    lastPoints: startPoints,\n    currentPoints: startPoints,\n    deltaPoints,\n  };\n\n  const consumed = !triggerEvent(\n    element,\n    Events.MOUSE_DOUBLE_CLICK,\n    eventDetail\n  );\n\n  if (consumed) {\n    // The Events.MOUSE_DOUBLE_CLICK was consumed, thus no other listener should handle this 'dblclick' event.\n\n    // Use stopImmediatePropagation to lessen the possibility that a third party 'dblclick'\n    // listener receives this event. However, there still is no guarantee\n    // that any third party listener has not already handled the event.\n    evt.stopImmediatePropagation();\n    evt.preventDefault();\n  }\n}\n\nexport default mouseDoubleClickListener;\n","import { getEnabledElement, triggerEvent } from '@cornerstonejs/core';\nimport Events from '../../enums/Events';\nimport getMouseEventPoints from './getMouseEventPoints';\nimport { MouseMoveEventDetail } from '../../types/EventTypes';\n\nconst eventName = Events.MOUSE_MOVE;\n\n/**\n * Captures and normalizes the mouse move event. Emits as a cornerstoneTools3D\n * mouse move event.\n *\n * @param evt - The mouse event.\n */\nfunction mouseMoveListener(evt: MouseEvent) {\n  const element = <HTMLDivElement>evt.currentTarget;\n  const enabledElement = getEnabledElement(element);\n  const { renderingEngineId, viewportId } = enabledElement;\n\n  const currentPoints = getMouseEventPoints(evt);\n  const eventDetail: MouseMoveEventDetail = {\n    renderingEngineId,\n    viewportId,\n    camera: {},\n    element,\n    currentPoints,\n    eventName,\n    event: evt,\n  };\n\n  const consumed = !triggerEvent(element, eventName, eventDetail);\n\n  // Events.MOUSE_MOVE was consumed, thus no other listener should handle this event.\n  if (consumed) {\n    evt.stopImmediatePropagation();\n    evt.preventDefault();\n  }\n}\n\nexport default mouseMoveListener;\n","import { getEnabledElement, triggerEvent } from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\nimport Events from '../../enums/Events';\nimport mouseMoveListener from './mouseMoveListener';\nimport { EventTypes, IPoints } from '../../types';\nimport getMouseEventPoints from './getMouseEventPoints';\n\nconst { MOUSE_DOWN, MOUSE_DOWN_ACTIVATE, MOUSE_CLICK, MOUSE_UP, MOUSE_DRAG } =\n  Events;\n\n// The amount of time in milliseconds within which a browser 'dblclick' event has to occur.\n// Any mouse down, up, down and up sequence taking longer than this time is considered to\n// NOT be a double click and any browser 'dblclick' event that subsequently occurs as a result\n// of such a sequence will be ignored. It is best to set this to a value that is less\n// than the system value for detecting a double click. Setting something too large\n// might detect a double click that does not constitute a browser 'dblclick' and thus\n// no mouse events for the sequence will get fired at all.\n//\n// TODO This module should detect and fire 'dblclick' events at its discretion and\n// ignore all those generated by the browser.\n//\nconst DOUBLE_CLICK_TOLERANCE_MS = 400;\n\n// This tolerance is how long to accept a secondary button down\nconst MULTI_BUTTON_TOLERANCE_MS = 150;\n\n// A drag (projected distance) during the double click timeout that is greater than this\n// value will cancel the timeout and suppress any double click that might occur.\n// This tolerance is particularly important on touch devices where some movement\n// might occur between the two clicks.\n//\n// TODO revisit this value for touch devices\n//\nconst DOUBLE_CLICK_DRAG_TOLERANCE = 3;\n\ninterface IMouseDownListenerState {\n  mouseButton: number;\n  element: HTMLDivElement;\n  renderingEngineId: string;\n  viewportId: string;\n  isClickEvent: boolean;\n  clickDelay: number;\n  preventClickTimeout: ReturnType<typeof setTimeout>;\n  startPoints: IPoints;\n  lastPoints: IPoints;\n}\n\ninterface IDoubleClickState {\n  doubleClickTimeout: ReturnType<typeof setTimeout>;\n  mouseDownEvent: MouseEvent;\n  mouseUpEvent: MouseEvent;\n  ignoreDoubleClick: boolean;\n}\n\n// STATE\nconst defaultState: IMouseDownListenerState = {\n  mouseButton: undefined,\n  //\n  element: null,\n  renderingEngineId: undefined,\n  viewportId: undefined,\n  //\n  isClickEvent: true,\n  clickDelay: 200,\n  preventClickTimeout: null,\n  startPoints: {\n    page: [0, 0],\n    client: [0, 0],\n    canvas: [0, 0],\n    world: [0, 0, 0],\n  },\n  lastPoints: {\n    page: [0, 0],\n    client: [0, 0],\n    canvas: [0, 0],\n    world: [0, 0, 0],\n  },\n};\n\nlet state: IMouseDownListenerState = {\n  mouseButton: undefined,\n  //\n  renderingEngineId: undefined,\n  viewportId: undefined,\n  //\n  isClickEvent: true,\n  clickDelay: 200,\n  element: null,\n  preventClickTimeout: null,\n  startPoints: {\n    page: [0, 0],\n    client: [0, 0],\n    canvas: [0, 0],\n    world: [0, 0, 0],\n  },\n  lastPoints: {\n    page: [0, 0],\n    client: [0, 0],\n    canvas: [0, 0],\n    world: [0, 0, 0],\n  },\n};\n\nconst doubleClickState: IDoubleClickState = {\n  doubleClickTimeout: null,\n  mouseDownEvent: null,\n  mouseUpEvent: null,\n  ignoreDoubleClick: false,\n};\n\n/**\n * Listens to mouse down events from the DOM and depending on interaction and further\n * interaction can emit the following mouse events:\n *\n * - MOUSE_DOWN\n * - MOUSE_DOWN_ACTIVATE\n * - MOUSE_DRAG (move while down)\n * - MOUSE_UP\n * - MOUSE_CLICK\n *\n * The mouse down is NOT handled immediately. Instead, a timeout is started to\n * determine if this mouse down is the first in a sequence that constitutes a\n * double click.\n *\n * @param evt - The Mouse event.\n * @private\n */\nfunction mouseDownListener(evt: MouseEvent) {\n  if (doubleClickState.doubleClickTimeout) {\n    // A second identical click will be a double click event, so ignore it\n    if (evt.buttons === doubleClickState.mouseDownEvent.buttons) {\n      return;\n    }\n\n    // Record the second button or the changed button event as the initial\n    // button down state so that the multi-button event can be detected\n    doubleClickState.mouseDownEvent = evt;\n\n    // If second button is added, then ensure double click timeout is terminated\n    // and do not handle three or more button gestures.\n    _doStateMouseDownAndUp();\n    return;\n  }\n\n  // Handle multi-button clicks by adding a delay before handling them.\n  // Double clicks (left button only) physically take the user longer, so\n  // use a longer timeout, and for multi-button at the same time, the clicks\n  // are done at the same time by the user, just the system perceives them\n  // separately, so have a short timeout to allow catching both buttons.\n  doubleClickState.doubleClickTimeout = setTimeout(\n    _doStateMouseDownAndUp,\n    evt.buttons === 1 ? DOUBLE_CLICK_TOLERANCE_MS : MULTI_BUTTON_TOLERANCE_MS\n  );\n\n  // First mouse down of a potential double click. So save it and start\n  // a timeout to determine a double click.\n  doubleClickState.mouseDownEvent = evt;\n  doubleClickState.ignoreDoubleClick = false;\n\n  state.element = <HTMLDivElement>evt.currentTarget;\n\n  state.mouseButton = evt.buttons;\n\n  const enabledElement = getEnabledElement(state.element);\n  const { renderingEngineId, viewportId } = enabledElement;\n\n  state.renderingEngineId = renderingEngineId;\n  state.viewportId = viewportId;\n\n  state.preventClickTimeout = setTimeout(\n    _preventClickHandler,\n    state.clickDelay\n  );\n\n  // Prevent CornerstoneToolsMouseMove while mouse is down\n  state.element.removeEventListener('mousemove', mouseMoveListener);\n\n  const startPoints = getMouseEventPoints(evt, state.element);\n  state.startPoints = _copyPoints(startPoints);\n  state.lastPoints = _copyPoints(startPoints);\n\n  document.addEventListener('mouseup', _onMouseUp);\n  document.addEventListener('mousemove', _onMouseDrag);\n}\n\n/**\n * Does the actual mouse down logic if the double click timer has expired or\n * a mouse drag has started.\n * @param evt the mouse down event\n * @private\n */\nfunction _doMouseDown(evt: MouseEvent) {\n  const deltaPoints = _getDeltaPoints(state.startPoints, state.startPoints);\n\n  const eventDetail: EventTypes.MouseDownEventDetail = {\n    event: evt,\n    eventName: MOUSE_DOWN,\n    element: state.element,\n    mouseButton: state.mouseButton,\n    renderingEngineId: state.renderingEngineId,\n    viewportId: state.viewportId,\n    camera: {},\n    startPoints: state.startPoints,\n    lastPoints: state.startPoints,\n    currentPoints: state.startPoints,\n    deltaPoints,\n  };\n\n  state.lastPoints = _copyPoints(eventDetail.lastPoints);\n\n  // by triggering MOUSE_DOWN it checks if this is toolSelection, handle modification etc.\n  // of already existing tools\n  const notConsumed = triggerEvent(\n    eventDetail.element,\n    MOUSE_DOWN,\n    eventDetail\n  );\n\n  // if no tools responded to this event and prevented its default behavior,\n  // create a new tool\n  if (notConsumed) {\n    triggerEvent(eventDetail.element, MOUSE_DOWN_ACTIVATE, eventDetail);\n  }\n}\n\n/**\n *_onMouseDrag - Handle emission of drag events whilst the mouse is depressed.\n *\n * @private\n * @param evt - The mouse event.\n */\nfunction _onMouseDrag(evt: MouseEvent) {\n  const currentPoints = getMouseEventPoints(evt, state.element);\n  const lastPoints = _updateMouseEventsLastPoints(\n    state.element,\n    state.lastPoints\n  );\n\n  const deltaPoints = _getDeltaPoints(currentPoints, lastPoints);\n\n  if (doubleClickState.doubleClickTimeout) {\n    if (_isDragPastDoubleClickTolerance(deltaPoints.canvas)) {\n      // Dragging past the tolerance means no double click should occur.\n      _doStateMouseDownAndUp();\n    } else {\n      return;\n    }\n  }\n\n  const eventDetail: EventTypes.MouseDragEventDetail = {\n    event: evt,\n    eventName: MOUSE_DRAG,\n    mouseButton: state.mouseButton,\n    renderingEngineId: state.renderingEngineId,\n    viewportId: state.viewportId,\n    camera: {},\n    element: state.element,\n    startPoints: _copyPoints(state.startPoints),\n    lastPoints: _copyPoints(lastPoints),\n    currentPoints,\n    deltaPoints,\n  };\n\n  const consumed = !triggerEvent(state.element, MOUSE_DRAG, eventDetail);\n\n  // Events.MOUSE_DRAG was consumed, thus no other listener should handle this event.\n  if (consumed) {\n    evt.stopImmediatePropagation();\n    evt.preventDefault();\n  }\n\n  // Update the last points\n  state.lastPoints = _copyPoints(currentPoints);\n}\n\n/**\n *_onMouseUp - Handle emission of mouse up events, and re-enabling mouse move events.\n *\n * If the mouse up event occurs during a double click timeout, it is either the first or\n * second mouse up of a potential double click sequence. If the first, then it\n * is saved in case the double click timeout expires and a simple mouse down and\n * up have to get executed. If the second, then the latest mouse down, up, down and\n * up constitute a double click and the mouseDoubleClickListener needs to execute.\n *\n * If the mouse up event comes after the double click timeout, then it is simply\n * handled as the up of a mouse down and up sequence.\n *\n * @private\n * @param evt - The mouse event.\n */\nfunction _onMouseUp(evt: MouseEvent): void {\n  // Cancel the timeout preventing the click event from triggering\n  clearTimeout(state.preventClickTimeout);\n\n  if (doubleClickState.doubleClickTimeout) {\n    // received a mouse up while waiting for a double click (via a timeout)\n\n    if (!doubleClickState.mouseUpEvent) {\n      // this is the first mouse up during the double click timeout; we'll need it later if the timeout expires\n      doubleClickState.mouseUpEvent = evt;\n\n      state.element.addEventListener('mousemove', _onMouseMove);\n    } else {\n      // this is the second mouse up of a double click!\n      _cleanUp();\n    }\n  } else {\n    // Handle the actual mouse up. Note that it may have occurred during the double click timeout or\n    // after it expired. In either case this block is being executed after the time out has expired\n    // or after a drag started.\n\n    const eventName = state.isClickEvent ? MOUSE_CLICK : MOUSE_UP;\n\n    const currentPoints = getMouseEventPoints(evt, state.element);\n    const deltaPoints = _getDeltaPoints(currentPoints, state.lastPoints);\n    const eventDetail:\n      | EventTypes.MouseUpEventDetail\n      | EventTypes.MouseClickEventType = {\n      event: evt,\n      eventName,\n      mouseButton: state.mouseButton,\n      element: state.element,\n      renderingEngineId: state.renderingEngineId,\n      viewportId: state.viewportId,\n      camera: {},\n      startPoints: _copyPoints(state.startPoints),\n      lastPoints: _copyPoints(state.lastPoints),\n      currentPoints,\n      deltaPoints,\n    };\n\n    triggerEvent(eventDetail.element, eventName, eventDetail);\n\n    _cleanUp();\n  }\n\n  // Remove the drag as soon as we get the mouse up because either we have executed\n  // the mouse up logic, or we have not even handled the mouse down logic yet\n  // - either way no drag should/can occur.\n  document.removeEventListener('mousemove', _onMouseDrag);\n}\n\n/**\n * Handles a mouse move on the state element after a mouse down AND up AND\n * while the double click timeout is still running.\n * @private\n * @param evt - The mouse event.\n */\nfunction _onMouseMove(evt: MouseEvent) {\n  const currentPoints = getMouseEventPoints(evt, state.element);\n  const lastPoints = _updateMouseEventsLastPoints(\n    state.element,\n    state.lastPoints\n  );\n\n  const deltaPoints = _getDeltaPoints(currentPoints, lastPoints);\n\n  if (!_isDragPastDoubleClickTolerance(deltaPoints.canvas)) {\n    return;\n  }\n\n  _doStateMouseDownAndUp();\n\n  // Do the move again because during the timeout the global mouse move listener was removed.\n  // Now it is back.\n  mouseMoveListener(evt);\n}\n\n/**\n * Determines if the given delta is past the double click, (projected) drag distance\n * tolerance.\n * @param delta the delta\n * @returns true iff the delta is past the tolerance\n */\nfunction _isDragPastDoubleClickTolerance(delta: Types.Point2): boolean {\n  return Math.abs(delta[0]) + Math.abs(delta[1]) > DOUBLE_CLICK_DRAG_TOLERANCE;\n}\n\nfunction _preventClickHandler() {\n  state.isClickEvent = false;\n}\n\n/**\n * Do a mouse down and potential mouse up using each of the events in the double click state.\n * The events were stored in the state during the timeout to determine a double click.\n *\n * This function should be invoked whenever it is determined that the latest\n * sequence of mouse down(s) and up(s) is NOT a double click. Examples of this include\n * - the expiration of the double click timeout\n * - a mouse drag/move beyond the DOUBLE_CLICK_DRAG_TOLERANCE\n *\n * This function sets the doubleClickState.ignoreDoubleClick flag in case our timeout value\n * or mouse move/drag tolerance is inaccurate and we do indeed get a double click event from\n * the browser later. The flag will be cleared in the mouseDoubleClickIgnoreListener should a\n * double click event get fired. If there is no eventual double click for the latest sequence,\n * the flag spills into the next sequence where it will get cleared at the beginning of that next\n * sequence in mouseDownListener. It is perfectly safe for the flag to be\n * left true when no double click actually occurs because any future double click must start with\n * a mouse down that is handled in this module.\n *\n * @private\n */\nfunction _doStateMouseDownAndUp() {\n  doubleClickState.ignoreDoubleClick = true;\n\n  const mouseDownEvent = doubleClickState.mouseDownEvent;\n  const mouseUpEvent = doubleClickState.mouseUpEvent;\n\n  _clearDoubleClickTimeoutAndEvents();\n\n  _doMouseDown(mouseDownEvent);\n\n  if (mouseUpEvent) {\n    _onMouseUp(mouseUpEvent);\n  }\n}\n\n/**\n * Clears the mouse events and double click timeout id in the double click state object.\n * The timeout itself is also cleared so that no callback is invoked.\n */\nfunction _clearDoubleClickTimeoutAndEvents() {\n  if (doubleClickState.doubleClickTimeout) {\n    clearTimeout(doubleClickState.doubleClickTimeout);\n    doubleClickState.doubleClickTimeout = null;\n  }\n\n  doubleClickState.mouseDownEvent = null;\n  doubleClickState.mouseUpEvent = null;\n}\n\nfunction _cleanUp() {\n  document.removeEventListener('mouseup', _onMouseUp);\n  state.element?.removeEventListener('mousemove', _onMouseMove);\n\n  // Restore our global mousemove listener\n  state.element?.addEventListener('mousemove', mouseMoveListener);\n\n  _clearDoubleClickTimeoutAndEvents();\n\n  state = JSON.parse(JSON.stringify(defaultState));\n}\n\n/**\n * Copies a set of points.\n * @param points - The `IPoints` instance to copy.\n *\n * @returns A copy of the points.\n */\nfunction _copyPoints(points: IPoints): IPoints {\n  return JSON.parse(JSON.stringify(points));\n}\n\n/**\n * Recalculates the last world coordinate, as the linear transform from client\n * to world could be different if the camera was updated.\n * @param element - The HTML element\n * @param lastPoints - The last points\n */\nfunction _updateMouseEventsLastPoints(\n  element: HTMLDivElement,\n  lastPoints: IPoints\n): IPoints {\n  const { viewport } = getEnabledElement(element);\n  // Need to update the world point to be calculated from the current reference frame,\n  // Which might have changed since the last interaction.\n  const world = viewport.canvasToWorld(lastPoints.canvas);\n\n  return {\n    page: lastPoints.page,\n    client: lastPoints.client,\n    canvas: lastPoints.canvas,\n    world,\n  };\n}\n\n/**\n * Returns the difference between two `IPoints` instances.\n * @param currentPoints - The current points.\n * @param lastPoints -- The last points, to be subtracted from the `currentPoints`.\n *\n * @returns The difference in IPoints format\n */\nfunction _getDeltaPoints(currentPoints: IPoints, lastPoints: IPoints): IPoints {\n  return {\n    page: _subtractPoints2D(currentPoints.page, lastPoints.page),\n    client: _subtractPoints2D(currentPoints.client, lastPoints.client),\n    canvas: _subtractPoints2D(currentPoints.canvas, lastPoints.canvas),\n    world: _subtractPoints3D(currentPoints.world, lastPoints.world),\n  };\n}\n\n/**\n * _subtractPoints - Subtracts `point1` from `point0`.\n * @param point0 - The first point.\n * @param point1 - The second point to subtract from the first.\n *\n * @returns The difference.\n */\nfunction _subtractPoints2D(\n  point0: Types.Point2,\n  point1: Types.Point2\n): Types.Point2 {\n  return [point0[0] - point1[0], point0[1] - point1[1]];\n}\n\nfunction _subtractPoints3D(\n  point0: Types.Point3,\n  point1: Types.Point3\n): Types.Point3 {\n  return [point0[0] - point1[0], point0[1] - point1[1], point0[2] - point1[2]];\n}\n\nexport function getMouseButton(): number {\n  return state.mouseButton;\n}\n\n/**\n * Handles a dblclick event to determine if it should be ignored based on the\n * double click state's ignoreDoubleClick flag. stopImmediatePropagation and\n * preventDefault are used to ignore the event.\n * @param evt browser dblclick event\n */\nexport function mouseDoubleClickIgnoreListener(evt: MouseEvent) {\n  if (doubleClickState.ignoreDoubleClick) {\n    doubleClickState.ignoreDoubleClick = false;\n\n    // Use stopImmediatePropagation to lessen the possibility that a third party 'dblclick'\n    // listener receives this event. However, there still is no guarantee\n    // that any third party listener has not already handled the event.\n    evt.stopImmediatePropagation();\n    evt.preventDefault();\n  } else {\n    // If the embedding application blocked the first mouse down and up\n    // of a double click sequence from reaching this module, then this module\n    // has handled the second mouse down and up and thus needs to clean them up.\n    // Doing a clean up here for the typical double click case is harmless.\n    _cleanUp();\n  }\n}\n\nexport default mouseDownListener;\n","import mouseDoubleClickListener from './mouseDoubleClickListener';\nimport mouseDownListener, {\n  mouseDoubleClickIgnoreListener,\n} from './mouseDownListener';\nimport mouseMoveListener from './mouseMoveListener';\n\n/**\n * Removes mouse event listeners for native mouse event. Enables\n * vtk.js tools flavored events that build on top of existing events to\n * provide more helpful information.\n *\n * @private\n * @param element - The DOM element to remove event listeners from.\n */\nfunction disable(element: HTMLDivElement): void {\n  element.removeEventListener('dblclick', mouseDoubleClickListener);\n  element.removeEventListener('mousedown', mouseDownListener);\n  element.removeEventListener('mousemove', mouseMoveListener);\n  // The mouseDoubleClickIgnoreListener prevents those browser 'dblclick'\n  // events that cornerstone has determined are single clicks from propagating\n  // to other (3rd party) listeners. A capture phase listener is used so that\n  // the 'dblclick' event can be ignored and not propagated ASAP.\n  element.removeEventListener('dblclick', mouseDoubleClickIgnoreListener, {\n    capture: true,\n  });\n}\n\n/**\n * Registers mouse event listeners for native mouse event. Enables\n * vtk.js tools flavored events that build on top of existing events to\n * provide more helpful information.\n *\n * @private\n * @param element - The DOM element to register event listeners on.\n */\nfunction enable(element: HTMLDivElement): void {\n  // Prevent handlers from being attached multiple times\n  disable(element);\n\n  element.addEventListener('dblclick', mouseDoubleClickListener);\n  element.addEventListener('mousedown', mouseDownListener);\n  element.addEventListener('mousemove', mouseMoveListener);\n  // The mouseDoubleClickIgnoreListener prevents those browser 'dblclick'\n  // events that cornerstone has determined are single clicks from propagating\n  // to other (3rd party) listeners. A capture phase listener is used so that\n  // the 'dblclick' event can be ignored and not propagated ASAP.\n  element.addEventListener('dblclick', mouseDoubleClickIgnoreListener, {\n    capture: true,\n  });\n}\n\nexport default {\n  enable,\n  disable,\n};\n","// Functions to prevent ghost clicks following a touch\n// Since the event lifecycle is touchstart, mousedown, touchend, mouseup\n// we want to prevent mousedown and mouseup events after touch events\n// All credit to @kosich\n// https://gist.github.com/kosich/23188dd86633b6c2efb7\n\nconst antiGhostDelay = 2000,\n  pointerType = {\n    mouse: 0,\n    touch: 1,\n  };\n\nlet lastInteractionType, lastInteractionTime;\n\nfunction handleTap(type, e) {\n  const now = Date.now();\n\n  if (type !== lastInteractionType) {\n    if (now - lastInteractionTime <= antiGhostDelay) {\n      e.preventDefault();\n      e.stopPropagation();\n      e.stopImmediatePropagation();\n\n      return false;\n    }\n\n    lastInteractionType = type;\n  }\n\n  lastInteractionTime = now;\n}\n\n// Cacheing the function references\n// Necessary because a new function reference is created after .bind() is called\n// http://stackoverflow.com/questions/11565471/removing-event-listener-which-was-added-with-bind\nconst handleTapMouse = handleTap.bind(null, pointerType.mouse);\nconst handleTapTouch = handleTap.bind(null, pointerType.touch);\n\nfunction attachEvents(element, eventList, interactionType) {\n  const tapHandler = interactionType ? handleTapMouse : handleTapTouch;\n\n  eventList.forEach(function (eventName) {\n    element.addEventListener(eventName, tapHandler, { passive: false });\n  });\n}\n\nfunction removeEvents(element, eventList, interactionType) {\n  const tapHandler = interactionType ? handleTapMouse : handleTapTouch;\n\n  eventList.forEach(function (eventName) {\n    element.removeEventListener(eventName, tapHandler);\n  });\n}\n\nconst mouseEvents = ['mousedown', 'mouseup', 'mousemove'];\nconst touchEvents = ['touchstart', 'touchend'];\n\nfunction disable(element) {\n  removeEvents(element, mouseEvents, pointerType.mouse);\n  removeEvents(element, touchEvents, pointerType.touch);\n}\n\nfunction enable(element) {\n  disable(element);\n  attachEvents(element, mouseEvents, pointerType.mouse);\n  attachEvents(element, touchEvents, pointerType.touch);\n}\n\nexport default {\n  enable,\n  disable,\n};\n","import { getEnabledElement } from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\nimport { ITouchPoints } from '../../types';\n\n/**\n * Given a native touch event, get the associated cornerstone3D enabled element\n * and derive a set of coordinates useful for tools.\n * @param evt - The Touch event.\n * @param element - The DOM HTMLDivElement that the event was triggered on.\n * @returns The points related to the event in the form of a `IPoints` object containing\n * the following properties: `page`, `client`, `canvas`, and `world` details of the event.\n */\nexport default function getTouchEventPoints(\n  evt: TouchEvent,\n  element?: HTMLDivElement\n): ITouchPoints[] {\n  const elementToUse = element || (evt.currentTarget as HTMLDivElement);\n  const touches = evt.type === 'touchend' ? evt.changedTouches : evt.touches;\n  return Object.keys(touches).map((i) => {\n    const clientPoint = _clientToPoint(touches[i]);\n    const pagePoint = _pageToPoint(touches[i]);\n    const canvasPoint = _pagePointsToCanvasPoints(elementToUse, pagePoint);\n    const { viewport } = getEnabledElement(elementToUse);\n    const worldPoint = viewport.canvasToWorld(canvasPoint);\n    return {\n      page: pagePoint,\n      client: clientPoint,\n      canvas: canvasPoint,\n      world: worldPoint,\n      touch: {\n        identifier: i,\n        radiusX: touches[i].radiusX,\n        radiusY: touches[i].radiusY,\n        force: touches[i].force,\n        rotationAngle: touches[i].rotationAngle,\n      },\n    };\n  });\n}\n\n/**\n * Converts point from page coordinates to canvas coordinates.\n * @param element - HTMLDivElement\n * @param pagePoint - Point in page coordinates pageX and pageY\n *\n * @returns The canvas coordinate points\n */\nfunction _pagePointsToCanvasPoints(\n  element: HTMLDivElement,\n  pagePoint: Types.Point2\n): Types.Point2 {\n  const rect = element.getBoundingClientRect();\n  return [\n    pagePoint[0] - rect.left - window.pageXOffset,\n    pagePoint[1] - rect.top - window.pageYOffset,\n  ];\n}\n\n/**\n * Converts the event's `pageX` and `pageY` properties to Types.Point2 format\n *\n * @param touch - The Touch\n */\nfunction _pageToPoint(touch: Touch): Types.Point2 {\n  return [touch.pageX, touch.pageY];\n}\n\n/**\n * Converts the event's `clientX` and `clientY` properties to Types.Point2 format\n * @param evt - The Touch `Event`\n */\nfunction _clientToPoint(touch: Touch): Types.Point2 {\n  return [touch.clientX, touch.clientY];\n}\n","import { IDistance, IPoints, ITouchPoints } from '../../types';\nimport { Types } from '@cornerstonejs/core';\n\n/**\n * Returns the difference between multiple `IPoints` instances.\n * @param currentPoints - The current points.\n * @param lastPoints - The last points, to be subtracted from the `currentPoints`.\n *\n * @returns The difference in IPoints format\n */\nfunction getDeltaPoints(\n  currentPoints: IPoints[],\n  lastPoints: IPoints[]\n): IPoints {\n  const curr = getMeanPoints(currentPoints);\n  const last = getMeanPoints(lastPoints);\n  return {\n    page: _subtractPoints2D(curr.page, last.page),\n    client: _subtractPoints2D(curr.client, last.client),\n    canvas: _subtractPoints2D(curr.canvas, last.canvas),\n    world: _subtractPoints3D(curr.world, last.world),\n  };\n}\n\n/**\n * Returns the distance between multiple `IPoints` instances.\n * @param currentPoints - The current points.\n * @param lastPoints - The last points, to be subtracted from the `currentPoints`.\n *\n * @returns The distance difference in IDistance format\n */\nfunction getDeltaDistance(\n  currentPoints: IPoints[],\n  lastPoints: IPoints[]\n): IDistance {\n  const curr = getMeanPoints(currentPoints);\n  const last = getMeanPoints(lastPoints);\n  return {\n    page: _getDistance2D(curr.page, last.page),\n    client: _getDistance2D(curr.client, last.client),\n    canvas: _getDistance2D(curr.canvas, last.canvas),\n    world: _getDistance3D(curr.world, last.world),\n  };\n}\n\nfunction getDeltaRotation(\n  currentPoints: ITouchPoints[],\n  lastPoints: ITouchPoints[]\n) {\n  // TODO\n}\n\n/**\n * Returns the distance difference between multiple `IPoints` instances.\n * @param currentPoints - The current points.\n * @param lastPoints -- The last points.\n *\n * @returns The difference in IPoints format\n */\nfunction getDeltaDistanceBetweenIPoints(\n  currentPoints: IPoints[],\n  lastPoints: IPoints[]\n): IDistance {\n  const currentDistance = _getMeanDistanceBetweenAllIPoints(currentPoints);\n  const lastDistance = _getMeanDistanceBetweenAllIPoints(lastPoints);\n  const deltaDistance = {\n    page: currentDistance.page - lastDistance.page,\n    client: currentDistance.client - lastDistance.client,\n    canvas: currentDistance.canvas - lastDistance.canvas,\n    world: currentDistance.world - lastDistance.world,\n  };\n  return deltaDistance;\n}\n\n/**\n * Copies a set of points.\n * @param points - The `IPoints` instance to copy.\n *\n * @returns A copy of the points.\n */\nfunction copyPointsList(points: ITouchPoints[]): ITouchPoints[] {\n  return JSON.parse(JSON.stringify(points));\n}\n\nfunction copyPoints(points: ITouchPoints): ITouchPoints {\n  return JSON.parse(JSON.stringify(points));\n}\n\nfunction getMeanPoints(points: IPoints[]): IPoints {\n  return points.reduce(\n    (prev, curr) => {\n      return {\n        page: [\n          prev.page[0] + curr.page[0] / points.length,\n          prev.page[1] + curr.page[1] / points.length,\n        ],\n        client: [\n          prev.client[0] + curr.client[0] / points.length,\n          prev.client[1] + curr.client[1] / points.length,\n        ],\n        canvas: [\n          prev.canvas[0] + curr.canvas[0] / points.length,\n          prev.canvas[1] + curr.canvas[1] / points.length,\n        ],\n        world: [\n          prev.world[0] + curr.world[0] / points.length,\n          prev.world[1] + curr.world[1] / points.length,\n          prev.world[2] + curr.world[2] / points.length,\n        ],\n      };\n    },\n    {\n      page: [0, 0],\n      client: [0, 0],\n      canvas: [0, 0],\n      world: [0, 0, 0],\n    }\n  );\n}\n\nfunction getMeanTouchPoints(points: ITouchPoints[]): ITouchPoints {\n  return points.reduce(\n    (prev, curr) => {\n      return {\n        page: [\n          prev.page[0] + curr.page[0] / points.length,\n          prev.page[1] + curr.page[1] / points.length,\n        ],\n        client: [\n          prev.client[0] + curr.client[0] / points.length,\n          prev.client[1] + curr.client[1] / points.length,\n        ],\n        canvas: [\n          prev.canvas[0] + curr.canvas[0] / points.length,\n          prev.canvas[1] + curr.canvas[1] / points.length,\n        ],\n        world: [\n          prev.world[0] + curr.world[0] / points.length,\n          prev.world[1] + curr.world[1] / points.length,\n          prev.world[2] + curr.world[2] / points.length,\n        ],\n        touch: {\n          identifier: null,\n          radiusX: prev.touch.radiusX + curr.touch.radiusX / points.length,\n          radiusY: prev.touch.radiusY + curr.touch.radiusY / points.length,\n          force: prev.touch.force + curr.touch.force / points.length,\n          rotationAngle:\n            prev.touch.rotationAngle + curr.touch.rotationAngle / points.length,\n        },\n      };\n    },\n    {\n      page: [0, 0],\n      client: [0, 0],\n      canvas: [0, 0],\n      world: [0, 0, 0],\n      touch: {\n        identifier: null,\n        radiusX: 0,\n        radiusY: 0,\n        force: 0,\n        rotationAngle: 0,\n      },\n    }\n  );\n}\n/**\n * _subtractPoints - Subtracts `point1` from `point0`.\n * @param point0 - The first point.\n * @param point1 - The second point to subtract from the first.\n *\n * @returns The difference.\n */\nfunction _subtractPoints2D(\n  point0: Types.Point2,\n  point1: Types.Point2\n): Types.Point2 {\n  return [point0[0] - point1[0], point0[1] - point1[1]];\n}\n\nfunction _subtractPoints3D(\n  point0: Types.Point3,\n  point1: Types.Point3\n): Types.Point3 {\n  return [point0[0] - point1[0], point0[1] - point1[1], point0[2] - point1[2]];\n}\n\nfunction _getMeanDistanceBetweenAllIPoints(points: IPoints[]): IDistance {\n  // get mean distance between all unordered pairs of points\n  const pairedDistance: IDistance[] = [];\n  for (let i = 0; i < points.length; i++) {\n    for (let j = 0; j < points.length; j++) {\n      if (i < j) {\n        pairedDistance.push({\n          page: _getDistance2D(points[i].page, points[j].page),\n          client: _getDistance2D(points[i].client, points[j].client),\n          canvas: _getDistance2D(points[i].canvas, points[j].canvas),\n          world: _getDistance3D(points[i].world, points[j].world),\n        });\n      }\n    }\n  }\n\n  // take the average distance\n  return pairedDistance.reduce(\n    (prev, curr) => {\n      return {\n        page: prev.page + curr.page / pairedDistance.length,\n        client: prev.client + curr.client / pairedDistance.length,\n        canvas: prev.canvas + curr.canvas / pairedDistance.length,\n        world: prev.world + curr.world / pairedDistance.length,\n      };\n    },\n    {\n      page: 0,\n      client: 0,\n      canvas: 0,\n      world: 0,\n    }\n  );\n}\n\nfunction _getDistance2D(point0: Types.Point2, point1: Types.Point2): number {\n  return Math.sqrt(\n    Math.pow(point0[0] - point1[0], 2) + Math.pow(point0[1] - point1[1], 2)\n  );\n}\n\nfunction _getDistance3D(point0: Types.Point3, point1: Types.Point3): number {\n  return Math.sqrt(\n    Math.pow(point0[0] - point1[0], 2) +\n      Math.pow(point0[1] - point1[1], 2) +\n      Math.pow(point0[2] - point1[2], 2)\n  );\n}\n\nexport {\n  getMeanPoints,\n  getMeanTouchPoints,\n  copyPoints,\n  copyPointsList,\n  getDeltaDistanceBetweenIPoints,\n  getDeltaPoints,\n  getDeltaDistance,\n  getDeltaRotation,\n};\n","import { getEnabledElement, triggerEvent } from '@cornerstonejs/core';\nimport Events from '../../enums/Events';\nimport { Swipe } from '../../enums/Touch';\n\nimport { EventTypes, ITouchPoints, IPoints, IDistance } from '../../types';\n\nimport getTouchEventPoints from './getTouchEventPoints';\nimport {\n  copyPoints,\n  copyPointsList,\n  getDeltaDistanceBetweenIPoints,\n  getDeltaDistance,\n  getDeltaPoints,\n  getMeanTouchPoints,\n  // getRotation\n} from '../../utilities/touch';\nimport { Settings } from '@cornerstonejs/core';\n\nconst runtimeSettings = Settings.getRuntimeSettings();\n\nconst {\n  TOUCH_START,\n  TOUCH_START_ACTIVATE,\n  TOUCH_PRESS,\n  TOUCH_DRAG,\n  TOUCH_END,\n  TOUCH_TAP,\n  TOUCH_SWIPE,\n} = Events;\n\ninterface ITouchTapListenerState {\n  element: HTMLDivElement;\n  renderingEngineId: string;\n  viewportId: string;\n  startPointsList: ITouchPoints[];\n  tapMaxDistance: number;\n  tapTimeout: ReturnType<typeof setTimeout>;\n  taps: number;\n  tapToleranceMs: number;\n}\n\ninterface ITouchStartListenerState {\n  element: HTMLDivElement;\n  renderingEngineId: string;\n  viewportId: string;\n  startPointsList: ITouchPoints[];\n  lastPointsList: ITouchPoints[];\n\n  // only trigger one touch event in the case the user puts down multiple fingers\n  isTouchStart: boolean;\n  startTime: Date;\n\n  // handle long press\n  pressTimeout: ReturnType<typeof setTimeout>;\n  pressDelay: number;\n  pressMaxDistance: number;\n  accumulatedDistance: IDistance;\n\n  // handle swipes\n  swipeDistanceThreshold: number;\n  swiped: boolean;\n  swipeToleranceMs: number;\n}\n\nconst zeroIPoint: IPoints = {\n  page: [0, 0],\n  client: [0, 0],\n  canvas: [0, 0],\n  world: [0, 0, 0],\n};\n\nconst zeroIDistance: IDistance = {\n  page: 0,\n  client: 0,\n  canvas: 0,\n  world: 0,\n};\n\n// STATE\nconst defaultState: ITouchStartListenerState = {\n  renderingEngineId: undefined,\n  viewportId: undefined,\n  element: null,\n  startPointsList: [\n    {\n      ...zeroIPoint,\n      touch: null,\n    },\n  ],\n  lastPointsList: [\n    {\n      ...zeroIPoint,\n      touch: null,\n    },\n  ],\n  isTouchStart: false,\n  startTime: null,\n\n  pressTimeout: null,\n  pressDelay: 700,\n  pressMaxDistance: 5,\n  accumulatedDistance: zeroIDistance,\n\n  swipeDistanceThreshold: 48,\n  swiped: false,\n  swipeToleranceMs: 300, // user has 300ms to swipe after touch start or no swipe will trigger\n};\n\n// TODO: these values should be configurable to handle different use cases such\n// as pen, left/right handed, index finger vs thumb, etc. These current values\n// assume thumb usage for single finger and index/middle finger for two finger\n// gestures in an attempt to cover the 90% use case.\nconst defaultTapState: ITouchTapListenerState = {\n  renderingEngineId: undefined,\n  viewportId: undefined,\n  element: null,\n  startPointsList: [\n    {\n      ...zeroIPoint,\n      touch: null,\n    },\n  ],\n  taps: 0,\n  tapTimeout: null,\n  tapMaxDistance: 24,\n  tapToleranceMs: 300,\n};\n\nlet state: ITouchStartListenerState = JSON.parse(JSON.stringify(defaultState));\nlet tapState: ITouchTapListenerState = JSON.parse(\n  JSON.stringify(defaultTapState)\n);\n\nfunction triggerEventCallback(ele, name, eventDetail) {\n  return triggerEvent(ele, name, eventDetail);\n}\n\n/**\n * Listens to touch events from the DOM (touchstart, touchmove, touchend)\n * and depending on interaction and further interaction can emit the\n * following touch events:\n *\n * - TOUCH_START\n * - TOUCH_START_ACTIVATE\n * - TOUCH_PRESS\n * - TOUCH_DRAG (move while down)\n * - TOUCH_SWIPE\n * - TOUCH_END (also an end for multi touch)\n *\n * - TOUCH_TAP\n *\n * @param evt - The Touch event (touchstart).\n * @private\n */\nfunction touchStartListener(evt: TouchEvent) {\n  // if a user adds an extra finger when a touch/multi touch has already started\n  // don't trigger another touch.\n  state.element = <HTMLDivElement>evt.currentTarget;\n  const enabledElement = getEnabledElement(state.element);\n  const { renderingEngineId, viewportId } = enabledElement;\n  state.renderingEngineId = renderingEngineId;\n  state.viewportId = viewportId;\n  // this prevents multiple start firing\n  if (state.isTouchStart) {\n    return;\n  }\n  // this will clear on touchstart and touchend\n  clearTimeout(state.pressTimeout);\n  state.pressTimeout = setTimeout(() => _onTouchPress(evt), state.pressDelay);\n\n  _onTouchStart(evt);\n  document.addEventListener('touchmove', _onTouchDrag); // also checks for swipe\n  document.addEventListener('touchend', _onTouchEnd); // also checks for tap\n}\n\n/**\n * _onTouchPress - Handle emission of touchstart events which are held down for a longer\n * period of time\n *\n * @private\n * @param evt - The touch event (touchstart)\n */\nfunction _onTouchPress(evt: TouchEvent) {\n  const totalDistance = state.accumulatedDistance.canvas;\n  if (totalDistance > state.pressMaxDistance) {\n    return;\n  }\n  const eventDetail: EventTypes.TouchPressEventDetail = {\n    event: evt, // touchstart native event\n    eventName: TOUCH_PRESS,\n    renderingEngineId: state.renderingEngineId,\n    viewportId: state.viewportId,\n    camera: {},\n    element: state.element,\n    startPointsList: copyPointsList(state.startPointsList),\n    lastPointsList: copyPointsList(state.lastPointsList),\n    startPoints: copyPoints(getMeanTouchPoints(state.startPointsList)),\n    lastPoints: copyPoints(getMeanTouchPoints(state.lastPointsList)),\n  };\n  triggerEventCallback(eventDetail.element, TOUCH_PRESS, eventDetail);\n}\n\n/**\n * _onTouchStart - Handle emission of touchstart events.\n *\n * @private\n * @param evt - The touch event (touchstart)\n */\nfunction _onTouchStart(evt: TouchEvent) {\n  state.isTouchStart = true;\n  state.startTime = new Date();\n  const startPointsList = getTouchEventPoints(evt, state.element);\n  const startPoints = getMeanTouchPoints(startPointsList);\n  const deltaPoints = zeroIPoint;\n  const deltaDistance = zeroIDistance;\n  // deltaRotation same as deltaDistance but values are theta\n  const eventDetail: EventTypes.TouchStartEventDetail = {\n    event: evt,\n    eventName: TOUCH_START,\n    element: state.element,\n    renderingEngineId: state.renderingEngineId,\n    viewportId: state.viewportId,\n    camera: {},\n    startPointsList: startPointsList,\n    lastPointsList: startPointsList,\n    currentPointsList: startPointsList,\n    startPoints: startPoints,\n    lastPoints: startPoints,\n    currentPoints: startPoints,\n    deltaPoints,\n    deltaDistance,\n    // deltaRotation\n  };\n\n  state.startPointsList = copyPointsList(eventDetail.startPointsList);\n  state.lastPointsList = copyPointsList(eventDetail.lastPointsList);\n  // by triggering TOUCH_START it checks if this is toolSelection, handle modification etc.\n  // of already existing tools\n  const eventDidPropagate = triggerEventCallback(\n    eventDetail.element,\n    TOUCH_START,\n    eventDetail\n  );\n\n  // if no tools responded to this event and prevented its default propagation behavior,\n  // create a new tool\n  if (eventDidPropagate) {\n    triggerEventCallback(\n      eventDetail.element,\n      TOUCH_START_ACTIVATE,\n      eventDetail\n    );\n  }\n}\n\n/**\n * _onTouchDrag - Handle emission of drag events whilst the touch is depressed.\n *\n * @private\n * @param evt - The touch event (touchmove)\n */\nfunction _onTouchDrag(evt: TouchEvent) {\n  const currentPointsList = getTouchEventPoints(evt, state.element);\n  const lastPointsList = _updateTouchEventsLastPoints(\n    state.element,\n    state.lastPointsList\n  );\n\n  const deltaPoints =\n    currentPointsList.length === lastPointsList.length\n      ? getDeltaPoints(currentPointsList, lastPointsList)\n      : zeroIPoint;\n\n  const deltaDistance =\n    currentPointsList.length === lastPointsList.length\n      ? getDeltaDistanceBetweenIPoints(currentPointsList, lastPointsList)\n      : zeroIDistance;\n\n  const totalDistance =\n    currentPointsList.length === lastPointsList.length\n      ? getDeltaDistance(currentPointsList, state.lastPointsList)\n      : zeroIDistance;\n\n  state.accumulatedDistance = {\n    page: state.accumulatedDistance.page + totalDistance.page,\n    client: state.accumulatedDistance.client + totalDistance.client,\n    canvas: state.accumulatedDistance.canvas + totalDistance.canvas,\n    world: state.accumulatedDistance.world + totalDistance.world,\n  };\n\n  /**\n   * this is can be uncommented to make dragging smoother. In the future, these values\n   * should be in a configuration file. There may also need to be different\n   * profiles for left handed and right handed thumb use. These values\n   * are currently optimized for left handed use.\n   *\n   * const clamp = (num) => Math.min(Math.max(num, -15), 10);\n   * const deltaDistanceClamped = \\{\n   *     page: clamp(deltaDistance.page),\n   *     client: clamp(deltaDistance.client),\n   *     canvas: clamp(deltaDistance.canvas),\n   *     world: clamp(deltaDistance.world),\n   * \\};\n   */\n\n  const eventDetail: EventTypes.TouchDragEventDetail = {\n    event: evt,\n    eventName: TOUCH_DRAG,\n    renderingEngineId: state.renderingEngineId,\n    viewportId: state.viewportId,\n    camera: {},\n    element: state.element,\n    startPoints: getMeanTouchPoints(state.startPointsList),\n    lastPoints: getMeanTouchPoints(lastPointsList),\n    currentPoints: getMeanTouchPoints(currentPointsList),\n    startPointsList: copyPointsList(state.startPointsList),\n    lastPointsList: copyPointsList(lastPointsList),\n    currentPointsList,\n    deltaPoints: deltaPoints,\n    deltaDistance: deltaDistance,\n  };\n\n  triggerEventCallback(state.element, TOUCH_DRAG, eventDetail);\n\n  // check for swipe events\n  _checkTouchSwipe(evt, deltaPoints);\n\n  // Update the last points\n  state.lastPointsList = copyPointsList(currentPointsList);\n}\n\n/**\n * _onTouchEnd - Handle emission of touch end events\n *\n * @private\n * @param evt - The touch event.\n */\nfunction _onTouchEnd(evt: TouchEvent): void {\n  // in case it was a tap event we don't want to fire the cornerstone normalized\n  // touch end event if the touch start never happend\n  clearTimeout(state.pressTimeout);\n  const currentPointsList = getTouchEventPoints(evt, state.element);\n  const lastPointsList = _updateTouchEventsLastPoints(\n    state.element,\n    state.lastPointsList\n  );\n  const deltaPoints =\n    currentPointsList.length === lastPointsList.length\n      ? getDeltaPoints(currentPointsList, lastPointsList)\n      : getDeltaPoints(currentPointsList, currentPointsList);\n  const deltaDistance =\n    currentPointsList.length === lastPointsList.length\n      ? getDeltaDistanceBetweenIPoints(currentPointsList, lastPointsList)\n      : getDeltaDistanceBetweenIPoints(currentPointsList, currentPointsList);\n  const eventDetail: EventTypes.TouchEndEventDetail = {\n    event: evt,\n    eventName: TOUCH_END,\n    element: state.element,\n    renderingEngineId: state.renderingEngineId,\n    viewportId: state.viewportId,\n    camera: {},\n    startPointsList: copyPointsList(state.startPointsList),\n    lastPointsList: copyPointsList(lastPointsList),\n    currentPointsList,\n    startPoints: getMeanTouchPoints(state.startPointsList),\n    lastPoints: getMeanTouchPoints(lastPointsList),\n    currentPoints: getMeanTouchPoints(currentPointsList),\n    deltaPoints,\n    deltaDistance,\n  };\n\n  triggerEventCallback(eventDetail.element, TOUCH_END, eventDetail);\n  _checkTouchTap(evt);\n\n  // reset to default state\n  state = JSON.parse(JSON.stringify(defaultState));\n  document.removeEventListener('touchmove', _onTouchDrag);\n  document.removeEventListener('touchend', _onTouchEnd);\n}\n\nfunction _checkTouchTap(evt: TouchEvent): void {\n  const currentTime = new Date().getTime();\n  const startTime = state.startTime.getTime();\n  if (currentTime - startTime > tapState.tapToleranceMs) {\n    return;\n  }\n\n  // first tap, initialize the state\n  if (tapState.taps === 0) {\n    tapState.element = state.element;\n    tapState.renderingEngineId = state.renderingEngineId;\n    tapState.viewportId = state.viewportId;\n    tapState.startPointsList = state.startPointsList;\n  }\n\n  // subsequent tap is on a different element\n  if (\n    tapState.taps > 0 &&\n    !(\n      tapState.element == state.element &&\n      tapState.renderingEngineId == state.renderingEngineId &&\n      tapState.viewportId == state.viewportId\n    )\n  ) {\n    return;\n  }\n\n  const currentPointsList = getTouchEventPoints(evt, tapState.element);\n  const distanceFromStart = getDeltaDistance(\n    currentPointsList,\n    tapState.startPointsList\n  ).canvas;\n\n  // if the tap is too far from starting tap, we can ignore it.\n  // TODO: in the case the user means to tap in two separate areas within the\n  // tapTolerance (300ms), the second tap will not trigger. This is because it\n  // is ignored below for simplicity to track multiple taps (double, triple etc)\n  // in order to support two separate single taps that occur < 300ms on the\n  // screen. One can create the concept of \"TapChains\". Our current implementation\n  // only supports a single tap chain on the screen. You can think of it as a\n  // region where the user has the option to perform unlimited multitaps as long\n  // as they are < the tapToleranceMs value. So a tap somewhere else on the screen\n  // that is > the tapMaxDistance will start a separate and new \"TapChain\".\n  if (distanceFromStart > tapState.tapMaxDistance) {\n    return;\n  }\n\n  clearTimeout(tapState.tapTimeout);\n  tapState.taps += 1;\n\n  tapState.tapTimeout = setTimeout(() => {\n    const eventDetail: EventTypes.TouchTapEventDetail = {\n      event: evt,\n      eventName: TOUCH_TAP,\n      element: tapState.element,\n      renderingEngineId: tapState.renderingEngineId,\n      viewportId: tapState.viewportId,\n      camera: {},\n      currentPointsList,\n      currentPoints: getMeanTouchPoints(currentPointsList),\n      taps: tapState.taps,\n    };\n    triggerEventCallback(eventDetail.element, TOUCH_TAP, eventDetail);\n    tapState = JSON.parse(JSON.stringify(defaultTapState));\n  }, tapState.tapToleranceMs);\n}\n\nfunction _checkTouchSwipe(evt: TouchEvent, deltaPoints: IPoints) {\n  const currentTime = new Date().getTime();\n  const startTime = state.startTime.getTime();\n  if (state.swiped || currentTime - startTime > state.swipeToleranceMs) {\n    return;\n  }\n  const [x, y] = deltaPoints.canvas;\n  const eventDetail: EventTypes.TouchSwipeEventDetail = {\n    event: evt,\n    eventName: TOUCH_SWIPE,\n    renderingEngineId: state.renderingEngineId,\n    viewportId: state.viewportId,\n    camera: {},\n    element: state.element,\n    swipe: null,\n  };\n  if (Math.abs(x) > state.swipeDistanceThreshold) {\n    eventDetail.swipe = x > 0 ? Swipe.RIGHT : Swipe.LEFT;\n    triggerEventCallback(eventDetail.element, TOUCH_SWIPE, eventDetail);\n    state.swiped = true;\n  }\n\n  if (Math.abs(y) > state.swipeDistanceThreshold) {\n    eventDetail.swipe = y > 0 ? Swipe.DOWN : Swipe.UP;\n    triggerEventCallback(eventDetail.element, TOUCH_SWIPE, eventDetail);\n    state.swiped = true;\n  }\n}\n\n/**\n * Recalculates the last world coordinate, as the linear transform from client\n * to world could be different if the camera was updated.\n * @param element - The HTML element\n * @param lastPoints - The last points\n */\nfunction _updateTouchEventsLastPoints(\n  element: HTMLDivElement,\n  lastPoints: ITouchPoints[]\n): ITouchPoints[] {\n  const { viewport } = getEnabledElement(element);\n  // Need to update the world point to be calculated from the current reference frame,\n  // Which might have changed since the last interaction.\n  return lastPoints.map((lp) => {\n    const world = viewport.canvasToWorld(lp.canvas);\n    return {\n      page: lp.page,\n      client: lp.client,\n      canvas: lp.canvas,\n      world,\n      touch: lp.touch,\n    };\n  });\n}\n\nexport default touchStartListener;\n","import preventGhostClick from './preventGhostClick';\nimport touchStartListener from './touchStartListener';\n\n/**\n * Removes touch event listeners for native touch event. Enables\n * vtk.js tools flavored events that build on top of existing events to\n * provide more helpful information.\n *\n * @private\n * @param element - The DOM element to remove event listeners from.\n */\nfunction disable(element: HTMLDivElement): void {\n  preventGhostClick.disable(element);\n  element.removeEventListener('touchstart', touchStartListener);\n}\n\n/**\n * Registers touch event listeners for native touch event. Enables\n * vtk.js tools flavored events that build on top of existing events to\n * provide more helpful information.\n *\n * @private\n * @param element - The DOM element to register event listeners on.\n */\nfunction enable(element: HTMLDivElement): void {\n  // Prevent handlers from being attached multiple times\n  disable(element);\n  preventGhostClick.enable(element);\n  element.addEventListener('touchstart', touchStartListener, {\n    passive: false,\n  });\n}\n\nexport default {\n  enable,\n  disable,\n};\n","// Reasonable defaults\nconst PIXEL_STEP = 10;\nconst LINE_HEIGHT = 40;\nconst PAGE_HEIGHT = 800;\n\n/**\n * Normalizes wheel events and provides properties that are more\n * consistent and helpful across different browsers\n *\n * @param event - the original mouse event\n * @returns a normalized eventDetail\n */\nexport default function normalizeWheel(event) {\n  let spinX = 0,\n    spinY = 0,\n    pixelX = 0,\n    pixelY = 0;\n\n  // Legacy\n  if ('detail' in event) {\n    spinY = event.detail;\n  }\n  if ('wheelDelta' in event) {\n    spinY = -event.wheelDelta / 120;\n  }\n  if ('wheelDeltaY' in event) {\n    spinY = -event.wheelDeltaY / 120;\n  }\n  if ('wheelDeltaX' in event) {\n    spinX = -event.wheelDeltaX / 120;\n  }\n\n  pixelX = spinX * PIXEL_STEP;\n  pixelY = spinY * PIXEL_STEP;\n\n  if ('deltaY' in event) {\n    pixelY = event.deltaY;\n  }\n  if ('deltaX' in event) {\n    pixelX = event.deltaX;\n  }\n\n  if ((pixelX || pixelY) && event.deltaMode) {\n    if (event.deltaMode === 1) {\n      // Delta in LINE units\n      pixelX *= LINE_HEIGHT;\n      pixelY *= LINE_HEIGHT;\n    } else {\n      // Delta in PAGE units\n      pixelX *= PAGE_HEIGHT;\n      pixelY *= PAGE_HEIGHT;\n    }\n  }\n\n  // Fall-back if spin cannot be determined\n  if (pixelX && !spinX) {\n    spinX = pixelX < 1 ? -1 : 1;\n  }\n  if (pixelY && !spinY) {\n    spinY = pixelY < 1 ? -1 : 1;\n  }\n\n  return {\n    spinX,\n    spinY,\n    pixelX,\n    pixelY,\n  };\n}\n","import { getEnabledElement, triggerEvent } from '@cornerstonejs/core';\nimport normalizeWheel from './normalizeWheel';\nimport Events from '../../enums/Events';\n// ~~ VIEWPORT LIBRARY\nimport getMouseEventPoints from '../mouse/getMouseEventPoints';\nimport { MouseWheelEventDetail } from '../../types/EventTypes';\n\n/**\n * wheelListener - Captures and normalizes mouse wheel events. Emits as a\n * cornerstoneTools3D mouse wheel event.\n * @param evt - The mouse wheel event.\n */\nfunction wheelListener(evt: WheelEvent) {\n  const element = <HTMLDivElement>evt.currentTarget;\n  const enabledElement = getEnabledElement(element);\n  const { renderingEngineId, viewportId } = enabledElement;\n\n  // Prevent triggering MouseWheel events that are not real scroll events:\n  // E.g. when clicking the MiddleMouseWheelButton, a deltaY of 0 is emitted.\n  // See https://github.com/cornerstonejs/cornerstoneTools/issues/935\n  if (evt.deltaY > -1 && evt.deltaY < 1) {\n    return;\n  }\n\n  evt.preventDefault();\n\n  const { spinX, spinY, pixelX, pixelY } = normalizeWheel(evt);\n  const direction = spinY < 0 ? -1 : 1;\n\n  const eventDetail: MouseWheelEventDetail = {\n    event: evt,\n    eventName: Events.MOUSE_WHEEL,\n    renderingEngineId,\n    viewportId,\n    element,\n    camera: {},\n    detail: evt,\n    wheel: {\n      spinX,\n      spinY,\n      pixelX,\n      pixelY,\n      direction,\n    },\n    points: getMouseEventPoints(evt),\n  };\n\n  triggerEvent(element, Events.MOUSE_WHEEL, eventDetail);\n}\n\nexport default wheelListener;\n","import wheelListener from './wheelListener';\n\n/**\n * Listens for the wheel event, and handles it. Handled event\n * will be \"normalized\" and re-emitted as `Events.MOUSE_WHEEL`\n *\n * @param element - The HTML element\n */\nfunction enable(element: HTMLDivElement) {\n  disable(element);\n  element.addEventListener('wheel', wheelListener, { passive: false });\n}\n\n/**\n * Removes listener and handler for wheel event. `Events.MOUSE_WHEEL`\n * will no longer be emitted.\n *\n * @param element - THe HTML element\n */\nfunction disable(element: HTMLDivElement) {\n  element.removeEventListener('wheel', wheelListener);\n}\n\nexport default {\n  enable,\n  disable,\n};\n","import _cloneDeep from 'lodash.clonedeep';\nimport { getEnabledElement, triggerEvent } from '@cornerstonejs/core';\nimport Events from '../../enums/Events';\nimport { KeyDownEventDetail, KeyUpEventDetail } from '../../types/EventTypes';\n\ninterface IKeyDownListenerState {\n  renderingEngineId: string;\n  viewportId: string;\n  key: string | null;\n  keyCode: number | null;\n  element: HTMLDivElement;\n}\n\nconst defaultState: IKeyDownListenerState = {\n  //\n  renderingEngineId: undefined,\n  viewportId: undefined,\n  //\n  key: undefined,\n  keyCode: undefined,\n  element: null,\n};\n\nlet state: IKeyDownListenerState = {\n  //\n  renderingEngineId: undefined,\n  viewportId: undefined,\n  //\n  key: undefined,\n  keyCode: undefined,\n  element: null,\n};\n\n/**\n * Normalizes the keyboard event and triggers KEY_DOWN event from CornerstoneTools3D events\n * @param evt - DOM Keyboard event\n */\nfunction keyListener(evt: KeyboardEvent): void {\n  state.element = <HTMLDivElement>evt.currentTarget;\n\n  const enabledElement = getEnabledElement(state.element);\n  const { renderingEngineId, viewportId } = enabledElement;\n\n  state.renderingEngineId = renderingEngineId;\n  state.viewportId = viewportId;\n  state.key = evt.key;\n  state.keyCode = evt.keyCode;\n\n  evt.preventDefault();\n  const eventDetail: KeyDownEventDetail = {\n    renderingEngineId: state.renderingEngineId,\n    viewportId: state.viewportId,\n    element: state.element,\n    key: state.key,\n    keyCode: state.keyCode,\n\n    // detail: evt,\n    // Todo: mouse event points can be used later for placing tools with a key\n    // e.g., putting an arrow/probe/etc. on the mouse position. Another use case\n    // hovering and deleting the tool\n    // points: getMouseEventPoints(evt),\n  };\n\n  triggerEvent(eventDetail.element, Events.KEY_DOWN, eventDetail);\n\n  document.addEventListener('keyup', _onKeyUp);\n  document.addEventListener('visibilitychange', _onVisibilityChange);\n\n  // Todo: handle combination of keys\n  state.element.removeEventListener('keydown', keyListener);\n}\n\n/**\n * Whenever the visibility (i.e. tab focus) changes such that the tab is NOT the\n * active tab, reset the modifier key.\n */\nfunction _onVisibilityChange(): void {\n  document.removeEventListener('visibilitychange', _onVisibilityChange);\n  if (document.visibilityState === 'hidden') {\n    resetModifierKey();\n  }\n}\n\nfunction _onKeyUp(evt: KeyboardEvent): void {\n  const eventDetail: KeyUpEventDetail = {\n    renderingEngineId: state.renderingEngineId,\n    viewportId: state.viewportId,\n    element: state.element,\n    key: state.key,\n    keyCode: state.keyCode,\n    // detail: evt,\n  };\n\n  // Remove our temporary handlers\n  document.removeEventListener('keyup', _onKeyUp);\n  document.removeEventListener('visibilitychange', _onVisibilityChange);\n  state.element.addEventListener('keydown', keyListener);\n\n  // Restore `state` to `defaultState`\n  state = _cloneDeep(defaultState);\n  triggerEvent(eventDetail.element, Events.KEY_UP, eventDetail);\n}\n\nexport function getModifierKey(): number | undefined {\n  return state.keyCode;\n}\n\nexport function resetModifierKey(): void {\n  state.keyCode = undefined;\n}\n\nexport default keyListener;\n","import keyDownListener, { getModifierKey } from './keyDownListener';\n\nfunction enable(element: HTMLDivElement): void {\n  disable(element);\n  element.addEventListener('keydown', keyDownListener);\n}\n\nfunction disable(element: HTMLDivElement): void {\n  element.removeEventListener('keydown', keyDownListener);\n}\n\nexport default {\n  enable,\n  disable,\n  getModifierKey,\n};\n","/**\n * Cornerstone Color LUT used for Segmentations\n */\nconst CORNERSTONE_COLOR_LUT = [\n  [0, 0, 0, 0],\n  [221, 84, 84, 255],\n  [77, 228, 121, 255],\n  [166, 70, 235, 255],\n  [189, 180, 116, 255],\n  [109, 182, 196, 255],\n  [204, 101, 157, 255],\n  [123, 211, 94, 255],\n  [93, 87, 218, 255],\n  [225, 128, 80, 255],\n  [73, 232, 172, 255],\n  [181, 119, 186, 255],\n  [176, 193, 112, 255],\n  [105, 153, 200, 255],\n  [208, 97, 120, 255],\n  [90, 215, 101, 255],\n  [135, 83, 222, 255],\n  [229, 178, 76, 255],\n  [122, 183, 181, 255],\n  [190, 115, 171, 255],\n  [149, 197, 108, 255],\n  [100, 118, 205, 255],\n  [212, 108, 93, 255],\n  [86, 219, 141, 255],\n  [183, 79, 226, 255],\n  [233, 233, 72, 255],\n  [118, 167, 187, 255],\n  [194, 111, 146, 255],\n  [116, 201, 104, 255],\n  [115, 96, 209, 255],\n  [216, 147, 89, 255],\n  [82, 223, 188, 255],\n  [230, 75, 224, 255],\n  [163, 184, 121, 255],\n  [114, 143, 191, 255],\n  [198, 107, 114, 255],\n  [99, 206, 122, 255],\n  [153, 92, 213, 255],\n  [220, 192, 85, 255],\n  [78, 215, 227, 255],\n  [234, 71, 173, 255],\n  [141, 188, 117, 255],\n  [110, 113, 195, 255],\n  [202, 128, 103, 255],\n  [95, 210, 157, 255],\n  [195, 88, 217, 255],\n  [206, 224, 81, 255],\n  [74, 166, 231, 255],\n  [185, 120, 139, 255],\n  [113, 192, 113, 255],\n  [133, 106, 199, 255],\n  [207, 162, 98, 255],\n  [91, 214, 198, 255],\n  [221, 84, 198, 255],\n  [159, 228, 77, 255],\n  [70, 111, 235, 255],\n  [189, 119, 116, 255],\n  [109, 196, 138, 255],\n  [165, 101, 204, 255],\n  [211, 201, 94, 255],\n  [87, 191, 218, 255],\n  [225, 80, 153, 255],\n  [106, 232, 73, 255],\n  [124, 119, 186, 255],\n  [193, 142, 112, 255],\n  [105, 200, 168, 255],\n  [203, 97, 208, 255],\n  [184, 215, 90, 255],\n  [83, 147, 222, 255],\n  [229, 76, 101, 255],\n  [122, 183, 130, 255],\n  [146, 115, 190, 255],\n  [197, 171, 108, 255],\n  [100, 205, 205, 255],\n  [212, 93, 177, 255],\n  [141, 219, 86, 255],\n  [79, 97, 226, 255],\n  [233, 99, 72, 255],\n  [118, 187, 150, 255],\n  [173, 111, 194, 255],\n  [197, 201, 104, 255],\n  [96, 171, 209, 255],\n  [216, 89, 137, 255],\n  [94, 223, 82, 255],\n  [107, 75, 230, 255],\n  [184, 153, 121, 255],\n  [114, 191, 175, 255],\n  [198, 107, 191, 255],\n  [166, 206, 99, 255],\n  [92, 132, 213, 255],\n  [220, 85, 91, 255],\n  [78, 227, 115, 255],\n  [159, 71, 234, 255],\n  [188, 176, 117, 255],\n  [110, 185, 195, 255],\n  [202, 103, 161, 255],\n  [129, 210, 95, 255],\n  [88, 88, 217, 255],\n  [224, 123, 81, 255],\n  [74, 231, 166, 255],\n  [177, 120, 185, 255],\n  [179, 192, 113, 255],\n  [106, 156, 199, 255],\n  [207, 98, 125, 255],\n  [91, 214, 96, 255],\n  [130, 84, 221, 255],\n  [228, 171, 77, 255],\n  [70, 235, 221, 255],\n  [189, 116, 174, 255],\n  [153, 196, 109, 255],\n  [101, 123, 204, 255],\n  [211, 104, 94, 255],\n  [87, 218, 136, 255],\n  [177, 80, 225, 255],\n  [232, 225, 73, 255],\n  [119, 169, 186, 255],\n  [193, 112, 149, 255],\n  [121, 200, 105, 255],\n  [111, 97, 208, 255],\n  [215, 142, 90, 255],\n  [83, 222, 181, 255],\n  [229, 76, 229, 255],\n  [165, 183, 122, 255],\n  [115, 146, 190, 255],\n  [197, 108, 119, 255],\n  [100, 205, 118, 255],\n  [148, 93, 212, 255],\n  [219, 186, 86, 255],\n  [79, 220, 226, 255],\n  [233, 72, 179, 255],\n  [144, 187, 118, 255],\n  [111, 118, 194, 255],\n  [201, 124, 104, 255],\n  [96, 209, 153, 255],\n  [189, 89, 216, 255],\n  [211, 223, 82, 255],\n  [75, 172, 230, 255],\n  [184, 121, 142, 255],\n  [117, 191, 114, 255],\n  [130, 107, 198, 255],\n  [206, 157, 99, 255],\n  [92, 213, 193, 255],\n  [220, 85, 203, 255],\n  [165, 227, 78, 255],\n  [71, 118, 234, 255],\n  [188, 117, 117, 255],\n  [110, 195, 135, 255],\n  [161, 103, 202, 255],\n  [210, 195, 95, 255],\n  [88, 195, 217, 255],\n  [224, 81, 158, 255],\n  [113, 231, 74, 255],\n  [123, 120, 185, 255],\n  [192, 139, 113, 255],\n  [106, 199, 164, 255],\n  [198, 98, 207, 255],\n  [188, 214, 91, 255],\n  [84, 153, 221, 255],\n  [228, 77, 108, 255],\n  [70, 235, 84, 255],\n  [143, 116, 189, 255],\n  [196, 167, 109, 255],\n  [101, 204, 199, 255],\n  [211, 94, 182, 255],\n  [147, 218, 87, 255],\n  [80, 104, 225, 255],\n  [232, 93, 73, 255],\n  [119, 186, 147, 255],\n  [170, 112, 193, 255],\n  [200, 200, 105, 255],\n  [97, 175, 208, 255],\n  [215, 90, 142, 255],\n  [100, 222, 83, 255],\n  [101, 76, 229, 255],\n  [183, 150, 122, 255],\n  [115, 190, 171, 255],\n  [197, 108, 194, 255],\n  [170, 205, 100, 255],\n  [93, 138, 212, 255],\n  [219, 86, 97, 255],\n  [79, 226, 110, 255],\n  [153, 72, 233, 255],\n  [187, 173, 118, 255],\n  [111, 187, 194, 255],\n  [201, 104, 165, 255],\n  [134, 209, 96, 255],\n  [89, 95, 216, 255],\n  [223, 117, 82, 255],\n  [75, 230, 159, 255],\n  [174, 121, 184, 255],\n  [182, 191, 114, 255],\n  [107, 160, 198, 255],\n  [206, 99, 130, 255],\n  [92, 213, 92, 255],\n  [124, 85, 220, 255],\n  [227, 165, 78, 255],\n  [71, 234, 214, 255],\n  [188, 117, 176, 255],\n  [156, 195, 110, 255],\n  [103, 128, 202, 255],\n  [210, 100, 95, 255],\n  [88, 217, 131, 255],\n  [170, 81, 224, 255],\n  [231, 218, 74, 255],\n  [120, 172, 185, 255],\n  [192, 113, 153, 255],\n  [125, 199, 106, 255],\n  [107, 98, 207, 255],\n  [214, 137, 91, 255],\n  [84, 221, 175, 255],\n  [222, 77, 228, 255],\n  [194, 235, 70, 255],\n  [116, 149, 189, 255],\n  [196, 109, 123, 255],\n  [101, 204, 114, 255],\n  [143, 94, 211, 255],\n  [218, 180, 87, 255],\n  [80, 225, 225, 255],\n  [232, 73, 186, 255],\n  [147, 186, 119, 255],\n  [112, 122, 193, 255],\n  [200, 121, 105, 255],\n  [97, 208, 148, 255],\n  [184, 90, 215, 255],\n  [216, 222, 83, 255],\n  [76, 178, 229, 255],\n  [183, 122, 145, 255],\n  [121, 190, 115, 255],\n  [126, 108, 197, 255],\n  [205, 153, 100, 255],\n  [93, 212, 187, 255],\n  [219, 86, 208, 255],\n  [171, 226, 79, 255],\n  [72, 126, 233, 255],\n  [187, 118, 121, 255],\n  [111, 194, 132, 255],\n  [157, 104, 201, 255],\n  [209, 190, 96, 255],\n  [89, 200, 216, 255],\n  [223, 82, 164, 255],\n  [120, 230, 75, 255],\n  [121, 121, 184, 255],\n  [191, 136, 114, 255],\n  [107, 198, 160, 255],\n  [192, 99, 206, 255],\n  [193, 213, 92, 255],\n  [85, 158, 220, 255],\n  [227, 78, 115, 255],\n  [71, 234, 78, 255],\n  [141, 117, 188, 255],\n  [195, 163, 110, 255],\n  [103, 202, 194, 255],\n  [210, 95, 186, 255],\n  [153, 217, 88, 255],\n  [81, 111, 224, 255],\n];\n\nexport default CORNERSTONE_COLOR_LUT;\n","import { ContourConfig } from '../../../types/ContourTypes';\n\nconst defaultContourConfig: ContourConfig = {\n  renderOutline: true,\n  outlineWidthActive: 2,\n  outlineWidthInactive: 2,\n  outlineOpacity: 1,\n  outlineOpacityInactive: 0.85,\n  renderFill: true,\n  fillAlpha: 1,\n  fillAlphaInactive: 0,\n};\n\nfunction getDefaultContourConfig(): ContourConfig {\n  return defaultContourConfig;\n}\n\nexport default getDefaultContourConfig;\n","import { LabelmapConfig } from '../../../types/LabelmapTypes';\n\nconst defaultLabelmapConfig: LabelmapConfig = {\n  renderOutline: true,\n  outlineWidthActive: 3,\n  outlineWidthInactive: 2,\n  renderFill: true,\n  renderFillInactive: true,\n  fillAlpha: 0.7,\n  fillAlphaInactive: 0.65,\n  outlineOpacity: 1,\n  outlineOpacityInactive: 0.85,\n};\n\nfunction getDefaultLabelmapConfig(): LabelmapConfig {\n  return defaultLabelmapConfig;\n}\n\n// Checks if the labelmap config is valid, which means\n// if all the required fields are present and have the correct type\nfunction isValidLabelmapConfig(config): boolean {\n  return (\n    config &&\n    typeof config.renderOutline === 'boolean' &&\n    typeof config.outlineWidthActive === 'number' &&\n    typeof config.outlineWidthInactive === 'number' &&\n    typeof config.renderFill === 'boolean' &&\n    typeof config.renderFillInactive === 'boolean' &&\n    typeof config.fillAlpha === 'number' &&\n    typeof config.fillAlphaInactive === 'number' &&\n    typeof config.outlineOpacity === 'number' &&\n    typeof config.outlineOpacityInactive === 'number'\n  );\n}\n\nexport default getDefaultLabelmapConfig;\nexport { isValidLabelmapConfig };\n","import { utilities as csUtils } from '@cornerstonejs/core';\nimport cloneDeep from 'lodash.clonedeep';\n\nimport CORNERSTONE_COLOR_LUT from '../../constants/COLOR_LUT';\n\nimport { SegmentationRepresentations } from '../../enums';\nimport getDefaultContourConfig from '../../tools/displayTools/Contour/contourConfig';\nimport getDefaultLabelmapConfig from '../../tools/displayTools/Labelmap/labelmapConfig';\nimport type {\n  ColorLUT,\n  RepresentationConfig,\n  Segmentation,\n  SegmentationRepresentationConfig,\n  SegmentationState,\n  SegmentSpecificRepresentationConfig,\n  ToolGroupSpecificRepresentation,\n  ToolGroupSpecificRepresentations,\n} from '../../types/SegmentationStateTypes';\n\n// Initialize the default configuration\n// Note: when we get other representations, we should set their default representations too.\nconst defaultLabelmapConfig = getDefaultLabelmapConfig();\nconst defaultContourConfig = getDefaultContourConfig();\n\nconst newGlobalConfig: SegmentationRepresentationConfig = {\n  renderInactiveSegmentations: true,\n  representations: {\n    [SegmentationRepresentations.Labelmap]: defaultLabelmapConfig,\n    [SegmentationRepresentations.Contour]: defaultContourConfig,\n  },\n};\n\n/* A default initial state for the segmentation manager. */\nconst initialDefaultState: SegmentationState = {\n  colorLUT: [],\n  segmentations: [],\n  globalConfig: newGlobalConfig,\n  toolGroups: {},\n};\n\n/**\n * The SegmentationStateManager Class is responsible for managing the state of the\n * segmentations. It stores the segmentations and toolGroup specific representations\n * of the segmentation. It also stores a global config and a toolGroup specific\n * config. Note that this is a singleton state manager.\n */\nexport default class SegmentationStateManager {\n  private state: SegmentationState;\n  public readonly uid: string;\n\n  constructor(uid?: string) {\n    if (!uid) {\n      uid = csUtils.uuidv4();\n    }\n    this.state = cloneDeep(initialDefaultState);\n    this.uid = uid;\n  }\n\n  /**\n   * It returns a copy of the current state of the segmentation\n   * @returns A deep copy of the state.\n   */\n  getState(): SegmentationState {\n    return this.state;\n  }\n\n  /**\n   * It returns an array of toolGroupIds currently in the segmentation state.\n   * @returns An array of strings.\n   */\n  getToolGroups(): string[] {\n    return Object.keys(this.state.toolGroups);\n  }\n\n  /**\n   * It returns the colorLUT at the specified index.\n   * @param lutIndex - The index of the color LUT to retrieve.\n   * @returns A ColorLUT object.\n   */\n  getColorLUT(lutIndex: number): ColorLUT | undefined {\n    return this.state.colorLUT[lutIndex];\n  }\n\n  /**\n   * Reset the state to the default state\n   */\n  resetState(): void {\n    this.state = cloneDeep(initialDefaultState);\n  }\n\n  /**\n   * Given a segmentation Id, return the segmentation state\n   * @param segmentationId - The id of the segmentation to get the data for.\n   * @returns - The segmentation data\n   */\n  getSegmentation(segmentationId: string): Segmentation | undefined {\n    return this.state.segmentations.find(\n      (segmentation) => segmentation.segmentationId === segmentationId\n    );\n  }\n\n  /**\n   * It adds a segmentation to the segmentations array.\n   * @param segmentation - Segmentation\n   */\n  addSegmentation(segmentation: Segmentation): void {\n    this._initDefaultColorLUTIfNecessary();\n\n    // Check if the segmentation already exists with the segmentationId\n    if (this.getSegmentation(segmentation.segmentationId)) {\n      throw new Error(\n        `Segmentation with id ${segmentation.segmentationId} already exists`\n      );\n    }\n\n    this.state.segmentations.push(segmentation);\n  }\n\n  /**\n   * Get the segmentation representations for a tool group\n   * @param toolGroupId - string\n   * @returns A list of segmentation representations.\n   */\n  getSegmentationRepresentations(\n    toolGroupId: string\n  ): ToolGroupSpecificRepresentations | undefined {\n    const toolGroupSegRepresentationsWithConfig =\n      this.state.toolGroups[toolGroupId];\n\n    if (!toolGroupSegRepresentationsWithConfig) {\n      return;\n    }\n\n    return toolGroupSegRepresentationsWithConfig.segmentationRepresentations;\n  }\n\n  /**\n   * Returns an array of all segmentation representations for all tool groups.\n   * @returns An array of ToolGroupSpecificRepresentations.\n   */\n  getAllSegmentationRepresentations(): Record<\n    string,\n    ToolGroupSpecificRepresentation[]\n  > {\n    const toolGroupSegReps: Record<string, ToolGroupSpecificRepresentation[]> =\n      {};\n    Object.entries(this.state.toolGroups).forEach(\n      ([toolGroupId, toolGroupSegRepresentationsWithConfig]) => {\n        toolGroupSegReps[toolGroupId] =\n          toolGroupSegRepresentationsWithConfig.segmentationRepresentations;\n      }\n    );\n    return toolGroupSegReps;\n  }\n\n  /**\n   * Add a new segmentation representation to the toolGroup's segmentation representations.\n   * @param toolGroupId - The Id of the tool group .\n   * @param segmentationRepresentation - The segmentation representation to add.\n   */\n  addSegmentationRepresentation(\n    toolGroupId: string,\n    segmentationRepresentation: ToolGroupSpecificRepresentation\n  ): void {\n    // Initialize the default toolGroup state if not created yet\n    if (!this.state.toolGroups[toolGroupId]) {\n      this.state.toolGroups[toolGroupId] = {\n        segmentationRepresentations: [],\n        config: {} as SegmentationRepresentationConfig,\n      };\n    }\n\n    // local toolGroupSpecificSegmentationState\n    this.state.toolGroups[toolGroupId].segmentationRepresentations.push(\n      segmentationRepresentation\n    );\n\n    this._handleActiveSegmentation(toolGroupId, segmentationRepresentation);\n  }\n\n  /**\n   * Get the global config containing both representation config\n   * and render inactive segmentations config\n   * @returns The global config object.\n   */\n  getGlobalConfig(): SegmentationRepresentationConfig {\n    return this.state.globalConfig;\n  }\n\n  /**\n   * It sets the global segmentation config including both representation config\n   * and render inactive segmentations config\n   * @param config - The global configuration for the segmentations.\n   */\n  setGlobalConfig(config: SegmentationRepresentationConfig): void {\n    this.state.globalConfig = config;\n  }\n\n  /**\n   * Given a toolGroupId and a segmentationRepresentationUID, return the segmentation\n   * representation for that tool group.\n   * @param toolGroupId - The Id of the tool group\n   * @param segmentationRepresentationUID - string\n   * @returns The segmentation representation.\n   */\n  getSegmentationRepresentationByUID(\n    toolGroupId: string,\n    segmentationRepresentationUID: string\n  ): ToolGroupSpecificRepresentation | undefined {\n    const toolGroupSegRepresentations =\n      this.getSegmentationRepresentations(toolGroupId);\n\n    const segmentationData = toolGroupSegRepresentations.find(\n      (representation) =>\n        representation.segmentationRepresentationUID ===\n        segmentationRepresentationUID\n    );\n\n    return segmentationData;\n  }\n\n  /**\n   * It removes the segmentation from the segmentation state.\n   * @param segmentationId - The id of the segmentation to remove.\n   */\n  removeSegmentation(segmentationId: string): void {\n    this.state.segmentations = this.state.segmentations.filter(\n      (segmentation) => segmentation.segmentationId !== segmentationId\n    );\n  }\n\n  /**\n   * Remove a segmentation representation from the toolGroup\n   * @param toolGroupId - The Id of the tool group\n   * @param segmentationRepresentationUID - the uid of the segmentation representation to remove\n   * @param immediate - If true, the viewport will be updated immediately.\n   */\n  removeSegmentationRepresentation(\n    toolGroupId: string,\n    segmentationRepresentationUID: string\n  ): void {\n    const toolGroupSegmentationRepresentations =\n      this.getSegmentationRepresentations(toolGroupId);\n\n    if (\n      !toolGroupSegmentationRepresentations ||\n      !toolGroupSegmentationRepresentations.length\n    ) {\n      throw new Error(\n        `No viewport specific segmentation state found for viewport ${toolGroupId}`\n      );\n    }\n\n    const state =\n      toolGroupSegmentationRepresentations as ToolGroupSpecificRepresentations;\n    const index = state.findIndex(\n      (segData) =>\n        segData.segmentationRepresentationUID === segmentationRepresentationUID\n    );\n\n    if (index === -1) {\n      console.warn(\n        `No viewport specific segmentation state data found for viewport ${toolGroupId} and segmentation data UID ${segmentationRepresentationUID}`\n      );\n    }\n\n    const removedSegmentationRepresentation =\n      toolGroupSegmentationRepresentations[index];\n\n    toolGroupSegmentationRepresentations.splice(index, 1);\n\n    this._handleActiveSegmentation(\n      toolGroupId,\n      removedSegmentationRepresentation\n    );\n  }\n\n  /**\n   * Set the active segmentation data for a tool group\n   * @param toolGroupId - The Id of the tool group that owns the\n   * segmentation data.\n   * @param segmentationRepresentationUID - string\n   */\n  setActiveSegmentationRepresentation(\n    toolGroupId: string,\n    segmentationRepresentationUID: string\n  ): void {\n    const toolGroupSegmentations =\n      this.getSegmentationRepresentations(toolGroupId);\n\n    if (!toolGroupSegmentations || !toolGroupSegmentations.length) {\n      throw new Error(\n        `No segmentation data found for toolGroupId: ${toolGroupId}`\n      );\n    }\n\n    const segmentationData = toolGroupSegmentations.find(\n      (segmentationData) =>\n        segmentationData.segmentationRepresentationUID ===\n        segmentationRepresentationUID\n    );\n\n    if (!segmentationData) {\n      throw new Error(\n        `No segmentation data found for segmentation data UID ${segmentationRepresentationUID}`\n      );\n    }\n\n    segmentationData.active = true;\n    this._handleActiveSegmentation(toolGroupId, segmentationData);\n  }\n\n  /**\n   * Given a tool group Id it returns the tool group specific representation config\n   *\n   * @param toolGroupId - The Id of the tool group\n   * @returns A SegmentationConfig object.\n   */\n  getToolGroupSpecificConfig(\n    toolGroupId: string\n  ): SegmentationRepresentationConfig | undefined {\n    const toolGroupStateWithConfig = this.state.toolGroups[toolGroupId];\n\n    if (!toolGroupStateWithConfig) {\n      return;\n    }\n\n    return toolGroupStateWithConfig.config;\n  }\n\n  getSegmentationRepresentationSpecificConfig(\n    toolGroupId: string,\n    segmentationRepresentationUID: string\n  ): RepresentationConfig {\n    const segmentationRepresentation = this.getSegmentationRepresentationByUID(\n      toolGroupId,\n      segmentationRepresentationUID\n    );\n\n    if (!segmentationRepresentation) {\n      return;\n    }\n\n    return segmentationRepresentation.segmentationRepresentationSpecificConfig;\n  }\n\n  setSegmentationRepresentationSpecificConfig(\n    toolGroupId: string,\n    segmentationRepresentationUID: string,\n    config: RepresentationConfig\n  ): void {\n    const segmentationRepresentation = this.getSegmentationRepresentationByUID(\n      toolGroupId,\n      segmentationRepresentationUID\n    );\n\n    if (!segmentationRepresentation) {\n      return;\n    }\n\n    segmentationRepresentation.segmentationRepresentationSpecificConfig =\n      config;\n  }\n\n  getSegmentSpecificConfig(\n    toolGroupId: string,\n    segmentationRepresentationUID: string,\n    segmentIndex: number\n  ): RepresentationConfig {\n    const segmentationRepresentation = this.getSegmentationRepresentationByUID(\n      toolGroupId,\n      segmentationRepresentationUID\n    );\n\n    if (!segmentationRepresentation) {\n      return;\n    }\n\n    return segmentationRepresentation.segmentSpecificConfig[segmentIndex];\n  }\n\n  setSegmentSpecificConfig(\n    toolGroupId: string,\n    segmentationRepresentationUID: string,\n    config: SegmentSpecificRepresentationConfig\n  ): void {\n    const segmentationRepresentation = this.getSegmentationRepresentationByUID(\n      toolGroupId,\n      segmentationRepresentationUID\n    );\n\n    if (!segmentationRepresentation) {\n      return;\n    }\n\n    segmentationRepresentation.segmentSpecificConfig = config;\n  }\n\n  /**\n   * Set the segmentation representations config for a given tool group. It will create a new\n   * tool group specific config if one does not exist.\n   *\n   * @param toolGroupId - The Id of the tool group that the segmentation\n   * belongs to.\n   * @param config - SegmentationConfig\n   */\n  setSegmentationRepresentationConfig(\n    toolGroupId: string,\n    config: SegmentationRepresentationConfig\n  ): void {\n    let toolGroupStateWithConfig = this.state.toolGroups[toolGroupId];\n\n    if (!toolGroupStateWithConfig) {\n      this.state.toolGroups[toolGroupId] = {\n        segmentationRepresentations: [],\n        config: {\n          renderInactiveSegmentations: true,\n          representations: {},\n        },\n      };\n\n      toolGroupStateWithConfig = this.state.toolGroups[toolGroupId];\n    }\n\n    toolGroupStateWithConfig.config = {\n      ...toolGroupStateWithConfig.config,\n      ...config,\n    };\n  }\n\n  /**\n   * It adds a color LUT to the state.\n   * @param colorLUT - ColorLUT\n   * @param lutIndex - The index of the color LUT table to add.\n   */\n  addColorLUT(colorLUT: ColorLUT, lutIndex: number): void {\n    if (this.state.colorLUT[lutIndex]) {\n      console.log('Color LUT table already exists, overwriting');\n    }\n\n    this.state.colorLUT[lutIndex] = colorLUT;\n  }\n\n  /**\n   * Removes a color LUT to the state.\n   * @param colorLUTIndex - The index of the color LUT table to remove.\n   */\n  removeColorLUT(colorLUTIndex: number): void {\n    delete this.state.colorLUT[colorLUTIndex];\n  }\n\n  /**\n   * It handles the active segmentation representation based on the active status of the\n   * segmentation representation that was added or removed.\n   *\n   * @param toolGroupId - The Id of the tool group that the segmentation representation belongs to.\n   * @param recentlyAddedOrRemovedSegmentationRepresentation - ToolGroupSpecificSegmentationData\n   */\n  _handleActiveSegmentation(\n    toolGroupId: string,\n    recentlyAddedOrRemovedSegmentationRepresentation: ToolGroupSpecificRepresentation\n  ): void {\n    const segmentationRepresentations =\n      this.getSegmentationRepresentations(toolGroupId);\n\n    // 1. If there is no segmentation representations, return early\n    if (segmentationRepresentations.length === 0) {\n      return;\n    }\n\n    // 2. If there is only one segmentation representation, make that one active\n    if (segmentationRepresentations.length === 1) {\n      segmentationRepresentations[0].active = true;\n      return;\n    }\n\n    // 3. If removed Segmentation representation was active, make the first one active\n    const activeSegmentationRepresentations =\n      segmentationRepresentations.filter(\n        (representation) => representation.active\n      );\n\n    if (activeSegmentationRepresentations.length === 0) {\n      segmentationRepresentations[0].active = true;\n      return;\n    }\n\n    // 4. If the added segmentation representation is active, make other segmentation\n    // representations inactive\n    if (recentlyAddedOrRemovedSegmentationRepresentation.active) {\n      segmentationRepresentations.forEach((representation) => {\n        if (\n          representation.segmentationRepresentationUID !==\n          recentlyAddedOrRemovedSegmentationRepresentation.segmentationRepresentationUID\n        ) {\n          representation.active = false;\n        }\n      });\n    }\n\n    // 5. if added/removed segmentation is is inactive, do nothing\n  }\n\n  _initDefaultColorLUTIfNecessary() {\n    // if colorLUTTable is not specified or the default one is not found\n    if (this.state.colorLUT.length === 0 || !this.state.colorLUT[0]) {\n      this.addColorLUT(CORNERSTONE_COLOR_LUT as ColorLUT, 0);\n    }\n  }\n}\n\nconst defaultSegmentationStateManager = new SegmentationStateManager('DEFAULT');\nexport { defaultSegmentationStateManager };\n","import { triggerEvent, eventTarget } from '@cornerstonejs/core';\n\nimport { Events } from '../../enums';\nimport {\n  getSegmentationRepresentations,\n  getSegmentations,\n} from '../../stateManagement/segmentation/segmentationState';\nimport {\n  SegmentationRepresentationModifiedEventDetail,\n  SegmentationDataModifiedEventDetail,\n  SegmentationModifiedEventDetail,\n  SegmentationRepresentationRemovedEventDetail,\n  SegmentationRemovedEventDetail,\n} from '../../types/EventTypes';\n\n/**\n * Trigger an event that a segmentation is removed\n * @param segmentationId - The Id of segmentation\n */\nfunction triggerSegmentationRemoved(segmentationId: string): void {\n  const eventDetail: SegmentationRemovedEventDetail = {\n    segmentationId,\n  };\n\n  triggerEvent(eventTarget, Events.SEGMENTATION_REMOVED, eventDetail);\n}\n\n/**\n * Trigger an event that a segmentation representation was removed\n * @param toolGroupId - The id of the tool group that the segmentation\n * representation was removed from.\n * @param segmentationRepresentationUID - The UID of the segmentation\n * representation that was removed.\n */\nfunction triggerSegmentationRepresentationRemoved(\n  toolGroupId: string,\n  segmentationRepresentationUID: string\n): void {\n  const eventDetail: SegmentationRepresentationRemovedEventDetail = {\n    toolGroupId,\n    segmentationRepresentationUID,\n  };\n\n  triggerEvent(\n    eventTarget,\n    Events.SEGMENTATION_REPRESENTATION_REMOVED,\n    eventDetail\n  );\n}\n\n/**\n * Trigger an event on the eventTarget that the segmentation representation for\n * toolGroupId has been updated\n * @param toolGroupId - The Id of the toolGroup\n */\nfunction triggerSegmentationRepresentationModified(\n  toolGroupId: string,\n  segmentationRepresentationUID?: string\n): void {\n  const eventDetail: SegmentationRepresentationModifiedEventDetail = {\n    toolGroupId,\n    segmentationRepresentationUID,\n  };\n\n  if (segmentationRepresentationUID) {\n    triggerEvent(\n      eventTarget,\n      Events.SEGMENTATION_REPRESENTATION_MODIFIED,\n      eventDetail\n    );\n    return;\n  }\n\n  // If no segmentationRepresentationUID is provided, then we need to trigger\n  // the event for all segmentation representations in the toolGroup\n\n  // Get all segmentation representations in the toolGroup\n  const segmentationRepresentations =\n    getSegmentationRepresentations(toolGroupId) || [];\n\n  segmentationRepresentations.forEach((segmentationRepresentation) => {\n    const { segmentationRepresentationUID } = segmentationRepresentation;\n    const eventDetail: SegmentationRepresentationModifiedEventDetail = {\n      toolGroupId,\n      segmentationRepresentationUID,\n    };\n\n    triggerEvent(\n      eventTarget,\n      Events.SEGMENTATION_REPRESENTATION_MODIFIED,\n      eventDetail\n    );\n  });\n}\n\n/**\n * Triggers segmentation global state updated event, notifying all toolGroups\n * that the global state has been updated, If a segmentationId is provided\n * the event will only be triggered for that segmentation, otherwise it will\n * be triggered for all segmentations.\n *\n * @param segmentationId - The id of the segmentation that has been updated\n */\nfunction triggerSegmentationModified(segmentationId?: string): void {\n  let segmentationIds;\n\n  if (segmentationId) {\n    segmentationIds = [segmentationId];\n  } else {\n    // get all toolGroups\n    segmentationIds = getSegmentations().map(\n      ({ segmentationId }) => segmentationId\n    );\n  }\n\n  // 1. Trigger an event notifying all listeners about the segmentationId\n  // that has been updated.\n  segmentationIds.forEach((segmentationId) => {\n    const eventDetail: SegmentationModifiedEventDetail = {\n      segmentationId,\n    };\n    triggerEvent(eventTarget, Events.SEGMENTATION_MODIFIED, eventDetail);\n  });\n\n  // Todo: I don't think we need the following lines of code\n  // // 2. Notify all viewports that render the segmentationId in order to update the\n  // // rendering based on the new global state.\n  // toolGroupIds.forEach((toolGroupId) => {\n  //   triggerSegmentationRepresentationModified(toolGroupId)\n  // })\n}\n\n/**\n * Trigger an event that a segmentation data has been modified\n * @param segmentationId - The Id of segmentation\n */\nfunction triggerSegmentationDataModified(\n  segmentationId: string,\n  modifiedSlicesToUse?: number[]\n): void {\n  const eventDetail: SegmentationDataModifiedEventDetail = {\n    segmentationId,\n    modifiedSlicesToUse,\n  };\n\n  triggerEvent(eventTarget, Events.SEGMENTATION_DATA_MODIFIED, eventDetail);\n}\n\nexport {\n  // ToolGroup Specific\n  triggerSegmentationRepresentationModified,\n  triggerSegmentationRepresentationRemoved,\n  // Global\n  triggerSegmentationDataModified,\n  triggerSegmentationModified,\n  triggerSegmentationRemoved,\n};\n","import {\n  SegmentationPublicInput,\n  Segmentation,\n} from '../../../types/SegmentationStateTypes';\n\n/**\n * It takes in a segmentation input and returns a segmentation with default values\n * @param segmentationInput - The input to the segmentation.\n * @returns A Segmentation object.\n * @internal\n */\nfunction normalizeSegmentationInput(\n  segmentationInput: SegmentationPublicInput\n): Segmentation {\n  const { segmentationId, representation } = segmentationInput;\n\n  // Todo: we should be able to let the user pass in non-default values for\n  // cachedStats, label, activeSegmentIndex, etc.\n  return {\n    segmentationId,\n    cachedStats: {},\n    segmentLabels: {},\n    label: null,\n    segmentsLocked: new Set(),\n    type: representation.type,\n    activeSegmentIndex: 1,\n    representationData: {\n      [representation.type]: {\n        ...representation.data,\n      },\n    },\n  };\n}\n\nexport default normalizeSegmentationInput;\n","import type {\n  ColorLUT,\n  RepresentationConfig,\n  Segmentation,\n  SegmentationPublicInput,\n  SegmentationRepresentationConfig,\n  SegmentSpecificRepresentationConfig,\n  ToolGroupSpecificRepresentation,\n  ToolGroupSpecificRepresentations,\n} from '../../types/SegmentationStateTypes';\nimport { defaultSegmentationStateManager } from './SegmentationStateManager';\nimport {\n  triggerSegmentationModified,\n  triggerSegmentationRemoved,\n  triggerSegmentationRepresentationModified,\n  triggerSegmentationRepresentationRemoved,\n} from './triggerSegmentationEvents';\n\nimport normalizeSegmentationInput from './helpers/normalizeSegmentationInput';\n\n/**\n * It returns the defaultSegmentationStateManager.\n */\nfunction getDefaultSegmentationStateManager() {\n  return defaultSegmentationStateManager;\n}\n\n/*************************\n *\n * Segmentation State\n *\n **************************/\n\n/**\n * Get the segmentation for the given segmentationId\n * @param segmentationId - The Id of the segmentation\n * @returns A GlobalSegmentationData object\n */\nfunction getSegmentation(segmentationId: string): Segmentation | undefined {\n  const segmentationStateManager = getDefaultSegmentationStateManager();\n  return segmentationStateManager.getSegmentation(segmentationId);\n}\n\n/**\n * Get the segmentations inside the state\n * @returns Segmentation array\n */\nfunction getSegmentations(): Segmentation[] | [] {\n  const segmentationStateManager = getDefaultSegmentationStateManager();\n  const state = segmentationStateManager.getState();\n\n  return state.segmentations;\n}\n\n/**\n * It takes a segmentation input and adds it to the segmentation state manager\n * @param segmentationInput - The segmentation to add.\n * @param suppressEvents - If true, the event will not be triggered.\n */\nfunction addSegmentation(\n  segmentationInput: SegmentationPublicInput,\n  suppressEvents?: boolean\n): void {\n  const segmentationStateManager = getDefaultSegmentationStateManager();\n\n  const segmentation = normalizeSegmentationInput(segmentationInput);\n\n  segmentationStateManager.addSegmentation(segmentation);\n\n  if (!suppressEvents) {\n    triggerSegmentationModified(segmentation.segmentationId);\n  }\n}\n\n/**\n * Get the segmentation state for a tool group. It will return an array of\n * segmentation representation objects.\n * @param toolGroupId - The unique identifier of the tool group.\n * @returns An array of segmentation representation objects.\n */\nfunction getSegmentationRepresentations(\n  toolGroupId: string\n): ToolGroupSpecificRepresentations | [] {\n  const segmentationStateManager = getDefaultSegmentationStateManager();\n  return segmentationStateManager.getSegmentationRepresentations(toolGroupId);\n}\n\n/**\n * Get all segmentation representations in the state\n * @returns An array of segmentation representation objects.\n */\nfunction getAllSegmentationRepresentations(): Record<\n  string,\n  ToolGroupSpecificRepresentation[]\n> {\n  const segmentationStateManager = getDefaultSegmentationStateManager();\n  return segmentationStateManager.getAllSegmentationRepresentations();\n}\n\n/**\n * Get the tool group IDs that have a segmentation representation with the given\n * segmentationId\n * @param segmentationId - The id of the segmentation\n * @returns An array of tool group IDs.\n */\nfunction getToolGroupIdsWithSegmentation(segmentationId: string): string[] {\n  if (!segmentationId) {\n    throw new Error('getToolGroupIdsWithSegmentation: segmentationId is empty');\n  }\n\n  const segmentationStateManager = getDefaultSegmentationStateManager();\n  const state = segmentationStateManager.getState();\n  const toolGroupIds = Object.keys(state.toolGroups);\n\n  const foundToolGroupIds = [];\n  toolGroupIds.forEach((toolGroupId) => {\n    const toolGroupSegmentationRepresentations =\n      segmentationStateManager.getSegmentationRepresentations(toolGroupId);\n\n    toolGroupSegmentationRepresentations.forEach((representation) => {\n      if (representation.segmentationId === segmentationId) {\n        foundToolGroupIds.push(toolGroupId);\n      }\n    });\n  });\n\n  return foundToolGroupIds;\n}\n\n/**\n * Get the segmentation representations config for a given tool group\n * @param toolGroupId - The Id of the tool group that the segmentation\n * config belongs to.\n * @returns A SegmentationConfig object.\n */\nfunction getToolGroupSpecificConfig(\n  toolGroupId: string\n): SegmentationRepresentationConfig {\n  const segmentationStateManager = getDefaultSegmentationStateManager();\n  return segmentationStateManager.getToolGroupSpecificConfig(toolGroupId);\n}\n\n/**\n * Set the segmentation representation config for the provided toolGroup. ToolGroup specific\n * configuration overwrites the global configuration for each representation.\n * It fires SEGMENTATION_REPRESENTATION_MODIFIED event if not suppressed.\n *\n * @triggers SEGMENTATION_REPRESENTATION_MODIFIED\n * @param toolGroupId - The Id of the tool group that the segmentation\n * config is being set for.\n * @param config - The new configuration for the tool group.\n * @param suppressEvents - If true, the event will not be triggered.\n */\nfunction setToolGroupSpecificConfig(\n  toolGroupId: string,\n  config: SegmentationRepresentationConfig,\n  suppressEvents?: boolean\n): void {\n  const segmentationStateManager = getDefaultSegmentationStateManager();\n  segmentationStateManager.setSegmentationRepresentationConfig(\n    toolGroupId,\n    config\n  );\n\n  if (!suppressEvents) {\n    triggerSegmentationRepresentationModified(toolGroupId);\n  }\n}\n\n/**\n * It sets the segmentation representation specific config for all the segments\n * inside the segmentation.\n * @param segmentationRepresentationUID - The unique identifier of the segmentation representation.\n * @param config  - The new configuration for the segmentation representation it is an object with keys of\n * different representation types, and values of the configuration for each representation type.\n */\nfunction setSegmentationRepresentationSpecificConfig(\n  toolGroupId: string,\n  segmentationRepresentationUID: string,\n  config: RepresentationConfig,\n  suppressEvents = false\n): void {\n  const segmentationStateManager = getDefaultSegmentationStateManager();\n  segmentationStateManager.setSegmentationRepresentationSpecificConfig(\n    toolGroupId,\n    segmentationRepresentationUID,\n    config\n  );\n\n  if (!suppressEvents) {\n    triggerSegmentationRepresentationModified(\n      toolGroupId,\n      segmentationRepresentationUID\n    );\n  }\n}\n\n/**\n * It returns the segmentation representation specific config which is the same for all the segments\n * @param segmentationRepresentationUID - The unique identifier of the segmentation representation.\n * @returns - The segmentation representation specific config.\n */\nfunction getSegmentationRepresentationSpecificConfig(\n  toolGroupId: string,\n  segmentationRepresentationUID: string\n): RepresentationConfig {\n  const segmentationStateManager = getDefaultSegmentationStateManager();\n  return segmentationStateManager.getSegmentationRepresentationSpecificConfig(\n    toolGroupId,\n    segmentationRepresentationUID\n  );\n}\n\nfunction getSegmentSpecificRepresentationConfig(\n  toolGroupId: string,\n  segmentationRepresentationUID: string,\n  segmentIndex: number\n): RepresentationConfig {\n  const segmentationStateManager = getDefaultSegmentationStateManager();\n  return segmentationStateManager.getSegmentSpecificConfig(\n    toolGroupId,\n    segmentationRepresentationUID,\n    segmentIndex\n  );\n}\n\nfunction setSegmentSpecificRepresentationConfig(\n  toolGroupId: string,\n  segmentationRepresentationUID: string,\n  config: SegmentSpecificRepresentationConfig,\n  suppressEvents = false\n): void {\n  const segmentationStateManager = getDefaultSegmentationStateManager();\n  segmentationStateManager.setSegmentSpecificConfig(\n    toolGroupId,\n    segmentationRepresentationUID,\n    config\n  );\n\n  // Todo: this can be even more performant if we create a new event for\n  // triggering a specific segment config change.\n  if (!suppressEvents) {\n    triggerSegmentationRepresentationModified(\n      toolGroupId,\n      segmentationRepresentationUID\n    );\n  }\n}\n\n/**\n * Add the given segmentation representation data to the given tool group state. It fires\n * SEGMENTATION_REPRESENTATION_MODIFIED event if not suppressed.\n *\n * @triggers SEGMENTATION_REPRESENTATION_MODIFIED\n *\n * @param toolGroupId - The Id of the tool group that the segmentation representation is for.\n * @param segmentationData - The data to add to the segmentation state.\n * @param suppressEvents - boolean\n */\nfunction addSegmentationRepresentation(\n  toolGroupId: string,\n  segmentationRepresentation: ToolGroupSpecificRepresentation,\n  suppressEvents?: boolean\n): void {\n  const segmentationStateManager = getDefaultSegmentationStateManager();\n  segmentationStateManager.addSegmentationRepresentation(\n    toolGroupId,\n    segmentationRepresentation\n  );\n\n  if (!suppressEvents) {\n    triggerSegmentationRepresentationModified(\n      toolGroupId,\n      segmentationRepresentation.segmentationRepresentationUID\n    );\n  }\n}\n\n/**\n * It returns the global segmentation config. Note that the toolGroup-specific\n * configuration has higher priority than the global configuration and overwrites\n * the global configuration for each representation.\n * @returns The global segmentation configuration for all segmentations.\n */\nfunction getGlobalConfig(): SegmentationRepresentationConfig {\n  const segmentationStateManager = getDefaultSegmentationStateManager();\n  return segmentationStateManager.getGlobalConfig();\n}\n\n/**\n * Set the global segmentation configuration. It fires SEGMENTATION_MODIFIED\n * event if not suppressed.\n *\n * @triggers SEGMENTATION_MODIFIED\n * @param config - The new global segmentation config.\n * @param suppressEvents - If true, the `segmentationGlobalStateModified` event will not be triggered.\n */\nfunction setGlobalConfig(\n  config: SegmentationRepresentationConfig,\n  suppressEvents?: boolean\n): void {\n  const segmentationStateManager = getDefaultSegmentationStateManager();\n  segmentationStateManager.setGlobalConfig(config);\n\n  if (!suppressEvents) {\n    triggerSegmentationModified();\n  }\n}\n\n/**\n * Get the segmentation data object for a given tool group and\n * segmentation data UID. It searches all the toolGroup specific segmentation\n * data objects and returns the first one that matches the UID.\n * @param toolGroupId - The Id of the tool group that the segmentation\n * data belongs to.\n * @param segmentationRepresentationUID - The uid of the segmentation representation\n * @returns Segmentation Data object.\n */\nfunction getSegmentationRepresentationByUID(\n  toolGroupId: string,\n  segmentationRepresentationUID: string\n): ToolGroupSpecificRepresentation | undefined {\n  const segmentationStateManager = getDefaultSegmentationStateManager();\n  return segmentationStateManager.getSegmentationRepresentationByUID(\n    toolGroupId,\n    segmentationRepresentationUID\n  );\n}\n\n/**\n * It removes the segmentation from the segmentation state manager\n *\n * @triggers SEGMENTATION_REMOVED\n *\n * @param segmentationId - The id of the segmentation\n */\nfunction removeSegmentation(segmentationId: string): void {\n  const segmentationStateManager = getDefaultSegmentationStateManager();\n  segmentationStateManager.removeSegmentation(segmentationId);\n  triggerSegmentationRemoved(segmentationId);\n}\n\n/**\n * Remove a segmentation representation from the segmentation state manager for a toolGroup.\n * It fires SEGMENTATION_REPRESENTATION_MODIFIED event.\n *\n * @triggers SEGMENTATION_REPRESENTATION_REMOVED\n *\n * @param toolGroupId - The Id of the tool group that the segmentation\n * data belongs to.\n * @param segmentationRepresentationUID - The uid of the segmentation representation to remove.\n * remove.\n * @param - immediate - If true, the viewports will be updated immediately.\n */\nfunction removeSegmentationRepresentation(\n  toolGroupId: string,\n  segmentationRepresentationUID: string\n): void {\n  const segmentationStateManager = getDefaultSegmentationStateManager();\n  segmentationStateManager.removeSegmentationRepresentation(\n    toolGroupId,\n    segmentationRepresentationUID\n  );\n\n  triggerSegmentationRepresentationRemoved(\n    toolGroupId,\n    segmentationRepresentationUID\n  );\n}\n\n/**\n * Add a color LUT to the segmentation state manager\n * @param colorLUT - The color LUT array to add.\n * @param index - The index of the color LUT to add.\n */\nfunction removeColorLUT(colorLUTIndex: number): void {\n  const segmentationStateManager = getDefaultSegmentationStateManager();\n  segmentationStateManager.removeColorLUT(colorLUTIndex);\n}\n\n/**\n * Get the color lut for a given index\n * @param index - The index of the color lut to retrieve.\n * @returns A ColorLUT array.\n */\nfunction getColorLUT(index: number): ColorLUT | undefined {\n  const segmentationStateManager = getDefaultSegmentationStateManager();\n  return segmentationStateManager.getColorLUT(index);\n}\n\n/**\n * Add a color LUT to the segmentation state manager\n * @param colorLUT - The color LUT array to add.\n * @param index - The index of the color LUT to add.\n */\nfunction addColorLUT(colorLUT: ColorLUT, index: number): void {\n  const segmentationStateManager = getDefaultSegmentationStateManager();\n  segmentationStateManager.addColorLUT(colorLUT, index);\n  // Todo: trigger event color LUT added\n}\n\nexport {\n  getDefaultSegmentationStateManager,\n  // Segmentation\n  getSegmentation,\n  getSegmentations,\n  addSegmentation,\n  removeSegmentation,\n  // ToolGroup specific Segmentation Representation\n  getSegmentationRepresentations,\n  addSegmentationRepresentation,\n  removeSegmentationRepresentation,\n  // config\n  getToolGroupSpecificConfig,\n  setToolGroupSpecificConfig,\n  getGlobalConfig,\n  setGlobalConfig,\n  getSegmentationRepresentationSpecificConfig,\n  setSegmentationRepresentationSpecificConfig,\n  getSegmentSpecificRepresentationConfig,\n  setSegmentSpecificRepresentationConfig,\n  // helpers s\n  getToolGroupIdsWithSegmentation,\n  getAllSegmentationRepresentations,\n  getSegmentationRepresentationByUID,\n  // color\n  addColorLUT,\n  getColorLUT,\n  removeColorLUT,\n};\n","import SegmentationRepresentations from '../../../enums/SegmentationRepresentations';\nimport * as SegmentationState from '../../../stateManagement/segmentation/segmentationState';\n\nimport {\n  RepresentationConfig,\n  SegmentationRepresentationConfig,\n  SegmentSpecificRepresentationConfig,\n} from '../../../types/SegmentationStateTypes';\n\n/**\n * It returns the global segmentation config.\n * @returns The global segmentation config containing the representations\n * config for each representation type and renderInactiveSegmentations flag.\n */\nfunction getGlobalConfig(): SegmentationRepresentationConfig {\n  return SegmentationState.getGlobalConfig();\n}\n\n/**\n * Set the global segmentation config\n * @param segmentationConfig - SegmentationConfig\n */\nfunction setGlobalConfig(\n  segmentationConfig: SegmentationRepresentationConfig\n): void {\n  SegmentationState.setGlobalConfig(segmentationConfig);\n}\n\n/**\n * Given a representation type, return the corresponding global representation config\n * @param representationType - The type of representation to query\n * @returns A representation configuration object.\n */\nfunction getGlobalRepresentationConfig(\n  representationType: SegmentationRepresentations\n): RepresentationConfig['LABELMAP'] {\n  const globalConfig = getGlobalConfig();\n  return globalConfig.representations[representationType];\n}\n\n/**\n * Set the global configuration for a given representation type. It fires\n * a SEGMENTATION_MODIFIED event.\n *\n * @triggers SEGMENTATION_MODIFIED\n * @param representationType - The type of representation to set config for\n * @param config - The configuration for the representation.\n */\nfunction setGlobalRepresentationConfig(\n  representationType: SegmentationRepresentations,\n  config: RepresentationConfig['LABELMAP']\n): void {\n  const globalConfig = getGlobalConfig();\n\n  setGlobalConfig({\n    ...globalConfig,\n    representations: {\n      ...globalConfig.representations,\n      [representationType]: {\n        ...globalConfig.representations[representationType],\n        ...config,\n      },\n    },\n  });\n}\n\n/**\n * Get the toolGroup specific segmentation config\n * @param toolGroupId - The Id of the tool group\n * @returns A SegmentationConfig object.\n */\nfunction getToolGroupSpecificConfig(\n  toolGroupId: string\n): SegmentationRepresentationConfig {\n  return SegmentationState.getToolGroupSpecificConfig(toolGroupId);\n}\n\n/**\n * Sets the tool group specific configuration for the segmentation\n * representation. This will apply to all segmentation representations.\n * @param toolGroupId - The tool group id where the segmentation representation belongs to.\n * @param segmentationRepresentationConfig - This is the configuration object that you will use to set the default values for\n * the segmentation representation.\n */\nfunction setToolGroupSpecificConfig(\n  toolGroupId: string,\n  segmentationRepresentationConfig: SegmentationRepresentationConfig\n): void {\n  SegmentationState.setToolGroupSpecificConfig(\n    toolGroupId,\n    segmentationRepresentationConfig\n  );\n}\n\n/**\n * Give the segmentation representation UID, return the corresponding config\n * which is shared by all segments in the segmentation representation. This is\n * an optional level of configuration that can be set by the user, by default\n * it will fallback to the toolGroup specific config, if not set, it will fallback\n * to the global config.\n *\n * @param segmentationRepresentationUID - The uid of the segmentation representation\n * @param config - The configuration for the representation. This is an object\n * only containing the representation type as key and the config as value.\n * @returns - The configuration for the representation.\n */\nfunction getSegmentationRepresentationSpecificConfig(\n  toolGroupId: string,\n  segmentationRepresentationUID: string\n): RepresentationConfig {\n  return SegmentationState.getSegmentationRepresentationSpecificConfig(\n    toolGroupId,\n    segmentationRepresentationUID\n  );\n}\n\n/**\n * Set the segmentation representation specific configuration for the\n * segmentation representation. This will apply to all segments in the\n * segmentation representation and has higher priority than the toolGroup\n * specific config.\n *\n * @param segmentationRepresentationUID - The uid of the segmentation representation\n * @param config - The configuration for the representation. This is an object\n * only containing the representation type as key and the config as value.\n */\nfunction setSegmentationRepresentationSpecificConfig(\n  toolGroupId: string,\n  segmentationRepresentationUID: string,\n  config: RepresentationConfig\n): void {\n  SegmentationState.setSegmentationRepresentationSpecificConfig(\n    toolGroupId,\n    segmentationRepresentationUID,\n    config\n  );\n}\n\n/**\n * Get the segment specific configuration for the segmentation representation.\n *\n * @param toolGroupId - The tool group id where the segmentation representation belongs to.\n * @param segmentationRepresentationUID  - The uid of the segmentation representation\n * @param segmentIndex - The index of the segment\n * @returns - The configuration for the segment index in the segmentation representation that is shown in the toolGroup's viewport\n */\nfunction getSegmentSpecificConfig(\n  toolGroupId: string,\n  segmentationRepresentationUID: string,\n  segmentIndex: number\n): RepresentationConfig {\n  return SegmentationState.getSegmentSpecificRepresentationConfig(\n    toolGroupId,\n    segmentationRepresentationUID,\n    segmentIndex\n  );\n}\n\n/**\n * Set the segment specific configuration for the segmentation representation.\n * This configuration, if specified, has higher priority than the segmentation representation specific config,\n * and the toolGroup specific config. The order of priority is: segment specific config > segmentation representation specific config > toolGroup specific config > global config\n * @param toolGroupId - The tool group id where the segmentation representation belongs to.\n * @param segmentationRepresentationUID - The uid of the segmentation representation\n * @param segmentIndex - The index of the segment\n * @param config - The configuration for the representation. This is an object\n */\nfunction setSegmentSpecificConfig(\n  toolGroupId: string,\n  segmentationRepresentationUID: string,\n  config: SegmentSpecificRepresentationConfig\n): void {\n  SegmentationState.setSegmentSpecificRepresentationConfig(\n    toolGroupId,\n    segmentationRepresentationUID,\n    config\n  );\n}\n\nexport {\n  // Global\n  getGlobalConfig,\n  setGlobalConfig,\n  getGlobalRepresentationConfig,\n  setGlobalRepresentationConfig,\n  // ToolGroup Specific\n  getToolGroupSpecificConfig,\n  setToolGroupSpecificConfig,\n  // segmentation representation specific config\n  getSegmentationRepresentationSpecificConfig,\n  setSegmentationRepresentationSpecificConfig,\n  // segment specific config\n  getSegmentSpecificConfig,\n  setSegmentSpecificConfig,\n};\n","import {\n  getEnabledElement,\n  addVolumesToViewports,\n  Types,\n  Enums,\n} from '@cornerstonejs/core';\n\n/**\n * It adds a labelmap segmentation representation of the viewport's HTML Element.\n * NOTE: This function should not be called directly.\n *\n * @param element - The element that will be rendered.\n * @param volumeId - The volume id of the labelmap.\n * @param segmentationRepresentationUID - The segmentation representation UID.\n *\n * @internal\n */\nasync function addLabelmapToElement(\n  element: HTMLDivElement,\n  volumeId: string,\n  segmentationRepresentationUID: string\n): Promise<void> {\n  const enabledElement = getEnabledElement(element);\n  const { renderingEngine, viewport } = enabledElement;\n  const { id: viewportId } = viewport;\n\n  // Default to true since we are setting a new segmentation, however,\n  // in the event listener, we will make other segmentations visible/invisible\n  // based on the config\n  const visibility = true;\n  const immediateRender = false;\n  const suppressEvents = true;\n\n  // Todo: Right now we use MIP blend mode for the labelmap, since the\n  // composite blend mode has a non linear behavior regarding fill and line\n  // opacity. This should be changed to a custom labelmap blendMode which does\n  // what composite does, but with a linear behavior.\n  const volumeInputs: Types.IVolumeInput[] = [\n    {\n      volumeId,\n      actorUID: segmentationRepresentationUID,\n      visibility,\n      blendMode: Enums.BlendModes.MAXIMUM_INTENSITY_BLEND,\n    },\n  ];\n\n  // Add labelmap volumes to the viewports to be be rendered, but not force the render\n  await addVolumesToViewports(\n    renderingEngine,\n    volumeInputs,\n    [viewportId],\n    immediateRender,\n    suppressEvents\n  );\n}\n\nexport default addLabelmapToElement;\n","import { StackViewport, getEnabledElement } from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\n/**\n * Remove the labelmap segmentation representation from the viewport's HTML Element.\n * NOTE: This function should not be called directly.\n *\n * @param element - The element that the segmentation is being added to.\n * @param segmentationRepresentationUID - The UID of the labelmap representation to remove.\n * @param removeFromCache - boolean\n *\n * @internal\n */\nfunction removeLabelmapFromElement(\n  element: HTMLDivElement,\n  segmentationRepresentationUID: string,\n  removeFromCache = false // Todo\n): void {\n  const enabledElement = getEnabledElement(element);\n  const { viewport } = enabledElement;\n\n  if (viewport instanceof StackViewport) {\n    // Todo: we don't have stack segmentation yet\n    return;\n  }\n\n  (viewport as Types.IVolumeViewport).removeVolumeActors([\n    segmentationRepresentationUID,\n  ]);\n}\n\nexport default removeLabelmapFromElement;\n","import vtkPiecewiseFunction from '@kitware/vtk.js/Common/DataModel/PiecewiseFunction';\nimport vtkColorTransferFunction from '@kitware/vtk.js/Rendering/Core/ColorTransferFunction';\n\nimport {\n  cache,\n  getEnabledElementByIds,\n  Types,\n  utilities,\n} from '@cornerstonejs/core';\n\nimport Representations from '../../../enums/SegmentationRepresentations';\nimport * as SegmentationConfig from '../../../stateManagement/segmentation/config/segmentationConfig';\nimport * as SegmentationState from '../../../stateManagement/segmentation/segmentationState';\nimport { getToolGroup } from '../../../store/ToolGroupManager';\nimport type {\n  LabelmapConfig,\n  LabelmapRenderingConfig,\n} from '../../../types/LabelmapTypes';\nimport {\n  RepresentationPublicInput,\n  SegmentationRepresentationConfig,\n  ToolGroupSpecificRepresentation,\n} from '../../../types/SegmentationStateTypes';\n\nimport addLabelmapToElement from './addLabelmapToElement';\n\nimport removeLabelmapFromElement from './removeLabelmapFromElement';\n\nconst MAX_NUMBER_COLORS = 255;\nconst labelMapConfigCache = new Map();\n\n/**\n * For each viewport, in the toolGroup it adds the segmentation labelmap\n * representation to its viewports.\n * @param toolGroup - the tool group that contains the viewports\n * @param representationInput - The segmentation representation input\n * @param toolGroupSpecificConfig - The configuration object for toolGroup\n *\n * @returns The UID of the new segmentation representation\n */\nasync function addSegmentationRepresentation(\n  toolGroupId: string,\n  representationInput: RepresentationPublicInput,\n  toolGroupSpecificConfig?: SegmentationRepresentationConfig\n): Promise<string> {\n  const { segmentationId } = representationInput;\n  const segmentationRepresentationUID = utilities.uuidv4();\n\n  // Todo: make these configurable during representation input by user\n  const segmentsHidden = new Set() as Set<number>;\n  const colorLUTIndex = 0;\n  const active = true;\n  const cfun = vtkColorTransferFunction.newInstance();\n  const ofun = vtkPiecewiseFunction.newInstance();\n\n  ofun.addPoint(0, 0);\n\n  const toolGroupSpecificRepresentation: ToolGroupSpecificRepresentation = {\n    segmentationId,\n    segmentationRepresentationUID,\n    type: Representations.Labelmap,\n    segmentsHidden,\n    colorLUTIndex,\n    active,\n    segmentationRepresentationSpecificConfig: {},\n    segmentSpecificConfig: {},\n    config: {\n      cfun,\n      ofun,\n    },\n  };\n\n  // Update the toolGroup specific configuration\n  if (toolGroupSpecificConfig) {\n    // Since setting configuration on toolGroup will trigger a segmentationRepresentation\n    // update event, we don't want to trigger the event twice, so we suppress\n    // the first one\n    const currentToolGroupConfig =\n      SegmentationConfig.getToolGroupSpecificConfig(toolGroupId);\n\n    const mergedConfig = utilities.deepMerge(\n      currentToolGroupConfig,\n      toolGroupSpecificConfig\n    );\n\n    SegmentationConfig.setToolGroupSpecificConfig(toolGroupId, {\n      renderInactiveSegmentations:\n        mergedConfig.renderInactiveSegmentations || true,\n      representations: {\n        ...mergedConfig.representations,\n      },\n    });\n  }\n\n  SegmentationState.addSegmentationRepresentation(\n    toolGroupId,\n    toolGroupSpecificRepresentation\n  );\n\n  return segmentationRepresentationUID;\n}\n\n/**\n * For each viewport, and for each segmentation, set the segmentation for the viewport's enabled element\n * Initializes the global and viewport specific state for the segmentation in the\n * SegmentationStateManager.\n * @param toolGroup - the tool group that contains the viewports\n * @param segmentationRepresentationUID - The uid of the segmentation representation\n * @param renderImmediate - If true, there will be a render call after the labelmap is removed\n */\nfunction removeSegmentationRepresentation(\n  toolGroupId: string,\n  segmentationRepresentationUID: string,\n  renderImmediate = false\n): void {\n  _removeLabelmapFromToolGroupViewports(\n    toolGroupId,\n    segmentationRepresentationUID\n  );\n  SegmentationState.removeSegmentationRepresentation(\n    toolGroupId,\n    segmentationRepresentationUID\n  );\n\n  if (renderImmediate) {\n    const viewportsInfo = getToolGroup(toolGroupId).getViewportsInfo();\n    viewportsInfo.forEach(({ viewportId, renderingEngineId }) => {\n      const enabledElement = getEnabledElementByIds(\n        viewportId,\n        renderingEngineId\n      );\n      enabledElement.viewport.render();\n    });\n  }\n}\n\n/**\n * Checks if a segmentation data have the same frameOfReference as the series\n * displayed in a given viewport\n * @param viewport\n * @param referencedVolumeId volume id of the segmentation reference series\n * @returns\n */\nfunction isSameFrameOfReference(viewport, referencedVolumeId) {\n  // if the referencedVolumeId is not defined, we acted as before to not break\n  // applications as referencedVolumeId is inserted in this change\n  // Can modify that in the future commits\n  if (!referencedVolumeId) {\n    return true;\n  }\n  const defaultActor = viewport.getDefaultActor();\n  if (!defaultActor) {\n    return false;\n  }\n  const { uid: defaultActorUID } = defaultActor;\n  const volume = cache.getVolume(defaultActorUID);\n\n  if (volume) {\n    const referencedVolume = cache.getVolume(referencedVolumeId);\n    if (\n      referencedVolume &&\n      volume.metadata.FrameOfReferenceUID ===\n        referencedVolume.metadata.FrameOfReferenceUID\n    ) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * It takes the enabled element, the segmentation Id, and the configuration, and\n * it sets the segmentation for the enabled element as a labelmap\n * @param enabledElement - The cornerstone enabled element\n * @param segmentationId - The id of the segmentation to be rendered.\n * @param configuration - The configuration object for the labelmap.\n */\nasync function render(\n  viewport: Types.IVolumeViewport,\n  representation: ToolGroupSpecificRepresentation,\n  toolGroupConfig: SegmentationRepresentationConfig\n): Promise<void> {\n  const {\n    colorLUTIndex,\n    active,\n    segmentationId,\n    segmentationRepresentationUID,\n    segmentsHidden,\n    config: renderingConfig,\n  } = representation;\n\n  const segmentation = SegmentationState.getSegmentation(segmentationId);\n  const labelmapData =\n    segmentation.representationData[Representations.Labelmap];\n  const { volumeId: labelmapUID } = labelmapData;\n\n  const labelmap = cache.getVolume(labelmapUID);\n\n  if (!labelmap) {\n    throw new Error(`No Labelmap found for volumeId: ${labelmapUID}`);\n  }\n\n  if (!isSameFrameOfReference(viewport, labelmapData?.referencedVolumeId)) {\n    return;\n  }\n  let actorEntry = viewport.getActor(segmentationRepresentationUID);\n\n  if (!actorEntry) {\n    const segmentation = SegmentationState.getSegmentation(segmentationId);\n    const { volumeId } =\n      segmentation.representationData[Representations.Labelmap];\n    // only add the labelmap to ToolGroup viewports if it is not already added\n    await _addLabelmapToViewport(\n      viewport,\n      volumeId,\n      segmentationRepresentationUID\n    );\n\n    actorEntry = viewport.getActor(segmentationRepresentationUID);\n  }\n\n  if (!actorEntry) {\n    return;\n  }\n\n  const { cfun, ofun } = renderingConfig as LabelmapRenderingConfig;\n\n  const renderInactiveSegmentations =\n    toolGroupConfig.renderInactiveSegmentations;\n\n  _setLabelmapColorAndOpacity(\n    viewport.id,\n    actorEntry,\n    cfun,\n    ofun,\n    colorLUTIndex,\n    toolGroupConfig.representations[Representations.Labelmap],\n    representation,\n    active,\n    renderInactiveSegmentations,\n    segmentsHidden\n  );\n}\n\nfunction _setLabelmapColorAndOpacity(\n  viewportId: string,\n  actorEntry: Types.ActorEntry,\n  cfun: vtkColorTransferFunction,\n  ofun: vtkPiecewiseFunction,\n  colorLUTIndex: number,\n  toolGroupLabelmapConfig: LabelmapConfig,\n  segmentationRepresentation: ToolGroupSpecificRepresentation,\n  isActiveLabelmap: boolean,\n  renderInactiveSegmentations: boolean,\n  segmentsHidden: Set<number>\n): void {\n  const { segmentSpecificConfig, segmentationRepresentationSpecificConfig } =\n    segmentationRepresentation;\n\n  const segmentationRepresentationLabelmapConfig =\n    segmentationRepresentationSpecificConfig[Representations.Labelmap];\n\n  // Note: MAX_NUMBER_COLORS = 256 is needed because the current method to generate\n  // the default color table uses RGB.\n  const colorLUT = SegmentationState.getColorLUT(colorLUTIndex);\n  const numColors = Math.min(256, colorLUT.length);\n  const volumeActor = actorEntry.actor as Types.VolumeActor;\n  const { uid: actorUID } = actorEntry;\n\n  // Note: right now outlineWidth and renderOutline are not configurable\n  // at the segment level, so we don't need to check for segment specific\n  // configuration in the loop, Todo: make them configurable at the segment level\n  const { outlineWidth, renderOutline, outlineOpacity } = _getLabelmapConfig(\n    toolGroupLabelmapConfig,\n    segmentationRepresentationLabelmapConfig,\n    isActiveLabelmap\n  );\n\n  // Todo: the below loop probably can be optimized so that we don't hit it\n  // unless a config has changed. Right now we get into the following loop\n  // even for brush drawing which does not makes sense\n  for (let i = 0; i < numColors; i++) {\n    const segmentIndex = i;\n    const segmentColor = colorLUT[segmentIndex];\n\n    const segmentSpecificLabelmapConfig =\n      segmentSpecificConfig[segmentIndex]?.[Representations.Labelmap];\n\n    const { fillAlpha, outlineWidth, renderFill, renderOutline } =\n      _getLabelmapConfig(\n        toolGroupLabelmapConfig,\n        segmentationRepresentationLabelmapConfig,\n        isActiveLabelmap,\n        segmentSpecificLabelmapConfig\n      );\n\n    const { forceOpacityUpdate, forceColorUpdate } =\n      _needsTransferFunctionUpdate(viewportId, actorUID, segmentIndex, {\n        fillAlpha,\n        renderFill,\n        renderOutline,\n        segmentColor,\n        outlineWidth,\n        segmentsHidden,\n      });\n\n    if (forceColorUpdate) {\n      cfun.addRGBPoint(\n        segmentIndex,\n        segmentColor[0] / MAX_NUMBER_COLORS,\n        segmentColor[1] / MAX_NUMBER_COLORS,\n        segmentColor[2] / MAX_NUMBER_COLORS\n      );\n    }\n\n    if (forceOpacityUpdate) {\n      if (renderFill) {\n        const segmentOpacity = segmentsHidden.has(segmentIndex)\n          ? 0\n          : (segmentColor[3] / 255) * fillAlpha;\n\n        ofun.removePoint(segmentIndex);\n        ofun.addPointLong(segmentIndex, segmentOpacity, 0.5, 1.0);\n      } else {\n        ofun.addPointLong(segmentIndex, 0.01, 0.5, 1.0);\n      }\n    }\n  }\n\n  volumeActor.getProperty().setRGBTransferFunction(0, cfun);\n\n  ofun.setClamping(false);\n  volumeActor.getProperty().setScalarOpacity(0, ofun);\n\n  volumeActor.getProperty().setInterpolationTypeToNearest();\n\n  volumeActor.getProperty().setUseLabelOutline(renderOutline);\n\n  // @ts-ignore: setLabelOutlineWidth is not in the vtk.d.ts apparently\n  volumeActor.getProperty().setLabelOutlineOpacity(outlineOpacity);\n  volumeActor.getProperty().setLabelOutlineThickness(outlineWidth);\n\n  // Set visibility based on whether actor visibility is specifically asked\n  // to be turned on/off (on by default) AND whether is is in active but\n  // we are rendering inactive labelmap\n  const visible = isActiveLabelmap || renderInactiveSegmentations;\n  volumeActor.setVisibility(visible);\n}\n\nfunction _getLabelmapConfig(\n  toolGroupLabelmapConfig: LabelmapConfig,\n  segmentationRepresentationLabelmapConfig: LabelmapConfig,\n  isActiveLabelmap: boolean,\n  segmentsLabelmapConfig?: LabelmapConfig\n) {\n  const segmentLabelmapConfig = segmentsLabelmapConfig || {};\n\n  const configToUse = {\n    ...toolGroupLabelmapConfig,\n    ...segmentationRepresentationLabelmapConfig,\n    ...segmentLabelmapConfig,\n  };\n\n  const fillAlpha = isActiveLabelmap\n    ? configToUse.fillAlpha\n    : configToUse.fillAlphaInactive;\n  const outlineWidth = isActiveLabelmap\n    ? configToUse.outlineWidthActive\n    : configToUse.outlineWidthInactive;\n\n  const renderFill = isActiveLabelmap\n    ? configToUse.renderFill\n    : configToUse.renderFillInactive;\n\n  const renderOutline = configToUse.renderOutline;\n\n  const outlineOpacity = isActiveLabelmap\n    ? configToUse.outlineOpacity\n    : configToUse.outlineOpacityInactive;\n\n  return {\n    fillAlpha,\n    outlineWidth,\n    renderFill,\n    renderOutline,\n    outlineOpacity,\n  };\n}\n\nfunction _needsTransferFunctionUpdate(\n  viewportId: string,\n  actorUID: string,\n  segmentIndex: number,\n  {\n    fillAlpha,\n    renderFill,\n    renderOutline,\n    segmentColor,\n    outlineWidth,\n    segmentsHidden,\n  }: {\n    fillAlpha: number;\n    renderFill: boolean;\n    renderOutline: boolean;\n    outlineWidth: number;\n    segmentColor: number[];\n    segmentsHidden: Set<number>;\n  }\n) {\n  const cacheUID = `${viewportId}-${actorUID}-${segmentIndex}`;\n  const oldConfig = labelMapConfigCache.get(cacheUID);\n\n  if (!oldConfig) {\n    labelMapConfigCache.set(cacheUID, {\n      fillAlpha,\n      renderFill,\n      renderOutline,\n      outlineWidth,\n      segmentColor: segmentColor.slice(), // Create a copy\n      segmentsHidden: new Set(segmentsHidden), // Create a copy\n    });\n\n    return {\n      forceOpacityUpdate: true,\n      forceColorUpdate: true,\n    };\n  }\n\n  const {\n    fillAlpha: oldFillAlpha,\n    renderFill: oldRenderFill,\n    renderOutline: oldRenderOutline,\n    outlineWidth: oldOutlineWidth,\n    segmentColor: oldSegmentColor,\n    segmentsHidden: oldSegmentsHidden,\n  } = oldConfig;\n\n  const forceColorUpdate =\n    oldSegmentColor[0] !== segmentColor[0] ||\n    oldSegmentColor[1] !== segmentColor[1] ||\n    oldSegmentColor[2] !== segmentColor[2];\n\n  const forceOpacityUpdate =\n    oldSegmentColor[3] !== segmentColor[3] ||\n    oldFillAlpha !== fillAlpha ||\n    oldRenderFill !== renderFill ||\n    oldRenderOutline !== renderOutline ||\n    oldOutlineWidth !== outlineWidth ||\n    oldSegmentsHidden.has(segmentIndex) !== segmentsHidden.has(segmentIndex);\n\n  // update the cache\n  labelMapConfigCache.set(cacheUID, {\n    fillAlpha,\n    renderFill,\n    renderOutline,\n    outlineWidth,\n    segmentColor: segmentColor.slice(), // Create a copy\n    segmentsHidden: new Set(segmentsHidden), // Create a copy\n  });\n\n  return {\n    forceOpacityUpdate,\n    forceColorUpdate,\n  };\n}\n\nfunction _removeLabelmapFromToolGroupViewports(\n  toolGroupId: string,\n  segmentationRepresentationUID: string\n): void {\n  const toolGroup = getToolGroup(toolGroupId);\n\n  if (toolGroup === undefined) {\n    throw new Error(`ToolGroup with ToolGroupId ${toolGroupId} does not exist`);\n  }\n\n  const { viewportsInfo } = toolGroup;\n\n  for (const viewportInfo of viewportsInfo) {\n    const { viewportId, renderingEngineId } = viewportInfo;\n    const enabledElement = getEnabledElementByIds(\n      viewportId,\n      renderingEngineId\n    );\n    removeLabelmapFromElement(\n      enabledElement.viewport.element,\n      segmentationRepresentationUID\n    );\n  }\n}\n\nasync function _addLabelmapToViewport(\n  viewport: Types.IVolumeViewport,\n  volumeId: string,\n  segmentationRepresentationUID: string\n): Promise<void> {\n  await addLabelmapToElement(\n    viewport.element,\n    volumeId,\n    segmentationRepresentationUID\n  );\n}\n\nexport default {\n  render,\n  addSegmentationRepresentation,\n  removeSegmentationRepresentation,\n};\n","import macro from '../../macros.js';\nimport vtkDataArray from '../../Common/Core/DataArray.js';\nimport vtkPoints from '../../Common/Core/Points.js';\nimport vtkPolyData from '../../Common/DataModel/PolyData.js';\nimport { DesiredOutputPrecision } from '../../Common/DataModel/DataSetAttributes/Constants.js';\nimport { VtkDataTypes } from '../../Common/Core/DataArray/Constants.js';\n\nvar vtkErrorMacro = macro.vtkErrorMacro;\n\nfunction offsetCellArray(typedArray, offset) {\n  var currentIdx = 0;\n  return typedArray.map(function (value, index) {\n    if (index === currentIdx) {\n      currentIdx += value + 1;\n      return value;\n    }\n\n    return value + offset;\n  });\n}\n\nfunction appendCellData(dest, src, ptOffset, cellOffset) {\n  dest.set(offsetCellArray(src, ptOffset), cellOffset);\n} // ----------------------------------------------------------------------------\n// vtkAppendPolyData methods\n// ----------------------------------------------------------------------------\n\n\nfunction vtkAppendPolyData(publicAPI, model) {\n  // Set our classname\n  model.classHierarchy.push('vtkAppendPolyData');\n\n  publicAPI.requestData = function (inData, outData) {\n    // implement requestData\n    var numberOfInputs = publicAPI.getNumberOfInputPorts();\n\n    if (!numberOfInputs) {\n      vtkErrorMacro('No input specified.');\n      return;\n    }\n\n    if (numberOfInputs === 1) {\n      // pass through filter\n      outData[0] = inData[0];\n      return;\n    } // Allocate output\n\n\n    var output = vtkPolyData.newInstance();\n    var numPts = 0;\n    var pointType = 0;\n    var ttype = 1;\n    var firstType = 1;\n    var numVerts = 0;\n    var numLines = 0;\n    var numStrips = 0;\n    var numPolys = 0; // Field data is propagated to output only if present in all inputs\n\n    var hasPtNormals = true; // assume present by default\n\n    var hasPtTCoords = true;\n    var hasPtScalars = true;\n\n    for (var i = 0; i < numberOfInputs; i++) {\n      var ds = inData[i];\n\n      if (!ds) {\n        // eslint-disable-next-line\n        continue;\n      }\n\n      var dsNumPts = ds.getPoints().getNumberOfPoints();\n      numPts += dsNumPts;\n      numVerts += ds.getVerts().getNumberOfValues();\n      numLines += ds.getLines().getNumberOfValues();\n      numStrips += ds.getStrips().getNumberOfValues();\n      numPolys += ds.getPolys().getNumberOfValues();\n\n      if (dsNumPts) {\n        if (firstType) {\n          firstType = 0;\n          pointType = ds.getPoints().getDataType();\n        }\n\n        ttype = ds.getPoints().getDataType();\n        pointType = pointType > ttype ? pointType : ttype;\n      }\n\n      var ptD = ds.getPointData();\n\n      if (ptD) {\n        hasPtNormals = hasPtNormals && ptD.getNormals() !== null;\n        hasPtTCoords = hasPtTCoords && ptD.getTCoords() !== null;\n        hasPtScalars = hasPtScalars && ptD.getScalars() !== null;\n      } else {\n        hasPtNormals = false;\n        hasPtTCoords = false;\n        hasPtScalars = false;\n      }\n    }\n\n    if (model.outputPointsPrecision === DesiredOutputPrecision.SINGLE) {\n      pointType = VtkDataTypes.FLOAT;\n    } else if (model.outputPointsPrecision === DesiredOutputPrecision.DOUBLE) {\n      pointType = VtkDataTypes.DOUBLE;\n    }\n\n    var points = vtkPoints.newInstance({\n      dataType: pointType\n    });\n    points.setNumberOfPoints(numPts);\n    var pointData = points.getData();\n    var vertData = new Uint32Array(numVerts);\n    var lineData = new Uint32Array(numLines);\n    var stripData = new Uint32Array(numStrips);\n    var polyData = new Uint32Array(numPolys);\n    var newPtNormals = null;\n    var newPtTCoords = null;\n    var newPtScalars = null;\n    var lds = inData[numberOfInputs - 1];\n\n    if (hasPtNormals) {\n      var dsNormals = lds.getPointData().getNormals();\n      newPtNormals = vtkDataArray.newInstance({\n        numberOfComponents: 3,\n        numberOfTuples: numPts,\n        size: 3 * numPts,\n        dataType: dsNormals.getDataType(),\n        name: dsNormals.getName()\n      });\n    }\n\n    if (hasPtTCoords) {\n      var dsTCoords = lds.getPointData().getTCoords();\n      newPtTCoords = vtkDataArray.newInstance({\n        numberOfComponents: 2,\n        numberOfTuples: numPts,\n        size: 2 * numPts,\n        dataType: dsTCoords.getDataType(),\n        name: dsTCoords.getName()\n      });\n    }\n\n    if (hasPtScalars) {\n      var dsScalars = lds.getPointData().getScalars();\n      newPtScalars = vtkDataArray.newInstance({\n        numberOfComponents: dsScalars.getNumberOfComponents(),\n        numberOfTuples: numPts,\n        size: numPts * dsScalars.getNumberOfComponents(),\n        dataType: dsScalars.getDataType(),\n        name: dsScalars.getName()\n      });\n    }\n\n    numPts = 0;\n    numVerts = 0;\n    numLines = 0;\n    numStrips = 0;\n    numPolys = 0;\n\n    for (var _i = 0; _i < numberOfInputs; _i++) {\n      var _ds = inData[_i];\n      pointData.set(_ds.getPoints().getData(), numPts * 3);\n      appendCellData(vertData, _ds.getVerts().getData(), numPts, numVerts);\n      numVerts += _ds.getVerts().getNumberOfValues();\n      appendCellData(lineData, _ds.getLines().getData(), numPts, numLines);\n      numLines += _ds.getLines().getNumberOfValues();\n      appendCellData(stripData, _ds.getStrips().getData(), numPts, numStrips);\n      numStrips += _ds.getStrips().getNumberOfValues();\n      appendCellData(polyData, _ds.getPolys().getData(), numPts, numPolys);\n      numPolys += _ds.getPolys().getNumberOfValues();\n\n      var dsPD = _ds.getPointData();\n\n      if (hasPtNormals) {\n        var ptNorms = dsPD.getNormals();\n        newPtNormals.getData().set(ptNorms.getData(), numPts * 3);\n      }\n\n      if (hasPtTCoords) {\n        var ptTCoords = dsPD.getTCoords();\n        newPtTCoords.getData().set(ptTCoords.getData(), numPts * 2);\n      }\n\n      if (hasPtScalars) {\n        var ptScalars = dsPD.getScalars();\n        newPtScalars.getData().set(ptScalars.getData(), numPts * newPtScalars.getNumberOfComponents());\n      }\n\n      numPts += _ds.getPoints().getNumberOfPoints();\n    }\n\n    output.setPoints(points);\n    output.getVerts().setData(vertData);\n    output.getLines().setData(lineData);\n    output.getStrips().setData(stripData);\n    output.getPolys().setData(polyData);\n\n    if (newPtNormals) {\n      output.getPointData().setNormals(newPtNormals);\n    }\n\n    if (newPtTCoords) {\n      output.getPointData().setTCoords(newPtTCoords);\n    }\n\n    if (newPtScalars) {\n      output.getPointData().setScalars(newPtScalars);\n    }\n\n    outData[0] = output;\n  };\n} // ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\n\nvar DEFAULT_VALUES = {\n  outputPointsPrecision: DesiredOutputPrecision.DEFAULT\n}; // ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  var initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues); // Build VTK API\n\n  macro.setGet(publicAPI, model, ['outputPointsPrecision']); // Make this a VTK object\n\n  macro.obj(publicAPI, model); // Also make it an algorithm with one input and one output\n\n  macro.algo(publicAPI, model, 1, 1); // Object specific methods\n\n  vtkAppendPolyData(publicAPI, model);\n} // ----------------------------------------------------------------------------\n\nvar newInstance = macro.newInstance(extend, 'vtkAppendPolyData'); // ----------------------------------------------------------------------------\n\nvar vtkAppendPolyData$1 = {\n  newInstance: newInstance,\n  extend: extend\n};\n\nexport { vtkAppendPolyData$1 as default, extend, newInstance };\n","import { Enums, Types } from '@cornerstonejs/core';\nimport vtkCellArray from '@kitware/vtk.js/Common/Core/CellArray';\nimport vtkPoints from '@kitware/vtk.js/Common/Core/Points';\nimport vtkPolyData from '@kitware/vtk.js/Common/DataModel/PolyData';\nimport { ToolGroupSpecificContourRepresentation } from '../../../types';\n\n/**\n * If the segment specific config exists for the given segment id, it returns\n * the segment specific config. Otherwise, it looks for the segment specific\n * config for the given index. If it doesn't exist, it returns null.\n *\n * @param contourRepresentation -  The representation object that is passed\n * to the tool.\n * @param segmentId -  The id of the segment.\n * @param index -  The index of the segment in the list of segments.\n * @returns the segment specific config for the given segment id.\n *\n */\nexport function getSegmentSpecificConfig(\n  contourRepresentation: ToolGroupSpecificContourRepresentation,\n  segmentId: string,\n  index: number\n) {\n  let segmentSpecificConfig =\n    contourRepresentation.segmentSpecificConfig?.[segmentId];\n\n  if (!segmentSpecificConfig) {\n    // try the index\n    segmentSpecificConfig =\n      contourRepresentation.segmentSpecificConfig?.[index];\n  }\n\n  if (!segmentSpecificConfig) {\n    return null;\n  }\n\n  return segmentSpecificConfig.CONTOUR;\n}\n\n/**\n * takes a geometry object as an argument\n * and throws an error if the geometry object is not a contour\n * @param geometry -  The geometry object to be rendered.\n */\nexport function validateGeometry(geometry: Types.IGeometry): void {\n  if (!geometry) {\n    throw new Error(`No contours found for geometryId ${geometry.id}`);\n  }\n\n  const geometryId = geometry.id;\n\n  if (geometry.type !== Enums.GeometryType.CONTOUR) {\n    throw new Error(\n      `Geometry type ${geometry.type} not supported for rendering.`\n    );\n  }\n\n  if (!geometry.data) {\n    console.warn(\n      `No contours found for geometryId ${geometryId}. Skipping render.`\n    );\n    return;\n  }\n}\n\n/**\n * It takes a contourSet and returns a vtkPolyData for that contourSet. A contour set\n * is a collection of contours. Each contour is a collection of points. Each point\n * is x,y,z in the world coordinate system.\n *\n * @param contourSet -  the contour set that you want to convert to polyData\n * @returns A vtkPolyData object\n */\nexport function getPolyData(contourSet: Types.IContourSet) {\n  const pointArray = [];\n\n  const points = vtkPoints.newInstance();\n  const lines = vtkCellArray.newInstance();\n\n  // this variable will indicate the index of the first point in the current line\n  // so we can correctly generate the point index list to add in the cellArray\n  let pointIndex = 0;\n  contourSet.getContours().forEach((contour: Types.IContour) => {\n    const pointList = contour.getPoints();\n    const flatPoints = contour.getFlatPointsArray();\n    const type = contour.getType();\n\n    // creating a point index list that defines a line\n    const pointIndexes = pointList.map(\n      (_, pointListIndex) => pointListIndex + pointIndex\n    );\n\n    // if close planar, add the first point index to the list\n    if (type === Enums.ContourType.CLOSED_PLANAR) {\n      pointIndexes.push(pointIndexes[0]);\n    }\n\n    const linePoints = Float32Array.from(flatPoints);\n    // add the current points into the point list\n    pointArray.push(...linePoints);\n    // add the point indexes into the cell array\n    lines.insertNextCell([...pointIndexes]);\n    // update the first point index\n    pointIndex = pointIndex + pointList.length;\n  });\n\n  // converts the pointArray into vtkPoints\n  points.setData(pointArray, 3);\n\n  // creates the polyData\n  const polygon = vtkPolyData.newInstance();\n  polygon.setPoints(points);\n  polygon.setLines(lines);\n\n  return polygon;\n}\n","type ConfigCache = {\n  segmentsHidden: Set<number>;\n  outlineWidthActive: number;\n  visibility: boolean;\n};\n\n/**\n * Config cache is used to store the config for a given segmentation\n * representation. This is used to avoid having to recompute the config\n * every time the user changes the active segment, and also for performance\n * reasons.\n */\nconst configCachePerSegmentationRepresentationUID = new Map();\n\nexport function getConfigCache(\n  segmentationRepresentationUID: string\n): ConfigCache {\n  return configCachePerSegmentationRepresentationUID.get(\n    segmentationRepresentationUID\n  );\n}\n\nexport function setConfigCache(\n  segmentationRepresentationUID: string,\n  config: ConfigCache\n) {\n  configCachePerSegmentationRepresentationUID.set(\n    segmentationRepresentationUID,\n    config\n  );\n}\n\nexport function deleteConfigCache(segmentationRepresentationUID: string) {\n  configCachePerSegmentationRepresentationUID.delete(\n    segmentationRepresentationUID\n  );\n}\n","import { cache, Types } from '@cornerstonejs/core';\nimport vtkDataArray from '@kitware/vtk.js/Common/Core/DataArray';\nimport vtkAppendPolyData from '@kitware/vtk.js/Filters/General/AppendPolyData';\nimport vtkActor from '@kitware/vtk.js/Rendering/Core/Actor';\nimport vtkMapper from '@kitware/vtk.js/Rendering/Core/Mapper';\n\nimport {\n  getPolyData,\n  getSegmentSpecificConfig,\n  validateGeometry,\n} from './utils';\n\nimport {\n  SegmentationRepresentationConfig,\n  ToolGroupSpecificContourRepresentation,\n} from '../../../types';\nimport { getConfigCache, setConfigCache } from './contourConfigCache';\n\nexport function addContourSetsToElement(\n  viewport: Types.IVolumeViewport,\n  geometryIds: string[],\n  contourRepresentation: ToolGroupSpecificContourRepresentation,\n  contourRepresentationConfig: SegmentationRepresentationConfig,\n  contourActorUID: string\n) {\n  const { segmentationRepresentationUID, segmentsHidden } =\n    contourRepresentation;\n  const appendPolyData = vtkAppendPolyData.newInstance();\n\n  const scalarToColorMap = new Map();\n  const segmentSpecificMap = new Map();\n\n  geometryIds.forEach((geometryId) => {\n    const geometry = cache.getGeometry(geometryId);\n\n    if (!geometry) {\n      console.warn(\n        `No geometry found for geometryId ${geometryId}. Skipping render.`\n      );\n      return;\n    }\n\n    const segmentIndex = (geometry.data as Types.IContourSet).getSegmentIndex();\n\n    validateGeometry(geometry);\n\n    const segmentSpecificConfig = getSegmentSpecificConfig(\n      contourRepresentation,\n      geometryId,\n      segmentIndex\n    );\n\n    const contourSet = geometry.data;\n    const polyData = getPolyData(contourSet as Types.IContourSet);\n    const color = contourSet.getColor();\n\n    const size = polyData.getPoints().getNumberOfPoints();\n\n    const scalars = vtkDataArray.newInstance({\n      size: size * 4,\n      numberOfComponents: 4,\n      dataType: 'Uint8Array',\n    });\n    for (let i = 0; i < size; ++i) {\n      scalars.setTuple(i, [...color, 255]);\n    }\n    polyData.getPointData().setScalars(scalars);\n\n    if (segmentSpecificConfig) {\n      segmentSpecificMap.set(segmentIndex, segmentSpecificConfig);\n    }\n\n    scalarToColorMap.set(segmentIndex, [\n      ...color,\n      segmentsHidden.has(segmentIndex) ? 0 : 255,\n    ]);\n\n    segmentIndex === 0\n      ? appendPolyData.setInputData(polyData)\n      : appendPolyData.addInputData(polyData);\n  });\n\n  const polyDataOutput = appendPolyData.getOutputData();\n\n  const outlineWidthActive =\n    contourRepresentationConfig.representations.CONTOUR.outlineWidthActive;\n\n  const mapper = vtkMapper.newInstance();\n  mapper.setInputData(polyDataOutput);\n\n  const actor = vtkActor.newInstance();\n  actor.setMapper(mapper);\n  actor.getProperty().setLineWidth(outlineWidthActive);\n\n  // set the config cache for later update of the contour\n  setConfigCache(\n    segmentationRepresentationUID,\n    Object.assign({}, getConfigCache(segmentationRepresentationUID), {\n      segmentsHidden: new Set(segmentsHidden),\n      segmentSpecificMap,\n      outlineWidthActive,\n    })\n  );\n\n  actor.setForceOpaque(true);\n\n  viewport.addActor({\n    uid: contourActorUID,\n    actor: actor as unknown as Types.Actor,\n  });\n  viewport.resetCamera();\n  viewport.render();\n}\n","import { cache, Types } from '@cornerstonejs/core';\nimport vtkActor from '@kitware/vtk.js/Rendering/Core/Actor';\n\nimport {\n  SegmentationRepresentationConfig,\n  ToolGroupSpecificContourRepresentation,\n} from '../../../types';\nimport { getConfigCache, setConfigCache } from './contourConfigCache';\nimport { getSegmentSpecificConfig } from './utils';\n\nexport function updateContourSets(\n  viewport: Types.IVolumeViewport,\n  geometryIds: string[],\n  contourRepresentation: ToolGroupSpecificContourRepresentation,\n  contourRepresentationConfig: SegmentationRepresentationConfig,\n  contourActorUID: string\n) {\n  const { segmentationRepresentationUID, segmentsHidden } =\n    contourRepresentation;\n  const newContourConfig = contourRepresentationConfig.representations.CONTOUR;\n  const cachedConfig = getConfigCache(segmentationRepresentationUID);\n\n  const contourSetsActor = viewport.getActor(contourActorUID);\n\n  if (!contourSetsActor) {\n    console.warn(\n      `No contour actor found for actorUID ${contourActorUID}. Skipping render.`\n    );\n    return;\n  }\n\n  const { actor } = contourSetsActor;\n\n  const newOutlineWithActive = newContourConfig.outlineWidthActive;\n\n  if (cachedConfig?.outlineWidthActive !== newOutlineWithActive) {\n    (actor as unknown as vtkActor)\n      .getProperty()\n      .setLineWidth(newOutlineWithActive);\n\n    setConfigCache(\n      segmentationRepresentationUID,\n      Object.assign({}, cachedConfig, {\n        outlineWidthActive: newOutlineWithActive,\n      })\n    );\n  }\n\n  const mapper = (actor as unknown as vtkActor).getMapper();\n  const lut = mapper.getLookupTable();\n\n  const segmentsToSetToInvisible = [];\n  const segmentsToSetToVisible = [];\n\n  for (const segmentIndex of segmentsHidden) {\n    if (!cachedConfig.segmentsHidden.has(segmentIndex)) {\n      segmentsToSetToInvisible.push(segmentIndex);\n    }\n  }\n\n  // the other way around\n  for (const segmentIndex of cachedConfig.segmentsHidden) {\n    if (!segmentsHidden.has(segmentIndex)) {\n      segmentsToSetToVisible.push(segmentIndex);\n    }\n  }\n\n  const mergedInvisibleSegments = Array.from(cachedConfig.segmentsHidden)\n    .filter((segmentIndex) => !segmentsToSetToVisible.includes(segmentIndex))\n    .concat(segmentsToSetToInvisible);\n\n  const { contourSets, segmentSpecificConfigs } = geometryIds.reduce(\n    (acc, geometryId) => {\n      const geometry = cache.getGeometry(geometryId);\n      const { data: contourSet } = geometry;\n      const segmentIndex = (contourSet as Types.IContourSet).getSegmentIndex();\n      const segmentSpecificConfig = getSegmentSpecificConfig(\n        contourRepresentation,\n        geometryId,\n        segmentIndex\n      );\n\n      acc.contourSets.push(contourSet);\n      acc.segmentSpecificConfigs[segmentIndex] = segmentSpecificConfig ?? {};\n\n      return acc;\n    },\n    { contourSets: [], segmentSpecificConfigs: {} }\n  );\n\n  const affectedSegments = [\n    ...mergedInvisibleSegments,\n    ...segmentsToSetToVisible,\n  ];\n\n  const hasCustomSegmentSpecificConfig = Object.values(\n    segmentSpecificConfigs\n  ).some((config) => Object.keys(config).length > 0);\n\n  let polyDataModified = false;\n\n  if (affectedSegments.length || hasCustomSegmentSpecificConfig) {\n    const appendPolyData = mapper.getInputData();\n    const appendScalars = appendPolyData.getPointData().getScalars();\n    const appendScalarsData = appendScalars.getData();\n    // below we will only manipulate the polyData of the contourSets that are affected\n    // by picking the correct offset in the scalarData array\n    let offset = 0;\n    contourSets.forEach((contourSet) => {\n      const segmentIndex = (contourSet as Types.IContourSet).getSegmentIndex();\n      const size = contourSet.getTotalNumberOfPoints();\n\n      if (\n        affectedSegments.includes(segmentIndex) ||\n        segmentSpecificConfigs[segmentIndex]?.fillAlpha // Todo: add others\n      ) {\n        const color = contourSet.getColor();\n        let visibility = mergedInvisibleSegments.includes(segmentIndex)\n          ? 0\n          : 255;\n\n        const segmentConfig = segmentSpecificConfigs[segmentIndex];\n        if (segmentConfig.fillAlpha !== undefined) {\n          visibility = segmentConfig.fillAlpha * 255;\n        }\n\n        for (let i = 0; i < size; ++i) {\n          appendScalarsData[offset + i * 4] = color[0];\n          appendScalarsData[offset + i * 4 + 1] = color[1];\n          appendScalarsData[offset + i * 4 + 2] = color[2];\n          appendScalarsData[offset + i * 4 + 3] = visibility;\n        }\n\n        polyDataModified = true;\n      }\n\n      offset = offset + size * 4;\n    });\n\n    if (polyDataModified) {\n      appendPolyData.modified();\n    }\n\n    setConfigCache(\n      segmentationRepresentationUID,\n      Object.assign({}, cachedConfig, {\n        segmentsHidden: new Set(segmentsHidden),\n      })\n    );\n\n    mapper.setLookupTable(lut);\n  }\n\n  viewport.render();\n}\n","import { getEnabledElement } from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\n/**\n * Remove the contour representation from the viewport's HTML Element.\n * NOTE: This function should not be called directly.\n *\n * @param element - The element that the segmentation is being added to.\n * @param segmentationRepresentationUID - The UID of the contour representation to remove.\n * @param removeFromCache - boolean\n *\n * @internal\n */\nfunction removeContourFromElement(\n  element: HTMLDivElement,\n  segmentationRepresentationUID: string,\n  removeFromCache = false // Todo\n): void {\n  const enabledElement = getEnabledElement(element);\n  const { viewport } = enabledElement;\n\n  const actorEntries = (viewport as Types.IVolumeViewport).getActors();\n\n  // remove actors whose id has the same prefix as the segmentationRepresentationUID\n  const actorUIDsToRemove = actorEntries\n    .map(({ uid }) =>\n      uid.includes(segmentationRepresentationUID) ? uid : undefined\n    )\n    .filter(Boolean);\n\n  // @ts-ignore\n  viewport.removeActors(actorUIDsToRemove);\n}\n\nexport default removeContourFromElement;\n","import {\n  getEnabledElementByIds,\n  Types,\n  utilities as csUtils,\n  StackViewport,\n} from '@cornerstonejs/core';\n\nimport Representations from '../../../enums/SegmentationRepresentations';\nimport * as SegmentationConfig from '../../../stateManagement/segmentation/config/segmentationConfig';\nimport * as SegmentationState from '../../../stateManagement/segmentation/segmentationState';\nimport { getToolGroup } from '../../../store/ToolGroupManager';\nimport {\n  RepresentationPublicInput,\n  SegmentationRepresentationConfig,\n  ToolGroupSpecificRepresentation,\n} from '../../../types/SegmentationStateTypes';\nimport { addOrUpdateContourSets } from './addOrUpdateContourSets';\nimport removeContourFromElement from './removeContourFromElement';\nimport { deleteConfigCache } from './contourConfigCache';\n\n/**\n * It adds a new segmentation representation to the segmentation state\n * @param toolGroupId - The id of the toolGroup that the segmentation\n * belongs to\n * @param representationInput - RepresentationPublicInput\n * @param toolGroupSpecificConfig - The configuration that is specific to the toolGroup.\n * @returns The segmentationRepresentationUID\n */\nasync function addSegmentationRepresentation(\n  toolGroupId: string,\n  representationInput: RepresentationPublicInput,\n  toolGroupSpecificConfig?: SegmentationRepresentationConfig\n): Promise<string> {\n  const { segmentationId } = representationInput;\n  const segmentationRepresentationUID = csUtils.uuidv4();\n  // Todo: make these configurable during representation input by user\n  const segmentsHidden = new Set() as Set<number>;\n  const visibility = true;\n  const colorLUTIndex = 0;\n  const active = true;\n  const toolGroupSpecificRepresentation: ToolGroupSpecificRepresentation = {\n    segmentationId,\n    segmentationRepresentationUID,\n    type: Representations.Contour,\n    segmentsHidden,\n    colorLUTIndex,\n    active,\n    segmentationRepresentationSpecificConfig: {},\n    segmentSpecificConfig: {},\n    config: {},\n  };\n  // Update the toolGroup specific configuration\n  if (toolGroupSpecificConfig) {\n    // Since setting configuration on toolGroup will trigger a segmentationRepresentation\n    // update event, we don't want to trigger the event twice, so we suppress\n    // the first one\n    const currentToolGroupConfig =\n      SegmentationConfig.getToolGroupSpecificConfig(toolGroupId);\n    const mergedConfig = csUtils.deepMerge(\n      currentToolGroupConfig,\n      toolGroupSpecificConfig\n    );\n    SegmentationConfig.setToolGroupSpecificConfig(toolGroupId, {\n      renderInactiveSegmentations:\n        mergedConfig.renderInactiveSegmentations || true,\n      representations: {\n        ...mergedConfig.representations,\n      },\n    });\n  }\n  SegmentationState.addSegmentationRepresentation(\n    toolGroupId,\n    toolGroupSpecificRepresentation\n  );\n  return segmentationRepresentationUID;\n}\n\n/**\n * It removes a segmentation representation from the tool group's viewports and\n * from the segmentation state\n * @param toolGroupId - The toolGroupId of the toolGroup that the\n * segmentationRepresentation belongs to.\n * @param segmentationRepresentationUID - This is the unique identifier\n * for the segmentation representation.\n * @param renderImmediate - If true, the viewport will be rendered\n * immediately after the segmentation representation is removed.\n */\nfunction removeSegmentationRepresentation(\n  toolGroupId: string,\n  segmentationRepresentationUID: string,\n  renderImmediate = false\n): void {\n  _removeContourFromToolGroupViewports(\n    toolGroupId,\n    segmentationRepresentationUID\n  );\n  SegmentationState.removeSegmentationRepresentation(\n    toolGroupId,\n    segmentationRepresentationUID\n  );\n\n  deleteConfigCache(segmentationRepresentationUID);\n\n  if (renderImmediate) {\n    const viewportsInfo = getToolGroup(toolGroupId).getViewportsInfo();\n    viewportsInfo.forEach(({ viewportId, renderingEngineId }) => {\n      const enabledElement = getEnabledElementByIds(\n        viewportId,\n        renderingEngineId\n      );\n      enabledElement.viewport.render();\n    });\n  }\n}\n\n/**\n * It renders the contour sets for the given segmentation\n * @param viewport - The viewport object\n * @param representation - ToolGroupSpecificRepresentation\n * @param toolGroupConfig - This is the configuration object for the tool group\n */\nasync function render(\n  viewport: Types.IVolumeViewport,\n  representationConfig: ToolGroupSpecificRepresentation,\n  toolGroupConfig: SegmentationRepresentationConfig\n): Promise<void> {\n  const { segmentationId } = representationConfig;\n  const segmentation = SegmentationState.getSegmentation(segmentationId);\n  const contourData = segmentation.representationData[Representations.Contour];\n  const { geometryIds } = contourData;\n\n  // We don't have a good way to handle stack viewports for contours at the moment.\n  // Plus, if we add a segmentation to one viewport, it gets added to all the viewports in the toolGroup too.\n  if (viewport instanceof StackViewport) {\n    return;\n  }\n\n  if (!geometryIds?.length) {\n    console.warn(\n      `No contours found for segmentationId ${segmentationId}. Skipping render.`\n    );\n  }\n\n  // add the contour sets to the viewport\n  addOrUpdateContourSets(\n    viewport,\n    geometryIds,\n    representationConfig,\n    toolGroupConfig\n  );\n}\n\nfunction _removeContourFromToolGroupViewports(\n  toolGroupId: string,\n  segmentationRepresentationUID: string\n): void {\n  const toolGroup = getToolGroup(toolGroupId);\n\n  if (toolGroup === undefined) {\n    throw new Error(`ToolGroup with ToolGroupId ${toolGroupId} does not exist`);\n  }\n\n  const { viewportsInfo } = toolGroup;\n\n  for (const viewportInfo of viewportsInfo) {\n    const { viewportId, renderingEngineId } = viewportInfo;\n    const enabledElement = getEnabledElementByIds(\n      viewportId,\n      renderingEngineId\n    );\n    removeContourFromElement(\n      enabledElement.viewport.element,\n      segmentationRepresentationUID\n    );\n  }\n}\n\nexport default {\n  render,\n  addSegmentationRepresentation,\n  removeSegmentationRepresentation,\n};\n","import { Types } from '@cornerstonejs/core';\n\nimport {\n  SegmentationRepresentationConfig,\n  ToolGroupSpecificContourRepresentation,\n} from '../../../types';\nimport { addContourSetsToElement } from './addContourSetsToElement';\nimport { updateContourSets } from './updateContourSets';\n\nexport function addOrUpdateContourSets(\n  viewport: Types.IVolumeViewport,\n  geometryIds: string[],\n  contourRepresentation: ToolGroupSpecificContourRepresentation,\n  contourRepresentationConfig: SegmentationRepresentationConfig\n) {\n  const { segmentationRepresentationUID } = contourRepresentation;\n  const actorUID = `CONTOUR_${segmentationRepresentationUID}`;\n  const actor = viewport.getActor(actorUID);\n\n  const addOrUpdateFn = actor ? updateContourSets : addContourSetsToElement;\n  addOrUpdateFn(\n    viewport,\n    geometryIds,\n    contourRepresentation,\n    contourRepresentationConfig,\n    actorUID\n  );\n}\n","import SegmentationRepresentations from '../../enums/SegmentationRepresentations';\nimport { labelmapDisplay } from '../../tools/displayTools/Labelmap';\nimport { contourDisplay } from '../../tools/displayTools/Contour';\n\nimport {\n  getSegmentationRepresentations,\n  getSegmentationRepresentationByUID,\n} from './segmentationState';\n\n/**\n * Remove the segmentation representation (representation) from the viewports of the toolGroup.\n * @param toolGroupId - The Id of the toolGroup to remove the segmentation from.\n * @param segmentationRepresentationUIDs - The UIDs of the segmentation representations to remove.\n * @param immediate - if True the viewport will be re-rendered immediately.\n */\nfunction removeSegmentationsFromToolGroup(\n  toolGroupId: string,\n  segmentationRepresentationUIDs?: string[] | undefined,\n  immediate?: boolean\n): void {\n  const toolGroupSegRepresentations =\n    getSegmentationRepresentations(toolGroupId);\n\n  if (\n    !toolGroupSegRepresentations ||\n    toolGroupSegRepresentations.length === 0\n  ) {\n    return;\n  }\n\n  const toolGroupSegRepresentationUIDs = toolGroupSegRepresentations.map(\n    (representation) => representation.segmentationRepresentationUID\n  );\n\n  let segRepresentationUIDsToRemove = segmentationRepresentationUIDs;\n  if (segRepresentationUIDsToRemove) {\n    // make sure the segmentationDataUIDs that are going to be removed belong\n    // to the toolGroup\n    const invalidSegRepresentationUIDs = segmentationRepresentationUIDs.filter(\n      (segRepresentationUID) =>\n        !toolGroupSegRepresentationUIDs.includes(segRepresentationUID)\n    );\n\n    if (invalidSegRepresentationUIDs.length > 0) {\n      throw new Error(\n        `The following segmentationRepresentationUIDs are not part of the toolGroup: ${JSON.stringify(\n          invalidSegRepresentationUIDs\n        )}`\n      );\n    }\n  } else {\n    // remove all segmentation representations\n    segRepresentationUIDsToRemove = toolGroupSegRepresentationUIDs;\n  }\n\n  segRepresentationUIDsToRemove.forEach((segmentationDataUID) => {\n    _removeSegmentation(toolGroupId, segmentationDataUID, immediate);\n  });\n}\n\nfunction _removeSegmentation(\n  toolGroupId: string,\n  segmentationRepresentationUID: string,\n  immediate?: boolean\n): void {\n  const segmentationRepresentation = getSegmentationRepresentationByUID(\n    toolGroupId,\n    segmentationRepresentationUID\n  );\n\n  const { type } = segmentationRepresentation;\n\n  if (type === SegmentationRepresentations.Labelmap) {\n    labelmapDisplay.removeSegmentationRepresentation(\n      toolGroupId,\n      segmentationRepresentationUID,\n      immediate\n    );\n  } else if (type === SegmentationRepresentations.Contour) {\n    contourDisplay.removeSegmentationRepresentation(\n      toolGroupId,\n      segmentationRepresentationUID,\n      immediate\n    );\n  } else {\n    throw new Error(`The representation ${type} is not supported yet`);\n  }\n}\n\nexport default removeSegmentationsFromToolGroup;\n","import { SegmentationPublicInput } from '../../../types/SegmentationStateTypes';\nimport { cache } from '@cornerstonejs/core';\nimport { LabelmapSegmentationData } from '../../../types/LabelmapTypes';\n\nfunction validate(segmentationInput: SegmentationPublicInput): void {\n  if (!segmentationInput.representation.data) {\n    throw new Error(\n      'The segmentationInput.representationData.data is undefined, please provide a valid representationData.data'\n    );\n  }\n\n  const representationData = segmentationInput.representation\n    .data as LabelmapSegmentationData;\n\n  if (!representationData.volumeId) {\n    throw new Error(\n      'The segmentationInput.representationData.volumeId is undefined, please provide a valid representationData.volumeId'\n    );\n  }\n\n  const cachedVolume = cache.getVolume(representationData.volumeId);\n\n  if (!cachedVolume) {\n    throw new Error(\n      `volumeId of ${representationData.volumeId} not found in cache, you should load and cache volume before adding segmentation`\n    );\n  }\n}\n\nexport default validate;\n","import * as Enums from '../../../enums';\nimport { SegmentationPublicInput } from '../../../types/SegmentationStateTypes';\nimport validateLabelmap from '../../../tools/displayTools/Labelmap/validateRepresentationData';\n\n/**\n * Checks if the segmentationInputArray is valid meaning it contains\n * correct representationProps for the representation type that is being used.\n *\n * @param segmentationInputArray - Array of segmentation inputs\n * @internal\n */\nfunction validateSegmentationInput(\n  segmentationInputArray: SegmentationPublicInput[]\n): void {\n  if (!segmentationInputArray || !segmentationInputArray.length) {\n    throw new Error('The segmentationInputArray is undefined or empty array');\n  }\n\n  segmentationInputArray.forEach((segmentationInput) => {\n    if (segmentationInput.segmentationId === undefined) {\n      throw new Error(\n        'The segmentationInput.segmentationId is undefined, please provide a valid segmentationId'\n      );\n    }\n\n    if (segmentationInput.representation === undefined) {\n      throw new Error(\n        'The segmentationInput.representation is undefined, please provide a valid representation'\n      );\n    }\n\n    if (\n      segmentationInput.representation.type ===\n      Enums.SegmentationRepresentations.Labelmap\n    ) {\n      validateLabelmap(segmentationInput);\n    }\n  });\n}\n\nexport default validateSegmentationInput;\n","import _cloneDeep from 'lodash.clonedeep';\nimport { SegmentationPublicInput } from '../../types/SegmentationStateTypes';\nimport { validateSegmentationInput } from './helpers';\nimport { addSegmentation as addSegmentationToState } from './segmentationState';\n/**\n * Adds the segmentation to the cornerstone3D segmentation state. It should be\n * noted that segmentations are not added to any toolGroup's viewports. In order to\n * do so, you should add a \"representation\" of the segmentation to the toolGroup\n * using addSegmentationRepresentations helper. The reason for this is that there\n * can be multiple representations of the same segmentation (e.g. Labelmap and\n * Contour, etc. - Currently only Labelmap representations is supported).\n * @param segmentationInputArray - The array of segmentation input, each of which\n * defining the segmentationId and the main representation data for the segmentation.\n */\nfunction addSegmentations(\n  segmentationInputArray: SegmentationPublicInput[]\n): void {\n  validateSegmentationInput(segmentationInputArray);\n\n  segmentationInputArray.map((segInput) => {\n    const segmentationInput = _cloneDeep(segInput);\n\n    addSegmentationToState(segmentationInput);\n  });\n}\n\nexport default addSegmentations;\n","import { getEnabledElement } from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\n/**\n * Remove the surface representation from the viewport's HTML Element.\n * NOTE: This function should not be called directly.\n *\n * @param element - The element that the segmentation is being added to.\n * @param segmentationRepresentationUID - The UID of the surface representation to remove.\n * @param removeFromCache - boolean\n *\n * @internal\n */\nfunction removeContourFromElement(\n  element: HTMLDivElement,\n  segmentationRepresentationUID: string,\n  removeFromCache = false // Todo\n): void {\n  const enabledElement = getEnabledElement(element);\n  const { viewport } = enabledElement;\n\n  const actorEntries = (viewport as Types.IVolumeViewport).getActors();\n\n  // remove actors whose id has the same prefix as the segmentationRepresentationUID\n  const actorUIDsToRemove = actorEntries\n    .map(({ uid }) =>\n      uid.startsWith(segmentationRepresentationUID) ? uid : undefined\n    )\n    .filter(Boolean);\n\n  // @ts-ignore\n  viewport.removeActors(actorUIDsToRemove);\n}\n\nexport default removeContourFromElement;\n","import macro from '../../macros.js';\n\n// vtkPriorityQueue methods\n// ----------------------------------------------------------------------------\n\nfunction vtkPriorityQueue(publicAPI, model) {\n  // Set our classname\n  model.classHierarchy.push('vtkPriorityQueue');\n\n  publicAPI.push = function (priority, element) {\n    // naive algo\n    var i = model.elements.findIndex(function (e) {\n      return e.priority > priority;\n    });\n    model.elements.splice(i, 0, {\n      priority: priority,\n      element: element\n    });\n  };\n\n  publicAPI.pop = function () {\n    if (model.elements.length > 0) {\n      return model.elements.shift().element;\n    }\n\n    return null;\n  };\n\n  publicAPI.deleteById = function (id) {\n    model.elements = model.elements.filter(function (_ref) {\n      var element = _ref.element;\n      return element.id !== id;\n    });\n  };\n\n  publicAPI.length = function () {\n    return model.elements.length;\n  };\n} // ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\n\nvar DEFAULT_VALUES = {\n  elements: []\n}; // ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  var initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues); // Build VTK API\n\n  macro.obj(publicAPI, model);\n  vtkPriorityQueue(publicAPI, model);\n} // ----------------------------------------------------------------------------\n\nvar newInstance = macro.newInstance(extend, 'vtkPriorityQueue'); // ----------------------------------------------------------------------------\n\nvar vtkPriorityQueue$1 = {\n  newInstance: newInstance,\n  extend: extend\n};\n\nexport { vtkPriorityQueue$1 as default, extend, newInstance };\n","var EPSILON = 1e-6;\nvar FLOAT_EPSILON = 1.1920929e-7;\nvar TOLERANCE = 1e-8;\nvar PolygonWithPointIntersectionState = {\n  FAILURE: -1,\n  OUTSIDE: 0,\n  INSIDE: 1,\n  INTERSECTION: 2,\n  ON_LINE: 3\n};\n\nexport { EPSILON, FLOAT_EPSILON, PolygonWithPointIntersectionState, TOLERANCE };\n","import _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _toConsumableArray from '@babel/runtime/helpers/toConsumableArray';\nimport macro from '../../macros.js';\nimport { d as dot, s as subtract, j as cross, k as add, l as normalize, e as distance2BetweenPoints, n as norm } from '../Core/Math/index.js';\nimport vtkLine from './Line.js';\nimport vtkPlane from './Plane.js';\nimport vtkPriorityQueue from '../Core/PriorityQueue.js';\nimport vtkBoundingBox from './BoundingBox.js';\nimport { IntersectionState } from './Line/Constants.js';\nimport { PolygonWithPointIntersectionState, FLOAT_EPSILON, TOLERANCE, EPSILON } from './Polygon/Constants.js';\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n// Global methods\n// ----------------------------------------------------------------------------\n// Given the line (p0,p1), determine if the given point is located to the left\n// of, on, or to the right of a line (with the function returning >0, ==0, or\n// <0 respectively). The points are assumed 3D points, but projected into\n// one of x-y-z planes; hence the indices axis0 and axis1 specify which plane\n// the computation is to be performed on.\n\nfunction pointLocation(axis0, axis1, p0, p1, point) {\n  return (p1[axis0] - p0[axis0]) * (point[axis1] - p0[axis1]) - (point[axis0] - p0[axis0]) * (p1[axis1] - p0[axis1]);\n} //------------------------------------------------------------------------------\n\n\nfunction pointInPolygon(point, vertices, bounds, normal) {\n  // Do a quick bounds check to throw out trivial cases.\n  // winding plane.\n  if (point[0] < bounds[0] || point[0] > bounds[1] || point[1] < bounds[2] || point[1] > bounds[3] || point[2] < bounds[4] || point[2] > bounds[5]) {\n    return PolygonWithPointIntersectionState.OUTSIDE;\n  } //  Check that the normal is non-zero.\n\n\n  if (normalize(normal) <= FLOAT_EPSILON) {\n    return PolygonWithPointIntersectionState.FAILURE;\n  } // Assess whether the point lies on the boundary of the polygon. Points on\n  // the boundary are considered inside the polygon. Need to define a small\n  // tolerance relative to the bounding box diagonal length of the polygon.\n\n\n  var tol2 = TOLERANCE * ((bounds[1] - bounds[0]) * (bounds[1] - bounds[0]) + (bounds[3] - bounds[2]) * (bounds[3] - bounds[2]) + (bounds[5] - bounds[4]) * (bounds[5] - bounds[4]));\n  tol2 *= tol2;\n  tol2 = tol2 === 0.0 ? FLOAT_EPSILON : tol2;\n  var p0 = [];\n  var p1 = [];\n\n  for (var i = 0; i < vertices.length;) {\n    // Check coincidence to polygon vertices\n    p0[0] = vertices[i++];\n    p0[1] = vertices[i++];\n    p0[2] = vertices[i++];\n\n    if (distance2BetweenPoints(point, p0) <= tol2) {\n      return PolygonWithPointIntersectionState.INSIDE;\n    } // Check coincidence to polygon edges\n\n\n    var _vtkLine$distanceToLi = vtkLine.distanceToLine(point, p0, p1),\n        distance = _vtkLine$distanceToLi.distance,\n        t = _vtkLine$distanceToLi.t;\n\n    if (distance <= tol2 && t > 0.0 && t < 1.0) {\n      return PolygonWithPointIntersectionState.INSIDE;\n    }\n  } // If here, begin computation of the winding number. This method works for\n  // points/polygons arbitrarily oriented in 3D space.  Hence a projection\n  // onto one of the x-y-z coordinate planes using the maximum normal\n  // component. The computation will be performed in the (axis0, axis1) plane.\n\n\n  var axis0;\n  var axis1;\n\n  if (Math.abs(normal[0]) > Math.abs(normal[1])) {\n    if (Math.abs(normal[0]) > Math.abs(normal[2])) {\n      axis0 = 1;\n      axis1 = 2;\n    } else {\n      axis0 = 0;\n      axis1 = 1;\n    }\n  } else if (Math.abs(normal[1]) > Math.abs(normal[2])) {\n    axis0 = 0;\n    axis1 = 2;\n  } else {\n    axis0 = 0;\n    axis1 = 1;\n  } // Compute the winding number wn. If after processing all polygon edges\n  // wn == 0, then the point is outside.  Otherwise, the point is inside the\n  // polygon. Process all polygon edges determining if there are ascending or\n  // descending crossings of the line axis1=constant.\n\n\n  var wn = 0;\n\n  for (var _i = 0; _i < vertices.length;) {\n    p0[0] = vertices[_i++];\n    p0[1] = vertices[_i++];\n    p0[2] = vertices[_i++];\n\n    if (_i < vertices.length) {\n      p1[0] = vertices[_i];\n      p1[1] = vertices[_i + 1];\n      p1[2] = vertices[_i + 2];\n    } else {\n      p1[0] = vertices[0];\n      p1[1] = vertices[1];\n      p1[2] = vertices[2];\n    }\n\n    if (p0[axis1] <= point[axis1]) {\n      if (p1[axis1] > point[axis1]) {\n        // if an upward crossing\n        if (pointLocation(axis0, axis1, p0, p1, point) > 0) {\n          // if x left of edge\n          ++wn; // a valid up intersect, increment the winding number\n        }\n      }\n    } else if (p1[axis1] <= point[axis1]) {\n      // if a downward crossing\n      if (pointLocation(axis0, axis1, p0, p1, point) < 0) {\n        // if x right of edge\n        --wn; // a valid down intersect, decrement the winding number\n      }\n    }\n  } // Over all polygon edges\n  // A winding number == 0 is outside the polygon\n\n\n  return wn === 0 ? PolygonWithPointIntersectionState.OUTSIDE : PolygonWithPointIntersectionState.INSIDE;\n} // ---------------------------------------------------\n\n/**\n * Simple utility method for computing polygon bounds.\n * Returns the sum of the squares of the dimensions.\n * Requires a poly with at least one point.\n *\n * @param {Array<Number>|TypedArray<Number>} poly\n * @param {vtkPoints} points\n * @param {Bound} bounds\n */\n\n\nfunction getBounds(poly, points, bounds) {\n  var n = poly.length;\n  var p = [];\n  points.getPoint(poly[0], p);\n  bounds[0] = p[0];\n  bounds[1] = p[0];\n  bounds[2] = p[1];\n  bounds[3] = p[1];\n  bounds[4] = p[2];\n  bounds[5] = p[2];\n\n  for (var j = 1; j < n; j++) {\n    points.getPoint(poly[j], p);\n    vtkBoundingBox.addPoint.apply(vtkBoundingBox, [bounds].concat(p));\n  }\n\n  var length = vtkBoundingBox.getLengths(bounds);\n  return dot(length, length);\n} // ---------------------------------------------------\n\n/**\n * Compute the normal of a polygon and return its norm.\n *\n * TBD: This does the same thing as vtkPolygon.computeNormal,\n * but in a more generic way. Maybe we can keep the public\n * static method somehow and have the private method use it instead.\n *\n * @param {Array<Number>|TypedArray<Number>} poly\n * @param {vtkPoints} points\n * @param {Vector3} normal\n * @returns {Number}\n */\n\nfunction getNormal(poly, points, normal) {\n  normal.length = 3;\n  normal[0] = 0.0;\n  normal[1] = 0.0;\n  normal[2] = 0.0;\n  var p0 = [];\n  var p1 = [];\n  var p2 = [];\n  var v1 = [];\n  var v2 = [];\n  points.getPoint(poly[0], p0);\n  points.getPoint(poly[1], p1);\n\n  for (var j = 2; j < poly.length; j++) {\n    points.getPoint(poly[j], p2);\n    subtract(p2, p1, v1);\n    subtract(p0, p1, v2);\n    var n = [0, 0, 0];\n    cross(v1, v2, n);\n    add(normal, n, normal);\n    var _ref = [p2, p1];\n    p1 = _ref[0];\n    p2 = _ref[1];\n  }\n\n  return normalize(normal);\n} // ----------------------------------------------------------------------------\n// Static API\n// ----------------------------------------------------------------------------\n\nvar STATIC = {\n  PolygonWithPointIntersectionState: PolygonWithPointIntersectionState,\n  pointInPolygon: pointInPolygon,\n  getBounds: getBounds,\n  getNormal: getNormal\n}; // ----------------------------------------------------------------------------\n// vtkPolygon methods\n// ----------------------------------------------------------------------------\n\nfunction vtkPolygon(publicAPI, model) {\n  // Set our classname\n  model.classHierarchy.push('vtkPolygon');\n\n  function computeNormal() {\n    var v1 = [0, 0, 0];\n    var v2 = [0, 0, 0];\n    model.normal = [0, 0, 0];\n\n    var anchor = _toConsumableArray(model.firstPoint.point);\n\n    var point = model.firstPoint;\n\n    for (var i = 0; i < model.pointCount; i++) {\n      subtract(point.point, anchor, v1);\n      subtract(point.next.point, anchor, v2);\n      var n = [0, 0, 0];\n      cross(v1, v2, n);\n      add(model.normal, n, model.normal);\n      point = point.next;\n    }\n\n    return normalize(model.normal);\n  }\n\n  function computeMeasure(point) {\n    var v1 = [0, 0, 0];\n    var v2 = [0, 0, 0];\n    var v3 = [0, 0, 0];\n    var v4 = [0, 0, 0];\n    subtract(point.point, point.previous.point, v1);\n    subtract(point.next.point, point.point, v2);\n    subtract(point.previous.point, point.next.point, v3);\n    cross(v1, v2, v4);\n    var area = dot(v4, model.normal);\n\n    if (area <= 0) {\n      return -1;\n    }\n\n    var perimeter = norm(v1) + norm(v2) + norm(v3);\n    return perimeter * perimeter / area;\n  }\n\n  function canRemoveVertex(point) {\n    if (model.pointCount <= 3) {\n      return true;\n    }\n\n    var previous = point.previous;\n    var next = point.next;\n    var v = [0, 0, 0];\n    subtract(next.point, previous.point, v);\n    var sN = [0, 0, 0];\n    cross(v, model.normal, sN);\n    normalize(sN);\n\n    if (norm(sN) === 0) {\n      return false;\n    }\n\n    var val = vtkPlane.evaluate(sN, previous.point, next.next.point); // eslint-disable-next-line no-nested-ternary\n\n    var currentSign = val > EPSILON ? 1 : val < -EPSILON ? -1 : 0;\n    var oneNegative = currentSign < 0 ? 1 : 0;\n\n    for (var vertex = next.next.next; vertex.id !== previous.id; vertex = vertex.next) {\n      var previousVertex = vertex.previous;\n      val = vtkPlane.evaluate(sN, previous.point, vertex.point); // eslint-disable-next-line no-nested-ternary\n\n      var sign = val > EPSILON ? 1 : val < -EPSILON ? -1 : 0;\n\n      if (sign !== currentSign) {\n        if (!oneNegative) {\n          oneNegative = sign <= 0 ? 1 : 0;\n        }\n\n        if (vtkLine.intersection(previous.point, next.point, vertex.point, previousVertex.point, [0], [0]) === IntersectionState.YES_INTERSECTION) {\n          return false;\n        }\n\n        currentSign = sign;\n      }\n    }\n\n    return oneNegative === 1;\n  }\n\n  function removePoint(point, queue) {\n    model.pointCount -= 1;\n    var previous = point.previous;\n    var next = point.next;\n    model.tris = model.tris.concat(point.point);\n    model.tris = model.tris.concat(next.point);\n    model.tris = model.tris.concat(previous.point);\n    previous.next = next;\n    next.previous = previous;\n    queue.deleteById(previous.id);\n    queue.deleteById(next.id);\n    var previousMeasure = computeMeasure(previous);\n\n    if (previousMeasure > 0) {\n      queue.push(previousMeasure, previous);\n    }\n\n    var nextMeasure = computeMeasure(next);\n\n    if (nextMeasure > 0) {\n      queue.push(nextMeasure, next);\n    }\n\n    if (point.id === model.firstPoint.id) {\n      model.firstPoint = next;\n    }\n  }\n\n  function earCutTriangulation() {\n    computeNormal();\n    var vertexQueue = vtkPriorityQueue.newInstance();\n    var point = model.firstPoint;\n\n    for (var i = 0; i < model.pointCount; i++) {\n      var measure = computeMeasure(point);\n\n      if (measure > 0) {\n        vertexQueue.push(measure, point);\n      }\n\n      point = point.next;\n    }\n\n    while (model.pointCount > 2 && vertexQueue.length() > 0) {\n      if (model.pointCount === vertexQueue.length()) {\n        // convex\n        var pointToRemove = vertexQueue.pop();\n        removePoint(pointToRemove, vertexQueue);\n      } else {\n        // concave\n        var _pointToRemove = vertexQueue.pop();\n\n        if (canRemoveVertex(_pointToRemove)) {\n          removePoint(_pointToRemove, vertexQueue);\n        }\n      }\n    }\n\n    return model.pointCount <= 2;\n  }\n\n  publicAPI.triangulate = function () {\n    if (!model.firstPoint) {\n      return null;\n    }\n\n    return earCutTriangulation();\n  };\n\n  publicAPI.setPoints = function (points) {\n    model.pointCount = points.length;\n    model.firstPoint = {\n      id: 0,\n      point: points[0],\n      next: null,\n      previous: null\n    };\n    var currentPoint = model.firstPoint;\n\n    for (var i = 1; i < model.pointCount; i++) {\n      currentPoint.next = {\n        id: i,\n        point: points[i],\n        next: null,\n        previous: currentPoint\n      };\n      currentPoint = currentPoint.next;\n    }\n\n    model.firstPoint.previous = currentPoint;\n    currentPoint.next = model.firstPoint;\n  };\n\n  publicAPI.getPointArray = function () {\n    return model.tris;\n  };\n} // ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\n\nvar DEFAULT_VALUES = {\n  firstPoint: null,\n  pointCount: 0,\n  tris: []\n}; // ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  var initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues); // Build VTK API\n\n  macro.obj(publicAPI, model);\n  vtkPolygon(publicAPI, model);\n} // ----------------------------------------------------------------------------\n\nvar newInstance = macro.newInstance(extend, 'vtkPolygon'); // ----------------------------------------------------------------------------\n\nvar vtkPolygon$1 = _objectSpread({\n  newInstance: newInstance,\n  extend: extend\n}, STATIC);\n\nexport { vtkPolygon$1 as default, extend, getBounds, getNormal, newInstance };\n","import macro from '../../macros.js';\nimport { e as distance2BetweenPoints } from '../Core/Math/index.js';\n\nvar vtkErrorMacro = macro.vtkErrorMacro;\nvar OCTREENODE_INSERTPOINT = [function (points, pointIdx, coords) {\n  return pointIdx;\n}, function (points, pointIdx, coords) {\n  points.setTuple(pointIdx, coords);\n  return pointIdx;\n}, function (points, pointIdx, coords) {\n  return points.insertNextTuple(coords);\n}]; // Given the index (0 ~ 7) of a child node, the spatial bounding axis (0 ~ 2\n// for x, y, and z), and the value (0 ~ 1 for min and max) to access, this LUT\n// allows for rapid assignment of its spatial bounding box --- MinBounds[3]\n// and MaxBounds[3], with each specific value or entry of this LUT pointing to\n// MinBounds[3] for 0, center point for 1, or MaxBounds[3] for 2.\n\nvar OCTREE_CHILD_BOUNDS_LUT = [[[0, 1], [0, 1], [0, 1]], [[1, 2], [0, 1], [0, 1]], [[0, 1], [1, 2], [0, 1]], [[1, 2], [1, 2], [0, 1]], [[0, 1], [0, 1], [1, 2]], [[1, 2], [0, 1], [1, 2]], [[0, 1], [1, 2], [1, 2]], [[1, 2], [1, 2], [1, 2]]];\n\nfunction vtkIncrementalOctreeNode(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkIncrementalOctreeNode'); //------------------------------------------------------------------------------\n\n  publicAPI.createPointIdSet = function (initSize, growSize) {\n    if (model.pointIdSet == null) {\n      model.pointIdSet = []; // TODO: use initSize and growSize.\n      // model.pointIdSet.allocate(initSize, growSize);\n    }\n  }; //------------------------------------------------------------------------------\n\n\n  publicAPI.setBounds = function (x1, x2, y1, y2, z1, z2) {\n    if (model.minBounds == null) model.minBounds = [];\n    if (model.maxBounds == null) model.maxBounds = [];\n    if (model.minDataBounds == null) model.minDataBounds = [];\n    if (model.maxDataBounds == null) model.maxDataBounds = [];\n    model.minBounds[0] = x1;\n    model.maxBounds[0] = x2;\n    model.minBounds[1] = y1;\n    model.maxBounds[1] = y2;\n    model.minBounds[2] = z1;\n    model.maxBounds[2] = z2;\n    model.minDataBounds[0] = x2;\n    model.maxDataBounds[0] = x1;\n    model.minDataBounds[1] = y2;\n    model.maxDataBounds[1] = y1;\n    model.minDataBounds[2] = z2;\n    model.maxDataBounds[2] = z1;\n  }; //------------------------------------------------------------------------------\n\n\n  publicAPI.getBounds = function (bounds) {\n    bounds[0] = model.minBounds[0];\n    bounds[1] = model.maxBounds[0];\n    bounds[2] = model.minBounds[1];\n    bounds[3] = model.maxBounds[1];\n    bounds[4] = model.minBounds[2];\n    bounds[5] = model.maxBounds[2];\n  };\n\n  publicAPI.getChildIndex = function (point) {\n    return Number(point[0] > model.children[0].getMaxBoundsByReference()[0]) + ( // eslint-disable-next-line no-bitwise\n    Number(point[1] > model.children[0].getMaxBoundsByReference()[1]) << 1) + ( // eslint-disable-next-line no-bitwise\n    Number(point[2] > model.children[0].getMaxBoundsByReference()[2]) << 2);\n  };\n\n  publicAPI.containsPoint = function (pnt) {\n    return model.minBounds[0] < pnt[0] && pnt[0] <= model.maxBounds[0] && model.minBounds[1] < pnt[1] && pnt[1] <= model.maxBounds[1] && model.minBounds[2] < pnt[2] && pnt[2] <= model.maxBounds[2] ? 1 : 0;\n  };\n\n  publicAPI.containsPointByData = function (pnt) {\n    return model.minDataBounds[0] <= pnt[0] && pnt[0] <= model.maxDataBounds[0] && model.minDataBounds[1] <= pnt[1] && pnt[1] <= model.maxDataBounds[1] && model.minDataBounds[2] <= pnt[2] && pnt[2] <= model.maxDataBounds[2] ? 1 : 0;\n  }; //------------------------------------------------------------------------------\n\n\n  publicAPI.updateCounterAndDataBounds = function (point, nHits, updateData) {\n    model.numberOfPoints += nHits;\n    if (!updateData) return false;\n    var updated = false;\n\n    if (point[0] < model.minDataBounds[0]) {\n      updated = true;\n      model.minDataBounds[0] = point[0];\n    }\n\n    if (point[0] > model.maxDataBounds[0]) {\n      updated = true;\n      model.maxDataBounds[0] = point[0];\n    }\n\n    if (point[1] < model.minDataBounds[1]) {\n      updated = true;\n      model.minDataBounds[1] = point[1];\n    }\n\n    if (point[1] > model.maxDataBounds[1]) {\n      updated = true;\n      model.maxDataBounds[1] = point[1];\n    }\n\n    if (point[2] < model.minDataBounds[2]) {\n      updated = true;\n      model.minDataBounds[2] = point[2];\n    }\n\n    if (point[2] > model.maxDataBounds[2]) {\n      updated = true;\n      model.maxDataBounds[2] = point[2];\n    }\n\n    return updated;\n  }; //------------------------------------------------------------------------------\n\n\n  publicAPI.updateCounterAndDataBoundsRecursively = function (point, nHits, updateData, endNode) {\n    var updated = publicAPI.updateCounterAndDataBounds(point, nHits, updateData);\n    return model.parent === endNode ? updated : model.parent.updateCounterAndDataBoundsRecursively(point, nHits, updated, endNode);\n  }; //------------------------------------------------------------------------------\n\n\n  publicAPI.containsDuplicatePointsOnly = function (point) {\n    return model.minDataBounds[0] === point[0] && point[0] === model.maxDataBounds[0] && model.minDataBounds[1] === point[1] && point[1] === model.maxDataBounds[1] && model.minDataBounds[2] === point[2] && point[2] === model.maxDataBounds[2];\n  }; //------------------------------------------------------------------------------\n\n\n  publicAPI.isLeaf = function () {\n    return model.children == null;\n  }; //------------------------------------------------------------------------------\n\n\n  publicAPI.getChild = function (i) {\n    return model.children[i];\n  }; //------------------------------------------------------------------------------\n\n  /* eslint-disable no-use-before-define */\n\n\n  publicAPI.separateExactlyDuplicatePointsFromNewInsertion = function (points, pntIds, newPnt, pntIdx, maxPts, ptMode) {\n    // the number of points already maintained in this leaf node\n    // >= maxPts AND all of them are exactly duplicate with one another\n    //           BUT the new point is not a duplicate of them any more\n    var pointIdx = pntIdx;\n    var i;\n    var dupPnt = [0.0, 0.0, 0.0];\n    var octMin = [0.0, 0.0, 0.0];\n    var octMid = [0.0, 0.0, 0.0];\n    var octMax = [0.0, 0.0, 0.0];\n    var boxPtr = [null, null, null];\n    var ocNode = null;\n    var duplic = publicAPI;\n    var single = publicAPI; // the coordinate of the duplicate points: note pntIds == model.pointIdSet\n\n    points.getPoint(pntIds[0], dupPnt);\n\n    while (duplic === single) {\n      // as long as separation has not been achieved\n      // update the current (in recursion) node and access the bounding box info\n      ocNode = duplic;\n      octMid[0] = (ocNode.minBounds[0] + ocNode.maxBounds[0]) * 0.5;\n      octMid[1] = (ocNode.minBounds[1] + ocNode.maxBounds[1]) * 0.5;\n      octMid[2] = (ocNode.minBounds[2] + ocNode.maxBounds[2]) * 0.5;\n      boxPtr[0] = ocNode.minBounds;\n      boxPtr[1] = octMid;\n      boxPtr[2] = ocNode.maxBounds; // create eight child nodes\n      // FIXME: May be too slow to use vtk newInstance()\n\n      ocNode.children = [newInstance(), newInstance(), newInstance(), newInstance(), newInstance(), newInstance(), newInstance(), newInstance()];\n\n      for (i = 0; i < 8; i++) {\n        // x-bound: axis 0\n        octMin[0] = boxPtr[OCTREE_CHILD_BOUNDS_LUT[i][0][0]][0];\n        octMax[0] = boxPtr[OCTREE_CHILD_BOUNDS_LUT[i][0][1]][0]; // y-bound: axis 1\n\n        octMin[1] = boxPtr[OCTREE_CHILD_BOUNDS_LUT[i][1][0]][1];\n        octMax[1] = boxPtr[OCTREE_CHILD_BOUNDS_LUT[i][1][1]][1]; // z-bound: axis 2\n\n        octMin[2] = boxPtr[OCTREE_CHILD_BOUNDS_LUT[i][2][0]][2];\n        octMax[2] = boxPtr[OCTREE_CHILD_BOUNDS_LUT[i][2][1]][2];\n        ocNode.children[i] = newInstance();\n        ocNode.children[i].setParent(ocNode);\n        ocNode.children[i].setBounds(octMin[0], octMax[0], octMin[1], octMax[1], octMin[2], octMax[2]);\n      } // determine the leaf node of the duplicate points & that of the new point\n\n\n      duplic = ocNode.children[ocNode.getChildIndex(dupPnt)];\n      single = ocNode.children[ocNode.getChildIndex(newPnt)];\n    } // Now the duplicate points have been separated from the new point //\n    // create a vtkIdList object for the new point\n    // update the counter and the data bounding box until the root node\n    // (including the root node)\n\n\n    pointIdx = OCTREENODE_INSERTPOINT[ptMode](points, pointIdx, newPnt); // eslint-disable-next-line no-bitwise\n\n    single.createPointIdSet(maxPts >> 2, maxPts >> 1);\n    single.getPointIdSet().push(pointIdx);\n    single.updateCounterAndDataBoundsRecursively(newPnt, 1, 1, null); // We just need to reference pntIds while un-registering it from 'this'.\n    // This avoids deep-copying point ids from pntIds to duplic's PointIdSet.\n    // update the counter and the data bounding box, but until 'this' node\n    // (excluding 'this' node)\n\n    duplic.setPointIdSet(pntIds);\n    duplic.updateCounterAndDataBoundsRecursively(dupPnt, pntIds.length, 1, publicAPI);\n    return pointIdx;\n  };\n  /* eslint-enable no-use-before-define */\n  //------------------------------------------------------------------------------\n\n\n  publicAPI.createChildNodes = function (points, pntIds, newPnt, pntIdx, maxPts, ptMode, numberOfNodes) {\n    // There are two scenarios for which this function is invoked.\n    //\n    // (1) the number of points already maintained in this leaf node\n    //     == maxPts AND not all of them are exactly duplicate\n    //               AND the new point is not a duplicate of them all\n    // (2) the number of points already maintained in this leaf node\n    //     >= maxPts AND all of them are exactly duplicate with one another\n    //               BUT the new point is not a duplicate of them any more\n    // address case (2) first if necessary\n    var nbNodes = numberOfNodes;\n    var pointIdx = pntIdx;\n    var sample = [];\n    points.getPoint(pntIds[0], sample);\n\n    if (publicAPI.containsDuplicatePointsOnly(sample)) {\n      pointIdx = publicAPI.separateExactlyDuplicatePointsFromNewInsertion(points, pntIds, newPnt, pointIdx, maxPts, ptMode);\n      return {\n        success: false,\n        nbNodes: nbNodes,\n        pointIdx: pointIdx\n      };\n    } // then address case (1) below\n\n\n    var i;\n    var target;\n    var dvidId = -1; // index of the sub-dividing octant, if any\n\n    var fullId = -1; // index of the full octant, if any\n\n    var numIds = [0, 0, 0, 0, 0, 0, 0, 0];\n    var octMin = [];\n    var octMax = [];\n    var tempPt = [];\n    var tempId;\n    var octMid = [(model.minBounds[0] + model.maxBounds[0]) * 0.5, (model.minBounds[1] + model.maxBounds[1]) * 0.5, (model.minBounds[2] + model.maxBounds[2]) * 0.5];\n    var boxPtr = [model.minBounds, octMid, model.maxBounds]; // create eight child nodes\n\n    model.children = [];\n\n    for (i = 0; i < 8; i++) {\n      // x-bound: axis 0\n      octMin[0] = boxPtr[OCTREE_CHILD_BOUNDS_LUT[i][0][0]][0];\n      octMax[0] = boxPtr[OCTREE_CHILD_BOUNDS_LUT[i][0][1]][0]; // y-bound: axis 1\n\n      octMin[1] = boxPtr[OCTREE_CHILD_BOUNDS_LUT[i][1][0]][1];\n      octMax[1] = boxPtr[OCTREE_CHILD_BOUNDS_LUT[i][1][1]][1]; // z-bound: axis 2\n\n      octMin[2] = boxPtr[OCTREE_CHILD_BOUNDS_LUT[i][2][0]][2];\n      octMax[2] = boxPtr[OCTREE_CHILD_BOUNDS_LUT[i][2][1]][2]; // This call internally sets the cener and default data bounding box, too.\n      // eslint-disable-next-line no-use-before-define\n\n      model.children[i] = newInstance(); // model.children[i].iD = nbNodes++;\n\n      model.children[i].setParent(publicAPI);\n      model.children[i].setBounds(octMin[0], octMax[0], octMin[1], octMax[1], octMin[2], octMax[2]); // allocate a list of point-indices (size = 2^n) for index registration\n      // eslint-disable-next-line no-bitwise\n\n      model.children[i].createPointIdSet(maxPts >> 2, maxPts >> 1);\n    }\n\n    boxPtr[0] = null;\n    boxPtr[1] = null;\n    boxPtr[2] = null; // distribute the available point-indices to the eight child nodes\n\n    for (i = 0; i < maxPts; i++) {\n      tempId = pntIds[i];\n      points.getPoint(tempId, tempPt);\n      target = publicAPI.getChildIndex(tempPt);\n      model.children[target].getPointIdSet().push(tempId);\n      model.children[target].updateCounterAndDataBounds(tempPt);\n      numIds[target]++;\n    } // locate the full child, just if any\n\n\n    for (i = 0; i < 8; i++) {\n      if (numIds[i] === maxPts) {\n        fullId = i;\n        break;\n      }\n    }\n\n    target = publicAPI.getChildIndex(newPnt);\n\n    if (fullId === target) {\n      // The fact is that we are going to insert the new point to an already\n      // full octant (child node). Thus we need to further divide this child\n      // to avoid the overflow problem.\n      var _model$children$targe = model.children[target].createChildNodes(points, pntIds, newPnt, pointIdx, maxPts, ptMode, nbNodes);\n\n      nbNodes = _model$children$targe.numberOfNodes;\n      pointIdx = _model$children$targe.pointIdx;\n      dvidId = fullId;\n    } else {\n      // the initial division is a success\n      pointIdx = OCTREENODE_INSERTPOINT[ptMode](points, pointIdx, newPnt);\n      model.children[target].getPointIdSet().push(pointIdx);\n      model.children[target].updateCounterAndDataBoundsRecursively(newPnt, 1, 1, null); // NOTE: The counter below might reach the threshold, though we delay the\n      // sub-division of this child node until the next point insertion occurs.\n\n      numIds[target]++;\n    } // Now it is time to reclaim those un-used vtkIdList objects, of which each\n    // either is empty or still needs to be deleted due to further division of\n    // the child node. This post-deallocation of the un-used vtkIdList objects\n    // (of some child nodes) is based on the assumption that retrieving the\n    // 'maxPts' points from vtkPoints and the associated 'maxPts' point-indices\n    // from vtkIdList is more expensive than reclaiming at most 8 vtkIdList\n    // objects at hand.\n\n\n    for (i = 0; i < 8; i++) {\n      if (numIds[i] === 0 || i === dvidId) {\n        model.children[i].getPointIdSet().length = 0;\n      }\n    } // notify vtkIncrementalOctreeNode::InsertPoint() to destroy pntIds\n\n\n    return {\n      success: true,\n      numberOfNodes: nbNodes,\n      pointIdx: pointIdx\n    };\n  }; //------------------------------------------------------------------------------\n\n\n  publicAPI.insertPoint = function (points, newPnt, maxPts, pntId, ptMode, numberOfNodes) {\n    var nbNodes = 0;\n    var pointIdx = pntId;\n\n    if (model.pointIdSet) {\n      // there has been at least one point index\n      if (model.pointIdSet.length < maxPts || publicAPI.containsDuplicatePointsOnly(newPnt)) {\n        // this leaf node is not full or\n        // this leaf node is full, but of all exactly duplicate points\n        // and the point under check is another duplicate of these points\n        pointIdx = OCTREENODE_INSERTPOINT[ptMode](points, pointIdx, newPnt);\n        model.pointIdSet.push(pointIdx);\n        publicAPI.updateCounterAndDataBoundsRecursively(newPnt, 1, 1, null);\n      } else {\n        // overflow: divide this node and delete the list of point-indices.\n        // Note that the number of exactly duplicate points might be greater\n        // than or equal to maxPts.\n        var _publicAPI$createChil = publicAPI.createChildNodes(points, model.pointIdSet, newPnt, pointIdx, maxPts, ptMode, numberOfNodes);\n\n        nbNodes = _publicAPI$createChil.numberOfNodes;\n        pointIdx = _publicAPI$createChil.pointIdx;\n        model.pointIdSet = null;\n      }\n    } else {\n      // There has been no any point index registered in this leaf node\n      pointIdx = OCTREENODE_INSERTPOINT[ptMode](points, pointIdx, newPnt);\n      model.pointIdSet = [];\n      model.pointIdSet.push(pointIdx);\n      publicAPI.updateCounterAndDataBoundsRecursively(newPnt, 1, 1, null);\n    }\n\n    return {\n      numberOfNodes: numberOfNodes + nbNodes,\n      pointIdx: pointIdx\n    };\n  }; //------------------------------------------------------------------------------\n\n\n  publicAPI.getDistance2ToBoundary = function (point, closest, innerOnly, rootNode, checkData) {\n    // It is mandatory that GetMinDataBounds() and GetMaxDataBounds() be used.\n    // Direct access to MinDataBounds and MaxDataBounds might incur problems.\n    var thisMin = null;\n    var thisMax = null;\n    var rootMin = null;\n    var rootMax = null; // TODO: Check\n    // let minDist = VTK_DOUBLE_MAX;\n\n    var minDist = Number.MAX_VALUE; // minimum distance to the boundaries\n\n    if (checkData) {\n      thisMin = publicAPI.getMinDataBounds();\n      thisMax = publicAPI.getMaxDataBounds();\n      rootMin = rootNode.getMinDataBounds();\n      rootMax = rootNode.getMaxDataBounds();\n    } else {\n      thisMin = model.minBounds;\n      thisMax = model.maxBounds;\n      rootMin = rootNode.getMinBounds();\n      rootMax = rootNode.getMaxBounds();\n    }\n\n    var minFace = 0; // index of the face with min distance to the point\n\n    var beXless = Number(point[0] < thisMin[0]);\n    var beXmore = Number(point[0] > thisMax[0]);\n    var beYless = Number(point[1] < thisMin[1]);\n    var beYmore = Number(point[1] > thisMax[1]);\n    var beZless = Number(point[2] < thisMin[2]);\n    var beZmore = Number(point[2] > thisMax[2]);\n    var withinX = Number(!beXless && !beXmore);\n    var withinY = Number(!beYless && !beYmore);\n    var withinZ = Number(!beZless && !beZmore); // eslint-disable-next-line no-bitwise\n\n    var xyzFlag = (withinZ << 2) + (withinY << 1) + withinX;\n\n    switch (xyzFlag) {\n      case 0:\n        {\n          // withinZ = 0; withinY = 0;  withinX = 0\n          // closest to a corner\n          closest[0] = beXless ? thisMin[0] : thisMax[0];\n          closest[1] = beYless ? thisMin[1] : thisMax[1];\n          closest[2] = beZless ? thisMin[2] : thisMax[2];\n          minDist = distance2BetweenPoints(point, closest);\n          break;\n        }\n\n      case 1:\n        {\n          // withinZ = 0; withinY = 0; withinX = 1\n          // closest to an x-aligned edge\n          closest[0] = point[0];\n          closest[1] = beYless ? thisMin[1] : thisMax[1];\n          closest[2] = beZless ? thisMin[2] : thisMax[2];\n          minDist = distance2BetweenPoints(point, closest);\n          break;\n        }\n\n      case 2:\n        {\n          // withinZ = 0; withinY = 1; withinX = 0\n          // closest to a y-aligned edge\n          closest[0] = beXless ? thisMin[0] : thisMax[0];\n          closest[1] = point[1];\n          closest[2] = beZless ? thisMin[2] : thisMax[2];\n          minDist = distance2BetweenPoints(point, closest);\n          break;\n        }\n\n      case 3:\n        {\n          // withinZ = 0; withinY = 1; withinX = 1\n          // closest to a z-face\n          if (beZless) {\n            minDist = thisMin[2] - point[2];\n            closest[2] = thisMin[2];\n          } else {\n            minDist = point[2] - thisMax[2];\n            closest[2] = thisMax[2];\n          }\n\n          minDist *= minDist;\n          closest[0] = point[0];\n          closest[1] = point[1];\n          break;\n        }\n\n      case 4:\n        {\n          // withinZ = 1; withinY = 0; withinX = 0\n          // cloest to a z-aligned edge\n          closest[0] = beXless ? thisMin[0] : thisMax[0];\n          closest[1] = beYless ? thisMin[1] : thisMax[1];\n          closest[2] = point[2];\n          minDist = distance2BetweenPoints(point, closest);\n          break;\n        }\n\n      case 5:\n        {\n          // withinZ = 1; withinY = 0; withinX = 1\n          // closest to a y-face\n          if (beYless) {\n            minDist = thisMin[1] - point[1];\n            closest[1] = thisMin[1];\n          } else {\n            minDist = point[1] - thisMax[1];\n            closest[1] = thisMax[1];\n          }\n\n          minDist *= minDist;\n          closest[0] = point[0];\n          closest[2] = point[2];\n          break;\n        }\n\n      case 6:\n        {\n          // withinZ = 1; withinY = 1; withinX = 0\n          // closest to an x-face\n          if (beXless) {\n            minDist = thisMin[0] - point[0];\n            closest[0] = thisMin[0];\n          } else {\n            minDist = point[0] - thisMax[0];\n            closest[0] = thisMax[0];\n          }\n\n          minDist *= minDist;\n          closest[1] = point[1];\n          closest[2] = point[2];\n          break;\n        }\n\n      case 7:\n        {\n          // withinZ = 1; withinY = 1;  withinZ = 1\n          // point is inside the box\n          if (innerOnly) {\n            // check only inner boundaries\n            var faceDst;\n            faceDst = point[0] - thisMin[0]; // x-min face\n\n            if (thisMin[0] !== rootMin[0] && faceDst < minDist) {\n              minFace = 0;\n              minDist = faceDst;\n            }\n\n            faceDst = thisMax[0] - point[0]; // x-max face\n\n            if (thisMax[0] !== rootMax[0] && faceDst < minDist) {\n              minFace = 1;\n              minDist = faceDst;\n            }\n\n            faceDst = point[1] - thisMin[1]; // y-min face\n\n            if (thisMin[1] !== rootMin[1] && faceDst < minDist) {\n              minFace = 2;\n              minDist = faceDst;\n            }\n\n            faceDst = thisMax[1] - point[1]; // y-max face\n\n            if (thisMax[1] !== rootMax[1] && faceDst < minDist) {\n              minFace = 3;\n              minDist = faceDst;\n            }\n\n            faceDst = point[2] - thisMin[2]; // z-min face\n\n            if (thisMin[2] !== rootMin[2] && faceDst < minDist) {\n              minFace = 4;\n              minDist = faceDst;\n            }\n\n            faceDst = thisMax[2] - point[2]; // z-max face\n\n            if (thisMax[2] !== rootMax[2] && faceDst < minDist) {\n              minFace = 5;\n              minDist = faceDst;\n            }\n          } else {\n            // check all boundaries\n            var tmpDist = [point[0] - thisMin[0], thisMax[0] - point[0], point[1] - thisMin[1], thisMax[1] - point[1], point[2] - thisMin[2], thisMax[2] - point[2]];\n\n            for (var i = 0; i < 6; i++) {\n              if (tmpDist[i] < minDist) {\n                minFace = i;\n                minDist = tmpDist[i];\n              }\n            }\n          } // no square operation if no any inner boundary\n\n\n          if (minDist !== Number.MAX_VALUE) {\n            minDist *= minDist;\n          }\n\n          closest[0] = point[0];\n          closest[1] = point[1];\n          closest[2] = point[2]; // minFace: the quad with the min distance to the point\n          // 0: x-min face  ===>  xyzIndx = 0:  x  and  minFace & 1 = 0:  thisMin\n          // 1: x-max face  ===>  xyzIndx = 0:  x  and  minFace & 1 = 1:  thisMax\n          // 2: y-min face  ===>  xyzIndx = 1:  y  and  minFace & 1 = 0:  thisMin\n          // 3: y-max face  ===>  xyzIndx = 1:  y  and  minFace & 1 = 1:  thisMax\n          // 4: z-min face  ===>  xyzIndx = 2:  z  and  minFace & 1 = 0:  thisMin\n          // 5: z-max face  ===>  xyzIndx = 2:  z  and  minFace & 1 = 1:  thisMax\n\n          var pMinMax = [thisMin, thisMax]; // eslint-disable-next-line no-bitwise\n\n          var xyzIndx = minFace >> 1; // eslint-disable-next-line no-bitwise\n\n          closest[xyzIndx] = pMinMax[minFace & 1][xyzIndx];\n          break;\n        }\n\n      default:\n        vtkErrorMacro('unexpected case in getDistance2ToBoundary');\n    }\n\n    return minDist;\n  }; //------------------------------------------------------------------------------\n\n\n  publicAPI.getDistance2ToInnerBoundary = function (point, rootNode) {\n    var dummy = [];\n    return publicAPI.getDistance2ToBoundary(point, dummy, 0, rootNode, 0);\n  };\n} // ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\n\nvar DEFAULT_VALUES = {\n  pointIdSet: null,\n  minBounds: null,\n  maxBounds: null,\n  minDataBounds: null,\n  maxDataBounds: null,\n  parent: null,\n  children: null\n}; // ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  var initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues); // Make this a VTK object\n\n  macro.obj(publicAPI, model);\n  macro.setGetArray(publicAPI, model, ['minBounds', 'maxBounds', 'minDataBounds', 'maxDataBounds'], 6);\n  macro.get(publicAPI, model, ['pointIdSet', 'numberOfPoints']); // TODO: No get?\n\n  macro.set(publicAPI, model, ['parent']); // Object specific methods\n\n  vtkIncrementalOctreeNode(publicAPI, model);\n} // ----------------------------------------------------------------------------\n\nvar newInstance = macro.newInstance(extend, 'vtkIncrementalOctreeNode'); // ----------------------------------------------------------------------------\n\nvar vtkIncrementalOctreeNode$1 = {\n  newInstance: newInstance,\n  extend: extend\n};\n\nexport { vtkIncrementalOctreeNode$1 as default, extend, newInstance };\n","import macro from '../../macros.js';\n\nfunction vtkLocator(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkLocator');\n} // ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\n\nvar DEFAULT_VALUES = {\n  dataSet: null,\n  maxLevel: 8,\n  // TODO: clamp 0, Number.MAX_VALUE\n  level: 8,\n  automatic: false,\n  tolerance: 0.0,\n  // TODO: clamp 0.0, Number.MAX_VALUE\n  useExistingSearchStructure: false\n}; // ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  var initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues); // Make this a VTK object\n\n  macro.obj(publicAPI, model);\n  macro.get(publicAPI, model, ['level']);\n  macro.setGet(publicAPI, model, ['dataSet', 'maxLevel', 'automatic', 'tolerance', 'useExistingSearchStructure']); // Object specific methods\n\n  vtkLocator(publicAPI, model);\n} // ----------------------------------------------------------------------------\n\nvar vtkLocator$1 = {\n  extend: extend\n};\n\nexport { vtkLocator$1 as default, extend };\n","import _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport macro from '../../macros.js';\nimport vtkLocator from './Locator.js';\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction vtkAbstractPointLocator(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkAbstractPointLocator');\n} // ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\n\nfunction defaultValues(initialValues) {\n  return _objectSpread({\n    bounds: null,\n    numberOfBuckets: 0\n  }, initialValues);\n} // ----------------------------------------------------------------------------\n\n\nfunction extend(publicAPI, model) {\n  var initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  vtkLocator.extend(publicAPI, model, defaultValues(initialValues)); // Make this a VTK object\n\n  macro.obj(publicAPI, model);\n  macro.get(publicAPI, model, ['numberOfBuckets']);\n  macro.setGetArray(publicAPI, model, ['bounds'], 6); // Object specific methods\n\n  vtkAbstractPointLocator(publicAPI, model);\n} // ----------------------------------------------------------------------------\n\nvar vtkAbstractPointLocator$1 = {\n  extend: extend\n};\n\nexport { vtkAbstractPointLocator$1 as default, extend };\n","import _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _toConsumableArray from '@babel/runtime/helpers/toConsumableArray';\nimport _slicedToArray from '@babel/runtime/helpers/slicedToArray';\nimport macro from '../../macros.js';\nimport { f as vtkMath } from '../Core/Math/index.js';\nimport vtkBoundingBox from './BoundingBox.js';\nimport vtkIncrementalOctreeNode from './IncrementalOctreeNode.js';\nimport vtkAbstractPointLocator from './AbstractPointLocator.js';\nimport { VtkDataTypes } from '../Core/DataArray/Constants.js';\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar vtkErrorMacro = macro.vtkErrorMacro;\n\nfunction vtkIncrementalOctreePointLocator(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkIncrementalOctreePointLocator');\n\n  function getLeafContainer(node, pnt) {\n    return node.isLeaf() ? node : getLeafContainer(node.getChild(node.getChildIndex(pnt)), pnt);\n  } //------------------------------------------------------------------------------\n\n\n  publicAPI.freeSearchStructure = function () {\n    model.octreeRootNode = null;\n    model.numberOfNodes = 0;\n    model.locatorPoints = null;\n  }; //------------------------------------------------------------------------------\n\n\n  publicAPI.findClosestPointInLeafNode = function (leafNode, point) {\n    // NOTE: dist2 MUST be initiated with a very huge value below, but instead of\n    // model.octreeMaxDimSize * model.octreeMaxDimSize * 4.0, because the point\n    // under check may be outside the octree and hence the squared distance can\n    // be greater than the latter or other similar octree-based specific values.\n    var dist2 = Number.MAX_VALUE;\n\n    if (leafNode.getPointIdSet() == null) {\n      return [-1, dist2];\n    }\n\n    var numPts = 0;\n    var tmpDst = 0.0;\n    var tmpPnt = [];\n    var tmpIdx = -1;\n    var pntIdx = -1;\n    var idList = leafNode.getPointIdSet();\n    numPts = idList.length;\n\n    for (var i = 0; i < numPts; i++) {\n      tmpIdx = idList[i];\n      model.locatorPoints.getPoint(tmpIdx, tmpPnt);\n      tmpDst = vtkMath.distance2BetweenPoints(tmpPnt, point);\n\n      if (tmpDst < dist2) {\n        dist2 = tmpDst;\n        pntIdx = tmpIdx;\n      }\n\n      if (dist2 === 0.0) {\n        break;\n      }\n    }\n\n    idList = null;\n    return [pntIdx, dist2];\n  };\n\n  publicAPI.findClosestPointInSphere = function (point, radius2, maskNode, refDist2) {\n    var pointIndx = -1;\n    var minDist2 = Number.MAX_VALUE;\n    var nodesBase = [];\n    nodesBase.push(model.octreeRootNode);\n    var checkNode;\n    var childNode;\n    var distToData;\n    var tempDist2;\n    var tempPntId;\n\n    while (!nodesBase.length === 0 && minDist2 > 0.0) {\n      checkNode = nodesBase.top();\n      nodesBase.pop();\n\n      if (!checkNode.isLeaf()) {\n        for (var i = 0; i < 8; i++) {\n          childNode = checkNode.getChild(i); // use ( radius2 + radius2 ) to skip empty nodes\n\n          distToData = childNode.getNumberOfPoints() ? childNode.getDistance2ToBoundary(point, model.octreeRootNode, 1) : radius2 + radius2; // If a child node is not the mask node AND its distance, specifically\n          // the data bounding box (determined by the points inside or under) to\n          // the point, is less than the threshold radius (one exception is the\n          // point's container nodes), it is pushed to the stack as a suspect.\n\n          if (childNode !== maskNode && (distToData <= refDist2 || childNode.containsPoint(point) === 1)) {\n            nodesBase.push(childNode);\n          }\n\n          childNode = null;\n        }\n      } else {\n        // now that the node under check is a leaf, let's find the closest\n        // point therein and the minimum distance\n        var _publicAPI$findCloses = publicAPI.findClosestPointInLeafNode(checkNode, point);\n\n        var _publicAPI$findCloses2 = _slicedToArray(_publicAPI$findCloses, 2);\n\n        tempPntId = _publicAPI$findCloses2[0];\n        tempDist2 = _publicAPI$findCloses2[1];\n\n        if (tempDist2 < minDist2) {\n          minDist2 = tempDist2;\n          pointIndx = tempPntId;\n        }\n      }\n\n      checkNode = null;\n    }\n\n    return [minDist2 <= radius2 ? pointIndx : -1, minDist2];\n  }; //------------------------------------------------------------------------------\n\n\n  publicAPI.initPointInsertion = function (points, bounds) {\n    var _model$octreeRootNode;\n    var i = 0;\n    var bbIndex = 0;\n\n    if (points == null) {\n      vtkErrorMacro('a valid vtkPoints object required for point insertion');\n      return false;\n    } // destroy the existing octree, if any\n\n\n    publicAPI.freeSearchStructure();\n    model.locatorPoints = points; // obtain the threshold squared distance\n\n    model.insertTolerance2 = model.tolerance * model.tolerance; // Fix bounds\n    // (1) push out a little bit if the original volume is too flat --- a slab\n    // (2) pull back the x, y, and z's lower bounds a little bit such that\n    //     points are clearly \"inside\" the spatial region.  Point p is taken as\n    //     \"inside\" range r = [r1, r2] if and only if r1 < p <= r2.\n\n    model.octreeMaxDimSize = 0.0;\n\n    var tmpBbox = _toConsumableArray(bounds);\n\n    var dimDiff = vtkBoundingBox.getLengths(bounds);\n    model.octreeMaxDimSize = Math.max.apply(Math, _toConsumableArray(dimDiff));\n\n    if (model.buildCubicOctree) {\n      // make the bounding box a cube and hence descendant octants cubes too\n      for (i = 0; i < 3; i++) {\n        if (dimDiff[i] !== model.octreeMaxDimSize) {\n          var delta = model.octreeMaxDimSize - dimDiff[i];\n          tmpBbox[2 * i] -= 0.5 * delta;\n          tmpBbox[2 * i + 1] += 0.5 * delta;\n          dimDiff[i] = model.octreeMaxDimSize;\n        }\n      }\n    }\n\n    model.fudgeFactor = model.octreeMaxDimSize * 10e-6;\n    var minSideSize = model.octreeMaxDimSize * 10e-2;\n\n    for (i = 0; i < 3; i++) {\n      if (dimDiff[i] < minSideSize) {\n        // case (1) above\n        bbIndex = 2 * i;\n        var tempVal = tmpBbox[bbIndex];\n        tmpBbox[bbIndex] = tmpBbox[bbIndex + 1] - minSideSize;\n        tmpBbox[bbIndex + 1] = tempVal + minSideSize;\n      } else {\n        // case (2) above\n        tmpBbox[2 * i] -= model.fudgeFactor;\n      }\n    } // init the octree with an empty leaf node\n\n\n    model.octreeRootNode = vtkIncrementalOctreeNode.newInstance();\n    ++model.numberOfNodes; // this call internally inits the middle (center) and data range, too\n\n    (_model$octreeRootNode = model.octreeRootNode).setBounds.apply(_model$octreeRootNode, _toConsumableArray(tmpBbox));\n\n    return true;\n  };\n\n  publicAPI.findClosestPointInSphereWithTolerance = function (point, radius2, maskNode) {\n    return publicAPI.findClosestPointInSphere(point, radius2, maskNode, model.octreeMaxDimSize * model.octreeMaxDimSize * 4.0, radius2);\n  }; //------------------------------------------------------------------------------\n\n\n  publicAPI.findDuplicateFloatTypePointInVisitedLeafNode = function (leafNode, point) {\n    var tmpPnt;\n    var tmpIdx = -1;\n    var pntIdx = -1; // float thePnt[3]; // TODO\n    // thePnt[0] = static_cast<float>(point[0]);\n    // thePnt[1] = static_cast<float>(point[1]);\n    // thePnt[2] = static_cast<float>(point[2]);\n\n    var idList = leafNode.getPointIdSet(); // float* pFloat = (static_cast<vtkFloatArray*>(model.locatorPoints.getData())).getPointer(0);\n\n    var values = model.locatorPoints.getData();\n\n    for (var i = 0; i < idList.length; i++) {\n      tmpIdx = idList[i]; // eslint-disable-next-line no-bitwise\n\n      tmpPnt = (tmpIdx << 1) + tmpIdx;\n\n      if (point[0] === values[tmpPnt] && point[1] === values[tmpPnt + 1] && point[2] === values[tmpPnt + 2]) {\n        pntIdx = tmpIdx;\n        break;\n      }\n    }\n\n    return pntIdx;\n  }; //------------------------------------------------------------------------------\n\n\n  publicAPI.findDuplicateDoubleTypePointInVisitedLeafNode = function (leafNode, point) {\n    var tmpPnt;\n    var tmpIdx = -1;\n    var pntIdx = -1;\n    var idList = leafNode.getPointIdSet();\n    var values = model.locatorPoints.getData();\n\n    for (var i = 0; i < idList.length; i++) {\n      tmpIdx = idList[i]; // eslint-disable-next-line no-bitwise\n\n      tmpPnt = (tmpIdx << 1) + tmpIdx;\n\n      if (point[0] === values[tmpPnt] && point[1] === values[tmpPnt + 1] && point[2] === values[tmpPnt + 2]) {\n        pntIdx = tmpIdx;\n        break;\n      }\n    }\n\n    return pntIdx;\n  }; //------------------------------------------------------------------------------\n\n\n  publicAPI.findDuplicatePointInLeafNode = function (leafNode, point) {\n    if (leafNode.getPointIdSet() == null) {\n      return -1;\n    }\n\n    return model.locatorPoints.getDataType() === VtkDataTypes.FLOAT ? publicAPI.findDuplicateFloatTypePointInVisitedLeafNode(leafNode, point) : publicAPI.findDuplicateDoubleTypePointInVisitedLeafNode(leafNode, point);\n  }; //------------------------------------------------------------------------------\n\n\n  publicAPI.insertPoint = function (ptId, x) {\n    var leafcontainer = getLeafContainer(model.octreeRootNode, x);\n\n    var _leafcontainer$insert = leafcontainer.insertPoint(model.locatorPoints, x, model.maxPointsPerLeaf, ptId, 1, model.numberOfNodes);\n\n    model.numberOfNodes = _leafcontainer$insert.numberOfNodes;\n  }; //------------------------------------------------------------------------------\n\n\n  publicAPI.insertUniquePoint = function (point) {\n    // TODO: We have a mix of let and const here.\n    // eslint-disable-next-line prefer-const\n    var _publicAPI$isInserted = publicAPI.isInsertedPoint(point),\n        pointIdx = _publicAPI$isInserted.pointIdx,\n        leafContainer = _publicAPI$isInserted.leafContainer;\n\n    if (pointIdx > -1) {\n      return {\n        success: false,\n        idx: pointIdx\n      };\n    } // TODO: pointIdx\n\n\n    var numberOfNodes; // eslint-disable-next-line prefer-const\n\n    var _leafContainer$insert = leafContainer.insertPoint(model.locatorPoints, point, model.maxPointsPerLeaf, pointIdx, 2, model.numberOfNodes);\n\n    numberOfNodes = _leafContainer$insert.numberOfNodes;\n    pointIdx = _leafContainer$insert.pointIdx;\n    model.numberOfNodes = numberOfNodes;\n    return {\n      success: true,\n      idx: pointIdx\n    };\n  }; //------------------------------------------------------------------------------\n\n\n  publicAPI.insertNextPoint = function (x) {\n    var leafContainer = getLeafContainer(model.octreeRootNode, x);\n\n    var _leafContainer$insert2 = leafContainer.insertPoint(model.locatorPoints, x, model.maxPointsPerLeaf, -1, 2, model.numberOfNodes),\n        numberOfNodes = _leafContainer$insert2.numberOfNodes,\n        pointIdx = _leafContainer$insert2.pointIdx;\n\n    model.numberOfNodes = numberOfNodes;\n    return pointIdx;\n  }; //------------------------------------------------------------------------------\n\n\n  publicAPI.isInsertedPointForZeroTolerance = function (x) {\n    // the target leaf node always exists there since the root node of the\n    // octree has been initialized to cover all possible points to be inserted\n    // and therefore we do not need to check it here\n    var leafContainer = getLeafContainer(model.octreeRootNode, x);\n    var pointIdx = publicAPI.findDuplicatePointInLeafNode(leafContainer, x);\n    return {\n      pointIdx: pointIdx,\n      leafContainer: leafContainer\n    };\n  }; //------------------------------------------------------------------------------\n\n\n  publicAPI.isInsertedPointForNonZeroTolerance = function (x) {\n    // minDist2 // min distance to ALL existing points\n    // elseDst2 // min distance to other nodes (inner boundaries)\n    var dist2Ext; // min distance to an EXTended set of nodes\n\n    var pntIdExt; // the target leaf node always exists there since the root node of the\n    // octree has been initialized to cover all possible points to be inserted\n    // and therefore we do not need to check it here\n\n    var leafContainer = getLeafContainer(model.octreeRootNode, x);\n\n    var _publicAPI$findCloses3 = publicAPI.findClosestPointInLeafNode(leafContainer, x),\n        _publicAPI$findCloses4 = _slicedToArray(_publicAPI$findCloses3, 2),\n        pointIdx = _publicAPI$findCloses4[0],\n        minDist2 = _publicAPI$findCloses4[1];\n\n    if (minDist2 === 0.0) {\n      return {\n        pointIdx: pointIdx,\n        leafContainer: leafContainer\n      };\n    } // As no any 'duplicate' point exists in this leaf node, we need to expand\n    // the search scope to capture possible closer points in other nodes.\n\n\n    var elseDst2 = leafContainer.getDistance2ToInnerBoundary(x, model.octreeRootNode);\n\n    if (elseDst2 < model.insertTolerance2) {\n      // one or multiple closer points might exist in the neighboring nodes\n      // TODO: dist2Ext\n      pntIdExt = publicAPI.findClosestPointInSphereWithTolerance(x, model.insertTolerance2, leafContainer, dist2Ext);\n\n      if (dist2Ext < minDist2) {\n        minDist2 = dist2Ext;\n        pointIdx = pntIdExt;\n      }\n    }\n\n    pointIdx = minDist2 <= model.insertTolerance2 ? pointIdx : -1;\n    return {\n      pointIdx: pointIdx,\n      leafContainer: leafContainer\n    };\n  }; //------------------------------------------------------------------------------\n\n\n  publicAPI.isInsertedPoint = function (x, leafContainer) {\n    return model.insertTolerance2 === 0.0 ? publicAPI.isInsertedPointForZeroTolerance(x, leafContainer) : publicAPI.isInsertedPointForNonZeroTolerance(x, leafContainer);\n  };\n} // ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\n\nfunction defaultValues(initialValues) {\n  return _objectSpread({\n    fudgeFactor: 0,\n    octreeMaxDimSize: 0,\n    buildCubicOctree: false,\n    maxPointsPerLeaf: 128,\n    insertTolerance2: 0.000001,\n    locatorPoints: null,\n    octreeRootNode: null,\n    numberOfNodes: 0\n  }, initialValues);\n} // ----------------------------------------------------------------------------\n\n\nfunction extend(publicAPI, model) {\n  var initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  vtkAbstractPointLocator.extend(publicAPI, model, defaultValues(initialValues)); // Make this a VTK object\n\n  macro.obj(publicAPI, model);\n  macro.setGet(publicAPI, model, ['fudgeFactor', 'octreeMaxDimSize', 'buildCubicOctree', 'maxPointsPerLeaf', 'insertTolerance2', 'locatorPoints', 'octreeRootNode', 'numberOfNodes']); // Object specific methods\n\n  vtkIncrementalOctreePointLocator(publicAPI, model);\n} // ----------------------------------------------------------------------------\n\nvar newInstance = macro.newInstance(extend, 'vtkIncrementalOctreePointLocator'); // ----------------------------------------------------------------------------\n\nvar vtkIncrementalOctreePointLocator$1 = {\n  newInstance: newInstance,\n  extend: extend\n};\n\nexport { vtkIncrementalOctreePointLocator$1 as default, extend, newInstance };\n","var CCS_POLYGON_TOLERANCE = 1e-5;\nvar Constants = {\n  CCS_POLYGON_TOLERANCE: CCS_POLYGON_TOLERANCE\n};\n\nexport { CCS_POLYGON_TOLERANCE, Constants as default };\n","import _toConsumableArray from '@babel/runtime/helpers/toConsumableArray';\nimport macro from '../../../macros.js';\nimport vtkPoints from '../../../Common/Core/Points.js';\nimport { s as subtract, j as cross, d as dot, n as norm, e as distance2BetweenPoints, k as add, l as normalize } from '../../../Common/Core/Math/index.js';\nimport vtkLine from '../../../Common/DataModel/Line.js';\nimport vtkPolygon from '../../../Common/DataModel/Polygon.js';\nimport vtkIncrementalOctreePointLocator from '../../../Common/DataModel/IncrementalOctreePointLocator.js';\nimport { VtkDataTypes } from '../../../Common/Core/DataArray/Constants.js';\nimport { CCS_POLYGON_TOLERANCE } from './Constants.js';\nimport { PolygonWithPointIntersectionState } from '../../../Common/DataModel/Polygon/Constants.js';\n\nvar vtkErrorMacro = macro.vtkErrorMacro;\n/**\n * Reverse the elements between the indices firstIdx and lastIdx of the given array arr.\n *\n * @param {Array|TypedArray} arr\n * @param {Number} firstIdx\n * @param {Number} lastIdx\n */\n\nfunction reverseElements(arr) {\n  var firstIdx = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n  var lastIdx = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n  var first = firstIdx !== null && firstIdx !== void 0 ? firstIdx : 0;\n  var last = lastIdx !== null && lastIdx !== void 0 ? lastIdx : arr.length - 1;\n  var mid = first + Math.floor((last - first) / 2);\n\n  for (var i = first; i <= mid; ++i) {\n    var _ref = [arr[last - (i - first)], arr[i]];\n    arr[i] = _ref[0];\n    arr[last - (i - first)] = _ref[1];\n  }\n} // ---------------------------------------------------\n\n/**\n * Compute the quality of a triangle.\n *\n * @param {Vector3} p0\n * @param {Vector3} p1\n * @param {Vector3} p2\n * @param {Vector3} normal\n * @returns {Number}\n */\n\nfunction vtkCCSTriangleQuality(p0, p1, p2, normal) {\n  var u = [];\n  var v = [];\n  var w = [];\n  subtract(p1, p0, u);\n  subtract(p2, p1, v);\n  subtract(p0, p2, w);\n  var area2 = (u[1] * v[2] - u[2] * v[1]) * normal[0] + (u[2] * v[0] - u[0] * v[2]) * normal[1] + (u[0] * v[1] - u[1] * v[0]) * normal[2];\n  var perim = Math.sqrt(u[0] * u[0] + u[1] * u[1] + u[2] * u[2]) + Math.sqrt(v[0] * v[0] + v[1] * v[1] + v[2] * v[2]) + Math.sqrt(w[0] * w[0] + w[1] * w[1] + w[2] * w[2]);\n  perim *= perim; // square the perimeter\n\n  perim = perim !== 0 ? perim : 1.0; // use a normalization factor so equilateral quality is 1.0\n\n  return area2 / perim * 10.392304845413264;\n} // ---------------------------------------------------\n\n/**\n * Insert a triangle, and subdivide that triangle if one of\n * its edges originally had more than two points before\n * vtkCCSFindTrueEdges was called. Is called by vtkCCSTriangulate.\n *\n * @param {vtkCellArray} polys\n * @param {Array|TypedArray} poly\n * @param {Vector3} trids\n * @param {Array|TypedArray} polyEdges\n * @param {Array|TypedArray} originalEdges\n */\n\nfunction vtkCCSInsertTriangle(polys, poly, trids, polyEdges, originalEdges) {\n  var nextVert = [1, 2, 0]; // To store how many of originalEdges match\n\n  var edgeCount = 0;\n  var edgeLocs = [-1, -1, -1]; // Check for original edge matches\n\n  for (var vert = 0; vert < 3; vert++) {\n    var currId = trids[vert];\n    var edgeLoc = polyEdges[currId];\n\n    if (edgeLoc >= 0) {\n      var nextId = currId + 1;\n\n      if (nextId === poly.length) {\n        nextId = 0;\n      } // Is the triangle edge a polygon edge?\n\n\n      if (nextId === trids[nextVert[vert]]) {\n        edgeLocs[vert] = edgeLoc;\n        edgeCount++;\n      }\n    }\n  }\n\n  if (edgeCount === 0) {\n    // No special edge handling, so just do one triangle\n    polys.insertNextCell([poly[trids[0]], poly[trids[1]], poly[trids[2]]]);\n  } else {\n    // Make triangle fans for edges with extra points\n    var edgePts = [[poly[trids[0]], poly[trids[1]]], [poly[trids[1]], poly[trids[2]]], [poly[trids[2]], poly[trids[0]]]]; // Find out which edge has the most extra points\n\n    var maxPoints = 0;\n    var currSide = 0;\n\n    for (var i = 0; i < 3; i++) {\n      if (edgeLocs[i] >= 0) {\n        var _edgeLoc = edgeLocs[i];\n        var npts = originalEdges[_edgeLoc];\n        var pts = originalEdges.slice(_edgeLoc + 1, _edgeLoc + 1 + npts);\n\n        if (!(edgePts[i][0] === pts[0] || edgePts[i][1] === pts[npts - 1])) {\n          vtkErrorMacro('assertion error in vtkCCSInsertTriangle');\n        }\n\n        if (npts > maxPoints) {\n          maxPoints = npts;\n          currSide = i;\n        }\n\n        edgePts[i] = pts;\n      }\n    } // Find the edges before/after the edge with most points\n\n\n    var prevSide = (currSide + 2) % 3;\n    var nextSide = (currSide + 1) % 3; // If other edges have only 2 points, nothing to do with them\n\n    var prevNeeded = edgePts[prevSide].length > 2;\n    var nextNeeded = edgePts[nextSide].length > 2; // The tail is the common point in the triangle fan\n\n    var tailPtIds = [];\n    tailPtIds[prevSide] = edgePts[currSide][1];\n    tailPtIds[currSide] = edgePts[prevSide][0];\n    tailPtIds[nextSide] = edgePts[currSide][edgePts[currSide].length - 2]; // Go through the sides and make the fans\n\n    for (var side = 0; side < 3; side++) {\n      if ((side !== prevSide || prevNeeded) && (side !== nextSide || nextNeeded)) {\n        var m = 0;\n        var n = edgePts[side].length - 1;\n\n        if (side === currSide) {\n          m += prevNeeded;\n          n -= nextNeeded;\n        }\n\n        for (var k = m; k < n; k++) {\n          polys.insertNextCell([edgePts[side][k], edgePts[side][k + 1], tailPtIds[side]]);\n        }\n      }\n    }\n  }\n} // ---------------------------------------------------\n\n/**\n * Triangulate a polygon that has been simplified by FindTrueEdges.\n * This will re-insert the original edges.  The output triangles are\n * appended to \"polys\" and, for each stored triangle, \"color\" will\n * be added to \"scalars\".  The final two arguments (polygon and\n * triangles) are only for temporary storage.\n * The return value is true if triangulation was successful.\n *\n * @param {Array} poly\n * @param {vtkPoints} points\n * @param {Array} polyEdges\n * @param {Array} originalEdges\n * @param {vtkCellArray} polys\n * @param {Vector3} normal\n * @returns {boolean}\n */\n\nfunction vtkCCSTriangulate(poly, points, polyEdges, originalEdges, polys, normal) {\n  var n = poly.length; // If the poly is a line, then skip it\n\n  if (n < 3) {\n    return true;\n  } // If the poly is a triangle, then pass it\n\n\n  if (n === 3) {\n    var trids = [0, 1, 2];\n    vtkCCSInsertTriangle(polys, poly, trids, polyEdges, originalEdges);\n    return true;\n  } // If the poly has 4 or more points, triangulate it\n\n\n  var triangulationFailure = false;\n  var ppoint = [];\n  var point = [];\n  var npoint = [];\n  var i = 0;\n  var j = 0;\n  var k = 0;\n  var verts = [];\n  verts.length = n;\n\n  for (i = 0; i < n; i++) {\n    verts[i] = [i, 0];\n  } // compute the triangle quality for each vert\n\n\n  k = n - 2;\n  points.getPoint(poly[verts[k][0]], point);\n  i = n - 1;\n  points.getPoint(poly[verts[i][0]], npoint);\n  var concave = 0;\n  var maxq = 0;\n  var maxi = 0;\n\n  for (j = 0; j < n; j++) {\n    var _ref2 = [point, npoint, ppoint];\n    ppoint = _ref2[0];\n    point = _ref2[1];\n    npoint = _ref2[2];\n    points.getPoint(poly[verts[j][0]], npoint);\n    var q = vtkCCSTriangleQuality(ppoint, point, npoint, normal);\n\n    if (q > maxq) {\n      maxi = i;\n      maxq = q;\n    }\n\n    concave += q < 0;\n    verts[i][1] = q;\n    i = j;\n  }\n\n  var foundEar; // perform the ear-cut triangulation\n\n  for (;;) {\n    // if no potential ears were found, then fail\n    if (maxq <= Number.MIN_VALUE) {\n      triangulationFailure = true;\n      break;\n    }\n\n    i = maxi;\n    j = i + 1 !== n ? i + 1 : 0;\n    k = i !== 0 ? i - 1 : n - 1;\n\n    if (verts[i][1] > 0) {\n      foundEar = true;\n      points.getPoint(poly[verts[j][0]], npoint);\n      points.getPoint(poly[verts[k][0]], ppoint); // only do ear check if there are concave vertices\n\n      if (concave) {\n        // get the normal of the split plane\n        var v = [];\n        var u = [];\n        subtract(npoint, ppoint, v);\n        cross(v, normal, u);\n        var d = dot(ppoint, u);\n        var jj = j + 1 !== n ? j + 1 : 0;\n        var x = [];\n        points.getPoint(poly[verts[jj][0]], x);\n        var side = dot(x, u) < d;\n        var foundNegative = side; // check for crossings of the split plane\n\n        jj = jj + 1 !== n ? jj + 1 : 0;\n        var y = [];\n        var s = [];\n        var t = [];\n\n        for (; foundEar && jj !== k; jj = jj + 1 !== n ? jj + 1 : 0) {\n          var _ref3 = [y, x];\n          x = _ref3[0];\n          y = _ref3[1];\n          points.getPoint(poly[verts[jj][0]], x);\n          var sside = dot(x, u) < d; // XOR\n\n          if (side ? !sside : sside) {\n            side = !side;\n            foundNegative = true;\n            foundEar = vtkLine.intersection(ppoint, npoint, x, y, s, t) === vtkLine.IntersectionState.NO_INTERSECTION;\n          }\n        }\n\n        foundEar && (foundEar = foundNegative);\n      }\n\n      if (!foundEar) {\n        // don't try again until it is split\n        verts[i][1] = Number.MIN_VALUE;\n      } else {\n        // create a triangle from vertex and neighbors\n        var _trids = [verts[i][0], verts[j][0], verts[k][0]];\n        vtkCCSInsertTriangle(polys, poly, _trids, polyEdges, originalEdges); // remove the vertex i\n\n        verts.splice(i, 1);\n        k -= i === 0;\n        j -= j !== 0; // break if this was final triangle\n\n        if (--n < 3) {\n          break;\n        } // re-compute quality of previous point\n\n\n        var kk = k !== 0 ? k - 1 : n - 1;\n        points.getPoint(poly[verts[kk][0]], point);\n        var kq = vtkCCSTriangleQuality(point, ppoint, npoint, normal);\n        concave -= verts[k][1] < 0 && kq >= 0;\n        verts[k][1] = kq; // re-compute quality of next point\n\n        var _jj = j + 1 !== n ? j + 1 : 0;\n\n        points.getPoint(poly[verts[_jj][0]], point);\n        var jq = vtkCCSTriangleQuality(ppoint, npoint, point, normal);\n        concave -= verts[j][1] < 0 && jq >= 0;\n        verts[j][1] = jq;\n      }\n    } // find the highest-quality ear candidate\n\n\n    maxi = 0;\n    maxq = verts[0][1];\n\n    for (i = 1; i < n; i++) {\n      var _q = verts[i][1];\n\n      if (_q > maxq) {\n        maxi = i;\n        maxq = _q;\n      }\n    }\n  }\n\n  return !triangulationFailure;\n} // ---------------------------------------------------\n\n/**\n * Create polygons from line segments.\n *\n * @param {vtkPolyData} polyData\n * @param {Number} firstLine\n * @param {Number} endLine\n * @param {Boolean} oriented\n * @param {Array} newPolys\n * @param {Array} incompletePolys\n */\n\nfunction vtkCCSMakePolysFromLines(polyData, firstLine, endLine, oriented, newPolys, incompletePolys) {\n  var npts = 0;\n  var pts = []; // Bitfield for marking lines as used\n\n  var usedLines = new Uint8Array(endLine - firstLine); // defaults to 0\n  // Require cell links to get lines from pointIds\n\n  polyData.buildLinks(polyData.getPoints().getNumberOfPoints());\n  var numNewPolys = 0;\n  var remainingLines = endLine - firstLine;\n\n  while (remainingLines > 0) {\n    // Create a new poly\n    var polyId = numNewPolys++;\n    var poly = [];\n    newPolys.push(poly);\n    var lineId = 0;\n    var completePoly = false; // start the poly\n\n    for (lineId = firstLine; lineId < endLine; lineId++) {\n      if (!usedLines[lineId - firstLine]) {\n        pts = polyData.getCellPoints(lineId).cellPointIds;\n        npts = pts.length;\n        var n = npts;\n\n        if (npts > 2 && pts[0] === pts[npts - 1]) {\n          n = npts - 1;\n          completePoly = true;\n        }\n\n        poly.length = n;\n\n        for (var i = 0; i < n; i++) {\n          poly[i] = pts[i];\n        }\n\n        break;\n      }\n    }\n\n    usedLines[lineId - firstLine] = 1;\n    remainingLines--;\n    var noLinesMatch = remainingLines === 0 && !completePoly;\n\n    while (!completePoly && !noLinesMatch && remainingLines > 0) {\n      // This is cleared if a match is found\n      noLinesMatch = true; // Number of points in the poly\n\n      var npoly = poly.length;\n      var lineEndPts = [];\n      var endPts = [poly[npoly - 1], poly[0]]; // For both open ends of the polygon\n\n      for (var endIdx = 0; endIdx < 2; endIdx++) {\n        var matches = [];\n        var cells = polyData.getPointCells(endPts[endIdx]); // Go through all lines that contain this endpoint\n\n        for (var icell = 0; icell < cells.length; icell++) {\n          lineId = cells[icell];\n\n          if (lineId >= firstLine && lineId < endLine && !usedLines[lineId - firstLine]) {\n            pts = polyData.getCellPoints(lineId).cellPointIds;\n            npts = pts.length;\n            lineEndPts[0] = pts[0];\n            lineEndPts[1] = pts[npts - 1]; // Check that poly end matches line end\n\n            if (endPts[endIdx] === lineEndPts[endIdx] || !oriented && endPts[endIdx] === lineEndPts[1 - endIdx]) {\n              matches.push(lineId);\n            }\n          }\n        }\n\n        if (matches.length > 0) {\n          // Multiple matches mean we need to decide which path to take\n          if (matches.length > 1) {\n            // Remove double-backs\n            var k = matches.length;\n\n            do {\n              lineId = matches[--k];\n              pts = polyData.getCellPoints(lineId).cellPointIds;\n              npts = pts.length;\n              lineEndPts[0] = pts[0];\n              lineEndPts[1] = pts[npts - 1]; // check if line is reversed\n\n              var r = endPts[endIdx] !== lineEndPts[endIdx];\n\n              if (!r && (endIdx === 0 && poly[npoly - 2] === pts[1] || endIdx === 1 && poly[1] === pts[npts - 2]) || r && (endIdx === 0 && poly[npoly - 2] === pts[npts - 2] || endIdx === 1 && poly[1] === pts[1])) {\n                matches.splice(k, 1);\n              }\n            } while (k > 0 && matches.length > 1); // If there are multiple matches due to intersections,\n            // they should be dealt with here.\n\n          }\n\n          lineId = matches[0];\n          pts = polyData.getCellPoints(lineId).cellPointIds;\n          npts = pts.length;\n          lineEndPts[0] = pts[0];\n          lineEndPts[1] = pts[npts - 1]; // Do both ends match?\n\n          if (endPts[endIdx] === lineEndPts[endIdx]) {\n            completePoly = endPts[1 - endIdx] === lineEndPts[1 - endIdx];\n          } else {\n            completePoly = endPts[1 - endIdx] === lineEndPts[endIdx];\n          }\n\n          if (endIdx === 0) {\n            for (var _i = 1; _i < npts - (completePoly ? 1 : 0); _i++) {\n              poly.push(pts[_i]);\n            }\n          } else {\n            for (var _i2 = completePoly ? 1 : 0; _i2 < npts - 1; _i2++) {\n              poly.unshift(pts[_i2]);\n            }\n          }\n\n          if (endPts[endIdx] !== lineEndPts[endIdx]) {\n            // reverse the ids in the added line\n            var pit = poly.length;\n            var ptsIt = completePoly ? 1 : 0;\n            var ptsEnd = npts - 1;\n\n            if (endIdx === 1) {\n              pit = npts - 1 - (completePoly ? 1 : 0);\n              ptsIt = pts + 1;\n              ptsEnd = pts + npts - (completePoly ? 1 : 0);\n            }\n\n            while (ptsIt !== ptsEnd) {\n              poly[--pit] = poly[ptsIt++];\n            }\n          }\n\n          usedLines[lineId - firstLine] = 1;\n          remainingLines--;\n          noLinesMatch = false;\n        }\n      }\n    } // Check for incomplete polygons\n\n\n    if (noLinesMatch) {\n      incompletePolys.push(polyId);\n    }\n  }\n} // ---------------------------------------------------\n\n/**\n * Join polys that have loose ends, as indicated by incompletePolys.\n * Any polys created will have a normal opposite to the supplied normal,\n * and any new edges that are created will be on the hull of the point set.\n * Shorter edges will be preferred over long edges.\n *\n * @param {Array[]} polys\n * @param {Array} incompletePolys\n * @param {vtkPoints} points\n * @param {Vector3} normal\n */\n\nfunction vtkCCSJoinLooseEnds(polys, incompletePolys, points, normal) {\n  // Relative tolerance for checking whether an edge is on the hull\n  var tol = CCS_POLYGON_TOLERANCE; // A list of polys to remove when everything is done\n\n  var removePolys = [];\n  var p1 = [];\n  var p2 = [];\n  var poly1;\n  var poly2;\n  var pt1;\n  var pt2;\n  var dMin;\n  var iMin;\n  var v;\n  var d;\n  var n = incompletePolys.length;\n\n  while (n !== 0) {\n    poly1 = polys[incompletePolys[n - 1]];\n    pt1 = poly1[poly1.length - 1];\n    points.getPoint(pt1, p1);\n    dMin = Number.MAX_VALUE;\n    iMin = 0;\n\n    for (var _i3 = 0; _i3 < n; _i3++) {\n      poly2 = polys[incompletePolys[_i3]];\n      pt2 = poly2[0];\n      points.getPoint(pt2, p2); // The next few steps verify that edge [p1, p2] is on the hull\n\n      v = [p2[0] - p1[0], p2[1] - p1[1], p2[2] - p1[2]];\n      d = norm(v);\n\n      if (d !== 0) {\n        v[0] /= d;\n        v[1] /= d;\n        v[2] /= d;\n      } // Compute the midpoint of the edge\n\n\n      var pm = [0.5 * (p1[0] + p2[0]), 0.5 * (p1[1] + p2[1]), 0.5 * (p1[2] + p2[2])]; // Create a plane equation\n\n      var pc = [];\n      cross(normal, v, pc);\n      pc[3] = -dot(pc, pm); // Check that all points are inside the plane.  If they aren't, then\n      // the edge is not on the hull of the pointset.\n\n      var badPoint = false;\n      var m = polys.length;\n      var p = [];\n\n      for (var j = 0; j < m && !badPoint; j++) {\n        var poly = polys[j];\n        var npts = poly.length;\n\n        for (var k = 0; k < npts; k++) {\n          var ptId = poly[k];\n\n          if (ptId !== pt1 && ptId !== pt2) {\n            points.getPoint(ptId, p);\n            var val = p[0] * pc[0] + p[1] * pc[1] + p[2] * pc[2] + pc[3];\n            var r2 = distance2BetweenPoints(p, pm); // Check distance from plane against the tolerance\n\n            if (val < 0 && val * val > tol * tol * r2) {\n              badPoint = true;\n              break;\n            }\n          }\n        } // If no bad points, then this edge is a candidate\n\n\n        if (!badPoint && d < dMin) {\n          dMin = d;\n          iMin = _i3;\n        }\n      }\n    } // If a match was found, append the polys\n\n\n    if (dMin < Number.MAX_VALUE) {\n      // Did the poly match with itself?\n      if (iMin === n - 1) {\n        // Mark the poly as closed\n        incompletePolys.pop();\n      } else {\n        var _poly;\n\n        var id2 = incompletePolys[iMin]; // Combine the polys\n        // for (let i = 1; i < polys[id2].length; i++) {\n        //   poly1.push(polys[id2][i]);\n        // }\n\n        (_poly = poly1).push.apply(_poly, _toConsumableArray(polys[id2])); // Erase the second poly\n\n\n        removePolys.push(id2);\n        incompletePolys.splice(iMin, 1);\n      }\n    } else {\n      // If no match, erase this poly from consideration\n      removePolys.push(incompletePolys[n - 1]);\n      incompletePolys.pop();\n    }\n\n    n = incompletePolys.length;\n  } // Remove polys that couldn't be completed\n\n\n  removePolys.sort(function (a, b) {\n    return a - b;\n  });\n  var i = removePolys.length;\n\n  while (i > 0) {\n    // Remove items in reverse order\n    polys.splice(removePolys[--i], 1);\n  } // Clear the incompletePolys vector, it's indices are no longer valid\n\n\n  incompletePolys.length = 0;\n} // ---------------------------------------------------\n\n/**\n * Given three vectors p.p1, p.p2, and p.p3, this routine\n * checks to see if progressing from p1 to p2 to p3 is a clockwise\n * or counterclockwise progression with respect to the normal.\n * The return value is -1 for clockwise, +1 for counterclockwise,\n * and 0 if any two of the vectors are coincident.\n *\n * @param {Vector3} p\n * @param {Vector3} p1\n * @param {Vector3} p2\n * @param {Vector3} p3\n * @param {Vector3} normal\n * @returns {Number}\n */\n\nfunction vtkCCSVectorProgression(p, p1, p2, p3, normal) {\n  var v1 = [p1[0] - p[0], p1[1] - p[1], p1[2] - p[2]];\n  var v2 = [p2[0] - p[0], p2[1] - p[1], p2[2] - p[2]];\n  var v3 = [p3[0] - p[0], p3[1] - p[1], p3[2] - p[2]];\n  var w1 = [];\n  var w2 = [];\n  cross(v2, v1, w1);\n  cross(v2, v3, w2);\n  var s1 = dot(w1, normal);\n  var s2 = dot(w2, normal);\n\n  if (s1 !== 0 && s2 !== 0) {\n    var sb1 = s1 < 0;\n    var sb2 = s2 < 0; // if sines have different signs\n    // XOR\n\n    if (sb1 ? !sb2 : sb2) {\n      // return -1 if s2 is -ve\n      return 1 - 2 * sb2;\n    }\n\n    var c1 = dot(v2, v1);\n    var l1 = norm(v1);\n    var c2 = dot(v2, v3);\n    var l2 = norm(v3); // ck is the difference of the cosines, flipped in sign if sines are +ve\n\n    var ck = (c2 * l2 - c1 * l1) * (1 - sb1 * 2);\n\n    if (ck !== 0) {\n      // return the sign of ck\n      return 1 - 2 * (ck < 0);\n    }\n  }\n\n  return 0;\n} // ---------------------------------------------------\n\n/**\n * Check for self-intersection. Split the figure-eights.\n * This assumes that all intersections occur at existing\n * vertices, i.e. no new vertices will be created. Returns\n * the number of splits made.\n *\n * @param {Array[]} polys\n * @param {vtkPoints} points\n * @param {Array} polyGroups\n * @param {Array} polyEdges\n * @param {Vector3} normal\n * @param {Boolean} oriented\n */\n\nfunction vtkCCSSplitAtPinchPoints(polys, points, polyGroups, polyEdges, normal, oriented) {\n  var tryPoints = vtkPoints.newInstance({\n    dataType: VtkDataTypes.DOUBLE,\n    empty: true\n  });\n  var locator = vtkIncrementalOctreePointLocator.newInstance();\n  var splitCount = 0;\n  var poly;\n  var n;\n  var bounds;\n  var tol;\n\n  for (var i = 0; i < polys.length; i++) {\n    poly = polys[i];\n    n = poly.length;\n    bounds = [];\n    tol = CCS_POLYGON_TOLERANCE * Math.sqrt(vtkPolygon.getBounds(poly, points, bounds));\n\n    if (tol === 0) {\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n\n    tryPoints.initialize();\n    locator.setTolerance(tol);\n    locator.initPointInsertion(tryPoints, bounds);\n    var foundMatch = false;\n    var idx1 = 0;\n    var idx2 = 0;\n    var unique = 0;\n    var point = [];\n    var p1 = [];\n    var p2 = [];\n    var p3 = [];\n\n    for (idx2 = 0; idx2 < n; idx2++) {\n      points.getPoint(poly[idx2], point);\n\n      var _locator$insertUnique = locator.insertUniquePoint(point, 0),\n          success = _locator$insertUnique.success,\n          pointIdx = _locator$insertUnique.pointIdx;\n\n      if (!success) {\n        // Need vertIdx to match poly indices, so force point insertion\n        locator.insertNextPoint(point); // Do the points have different pointIds?\n\n        idx1 = pointIdx;\n        unique = poly[idx2] !== poly[idx1];\n\n        if (idx2 > idx1 + 2 - unique && n + idx1 > idx2 + 2 - unique) {\n          if (oriented) {\n            // Make sure that splitting this poly won't create a hole poly\n            var prevIdx = n + idx1 - 1;\n            var midIdx = idx1 + 1;\n            var nextIdx = idx2 + 1;\n\n            if (prevIdx >= n) {\n              prevIdx -= n;\n            }\n\n            if (midIdx >= n) {\n              midIdx -= n;\n            }\n\n            if (nextIdx >= n) {\n              nextIdx -= n;\n            }\n\n            points.getPoint(poly[prevIdx], p1);\n            points.getPoint(poly[midIdx], p2);\n            points.getPoint(poly[nextIdx], p3);\n\n            if (vtkCCSVectorProgression(point, p1, p2, p3, normal) > 0) {\n              foundMatch = true;\n              break;\n            }\n          } else {\n            foundMatch = true;\n            break;\n          }\n        }\n      }\n    }\n\n    if (foundMatch) {\n      splitCount++; // Split off a new poly\n\n      var m = idx2 - idx1;\n      var oldPoly = polys[i];\n      var oldEdges = polyEdges[i];\n      var newPoly1 = oldPoly.slice(idx1, idx1 + m + unique);\n      var newEdges1 = oldEdges.slice(idx1, idx1 + m + unique);\n      var newPoly2 = new Array(n - m + unique);\n      var newEdges2 = new Array(n - m + unique);\n\n      if (unique) {\n        newEdges1[m] = -1;\n      } // The poly that is split off, which might have more intersections\n\n\n      for (var j = 0; j < idx1 + unique; j++) {\n        newPoly2[j] = oldPoly[j];\n        newEdges2[j] = oldEdges[j];\n      }\n\n      if (unique) {\n        newEdges2[idx1] = -1;\n      }\n\n      for (var k = idx2; k < n; k++) {\n        newPoly2[k - m + unique] = oldPoly[k];\n        newEdges2[k - m + unique] = oldEdges[k];\n      }\n\n      polys[i] = newPoly1;\n      polyEdges[i] = newEdges1;\n      polys.push(newPoly2);\n      polyEdges.push(newEdges2); // Unless polygroup was clear (because poly was reversed),\n      // make a group with one entry for the new poly\n\n      polyGroups.length = polys.length;\n\n      if (polyGroups[i].length > 0) {\n        polyGroups[polys.length - 1].push(polys.length - 1);\n      }\n    }\n  }\n\n  return splitCount;\n} // ---------------------------------------------------\n\n/**\n * The polygons might have a lot of extra points, i.e. points\n * in the middle of the edges.  Remove those points, but keep\n * the original edges as polylines in the originalEdges array.\n * Only original edges with more than two points will be kept.\n *\n * @param {Array[]} polys\n * @param {vtkPoints} points\n * @param {Array} polyEdges\n * @param {Array} originalEdges\n */\n\nfunction vtkCCSFindTrueEdges(polys, points, polyEdges, originalEdges) {\n  // Tolerance^2 for angle to see if line segments are parallel\n  var atol2 = CCS_POLYGON_TOLERANCE * CCS_POLYGON_TOLERANCE;\n  var p0 = [];\n  var p1 = [];\n  var p2 = [];\n  var v1 = [];\n  var v2 = [];\n  var l1;\n  var l2;\n\n  for (var polyId = 0; polyId < polys.length; polyId++) {\n    var oldPoly = polys[polyId];\n    var n = oldPoly.length;\n    var newEdges = [];\n    polyEdges.push(newEdges); // Only useful if poly has more than three sides\n\n    if (n < 4) {\n      newEdges[0] = -1;\n      newEdges[1] = -1;\n      newEdges[2] = -1; // eslint-disable-next-line no-continue\n\n      continue;\n    } // While we remove points, m keeps track of how many points are left\n\n\n    var m = n; // Compute bounds for tolerance\n\n    var bounds = [];\n    var tol2 = vtkPolygon.getBounds(oldPoly, points, bounds) * atol2; // The new poly\n\n    var newPoly = [];\n    var cornerPointId = 0;\n    var oldOriginalId = -1; // Keep the partial edge from before the first corner is found\n\n    var partialEdge = [];\n    var cellCount = 0;\n    points.getPoint(oldPoly[n - 1], p0);\n    points.getPoint(oldPoly[0], p1);\n    subtract(p1, p0, v1);\n    l1 = dot(v1, v1);\n\n    for (var j = 0; j < n; j++) {\n      var k = j + 1;\n\n      if (k >= n) {\n        k -= n;\n      }\n\n      points.getPoint(oldPoly[k], p2);\n      subtract(p2, p1, v2);\n      l2 = dot(v2, v2); // Dot product is |v1||v2|cos(theta)\n\n      var c = dot(v1, v2); // sin^2(theta) = (1 - cos^2(theta))\n      // and   c*c = l1*l2*cos^2(theta)\n\n      var s2 = l1 * l2 - c * c; // In the small angle approximation, sin(theta) == theta, so\n      // s2/(l1*l2) is the angle that we want to check, but it's not\n      // a valid check if l1 or l2 is very close to zero.\n\n      var pointId = oldPoly[j]; // Keep the point if:\n      // 1) removing it would create a 2-point poly OR\n      // 2) it's more than \"tol\" distance from the prev point AND\n      // 3) the angle is greater than atol:\n\n      if (m <= 3 || l1 > tol2 && (c < 0 || l1 < tol2 || l2 < tol2 || s2 > l1 * l2 * atol2)) {\n        // Complete the previous edge only if the final point count\n        // will be greater than two\n        if (cellCount > 1) {\n          if (pointId !== oldOriginalId) {\n            originalEdges.push(pointId);\n            cellCount++;\n          } // Update the number of segments in the edge\n\n\n          var countLocation = originalEdges.length - cellCount - 1;\n          originalEdges[countLocation] = cellCount;\n          newEdges.push(countLocation);\n        } else if (cellCount === 0) {\n          partialEdge.push(pointId);\n        } else {\n          newEdges.push(-1);\n        }\n\n        newPoly.push(pointId); // Start a new edge with cornerPointId as a \"virtual\" point\n\n        cornerPointId = pointId;\n        oldOriginalId = pointId;\n        cellCount = 1; // Rotate to the next point\n\n        p0[0] = p2[0];\n        p0[1] = p2[1];\n        p0[2] = p2[2];\n        p1[0] = p2[0];\n        p1[1] = p2[1];\n        p1[2] = p2[2];\n        v1[0] = v2[0];\n        v1[1] = v2[1];\n        v1[2] = v2[2];\n        l1 = l2;\n      } else {\n        if (cellCount > 0 && pointId !== oldOriginalId) {\n          // First check to see if we have to add cornerPointId\n          if (cellCount === 1) {\n            originalEdges.push(1); // new edge\n\n            originalEdges.push(cornerPointId);\n          } // Then add the new point\n\n\n          originalEdges.push(pointId);\n          oldOriginalId = pointId;\n          cellCount++;\n        } else {\n          // No corner yet, so save the point\n          partialEdge.push(pointId);\n        } // Reduce the count\n\n\n        m--; // Join the previous two segments, since the point was removed\n\n        p1[0] = p2[0];\n        p1[1] = p2[1];\n        p1[2] = p2[2];\n        subtract(p2, p0, v1);\n        l1 = dot(v1, v1);\n      }\n    } // Add the partial edge to the end\n\n\n    for (var ii = 0; ii < partialEdge.length; ii++) {\n      var _pointId = partialEdge[ii];\n\n      if (_pointId !== oldOriginalId) {\n        if (cellCount === 1) {\n          originalEdges.push(1); // new edge\n\n          originalEdges.push(cornerPointId);\n        }\n\n        originalEdges.push(_pointId);\n        oldOriginalId = _pointId;\n        cellCount++;\n      }\n    } // Finalize\n\n\n    if (cellCount > 1) {\n      // Update the number of segments in the edge\n      var _countLocation = originalEdges.length - cellCount - 1;\n\n      originalEdges[_countLocation] = cellCount;\n      newEdges.push(_countLocation);\n    }\n\n    polys[polyId] = newPoly;\n  }\n} // ---------------------------------------------------\n\n/**\n * Reverse a cleaned-up polygon along with the info about\n * all of its original vertices.\n *\n * @param {Array} poly\n * @param {Array} edges\n * @param {Array} originalEdges\n */\n\nfunction vtkCCSReversePoly(poly, edges, originalEdges) {\n  reverseElements(poly, 1, poly.length - 1);\n  edges.reverse();\n\n  for (var i = 0; i < edges.length; i++) {\n    if (edges[i] >= 0) {\n      var firstPtsIdx = edges[i] + 1;\n      var npts = originalEdges[edges[i]];\n      reverseElements(originalEdges, firstPtsIdx, firstPtsIdx + npts - 1);\n    }\n  }\n} // ---------------------------------------------------\n\n/**\n * Check the sense of the polygon against the given normal. Returns\n * zero if the normal is zero.\n *\n * @param {Array} poly\n * @param {vtkPoints} points\n * @param {Vector3} normal\n */\n\nfunction vtkCCSCheckPolygonSense(poly, points, normal) {\n  // Compute the normal\n  var pnormal = [0.0, 0.0, 0.0];\n  var p0 = [];\n  var p1 = [];\n  var p2 = [];\n  var v1 = [];\n  var v2 = [];\n  var v = [];\n  points.getPoint(poly[0], p0);\n  points.getPoint(poly[1], p1);\n  subtract(p1, p0, v1);\n\n  for (var jj = 2; jj < poly.length; jj++) {\n    points.getPoint(poly[jj], p2);\n    subtract(p2, p0, v2);\n    cross(v1, v2, v);\n    add(pnormal, v, pnormal);\n    p1[0] = p2[0];\n    p1[1] = p2[1];\n    p1[2] = p2[2];\n    v1[0] = v2[0];\n    v1[1] = v2[1];\n    v1[2] = v2[2];\n  } // Check the normal\n\n\n  var d = dot(pnormal, normal);\n  return {\n    isNormalNotZero: d !== 0,\n    sense: d > 0\n  };\n} // ---------------------------------------------------\n\n/**\n * Check whether innerPoly is inside outerPoly.\n * The normal is needed to verify the polygon orientation.\n * The values of pp, bounds, and tol2 must be precomputed\n * by calling vtkCCSPrepareForPolyInPoly() on outerPoly.\n *\n * @param {Array} outerPoly\n * @param {Array} innerPoly\n * @param {vtkPoints} points\n * @param {Vector3} normal\n * @param {Float64Array} pp\n * @param {Bounds} bounds\n * @param {Number} tol2\n */\n\nfunction vtkCCSPolyInPoly(outerPoly, innerPoly, points, normal, pp, bounds, tol2) {\n  // Find a vertex of poly \"j\" that isn't on the edge of poly \"i\".\n  // This is necessary or the PointInPolygon might return \"true\"\n  // based only on roundoff error.\n  var n = outerPoly.length;\n  var m = innerPoly.length;\n  var p = [];\n  var q1 = [];\n  var q2 = [];\n\n  for (var jj = 0; jj < m; jj++) {\n    // Semi-randomize the point order\n    // eslint-disable-next-line no-bitwise\n    var kk = (jj >> 1) + (jj & 1) * (m + 1 >> 1);\n    points.getPoint(innerPoly[kk], p);\n    var intersectionState = vtkPolygon.pointInPolygon(p, pp, bounds, normal);\n\n    if (intersectionState === PolygonWithPointIntersectionState.FAILURE) {\n      vtkErrorMacro('Error finding point in polygon in vtkCCSPolyInPoly');\n    }\n\n    if (intersectionState !== PolygonWithPointIntersectionState.OUTSIDE) {\n      var pointOnEdge = 0;\n      points.getPoint(outerPoly[n - 1], q1);\n\n      for (var ii = 0; ii < n; ii++) {\n        points.getPoint(outerPoly[ii], q2); // This method returns distance squared\n\n        var _vtkLine$distanceToLi = vtkLine.distanceToLine(p, q1, q2),\n            distance = _vtkLine$distanceToLi.distance;\n\n        if (distance < tol2) {\n          pointOnEdge = 1;\n          break;\n        }\n\n        q1[0] = q2[0];\n        q1[1] = q2[1];\n        q1[2] = q2[2];\n      }\n\n      if (!pointOnEdge) {\n        // Good result, point is in polygon\n        return true;\n      }\n    }\n  } // No matches found\n\n\n  return false;\n} // ---------------------------------------------------\n\n/**\n * Precompute values needed for the PolyInPoly check.\n * The values that are returned are as follows:\n * pp: an array of the polygon vertices\n * bounds: the polygon bounds\n * tol2: a tolerance value based on the size of the polygon\n * (note: pp must be pre-allocated to the 3*outerPoly.length)\n *\n * @param {Array} outerPoly\n * @param {vtkPoints} points\n * @param {Float64Array} pp\n * @param {Bounds} bounds\n */\n\nfunction vtkCCSPrepareForPolyInPoly(outerPoly, points, pp, bounds) {\n  var n = outerPoly.length;\n\n  if (n === 0) {\n    return 0.0; // to avoid false positive warning about uninitialized value\n  } // Pull out the points\n\n\n  var point = [];\n  var j = 0;\n\n  for (var i = 0; i < n; i++) {\n    points.getPoint(outerPoly[i], point);\n    pp[j++] = point[0];\n    pp[j++] = point[1];\n    pp[j++] = point[2];\n  } // Find the bounding box and tolerance for the polygon\n\n\n  return vtkPolygon.getBounds(outerPoly, points, bounds) * (CCS_POLYGON_TOLERANCE * CCS_POLYGON_TOLERANCE);\n} // ---------------------------------------------------\n\n/**\n * Check for polygons within polygons. Group the polygons\n * if they are within each other. Reverse the sense of\n * the interior \"hole\" polygons. A hole within a hole\n * will be reversed twice and will become its own group.\n *\n * @param {Array} newPolys\n * @param {vtkPoints} points\n * @param {Array} polyGroups\n * @param {Array} polyEdges\n * @param {Array} originalEdges\n * @param {Vector3} normal\n * @param {Boolean} oriented\n */\n\nfunction vtkCCSMakeHoleyPolys(newPolys, points, polyGroups, polyEdges, originalEdges, normal, oriented) {\n  var numNewPolys = newPolys.length;\n\n  if (numNewPolys <= 1) {\n    return;\n  } // Use bit arrays to keep track of inner polys\n\n\n  var polyReversed = [];\n  var innerPolys = []; // GroupCount is an array only needed for unoriented polys\n\n  var groupCount;\n\n  if (!oriented) {\n    groupCount = new Int32Array(numNewPolys);\n  } // Find the maximum poly size\n\n\n  var nmax = 1;\n\n  for (var kk = 0; kk < numNewPolys; kk++) {\n    nmax = Math.max(nmax, newPolys[kk].length);\n  } // These are some values needed for poly-in-poly checks\n\n\n  var pp = new Float64Array(3 * nmax);\n  var bounds = [0.0, 0.0, 0.0, 0.0, 0.0, 0.0];\n  var tol2; // Go through all polys\n\n  for (var i = 0; i < numNewPolys; i++) {\n    var n = newPolys[i].length;\n\n    if (n < 3) {\n      // eslint-disable-next-line no-continue\n      continue;\n    } // Check if poly is reversed\n\n\n    var _vtkCCSCheckPolygonSe = vtkCCSCheckPolygonSense(newPolys[i], points, normal),\n        isNormalNotZero = _vtkCCSCheckPolygonSe.isNormalNotZero,\n        sense = _vtkCCSCheckPolygonSe.sense;\n\n    if (isNormalNotZero) {\n      polyReversed[i] = !sense;\n    } // Precompute some values needed for poly-in-poly checks\n\n\n    tol2 = vtkCCSPrepareForPolyInPoly(newPolys[i], points, pp, bounds); // Look for polygons inside of this one\n\n    for (var j = 0; j < numNewPolys; j++) {\n      if (j !== i && newPolys[j].length >= 3) {\n        // Make sure polygon i is not in polygon j\n        var pg = polyGroups[j];\n\n        if (!pg.includes(i)) {\n          if (vtkCCSPolyInPoly(newPolys[i], newPolys[j], points, normal, pp.subarray(3 * n), bounds, tol2)) {\n            // Add to group\n            polyGroups[i].push(j);\n\n            if (groupCount) {\n              groupCount[j] += 1;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  if (!oriented) {\n    // build a stack of polys that aren't inside other polys=\n    var outerPolyStack = [];\n\n    for (var ll = 0; ll < numNewPolys; ll++) {\n      if (groupCount[ll] === 0) {\n        outerPolyStack.push(ll);\n      }\n    }\n\n    var _j;\n\n    while (outerPolyStack.length > 0) {\n      _j = outerPolyStack.length - 1;\n      outerPolyStack.pop();\n\n      if (polyReversed[_j]) {\n        vtkCCSReversePoly(newPolys[_j], polyEdges[_j], originalEdges);\n        polyReversed[_j] = false;\n      }\n\n      if (polyGroups[_j].length > 1) {\n        // Convert the group into a bit array, to make manipulation easier\n        innerPolys.length = 0;\n\n        for (var k = 1; k < polyGroups[_j].length; k++) {\n          var jj = polyGroups[_j][k];\n\n          if (groupCount[jj] > 1) {\n            groupCount[jj] -= 2;\n\n            if (groupCount[jj] === 0) {\n              outerPolyStack.push(jj);\n            }\n          } else {\n            innerPolys[jj] = 1;\n            polyGroups[jj].length = 0;\n\n            if (!polyReversed[jj]) {\n              vtkCCSReversePoly(newPolys[jj], polyEdges[jj], originalEdges);\n              polyReversed[jj] = false;\n            }\n          }\n        } // Use the bit array to recreate the polyGroup\n\n\n        polyGroups[_j].length = 0;\n\n        polyGroups[_j].push(_j);\n\n        for (var _jj2 = 0; _jj2 < numNewPolys; _jj2++) {\n          if (innerPolys[_jj2]) {\n            polyGroups[_j].push(_jj2);\n          }\n        }\n      }\n    }\n  } else {\n    // oriented\n    for (var _j2 = 0; _j2 < numNewPolys; _j2++) {\n      // Remove the groups for reversed polys\n      if (polyReversed[_j2]) {\n        polyGroups[_j2].length = 0;\n      } // Polys inside the interior polys have their own groups, so remove\n      // them from this group\n      else if (polyGroups[_j2].length > 1) {\n        // Convert the group into a bit array, to make manipulation easier\n        innerPolys.length = 0;\n\n        for (var _k = 1; _k < polyGroups[_j2].length; _k++) {\n          innerPolys[polyGroups[_j2][_k]] = true;\n        } // Look for non-reversed polys inside this one\n\n\n        for (var _kk = 1; _kk < polyGroups[_j2].length; _kk++) {\n          // jj is the index of the inner poly\n          var _jj3 = polyGroups[_j2][_kk]; // If inner poly is not reversed then\n\n          if (!polyReversed[_jj3]) {\n            // Remove that poly and all polys inside of it from the group\n            for (var ii = 0; ii < polyGroups[_jj3].length; ii++) {\n              innerPolys[polyGroups[_jj3][ii]] = false;\n            }\n          }\n        } // Use the bit array to recreate the polyGroup\n\n\n        polyGroups[_j2].length = 0;\n\n        polyGroups[_j2].push(_j2);\n\n        for (var _jj4 = 0; _jj4 < numNewPolys; _jj4++) {\n          if (innerPolys[_jj4]) {\n            polyGroups[_j2].push(_jj4);\n          }\n        }\n      }\n    }\n  } // delete[] groupCount;\n\n} // ---------------------------------------------------\n\n/**\n * Check line segment with point Ids (i, j) to make sure that it\n * doesn't cut through the edges of any polys in the group.\n * Return value of zero means check failed and the cut is not\n * usable.\n *\n * @param {Array[]} polys\n * @param {vtkPoints} points\n * @param {Vector3} normal\n * @param {Array} polyGroup\n * @param {Number} outerPolyId\n * @param {Number} innerPolyId\n * @param {Number} outerIdx\n * @param {Number} innerIdx\n */\n\nfunction vtkCCSCheckCut(polys, points, normal, polyGroup, outerPolyId, innerPolyId, outerIdx, innerIdx) {\n  var ptId1 = polys[outerPolyId][outerIdx];\n  var ptId2 = polys[innerPolyId][innerIdx];\n  var tol = CCS_POLYGON_TOLERANCE;\n  var p1 = [];\n  var p2 = [];\n  points.getPoint(ptId1, p1);\n  points.getPoint(ptId2, p2);\n  var w = [];\n  subtract(p2, p1, w);\n  var l = normalize(w); // Cuts between coincident points are good\n\n  if (l === 0) {\n    return true;\n  } // Define a tolerance with units of distance squared\n\n\n  var tol2 = l * l * tol * tol; // Check the sense of the cut: it must be pointing \"in\" for both polys.\n\n  var polyId = outerPolyId;\n  var polyIdx = outerIdx;\n  var r = p1;\n  var r1 = [];\n  var r2 = p2;\n  var r3 = [];\n\n  for (var ii = 0; ii < 2; ii++) {\n    var poly = polys[polyId];\n    var n = poly.length;\n    var prevIdx = n - polyIdx - 1;\n    var nextIdx = polyIdx + 1;\n\n    if (prevIdx >= n) {\n      prevIdx -= n;\n    }\n\n    if (nextIdx >= n) {\n      nextIdx -= n;\n    }\n\n    points.getPoint(poly[prevIdx], r1);\n    points.getPoint(poly[nextIdx], r3);\n\n    if (vtkCCSVectorProgression(r, r1, r2, r3, normal) > 0) {\n      return false;\n    }\n\n    polyId = innerPolyId;\n    polyIdx = innerIdx;\n    r = p2;\n    r2 = p1;\n  } // Check for intersections of the cut with polygon edges.\n  // First, create a cut plane that divides space at the cut line.\n\n\n  var pc = [];\n  cross(normal, w, pc);\n  pc[3] = -dot(pc, p1);\n\n  for (var i = 0; i < polyGroup.length; i++) {\n    var _poly2 = polys[polyGroup[i]];\n    var _n = _poly2.length;\n    var q1 = [];\n    var q2 = [];\n    var qtId1 = _poly2[_n - 1];\n    points.getPoint(qtId1, q1);\n    var v1 = pc[0] * q1[0] + pc[1] * q1[1] + pc[2] * q1[2] + pc[3];\n    var c1 = v1 > 0;\n\n    for (var j = 0; j < _n; j++) {\n      var qtId2 = _poly2[j];\n      points.getPoint(qtId2, q2);\n      var v2 = pc[0] * q2[0] + pc[1] * q2[1] + pc[2] * q2[2] + pc[3];\n      var c2 = v2 > 0; // If lines share an endpoint, they can't intersect,\n      // so don't bother with the check.\n\n      if (ptId1 !== qtId1 && ptId1 !== qtId2 && ptId2 !== qtId1 && ptId2 !== qtId2) {\n        // Check for intersection\n        if ((c1 ? !c2 : c2) || v1 * v1 < tol2 || v2 * v2 < tol2) {\n          subtract(q2, q1, w);\n\n          if (dot(w, w) > 0) {\n            var qc = [];\n            cross(w, normal, qc);\n            qc[3] = -dot(qc, q1);\n            var u1 = qc[0] * p1[0] + qc[1] * p1[1] + qc[2] * p1[2] + qc[3];\n            var u2 = qc[0] * p2[0] + qc[1] * p2[1] + qc[2] * p2[2] + qc[3];\n            var d1 = u1 > 0;\n            var d2 = u2 > 0;\n\n            if (d1 ? !d2 : d2) {\n              // One final check to make sure endpoints aren't coincident\n              var p = p1;\n              var q = q1;\n\n              if (v2 * v2 < v1 * v1) {\n                p = p2;\n              }\n\n              if (u2 * u2 < u1 * u1) {\n                q = q2;\n              }\n\n              if (distance2BetweenPoints(p, q) > tol2) {\n                return false;\n              }\n            }\n          }\n        }\n      }\n\n      qtId1 = qtId2;\n      q1[0] = q2[0];\n      q1[1] = q2[1];\n      q1[2] = q2[2];\n      v1 = v2;\n      c1 = c2;\n    }\n  }\n\n  return true;\n} // ---------------------------------------------------\n\n/**\n * Check the quality of a cut between an outer and inner polygon.\n * An ideal cut is one that forms a 90 degree angle with each\n * line segment that it joins to.  Smaller values indicate a\n * higher quality cut.\n *\n * @param {Array} outerPoly\n * @param {Array} innerPoly\n * @param {Number} i\n * @param {Number} j\n * @param {vtkPoints} points\n */\n\nfunction vtkCCSCutQuality(outerPoly, innerPoly, i, j, points) {\n  var n = outerPoly.length;\n  var m = innerPoly.length;\n  var a = i > 0 ? i - 1 : n - 1;\n  var b = i < n - 1 ? i + 1 : 0;\n  var c = j > 0 ? j - 1 : m - 1;\n  var d = j < m - 1 ? j + 1 : 0;\n  var p0 = [];\n  var p1 = [];\n  var p2 = [];\n  points.getPoint(outerPoly[i], p1);\n  points.getPoint(innerPoly[j], p2);\n  var v1 = [];\n  var v2 = [];\n  subtract(p2, p1, v1);\n  var l1 = dot(v1, v1);\n  var l2;\n  var qmax = 0;\n  var q;\n  points.getPoint(outerPoly[a], p0);\n  subtract(p0, p1, v2);\n  l2 = dot(v2, v2);\n\n  if (l2 > 0) {\n    q = dot(v1, v2);\n    q *= q / l2;\n\n    if (q > qmax) {\n      qmax = q;\n    }\n  }\n\n  points.getPoint(outerPoly[b], p0);\n  subtract(p0, p1, v2);\n  l2 = dot(v2, v2);\n\n  if (l2 > 0) {\n    q = dot(v1, v2);\n    q *= q / l2;\n\n    if (q > qmax) {\n      qmax = q;\n    }\n  }\n\n  points.getPoint(innerPoly[c], p0);\n  subtract(p2, p0, v2);\n  l2 = dot(v2, v2);\n\n  if (l2 > 0) {\n    q = dot(v1, v2);\n    q *= q / l2;\n\n    if (q > qmax) {\n      qmax = q;\n    }\n  }\n\n  points.getPoint(innerPoly[d], p0);\n  subtract(p2, p0, v2);\n  l2 = dot(v2, v2);\n\n  if (l2 > 0) {\n    q = dot(v1, v2);\n    q *= q / l2;\n\n    if (q > qmax) {\n      qmax = q;\n    }\n  }\n\n  if (l1 > 0) {\n    return qmax / l1; // also l1 + qmax, incorporates distance;\n  }\n\n  return Number.MAX_VALUE;\n} // ---------------------------------------------------\n\n/**\n * Find the two sharpest verts on an inner (i.e. inside-out) poly.\n *\n * @param {Array} poly\n * @param {vtkPoints} points\n * @param {Vector3} normal\n * @param {[Number, Number]} verts\n */\n\nfunction vtkCCSFindSharpestVerts(poly, points, normal, verts) {\n  var p1 = [];\n  var p2 = [];\n  var v1 = [];\n  var v2 = [];\n  var v = [];\n  var l1;\n  var l2;\n  var minVal = [0, 0];\n  verts[0] = 0;\n  verts[1] = 0;\n  var n = poly.length;\n  points.getPoint(poly[n - 1], p2);\n  points.getPoint(poly[0], p1);\n  subtract(p1, p2, v1);\n  l1 = Math.sqrt(dot(v1, v1));\n\n  for (var j = 0; j < n; j++) {\n    var k = j + 1;\n\n    if (k === n) {\n      k = 0;\n    }\n\n    points.getPoint(poly[k], p2);\n    subtract(p2, p1, v2);\n    l2 = Math.sqrt(dot(v2, v2));\n    cross(v1, v2, v);\n    var b = dot(v, normal);\n\n    if (b < 0 && l1 * l2 > 0) {\n      // Dot product is |v1||v2|cos(theta), range [-1, +1]\n      var val = dot(v1, v2) / (l1 * l2);\n\n      if (val < minVal[0]) {\n        minVal[1] = minVal[0];\n        minVal[0] = val;\n        verts[1] = verts[0];\n        verts[0] = j;\n      }\n    } // Rotate to the next point\n\n\n    p1[0] = p2[0];\n    p1[1] = p2[1];\n    p1[2] = p2[2];\n    v1[0] = v2[0];\n    v1[1] = v2[1];\n    v1[2] = v2[2];\n    l1 = l2;\n  }\n} // ---------------------------------------------------\n\n/**\n * Find two valid cuts between outerPoly and innerPoly.\n * Used by vtkCCSCutHoleyPolys.\n *\n * @param {Array} polys\n * @param {Array} polyGroup\n * @param {Number} outerPolyId\n * @param {Number} innerPolyId\n * @param {vtkPoints} points\n * @param {Vector3} normal\n * @param {Array[]} cuts\n * @param {Boolean} exhaustive\n */\n\nfunction vtkCCSFindCuts(polys, polyGroup, outerPolyId, innerPolyId, points, normal, cuts, exhaustive) {\n  var outerPoly = polys[outerPolyId];\n  var innerPoly = polys[innerPolyId];\n  var innerSize = innerPoly.length; // Find the two sharpest points on the inner poly\n\n  var verts = [];\n  vtkCCSFindSharpestVerts(innerPoly, points, normal, verts); // A list of cut locations according to quality\n\n  var cutlist = [];\n  cutlist.length = outerPoly.length; // Search for potential cuts (need to find two cuts)\n\n  var cutId = 0;\n  cuts[0][0] = 0;\n  cuts[0][1] = 0;\n  cuts[1][0] = 0;\n  cuts[1][1] = 0;\n  var foundCut = false;\n\n  for (cutId = 0; cutId < 2; cutId++) {\n    var count = exhaustive ? innerSize : 3;\n\n    for (var i = 0; i < count && !foundCut; i++) {\n      // Semi-randomize the search order\n      // TODO: Does this do the same as in C++?\n      // eslint-disable-next-line no-bitwise\n      var j = (i >> 1) + (i & 1) * (innerSize + 1 >> 1); // Start at the best first point\n\n      j = (j + verts[cutId]) % innerSize;\n\n      for (var kk = 0; kk < outerPoly.length; kk++) {\n        var q = vtkCCSCutQuality(outerPoly, innerPoly, kk, j, points);\n        cutlist[kk] = [q, kk];\n      }\n\n      cutlist.sort(function (a, b) {\n        return a[0] - b[0];\n      });\n\n      for (var lid = 0; lid < cutlist.length; lid++) {\n        var k = cutlist[lid][1]; // If this is the second cut, do extra checks\n\n        if (cutId > 0) {\n          // Make sure cuts don't share an endpoint\n          if (j === cuts[0][1] || k === cuts[0][0]) {\n            // eslint-disable-next-line no-continue\n            continue;\n          } // Make sure cuts don't intersect\n\n\n          var p1 = [];\n          var p2 = [];\n          points.getPoint(outerPoly[cuts[0][0]], p1);\n          points.getPoint(innerPoly[cuts[0][1]], p2);\n          var q1 = [];\n          var q2 = [];\n          points.getPoint(outerPoly[k], q1);\n          points.getPoint(innerPoly[j], q2);\n          var u = void 0;\n          var v = void 0;\n\n          if (vtkLine.intersection(p1, p2, q1, q2, u, v) === vtkLine.IntersectionState.YES_INTERSECTION) {\n            // eslint-disable-next-line no-continue\n            continue;\n          }\n        } // This check is done for both cuts\n\n\n        if (vtkCCSCheckCut(polys, points, normal, polyGroup, outerPolyId, innerPolyId, k, j)) {\n          cuts[cutId][0] = k;\n          cuts[cutId][1] = j;\n          foundCut = true;\n          break;\n        }\n      }\n    }\n\n    if (!foundCut) {\n      return false;\n    }\n  }\n\n  return true;\n} // ---------------------------------------------------\n\n/**\n * Helper for vtkCCSCutHoleyPolys.  Change a polygon and a hole\n * into two separate polygons by making two cuts between them.\n *\n * @param {Array[]} polys\n * @param {Array} polyEdges\n * @param {Number} outerPolyId\n * @param {Number} innerPolyId\n * @param {vtkPoints} points\n * @param {Array[]} cuts\n */\n\nfunction vtkCCSMakeCuts(polys, polyEdges, outerPolyId, innerPolyId, points, cuts) {\n  var q = [];\n  var r = [];\n\n  for (var bb = 0; bb < 2; bb++) {\n    var ptId1 = polys[outerPolyId][cuts[bb][0]];\n    var ptId2 = polys[innerPolyId][cuts[bb][1]];\n    points.getPoint(ptId1, q);\n    points.getPoint(ptId2, r);\n  }\n\n  var outerPoly = polys[outerPolyId];\n  var innerPoly = polys[innerPolyId];\n  var outerEdges = polyEdges[outerPolyId];\n  var innerEdges = polyEdges[innerPolyId]; // Generate new polys from the cuts\n\n  var n = outerPoly.length;\n  var m = innerPoly.length;\n  var idx; // Generate poly1\n\n  var n1 = n * (cuts[1][0] < cuts[0][0]) + cuts[1][0] - cuts[0][0] + 1;\n  var n2 = n1 + m * (cuts[0][1] < cuts[1][1]) + cuts[0][1] - cuts[1][1] + 1;\n  var poly1 = [];\n  poly1.length = n2;\n  var edges1 = new Array(n2);\n  idx = cuts[0][0];\n\n  for (var i1 = 0; i1 < n1; i1++) {\n    var k = idx++;\n    poly1[i1] = outerPoly[k];\n    edges1[i1] = outerEdges[k];\n    idx *= idx !== n;\n  }\n\n  edges1[n1 - 1] = -1;\n  idx = cuts[1][1];\n\n  for (var i2 = n1; i2 < n2; i2++) {\n    var _k2 = idx++;\n\n    poly1[i2] = innerPoly[_k2];\n    edges1[i2] = innerEdges[_k2];\n    idx *= idx !== m;\n  }\n\n  edges1[n2 - 1] = -1; // Generate poly2\n\n  var m1 = n * (cuts[0][0] < cuts[1][0]) + cuts[0][0] - cuts[1][0] + 1;\n  var m2 = m1 + m * (cuts[1][1] < cuts[0][1]) + cuts[1][1] - cuts[0][1] + 1;\n  var poly2 = [];\n  poly2.length = m2;\n  var edges2 = new Array(m2);\n  idx = cuts[1][0];\n\n  for (var j1 = 0; j1 < m1; j1++) {\n    var _k3 = idx++;\n\n    poly2[j1] = outerPoly[_k3];\n    edges2[j1] = outerEdges[_k3];\n    idx *= idx !== n;\n  }\n\n  edges2[m1 - 1] = -1;\n  idx = cuts[0][1];\n\n  for (var j2 = m1; j2 < m2; j2++) {\n    var _k4 = idx++;\n\n    poly2[j2] = innerPoly[_k4];\n    edges2[j2] = innerEdges[_k4];\n    idx *= idx !== m;\n  }\n\n  edges2[m2 - 1] = -1; // Replace outerPoly and innerPoly with these new polys\n\n  polys[outerPolyId] = poly1;\n  polys[innerPolyId] = poly2;\n  polyEdges[outerPolyId] = edges1;\n  polyEdges[innerPolyId] = edges2;\n} // ---------------------------------------------------\n\n/**\n * After the holes have been identified, make cuts between the\n * outer poly and each hole.  Make two cuts per hole.  The only\n * strict requirement is that the cut must not intersect any\n * edges, but it's best to make sure that no really sharp angles\n * are created.\n *\n * @param {Array[]} polys\n * @param {vtkPoints} points\n * @param {Array[]} polyGroups\n * @param {Array} polyEdges\n * @param {Vector3} normal\n * @returns {boolean}\n */\n\nfunction vtkCCSCutHoleyPolys(polys, points, polyGroups, polyEdges, normal) {\n  var cutFailure = 0; // Go through all groups and cut out the first inner poly that is\n  // found.  Every time an inner poly is cut out, the groupId counter\n  // is reset because cutting a poly creates a new group.\n\n  var groupId = 0;\n\n  while (groupId < polyGroups.length) {\n    var polyGroup = polyGroups[groupId]; // Only need to make a cut if the group size is greater than 1\n\n    if (polyGroup.length > 1) {\n      // The first member of the group is the outer poly\n      var outerPolyId = polyGroup[0]; // The second member of the group is the first inner poly\n\n      var innerPolyId = polyGroup[1]; // Sort the group by size, do largest holes first\n\n      var innerBySize = new Array(polyGroup.length);\n\n      for (var i = 1; i < polyGroup.length; i++) {\n        innerBySize[i] = [polys[polyGroup[i]].length, i];\n      }\n\n      innerBySize = [innerBySize[0]].concat(_toConsumableArray(innerBySize.splice(1).sort(function (a, b) {\n        return a[0] - b[0];\n      })));\n      reverseElements(innerBySize, 1, innerBySize.length - 1); // Need to check all inner polys in sequence, until one succeeds.\n      // Do a quick search first, then do an exhaustive search.\n\n      var madeCut = 0;\n      var inner = 0;\n\n      for (var exhaustive = 0; exhaustive < 2 && !madeCut; exhaustive++) {\n        for (var j = 1; j < polyGroup.length; j++) {\n          inner = innerBySize[j][1];\n          innerPolyId = polyGroup[inner];\n          var cuts = [];\n\n          if (vtkCCSFindCuts(polys, polyGroup, outerPolyId, innerPolyId, points, normal, cuts, exhaustive)) {\n            vtkCCSMakeCuts(polys, polyEdges, outerPolyId, innerPolyId, points, cuts);\n            madeCut = 1;\n            break;\n          }\n        }\n      }\n\n      if (madeCut) {\n        // Move successfully cut innerPolyId into its own group\n        polyGroup.splice(inner, 1); // Only add if innerPolyId hasn't been set already.\n        // Having the same poly occur as both polyGroup and\n        // innerPoly would cause an infinite loop.\n\n        if (polyGroups[innerPolyId].length === 0) {\n          polyGroups[innerPolyId].push(innerPolyId);\n        }\n      } else {\n        // Remove all failed inner polys from the group\n        for (var k = 1; k < polyGroup.length; k++) {\n          innerPolyId = polyGroup[k]; // Only add if innerPolyId hasn't been set already.\n          // Having the same poly occur as both polyGroup and\n          // innerPoly would cause an infinite loop.\n\n          if (polyGroups[innerPolyId].length === 0) {\n            polyGroups[innerPolyId].push(innerPolyId);\n          }\n        }\n\n        polyGroup.length = 1;\n        cutFailure = 1;\n      } // If there are other interior polys in the group, find out whether\n      // they are in poly1 or poly2\n\n\n      if (polyGroup.length > 1) {\n        var poly1 = polys[outerPolyId];\n        var pp = new Float64Array(3 * poly1.length);\n        var bounds = [0.0, 0.0, 0.0, 0.0, 0.0, 0.0];\n        var tol2 = vtkCCSPrepareForPolyInPoly(poly1, points, pp, bounds);\n        var nextGroupId = groupId;\n        var ii = 1;\n\n        while (ii < polyGroup.length) {\n          if (vtkCCSPolyInPoly(poly1, polys[polyGroup[ii]], points, normal, pp, bounds, tol2)) {\n            // Keep this poly in polyGroup\n            ii++;\n          } else {\n            // Move this poly to poly2 group\n            polyGroups[innerPolyId].push(polyGroup[ii]);\n            polyGroup.splice(ii, 1); // Reduce the groupId to ensure that this new group will get cut\n\n            if (innerPolyId < nextGroupId) {\n              nextGroupId = innerPolyId;\n            }\n          }\n        } // Set the groupId for the next iteration\n\n\n        groupId = nextGroupId; // eslint-disable-next-line no-continue\n\n        continue;\n      }\n    } // Increment to the next group\n\n\n    groupId++;\n  }\n\n  return !cutFailure;\n}\n\nexport { reverseElements, vtkCCSCheckCut, vtkCCSCheckPolygonSense, vtkCCSCutHoleyPolys, vtkCCSCutQuality, vtkCCSFindCuts, vtkCCSFindSharpestVerts, vtkCCSFindTrueEdges, vtkCCSInsertTriangle, vtkCCSJoinLooseEnds, vtkCCSMakeCuts, vtkCCSMakeHoleyPolys, vtkCCSMakePolysFromLines, vtkCCSPolyInPoly, vtkCCSPrepareForPolyInPoly, vtkCCSReversePoly, vtkCCSSplitAtPinchPoints, vtkCCSTriangleQuality, vtkCCSTriangulate, vtkCCSVectorProgression };\n","import _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _toConsumableArray from '@babel/runtime/helpers/toConsumableArray';\nimport macro from '../../macros.js';\nimport vtkCellArray from '../../Common/Core/CellArray.js';\nimport vtkPolygon from '../../Common/DataModel/Polygon.js';\nimport vtkPolyData from '../../Common/DataModel/PolyData.js';\nimport { VtkDataTypes } from '../../Common/Core/DataArray/Constants.js';\nimport { vtkCCSMakePolysFromLines, vtkCCSJoinLooseEnds, vtkCCSFindTrueEdges, vtkCCSMakeHoleyPolys, vtkCCSCutHoleyPolys, vtkCCSSplitAtPinchPoints, vtkCCSTriangulate } from './ContourTriangulator/helper.js';\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar vtkErrorMacro = macro.vtkErrorMacro;\nvar TRIANGULATION_ERROR_DISPLAY = false;\n\nfunction triangulateContours(polyData, firstLine, numLines, polys, normal) {\n  var triangulatePolys = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : true;\n  var triangulationFailure = false; // If no cut lines were generated, there's nothing to do\n\n  if (numLines <= 0) {\n    return false;\n  }\n\n  var points = polyData.getPoints(); // Join all the new lines into connected groups, i.e. polygons.\n  // If we are lucky these will be simple, convex polygons. But\n  // we can't count on that.\n\n  var newPolys = [];\n  var incompletePolys = [];\n  var oriented = normal != null;\n  vtkCCSMakePolysFromLines(polyData, firstLine, firstLine + numLines, oriented, newPolys, incompletePolys); // if no normal specified, then compute one from largest contour\n\n  var computedNormal = normal;\n\n  if (normal == null) {\n    var maxnorm = 0;\n    var n = [];\n\n    for (var i = 0; i < newPolys.length; i++) {\n      var norm = vtkPolygon.getNormal(newPolys[i], points, n);\n\n      if (norm > maxnorm) {\n        maxnorm = norm;\n        computedNormal[0] = n[0];\n        computedNormal[1] = n[1];\n        computedNormal[2] = n[2];\n      }\n    }\n  } // Join any loose ends. If the input was a closed surface then there\n  // will not be any loose ends, so this is provided as a service to users\n  // who want to clip a non-closed surface.\n\n\n  vtkCCSJoinLooseEnds(newPolys, incompletePolys, points, computedNormal); // Some points might be in the middle of straight line segments.\n  // These points can be removed without changing the shape of the\n  // polys, and removing them makes triangulation more stable.\n  // Unfortunately removing these points also means that the polys\n  // will no longer form a watertight cap over the cut.\n\n  var polyEdges = [];\n  var originalEdges = [];\n  vtkCCSFindTrueEdges(newPolys, points, polyEdges, originalEdges); // Next we have to check for polygons with holes, i.e. polygons that\n  // have other polygons inside. Each polygon is \"grouped\" with the\n  // polygons that make up its holes.\n  // Initialize each group to hold just one polygon.\n\n  var numNewPolys = newPolys.length;\n  var polyGroups = [];\n\n  for (var _i = 0; _i < numNewPolys; _i++) {\n    polyGroups[_i] = [_i];\n  } // Find out which polys are holes in larger polys. Create a group\n  // for each poly where the first member of the group is the larger\n  // poly, and all other members are the holes. The number of polyGroups\n  // will be the same as the number of polys, and any polys that are\n  // holes will have a matching empty group.\n\n\n  vtkCCSMakeHoleyPolys(newPolys, points, polyGroups, polyEdges, originalEdges, computedNormal, oriented); // Make cuts to create simple polygons out of the holey polys.\n  // After this is done, each polyGroup will have exactly 1 polygon,\n  // and no polys will be holes. This is currently the most computationally\n  // expensive part of the process.\n\n  if (!vtkCCSCutHoleyPolys(newPolys, points, polyGroups, polyEdges, computedNormal)) {\n    triangulationFailure = true;\n  } // Some polys might be self-intersecting. Split the polys at each intersection point.\n\n\n  vtkCCSSplitAtPinchPoints(newPolys, points, polyGroups, polyEdges, computedNormal, oriented); // ------ Triangulation code ------\n  // Go through all polys and triangulate them\n\n  for (var polyId = 0; polyId < polyGroups.length; polyId++) {\n    // If group is empty, then poly was a hole without a containing poly\n    if (polyGroups[polyId].length === 0) {\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n\n    if (!triangulatePolys) {\n      polys.insertNextCell(originalEdges.slice(1, originalEdges.length));\n    } else if (!vtkCCSTriangulate(newPolys[polyId], points, polyEdges[polyId], originalEdges, polys, computedNormal)) {\n      triangulationFailure = false; // Diagnostic code: show the polys as outlines\n    }\n  }\n\n  return !triangulationFailure;\n} // ---------------------------------------------------\n\n\nfunction triangulatePolygon(polygon, points, triangles) {\n  var poly = _toConsumableArray(polygon);\n\n  var polys = [poly];\n  var originalEdges = [];\n  var polyEdges = [];\n  vtkCCSFindTrueEdges(polys, points, polyEdges, originalEdges);\n  var edges = polyEdges[0];\n  var success = true;\n  var normal = [];\n  var norm = vtkPolygon.getNormal(poly, points, normal);\n\n  if (norm !== 0) {\n    success = vtkCCSTriangulate(poly, points, edges, originalEdges, triangles, normal);\n  }\n\n  return success;\n}\n\nvar STATIC = {\n  triangulateContours: triangulateContours,\n  triangulatePolygon: triangulatePolygon\n};\n\nfunction vtkContourTriangulator(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkContourTriangulator');\n\n  publicAPI.requestData = function (inData, outData) {\n    // implement requestData\n    var input = inData[0];\n    var output = vtkPolyData.newInstance();\n    outData[0] = output;\n\n    if (!input) {\n      vtkErrorMacro('Invalid or missing input');\n      return false;\n    }\n\n    var triangulationError = false;\n    var lines = input.getLines();\n\n    if (lines == null || lines.getNumberOfCells() === 0) {\n      return true;\n    }\n\n    input.buildCells();\n    var polysArray = vtkCellArray.newInstance({\n      dataType: VtkDataTypes.DOUBLE,\n      empty: true\n    });\n    output.setPolys(polysArray);\n    output.setPoints(input.getPoints());\n    output.getPointData().passData(input.getPointData());\n    triangulationError = !triangulateContours(input, input.getNumberOfVerts(), lines.getNumberOfCells(), polysArray, [], model.triangulatePolys);\n\n    if (triangulationError && TRIANGULATION_ERROR_DISPLAY) {\n      vtkErrorMacro('Triangulation failed, output might have holes.');\n    }\n\n    return true;\n  };\n} // ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\n\nvar DEFAULT_VALUES = {\n  triangulatePolys: true\n}; // ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  var initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues); // Make this a VTK object\n\n  macro.obj(publicAPI, model); // Also make it an algorithm with one input and one output\n\n  macro.algo(publicAPI, model, 1, 1);\n  macro.setGet(publicAPI, model, ['triangulate']); // Object specific methods\n\n  vtkContourTriangulator(publicAPI, model);\n} // ----------------------------------------------------------------------------\n\nvar newInstance = macro.newInstance(extend, 'vtkContourTriangulator'); // ----------------------------------------------------------------------------\n\nvar vtkContourTriangulator$1 = _objectSpread({\n  newInstance: newInstance,\n  extend: extend\n}, STATIC);\n\nexport { STATIC, vtkContourTriangulator$1 as default, extend, newInstance };\n","var ScalarMode = {\n  NONE: 0,\n  COLORS: 1,\n  LABELS: 2\n};\nvar Constants = {\n  ScalarMode: ScalarMode\n};\n\nexport { ScalarMode, Constants as default };\n","import _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _toConsumableArray from '@babel/runtime/helpers/toConsumableArray';\nimport macro from '../../macros.js';\nimport { d as dot, e as distance2BetweenPoints } from '../../Common/Core/Math/index.js';\nimport vtkCellArray from '../../Common/Core/CellArray.js';\nimport vtkDataArray from '../../Common/Core/DataArray.js';\nimport { VtkDataTypes } from '../../Common/Core/DataArray/Constants.js';\nimport vtkPoints from '../../Common/Core/Points.js';\nimport vtkDataSetAttributes from '../../Common/DataModel/DataSetAttributes.js';\nimport vtkPolyData from '../../Common/DataModel/PolyData.js';\nimport vtkContourTriangulator from './ContourTriangulator.js';\nimport vtkEdgeLocator from '../../Common/DataModel/EdgeLocator.js';\nimport Constants from './ClipClosedSurface/Constants.js';\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar vtkErrorMacro = macro.vtkErrorMacro,\n    capitalize = macro.capitalize;\nvar ScalarMode = Constants.ScalarMode;\n\nfunction vtkClipClosedSurface(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkClipClosedSurface');\n\n  publicAPI.getMTime = function () {\n    return model.clippingPlanes.reduce(function (a, b) {\n      return b.getMTime() > a ? b.getMTime() : a;\n    }, model.mtime);\n  };\n  /**\n   * Take three colors as doubles, and convert to unsigned char.\n   *\n   * @param {Number} color1\n   * @param {Number} color2\n   * @param {Number} color3\n   * @param {Number[3][3]} colors\n   */\n\n\n  function createColorValues(color1, color2, color3, colors) {\n    var dcolors = [color1, color2, color3];\n\n    var clamp = function clamp(n, min, max) {\n      return Math.min(Math.max(n, min), max);\n    };\n\n    for (var i = 0; i < 3; i++) {\n      for (var j = 0; j < 3; j++) {\n        colors[i][j] = Math.round(clamp(dcolors[i][j], 0, 1) * 255);\n      }\n    }\n  }\n  /**\n   * Point interpolation for clipping and contouring, given the scalar\n   * values (v0, v1) for the two endpoints (p0, p1).  The use of this\n   * function guarantees perfect consistency in the results.\n   *\n   * @param {vtkPoints} points\n   * @param {vtkDataArray} pointData\n   * @param {CCSEdgeLocator} locator\n   * @param {Number} tol\n   * @param {Number} i0\n   * @param {Number} i1\n   * @param {Number} v0\n   * @param {Number} v1\n   * @param {Number} i\n   * @returns {Number}\n   */\n\n\n  function interpolateEdge(points, pointData, locator, tol, i0, i1, v0, v1) {\n    // This swap guarantees that exactly the same point is computed\n    // for both line directions, as long as the endpoints are the same.\n    if (v1 > 0) {\n      // eslint-disable-next-line no-param-reassign\n      var _ref = [i1, i0];\n      i0 = _ref[0];\n      i1 = _ref[1];\n      var _ref2 = [v1, v0];\n      v0 = _ref2[0];\n      v1 = _ref2[1];\n    } // After the above swap, i0 will be kept, and i1 will be clipped\n    // Check to see if this point has already been computed\n\n\n    var edge = locator.insertUniqueEdge(i0, i1);\n\n    if (edge.value != null) {\n      return edge.value;\n    } // Get the edge and interpolate the new point\n\n\n    var p0 = points.getPoint(i0);\n    var p1 = points.getPoint(i1);\n    var f = v0 / (v0 - v1);\n    var s = 1.0 - f;\n    var t = 1.0 - s;\n    var p = [s * p0[0] + t * p1[0], s * p0[1] + t * p1[1], s * p0[2] + t * p1[2]];\n    var tol2 = tol * tol; // Make sure that new point is far enough from kept point\n\n    if (distance2BetweenPoints(p, p0) < tol2) {\n      edge.value = i0;\n      return i0;\n    }\n\n    if (distance2BetweenPoints(p, p1) < tol2) {\n      edge.value = i1;\n      return i1;\n    }\n\n    edge.value = points.insertNextTuple(p);\n    pointData.interpolateData(pointData, i0, i1, edge.value, t);\n    return edge.value;\n  }\n  /**\n   * Method for clipping lines and copying the scalar data.\n   *\n   * @param {vtkPoints} points\n   * @param {vtkDataArray} pointScalars\n   * @param {vtkDataSetAttributesk} pointData\n   * @param {vtkEdgeLocator} edgeLocator\n   * @param {vtkCellArray} inputLines\n   * @param {vtkCellArray} outputLines\n   * @param {vtkDataSetAttributes} inLineData\n   * @param {vtkDataSetAttributes} outLineData\n   */\n\n\n  function clipLines(points, pointScalars, pointData, edgeLocator, inputLines, outputLines, inLineData, outLineData) {\n    var numPts;\n    var i0;\n    var i1;\n    var v0;\n    var v1;\n    var c0;\n    var c1;\n    var linePts = [];\n    var values = inputLines.getData();\n    var cellId = 0;\n\n    for (var i = 0; i < values.length; i += numPts + 1, cellId++) {\n      numPts = values[i];\n      i1 = values[i + 1];\n      v1 = pointScalars.getData()[i1];\n      c1 = v1 > 0;\n\n      for (var j = 2; j <= numPts; j++) {\n        i0 = i1;\n        v0 = v1;\n        c0 = c1;\n        i1 = values[i + j];\n        v1 = pointScalars.getData()[i1];\n        c1 = v1 > 0; // If at least one point wasn't clipped\n\n        if (c0 || c1) {\n          // If only one end was clipped, interpolate new point\n          if (c0 ? !c1 : c1) {\n            linePts[c0 ? 1 : 0] = interpolateEdge(points, pointData, edgeLocator, model.tolerance, i0, i1, v0, v1);\n          } // If endpoints are different, insert the line segment\n\n\n          if (i0 !== i1) {\n            linePts[0] = i0;\n            linePts[1] = i1;\n            var newCellId = outputLines.insertNextCell(linePts); // outLineData.copyData(inLineData, cellId, newCellId);\n\n            outLineData.passData(inLineData, cellId, newCellId);\n          }\n        }\n      }\n    }\n  }\n  /**\n   * Break polylines into individual lines, copying scalar values from\n   * inputScalars starting at firstLineScalar.  If inputScalars is zero,\n   * then scalars will be set to color.  If scalars is zero, then no\n   * scalars will be generated.\n   *\n   * @param {vtkCellArray} inputLines\n   * @param {vtkCellArray} outputLines\n   * @param {vtkDataArray} inputScalars\n   * @param {Number} firstLineScalar\n   * @param {vtkDataArray} scalars\n   * @param {Vector3} color\n   */\n\n\n  function breakPolylines(inputLines, outputLines, inputScalars, firstLineScalar, scalars, color) {\n    var cellColor = _toConsumableArray(color);\n\n    var cellId = 0;\n    var values = inputLines.getData();\n    var numPts;\n\n    for (var i = 0; i < values.length; i += numPts + 1) {\n      numPts = values[i];\n\n      if (inputScalars) {\n        inputScalars.getTuple(firstLineScalar + cellId++, cellColor);\n      }\n\n      for (var j = 1; j < numPts; j++) {\n        outputLines.insertNextCell([values[i + j], values[i + j + 1]]);\n\n        if (scalars) {\n          scalars.insertNextTuple(cellColor);\n        }\n      }\n    }\n  }\n  /**\n   * Copy polygons and their associated scalars to a new array.\n   * If inputScalars is set to zero, set polyScalars to color instead.\n   * If polyScalars is set to zero, don't generate scalars.\n   *\n   * @param {vtkCellArray} inputPolys\n   * @param {vtkCellArray} outputPolys\n   * @param {vtkDataArray} inputScalars\n   * @param {Number} firstPolyScalar\n   * @param {vtkDataArray} polyScalars\n   * @param {Vector3} color\n   */\n\n\n  function copyPolygons(inputPolys, outputPolys, inputScalars, firstPolyScalar, polyScalars, color) {\n    if (!inputPolys) {\n      return;\n    }\n\n    outputPolys.deepCopy(inputPolys);\n\n    if (polyScalars) {\n      var scalarValue = _toConsumableArray(color);\n\n      var n = outputPolys.getNumberOfCells();\n      polyScalars.insertTuple(n - 1, scalarValue);\n\n      if (inputScalars) {\n        for (var i = 0; i < n; i++) {\n          inputScalars.getTuple(i + firstPolyScalar, scalarValue);\n          polyScalars.setTuple(i, scalarValue);\n        }\n      } else {\n        for (var _i = 0; _i < n; _i++) {\n          polyScalars.setTuple(_i, scalarValue);\n        }\n      }\n    }\n  }\n\n  function breakTriangleStrips(inputStrips, polys, inputScalars, firstStripScalar, polyScalars, color) {\n    if (inputStrips.getNumberOfCells() === 0) {\n      return;\n    }\n\n    var values = inputStrips.getData();\n    var cellId = firstStripScalar;\n    var numPts;\n\n    for (var i = 0; i < values.length; i += numPts + 1, cellId++) {\n      numPts = values[i]; // vtkTriangleStrip.decomposeStrip(numPts, values, polys);\n\n      var p1 = values[i + 1];\n      var p2 = values[i + 2];\n\n      for (var j = 0; j < numPts - 2; j++) {\n        var p3 = values[i + j + 3];\n\n        if (j % 2) {\n          polys.insertNextCell([p2, p1, p3]);\n        } else {\n          polys.insertNextCell([p1, p2, p3]);\n        }\n\n        p1 = p2;\n        p2 = p3;\n      }\n\n      if (polyScalars) {\n        var scalarValue = _toConsumableArray(color);\n\n        if (inputScalars) {\n          // If there are input scalars, use them instead of \"color\"\n          inputScalars.getTuple(cellId, scalarValue);\n        }\n\n        var n = numPts - 3;\n        var m = polyScalars.getNumberOfTuples();\n\n        if (n >= 0) {\n          // First insert is just to allocate space\n          polyScalars.insertTuple(m + n, scalarValue);\n\n          for (var k = 0; k < n; k++) {\n            polyScalars.setTuple(m + k, scalarValue);\n          }\n        }\n      }\n    }\n  }\n  /**\n   * Given some closed contour lines, create a triangle mesh that\n   * fills those lines.  The input lines must be single-segment lines,\n   * not polylines.  The input lines do not have to be in order.\n   * Only lines from firstLine to will be used.  Specify the normal\n   * of the clip plane, which will be opposite the normals\n   * of the polys that will be produced.  If outCD has scalars, then color\n   * scalars will be added for each poly that is created.\n   *\n   * @param {vtkPolyData} polyData\n   * @param {Number} firstLine\n   * @param {Number} numLines\n   * @param {vtkCellArray} outputPolys\n   * @param {Vector3} normal\n   */\n\n\n  function triangulateContours(polyData, firstLine, numLines, outputPolys, normal) {\n    // If no cut lines were generated, there's nothing to do\n    if (numLines <= 0) {\n      return;\n    }\n\n    var triangulationError = !vtkContourTriangulator.triangulateContours(polyData, firstLine, numLines, outputPolys, [-normal[0], -normal[1], -normal[2]]);\n\n    if (triangulationError && model.triangulationErrorDisplay) {\n      vtkErrorMacro('Triangulation failed, polyData may not be watertight.');\n    }\n  }\n  /**\n   * Break polylines into individual lines, copying scalar values from\n   * inputScalars starting at firstLineScalar. If inputScalars is zero,\n   * then scalars will be set to color. If scalars is zero, then no\n   * scalars will be generated.\n   *\n   * @param {Number[]} polygon\n   * @param {vtkPoints} points\n   * @param {vtkCellArray} triangles\n   * @returns {Boolean}\n   */\n\n\n  function triangulatePolygon(polygon, points, triangles) {\n    return vtkContourTriangulator.triangulatePolygon(polygon, points, triangles);\n  }\n  /**\n   * Clip and contour polys in one step, in order to guarantee\n   * that the contour lines exactly match the new free edges of\n   * the clipped polygons.  This exact correspondence is necessary\n   * in order to guarantee that the surface remains closed.\n   *\n   * @param {vtkPoints} points\n   * @param {vtkDataArray} pointScalars\n   * @param {vtkDataSetAttributes} pointData\n   * @param {vtkEdgeLocator} edgeLocator\n   * @param {Number} triangulate\n   * @param {vtkCellArray} inputPolys\n   * @param {vtkCellArray} outputPolys\n   * @param {vtkCellArray} outputLines\n   * @param {vtkDataSetAttributes} inCellData\n   * @param {vtkDataSetAttributes} outPolyData\n   * @param {vtkDataSetAttributes} outLineData\n   */\n\n\n  function clipAndContourPolys(points, pointScalars, pointData, edgeLocator, triangulate, inputPolys, outputPolys, outputLines, inCellData, outPolyData, outLineData) {\n    var idList = model._idList; // How many sides for output polygons?\n\n    var polyMax = Number.MAX_VALUE;\n\n    if (triangulate) {\n      if (triangulate < 4) {\n        // triangles only\n        polyMax = 3;\n      } else if (triangulate === 4) {\n        // allow triangles and quads\n        polyMax = 4;\n      }\n    } // eslint-disable-next-line prefer-const\n\n\n    var triangulationFailure = false; // Go through all cells and clip them\n\n    var values = inputPolys.getData();\n    var linePts = [];\n    var cellId = 0;\n    var numPts;\n\n    for (var i = 0; i < values.length; i += numPts + 1, cellId++) {\n      numPts = values[i];\n      var i1 = values[i + numPts];\n      var v1 = pointScalars.getData()[i1];\n      var c1 = v1 > 0; // The ids for the current edge: init j0 to -1 if i1 will be clipped\n\n      var j0 = c1 ? i1 : -1;\n      var j1 = 0; // To store the ids of the contour line\n\n      linePts[0] = 0;\n      linePts[1] = 0;\n      var idListIdx = 0;\n\n      for (var j = 1; j <= numPts; j++) {\n        // Save previous point info\n        var i0 = i1;\n        var v0 = v1;\n        var c0 = c1; // Generate new point info\n\n        i1 = values[i + j];\n        v1 = pointScalars.getData()[i1];\n        c1 = v1 > 0; // If at least one edge end point wasn't clipped\n\n        if (c0 || c1) {\n          // If only one end was clipped, interpolate new point\n          if (c0 ? !c1 : c1) {\n            j1 = interpolateEdge(points, pointData, edgeLocator, model.tolerance, i0, i1, v0, v1);\n\n            if (j1 !== j0) {\n              idList[idListIdx++] = j1;\n              j0 = j1;\n            } // Save as one end of the contour line\n\n\n            linePts[c0 ? 1 : 0] = j1;\n          }\n\n          if (c1) {\n            j1 = i1;\n\n            if (j1 !== j0) {\n              idList[idListIdx++] = j1;\n              j0 = j1;\n            }\n          }\n        }\n      } // Insert the clipped poly\n\n\n      var numPoints = idListIdx;\n      idList.length = numPoints;\n\n      if (model.triangulatePolys && numPoints > polyMax) {\n        // TODO: Support triangulatePolygon\n        var newCellId = outputPolys.getNumberOfCells(); // Triangulate the poly and insert triangles into output.\n\n        var success = triangulatePolygon(idList, points, outputPolys);\n\n        if (!success) {\n          triangulationFailure = true;\n        } // Copy the attribute data to the triangle cells\n\n\n        var ncells = outputPolys.getNumberOfCells();\n\n        for (; newCellId < ncells; newCellId++) {\n          outPolyData.passData(inCellData, cellId, newCellId);\n        }\n      } else if (numPoints > 2) {\n        // Insert the polygon without triangulating it\n        var _newCellId = outputPolys.insertNextCell(idList);\n\n        outPolyData.passData(inCellData, cellId, _newCellId);\n      } // Insert the contour line if one was created\n\n\n      if (linePts[0] !== linePts[1]) {\n        var _newCellId2 = outputLines.insertNextCell(linePts);\n\n        outLineData.passData(inCellData, cellId, _newCellId2);\n      }\n    }\n\n    if (triangulationFailure && model.triangulationErrorDisplay) {\n      vtkErrorMacro('Triangulation failed, output may not be watertight');\n    }\n  }\n  /**\n   * Squeeze the points and store them in the output.  Only the points that\n   * are used by the cells will be saved, and the pointIds of the cells will\n   * be modified.\n   *\n   * @param {vtkPolyData} output\n   * @param {vtkPoints} points\n   * @param {vtkDataSetAttributes} pointData\n   * @param {String} outputPointDataType\n   */\n\n\n  function squeezeOutputPoints(output, points, pointData, outputPointDataType) {\n    // Create a list of points used by cells\n    var n = points.getNumberOfPoints();\n    var numNewPoints = 0;\n    var outPointData = output.getPointData();\n    var pointMap = [];\n    pointMap.length = n;\n    var cellArrays = [output.getVerts(), output.getLines(), output.getPolys(), output.getStrips()]; // Find all the newPoints that are used by cells\n\n    cellArrays.forEach(function (cellArray) {\n      if (!cellArray) {\n        return;\n      }\n\n      var values = cellArray.getData();\n      var numPts;\n      var pointId;\n\n      for (var i = 0; i < values.length; i += numPts + 1) {\n        numPts = values[i];\n\n        for (var j = 1; j <= numPts; j++) {\n          pointId = values[i + j];\n\n          if (pointMap[pointId] === undefined) {\n            pointMap[pointId] = numNewPoints++;\n          }\n        }\n      }\n    }); // Create exactly the number of points that are required\n\n    var newPoints = vtkPoints.newInstance({\n      size: numNewPoints * 3,\n      dataType: outputPointDataType\n    }); // outPointData.copyAllocate(pointData, numNewPoints, 0);\n\n    var p = [];\n    var newPointId;\n\n    for (var pointId = 0; pointId < n; pointId++) {\n      newPointId = pointMap[pointId];\n\n      if (newPointId !== undefined) {\n        points.getPoint(pointId, p);\n        newPoints.setTuple(newPointId, p);\n        outPointData.passData(pointData, pointId, newPointId); // outPointData.copyData(pointData, pointId, newPointId);\n      }\n    } // Change the cell pointIds to reflect the new point array\n\n\n    cellArrays.forEach(function (cellArray) {\n      if (!cellArray) {\n        return;\n      }\n\n      var values = cellArray.getData();\n      var numPts;\n      var pointId;\n\n      for (var i = 0; i < values.length; i += numPts + 1) {\n        numPts = values[i];\n\n        for (var j = 1; j <= numPts; j++) {\n          pointId = values[i + j];\n          values[i + j] = pointMap[pointId];\n        }\n      }\n    });\n    output.setPoints(newPoints);\n  }\n\n  publicAPI.requestData = function (inData, outData) {\n    var _input$getVerts, _input$getStrips;\n\n    // implement requestData\n    var input = inData[0];\n    var output = vtkPolyData.newInstance();\n    outData[0] = output;\n\n    if (!input) {\n      vtkErrorMacro('Invalid or missing input');\n      return;\n    }\n\n    if (model._idList == null) {\n      model._idList = [];\n    } else {\n      model._idList.length = 0;\n    } // Get the input points\n\n\n    var inputPoints = input.getPoints();\n    var numPts = 0;\n    var inputPointsType = VtkDataTypes.FLOAT;\n\n    if (inputPoints) {\n      numPts = inputPoints.getNumberOfPoints();\n      inputPointsType = inputPoints.getDataType();\n    } // Force points to double precision, copy the point attributes\n\n\n    var points = vtkPoints.newInstance({\n      size: numPts * 3,\n      dataType: VtkDataTypes.DOUBLE\n    });\n    var pointData = vtkDataSetAttributes.newInstance();\n    var inPointData = null;\n\n    if (model.passPointData) {\n      inPointData = input.getPointData(); // pointData.interpolateAllocate(inPointData, numPts, 0);\n    }\n\n    var point = [];\n\n    for (var ptId = 0; ptId < numPts; ptId++) {\n      inputPoints.getPoint(ptId, point);\n      points.setTuple(ptId, point);\n\n      if (inPointData) {\n        // pointData.copyData(inPointData, ptId, ptId);\n        pointData.passData(inPointData, ptId, ptId);\n      }\n    } // An edge locator to avoid point duplication while clipping\n\n\n    var edgeLocator = vtkEdgeLocator.newInstance(); // A temporary polydata for the contour lines that are triangulated\n\n    var tmpContourData = vtkPolyData.newInstance(); // The cell scalars\n\n    var lineScalars;\n    var polyScalars;\n    var inputScalars; // For input scalars: the offsets to the various cell types\n\n    var firstLineScalar = 0;\n    var firstPolyScalar = 0;\n    var firstStripScalar = 0; // Make the colors to be used on the data\n\n    var numberOfScalarComponents = 1;\n    var colors = [[0, 0, 0], [0, 0, 0], [0, 0, 0]];\n\n    if (model.scalarMode === ScalarMode.COLORS) {\n      numberOfScalarComponents = 3;\n      createColorValues(model.baseColor, model.clipColor, model.activePlaneColor, colors);\n    } else if (model.scalarMode === ScalarMode.LABELS) {\n      colors[0][0] = 0;\n      colors[1][0] = 1;\n      colors[2][0] = 2;\n    } // This is set if we have to work with scalars. The input scalars\n    // will be copied if they are unsigned char with 3 components, otherwise\n    // new scalars will be generated.\n\n\n    var numVerts = ((_input$getVerts = input.getVerts()) === null || _input$getVerts === void 0 ? void 0 : _input$getVerts.getNumberOfCells()) || 0;\n    var inputLines = input.getLines();\n    var numLines = (inputLines === null || inputLines === void 0 ? void 0 : inputLines.getNumberOfCells()) || 0;\n    var inputPolys = input.getPolys();\n    var numPolys = (inputPolys === null || inputPolys === void 0 ? void 0 : inputPolys.getNumberOfCells()) || 0;\n    var numStrips = ((_input$getStrips = input.getStrips()) === null || _input$getStrips === void 0 ? void 0 : _input$getStrips.getNumberOfCells()) || 0;\n\n    if (model.scalarMode !== ScalarMode.NONE) {\n      lineScalars = vtkDataArray.newInstance({\n        dataType: VtkDataTypes.UNSIGNED_CHAR,\n        empty: true,\n        // size: 0,\n        // values: new Uint8Array(numLines * 3),\n        numberOfComponents: numberOfScalarComponents\n      });\n      var tryInputScalars = input.getCellData().getScalars(); // Get input scalars if they are RGB color scalars\n\n      if (tryInputScalars && tryInputScalars.getDataType() === VtkDataTypes.UNSIGNED_CHAR && numberOfScalarComponents === 3 && tryInputScalars.getNumberOfComponents() === 3) {\n        inputScalars = input.getCellData().getScalars();\n        firstLineScalar = numVerts;\n        firstPolyScalar = numVerts + numLines;\n        firstStripScalar = numVerts + numLines + numPolys;\n      }\n    } // Break the input lines into segments, generate scalars for lines\n\n\n    var lines;\n\n    if (numLines > 0) {\n      lines = vtkCellArray.newInstance({\n        dataType: inputLines.getDataType(),\n        values: new Uint8Array(numLines * 3),\n        // we will have at least that amount of lines\n        size: 0\n      });\n      breakPolylines(inputLines, lines, inputScalars, firstLineScalar, lineScalars, colors[0]);\n    } else {\n      lines = vtkCellArray.newInstance({\n        empty: true\n      });\n    }\n\n    var polys = null;\n    var polyMax = 3;\n\n    if (numPolys > 0 || numStrips > 0) {\n      // If there are line scalars, then poly scalars are needed too\n      if (lineScalars) {\n        polyScalars = vtkDataArray.newInstance({\n          dataType: VtkDataTypes.UNSIGNED_CHAR,\n          empty: true,\n          // size: 0,\n          // values: new Uint8Array(inputPolys.getNumberOfCells(false) * 3),\n          numberOfComponents: numberOfScalarComponents\n        });\n      }\n\n      polys = vtkCellArray.newInstance();\n      copyPolygons(inputPolys, polys, inputScalars, firstPolyScalar, polyScalars, colors[0]); // TODO: Support triangle strips\n\n      breakTriangleStrips(input.getStrips(), polys, inputScalars, firstStripScalar, polyScalars, colors[0]); // Check if the input has polys and quads or just triangles\n\n      polyMax = inputPolys.getCellSizes().reduce(function (a, b) {\n        return a > b ? a : b;\n      }, 0);\n    } // Arrays for storing the clipped lines and polys\n\n\n    var newLines = vtkCellArray.newInstance({\n      dataType: lines.getDataType(),\n      empty: true\n    });\n    var newPolys = null;\n\n    if (polys) {\n      newPolys = vtkCellArray.newInstance({\n        dataType: polys.getDataType(),\n        empty: true\n      });\n    } // The line scalars, for coloring the outline\n\n\n    var inLineData = vtkDataSetAttributes.newInstance();\n    inLineData.copyScalarsOn();\n    inLineData.setScalars(lineScalars); // The poly scalars, for coloring the faces\n\n    var inPolyData = vtkDataSetAttributes.newInstance();\n    inPolyData.copyScalarsOn();\n    inPolyData.setScalars(polyScalars); // Also create output attribute data\n\n    var outLineData = vtkDataSetAttributes.newInstance();\n    outLineData.copyScalarsOn();\n    var outPolyData = vtkDataSetAttributes.newInstance();\n    outPolyData.copyScalarsOn();\n    var planes = model.clippingPlanes; // Go through the clipping planes and clip the input with each plane\n\n    for (var planeId = 0; planeId < planes.length; planeId++) {\n      var plane = planes[planeId];\n      var triangulate = 5;\n\n      if (planeId === planes.length - 1) {\n        triangulate = polyMax;\n      }\n\n      var active = planeId === model.activePlaneId; // Convert the plane into an easy-to-evaluate function\n\n      var pc = plane.getNormal(); // OK to modify pc because vtkPlane.getNormal() returns a copy\n\n      pc[3] = -dot(pc, plane.getOrigin()); // Create the clip scalars by evaluating the plane at each point\n\n      var numPoints = points.getNumberOfPoints(); // The point scalars, needed for clipping (not for the output!)\n\n      var pointScalars = vtkDataArray.newInstance({\n        dataType: VtkDataTypes.DOUBLE,\n        size: numPoints\n      });\n      var pointScalarsData = pointScalars.getData();\n      var pointsData = points.getData();\n      var i = 0;\n\n      for (var pointId = 0; pointId < numPoints; pointId) {\n        pointScalarsData[pointId++] = pointsData[i++] * pc[0] + pointsData[i++] * pc[1] + pointsData[i++] * pc[2] + pc[3];\n      } // Prepare the output scalars\n      // outLineData.copyAllocate(inLineData, 0, 0);\n      // outPolyData.copyAllocate(inPolyData, 0, 0);\n      // Reset the locator\n\n\n      edgeLocator.initialize(); // Clip the lines\n\n      clipLines(points, pointScalars, pointData, edgeLocator, lines, newLines, inLineData, outLineData); // Clip the polys\n\n      if (polys) {\n        // Get the number of lines remaining after the clipping\n        var numClipLines = newLines.getNumberOfCells(); // Cut the polys to generate more lines\n\n        clipAndContourPolys(points, pointScalars, pointData, edgeLocator, triangulate, polys, newPolys, newLines, inPolyData, outPolyData, outLineData); // Add scalars for the newly-created contour lines\n\n        var _scalars = outLineData.getScalars();\n\n        if (_scalars) {\n          // Set the color to the active color if plane is active\n          var color = colors[1 + (active ? 1 : 0)];\n          var activeColor = colors[2];\n          var numNewLines = newLines.getNumberOfCells();\n          var oldColor = [];\n\n          for (var lineId = numClipLines; lineId < numNewLines; lineId++) {\n            _scalars.getTuple(lineId, oldColor);\n\n            if (numberOfScalarComponents !== 3 || oldColor[0] !== activeColor[0] || oldColor[1] !== activeColor[1] || oldColor[2] !== activeColor[2]) {\n              _scalars.setTuple(lineId, color);\n            }\n          }\n        } // Generate new polys from the cut lines\n\n\n        var cellId = newPolys.getNumberOfCells();\n        var numClipAndContourLines = newLines.getNumberOfCells(); // Create a polydata for the lines\n\n        tmpContourData.setPoints(points);\n        tmpContourData.setLines(newLines);\n        tmpContourData.buildCells();\n        triangulateContours(tmpContourData, numClipLines, numClipAndContourLines - numClipLines, newPolys, pc); // Add scalars for the newly-created polys\n\n        _scalars = outPolyData.getScalars();\n\n        if (_scalars) {\n          var _color = colors[1 + (active ? 1 : 0)];\n          var numCells = newPolys.getNumberOfCells();\n\n          if (numCells > cellId) {\n            // The insert allocates space up to numCells - 1\n            _scalars.insertTuple(numCells - 1, _color);\n\n            for (; cellId < numCells; cellId++) {\n              _scalars.setTuple(cellId, _color);\n            }\n          }\n        } // Add scalars to any diagnostic lines that added by\n        // triangulateContours(). In usual operation, no lines are added.\n\n\n        _scalars = outLineData.getScalars();\n\n        if (_scalars) {\n          var _color2 = [0, 255, 255];\n\n          var _numCells = newLines.getNumberOfCells();\n\n          if (_numCells > numClipAndContourLines) {\n            // The insert allocates space up to numCells - 1\n            _scalars.insertTuple(_numCells - 1, _color2);\n\n            for (var lineCellId = numClipAndContourLines; lineCellId < _numCells; lineCellId++) {\n              _scalars.setTuple(lineCellId, _color2);\n            }\n          }\n        }\n      } // Swap the lines, points, etcetera: old output becomes new input\n\n\n      var _ref3 = [newLines, lines];\n      lines = _ref3[0];\n      newLines = _ref3[1];\n      newLines.initialize();\n\n      if (polys) {\n        var _ref4 = [newPolys, polys];\n        polys = _ref4[0];\n        newPolys = _ref4[1];\n        newPolys.initialize();\n      }\n\n      var _ref5 = [outLineData, inLineData];\n      inLineData = _ref5[0];\n      outLineData = _ref5[1];\n      outLineData.initialize();\n      var _ref6 = [outPolyData, inPolyData];\n      inPolyData = _ref6[0];\n      outPolyData = _ref6[1];\n      outPolyData.initialize();\n    } // Get the line scalars\n\n\n    var scalars = inLineData.getScalars();\n\n    if (model.generateOutline) {\n      output.setLines(lines);\n    } else if (scalars) {\n      scalars.initialize();\n    }\n\n    if (model.generateFaces) {\n      output.setPolys(polys);\n\n      if (polys && scalars) {\n        var pScalars = inPolyData.getScalars();\n        var m = scalars.getNumberOfTuples();\n        var n = pScalars.getNumberOfTuples();\n\n        if (n > 0) {\n          var _color3 = [0, 0, 0]; // This is just to expand the array\n\n          scalars.insertTuple(n + m - 1, _color3); // Fill in the poly scalars\n\n          for (var _i2 = 0; _i2 < n; _i2++) {\n            pScalars.getTuple(_i2, _color3);\n            scalars.setTuple(_i2 + m, _color3);\n          }\n        }\n      }\n    }\n\n    if (scalars && model.scalarMode === ScalarMode.COLORS) {\n      scalars.setName('Colors');\n      output.getCellData().setScalars(scalars);\n    } else if (model.scalarMode === ScalarMode.LABELS) {\n      // Don't use VTK_UNSIGNED_CHAR or they will look like color scalars\n      // const categories = vtkSignedCharArray.newInstance();\n      // categories.deepCopy(scalars);\n      // categories.setName(\"Labels\");\n      // output.getCellData().setScalars(categories);\n      // categories.delete();\n      // TODO: Check\n      var categories = scalars.newClone();\n      categories.setData(scalars.getData().slice());\n      categories.setName('Labels');\n      output.getCellData().setScalars(categories);\n    } else {\n      output.getCellData().setScalars(null);\n    } // Finally, store the points in the output\n\n\n    squeezeOutputPoints(output, points, pointData, inputPointsType); // TODO: Check\n    // output.squeeze();\n\n    outData[0] = output;\n  };\n\n  Object.keys(ScalarMode).forEach(function (key) {\n    var name = capitalize(key.toLowerCase());\n\n    publicAPI[\"setScalarModeTo\".concat(name)] = function () {\n      model.scalarMode = ScalarMode[key];\n    };\n  });\n} // ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\n\nvar DEFAULT_VALUES = {\n  clippingPlanes: null,\n  tolerance: 1e-6,\n  passPointData: false,\n  triangulatePolys: false,\n  scalarMode: ScalarMode.NONE,\n  generateOutline: false,\n  generateFaces: true,\n  activePlaneId: -1,\n  baseColor: [255 / 255, 99 / 255, 71 / 255],\n  // Tomato\n  clipColor: [244 / 255, 164 / 255, 96 / 255],\n  // Sandy brown\n  activePlaneColor: [227 / 255, 207 / 255, 87 / 255],\n  // Banana\n  triangulationErrorDisplay: false // _idList: null,\n\n}; // ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  var initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues); // Make this a VTK object\n\n  macro.obj(publicAPI, model); // Also make it an algorithm with one input and one output\n\n  macro.algo(publicAPI, model, 1, 1);\n  macro.setGet(publicAPI, model, ['clippingPlanes', 'tolerance', 'passPointData', 'triangulatePolys', 'scalarMode', 'generateOutline', 'generateFaces', 'activePlaneId', 'triangulationErrorDisplay']);\n  macro.setGetArray(publicAPI, model, ['baseColor', 'clipColor', 'activePlaneColor'], 3); // Object specific methods\n\n  vtkClipClosedSurface(publicAPI, model);\n} // ----------------------------------------------------------------------------\n\nvar newInstance = macro.newInstance(extend, 'vtkClipClosedSurface'); // ----------------------------------------------------------------------------\n\nvar vtkClipClosedSurface$1 = _objectSpread({\n  newInstance: newInstance,\n  extend: extend\n}, Constants);\n\nexport { vtkClipClosedSurface$1 as default, extend, newInstance };\n","export function pointToString(point, decimals = 5) {\n  return (\n    parseFloat(point[0]).toFixed(decimals) +\n    ',' +\n    parseFloat(point[1]).toFixed(decimals) +\n    ',' +\n    parseFloat(point[2]).toFixed(decimals) +\n    ','\n  );\n}\n","import {\n  getEnabledElement,\n  Enums,\n  VolumeViewport3D,\n} from '@cornerstonejs/core';\nimport vtkMapper from '@kitware/vtk.js/Rendering/Core/Mapper';\nimport vtkActor from '@kitware/vtk.js/Rendering/Core/Actor';\nimport vtkClipClosedSurface from '@kitware/vtk.js/Filters/General/ClipClosedSurface';\nimport vtkPolyData from '@kitware/vtk.js/Common/DataModel/PolyData';\nimport vtkCellArray from '@kitware/vtk.js/Common/Core/CellArray';\nimport { pointToString } from '../../../utilities/pointToString';\n\nconst polyDataCache = new Map();\n\nfunction addSurfaceToElement(\n  element: HTMLDivElement,\n  surface: any,\n  actorUID: string\n): void {\n  const enabledElement = getEnabledElement(element);\n  const { viewport } = enabledElement;\n\n  // Default to true since we are setting a new segmentation, however,\n  // in the event listener, we will make other segmentations visible/invisible\n  // based on the config\n  const points = surface.getPoints();\n  const polys = surface.getPolys();\n  const color = surface.getColor();\n\n  const polyData = vtkPolyData.newInstance();\n  polyData.getPoints().setData(points, 3);\n\n  const triangles = vtkCellArray.newInstance({\n    values: Float32Array.from(polys),\n  });\n  polyData.setPolys(triangles);\n\n  const mapper = vtkMapper.newInstance({});\n  let clippingFilter;\n  if (!(viewport instanceof VolumeViewport3D)) {\n    clippingFilter = vtkClipClosedSurface.newInstance({\n      clippingPlanes: [],\n      activePlaneId: 2,\n      passPointData: false,\n    });\n    clippingFilter.setInputData(polyData);\n    clippingFilter.setGenerateOutline(true);\n    clippingFilter.setGenerateFaces(false);\n    clippingFilter.update();\n    const filteredData = clippingFilter.getOutputData();\n    mapper.setInputData(filteredData);\n  } else {\n    mapper.setInputData(polyData);\n  }\n\n  const actor = vtkActor.newInstance();\n  actor.setMapper(mapper);\n\n  // sets the color of the surface actor\n  actor.getProperty().setColor(color[0] / 255, color[1] / 255, color[2] / 255);\n  viewport.addActor({\n    actor,\n    uid: actorUID,\n    clippingFilter,\n  });\n\n  element.addEventListener(\n    Enums.Events.CLIPPING_PLANES_UPDATED,\n    updateSurfacePlanes\n  );\n}\n\n/**\n * Updates the clipping planes of a surface and caches the resulting poly data\n * @param evt\n */\nfunction updateSurfacePlanes(evt) {\n  const { actorEntry, vtkPlanes, viewport } = evt.detail;\n  if (!actorEntry?.clippingFilter) {\n    return;\n  }\n\n  const mapper = actorEntry.actor.getMapper();\n\n  const { viewPlaneNormal } = viewport.getCamera();\n  const imageIndex = viewport.getCurrentImageIdIndex();\n\n  // we should not use the focalPoint here, since the pan and zoom updates it,\n  // imageIndex is reliable enough\n  const cacheId = `${viewport.id}-${pointToString(\n    viewPlaneNormal\n  )}-${imageIndex}`;\n\n  let actorCache = polyDataCache.get(actorEntry.uid);\n  if (!actorCache) {\n    actorCache = new Map();\n    polyDataCache.set(actorEntry.uid, actorCache);\n  }\n\n  let polyData = actorCache.get(cacheId);\n  if (!polyData) {\n    const clippingFilter = actorEntry.clippingFilter;\n    clippingFilter.setClippingPlanes(vtkPlanes);\n    try {\n      clippingFilter.update();\n      polyData = clippingFilter.getOutputData();\n      actorCache.set(cacheId, polyData);\n    } catch (e) {\n      console.error('Error clipping surface', e);\n    }\n  }\n  mapper.setInputData(polyData);\n}\n\nexport default addSurfaceToElement;\n","import {\n  cache,\n  getEnabledElementByIds,\n  Types,\n  utilities,\n  Enums,\n} from '@cornerstonejs/core';\n\nimport * as SegmentationState from '../../../stateManagement/segmentation/segmentationState';\nimport * as SegmentationConfig from '../../../stateManagement/segmentation/config/segmentationConfig';\nimport Representations from '../../../enums/SegmentationRepresentations';\nimport { getToolGroup } from '../../../store/ToolGroupManager';\nimport {\n  RepresentationPublicInput,\n  SegmentationRepresentationConfig,\n  ToolGroupSpecificRepresentation,\n} from '../../../types/SegmentationStateTypes';\n\nimport removeSurfaceFromElement from './removeSurfaceFromElement';\nimport addSurfaceToElement from './addSurfaceToElement';\n\n/**\n * It adds a new segmentation representation to the segmentation state\n * @param toolGroupId - The id of the toolGroup that the segmentation\n * belongs to\n * @param representationInput - RepresentationPublicInput\n * @param toolGroupSpecificConfig - The configuration that is specific to the toolGroup.\n * @returns The segmentationRepresentationUID\n */\nasync function addSegmentationRepresentation(\n  toolGroupId: string,\n  representationInput: RepresentationPublicInput,\n  toolGroupSpecificConfig?: SegmentationRepresentationConfig\n): Promise<string> {\n  const { segmentationId } = representationInput;\n  const segmentationRepresentationUID = utilities.uuidv4();\n  // Todo: make these configurable during representation input by user\n  const segmentsHidden = new Set() as Set<number>;\n  const colorLUTIndex = 0;\n  const active = true;\n  const toolGroupSpecificRepresentation: ToolGroupSpecificRepresentation = {\n    segmentationId,\n    segmentationRepresentationUID,\n    type: Representations.Surface,\n    segmentsHidden,\n    colorLUTIndex,\n    active,\n    segmentationRepresentationSpecificConfig: {},\n    segmentSpecificConfig: {},\n    config: {},\n  };\n  // Update the toolGroup specific configuration\n  if (toolGroupSpecificConfig) {\n    // Since setting configuration on toolGroup will trigger a segmentationRepresentation\n    // update event, we don't want to trigger the event twice, so we suppress\n    // the first one\n    const currentToolGroupConfig =\n      SegmentationConfig.getToolGroupSpecificConfig(toolGroupId);\n    const mergedConfig = utilities.deepMerge(\n      currentToolGroupConfig,\n      toolGroupSpecificConfig\n    );\n    SegmentationConfig.setToolGroupSpecificConfig(toolGroupId, {\n      renderInactiveSegmentations:\n        mergedConfig.renderInactiveSegmentations || true,\n      representations: {\n        ...mergedConfig.representations,\n      },\n    });\n  }\n  SegmentationState.addSegmentationRepresentation(\n    toolGroupId,\n    toolGroupSpecificRepresentation\n  );\n  return segmentationRepresentationUID;\n}\n\n/**\n * It removes a segmentation representation from the tool group's viewports and\n * from the segmentation state\n * @param toolGroupId - The toolGroupId of the toolGroup that the\n * segmentationRepresentation belongs to.\n * @param segmentationRepresentationUID - This is the unique identifier\n * for the segmentation representation.\n * @param renderImmediate - If true, the viewport will be rendered\n * immediately after the segmentation representation is removed.\n */\nfunction removeSegmentationRepresentation(\n  toolGroupId: string,\n  segmentationRepresentationUID: string,\n  renderImmediate = false\n): void {\n  _removeSurfaceFromToolGroupViewports(\n    toolGroupId,\n    segmentationRepresentationUID\n  );\n  SegmentationState.removeSegmentationRepresentation(\n    toolGroupId,\n    segmentationRepresentationUID\n  );\n\n  if (renderImmediate) {\n    const viewportsInfo = getToolGroup(toolGroupId).getViewportsInfo();\n    viewportsInfo.forEach(({ viewportId, renderingEngineId }) => {\n      const enabledElement = getEnabledElementByIds(\n        viewportId,\n        renderingEngineId\n      );\n      enabledElement.viewport.render();\n    });\n  }\n}\n\n/**\n * It renders the Surface  for the given segmentation\n * @param viewport - The viewport object\n * @param representation - ToolGroupSpecificRepresentation\n * @param toolGroupConfig - This is the configuration object for the tool group\n */\nasync function render(\n  viewport: Types.IVolumeViewport,\n  representation: ToolGroupSpecificRepresentation,\n  toolGroupConfig: SegmentationRepresentationConfig\n): Promise<void> {\n  const {\n    colorLUTIndex,\n    active,\n    segmentationId,\n    segmentationRepresentationUID,\n    segmentsHidden,\n  } = representation;\n\n  const segmentation = SegmentationState.getSegmentation(segmentationId);\n  const SurfaceData = segmentation.representationData[Representations.Surface];\n  const { geometryId } = SurfaceData;\n\n  if (!geometryId) {\n    console.warn(\n      `No Surfaces found for segmentationId ${segmentationId}. Skipping render.`\n    );\n  }\n\n  const geometry = cache.getGeometry(geometryId);\n  if (!geometry) {\n    throw new Error(`No Surfaces found for geometryId ${geometryId}`);\n  }\n\n  if (geometry.type !== Enums.GeometryType.SURFACE) {\n    // Todo: later we can support converting other geometries to Surfaces\n    throw new Error(\n      `Geometry type ${geometry.type} not supported for rendering.`\n    );\n  }\n\n  if (!geometry.data) {\n    console.warn(\n      `No Surfaces found for geometryId ${geometryId}. Skipping render.`\n    );\n    return;\n  }\n\n  const surface = geometry.data;\n\n  const surfaceUID = `${segmentationRepresentationUID}_${surface.id}}`;\n  _renderSurface(viewport, surface, surfaceUID);\n\n  viewport.resetCamera();\n  viewport.render();\n}\n\nfunction _renderSurface(\n  viewport: Types.IVolumeViewport,\n  surface: any,\n  surfaceUID: string\n): void {\n  const actorUID = surfaceUID;\n  const actorEntry = viewport.getActor(actorUID);\n\n  if (!actorEntry) {\n    addSurfaceToElement(viewport.element, surface, actorUID);\n  } else {\n    throw new Error('Not implemented yet. (Update surface)');\n  }\n}\n\nfunction _removeSurfaceFromToolGroupViewports(\n  toolGroupId: string,\n  segmentationRepresentationUID: string\n): void {\n  const toolGroup = getToolGroup(toolGroupId);\n\n  if (toolGroup === undefined) {\n    throw new Error(`ToolGroup with ToolGroupId ${toolGroupId} does not exist`);\n  }\n\n  const { viewportsInfo } = toolGroup;\n\n  for (const viewportInfo of viewportsInfo) {\n    const { viewportId, renderingEngineId } = viewportInfo;\n    const enabledElement = getEnabledElementByIds(\n      viewportId,\n      renderingEngineId\n    );\n    removeSurfaceFromElement(\n      enabledElement.viewport.element,\n      segmentationRepresentationUID\n    );\n  }\n}\n\nexport default {\n  render,\n  addSegmentationRepresentation,\n  removeSegmentationRepresentation,\n};\n","import _cloneDeep from 'lodash.clonedeep';\nimport {\n  SegmentationRepresentationConfig,\n  RepresentationPublicInput,\n} from '../../types/SegmentationStateTypes';\nimport Representations from '../../enums/SegmentationRepresentations';\nimport { getToolGroup } from '../../store/ToolGroupManager';\n\nimport { labelmapDisplay } from '../../tools/displayTools/Labelmap';\nimport { contourDisplay } from '../../tools/displayTools/Contour';\nimport { surfaceDisplay } from '../../tools/displayTools/Surface';\n\n/**\n * Set the specified segmentation representations on the viewports of the specified\n * toolGroup. It accepts a second argument which is a toolGroup specific representation\n * configuration.\n *\n * @param toolGroupId - The Id of the toolGroup to add the segmentation representations to\n * @param representationInputArray - An array of segmentation representations to add to the toolGroup\n * @param toolGroupSpecificRepresentationConfig - The toolGroup specific configuration\n * for the segmentation representations\n */\nasync function addSegmentationRepresentations(\n  toolGroupId: string,\n  representationInputArray: RepresentationPublicInput[],\n  toolGroupSpecificRepresentationConfig?: SegmentationRepresentationConfig\n): Promise<string[]> {\n  // Check if there exists a toolGroup with the toolGroupId\n  const toolGroup = getToolGroup(toolGroupId);\n\n  if (!toolGroup) {\n    throw new Error(`No tool group found for toolGroupId: ${toolGroupId}`);\n  }\n\n  const promises = representationInputArray.map((representationInput) => {\n    return _addSegmentationRepresentation(\n      toolGroupId,\n      representationInput,\n      toolGroupSpecificRepresentationConfig\n    );\n  });\n\n  const segmentationRepresentationUIDs = await Promise.all(promises);\n\n  return segmentationRepresentationUIDs;\n}\n\nasync function _addSegmentationRepresentation(\n  toolGroupId: string,\n  representationInput: RepresentationPublicInput,\n  toolGroupSpecificRepresentationConfig?: SegmentationRepresentationConfig\n): Promise<string> {\n  let segmentationRepresentationUID;\n\n  if (representationInput.type === Representations.Labelmap) {\n    segmentationRepresentationUID =\n      await labelmapDisplay.addSegmentationRepresentation(\n        toolGroupId,\n        representationInput,\n        toolGroupSpecificRepresentationConfig\n      );\n  } else if (representationInput.type === Representations.Contour) {\n    segmentationRepresentationUID =\n      await contourDisplay.addSegmentationRepresentation(\n        toolGroupId,\n        representationInput,\n        toolGroupSpecificRepresentationConfig\n      );\n  } else if (representationInput.type === Representations.Surface) {\n    segmentationRepresentationUID =\n      await surfaceDisplay.addSegmentationRepresentation(\n        toolGroupId,\n        representationInput,\n        toolGroupSpecificRepresentationConfig\n      );\n  } else {\n    throw new Error(\n      `The representation type ${representationInput.type} is not supported`\n    );\n  }\n\n  return segmentationRepresentationUID;\n}\n\nexport default addSegmentationRepresentations;\n","import { ToolGroupSpecificRepresentation } from '../../types/SegmentationStateTypes';\nimport { getDefaultSegmentationStateManager } from './segmentationState';\nimport { triggerSegmentationRepresentationModified } from './triggerSegmentationEvents';\n\n/**\n * Get the active segmentation representation for the tool group with\n * the given toolGroupId.\n * @param toolGroupId - The Id of the tool group\n * @returns The active segmentation representation for the tool group.\n */\nfunction getActiveSegmentationRepresentation(\n  toolGroupId: string\n): ToolGroupSpecificRepresentation {\n  const segmentationStateManager = getDefaultSegmentationStateManager();\n\n  const toolGroupSegmentationRepresentations =\n    segmentationStateManager.getSegmentationRepresentations(toolGroupId);\n\n  if (!toolGroupSegmentationRepresentations) {\n    return;\n  }\n\n  const activeRepresentation = toolGroupSegmentationRepresentations.find(\n    (representation) => representation.active\n  );\n\n  return activeRepresentation;\n}\n\n/**\n * Set the active segmentation for the given tool group for all its viewports\n *\n * @param toolGroupId - The Id of the tool group to set the active\n * segmentation for.\n * @param segmentationRepresentationUID - The id of the segmentation representation to set as\n * active.\n */\nfunction setActiveSegmentationRepresentation(\n  toolGroupId: string,\n  segmentationRepresentationUID: string\n): void {\n  const segmentationStateManager = getDefaultSegmentationStateManager();\n\n  segmentationStateManager.setActiveSegmentationRepresentation(\n    toolGroupId,\n    segmentationRepresentationUID\n  );\n\n  triggerSegmentationRepresentationModified(\n    toolGroupId,\n    segmentationRepresentationUID\n  );\n}\n\nexport {\n  // get\n  getActiveSegmentationRepresentation,\n  // set\n  setActiveSegmentationRepresentation,\n};\n","import { getActiveSegmentationRepresentation } from './activeSegmentation';\n\nimport { getSegmentation } from '../../stateManagement/segmentation/segmentationState';\nimport { triggerSegmentationModified } from './triggerSegmentationEvents';\n\n/**\n * Get the locked status for a segment index in a segmentation\n * @param segmentationId - The id of the segmentation that the segment\n * belongs to.\n * @param segmentIndex - The index of the segment\n * @returns A boolean value indicating whether the segment is locked or not.\n */\nfunction isSegmentIndexLocked(\n  segmentationId: string,\n  segmentIndex: number\n): boolean {\n  const segmentation = getSegmentation(segmentationId);\n\n  if (!segmentation) {\n    throw new Error(`No segmentation state found for ${segmentationId}`);\n  }\n\n  const { segmentsLocked } = segmentation;\n  return segmentsLocked.has(segmentIndex);\n}\n\n/**\n * Set the locked status of a segment index in a segmentation\n * @param segmentationId - The id of the segmentation whose segment\n * index is being modified.\n * @param segmentIndex - The index of the segment to lock/unlock.\n */\nfunction setSegmentIndexLocked(\n  segmentationId: string,\n  segmentIndex: number,\n  locked = true\n): void {\n  const segmentation = getSegmentation(segmentationId);\n\n  if (!segmentation) {\n    throw new Error(`No segmentation state found for ${segmentationId}`);\n  }\n\n  const { segmentsLocked } = segmentation;\n\n  if (locked) {\n    segmentsLocked.add(segmentIndex);\n  } else {\n    segmentsLocked.delete(segmentIndex);\n  }\n\n  triggerSegmentationModified(segmentationId);\n}\n\n/**\n * Get the locked segments for a segmentation\n * @param segmentationId - The id of the segmentation to get locked\n * segments for.\n * @returns An array of locked segment indices.\n */\nfunction getLockedSegments(segmentationId: string): number[] | [] {\n  const segmentation = getSegmentation(segmentationId);\n\n  if (!segmentation) {\n    throw new Error(`No segmentation state found for ${segmentationId}`);\n  }\n\n  const { segmentsLocked } = segmentation;\n  return Array.from(segmentsLocked);\n}\n\nexport { isSegmentIndexLocked, setSegmentIndexLocked, getLockedSegments };\n","import { utilities } from '@cornerstonejs/core';\nimport * as SegmentationState from '../../../stateManagement/segmentation/segmentationState';\nimport { Color } from '../../../types/SegmentationStateTypes';\nimport { ColorLUT } from '../../../types/SegmentationStateTypes';\nimport { triggerSegmentationRepresentationModified } from '../triggerSegmentationEvents';\nimport { SegmentationRepresentations } from '../../../enums';\n\n/**\n * addColorLUT - Adds a new color LUT to the state at the given colorLUTIndex.\n * If no colorLUT is provided, a new color LUT is generated.\n *\n * @param colorLUTIndex - the index of the colorLUT in the state\n * @param colorLUT - An array of The colorLUT to set.\n * @returns\n */\nfunction addColorLUT(colorLUT: ColorLUT, colorLUTIndex: number): void {\n  if (!colorLUT) {\n    throw new Error('addColorLUT: colorLUT is required');\n  }\n\n  // Append the \"zero\" (no label) color to the front of the LUT, if necessary.\n  if (!utilities.isEqual(colorLUT[0], [0, 0, 0, 0])) {\n    console.warn(\n      'addColorLUT: [0, 0, 0, 0] color is not provided for the background color (segmentIndex =0), automatically adding it'\n    );\n    colorLUT.unshift([0, 0, 0, 0]);\n  }\n\n  SegmentationState.addColorLUT(colorLUT, colorLUTIndex);\n}\n\n/**\n * It sets the toolGroup's segmentationRepresentation to use the provided\n * colorLUT at the given colorLUTIndex.\n * @param toolGroupId - the id of the toolGroup that renders the representation\n * @param segmentationRepresentationUID - the representationUID for the segmentation\n * @param colorLUTIndex - the index of the colorLUT to use\n */\nfunction setColorLUT(\n  toolGroupId: string,\n  segmentationRepresentationUID: string,\n  colorLUTIndex: number\n): void {\n  const segRepresentation =\n    SegmentationState.getSegmentationRepresentationByUID(\n      toolGroupId,\n      segmentationRepresentationUID\n    );\n\n  if (!segRepresentation) {\n    throw new Error(\n      `setColorLUT: could not find segmentation representation with UID ${segmentationRepresentationUID}`\n    );\n  }\n\n  if (!SegmentationState.getColorLUT(colorLUTIndex)) {\n    throw new Error(\n      `setColorLUT: could not find colorLUT with index ${colorLUTIndex}`\n    );\n  }\n\n  segRepresentation.colorLUTIndex = colorLUTIndex;\n\n  triggerSegmentationRepresentationModified(\n    toolGroupId,\n    segmentationRepresentationUID\n  );\n}\n\n/**\n * Given a tool group UID, a segmentation representationUID, and a segment index, return the\n * color for that segment. It can be used for segmentation tools that need to\n * display the color of their annotation.\n *\n * @param toolGroupId - The Id of the tool group that owns the segmentation representation.\n * @param segmentationRepresentationUID - The uid of the segmentation representation\n * @param segmentIndex - The index of the segment in the segmentation\n * @returns A color.\n */\nfunction getColorForSegmentIndex(\n  toolGroupId: string,\n  segmentationRepresentationUID: string,\n  segmentIndex: number\n): Color {\n  const segmentationRepresentation =\n    SegmentationState.getSegmentationRepresentationByUID(\n      toolGroupId,\n      segmentationRepresentationUID\n    );\n\n  if (!segmentationRepresentation) {\n    throw new Error(\n      `segmentation representation with UID ${segmentationRepresentationUID} does not exist for tool group ${toolGroupId}`\n    );\n  }\n\n  const { colorLUTIndex } = segmentationRepresentation;\n\n  // get colorLUT\n  const colorLUT = SegmentationState.getColorLUT(colorLUTIndex);\n  return colorLUT[segmentIndex];\n}\n\nfunction setColorForSegmentIndex(\n  toolGroupId: string,\n  segmentationRepresentationUID: string,\n  segmentIndex: number,\n  color: Color\n): void {\n  // Get the reference to the color in the colorLUT.\n  const colorReference = getColorForSegmentIndex(\n    toolGroupId,\n    segmentationRepresentationUID,\n    segmentIndex\n  );\n\n  // Modify the values by reference\n  for (let i = 0; i < color.length; i++) {\n    colorReference[i] = color[i];\n  }\n\n  triggerSegmentationRepresentationModified(\n    toolGroupId,\n    segmentationRepresentationUID\n  );\n}\n\nexport {\n  getColorForSegmentIndex,\n  addColorLUT,\n  setColorLUT,\n  setColorForSegmentIndex,\n};\n","import { cache, Types } from '@cornerstonejs/core';\nimport * as SegmentationState from '../../../stateManagement/segmentation/segmentationState';\nimport { getSegmentationRepresentations } from '../../../stateManagement/segmentation/segmentationState';\nimport { ToolGroupSpecificRepresentation } from '../../../types/SegmentationStateTypes';\nimport { triggerSegmentationRepresentationModified } from '../triggerSegmentationEvents';\nimport SegmentationRepresentations from '../../../enums/SegmentationRepresentations';\n\nfunction getSegmentationIndices(segmentationId) {\n  const segmentation = SegmentationState.getSegmentation(segmentationId);\n\n  if (segmentation.type === SegmentationRepresentations.Labelmap) {\n    const volume = cache.getVolume(segmentationId);\n    const scalarData = volume.getScalarData();\n\n    const keySet = {};\n    for (let i = 0; i < scalarData.length; i++) {\n      const segmentIndex = scalarData[i];\n      if (segmentIndex !== 0 && !keySet[segmentIndex]) {\n        keySet[segmentIndex] = true;\n      }\n    }\n    return Object.keys(keySet).map((it) => parseInt(it, 10));\n  } else if (segmentation.type === SegmentationRepresentations.Contour) {\n    const geometryIds = segmentation.representationData.CONTOUR?.geometryIds;\n\n    if (!geometryIds) {\n      throw new Error(\n        `No geometryIds found for segmentationId ${segmentationId}`\n      );\n    }\n\n    return geometryIds.map((geometryId) => {\n      const geometry = cache.getGeometry(geometryId) as Types.IGeometry;\n      return (geometry.data as Types.IContourSet).getSegmentIndex();\n    });\n  }\n}\n\n/**\n * Set the visibility of a segmentation representation for a given tool group. It fires\n * a SEGMENTATION_REPRESENTATION_MODIFIED event. Visibility true will show all segments\n * and visibility false will hide all segments\"\n *\n * @triggers SEGMENTATION_REPRESENTATION_MODIFIED\n * @param toolGroupId - The Id of the tool group that contains the segmentation.\n * @param segmentationRepresentationUID - The id of the segmentation representation to modify its visibility.\n * @param visibility - boolean\n */\nfunction setSegmentationVisibility(\n  toolGroupId: string,\n  segmentationRepresentationUID: string,\n  visibility: boolean\n): void {\n  const toolGroupSegmentationRepresentations =\n    getSegmentationRepresentations(toolGroupId);\n\n  if (!toolGroupSegmentationRepresentations) {\n    return;\n  }\n\n  const representation = toolGroupSegmentationRepresentations.find(\n    (representation: ToolGroupSpecificRepresentation) =>\n      representation.segmentationRepresentationUID ===\n      segmentationRepresentationUID\n  );\n\n  if (!representation) {\n    return;\n  }\n\n  const { segmentsHidden, segmentationId } = representation;\n\n  const indices = getSegmentationIndices(segmentationId);\n\n  // if visibility is set to be true, we need to remove all the segments\n  // from the segmentsHidden set, otherwise we need to add all the segments\n  // to the segmentsHidden set\n  if (visibility) {\n    segmentsHidden.clear();\n  } else {\n    indices.forEach((index) => {\n      segmentsHidden.add(index);\n    });\n  }\n\n  triggerSegmentationRepresentationModified(\n    toolGroupId,\n    representation.segmentationRepresentationUID\n  );\n}\n\n/**\n * Get the visibility of a segmentation data for a given tool group.\n *\n * @param toolGroupId - The Id of the tool group that the segmentation\n * data belongs to.\n * @param segmentationRepresentationUID - The id of the segmentation data to get\n * @returns A boolean value that indicates whether the segmentation data is visible or\n * not on the toolGroup\n */\nfunction getSegmentationVisibility(\n  toolGroupId: string,\n  segmentationRepresentationUID: string\n): boolean | undefined {\n  const toolGroupSegmentationRepresentations =\n    getSegmentationRepresentations(toolGroupId);\n\n  const representation = toolGroupSegmentationRepresentations.find(\n    (representation: ToolGroupSpecificRepresentation) =>\n      representation.segmentationRepresentationUID ===\n      segmentationRepresentationUID\n  );\n\n  if (!representation) {\n    return;\n  }\n\n  const { segmentsHidden } = representation;\n\n  return segmentsHidden.size === 0;\n}\n\n/**\n * Set the visibility of the given segment indices to the given visibility. This\n * is a helper to set the visibility of multiple segments at once and reduces\n * the number of events fired.\n *\n * @param toolGroupId -  The tool group id of the segmentation representation.\n * @param segmentationRepresentationUID -  The UID of the segmentation\n * representation.\n * @param segmentIndices -  The indices of the segments to be hidden/shown.\n * @param visibility -  The visibility to set the segments to.\n *\n */\nfunction setSegmentsVisibility(\n  toolGroupId: string,\n  segmentationRepresentationUID: string,\n  segmentIndices: number[],\n  visibility: boolean\n): void {\n  const segRepresentation =\n    SegmentationState.getSegmentationRepresentationByUID(\n      toolGroupId,\n      segmentationRepresentationUID\n    );\n\n  if (!segRepresentation) {\n    return;\n  }\n\n  segmentIndices.forEach((segmentIndex) => {\n    visibility\n      ? segRepresentation.segmentsHidden.delete(segmentIndex)\n      : segRepresentation.segmentsHidden.add(segmentIndex);\n  });\n\n  triggerSegmentationRepresentationModified(\n    toolGroupId,\n    segmentationRepresentationUID\n  );\n}\n\nfunction setSegmentVisibility(\n  toolGroupId: string,\n  segmentationRepresentationUID: string,\n  segmentIndex: number,\n  visibility: boolean\n): void {\n  const segRepresentation =\n    SegmentationState.getSegmentationRepresentationByUID(\n      toolGroupId,\n      segmentationRepresentationUID\n    );\n\n  if (!segRepresentation) {\n    return;\n  }\n\n  visibility\n    ? segRepresentation.segmentsHidden.delete(segmentIndex)\n    : segRepresentation.segmentsHidden.add(segmentIndex);\n\n  triggerSegmentationRepresentationModified(\n    toolGroupId,\n    segmentationRepresentationUID\n  );\n}\n\nexport {\n  setSegmentationVisibility,\n  getSegmentationVisibility,\n  setSegmentVisibility,\n  setSegmentsVisibility,\n};\n","import { getSegmentation } from './segmentationState';\nimport { triggerSegmentationModified } from './triggerSegmentationEvents';\n\n/**\n * Set the active segment index for a segmentation Id. It fires a global state\n * modified event.\n *\n * @triggers SEGMENTATION_MODIFIED\n * @param segmentationId - The id of the segmentation that the segment belongs to.\n * @param segmentIndex - The index of the segment to be activated.\n */\nfunction setActiveSegmentIndex(\n  segmentationId: string,\n  segmentIndex: number\n): void {\n  const segmentation = getSegmentation(segmentationId);\n\n  if (segmentation?.activeSegmentIndex !== segmentIndex) {\n    segmentation.activeSegmentIndex = segmentIndex;\n\n    triggerSegmentationModified(segmentationId);\n  }\n}\n\n/**\n * Get the active segment index for a segmentation in the global state\n * @param segmentationId - The id of the segmentation to get the active segment index from.\n * @returns The active segment index for the given segmentation.\n */\nfunction getActiveSegmentIndex(segmentationId: string): number | undefined {\n  const segmentation = getSegmentation(segmentationId);\n\n  if (segmentation) {\n    return segmentation.activeSegmentIndex;\n  }\n}\n\nexport { getActiveSegmentIndex, setActiveSegmentIndex };\n","import {\n  StackViewport,\n  utilities,\n  BaseVolumeViewport,\n  VideoViewport,\n} from '@cornerstonejs/core';\nimport { Types } from '@cornerstonejs/core';\nimport { ToolModes } from '../../enums';\nimport { InteractionTypes, ToolProps, PublicToolProps } from '../../types';\n\nexport interface IBaseTool {\n  /** ToolGroup ID the tool instance belongs to */\n  toolGroupId: string;\n  /** Tool supported interaction types */\n  supportedInteractionTypes: InteractionTypes[];\n  /** Tool Mode : Active, Passive, Enabled, Disabled */\n  mode: ToolModes;\n  /** Tool Configuration */\n  configuration: {\n    preventHandleOutsideImage?: boolean;\n    strategies?: Record<string, any>;\n    defaultStrategy?: string;\n    activeStrategy?: string;\n    strategyOptions?: Record<string, unknown>;\n  };\n}\n\n/**\n * Abstract base class from which all tools derive.\n * Deals with cleanly merging custom and default configuration, and strategy\n * application.\n */\nabstract class BaseTool implements IBaseTool {\n  static toolName;\n  /** Supported Interaction Types - currently only Mouse */\n  public supportedInteractionTypes: InteractionTypes[];\n  public configuration: Record<string, any>;\n  /** ToolGroup ID the tool instance belongs to */\n  public toolGroupId: string;\n  /** Tool Mode - Active/Passive/Enabled/Disabled/ */\n  public mode: ToolModes;\n\n  constructor(toolProps: PublicToolProps, defaultToolProps: ToolProps) {\n    const initialProps = utilities.deepMerge(defaultToolProps, toolProps);\n\n    const {\n      configuration = {},\n      supportedInteractionTypes,\n      toolGroupId,\n    } = initialProps;\n\n    // If strategies are not initialized in the tool config\n    if (!configuration.strategies) {\n      configuration.strategies = {};\n      configuration.defaultStrategy = undefined;\n      configuration.activeStrategy = undefined;\n      configuration.strategyOptions = {};\n    }\n\n    this.toolGroupId = toolGroupId;\n    this.supportedInteractionTypes = supportedInteractionTypes || [];\n    this.configuration = Object.assign({}, configuration);\n    this.mode = ToolModes.Disabled;\n  }\n\n  /**\n   * Returns the name of the tool\n   * @returns The name of the tool.\n   */\n  public getToolName(): string {\n    // Since toolName is static we get it from the class constructor\n    return (<typeof BaseTool>this.constructor).toolName;\n  }\n\n  /**\n   * It applies the active strategy to the enabled element.\n   * @param enabledElement - The element that is being operated on.\n   * @param operationData - The data that needs to be passed to the strategy.\n   * @returns The result of the strategy.\n   */\n  public applyActiveStrategy(\n    enabledElement: Types.IEnabledElement,\n    operationData: unknown\n  ): any {\n    const { strategies, activeStrategy } = this.configuration;\n    return strategies[activeStrategy].call(this, enabledElement, operationData);\n  }\n\n  /**\n   * merges the new configuration with the tool configuration\n   * @param configuration - toolConfiguration\n   */\n  public setConfiguration(newConfiguration: Record<string, any>): void {\n    this.configuration = utilities.deepMerge(\n      this.configuration,\n      newConfiguration\n    );\n  }\n\n  /**\n   * Sets the active strategy for a tool. Strategies are\n   * multiple implementations of tool behavior that can be switched by tool\n   * configuration.\n   *\n   * @param strategyName - name of the strategy to be set as active\n   */\n  public setActiveStrategy(strategyName: string): void {\n    this.setConfiguration({ activeStrategy: strategyName });\n  }\n\n  /**\n   * Returns the volumeId for the volume viewport. It will grabbed the volumeId\n   * from the volumeId if particularly specified in the tool configuration, or if\n   * not, the first actorUID in the viewport is returned as the volumeId. NOTE: for\n   * segmentations, actorUID is not necessarily the volumeId since the segmentation\n   * can have multiple representations, use segmentation helpers to get the volumeId\n   * based on the actorUID.\n   *\n   * @param viewport - Volume viewport\n   * @returns the volumeId for the viewport if specified in the tool configuration,\n   * or the first actorUID in the viewport if not.\n   */\n  private getTargetVolumeId(viewport: Types.IViewport): string | undefined {\n    if (this.configuration.volumeId) {\n      return this.configuration.volumeId;\n    }\n\n    // If volume not specified, then return the actorUID for the\n    // default actor - first actor\n    const actorEntries = viewport.getActors();\n\n    if (!actorEntries) {\n      return;\n    }\n\n    // find the first image actor of instance type vtkVolume\n    return actorEntries.find(\n      (actorEntry) => actorEntry.actor.getClassName() === 'vtkVolume'\n    )?.uid;\n  }\n\n  /**\n   * Get the image that is displayed for the targetId in the cachedStats\n   * which can be either imageId:<imageId> or volumeId:<volumeId>\n   *\n   * @param targetId - annotation targetId stored in the cached stats\n   * @param renderingEngine - The rendering engine\n   * @returns The image data for the target.\n   */\n  protected getTargetIdImage(\n    targetId: string,\n    renderingEngine: Types.IRenderingEngine\n  ): Types.IImageData | Types.CPUIImageData | Types.IImageVolume {\n    if (targetId.startsWith('imageId:')) {\n      const imageId = targetId.split('imageId:')[1];\n      const imageURI = utilities.imageIdToURI(imageId);\n      let viewports = utilities.getViewportsWithImageURI(\n        imageURI,\n        renderingEngine.id\n      );\n\n      if (!viewports || !viewports.length) {\n        return;\n      }\n\n      viewports = viewports.filter((viewport) => {\n        return viewport.getCurrentImageId() === imageId;\n      });\n\n      if (!viewports || !viewports.length) {\n        return;\n      }\n\n      return viewports[0].getImageData();\n    } else if (targetId.startsWith('volumeId:')) {\n      const volumeId = targetId.split('volumeId:')[1];\n      const viewports = utilities.getViewportsWithVolumeId(\n        volumeId,\n        renderingEngine.id\n      );\n\n      if (!viewports || !viewports.length) {\n        return;\n      }\n\n      return viewports[0].getImageData();\n    } else {\n      throw new Error(\n        'getTargetIdImage: targetId must start with \"imageId:\" or \"volumeId:\"'\n      );\n    }\n  }\n\n  /**\n   * Get the target Id for the viewport which will be used to store the cached\n   * statistics scoped to that target in the annotations.\n   * For StackViewport, targetId is the viewportId, but for the volume viewport,\n   * the targetId will be grabbed from the volumeId if particularly specified\n   * in the tool configuration, or if not, the first actorUID in the viewport.\n   *\n   * @param viewport - viewport to get the targetId for\n   * @returns targetId\n   */\n  protected getTargetId(viewport: Types.IViewport): string | undefined {\n    if (viewport instanceof StackViewport) {\n      return `imageId:${viewport.getCurrentImageId()}`;\n    } else if (viewport instanceof BaseVolumeViewport) {\n      return `volumeId:${this.getTargetVolumeId(viewport)}`;\n    } else if (viewport instanceof VideoViewport) {\n      return '';\n    } else {\n      throw new Error(\n        'getTargetId: viewport must be a StackViewport or VolumeViewport'\n      );\n    }\n  }\n}\n\n// Note: this is a workaround since terser plugin does not support static blocks\n// yet and we can't easily say static toolName = \"BaseTool\" in the class definition.\nBaseTool.toolName = 'BaseTool';\nexport default BaseTool;\n","import { state } from '../store';\nimport { getEnabledElement } from '@cornerstonejs/core';\nimport { SVGDrawingHelper } from '../types';\n\nconst VIEWPORT_ELEMENT = 'viewport-element';\n\n/**\n * Returns the SVG drawing helper for the given HTML element.\n * @param element - The HTML element to get the SVG drawing helper for.\n * @private\n */\nfunction getSvgDrawingHelper(element: HTMLDivElement): SVGDrawingHelper {\n  const enabledElement = getEnabledElement(element);\n  const { viewportId, renderingEngineId } = enabledElement;\n  const canvasHash = `${viewportId}:${renderingEngineId}`;\n  const svgLayerElement = _getSvgLayer(element);\n\n  // Reset touched\n  Object.keys(state.svgNodeCache[canvasHash]).forEach((cacheKey) => {\n    state.svgNodeCache[canvasHash][cacheKey].touched = false;\n  });\n\n  return {\n    svgLayerElement: svgLayerElement,\n    svgNodeCacheForCanvas: state.svgNodeCache,\n    getSvgNode: getSvgNode.bind(this, canvasHash),\n    appendNode: appendNode.bind(this, svgLayerElement, canvasHash),\n    setNodeTouched: setNodeTouched.bind(this, canvasHash),\n    clearUntouched: clearUntouched.bind(this, svgLayerElement, canvasHash),\n  };\n}\n\n/**\n *\n * @param element\n * @private\n */\nfunction _getSvgLayer(element) {\n  const viewportElement = `.${VIEWPORT_ELEMENT}`;\n  const internalDivElement = element.querySelector(viewportElement);\n\n  // Using :scope to make sure the right svg layer is selected otherwise it\n  // may select one from a nested viewport (eg: AdvancedMagnifyTool).\n  const svgLayer = internalDivElement.querySelector(':scope > .svg-layer');\n\n  return svgLayer;\n}\n\nfunction getSvgNode(canvasHash, cacheKey) {\n  // If state has been reset\n  if (!state.svgNodeCache[canvasHash]) {\n    return;\n  }\n\n  if (state.svgNodeCache[canvasHash][cacheKey]) {\n    return state.svgNodeCache[canvasHash][cacheKey].domRef;\n  }\n}\n\nfunction appendNode(svgLayerElement, canvasHash, svgNode, cacheKey) {\n  // If state has been reset\n  if (!state.svgNodeCache[canvasHash]) {\n    return null;\n  }\n\n  state.svgNodeCache[canvasHash][cacheKey] = {\n    touched: true,\n    domRef: svgNode,\n  };\n\n  svgLayerElement.appendChild(svgNode);\n}\n\nfunction setNodeTouched(canvasHash, cacheKey) {\n  // If state has been reset\n  if (!state.svgNodeCache[canvasHash]) {\n    return;\n  }\n\n  if (state.svgNodeCache[canvasHash][cacheKey]) {\n    state.svgNodeCache[canvasHash][cacheKey].touched = true;\n  }\n}\n\nfunction clearUntouched(svgLayerElement, canvasHash) {\n  // If state has been reset\n  if (!state.svgNodeCache[canvasHash]) {\n    return;\n  }\n\n  Object.keys(state.svgNodeCache[canvasHash]).forEach((cacheKey) => {\n    const cacheEntry = state.svgNodeCache[canvasHash][cacheKey];\n\n    if (!cacheEntry.touched && cacheEntry.domRef) {\n      svgLayerElement.removeChild(cacheEntry.domRef);\n      delete state.svgNodeCache[canvasHash][cacheKey];\n    }\n  });\n}\n\nexport default getSvgDrawingHelper;\n","import getSvgDrawingHelper from './getSvgDrawingHelper';\n\nfunction draw(\n  element: HTMLDivElement,\n  fn: (svgDrawingElement: any) => any\n): void {\n  const svgDrawingHelper = getSvgDrawingHelper(element);\n\n  // Save...\n  fn(svgDrawingHelper);\n  // Restore...\n\n  svgDrawingHelper.clearUntouched();\n}\n\nexport default draw;\n","function _getHash(\n  annotationUID: string,\n  drawingElementType: string,\n  nodeUID: string\n): string {\n  return `${annotationUID}::${drawingElementType}::${nodeUID}`;\n}\n\nexport default _getHash;\n","export function setAttributesIfNecessary(attributes, svgNode) {\n  Object.keys(attributes).forEach((key) => {\n    const currentValue = svgNode.getAttribute(key);\n    const newValue = attributes[key];\n    if (newValue === undefined || newValue === '') {\n      svgNode.removeAttribute(key);\n    } else if (currentValue !== newValue) {\n      svgNode.setAttribute(key, newValue);\n    }\n  });\n}\n\nexport default setAttributesIfNecessary;\n","export function setNewAttributesIfValid(attributes, svgNode) {\n  Object.keys(attributes).forEach((key) => {\n    const newValue = attributes[key];\n    if (newValue !== undefined && newValue !== '') {\n      svgNode.setAttribute(key, newValue);\n    }\n  });\n}\n\nexport default setNewAttributesIfValid;\n","import type { Types } from '@cornerstonejs/core';\nimport { SVGDrawingHelper } from '../types';\n\nimport _getHash from './_getHash';\n\nimport setAttributesIfNecessary from './setAttributesIfNecessary';\nimport setNewAttributesIfValid from './setNewAttributesIfValid';\n\nfunction drawCircle(\n  svgDrawingHelper: SVGDrawingHelper,\n  annotationUID: string,\n  circleUID: string,\n  center: Types.Point2,\n  radius: number,\n  options = {},\n  dataId = ''\n): void {\n  const {\n    color,\n    fill,\n    width,\n    lineWidth,\n    lineDash,\n    fillOpacity,\n    strokeOpacity,\n  } = Object.assign(\n    {\n      color: 'dodgerblue',\n      fill: 'transparent',\n      width: '2',\n      lineDash: undefined,\n      lineWidth: undefined,\n      strokeOpacity: 1,\n      fillOpacity: 1,\n    },\n    options\n  );\n\n  // for supporting both lineWidth and width options\n  const strokeWidth = lineWidth || width;\n\n  // variable for the namespace\n  const svgns = 'http://www.w3.org/2000/svg';\n  const svgNodeHash = _getHash(annotationUID, 'circle', circleUID);\n  const existingCircleElement = svgDrawingHelper.getSvgNode(svgNodeHash);\n\n  const attributes = {\n    cx: `${center[0]}`,\n    cy: `${center[1]}`,\n    r: `${radius}`,\n    stroke: color,\n    fill,\n    'stroke-width': strokeWidth,\n    'stroke-dasharray': lineDash,\n    'fill-opacity': fillOpacity, // setting fill opacity\n    'stroke-opacity': strokeOpacity, // setting stroke opacity\n  };\n\n  if (existingCircleElement) {\n    setAttributesIfNecessary(attributes, existingCircleElement);\n\n    svgDrawingHelper.setNodeTouched(svgNodeHash);\n  } else {\n    const newCircleElement = document.createElementNS(svgns, 'circle');\n\n    if (dataId !== '') {\n      newCircleElement.setAttribute('data-id', dataId);\n    }\n\n    setNewAttributesIfValid(attributes, newCircleElement);\n\n    svgDrawingHelper.appendNode(newCircleElement, svgNodeHash);\n  }\n}\n\nexport default drawCircle;\n","import type { Types } from '@cornerstonejs/core';\nimport { SVGDrawingHelper } from '../types';\n\nimport _getHash from './_getHash';\nimport setAttributesIfNecessary from './setAttributesIfNecessary';\nimport setNewAttributesIfValid from './setNewAttributesIfValid';\n\nfunction drawEllipse(\n  svgDrawingHelper: SVGDrawingHelper,\n  annotationUID: string,\n  ellipseUID: string,\n  corner1: Types.Point2,\n  corner2: Types.Point2,\n  options = {},\n  dataId = ''\n): void {\n  const { color, width, lineWidth, lineDash } = Object.assign(\n    {\n      color: 'dodgerblue',\n      width: '2',\n      lineWidth: undefined,\n      lineDash: undefined,\n    },\n    options\n  );\n\n  // for supporting both lineWidth and width options\n  const strokeWidth = lineWidth || width;\n\n  const svgns = 'http://www.w3.org/2000/svg';\n  const svgNodeHash = _getHash(annotationUID, 'ellipse', ellipseUID);\n  const existingEllipse = svgDrawingHelper.getSvgNode(svgNodeHash);\n\n  const w = Math.abs(corner1[0] - corner2[0]);\n  const h = Math.abs(corner1[1] - corner2[1]);\n  const xMin = Math.min(corner1[0], corner2[0]);\n  const yMin = Math.min(corner1[1], corner2[1]);\n\n  const center = [xMin + w / 2, yMin + h / 2];\n  const radiusX = w / 2;\n  const radiusY = h / 2;\n\n  const attributes = {\n    cx: `${center[0]}`,\n    cy: `${center[1]}`,\n    rx: `${radiusX}`,\n    ry: `${radiusY}`,\n    stroke: color,\n    fill: 'transparent',\n    'stroke-width': strokeWidth,\n    'stroke-dasharray': lineDash,\n  };\n\n  if (existingEllipse) {\n    setAttributesIfNecessary(attributes, existingEllipse);\n\n    svgDrawingHelper.setNodeTouched(svgNodeHash);\n  } else {\n    const svgEllipseElement = document.createElementNS(svgns, 'ellipse');\n\n    if (dataId !== '') {\n      svgEllipseElement.setAttribute('data-id', dataId);\n    }\n\n    setNewAttributesIfValid(attributes, svgEllipseElement);\n\n    svgDrawingHelper.appendNode(svgEllipseElement, svgNodeHash);\n  }\n}\n\nexport default drawEllipse;\n","import type { Types } from '@cornerstonejs/core';\n\nimport _getHash from './_getHash';\nimport setNewAttributesIfValid from './setNewAttributesIfValid';\nimport setAttributesIfNecessary from './setAttributesIfNecessary';\nimport { SVGDrawingHelper } from '../types';\n\nfunction drawHandles(\n  svgDrawingHelper: SVGDrawingHelper,\n  annotationUID: string,\n  handleGroupUID: string,\n  handlePoints: Array<Types.Point2>,\n  options = {}\n): void {\n  const { color, handleRadius, width, lineWidth, fill, type, opacity } =\n    Object.assign(\n      {\n        color: 'dodgerblue',\n        handleRadius: '6',\n        width: '2',\n        lineWidth: undefined,\n        fill: 'transparent',\n        type: 'circle',\n        opacity: 1,\n      },\n      options\n    );\n\n  // for supporting both lineWidth and width options\n  const strokeWidth = lineWidth || width;\n\n  for (let i = 0; i < handlePoints.length; i++) {\n    const handle = handlePoints[i];\n\n    // variable for the namespace\n    const svgns = 'http://www.w3.org/2000/svg';\n    const svgNodeHash = _getHash(\n      annotationUID,\n      'handle',\n      `hg-${handleGroupUID}-index-${i}`\n    );\n\n    let attributes;\n    if (type === 'circle') {\n      attributes = {\n        cx: `${handle[0]}`,\n        cy: `${handle[1]}`,\n        r: handleRadius,\n        stroke: color,\n        fill,\n        'stroke-width': strokeWidth,\n        opacity: opacity,\n      };\n    } else if (type === 'rect') {\n      const handleRadiusFloat = parseFloat(handleRadius);\n      const side = handleRadiusFloat * 1.5;\n      const x = handle[0] - side * 0.5;\n      const y = handle[1] - side * 0.5;\n\n      attributes = {\n        x: `${x}`,\n        y: `${y}`,\n        width: `${side}`,\n        height: `${side}`,\n        stroke: color,\n        fill,\n        'stroke-width': strokeWidth,\n        rx: `${side * 0.1}`,\n        opacity: opacity,\n      };\n    } else {\n      throw new Error(`Unsupported handle type: ${type}`);\n    }\n\n    const existingHandleElement = svgDrawingHelper.getSvgNode(svgNodeHash);\n\n    if (existingHandleElement) {\n      setAttributesIfNecessary(attributes, existingHandleElement);\n\n      svgDrawingHelper.setNodeTouched(svgNodeHash);\n    } else {\n      const newHandleElement = document.createElementNS(svgns, type);\n\n      setNewAttributesIfValid(attributes, newHandleElement);\n\n      svgDrawingHelper.appendNode(newHandleElement, svgNodeHash);\n    }\n  }\n}\n\nexport default drawHandles;\n","import type { Types } from '@cornerstonejs/core';\n\nimport _getHash from './_getHash';\nimport setNewAttributesIfValid from './setNewAttributesIfValid';\nimport setAttributesIfNecessary from './setAttributesIfNecessary';\nimport { SVGDrawingHelper } from '../types';\n\nexport default function drawLine(\n  svgDrawingHelper: SVGDrawingHelper,\n  annotationUID: string,\n  lineUID: string,\n  start: Types.Point2,\n  end: Types.Point2,\n  options = {},\n  dataId = ''\n): void {\n  // if length is NaN return\n  if (isNaN(start[0]) || isNaN(start[1]) || isNaN(end[0]) || isNaN(end[1])) {\n    return;\n  }\n\n  const { color, width, lineWidth, lineDash, shadow } = Object.assign(\n    {\n      color: 'dodgerblue',\n      width: '2',\n      lineWidth: undefined,\n      lineDash: undefined,\n      shadow: undefined,\n    },\n    options\n  );\n\n  // for supporting both lineWidth and width options\n  const strokeWidth = lineWidth || width;\n\n  const svgns = 'http://www.w3.org/2000/svg';\n  const svgNodeHash = _getHash(annotationUID, 'line', lineUID);\n  const existingLine = svgDrawingHelper.getSvgNode(svgNodeHash);\n  const dropShadowStyle = shadow\n    ? `filter:url(#shadow-${svgDrawingHelper.svgLayerElement.id});`\n    : '';\n\n  const attributes = {\n    x1: `${start[0]}`,\n    y1: `${start[1]}`,\n    x2: `${end[0]}`,\n    y2: `${end[1]}`,\n    stroke: color,\n    style: dropShadowStyle,\n    'stroke-width': strokeWidth,\n    'stroke-dasharray': lineDash,\n  };\n\n  if (existingLine) {\n    // This is run to avoid re-rendering annotations that actually haven't changed\n    setAttributesIfNecessary(attributes, existingLine);\n\n    svgDrawingHelper.setNodeTouched(svgNodeHash);\n  } else {\n    const newLine = document.createElementNS(svgns, 'line');\n\n    if (dataId !== '') {\n      newLine.setAttribute('data-id', dataId);\n    }\n\n    setNewAttributesIfValid(attributes, newLine);\n\n    svgDrawingHelper.appendNode(newLine, svgNodeHash);\n  }\n}\n","import type { Types } from '@cornerstonejs/core';\nimport _getHash from './_getHash';\nimport setNewAttributesIfValid from './setNewAttributesIfValid';\nimport setAttributesIfNecessary from './setAttributesIfNecessary';\nimport { SVGDrawingHelper } from '../types';\n\n/**\n * Draws an SVG polyline with the given points.\n *\n * The `connectLastToFirst` option, if true, draws a closed polyline, with the\n * last point connected to the first.\n */\nexport default function drawPolyline(\n  svgDrawingHelper: SVGDrawingHelper,\n  annotationUID: string,\n  polylineUID: string,\n  points: Types.Point2[],\n  options: {\n    color?: string;\n    fillColor?: string;\n    fillOpacity?: number;\n    width?: number;\n    lineWidth?: number;\n    lineDash?: string;\n    connectLastToFirst?: boolean;\n  }\n): void {\n  if (points.length < 2) {\n    return;\n  }\n\n  const { fillColor, fillOpacity, color, width, lineWidth, lineDash } =\n    Object.assign(\n      {\n        color: 'dodgerblue',\n        width: '2',\n        fillColor: 'none',\n        fillOpacity: 0,\n        lineWidth: undefined,\n        lineDash: undefined,\n        connectLastToFirst: false,\n      },\n      options\n    );\n\n  // for supporting both lineWidth and width options\n  const strokeWidth = lineWidth || width;\n\n  const svgns = 'http://www.w3.org/2000/svg';\n  const svgNodeHash = _getHash(annotationUID, 'polyline', polylineUID);\n  const existingPolyLine = svgDrawingHelper.getSvgNode(svgNodeHash);\n\n  let pointsAttribute = '';\n\n  for (const point of points) {\n    pointsAttribute += `${point[0]}, ${point[1]} `;\n  }\n\n  if (options.connectLastToFirst) {\n    const firstPoint = points[0];\n\n    pointsAttribute += `${firstPoint[0]}, ${firstPoint[1]}`;\n  }\n\n  const attributes = {\n    points: pointsAttribute,\n    stroke: color,\n    fill: fillColor,\n    'fill-opacity': fillOpacity,\n    'stroke-width': strokeWidth,\n    'stroke-dasharray': lineDash,\n  };\n\n  if (existingPolyLine) {\n    // This is run to avoid re-rendering annotations that actually haven't changed\n    setAttributesIfNecessary(attributes, existingPolyLine);\n\n    svgDrawingHelper.setNodeTouched(svgNodeHash);\n  } else {\n    const newPolyLine = document.createElementNS(svgns, 'polyline');\n\n    setNewAttributesIfValid(attributes, newPolyLine);\n\n    svgDrawingHelper.appendNode(newPolyLine, svgNodeHash);\n  }\n}\n","import type { Types } from '@cornerstonejs/core';\nimport { SVGDrawingHelper } from '../types';\n\nimport _getHash from './_getHash';\nimport setAttributesIfNecessary from './setAttributesIfNecessary';\n\n/**\n * Draws a textBox.\n *\n * @param textLines - The text to display.\n * @param position - The x/y position of the textbox\n * @param options - Options for the textBox.\n * @returns Bounding box; can be used for isPointNearTool\n */\nfunction drawTextBox(\n  svgDrawingHelper: SVGDrawingHelper,\n  annotationUID: string,\n  textUID: string,\n  textLines: Array<string>,\n  position: Types.Point2,\n  options = {}\n): SVGRect {\n  const mergedOptions = Object.assign(\n    {\n      fontFamily: 'Helvetica, Arial, sans-serif',\n      fontSize: '14px',\n      color: 'rgb(255, 255, 0)',\n      background: '',\n      padding: 25,\n      centerX: false,\n      centerY: true,\n    },\n    options\n  );\n\n  // Draw each of the text lines on top of the background box\n  const textGroupBoundingBox = _drawTextGroup(\n    svgDrawingHelper,\n    annotationUID,\n    textUID,\n    textLines,\n    position,\n    mergedOptions\n  );\n\n  return textGroupBoundingBox;\n}\n\nfunction _drawTextGroup(\n  svgDrawingHelper: SVGDrawingHelper,\n  annotationUID: string,\n  textUID: string,\n  textLines: Array<string> = [''],\n  position: Types.Point2,\n  options: any\n): SVGRect {\n  const { padding, color, fontFamily, fontSize, background } = options;\n\n  let textGroupBoundingBox;\n  const [x, y] = [position[0] + padding, position[1] + padding];\n  const svgns = 'http://www.w3.org/2000/svg';\n  const svgNodeHash = _getHash(annotationUID, 'text', textUID);\n  const existingTextGroup = svgDrawingHelper.getSvgNode(svgNodeHash);\n\n  // Todo: right now textBox gets a re-render even if the textBox has not changed\n  // and evenIf the attributes are not set again since they are the same.\n  if (existingTextGroup) {\n    // TODO: Iterate each node and update color? font-size?\n    const textElement = existingTextGroup.querySelector('text');\n    const textSpans = Array.from(textElement.children) as Array<SVGElement>;\n\n    for (let i = 0; i < textSpans.length; i++) {\n      const textSpanElement = textSpans[i];\n      const text = textLines[i] || '';\n\n      textSpanElement.textContent = text;\n    }\n\n    // if the textLines have changed size, we need to create textSpans for them\n    if (textLines.length > textSpans.length) {\n      for (let i = 0; i < textLines.length - textSpans.length; i++) {\n        const textLine = textLines[i + textSpans.length];\n        const textSpan = _createTextSpan(textLine);\n\n        textElement.appendChild(textSpan);\n      }\n\n      existingTextGroup.appendChild(textElement);\n      svgDrawingHelper.appendNode(existingTextGroup, svgNodeHash);\n    }\n\n    const textAttributes = {\n      fill: color,\n      'font-size': fontSize,\n      'font-family': fontFamily,\n    };\n\n    const textGroupAttributes = {\n      transform: `translate(${x} ${y})`,\n    };\n\n    // Todo: for some reason this does not work to not re-render the textBox\n    setAttributesIfNecessary(textAttributes, textElement);\n    setAttributesIfNecessary(textGroupAttributes, existingTextGroup);\n\n    textGroupBoundingBox = _drawTextBackground(existingTextGroup, background);\n\n    svgDrawingHelper.setNodeTouched(svgNodeHash);\n  } else {\n    const textGroup = document.createElementNS(svgns, 'g');\n\n    textGroup.setAttribute('transform', `translate(${x} ${y})`);\n\n    //\n    const textElement = _createTextElement(svgDrawingHelper, options);\n    for (let i = 0; i < textLines.length; i++) {\n      const textLine = textLines[i];\n      const textSpan = _createTextSpan(textLine);\n\n      textElement.appendChild(textSpan);\n    }\n\n    textGroup.appendChild(textElement);\n    svgDrawingHelper.appendNode(textGroup, svgNodeHash);\n    textGroupBoundingBox = _drawTextBackground(textGroup, background);\n  }\n\n  // We translate the group using `position`\n  // which means we also need to pluck those values when returning\n  // the bounding box\n  return Object.assign({}, textGroupBoundingBox, {\n    x,\n    y,\n    height: textGroupBoundingBox.height + padding,\n    width: textGroupBoundingBox.width + padding,\n  });\n}\n\nfunction _createTextElement(\n  svgDrawingHelper: SVGDrawingHelper,\n  options: any\n): SVGElement {\n  const { color, fontFamily, fontSize } = options;\n  const svgns = 'http://www.w3.org/2000/svg';\n  const textElement = document.createElementNS(svgns, 'text');\n  const noSelectStyle =\n    'user-select: none; pointer-events: none; -webkit-tap-highlight-color:  rgba(255, 255, 255, 0);';\n  const dropShadowStyle = `filter:url(#shadow-${svgDrawingHelper.svgLayerElement.id});`;\n  const combinedStyle = `${noSelectStyle}${dropShadowStyle}`;\n\n  // font-size=\"100\"\n  textElement.setAttribute('x', '0');\n  textElement.setAttribute('y', '0');\n  textElement.setAttribute('fill', color);\n  textElement.setAttribute('font-family', fontFamily);\n  textElement.setAttribute('font-size', fontSize);\n  textElement.setAttribute('style', combinedStyle);\n\n  return textElement;\n}\n\nfunction _createTextSpan(text): SVGElement {\n  const svgns = 'http://www.w3.org/2000/svg';\n  const textSpanElement = document.createElementNS(svgns, 'tspan');\n\n  // TODO: centerX\n  // (parent width / 2) - my width\n  // TODO: centerY\n\n  textSpanElement.setAttribute('x', '0');\n  textSpanElement.setAttribute('dy', '1.2em');\n  textSpanElement.textContent = text;\n\n  return textSpanElement;\n}\n\nfunction _drawTextBackground(group: SVGGElement, color: string) {\n  let element = group.querySelector('rect.background');\n\n  // If we have no background color, remove any element that exists and return\n  // the bounding box of the text\n  if (!color) {\n    if (element) {\n      group.removeChild(element);\n    }\n\n    return group.getBBox();\n  }\n\n  // Otherwise, check if we have a <rect> element. If not, create one\n  if (!element) {\n    element = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n    element.setAttribute('class', 'background');\n    group.insertBefore(element, group.firstChild);\n  }\n\n  // Get the text groups's bounding box and use it to draw the background rectangle\n  const bBox = group.getBBox();\n\n  const attributes = {\n    x: `${bBox.x}`,\n    y: `${bBox.y}`,\n    width: `${bBox.width}`,\n    height: `${bBox.height}`,\n    fill: color,\n  };\n\n  setAttributesIfNecessary(attributes, element);\n\n  return bBox;\n}\n\nexport default drawTextBox;\n","import type { Types } from '@cornerstonejs/core';\n\n/**\n * Find the closest point to the target point\n *\n * @param sourcePoints - The potential source points.\n * @param targetPoint - The target point, used to find the closest source.\n * @returns The closest point in the array of point sources\n */\nexport default function findClosestPoint(\n  sourcePoints: Array<Types.Point2>,\n  targetPoint: Types.Point2\n): Types.Point2 {\n  let minPoint = [0, 0];\n  let minDistance = Number.MAX_SAFE_INTEGER;\n\n  sourcePoints.forEach(function (sourcePoint) {\n    const distance = _distanceBetween(targetPoint, sourcePoint);\n\n    if (distance < minDistance) {\n      minDistance = distance;\n      minPoint = [...sourcePoint];\n    }\n  });\n\n  return minPoint as Types.Point2;\n}\n\n/**\n *\n * @private\n * @param p1\n * @param p2\n */\nfunction _distanceBetween(p1: Types.Point2, p2: Types.Point2): number {\n  const [x1, y1] = p1;\n  const [x2, y2] = p2;\n\n  return Math.sqrt(Math.pow(x1 - x2, 2) + Math.pow(y1 - y2, 2));\n}\n","import type { Types } from '@cornerstonejs/core';\n\nimport drawLine from './drawLine';\nimport findClosestPoint from '../utilities/math/vec2/findClosestPoint';\nimport { PlanarBoundingBox, SVGDrawingHelper } from '../types';\n\n/**\n * Draw a link between an annotation to a box.\n */\nfunction drawLink(\n  svgDrawingHelper: SVGDrawingHelper,\n  annotationUID: string,\n  linkUID: string,\n  // Find closest point to approx. bounding box\n  annotationAnchorPoints: Array<Types.Point2>,\n  refPoint: Types.Point2,\n  // Find bounding box point that's closest to our identified\n  // start point\n  boundingBox: PlanarBoundingBox,\n  options = {}\n): void {\n  // The closest anchor point (for the annotation) to the\n  // text box / bounding box\n  const start =\n    annotationAnchorPoints.length > 0\n      ? findClosestPoint(annotationAnchorPoints, refPoint)\n      : refPoint;\n\n  // Calculate the midpoints of the bounding box\n  const boundingBoxPoints = _boundingBoxPoints(boundingBox);\n  // Find the closest textBox midpoint to the annotation's anchor/start point\n  const end = findClosestPoint(boundingBoxPoints, start);\n\n  // Finally we draw the dashed linking line\n  const mergedOptions = Object.assign(\n    {\n      color: 'rgb(255, 255, 0)',\n      lineWidth: '1',\n      lineDash: '2,3',\n    },\n    options\n  );\n\n  drawLine(\n    svgDrawingHelper,\n    annotationUID,\n    `link-${linkUID}`,\n    start,\n    end,\n    mergedOptions\n  );\n}\n\n/**\n * Find potential anchor points for a given bounding box. For example, it may\n * look nicer to draw a line from the \"middle left\" of a bounding box to an\n * annotation (instead of from a corner). This function calculates those points\n *\n * @param boundingBox\n */\nfunction _boundingBoxPoints(\n  boundingBox: PlanarBoundingBox\n): Array<Types.Point2> {\n  const { x: left, y: top, height, width } = boundingBox;\n  const halfWidth = width / 2;\n  const halfHeight = height / 2;\n\n  const topMiddle = [left + halfWidth, top] as Types.Point2;\n  const leftMiddle = [left, top + halfHeight] as Types.Point2;\n  const bottomMiddle = [left + halfWidth, top + height] as Types.Point2;\n  const rightMiddle = [left + width, top + halfHeight] as Types.Point2;\n\n  return [topMiddle, leftMiddle, bottomMiddle, rightMiddle];\n}\n\nexport default drawLink;\n","import type { Types } from '@cornerstonejs/core';\n\nimport drawTextBox from './drawTextBox';\nimport drawLink from './drawLink';\nimport { SVGDrawingHelper } from '../types';\n\nfunction drawLinkedTextBox(\n  svgDrawingHelper: SVGDrawingHelper,\n  annotationUID: string,\n  textBoxUID: string,\n  //\n  textLines: Array<string>,\n  textBoxPosition: Types.Point2,\n  annotationAnchorPoints: Array<Types.Point2>,\n  textBox: unknown,\n  options = {}\n  // TODO: yCenter as an option\n): SVGRect {\n  const mergedOptions = Object.assign(\n    {\n      handleRadius: '6',\n      centering: {\n        x: false,\n        y: true, // yCenter,\n      },\n    },\n    options\n  );\n\n  // Draw the text box\n  const canvasBoundingBox = drawTextBox(\n    svgDrawingHelper,\n    annotationUID,\n    textBoxUID,\n    textLines,\n    textBoxPosition,\n    mergedOptions\n  );\n  // if (textBox.hasMoved) {\n  //   // Draw dashed link line between tool and text\n  drawLink(\n    svgDrawingHelper,\n    annotationUID,\n    textBoxUID,\n    annotationAnchorPoints, // annotationAnchorPoints\n    textBoxPosition, // refPoint (text)\n    canvasBoundingBox, // textBoxBoundingBox\n    mergedOptions\n  );\n  // }\n\n  // const { top, left, width, height } = canvasBoundingBox\n\n  // textBox.worldBoundingBox = {\n  //   topLeft: canvasToWorld([left, top]),\n  //   topRight: canvasToWorld([left + width, top]),\n  //   bottomLeft: canvasToWorld([left, top + height]),\n  //   bottomRight: canvasToWorld([left + width, top + height]),\n  // }\n\n  return canvasBoundingBox;\n}\n\nexport default drawLinkedTextBox;\n","import type { Types } from '@cornerstonejs/core';\n\nimport _getHash from './_getHash';\nimport setAttributesIfNecessary from './setAttributesIfNecessary';\nimport setNewAttributesIfValid from './setNewAttributesIfValid';\nimport { SVGDrawingHelper } from '../types';\n\n// <rect x=\"120\" y=\"100\" width=\"100\" height=\"100\" />\nexport default function drawRect(\n  svgDrawingHelper: SVGDrawingHelper,\n  annotationUID: string,\n  rectangleUID: string,\n  start: Types.Point2,\n  end: Types.Point2,\n  options = {},\n  dataId = ''\n): void {\n  const {\n    color,\n    width: _width,\n    lineWidth,\n    lineDash,\n  } = Object.assign(\n    {\n      color: 'dodgerblue',\n      width: '2',\n      lineWidth: undefined,\n      lineDash: undefined,\n    },\n    options\n  );\n\n  // for supporting both lineWidth and width options\n  const strokeWidth = lineWidth || _width;\n\n  const svgns = 'http://www.w3.org/2000/svg';\n  const svgNodeHash = _getHash(annotationUID, 'rect', rectangleUID);\n  const existingRect = svgDrawingHelper.getSvgNode(svgNodeHash);\n\n  const tlhc = [Math.min(start[0], end[0]), Math.min(start[1], end[1])];\n  const width = Math.abs(start[0] - end[0]);\n  const height = Math.abs(start[1] - end[1]);\n\n  const attributes = {\n    x: `${tlhc[0]}`,\n    y: `${tlhc[1]}`,\n    width: `${width}`,\n    height: `${height}`,\n    stroke: color,\n    fill: 'transparent',\n    'stroke-width': strokeWidth,\n    'stroke-dasharray': lineDash,\n  };\n\n  if (existingRect) {\n    setAttributesIfNecessary(attributes, existingRect);\n\n    svgDrawingHelper.setNodeTouched(svgNodeHash);\n  } else {\n    const svgRectElement = document.createElementNS(svgns, 'rect');\n\n    if (dataId !== '') {\n      svgRectElement.setAttribute('data-id', dataId);\n    }\n\n    setNewAttributesIfValid(attributes, svgRectElement);\n\n    svgDrawingHelper.appendNode(svgRectElement, svgNodeHash);\n  }\n}\n","import type { Types } from '@cornerstonejs/core';\nimport { SVGDrawingHelper } from '../types';\nimport drawLine from './drawLine';\n\nexport default function drawArrow(\n  svgDrawingHelper: SVGDrawingHelper,\n  annotationUID: string,\n  arrowUID: string,\n  start: Types.Point2,\n  end: Types.Point2,\n  options = {}\n): void {\n  // if length is NaN return\n  if (isNaN(start[0]) || isNaN(start[1]) || isNaN(end[0]) || isNaN(end[1])) {\n    return;\n  }\n\n  const { color, width, lineWidth, lineDash } = Object.assign(\n    {\n      color: 'dodgerblue',\n      width: '2',\n      lineWidth: undefined,\n      lineDash: undefined,\n    },\n    options\n  );\n\n  // The line itself\n  drawLine(svgDrawingHelper, annotationUID, arrowUID, start, end, {\n    color,\n    width,\n    lineWidth,\n    lineDash,\n  });\n\n  // Drawing the head arrow with two lines\n  // Variables to be used when creating the arrow\n  const headLength = 10;\n  const angle = Math.atan2(end[1] - start[1], end[0] - start[0]);\n\n  const firstLine = {\n    start: [\n      end[0] - headLength * Math.cos(angle - Math.PI / 7),\n      end[1] - headLength * Math.sin(angle - Math.PI / 7),\n    ] as Types.Point2,\n    end: end,\n  };\n\n  const secondLine = {\n    start: [\n      end[0] - headLength * Math.cos(angle + Math.PI / 7),\n      end[1] - headLength * Math.sin(angle + Math.PI / 7),\n    ] as Types.Point2,\n    end: end,\n  };\n\n  drawLine(\n    svgDrawingHelper,\n    annotationUID,\n    '2',\n    firstLine.start,\n    firstLine.end,\n    {\n      color,\n      width,\n      lineWidth,\n    }\n  );\n\n  drawLine(\n    svgDrawingHelper,\n    annotationUID,\n    '3',\n    secondLine.start,\n    secondLine.end,\n    {\n      color,\n      width,\n      lineWidth,\n    }\n  );\n}\n","import _getHash from './_getHash';\nimport _setAttributesIfNecessary from './setAttributesIfNecessary';\nimport _setNewAttributesIfValid from './setNewAttributesIfValid';\n\n// <rect x=\"120\" y=\"100\" width=\"100\" height=\"100\" />\nexport default function drawRedactionRect(\n  svgDrawingHelper: any,\n  annotationUID: string,\n  rectangleUID: string,\n  start: any,\n  end: any,\n  options = {}\n): void {\n  const {\n    color,\n    width: _width,\n    lineWidth,\n    lineDash,\n  } = Object.assign(\n    {\n      color: 'dodgerblue',\n      width: '2',\n      lineWidth: undefined,\n      lineDash: undefined,\n    },\n    options\n  );\n\n  // for supporting both lineWidth and width options\n  const strokeWidth = lineWidth || _width;\n\n  const svgns = 'http://www.w3.org/2000/svg';\n  const svgNodeHash = _getHash(annotationUID, 'rect', rectangleUID);\n  const existingRect = svgDrawingHelper.getSvgNode(svgNodeHash);\n\n  const tlhc = [Math.min(start[0], end[0]), Math.min(start[1], end[1])];\n  const width = Math.abs(start[0] - end[0]);\n  const height = Math.abs(start[1] - end[1]);\n\n  const attributes = {\n    x: `${tlhc[0]}`,\n    y: `${tlhc[1]}`,\n    width: `${width}`,\n    height: `${height}`,\n    stroke: color,\n    fill: 'black',\n    'stroke-width': strokeWidth,\n    'stroke-dasharray': lineDash,\n  };\n\n  if (existingRect) {\n    _setAttributesIfNecessary(attributes, existingRect);\n\n    svgDrawingHelper.setNodeTouched(svgNodeHash);\n  } else {\n    const svgRectElement = document.createElementNS(svgns, 'rect');\n\n    _setNewAttributesIfValid(attributes, svgRectElement);\n\n    svgDrawingHelper.appendNode(svgRectElement, svgNodeHash);\n  }\n}\n","import { ToolGroupManager } from '../store';\nimport { ToolModes } from '../enums';\nimport { getEnabledElement } from '@cornerstonejs/core';\n\ntype ModesFilter = Array<ToolModes>;\n\n/**\n * Finds the enabled element, and iterates over the tools inside its\n * toolGroup. Returns the list of tool instances that are valid based\n * on the provided tool mode.\n *\n * @param element Canvas element\n * @param modesFilter tool modes: active, passive, enabled, disabled\n * @returns enabled tool instances\n */\nexport default function getToolsWithModesForElement(\n  element: HTMLDivElement,\n  modesFilter: ModesFilter\n) {\n  const enabledElement = getEnabledElement(element);\n  const { renderingEngineId, viewportId } = enabledElement;\n\n  const toolGroup = ToolGroupManager.getToolGroupForViewport(\n    viewportId,\n    renderingEngineId\n  );\n\n  if (!toolGroup) {\n    return [];\n  }\n\n  const enabledTools = [];\n\n  const toolGroupToolNames = Object.keys(toolGroup.toolOptions);\n\n  for (let j = 0; j < toolGroupToolNames.length; j++) {\n    const toolName = toolGroupToolNames[j];\n    const toolOptions = toolGroup.toolOptions[toolName];\n\n    /* filter out tools that don't have options */\n    if (!toolOptions) {\n      continue;\n    }\n\n    if (modesFilter.includes(toolOptions.mode)) {\n      const toolInstance = toolGroup.getToolInstance(toolName);\n      enabledTools.push(toolInstance);\n    }\n  }\n\n  return enabledTools;\n}\n","import {\n  getEnabledElement,\n  triggerEvent,\n  getRenderingEngine,\n} from '@cornerstonejs/core';\nimport { Events, ToolModes } from '../enums';\nimport { draw as drawSvg } from '../drawingSvg';\nimport getToolsWithModesForElement from './getToolsWithModesForElement';\nimport { AnnotationRenderedEventDetail } from '../types/EventTypes';\nconst { Active, Passive, Enabled } = ToolModes;\n\n/**\n * AnnotationRenderingEngine is a class that is responsible for rendering\n * annotations defined in the renderAnnotation method of annotation tools on the page.\n * It mimics the RenderingEngine in the Cornerstone Core. Here it uses requestAnimationFrame\n * is used to render annotations by calling renderAnnotations() on each enabled tool. Note: This\n * is a Singleton class and should not be instantiated directly. To trigger\n * an annotation render for an HTML element containing a viewport you can use\n *\n * ```\n * triggerAnnotationRender(element)\n * ```\n */\nclass AnnotationRenderingEngine {\n  public hasBeenDestroyed: boolean;\n  private _needsRender: Set<HTMLDivElement> = new Set();\n  private _animationFrameSet = false;\n  private _animationFrameHandle: number | null = null;\n  private _viewportElements: Map<string, HTMLDivElement>;\n\n  constructor() {\n    this._viewportElements = new Map();\n  }\n\n  /**\n   * Add the viewport's HTMLDivElement to the viewports for rendering. This method\n   * just informs the annotationRenderingEngine about the viewport and\n   * does not initiate a render.\n   * @param viewportId - Viewport Unique identifier\n   * @param element - HTMLDivElement\n   */\n  public addViewportElement(viewportId: string, element: HTMLDivElement) {\n    this._viewportElements.set(viewportId, element);\n  }\n\n  /**\n   * Remove the viewport's HTMLDivElement from subsequent annotation renders\n   * @param viewportId - Viewport Unique identifier\n   */\n  public removeViewportElement(viewportId: string, element: HTMLDivElement) {\n    this._viewportElements.delete(viewportId);\n\n    // delete element from needsRender if element exist\n    this._needsRender.delete(element);\n\n    // I don' think there is any disadvantage to canceling the animation frame\n    // and resetting the flags on viewport's element removal, since the removeVIewportElement\n    // might be as a result of reEnabling the element (in re-enable we disable first), hence the need to render the\n    // new one while removing the old one\n    this._reset();\n  }\n\n  /**\n   * It tells the AnnotationRenderingEngine to render the viewport element the next\n   * time it renders.\n   *\n   * @param element - The element to render.\n   */\n  public renderViewport(element: HTMLDivElement): void {\n    this._setViewportsToBeRenderedNextFrame([element]);\n  }\n\n  /**\n   * _throwIfDestroyed Throws an error if trying to interact with the `RenderingEngine`\n   * instance after its `destroy` method has been called.\n   */\n  private _throwIfDestroyed() {\n    if (this.hasBeenDestroyed) {\n      throw new Error(\n        'this.destroy() has been manually called to free up memory, can not longer use this instance. Instead make a new one.'\n      );\n    }\n  }\n\n  private _renderFlaggedViewports = () => {\n    this._throwIfDestroyed();\n\n    const elements = Array.from(this._viewportElements.values());\n\n    for (let i = 0; i < elements.length; i++) {\n      const element = elements[i];\n      if (this._needsRender.has(element)) {\n        this._triggerRender(element);\n\n        // This viewport has been rendered, we can remove it from the set\n        this._needsRender.delete(element);\n\n        // If there is nothing left that is flagged for rendering, stop here\n        // and allow RAF to be called again\n        if (this._needsRender.size === 0) {\n          this._animationFrameSet = false;\n          this._animationFrameHandle = null;\n          return;\n        }\n      }\n    }\n  };\n\n  private _setAllViewportsToBeRenderedNextFrame() {\n    const elements = [...this._viewportElements.values()];\n\n    elements.forEach((element) => {\n      this._needsRender.add(element);\n    });\n\n    this._renderFlaggedViewports();\n  }\n\n  private _setViewportsToBeRenderedNextFrame(elements: HTMLDivElement[]) {\n    const elementsEnabled = [...this._viewportElements.values()];\n\n    // Add the viewports to the set of flagged viewports\n    elements.forEach((element) => {\n      // only enabledElement need to render\n      if (elementsEnabled.indexOf(element) !== -1) {\n        this._needsRender.add(element);\n      }\n    });\n\n    // Render any flagged viewports\n    this._render();\n  }\n\n  /**\n   * _render Sets up animation frame if necessary\n   */\n  private _render() {\n    // If we have viewports that need rendering and we have not already\n    // set the RAF callback to run on the next frame.\n    if (this._needsRender.size > 0 && this._animationFrameSet === false) {\n      this._animationFrameHandle = window.requestAnimationFrame(\n        this._renderFlaggedViewports\n      );\n\n      // Set the flag that we have already set up the next RAF call.\n      this._animationFrameSet = true;\n    }\n  }\n\n  _triggerRender(element) {\n    const enabledElement = getEnabledElement(element);\n\n    if (!enabledElement) {\n      console.warn('Element has been disabled');\n      return;\n    }\n\n    const renderingEngine = getRenderingEngine(\n      enabledElement.renderingEngineId\n    );\n    if (!renderingEngine) {\n      console.warn('rendering Engine has been destroyed');\n      return;\n    }\n\n    const enabledTools = getToolsWithModesForElement(element, [\n      Active,\n      Passive,\n      Enabled,\n    ]);\n\n    const { renderingEngineId, viewportId } = enabledElement;\n    const eventDetail: AnnotationRenderedEventDetail = {\n      element,\n      renderingEngineId,\n      viewportId,\n    };\n\n    // const enabledToolsWithAnnotations = enabledTools.filter((tool) => {\n    //   const annotations = getAnnotations(tool.getToolName(), {FrameOfReferenceUID});\n    //   return annotations && annotations.length;\n    // });\n\n    drawSvg(element, (svgDrawingHelper) => {\n      let anyRendered = false;\n      const handleDrawSvg = (tool) => {\n        if (tool.renderAnnotation) {\n          const rendered = tool.renderAnnotation(\n            enabledElement,\n            svgDrawingHelper\n          );\n          anyRendered = anyRendered || rendered;\n        }\n      };\n\n      /**\n       * We should be able to filter tools that don't have annotations, but\n       * currently some of tools have renderAnnotation method BUT\n       * don't keep annotation in the state, so if we do so, the tool will not be\n       * rendered.\n       */\n      enabledTools.forEach(handleDrawSvg);\n\n      if (anyRendered) {\n        triggerEvent(element, Events.ANNOTATION_RENDERED, { ...eventDetail });\n      }\n    });\n  }\n\n  /**\n   * _reset Resets the `RenderingEngine`\n   */\n  private _reset() {\n    window.cancelAnimationFrame(this._animationFrameHandle);\n\n    this._needsRender.clear();\n    this._animationFrameSet = false;\n    this._animationFrameHandle = null;\n\n    this._setAllViewportsToBeRenderedNextFrame();\n  }\n}\n\nconst annotationRenderingEngine = new AnnotationRenderingEngine();\n\n/**\n * It triggers the rendering of the annotations for the given HTML element using\n * the `AnnotationRenderingEngine`\n * @param element - The element to render the annotation on.\n */\nfunction triggerAnnotationRender(element: HTMLDivElement): void {\n  annotationRenderingEngine.renderViewport(element);\n}\n\nexport { annotationRenderingEngine, triggerAnnotationRender };\n\nexport default triggerAnnotationRender;\n","import { vec3 } from 'gl-matrix';\nimport { CONSTANTS, metaData } from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\nimport { Annotations, Annotation } from '../../types';\nimport { debug } from 'console';\n\nconst { EPSILON } = CONSTANTS;\n\nconst PARALLEL_THRESHOLD = 1 - EPSILON;\n\n/**\n * given some `Annotations`, and the slice defined by the camera's normal\n * direction and the spacing in the normal, filter the `Annotations` which\n * is within the slice.\n *\n * @param annotations - Annotations\n * @param camera - The camera\n * @param spacingInNormalDirection - The spacing in the normal direction\n * @returns The filtered `Annotations`.\n */\nexport default function filterAnnotationsWithinSlice(\n  annotations: Annotations,\n  camera: Types.ICamera,\n  spacingInNormalDirection: number\n): Annotations {\n  const { viewPlaneNormal } = camera;\n\n  // The reason we use parallel normals instead of actual orientation is that\n  // flipped action is done through camera API, so we can't rely on the\n  // orientation (viewplaneNormal and viewUp) since even the same image and\n  // same slice if flipped will have different orientation, but still rendering\n  // the same slice. Instead, we choose to use the parallel normals to filter\n  // the annotations and later we fine tune it with the annotation within slice\n  // logic down below.\n  const annotationsWithParallelNormals = annotations.filter(\n    (td: Annotation) => {\n      let annotationViewPlaneNormal = td.metadata.viewPlaneNormal;\n\n      if (!annotationViewPlaneNormal) {\n        // This code is run to set the annotation view plane normal\n        // for historical data which was saved without the normal.\n        const { referencedImageId } = td.metadata;\n        const { imageOrientationPatient } = metaData.get(\n          'imagePlaneModule',\n          referencedImageId\n        );\n        const rowCosineVec = vec3.fromValues(\n          imageOrientationPatient[0],\n          imageOrientationPatient[1],\n          imageOrientationPatient[2]\n        );\n\n        const colCosineVec = vec3.fromValues(\n          imageOrientationPatient[3],\n          imageOrientationPatient[4],\n          imageOrientationPatient[5]\n        );\n\n        annotationViewPlaneNormal = vec3.create() as Types.Point3;\n\n        vec3.cross(annotationViewPlaneNormal, rowCosineVec, colCosineVec);\n        td.metadata.viewPlaneNormal = annotationViewPlaneNormal;\n      }\n      const isParallel =\n        Math.abs(vec3.dot(viewPlaneNormal, annotationViewPlaneNormal)) >\n        PARALLEL_THRESHOLD;\n\n      return annotationViewPlaneNormal && isParallel;\n    }\n  );\n\n  // No in plane annotations.\n  if (!annotationsWithParallelNormals.length) {\n    return [];\n  }\n\n  // Annotation should be within the slice, which means that it should be between\n  // camera's focalPoint +/- spacingInNormalDirection.\n\n  const halfSpacingInNormalDirection = spacingInNormalDirection / 2;\n  const { focalPoint } = camera;\n\n  const annotationsWithinSlice = [];\n\n  for (const annotation of annotationsWithParallelNormals) {\n    const data = annotation.data;\n    const point = data.handles.points[0];\n\n    if (!annotation.isVisible) {\n      continue;\n    }\n    // A = point\n    // B = focal point\n    // P = normal\n\n    // B-A dot P  => Distance in the view direction.\n    // this should be less than half the slice distance.\n\n    const dir = vec3.create();\n\n    vec3.sub(dir, focalPoint, point);\n\n    const dot = vec3.dot(dir, viewPlaneNormal);\n\n    if (Math.abs(dot) < halfSpacingInNormalDirection) {\n      annotationsWithinSlice.push(annotation);\n    }\n  }\n\n  return annotationsWithinSlice;\n}\n","import {\n  StackViewport,\n  VolumeViewport,\n  VideoViewport,\n  Types,\n  utilities as csUtils,\n} from '@cornerstonejs/core';\n\nimport filterAnnotationsWithinSlice from './filterAnnotationsWithinSlice';\nimport { Annotations } from '../../types';\n\n/**\n * Given the viewport and the annotations, it filters the annotations array and only\n * return those annotation that should be displayed on the viewport\n * @param annotations - Annotations\n * @returns A filtered version of the annotations.\n */\nexport default function filterAnnotationsForDisplay(\n  viewport: Types.IViewport,\n  annotations: Annotations\n): Annotations {\n  if (viewport instanceof StackViewport) {\n    // 1. Get the currently displayed imageId from the StackViewport\n    const imageId = viewport.getCurrentImageId();\n\n    // 2. remove the dataLoader scheme since it might be an annotation that was\n    // created on the volumeViewport initially and has the volumeLoader scheme\n    // but shares the same imageId\n    const colonIndex = imageId.indexOf(':');\n    const imageURI = imageId.substring(colonIndex + 1);\n\n    // 3. Filter annotation in the frame of reference by the referenced image ID property\n    // Note: With the current implementation drawing on the stack (PT stack) will not\n    // show the annotation on a volume that does not share the same imageURIs (CT Volume),\n    // and we don't have a proper way to check distance either since a stack can be\n    // composed of multiple unrelated images\n    return annotations.filter((annotation) => {\n      if (!annotation.isVisible) {\n        return false;\n      }\n\n      const imageId = annotation.metadata.referencedImageId;\n\n      if (imageId === undefined) {\n        // This annotation was not drawn on a non-coplanar reformat, and such does\n        // note have a referenced imageId.\n        return false;\n      }\n\n      const colonIndex = imageId.indexOf(':');\n      const referenceImageURI = imageId.substring(colonIndex + 1);\n      return referenceImageURI === imageURI;\n    });\n  } else if (viewport instanceof VideoViewport) {\n    const frameOfReferenceUID: string = viewport.getFrameOfReferenceUID();\n\n    return annotations.filter((toolData) => {\n      return toolData.metadata.FrameOfReferenceUID === frameOfReferenceUID;\n    });\n  } else if (viewport instanceof VolumeViewport) {\n    const camera = viewport.getCamera();\n\n    const { spacingInNormalDirection } =\n      csUtils.getTargetVolumeAndSpacingInNormalDir(viewport, camera);\n\n    // Get data with same normal and within the same slice\n    return filterAnnotationsWithinSlice(\n      annotations,\n      camera,\n      spacingInNormalDirection\n    );\n  } else {\n    throw new Error(`Viewport Type ${viewport.type} not supported`);\n  }\n}\n","import {\n  StyleConfig,\n  ToolStyleConfig,\n  StyleSpecifier,\n  AnnotationStyle,\n} from '../../../types/AnnotationStyle';\n\n/**\n * This class handles the configuration of the tool style. You can use it to set\n * the style of a tool at various levels (annotation, viewport, toolGroup, global).\n *\n * The hierarchy of the configuration is as follows (each level falls back to the\n * next level if not specified):\n *\n * 1) Annotation-level styles (with annotationUID)\n *     2) Viewport-level tool styles\n *         - Per-tool: Length on the viewport with viewportId\n *         - Global: All tools on the viewport with viewportId\n *             3) ToolGroup tool styles\n *                 - Per-tool: Angle on toolGroupId in all viewports of the toolGroup\n *                 - Global: All tools in the toolGroupId for all viewports\n *                     4) Default level:\n *                         - Per-tool: Length styles\n *                         - Global: Opinionated styles by CornerstoneJS\n */\nclass ToolStyle {\n  config: StyleConfig;\n\n  constructor() {\n    const defaultConfig = {\n      color: 'rgb(255, 255, 0)',\n      colorHighlighted: 'rgb(0, 255, 0)',\n      colorSelected: 'rgb(0, 220, 0)',\n      colorLocked: 'rgb(255, 255, 0)',\n      lineWidth: '1',\n      lineDash: '',\n      shadow: true,\n      textBoxVisibility: true,\n      textBoxFontFamily: 'Helvetica Neue, Helvetica, Arial, sans-serif',\n      textBoxFontSize: '14px',\n      textBoxColor: 'rgb(255, 255, 0)',\n      textBoxColorHighlighted: 'rgb(0, 255, 0)',\n      textBoxColorSelected: 'rgb(0, 255, 0)',\n      textBoxColorLocked: 'rgb(255, 255, 0)',\n      textBoxBackground: '',\n      textBoxLinkLineWidth: '1',\n      textBoxLinkLineDash: '2,3',\n      textBoxShadow: true,\n    };\n\n    this._initializeConfig(defaultConfig);\n  }\n\n  /**\n   * It returns the annotation-specific tool styles for the annotation with the given UID\n   * @param annotationUID - The unique identifier of the annotation.\n   * @returns The annotation tool styles for the annotation with the given UID.\n   */\n  getAnnotationToolStyles(annotationUID: string): AnnotationStyle {\n    return this.config.annotations && this.config.annotations[annotationUID];\n  }\n\n  /**\n   * It returns the styles for a given viewport. It includes tool-specific and\n   * global styles (all tools in the viewport)\n   * @param viewportId - The id of the viewport\n   * @returns The viewport tool styles for the given viewport id.\n   */\n  getViewportToolStyles(viewportId: string): ToolStyleConfig {\n    return this.config.viewports && this.config.viewports[viewportId];\n  }\n\n  /**\n   * It returns the tool style for the given toolGroup. It includes tool-specific and\n   * global styles (all tools in the toolGroup)\n   * @param toolGroupId - The id of the toolGroup.\n   * @returns The tool styles for the tool group with the given id.\n   */\n  getToolGroupToolStyles(toolGroupId: string): ToolStyleConfig {\n    return this.config.toolGroups && this.config.toolGroups[toolGroupId];\n  }\n\n  /**\n   * It returns the default tool styles from the config file. It includes tool-specific and\n   * global styles (all tools in all tooLGroups)\n   * @returns The default tool styles.\n   */\n  getDefaultToolStyles(): ToolStyleConfig {\n    return this.config.default;\n  }\n\n  /**\n   * It takes an annotationUID and a style object and sets the styles at\n   * the annotationLevel (highest priority in the hierarchy). The styles is an\n   * object with key value pairs.\n   * @param annotationUID - string - The unique identifier for the annotation.\n   * @param styles - ToolStyles\n   */\n  setAnnotationStyles(annotationUID: string, styles: AnnotationStyle) {\n    let annotationSpecificStyles = this.config.annotations;\n\n    if (!annotationSpecificStyles) {\n      this.config = {\n        ...this.config,\n        annotations: {},\n      };\n\n      annotationSpecificStyles = this.config.annotations;\n    }\n\n    annotationSpecificStyles[annotationUID] = styles;\n  }\n\n  /**\n   * It takes a viewportId and a ToolStyles object, and adds the ToolStyles object\n   * at the viewport level (second highest priority in the hierarchy after the annotation level).\n   * @param viewportId - The id of the viewport\n   * @param styles - style object including tool-specific and/or global styles (All tools in the viewport)\n   */\n  setViewportToolStyles(viewportId: string, styles: ToolStyleConfig) {\n    let viewportSpecificStyles = this.config.viewports;\n\n    if (!viewportSpecificStyles) {\n      this.config = {\n        ...this.config,\n        viewports: {},\n      };\n\n      viewportSpecificStyles = this.config.viewports;\n    }\n\n    viewportSpecificStyles[viewportId] = styles;\n  }\n\n  /**\n   * It takes a toolGroupId and a ToolStyles object, and it adds the ToolStyles object\n   * at the toolGroup level (third highest priority in the hierarchy after the viewport level).\n   * @param toolGroupId - The id of the toolGroup\n   * @param styles - style object including tool-specific (in all viewports of the toolGroup) and/or\n   * global styles (All tools in the toolGroup for all viewports)\n   */\n  setToolGroupToolStyles(toolGroupId: string, styles: ToolStyleConfig) {\n    let toolGroupSpecificStyles = this.config.toolGroups;\n\n    if (!toolGroupSpecificStyles) {\n      this.config = {\n        ...this.config,\n        toolGroups: {},\n      };\n\n      toolGroupSpecificStyles = this.config.toolGroups;\n    }\n\n    toolGroupSpecificStyles[toolGroupId] = styles;\n  }\n\n  /**\n   * Sets the default tool styles for the editor. It overrides the default styles for all tools.\n   * @param styles - style object including tool-specific (a tool in all toolGroups) and/or\n   * global styles (All tools in all tooLGroups)\n   */\n  setDefaultToolStyles(styles: ToolStyleConfig) {\n    this.config.default = styles;\n  }\n\n  /**\n   * It returns the value for a given style key, based on the provided specifications.\n   * It starts by looking at the annotation-specific styles, then at the viewport-specific styles,\n   * then at the toolGroup-specific styles, and finally at the default styles.\n   * @param styleKey - The key of the style.\n   * @param styleSpecifier - An object containing the specifications such as viewportId,\n   * toolGroupId, toolName and annotationUID which are used to get the style if the level of specificity is\n   * met\n   * @returns The value for the given style key.\n   */\n  getStyleProperty(toolStyle: string, specifications: StyleSpecifier) {\n    const { annotationUID, viewportId, toolGroupId, toolName } = specifications;\n\n    return this._getToolStyle(\n      toolStyle,\n      annotationUID,\n      viewportId,\n      toolGroupId,\n      toolName\n    );\n  }\n\n  private _getToolStyle(\n    property: string,\n    annotationUID: string,\n    viewportId: string,\n    toolGroupId: string,\n    toolName: string\n  ) {\n    if (annotationUID) {\n      const styles = this.getAnnotationToolStyles(annotationUID);\n\n      if (styles) {\n        // check first in the toolSpecific styles\n        if (styles[property]) {\n          return styles[property];\n        }\n      }\n    }\n\n    if (viewportId) {\n      const styles = this.getViewportToolStyles(viewportId);\n\n      if (styles) {\n        // check if we have the viewportId specific style\n        // check first in the toolSpecific styles\n        if (styles[toolName] && styles[toolName][property]) {\n          return styles[toolName][property];\n        }\n\n        // check if we have the style in the viewport specific global viewportSpecificStyles\n        if (styles.global && styles.global[property]) {\n          return styles.global[property];\n        }\n      }\n    }\n\n    if (toolGroupId) {\n      const styles = this.getToolGroupToolStyles(toolGroupId);\n\n      if (styles) {\n        // check first in the toolSpecific styles\n        if (styles[toolName] && styles[toolName][property]) {\n          return styles[toolName][property];\n        }\n\n        // check if we have the style in the toolGroup specific global styles\n        if (styles.global && styles.global[property]) {\n          return styles.global[property];\n        }\n      }\n    }\n\n    const globalStyles = this.getDefaultToolStyles();\n\n    if (globalStyles[toolName] && globalStyles[toolName][property]) {\n      return globalStyles[toolName][property];\n    }\n\n    if (globalStyles.global && globalStyles.global[property]) {\n      return globalStyles.global[property];\n    }\n  }\n\n  private _initializeConfig(config) {\n    const toolStyles = {};\n    for (const name in config) {\n      toolStyles[name] = config[name];\n    }\n\n    this.config = {\n      default: {\n        global: toolStyles as AnnotationStyle,\n      },\n    };\n  }\n}\n\nconst toolStyle = new ToolStyle();\n\nexport default toolStyle;\n","import { StyleSpecifier } from '../../../types/AnnotationStyle';\nimport { ToolModes, AnnotationStyleStates } from '../../../enums';\nimport toolStyle from './ToolStyle';\n\n/**\n * Build a list of hierarchal property names in ascending order of priority\n * @param property - The base property name -- e.g., 'color'\n * @param state - An optional state to determine the final property name\n * @param mode - An optional mode to determine the final property name\n * @returns A list of property names\n */\nfunction getHierarchalPropertyStyles(\n  property: string,\n  state?: AnnotationStyleStates,\n  mode?: ToolModes\n): string[] {\n  const list = [`${property}`];\n  if (state) {\n    list.push(`${list[0]}${state}`);\n  }\n  if (mode) {\n    list.push(`${list[list.length - 1]}${mode}`);\n  }\n  return list;\n}\n\n/**\n * Get the value of a style property from the ToolStyle config\n * @param property - The name of the property to get.\n * @param styleSpecifier - An object containing the specifications such as viewportId,\n * toolGroupId, toolName and annotationUID which are used to get the style if the level of specificity is\n * met (hierarchy is checked from most specific to least specific which is\n * annotationLevel -> viewportLevel -> toolGroupLevel -> default.\n * @param state - The state of the tool (Default, Locked etc.)\n * @param mode - The current tool mode. (Active, Passive etc.)\n * @returns The value of the property.\n */\nfunction getStyleProperty(\n  property: string,\n  styleSpecifier: StyleSpecifier,\n  state?: AnnotationStyleStates,\n  mode?: ToolModes\n): string {\n  // Hierarchal property styles is a list of property names with priority in ascending\n  // order like: ['color', 'colorSelected', 'colorSelectedActive'], if in the toolStyle\n  // config, the `colorSelectedActive` property is defined, it will be used, otherwise\n  // the `colorSelected` property will be used, and if that is not defined, the `color`\n  // property will be used. This is done to ensure that the most specific property is used.\n  // Thus, we attempt resolving property names in reverse order\n  const alternatives = getHierarchalPropertyStyles(property, state, mode);\n  for (let i = alternatives.length - 1; i >= 0; --i) {\n    const style = toolStyle.getStyleProperty(alternatives[i], styleSpecifier);\n    if (style !== undefined) {\n      return style;\n    }\n  }\n}\n\nexport { getStyleProperty };\n","import { Annotation } from '../../../types';\nimport { isAnnotationLocked } from '../annotationLocking';\nimport { isAnnotationSelected } from '../annotationSelection';\nimport { AnnotationStyleStates } from '../../../enums';\n\n/**\n * Given a Annotation object, return the annotationStyle State that it\n * should be in based on its data\n * @param annotation - The annotation that we want to style.\n * @returns The state of the annotation whether it is Default, Highlighted, Locked, or Selected.\n */\nfunction getState(annotation?: Annotation): AnnotationStyleStates {\n  if (annotation) {\n    if (annotation.data && annotation.highlighted) {\n      return AnnotationStyleStates.Highlighted;\n    }\n    if (isAnnotationSelected(annotation.annotationUID)) {\n      return AnnotationStyleStates.Selected;\n    }\n\n    // Todo: make annotation lock api not to rely on the annotation itself\n    if (isAnnotationLocked(annotation)) {\n      return AnnotationStyleStates.Locked;\n    }\n  }\n\n  return AnnotationStyleStates.Default;\n}\n\nexport default getState;\n","import { ToolModes, AnnotationStyleStates } from '../../../enums';\nimport { getStyleProperty } from './helpers';\nimport { StyleSpecifier } from '../../../types/AnnotationStyle';\n\n/**\n * getFont - Returns a font string of the form \"{fontSize}px fontName\" used by `canvas`.\n * @param styleSpecifier - An object containing the specifications such as viewportId,\n * toolGroupId, toolName and annotationUID which are used to get the style if the level of specificity is\n * met (hierarchy is checked from most specific to least specific which is\n * annotationLevel -> viewportLevel -> toolGroupLevel -> default.\n * @param state - An optional state to determine the final property name\n * @param mode - An optional mode to determine the final property name\n * @returns The font string.\n */\nfunction getFont(\n  styleSpecifier: StyleSpecifier,\n  state?: AnnotationStyleStates,\n  mode?: ToolModes\n): string {\n  const fontSize = getStyleProperty(\n    'textBoxFontSize',\n    styleSpecifier,\n    state,\n    mode\n  );\n  const fontFamily = getStyleProperty(\n    'textBoxFontFamily',\n    styleSpecifier,\n    state,\n    mode\n  );\n\n  return `${fontSize}px ${fontFamily}`;\n}\n\nexport default getFont;\n","import {\n  utilities,\n  getEnabledElement,\n  StackViewport,\n  cache,\n  VideoViewport,\n} from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\nimport BaseTool from './BaseTool';\nimport { getAnnotationManager } from '../../stateManagement/annotation/annotationState';\nimport { Annotation, Annotations, SVGDrawingHelper } from '../../types';\nimport triggerAnnotationRender from '../../utilities/triggerAnnotationRender';\nimport filterAnnotationsForDisplay from '../../utilities/planar/filterAnnotationsForDisplay';\nimport { getStyleProperty } from '../../stateManagement/annotation/config/helpers';\nimport { getState } from '../../stateManagement/annotation/config';\nimport { StyleSpecifier } from '../../types/AnnotationStyle';\n\n/**\n * Abstract class for tools which create and display annotations on the\n * cornerstone3D canvas. In addition, it provides a base class for segmentation\n * tools that require drawing an annotation before running the segmentation strategy\n * for instance threshold segmentation based on an area and a threshold.\n * Annotation tools make use of drawing utilities to draw SVG elements on the viewport.\n *\n * To create a new annotation tool, derive from this class and implement the\n * abstract methods.\n */\nabstract class AnnotationDisplayTool extends BaseTool {\n  static toolName;\n\n  // ===================================================================\n  // Abstract Methods - Must be implemented.\n  // ===================================================================\n\n  /**\n   * @abstract renderAnnotation it used to draw the tool's annotation in each\n   * request animation frame\n   *\n   * @param enabledElement - The Cornerstone's enabledElement.\n   * @param svgDrawingHelper - The svgDrawingHelper providing the context for drawing.\n   */\n  abstract renderAnnotation(\n    enabledElement: Types.IEnabledElement,\n    svgDrawingHelper: SVGDrawingHelper\n  );\n\n  /**\n   * @virtual Given the element and annotations which is an array of annotation, it\n   * filters the annotations array to only include the annotation based on the viewportType.\n   * If the viewport is StackViewport, it filters based on the current imageId of the viewport,\n   * if the viewport is volumeViewport, it only returns those that are within the\n   * same slice as the current rendered slice in the volume viewport.\n   * imageId as the enabledElement.\n   * @param element - The HTML element\n   * @param annotations - The annotations to filter (array of annotation)\n   * @returns The filtered annotations\n   */\n  filterInteractableAnnotationsForElement(\n    element: HTMLDivElement,\n    annotations: Annotations\n  ): Annotations | undefined {\n    if (!annotations || !annotations.length) {\n      return;\n    }\n\n    const enabledElement = getEnabledElement(element);\n    const { viewport } = enabledElement;\n\n    return filterAnnotationsForDisplay(viewport, annotations);\n  }\n\n  /**\n   * On Image Calibration, take all the annotation from the AnnotationState manager,\n   * and invalidate them to force them to be re-rendered and their stats to be recalculated.\n   * Then use the old and new imageData (non-calibrated and calibrated) to calculate the\n   * new position for the annotations in the space of the new imageData.\n   *\n   * @param evt - The calibration event\n   *\n   */\n  public onImageSpacingCalibrated = (\n    evt: Types.EventTypes.ImageSpacingCalibratedEvent\n  ) => {\n    const { element, imageId } = evt.detail;\n\n    const imageURI = utilities.imageIdToURI(imageId);\n    const annotationManager = getAnnotationManager();\n    const framesOfReference = annotationManager.getFramesOfReference();\n\n    // For each frame Of Reference\n    framesOfReference.forEach((frameOfReference) => {\n      const frameOfReferenceSpecificAnnotations =\n        annotationManager.getAnnotations(frameOfReference);\n\n      const toolSpecificAnnotations =\n        frameOfReferenceSpecificAnnotations[this.getToolName()];\n\n      if (!toolSpecificAnnotations || !toolSpecificAnnotations.length) {\n        return;\n      }\n\n      // for this specific tool\n      toolSpecificAnnotations.forEach((annotation) => {\n        if (!annotation.metadata?.referencedImageId) {\n          return;\n        }\n\n        // if the annotation is drawn on the same imageId\n        const referencedImageURI = utilities.imageIdToURI(\n          annotation.metadata.referencedImageId\n        );\n\n        if (referencedImageURI === imageURI) {\n          // make them invalid since the image has been calibrated so that\n          // we can update the cachedStats and also rendering\n          annotation.invalidated = true;\n          annotation.data.cachedStats = {};\n        }\n      });\n      triggerAnnotationRender(element);\n    });\n  };\n\n  protected getReferencedImageId(\n    viewport: Types.IViewport,\n    worldPos: Types.Point3,\n    viewPlaneNormal: Types.Point3,\n    viewUp: Types.Point3\n  ): string {\n    const targetId = this.getTargetId(viewport);\n\n    let referencedImageId;\n\n    if (\n      viewport instanceof StackViewport ||\n      viewport instanceof VideoViewport\n    ) {\n      referencedImageId = targetId.split('imageId:')[1];\n    } else {\n      const volumeId = targetId.split('volumeId:')[1];\n      const imageVolume = cache.getVolume(volumeId);\n\n      referencedImageId = utilities.getClosestImageId(\n        imageVolume,\n        worldPos,\n        viewPlaneNormal\n      );\n    }\n\n    return referencedImageId;\n  }\n\n  /**\n   * It takes the property (color, lineDash, etc.) and based on the state of the\n   * annotation (selected, highlighted etc.) it returns the appropriate value\n   * based on the central toolStyle settings for each level of specification.\n   * @param property - The name of the style property to get.\n   * @param styleSpecifier - An object containing the specifications such as viewportId,\n   * toolGroupId, toolName and annotationUID which are used to get the style if the level of specificity is\n   * met (hierarchy is checked from most specific to least specific which is\n   * annotationLevel -> viewportLevel -> toolGroupLevel -> default.\n   * @param annotation - The annotation for the tool that is\n   * currently active.\n   * @returns The value of the property.\n   */\n  public getStyle(\n    property: string,\n    specifications: StyleSpecifier,\n    annotation?: Annotation\n  ): unknown {\n    return getStyleProperty(\n      property,\n      specifications,\n      getState(annotation),\n      this.mode\n    );\n  }\n}\n\nAnnotationDisplayTool.toolName = 'AnnotationDisplayTool';\nexport default AnnotationDisplayTool;\n","import {\n  BaseVolumeViewport,\n  StackViewport,\n  cache,\n  getEnabledElement,\n  metaData,\n} from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\nimport { vec2 } from 'gl-matrix';\n\nimport AnnotationDisplayTool from './AnnotationDisplayTool';\nimport { isAnnotationLocked } from '../../stateManagement/annotation/annotationLocking';\nimport { isAnnotationVisible } from '../../stateManagement/annotation/annotationVisibility';\nimport {\n  Annotation,\n  Annotations,\n  EventTypes,\n  ToolHandle,\n  InteractionTypes,\n  ToolProps,\n  PublicToolProps,\n} from '../../types';\nimport { StyleSpecifier } from '../../types/AnnotationStyle';\n\n/**-q\n * Abstract class for tools which create and display annotations on the\n * cornerstone3D canvas. In addition, it provides a base class for segmentation\n * tools that require drawing an annotation before running the segmentation strategy\n * for instance threshold segmentation based on an area and a threshold.\n * Annotation tools make use of drawing utilities to draw SVG elements on the viewport.\n *\n * To create a new annotation tool, derive from this class and implement the\n * abstract methods.\n */\nabstract class AnnotationTool extends AnnotationDisplayTool {\n  static toolName;\n  // ===================================================================\n  // Abstract Methods - Must be implemented.\n  // ===================================================================\n\n  constructor(toolProps: PublicToolProps, defaultToolProps: ToolProps) {\n    super(toolProps, defaultToolProps);\n\n    if (toolProps.configuration?.getTextLines) {\n      this.configuration.getTextLines = toolProps.configuration.getTextLines;\n    }\n\n    if (toolProps.configuration?.statsCalculator) {\n      this.configuration.statsCalculator =\n        toolProps.configuration.statsCalculator;\n    }\n  }\n\n  /**\n   * @abstract addNewAnnotation Creates a new annotation based on the clicked mouse position\n   *\n   * @param evt - The normalized mouse event\n   * @param interactionType -  The interaction type used to add the annotation.\n   */\n  abstract addNewAnnotation(\n    evt: EventTypes.InteractionEventType,\n    interactionType: InteractionTypes\n  ): Annotation;\n\n  /**\n   * @abstract cancel Used to cancel the ongoing tool drawing and manipulation\n   *\n   */\n  abstract cancel(element: HTMLDivElement);\n\n  /**\n   * handleSelectedCallback Custom callback for when a handle is selected.\n   *\n   * @param evt - The normalized mouse event\n   * @param annotation - The annotation selected.\n   * @param handle - The selected handle (either Types.Point3 in space for annotations, or TextBoxHandle object for text boxes).\n   * @param interactionType - The interaction type the handle was selected with.\n   */\n  abstract handleSelectedCallback(\n    evt: EventTypes.InteractionEventType,\n    annotation: Annotation,\n    handle: ToolHandle,\n    interactionType: InteractionTypes\n  ): void;\n\n  /**\n   * Custom callback for when an annotation is selected\n   *\n   * @param evt - The normalized mouse event\n   * @param annotation - The `Annotation` to check.\n   * @param interactionType - The interaction type used to select the tool.\n   */\n  abstract toolSelectedCallback(\n    evt: EventTypes.InteractionEventType,\n    annotation: Annotation,\n    interactionType: InteractionTypes,\n    canvasCoords?: Types.Point2\n  ): void;\n\n  /**\n   * Returns true if the provided canvas coordinate tool is near the annotation\n   *\n   * @param element - The HTML element\n   * @param annotation - The annotation to check\n   * @param canvasCoords - The canvas coordinate to check\n   * @param proximity - The minimum proximity to consider the point near\n   * @param interactionType - The interaction type used to select the tool.\n   *\n   * @returns boolean if the point is near.\n   */\n  abstract isPointNearTool(\n    element: HTMLDivElement,\n    annotation: Annotation,\n    canvasCoords: Types.Point2,\n    proximity: number,\n    interactionType: string\n  ): boolean;\n\n  /**\n   * @virtual Event handler for Cornerstone MOUSE_MOVE event.\n   *\n   *\n   * @param evt - The normalized mouse event\n   * @param filteredAnnotations - The annotations to check for hover interactions\n   * @returns True if the annotation needs to be re-drawn by the annotationRenderingEngine.\n   */\n  public mouseMoveCallback = (\n    evt: EventTypes.MouseMoveEventType,\n    filteredAnnotations?: Annotations\n  ): boolean => {\n    if (!filteredAnnotations) {\n      return false;\n    }\n\n    const { element, currentPoints } = evt.detail;\n    const canvasCoords = currentPoints.canvas;\n    let annotationsNeedToBeRedrawn = false;\n\n    for (const annotation of filteredAnnotations) {\n      // Do not do anything if the annotation is locked or hidden.\n      if (\n        isAnnotationLocked(annotation) ||\n        !isAnnotationVisible(annotation.annotationUID)\n      ) {\n        continue;\n      }\n\n      const { data } = annotation;\n      const activateHandleIndex = data.handles\n        ? data.handles.activeHandleIndex\n        : undefined;\n\n      // Perform tool specific imagePointNearToolOrHandle to determine if the mouse\n      // is near the tool or its handles or its textBox.\n      const near = this._imagePointNearToolOrHandle(\n        element,\n        annotation,\n        canvasCoords,\n        6 // Todo: This should come from the state\n      );\n\n      const nearToolAndNotMarkedActive = near && !annotation.highlighted;\n      const notNearToolAndMarkedActive = !near && annotation.highlighted;\n      if (nearToolAndNotMarkedActive || notNearToolAndMarkedActive) {\n        annotation.highlighted = !annotation.highlighted;\n        annotationsNeedToBeRedrawn = true;\n      } else if (\n        data.handles &&\n        data.handles.activeHandleIndex !== activateHandleIndex\n      ) {\n        // Active handle index has changed, re-render.\n        annotationsNeedToBeRedrawn = true;\n      }\n    }\n\n    return annotationsNeedToBeRedrawn;\n  };\n\n  /**\n   * It checks if the mouse click is near TextBoxHandle or AnnotationHandle itself, and\n   * return either it. It prioritize TextBoxHandle over AnnotationHandle. If\n   * the mouse click is not near any of the handles, it does not return anything.\n   *\n   * @param element - The element that the tool is attached to.\n   * @param annotation - The annotation object associated with the annotation\n   * @param canvasCoords - The coordinates of the mouse click on canvas\n   * @param proximity - The distance from the mouse cursor to the point\n   * that is considered \"near\".\n   * @returns The handle that is closest to the cursor, or null if the cursor\n   * is not near any of the handles.\n   */\n  getHandleNearImagePoint(\n    element: HTMLDivElement,\n    annotation: Annotation,\n    canvasCoords: Types.Point2,\n    proximity: number\n  ): ToolHandle | undefined {\n    const enabledElement = getEnabledElement(element);\n    const { viewport } = enabledElement;\n\n    const { data } = annotation;\n    const { points, textBox } = data.handles;\n\n    if (textBox) {\n      const { worldBoundingBox } = textBox;\n      if (worldBoundingBox) {\n        const canvasBoundingBox = {\n          topLeft: viewport.worldToCanvas(worldBoundingBox.topLeft),\n          topRight: viewport.worldToCanvas(worldBoundingBox.topRight),\n          bottomLeft: viewport.worldToCanvas(worldBoundingBox.bottomLeft),\n          bottomRight: viewport.worldToCanvas(worldBoundingBox.bottomRight),\n        };\n\n        if (\n          canvasCoords[0] >= canvasBoundingBox.topLeft[0] &&\n          canvasCoords[0] <= canvasBoundingBox.bottomRight[0] &&\n          canvasCoords[1] >= canvasBoundingBox.topLeft[1] &&\n          canvasCoords[1] <= canvasBoundingBox.bottomRight[1]\n        ) {\n          data.handles.activeHandleIndex = null;\n          return textBox as ToolHandle;\n        }\n      }\n    }\n\n    for (let i = 0; i < points.length; i++) {\n      const point = points[i];\n      const annotationCanvasCoordinate = viewport.worldToCanvas(point);\n\n      const near =\n        vec2.distance(canvasCoords, annotationCanvasCoordinate) < proximity;\n\n      if (near === true) {\n        data.handles.activeHandleIndex = i;\n        return point;\n      }\n    }\n\n    data.handles.activeHandleIndex = null;\n  }\n\n  /**\n   * It returns the style for the text box\n   * @param styleSpecifier - An object containing the specifications such as viewportId,\n   * toolGroupId, toolName and annotationUID which are used to get the style if the level of specificity is\n   * met (hierarchy is checked from most specific to least specific which is\n   * annotationLevel -> viewportLevel -> toolGroupLevel -> default.\n   * @param annotation - The annotation for the tool that is\n   * currently active.\n   * @returns An object of the style settings for the text box.\n   */\n  public getLinkedTextBoxStyle(\n    specifications: StyleSpecifier,\n    annotation?: Annotation\n  ): Record<string, unknown> {\n    // Todo: this function can be used to set different styles for different toolMode\n    // for the textBox.\n\n    return {\n      visibility: this.getStyle(\n        'textBoxVisibility',\n        specifications,\n        annotation\n      ),\n      fontFamily: this.getStyle(\n        'textBoxFontFamily',\n        specifications,\n        annotation\n      ),\n      fontSize: this.getStyle('textBoxFontSize', specifications, annotation),\n      color: this.getStyle('textBoxColor', specifications, annotation),\n      shadow: this.getStyle('textBoxShadow', specifications, annotation),\n      background: this.getStyle(\n        'textBoxBackground',\n        specifications,\n        annotation\n      ),\n      lineWidth: this.getStyle(\n        'textBoxLinkLineWidth',\n        specifications,\n        annotation\n      ),\n      lineDash: this.getStyle(\n        'textBoxLinkLineDash',\n        specifications,\n        annotation\n      ),\n    };\n  }\n\n  /**\n   * Returns true if the viewport is scaled to SUV units\n   * @param viewport - The viewport\n   * @param targetId - The annotation targetId\n   * @param imageId - The annotation imageId\n   * @returns\n   */\n  isSuvScaled(\n    viewport: Types.IStackViewport | Types.IVolumeViewport,\n    targetId: string,\n    imageId?: string\n  ): boolean {\n    if (viewport instanceof BaseVolumeViewport) {\n      const volumeId = targetId.split('volumeId:')[1];\n      const volume = cache.getVolume(volumeId);\n      return volume.scaling?.PT !== undefined;\n    } else if (viewport instanceof StackViewport) {\n      const scalingModule: Types.ScalingParameters | undefined =\n        imageId && metaData.get('scalingModule', imageId);\n      return typeof scalingModule?.suvbw === 'number';\n    } else {\n      throw new Error('Viewport is not a valid type');\n    }\n  }\n\n  /**\n   * Returns true if the `canvasCoords` are near a handle or selectable part of the tool\n   *\n   * @param element - The HTML element\n   * @param annotation - The annotation to check\n   * @param canvasCoords - The canvas coordinates to check\n   * @param proximity - The proximity to consider\n   *\n   * @returns If the point is near.\n   */\n  private _imagePointNearToolOrHandle(\n    element: HTMLDivElement,\n    annotation: Annotation,\n    canvasCoords: Types.Point2,\n    proximity: number\n  ): boolean {\n    // Based on the tool instance type, check if the point is near the tool handles\n    const handleNearImagePoint = this.getHandleNearImagePoint(\n      element,\n      annotation,\n      canvasCoords,\n      proximity\n    );\n\n    if (handleNearImagePoint) {\n      return true;\n    }\n\n    // If the point is not near the handles, check if the point is near the tool\n    const toolNewImagePoint = this.isPointNearTool(\n      element,\n      annotation,\n      canvasCoords,\n      proximity,\n      'mouse'\n    );\n\n    if (toolNewImagePoint) {\n      return true;\n    }\n  }\n}\n\nAnnotationTool.toolName = 'AnnotationTool';\nexport default AnnotationTool;\n","import {\n  getEnabledElementByIds,\n  Types,\n  utilities as csUtils,\n} from '@cornerstonejs/core';\nimport Representations from '../../enums/SegmentationRepresentations';\nimport { config as segmentationConfig } from '../../stateManagement/segmentation';\nimport { setSegmentationVisibility } from '../../stateManagement/segmentation/config/segmentationVisibility';\nimport { getSegmentationRepresentations } from '../../stateManagement/segmentation/segmentationState';\nimport { getToolGroup } from '../../store/ToolGroupManager';\nimport { PublicToolProps, ToolProps } from '../../types';\nimport { BaseTool } from '../base';\n\nimport {\n  SegmentationRepresentationConfig,\n  ToolGroupSpecificRepresentation,\n} from '../../types/SegmentationStateTypes';\nimport { surfaceDisplay } from './Surface';\nimport { contourDisplay } from './Contour';\nimport { labelmapDisplay } from './Labelmap';\n\n/**\n * In Cornerstone3DTools, displaying of segmentations are handled by the SegmentationDisplayTool.\n * Generally, any Segmentation can be viewed in various representations such as\n * labelmap (3d), contours, surface etc. As of now, Cornerstone3DTools only implements\n * Labelmap representation.\n *\n * SegmentationDisplayTool works at ToolGroup level, and is responsible for displaying the\n * segmentation representation for ALL viewports of a toolGroup, this way we can support complex\n * scenarios for displaying segmentations.\n *\n * Current Limitations:\n * - Only supports rendering of the volumetric segmentations in 3D space. (StackViewport segmentations are not supported yet)\n * - Labelmap representation is the only supported representation for now.\n *\n * Similar to other tools in Cornerstone3DTools, the SegmentationDisplayTool should\n * be added to the CornerstoneTools by calling cornerstoneTools.addTool(SegmentationDisplayTool)\n * and a toolGroup should be created for it using the ToolGroupManager API, finally\n * viewports information such as viewportId and renderingEngineId should be provided\n * to the toolGroup and the SegmentationDisplayTool should be set to be activated.\n *\n *\n */\nclass SegmentationDisplayTool extends BaseTool {\n  static toolName;\n  constructor(\n    toolProps: PublicToolProps = {},\n    defaultToolProps: ToolProps = {\n      configuration: {},\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n  }\n\n  onSetToolEnabled(): void {\n    const toolGroupId = this.toolGroupId;\n    const toolGroupSegmentationRepresentations =\n      getSegmentationRepresentations(toolGroupId);\n\n    if (\n      !toolGroupSegmentationRepresentations ||\n      toolGroupSegmentationRepresentations.length === 0\n    ) {\n      return;\n    }\n\n    // for each segmentationData, make the visibility true\n    toolGroupSegmentationRepresentations.forEach(\n      (segmentationRepresentation) => {\n        setSegmentationVisibility(\n          toolGroupId,\n          segmentationRepresentation.segmentationRepresentationUID,\n          true\n        );\n      }\n    );\n  }\n\n  onSetToolDisabled(): void {\n    const toolGroupId = this.toolGroupId;\n    const toolGroupSegmentationRepresentations =\n      getSegmentationRepresentations(toolGroupId);\n\n    if (\n      !toolGroupSegmentationRepresentations ||\n      toolGroupSegmentationRepresentations.length === 0\n    ) {\n      return;\n    }\n\n    // for each segmentationData, make the visibility false\n    toolGroupSegmentationRepresentations.forEach(\n      (segmentationRepresentation) => {\n        setSegmentationVisibility(\n          toolGroupId,\n          segmentationRepresentation.segmentationRepresentationUID,\n          false\n        );\n      }\n    );\n  }\n\n  /**\n   * It is used to trigger the render for each segmentations in the toolGroup.\n   * Based on the segmentation representation type, it will call the corresponding\n   * render function.\n   *\n   * @param toolGroupId - the toolGroupId\n   */\n  renderSegmentation = (toolGroupId: string): void => {\n    const toolGroup = getToolGroup(toolGroupId);\n\n    if (!toolGroup) {\n      return;\n    }\n\n    const toolGroupSegmentationRepresentations =\n      getSegmentationRepresentations(toolGroupId);\n\n    if (\n      !toolGroupSegmentationRepresentations ||\n      toolGroupSegmentationRepresentations.length === 0\n    ) {\n      return;\n    }\n\n    // toolGroup Viewports\n    const toolGroupViewports = toolGroup.viewportsInfo.map(\n      ({ renderingEngineId, viewportId }) => {\n        const enabledElement = getEnabledElementByIds(\n          viewportId,\n          renderingEngineId\n        );\n\n        if (enabledElement) {\n          return enabledElement.viewport;\n        }\n      }\n    );\n\n    // Render each segmentationData, in each viewport in the toolGroup\n    const segmentationRenderList = toolGroupSegmentationRepresentations.map(\n      (representation: ToolGroupSpecificRepresentation) => {\n        const config = this._getMergedRepresentationsConfig(toolGroupId);\n\n        const viewportsRenderList = [];\n\n        const renderers = {\n          [Representations.Labelmap]: labelmapDisplay,\n          [Representations.Contour]: contourDisplay,\n          [Representations.Surface]: surfaceDisplay,\n        };\n\n        const display = renderers[representation.type];\n\n        for (const viewport of toolGroupViewports) {\n          const renderedViewport = display.render(\n            viewport as Types.IVolumeViewport,\n            representation,\n            config\n          );\n\n          viewportsRenderList.push(renderedViewport);\n        }\n        return viewportsRenderList;\n      }\n    );\n\n    Promise.allSettled(segmentationRenderList).then(() => {\n      // for all viewports in the toolGroup trigger a re-render\n      toolGroupViewports.forEach((viewport) => {\n        viewport.render();\n      });\n    });\n  };\n\n  /**\n   * Merge the toolGroup specific configuration with the default global configuration\n   * @param toolGroupId\n   * @returns\n   */\n  _getMergedRepresentationsConfig(\n    toolGroupId: string\n  ): SegmentationRepresentationConfig {\n    const toolGroupConfig =\n      segmentationConfig.getToolGroupSpecificConfig(toolGroupId);\n    const globalConfig = segmentationConfig.getGlobalConfig();\n\n    // merge two configurations and override the global config\n    const mergedConfig = csUtils.deepMerge(globalConfig, toolGroupConfig);\n\n    return mergedConfig;\n  }\n}\n\nSegmentationDisplayTool.toolName = 'SegmentationDisplay';\nexport default SegmentationDisplayTool;\n","import {\n  triggerEvent,\n  eventTarget,\n  getRenderingEngine,\n  Enums,\n  Types,\n} from '@cornerstonejs/core';\nimport { Events as csToolsEvents } from '../../enums';\nimport {\n  getToolGroup,\n  getToolGroupForViewport,\n} from '../../store/ToolGroupManager';\n\nimport SegmentationDisplayTool from '../../tools/displayTools/SegmentationDisplayTool';\nimport { SegmentationRenderedEventDetail } from '../../types/EventTypes';\n\n/**\n * SegmentationRenderingEngine is a class that is responsible for rendering\n * segmentations for a toolGroup. It will call SegmentationDisplayTool to render the segmentation\n * based on the segmentation data and their configurations. Note: This is a Singleton class\n * and should not be instantiated directly. To trigger a render for all the\n * segmentations of a tool group you can use.\n *\n * ```\n * triggerSegmentationRender(toolGroupId)\n * ```\n */\nclass SegmentationRenderingEngine {\n  private _needsRender: Set<string> = new Set();\n  private _animationFrameSet = false;\n  private _animationFrameHandle: number | null = null;\n  public hasBeenDestroyed: boolean;\n\n  public removeToolGroup(toolGroupId) {\n    this._needsRender.delete(toolGroupId);\n\n    if (this._needsRender.size === 0) {\n      this._reset();\n    }\n  }\n\n  public renderToolGroupSegmentations(toolGroupId): void {\n    this._setToolGroupSegmentationToBeRenderedNextFrame([toolGroupId]);\n  }\n\n  /**\n   *  _throwIfDestroyed Throws an error if trying to interact with the `RenderingEngine`\n   * instance after its `destroy` method has been called.\n   */\n  private _throwIfDestroyed() {\n    if (this.hasBeenDestroyed) {\n      throw new Error(\n        'this.destroy() has been manually called to free up memory, can not longer use this instance. Instead make a new one.'\n      );\n    }\n  }\n\n  private _setToolGroupSegmentationToBeRenderedNextFrame(\n    toolGroupIds: string[]\n  ) {\n    // Add the viewports to the set of flagged viewports\n    toolGroupIds.forEach((toolGroupId) => {\n      this._needsRender.add(toolGroupId);\n    });\n\n    // Render any flagged viewports\n    this._render();\n  }\n\n  /**\n   *  _render Sets up animation frame if necessary\n   */\n  private _render() {\n    // If we have viewports that need rendering and we have not already\n    // set the RAF callback to run on the next frame.\n    if (this._needsRender.size > 0 && this._animationFrameSet === false) {\n      this._animationFrameHandle = window.requestAnimationFrame(\n        this._renderFlaggedToolGroups\n      );\n\n      // Set the flag that we have already set up the next RAF call.\n      this._animationFrameSet = true;\n    }\n  }\n\n  private _renderFlaggedToolGroups = () => {\n    this._throwIfDestroyed();\n\n    // for each toolGroupId insides the _needsRender set, render the segmentation\n    const toolGroupIds = Array.from(this._needsRender.values());\n\n    for (const toolGroupId of toolGroupIds) {\n      this._triggerRender(toolGroupId);\n\n      // This viewport has been rendered, we can remove it from the set\n      this._needsRender.delete(toolGroupId);\n\n      // If there is nothing left that is flagged for rendering, stop here\n      // and allow RAF to be called again\n      if (this._needsRender.size === 0) {\n        this._animationFrameSet = false;\n        this._animationFrameHandle = null;\n        return;\n      }\n    }\n  };\n  _triggerRender(toolGroupId) {\n    const toolGroup = getToolGroup(toolGroupId);\n\n    if (!toolGroup) {\n      console.warn(`No tool group found with toolGroupId: ${toolGroupId}`);\n      return;\n    }\n\n    const { viewportsInfo } = toolGroup;\n    const viewports = [];\n\n    viewportsInfo.forEach(({ viewportId, renderingEngineId }) => {\n      const renderingEngine = getRenderingEngine(renderingEngineId);\n\n      if (!renderingEngine) {\n        console.warn('rendering Engine has been destroyed');\n        return;\n      }\n\n      viewports.push(renderingEngine.getViewport(viewportId));\n    });\n\n    const segmentationDisplayToolInstance = toolGroup.getToolInstance(\n      SegmentationDisplayTool.toolName\n    ) as SegmentationDisplayTool;\n    if (!segmentationDisplayToolInstance) {\n      console.warn('No segmentation tool found inside', toolGroupId);\n      return;\n    }\n\n    function onSegmentationRender(evt: Types.EventTypes.ImageRenderedEvent) {\n      const { element, viewportId, renderingEngineId } = evt.detail;\n\n      element.removeEventListener(\n        Enums.Events.IMAGE_RENDERED,\n        onSegmentationRender as EventListener\n      );\n\n      const toolGroup = getToolGroupForViewport(viewportId, renderingEngineId);\n\n      if (!toolGroup) {\n        console.warn('toolGroup has been destroyed');\n        return;\n      }\n\n      const eventDetail: SegmentationRenderedEventDetail = {\n        toolGroupId: toolGroup.id,\n        viewportId,\n      };\n\n      triggerEvent(eventTarget, csToolsEvents.SEGMENTATION_RENDERED, {\n        ...eventDetail,\n      });\n    }\n\n    // Todo: for other representations we probably need the drawSVG, but right now we are not using it\n    // drawSvg(element, (svgDrawingHelper) => {\n    //   const handleDrawSvg = (tool) => {\n    //     if (tool instanceof SegmentationDisplayTool && tool.renderAnnotation) {\n    //       tool.renderAnnotation({ detail: eventDetail })\n    //       triggerEvent(element, csToolsEvents.SEGMENTATION_RENDERED, { ...eventDetail })\n    //     }\n    //   }\n    //   enabledTools.forEach(handleDrawSvg)\n    // })\n\n    viewports.forEach(({ element }) => {\n      element.addEventListener(\n        Enums.Events.IMAGE_RENDERED,\n        onSegmentationRender\n      );\n    });\n\n    segmentationDisplayToolInstance.renderSegmentation(toolGroupId);\n  }\n\n  /**\n   *  _reset Resets the `RenderingEngine`\n   */\n  private _reset() {\n    window.cancelAnimationFrame(this._animationFrameHandle);\n\n    this._needsRender.clear();\n    this._animationFrameSet = false;\n    this._animationFrameHandle = null;\n  }\n}\n\nconst segmentationRenderingEngine = new SegmentationRenderingEngine();\n\n/**\n * It triggers a render for all the segmentations of the tool group with the given Id.\n * @param toolGroupId - The Id of the tool group to render.\n */\nfunction triggerSegmentationRender(toolGroupId: string): void {\n  segmentationRenderingEngine.renderToolGroupSegmentations(toolGroupId);\n}\n\nexport { segmentationRenderingEngine, triggerSegmentationRender };\nexport default triggerSegmentationRender;\n","import triggerSegmentationRender from '../../utilities/segmentation/triggerSegmentationRender';\nimport { SegmentationRepresentationModifiedEventType } from '../../types/EventTypes';\n\n/** A function that listens to the `segmentationStateModified` event and triggers\n * the `triggerSegmentationRender` function. This function is called when the\n * segmentation state or config is modified.\n */\nconst segmentationRepresentationModifiedListener = function (\n  evt: SegmentationRepresentationModifiedEventType\n): void {\n  const { toolGroupId } = evt.detail;\n  triggerSegmentationRender(toolGroupId);\n};\n\nexport default segmentationRepresentationModifiedListener;\n","import { cache } from '@cornerstonejs/core';\n\nimport triggerSegmentationRender from '../../utilities/segmentation/triggerSegmentationRender';\nimport SegmentationRepresentations from '../../enums/SegmentationRepresentations';\nimport * as SegmentationState from '../../stateManagement/segmentation/segmentationState';\nimport { SegmentationDataModifiedEventType } from '../../types/EventTypes';\n\n/** A callback function that is called when the segmentation data is modified which\n *  often is as a result of tool interactions e.g., scissors, eraser, etc.\n */\nconst onSegmentationDataModified = function (\n  evt: SegmentationDataModifiedEventType\n): void {\n  const { segmentationId, modifiedSlicesToUse } = evt.detail;\n\n  const { representationData, type } =\n    SegmentationState.getSegmentation(segmentationId);\n\n  let toolGroupIds;\n  if (type === SegmentationRepresentations.Labelmap) {\n    // get the volume from cache, we need the openGLTexture to be updated to GPU\n    const segmentationVolume = cache.getVolume(\n      representationData[type].volumeId\n    );\n\n    if (!segmentationVolume) {\n      console.warn('segmentation not found in cache');\n      return;\n    }\n\n    const { imageData, vtkOpenGLTexture } = segmentationVolume;\n\n    // Update the texture for the volume in the GPU\n    let slicesToUpdate;\n    if (modifiedSlicesToUse && Array.isArray(modifiedSlicesToUse)) {\n      slicesToUpdate = modifiedSlicesToUse;\n    } else {\n      const numSlices = imageData.getDimensions()[2];\n      slicesToUpdate = [...Array(numSlices).keys()];\n    }\n\n    slicesToUpdate.forEach((i) => {\n      vtkOpenGLTexture.setUpdatedFrame(i);\n    });\n\n    // Trigger modified on the imageData to update the image\n    imageData.modified();\n    toolGroupIds =\n      SegmentationState.getToolGroupIdsWithSegmentation(segmentationId);\n  } else {\n    throw new Error(\n      `onSegmentationDataModified: representationType ${type} not supported yet`\n    );\n  }\n\n  toolGroupIds.forEach((toolGroupId) => {\n    triggerSegmentationRender(toolGroupId);\n  });\n};\n\nexport default onSegmentationDataModified;\n","import triggerSegmentationRender from '../../utilities/segmentation/triggerSegmentationRender';\nimport { SegmentationRepresentationRemovedEventType } from '../../types/EventTypes';\n\n/** A function that listens to the `segmentationRepresentationRemoved` event and triggers\n * the `triggerSegmentationRender` function. This function is called when the\n * segmentation state or config is modified.\n */\nconst segmentationRepresentationRemovedEventListener = function (\n  evt: SegmentationRepresentationRemovedEventType\n): void {\n  const { toolGroupId, segmentationRepresentationUID } = evt.detail;\n\n  triggerSegmentationRender(toolGroupId);\n};\n\nexport default segmentationRepresentationRemovedEventListener;\n","import { SegmentationModifiedEventType } from '../../types/EventTypes';\nimport {\n  getToolGroupIdsWithSegmentation,\n  getSegmentationRepresentations,\n} from '../../stateManagement/segmentation/segmentationState';\nimport { triggerSegmentationRepresentationModified } from '../../stateManagement/segmentation/triggerSegmentationEvents';\n\n/** A function that listens to the `segmentationModified` event and triggers\n * the triggerSegmentationRepresentationModified on each toolGroup that\n * has a representation of the given segmentationId.\n */\nconst segmentationModifiedListener = function (\n  evt: SegmentationModifiedEventType\n): void {\n  const { segmentationId } = evt.detail;\n\n  const toolGroupIds = getToolGroupIdsWithSegmentation(segmentationId);\n\n  toolGroupIds.forEach((toolGroupId) => {\n    const segRepresentations = getSegmentationRepresentations(toolGroupId);\n    segRepresentations.forEach((representation) => {\n      if (representation.segmentationId === segmentationId) {\n        triggerSegmentationRepresentationModified(\n          toolGroupId,\n          representation.segmentationRepresentationUID\n        );\n      }\n    });\n  });\n};\n\nexport default segmentationModifiedListener;\n","import { getEnabledElement } from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\nimport { AnnotationTool, BaseTool } from '../tools';\nimport { Annotation } from '../types';\nimport { getAnnotations } from '../stateManagement/annotation/annotationState';\nimport * as ToolGroupManager from '../store/ToolGroupManager';\n\n/**\n * Get the annotation that is close to the provided canvas point, it will return\n * the first annotation that is found.\n *\n * @param element - The element to search for an annotation on.\n * @param canvasPoint - The canvasPoint on the page where the user clicked.\n * @param proximity - The distance from the canvasPoint to the annotation.\n * @returns The annotation for the element\n */\nfunction getAnnotationNearPoint(\n  element: HTMLDivElement,\n  canvasPoint: Types.Point2,\n  proximity = 5\n): Annotation | null {\n  // Todo: this function should return closest annotation, BUT, we are not using\n  // the function anywhere.\n  const enabledElement = getEnabledElement(element);\n  if (!enabledElement) {\n    throw new Error('getAnnotationNearPoint: enabledElement not found');\n  }\n\n  return getAnnotationNearPointOnEnabledElement(\n    enabledElement,\n    canvasPoint,\n    proximity\n  );\n}\n\n/**\n * \"Find the annotation near the point on the enabled element.\" it will return the\n * first annotation that is found.\n *\n * @param enabledElement - The element that is currently active.\n * @param point - The point to search near.\n * @param proximity - The distance from the point that the annotation must\n * be within.\n * @returns A Annotation object.\n */\nfunction getAnnotationNearPointOnEnabledElement(\n  enabledElement: Types.IEnabledElement,\n  point: Types.Point2,\n  proximity: number\n): Annotation | null {\n  // Todo: this function should return closest annotation, BUT, we are not using\n  // the function anywhere.\n  const { renderingEngineId, viewportId } = enabledElement;\n  const toolGroup = ToolGroupManager.getToolGroupForViewport(\n    viewportId,\n    renderingEngineId\n  );\n\n  if (!toolGroup) {\n    return null;\n  }\n\n  const { _toolInstances: tools } = toolGroup;\n  for (const name in tools) {\n    const found = findAnnotationNearPointByTool(\n      tools[name],\n      enabledElement,\n      point,\n      proximity\n    );\n    if (found) {\n      return found;\n    }\n  }\n\n  return null;\n}\n\n/**\n * For the provided toolClass, it will find the annotation that is near the point,\n * it will return the first annotation that is found.\n *\n * @param tool - AnnotationTool\n * @param enabledElement - The element that is currently active.\n * @param point - The point in the image where the user clicked.\n * @param proximity - The distance from the point that the tool must be\n * within to be considered \"near\" the point.\n * @returns The annotation object that is being returned is the annotation object that\n * is being used in the tool.\n */\nfunction findAnnotationNearPointByTool(\n  tool: AnnotationTool,\n  enabledElement: Types.IEnabledElement,\n  point: Types.Point2,\n  proximity: number\n): Annotation | null {\n  // Todo: this function does not return closest annotation. It just returns\n  // the first annotation that is found in the proximity. BUT, we are not using\n  // the function anywhere.\n  const { viewport } = enabledElement;\n\n  const annotations = getAnnotations(\n    (tool.constructor as typeof BaseTool).toolName,\n    viewport?.element\n  );\n  const currentId = viewport?.getCurrentImageId?.();\n  if (annotations?.length) {\n    const { element } = enabledElement.viewport;\n    for (const annotation of annotations) {\n      const referencedImageId = annotation.metadata?.referencedImageId;\n      if (\n        (currentId && referencedImageId && currentId !== referencedImageId) ||\n        !tool.isPointNearTool\n      ) {\n        continue;\n      }\n\n      if (\n        tool.isPointNearTool(element, annotation, point, proximity, '') ||\n        tool.getHandleNearImagePoint(element, annotation, point, proximity)\n      ) {\n        return annotation;\n      }\n    }\n  }\n  return null;\n}\n\nexport { getAnnotationNearPoint, getAnnotationNearPointOnEnabledElement };\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @since 0.1.0\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * isObject({})\n * // => true\n *\n * isObject([1, 2, 3])\n * // => true\n *\n * isObject(Function)\n * // => true\n *\n * isObject(null)\n * // => false\n */\nfunction isObject(value) {\n  const type = typeof value;\n\n  return value !== null && (type === 'object' || type === 'function');\n}\n\nexport default isObject;\n","import isObject from './isObject';\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked, or until the next browser frame is drawn. The debounced function\n * comes with a `cancel` method to cancel delayed `func` invocations and a\n * `flush` method to immediately invoke them. Provide `options` to indicate\n * whether `func` should be invoked on the leading and/or trailing edge of the\n * `wait` timeout. The `func` is invoked with the last arguments provided to the\n * debounced function. Subsequent calls to the debounced function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * If `wait` is omitted in an environment with `requestAnimationFrame`, `func`\n * invocation will be deferred until the next frame is drawn (typically about\n * 16ms).\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `debounce` and `throttle`.\n *\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0]\n *  The number of milliseconds to delay; if omitted, `requestAnimationFrame` is\n *  used (if available).\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', debounce(calculateLayout, 150))\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }))\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * const debounced = debounce(batchLog, 250, { 'maxWait': 1000 })\n * const source = new EventSource('/stream')\n * jQuery(source).on('message', debounced)\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel)\n *\n * // Check for pending invocations.\n * const status = debounced.pending() ? \"Pending...\" : \"Ready\"\n */\nfunction debounce(func, wait, options) {\n  let lastArgs, lastThis, maxWait, result, timerId, lastCallTime;\n\n  let lastInvokeTime = 0;\n  let leading = false;\n  let maxing = false;\n  let trailing = true;\n\n  // Bypass `requestAnimationFrame` by explicitly setting `wait=0`.\n  const useRAF =\n    !wait && wait !== 0 && typeof window.requestAnimationFrame === 'function';\n\n  if (typeof func !== 'function') {\n    throw new TypeError('Expected a function');\n  }\n  wait = Number(wait) || 0;\n  if (isObject(options)) {\n    leading = Boolean(options.leading);\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? Math.max(Number(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? Boolean(options.trailing) : trailing;\n  }\n\n  function invokeFunc(time) {\n    const args = lastArgs;\n    const thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n\n    return result;\n  }\n\n  function startTimer(pendingFunc, wait) {\n    if (useRAF) {\n      return window.requestAnimationFrame(pendingFunc);\n    }\n\n    return setTimeout(pendingFunc, wait);\n  }\n\n  function cancelTimer(id) {\n    if (useRAF) {\n      return window.cancelAnimationFrame(id);\n    }\n    clearTimeout(id);\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = startTimer(timerExpired, wait);\n\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    const timeSinceLastCall = time - lastCallTime;\n    const timeSinceLastInvoke = time - lastInvokeTime;\n    const timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? Math.min(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    const timeSinceLastCall = time - lastCallTime;\n    const timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (\n      lastCallTime === undefined ||\n      timeSinceLastCall >= wait ||\n      timeSinceLastCall < 0 ||\n      (maxing && timeSinceLastInvoke >= maxWait)\n    );\n  }\n\n  function timerExpired() {\n    const time = Date.now();\n\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = startTimer(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      cancelTimer(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(Date.now());\n  }\n\n  function pending() {\n    return timerId !== undefined;\n  }\n\n  function debounced(...args) {\n    const time = Date.now();\n    const isInvoking = shouldInvoke(time);\n\n    lastArgs = args;\n    lastThis = this; // eslint-disable-line consistent-this\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = startTimer(timerExpired, wait);\n\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = startTimer(timerExpired, wait);\n    }\n\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  debounced.pending = pending;\n\n  return debounced;\n}\n\nexport default debounce;\n","import debounce from './debounce';\nimport isObject from './isObject';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds (or once per browser frame). The throttled function\n * comes with a `cancel` method to cancel delayed `func` invocations and a\n * `flush` method to immediately invoke them. Provide `options` to indicate\n * whether `func` should be invoked on the leading and/or trailing edge of the\n * `wait` timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * If `wait` is omitted in an environment with `requestAnimationFrame`, `func`\n * invocation will be deferred until the next frame is drawn (typically about\n * 16ms).\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `throttle` and `debounce`.\n *\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0]\n *  The number of milliseconds to throttle invocations to; if omitted,\n *  `requestAnimationFrame` is used (if available).\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', throttle(updatePosition, 100))\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * const throttled = throttle(renewToken, 300000, { 'trailing': false })\n * jQuery(element).on('click', throttled)\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel)\n */\nfunction throttle(func, wait, options) {\n  let leading = true;\n  let trailing = true;\n\n  if (typeof func !== 'function') {\n    throw new TypeError('Expected a function');\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? Boolean(options.leading) : leading;\n    trailing = 'trailing' in options ? Boolean(options.trailing) : trailing;\n  }\n\n  return debounce(func, wait, {\n    leading,\n    trailing,\n    maxWait: wait,\n  });\n}\n\nexport default throttle;\n","/**\n * Clips a value to an upper and lower bound.\n * @export @public @method\n * @name clip\n *\n * @param  {number} val  The value to clip.\n * @param  {number} low  The lower bound.\n * @param  {number} high The upper bound.\n * @returns {number}      The clipped value.\n */\nexport function clip(val, low, high) {\n  return Math.min(Math.max(low, val), high);\n}\n\n/**\n * Clips a value within a box.\n * @export @public @method\n * @name clipToBox\n *\n * @param  {Object} point The point to clip\n * @param  {Object} box   The bounding box to clip to.\n * @returns {Object}       The clipped point.\n */\nexport function clipToBox(point, box) {\n  // Clip an {x, y} point to a box of size {width, height}\n  point.x = clip(point.x, 0, box.width);\n  point.y = clip(point.y, 0, box.height);\n}\n\nexport default clip;\n","import { utilities, Enums } from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\nconst { calibratedPixelSpacingMetadataProvider } = utilities;\n\n/**\n * It adds the provided spacing to the Cornerstone internal calibratedPixelSpacing\n * metadata provider, then it invalidates all the tools that have the imageId as\n * their reference imageIds. Finally, it triggers a re-render for invalidated annotations.\n * @param imageId - ImageId for the calibrated image\n * @param rowPixelSpacing - Spacing in row direction\n * @param calibrationOrScale - either the calibration object or a scale value\n */\nexport default function calibrateImageSpacing(\n  imageId: string,\n  renderingEngine: Types.IRenderingEngine,\n  calibrationOrScale: Types.IImageCalibration | number\n): void {\n  // Handle simple parameter version\n  if (typeof calibrationOrScale === 'number') {\n    calibrationOrScale = {\n      type: Enums.CalibrationTypes.USER,\n      scale: calibrationOrScale,\n    };\n  }\n  // 1. Add the calibratedPixelSpacing metadata to the metadata\n  calibratedPixelSpacingMetadataProvider.add(imageId, calibrationOrScale);\n\n  // 2. Update the actor for stackViewports\n  const viewports = renderingEngine.getStackViewports();\n\n  // 2.1 If imageId is already being used in a stackViewport -> update actor\n  viewports.forEach((viewport) => {\n    const imageIds = viewport.getImageIds();\n    if (imageIds.includes(imageId)) {\n      viewport.calibrateSpacing(imageId);\n    }\n  });\n\n  // 2.2 If imageId is cached but not being displayed in a viewport, stackViewport\n  // will handle using the calibratedPixelSpacing since it has been added\n  // to the provider\n}\n","import type { Types } from '@cornerstonejs/core';\nimport triggerAnnotationRender from './triggerAnnotationRender';\n\nexport function triggerAnnotationRenderForViewportIds(\n  renderingEngine: Types.IRenderingEngine,\n  viewportIdsToRender: string[]\n): void {\n  if (!viewportIdsToRender.length) {\n    return;\n  }\n\n  viewportIdsToRender.forEach((viewportId) => {\n    const { element } = renderingEngine.getViewport(viewportId);\n    triggerAnnotationRender(element);\n  });\n}\n\nexport default triggerAnnotationRenderForViewportIds;\n","import {\n  StackViewport,\n  Types,\n  VolumeViewport,\n  eventTarget,\n  EVENTS,\n  utilities as csUtils,\n  getEnabledElement,\n  VideoViewport,\n} from '@cornerstonejs/core';\nimport { ScrollOptions, EventTypes } from '../types';\n\n/**\n * It scrolls one slice in the Stack or Volume Viewport, it uses the options provided\n * to determine the slice to scroll to. For Stack Viewport, it scrolls in the 1 or -1\n * direction, for Volume Viewport, it uses the camera and focal point to determine the\n * slice to scroll to based on the spacings.\n * @param viewport - The viewport in which to scroll\n * @param options - Options to use for scrolling, including direction, invert, and volumeId\n * @returns\n */\nexport default function scroll(\n  viewport: Types.IViewport,\n  options: ScrollOptions\n): void {\n  // check if viewport is disabled then throw error\n  const enabledElement = getEnabledElement(viewport.element);\n\n  if (!enabledElement) {\n    throw new Error('Scroll::Viewport is not enabled (it might be disabled)');\n  }\n\n  if (\n    viewport instanceof StackViewport &&\n    viewport.getImageIds().length === 0\n  ) {\n    throw new Error('Scroll::Stack Viewport has no images');\n  }\n\n  const { type: viewportType } = viewport;\n  const { volumeId, delta } = options;\n\n  if (viewport instanceof StackViewport) {\n    viewport.scroll(delta, options.debounceLoading, options.loop);\n  } else if (viewport instanceof VolumeViewport) {\n    scrollVolume(viewport, volumeId, delta);\n  } else if (viewport instanceof VideoViewport) {\n    viewport.scroll(delta);\n  } else {\n    throw new Error(`Not implemented for Viewport Type: ${viewportType}`);\n  }\n}\n\nexport function scrollVolume(\n  viewport: VolumeViewport,\n  volumeId: string,\n  delta: number\n) {\n  const { numScrollSteps, currentStepIndex, sliceRangeInfo } =\n    csUtils.getVolumeViewportScrollInfo(viewport, volumeId);\n\n  if (!sliceRangeInfo) {\n    return;\n  }\n\n  const { sliceRange, spacingInNormalDirection, camera } = sliceRangeInfo;\n  const { focalPoint, viewPlaneNormal, position } = camera;\n\n  const { newFocalPoint, newPosition } = csUtils.snapFocalPointToSlice(\n    focalPoint,\n    position,\n    sliceRange,\n    viewPlaneNormal,\n    spacingInNormalDirection,\n    delta\n  );\n\n  viewport.setCamera({\n    focalPoint: newFocalPoint,\n    position: newPosition,\n  });\n  viewport.render();\n\n  const desiredStepIndex = currentStepIndex + delta;\n\n  if (\n    (desiredStepIndex > numScrollSteps || desiredStepIndex < 0) &&\n    viewport.getCurrentImageId() // Check that we are in the plane of acquistion\n  ) {\n    // One common use case of this trigger might be to load the next\n    // volume in a time series or the next segment of a partially loaded volume.\n\n    const VolumeScrollEventDetail = {\n      volumeId,\n      viewport,\n      delta,\n      desiredStepIndex,\n      currentStepIndex,\n      numScrollSteps,\n      currentImageId: viewport.getCurrentImageId(),\n    };\n\n    csUtils.triggerEvent(\n      eventTarget,\n      EVENTS.VOLUME_SCROLL_OUT_OF_BOUNDS,\n      VolumeScrollEventDetail as EventTypes.VolumeScrollOutOfBoundsEventDetail\n    );\n  }\n}\n","import {\n  getEnabledElement,\n  StackViewport,\n  VolumeViewport,\n  utilities as csUtils,\n  Types,\n} from '@cornerstonejs/core';\nimport JumpToSliceOptions from '../../types/JumpToSliceOptions';\nimport clip from '../clip';\nimport scroll from '../scroll';\n\n/**\n * It uses the imageIndex in the Options to scroll to the slice that is intended.\n * It works for both Stack and Volume viewports. In VolumeViewports, the imageIndex\n * should be given with respect to the index in the 3D image in the view direction\n * (i.e. the index of the slice in Axial, Sagittal, Coronal, or Oblique).\n *\n * @param element - the HTML Div element scrolling inside\n * @param options - the options used for jumping to a slice\n * @returns Promise that resolves to ImageIdIndex\n */\nasync function jumpToSlice(\n  element: HTMLDivElement,\n  options = {} as JumpToSliceOptions\n): Promise<void> {\n  const { imageIndex, debounceLoading, volumeId } = options;\n  const enabledElement = getEnabledElement(element);\n\n  if (!enabledElement) {\n    throw new Error('Element has been disabled');\n  }\n\n  const { viewport } = enabledElement;\n\n  const { imageIndex: currentImageIndex, numberOfSlices } = _getImageSliceData(\n    viewport,\n    debounceLoading\n  );\n\n  const imageIndexToJump = _getImageIndexToJump(numberOfSlices, imageIndex);\n  const delta = imageIndexToJump - currentImageIndex;\n\n  scroll(viewport, { delta, debounceLoading, volumeId });\n}\n\nfunction _getImageSliceData(\n  viewport: Types.IStackViewport | Types.IVolumeViewport,\n  debounceLoading?: boolean\n): Types.ImageSliceData {\n  if (viewport instanceof StackViewport) {\n    return {\n      numberOfSlices: viewport.getImageIds().length,\n      imageIndex: debounceLoading\n        ? viewport.getTargetImageIdIndex()\n        : viewport.getCurrentImageIdIndex(),\n    };\n  } else if (viewport instanceof VolumeViewport) {\n    return csUtils.getImageSliceDataForVolumeViewport(viewport);\n  } else {\n    throw new Error('Unsupported viewport type');\n  }\n}\n\nfunction _getImageIndexToJump(\n  numberOfSlices: number,\n  imageIndex: number\n): number {\n  const lastSliceIndex = numberOfSlices - 1;\n\n  return clip(imageIndex, 0, lastSliceIndex);\n}\n\nexport default jumpToSlice;\n","import { vec3 } from 'gl-matrix';\nimport type { Types } from '@cornerstonejs/core';\nimport type { vtkImageData } from '@kitware/vtk.js/Common/DataModel/ImageData';\nimport BoundsIJK from '../types/BoundsIJK';\n\nexport type PointInShape = {\n  value: number;\n  index: number;\n  pointIJK: Types.Point3;\n  pointLPS: Types.Point3;\n};\n\nexport type PointInShapeCallback = ({\n  value,\n  index,\n  pointIJK,\n  pointLPS,\n}: {\n  value: number;\n  index: number;\n  pointIJK: Types.Point3;\n  pointLPS: Types.Point3;\n}) => void;\n\nexport type ShapeFnCriteria = (\n  pointIJK: Types.Point3,\n  pointLPS: Types.Point3\n) => boolean;\n\n/**\n * For each point in the image (If boundsIJK is not provided, otherwise, for each\n * point in the provided bounding box), It runs the provided callback IF the point\n * passes the provided criteria to be inside the shape (which is defined by the\n * provided pointInShapeFn)\n *\n * @param imageData - The image data object.\n * @param dimensions - The dimensions of the image.\n * @param pointInShapeFn - A function that takes a point in LPS space and returns\n * true if the point is in the shape and false if it is not.\n * @param callback - A function that will be called for\n * every point in the shape.\n * @param boundsIJK - The bounds of the volume in IJK coordinates.\n */\nexport default function pointInShapeCallback(\n  imageData: vtkImageData | Types.CPUImageData,\n  pointInShapeFn: ShapeFnCriteria,\n  callback?: PointInShapeCallback,\n  boundsIJK?: BoundsIJK\n): Array<PointInShape> {\n  let iMin, iMax, jMin, jMax, kMin, kMax;\n\n  let scalarData;\n\n  // if getScalarData is a method on imageData\n  if ((imageData as Types.CPUImageData).getScalarData) {\n    scalarData = (imageData as Types.CPUImageData).getScalarData();\n  } else {\n    scalarData = (imageData as vtkImageData)\n      .getPointData()\n      .getScalars()\n      .getData();\n  }\n\n  const dimensions = imageData.getDimensions();\n\n  if (!boundsIJK) {\n    iMin = 0;\n    iMax = dimensions[0];\n    jMin = 0;\n    jMax = dimensions[1];\n    kMin = 0;\n    kMax = dimensions[2];\n  } else {\n    [[iMin, iMax], [jMin, jMax], [kMin, kMax]] = boundsIJK;\n  }\n\n  const start = vec3.fromValues(iMin, jMin, kMin);\n\n  const direction = imageData.getDirection();\n  const rowCosines = direction.slice(0, 3);\n  const columnCosines = direction.slice(3, 6);\n  const scanAxisNormal = direction.slice(6, 9);\n\n  const spacing = imageData.getSpacing();\n  const [rowSpacing, columnSpacing, scanAxisSpacing] = spacing;\n\n  // @ts-ignore will be fixed in vtk-master\n  const worldPosStart = imageData.indexToWorld(start);\n\n  const rowStep = vec3.fromValues(\n    rowCosines[0] * rowSpacing,\n    rowCosines[1] * rowSpacing,\n    rowCosines[2] * rowSpacing\n  );\n\n  const columnStep = vec3.fromValues(\n    columnCosines[0] * columnSpacing,\n    columnCosines[1] * columnSpacing,\n    columnCosines[2] * columnSpacing\n  );\n\n  const scanAxisStep = vec3.fromValues(\n    scanAxisNormal[0] * scanAxisSpacing,\n    scanAxisNormal[1] * scanAxisSpacing,\n    scanAxisNormal[2] * scanAxisSpacing\n  );\n\n  const yMultiple = dimensions[0];\n  const zMultiple = dimensions[0] * dimensions[1];\n\n  const pointsInShape: Array<PointInShape> = [];\n  for (let k = kMin; k <= kMax; k++) {\n    for (let j = jMin; j <= jMax; j++) {\n      for (let i = iMin; i <= iMax; i++) {\n        const pointIJK: Types.Point3 = [i, j, k];\n        const dI = i - iMin;\n        const dJ = j - jMin;\n        const dK = k - kMin;\n\n        const startWorld = worldPosStart;\n\n        const pointLPS: Types.Point3 = [\n          startWorld[0] +\n            dI * rowStep[0] +\n            dJ * columnStep[0] +\n            dK * scanAxisStep[0],\n          startWorld[1] +\n            dI * rowStep[1] +\n            dJ * columnStep[1] +\n            dK * scanAxisStep[1],\n          startWorld[2] +\n            dI * rowStep[2] +\n            dJ * columnStep[2] +\n            dK * scanAxisStep[2],\n        ];\n\n        if (pointInShapeFn(pointLPS, pointIJK)) {\n          const index = k * zMultiple + j * yMultiple + i;\n          const value = scalarData[index];\n\n          pointsInShape.push({ value, index, pointIJK, pointLPS });\n          if (callback !== null) {\n            callback({ value, index, pointIJK, pointLPS });\n          }\n        }\n      }\n    }\n  }\n  return pointsInShape;\n}\n","import type { Types } from '@cornerstonejs/core';\n\n/**\n * Uses the current bounds of the 2D rectangle and extends it in the view axis by numSlices\n * It compares min and max of each IJK to find the view axis (for axial, zMin === zMax) and\n * then calculates the extended range. It will assume the slice is relative to the\n * current slice and will add the given slices to the current max of the boundingBox.\n * @param boundsIJK - [[iMin, iMax], [jMin, jMax], [kMin, kMax]]\n * @param slices - number of slices to project before and after\n * @returns extended bounds\n */\nfunction extend2DBoundingBoxInViewAxis(\n  boundsIJK: [Types.Point2, Types.Point2, Types.Point2],\n  numSlicesToProject: number\n): [Types.Point2, Types.Point2, Types.Point2] {\n  // find which index in boundsIJK has the same first and last value\n  const sliceNormalIndex = boundsIJK.findIndex(([min, max]) => min === max);\n\n  if (sliceNormalIndex === -1) {\n    throw new Error('3D bounding boxes not supported in an oblique plane');\n  }\n\n  // get the index and subtract slices from the min and add to the max\n  boundsIJK[sliceNormalIndex][0] -= numSlicesToProject;\n  boundsIJK[sliceNormalIndex][1] += numSlicesToProject;\n  return boundsIJK;\n}\n\nexport default extend2DBoundingBoxInViewAxis;\n","import type { Types } from '@cornerstonejs/core';\n\n/**\n * With a given vertices (points) coordinates in IJK, it calculates the minimum and maximum\n * coordinate in each axis, and returns them. If dimensions are provided it also\n * clip the min, max to the provided width, height and depth\n *\n * @param points - shape corner points coordinates (IJK)\n * @param dimensions - dimensions of the image\n * @returns [[xMin,xMax],[yMin,yMax], [zMin,zMax]]\n */\nfunction getBoundingBoxAroundShape(\n  points: Types.Point3[],\n  dimensions?: Types.Point3\n): [Types.Point2, Types.Point2, Types.Point2] {\n  let xMin = Infinity;\n  let xMax = 0;\n  let yMin = Infinity;\n  let yMax = 0;\n  let zMin = Infinity;\n  let zMax = 0;\n\n  points.forEach((p) => {\n    xMin = Math.min(p[0], xMin);\n    xMax = Math.max(p[0], xMax);\n    yMin = Math.min(p[1], yMin);\n    yMax = Math.max(p[1], yMax);\n    zMin = Math.min(p[2], zMin);\n    zMax = Math.max(p[2], zMax);\n  });\n\n  xMin = Math.floor(xMin);\n  xMax = Math.floor(xMax);\n  yMin = Math.floor(yMin);\n  yMax = Math.floor(yMax);\n  zMin = Math.floor(zMin);\n  zMax = Math.floor(zMax);\n\n  if (dimensions) {\n    // clip the min, max to the provided width, height and depth\n    const [width, height, depth] = dimensions;\n    xMin = Math.max(0, xMin);\n    xMax = Math.min(width - 1, xMax);\n    yMin = Math.max(0, yMin);\n    yMax = Math.min(height - 1, yMax);\n    zMin = Math.max(0, zMin);\n    zMax = Math.min(depth - 1, zMax);\n  }\n\n  return [\n    [xMin, xMax],\n    [yMin, yMax],\n    [zMin, zMax],\n  ];\n}\n\nexport default getBoundingBoxAroundShape;\n","import { utilities as csUtils } from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\nimport type { vtkImageData } from '@kitware/vtk.js/Common/DataModel/ImageData';\nimport { vec3 } from 'gl-matrix';\nimport { pointInSphere } from './math/sphere';\nimport pointInShapeCallback, {\n  PointInShapeCallback,\n} from './pointInShapeCallback';\nimport { BoundsIJK } from '../types';\nimport { getBoundingBoxAroundShape } from './boundingBox';\n\nconst { transformWorldToIndex } = csUtils;\n\n/**\n * Given an imageData, and the great circle top and bottom points of a sphere,\n * this function will run the callback for each point of the imageData that is\n * within the sphere defined by the great circle points. If the viewport\n * is provided, region of interest will be an accurate approximation of the\n * sphere (using viewport camera), and the resulting performance will be\n * better.\n *\n * @privateRemarks great circle also known as orthodrome is the intersection of\n * the sphere and the plane that passes through the center of the sphere\n *\n * @param imageData - The volume imageData\n * @param circlePoints - bottom and top points of the great circle in world coordinates\n * @param callback - A callback function that will be called for each point in the shape.\n */\nexport default function pointInSurroundingSphereCallback(\n  imageData: vtkImageData,\n  circlePoints: [Types.Point3, Types.Point3],\n  callback: PointInShapeCallback,\n  viewport?: Types.IVolumeViewport\n): void {\n  // We can run the sphere equation to determine if a point is inside\n  // the sphere; however, since the imageData dimensions can be quite large, we\n  // can narrow down the search by estimating the bounds of the sphere in index\n  // space.\n  const { boundsIJK, centerWorld, radiusWorld } = _getBounds(\n    circlePoints,\n    imageData,\n    viewport\n  );\n\n  const sphereObj = {\n    center: centerWorld,\n    radius: radiusWorld,\n  };\n\n  pointInShapeCallback(\n    imageData,\n    (pointLPS) => pointInSphere(sphereObj, pointLPS),\n    callback,\n    boundsIJK\n  );\n}\n\nfunction _getBounds(\n  circlePoints: [Types.Point3, Types.Point3],\n  imageData: vtkImageData,\n  viewport\n): {\n  boundsIJK: BoundsIJK;\n  centerWorld: Types.Point3;\n  radiusWorld: number;\n} {\n  const [bottom, top] = circlePoints;\n\n  // Sphere center in world\n  const centerWorld = vec3.fromValues(\n    (bottom[0] + top[0]) / 2,\n    (bottom[1] + top[1]) / 2,\n    (bottom[2] + top[2]) / 2\n  );\n\n  // sphere radius in world\n  const radiusWorld = vec3.distance(bottom, top) / 2;\n\n  let boundsIJK;\n\n  if (!viewport) {\n    // If no viewport is provide (no camera), we can estimate the bounding box\n    // of the sphere in index space.\n    // This is done by calculating the maximum value for radius in the index\n    // space (since the radius is in world space, we need to convert it to index, and\n    // each dimensions can have a different scale factor). Therefore, by finding\n    // the minimum spacing value in the imageData, we can calculate the maximum\n    // radius in index space and use that to calculate the bounds of the sphere\n    // This will not be accurate, but it is a good first approximation.\n    // sphere center in index\n    const centerIJK = transformWorldToIndex(\n      imageData,\n      centerWorld as Types.Point3\n    );\n\n    const spacings = imageData.getSpacing();\n    const minSpacing = Math.min(...spacings);\n\n    const maxRadiusIJK = Math.ceil(radiusWorld / minSpacing);\n\n    boundsIJK = [\n      [centerIJK[0] - maxRadiusIJK, centerIJK[0] + maxRadiusIJK],\n      [centerIJK[1] - maxRadiusIJK, centerIJK[1] + maxRadiusIJK],\n      [centerIJK[2] - maxRadiusIJK, centerIJK[2] + maxRadiusIJK],\n    ];\n\n    return {\n      boundsIJK,\n      centerWorld: centerWorld as Types.Point3,\n      radiusWorld,\n    };\n  }\n\n  boundsIJK = _computeBoundsIJKWithCamera(\n    imageData,\n    viewport,\n    circlePoints,\n    centerWorld,\n    radiusWorld\n  );\n\n  return {\n    boundsIJK,\n    centerWorld: centerWorld as Types.Point3,\n    radiusWorld,\n  };\n}\n\nfunction _computeBoundsIJKWithCamera(\n  imageData,\n  viewport,\n  circlePoints,\n  centerWorld,\n  radiusWorld\n) {\n  const [bottom, top] = circlePoints;\n\n  const dimensions = imageData.getDimensions() as Types.Point3;\n  const camera = viewport.getCamera();\n\n  // Calculate viewRight from the camera, this will get used in order to\n  // calculate circles topLeft and bottomRight on different planes of intersection\n  // between sphere and viewPlane\n  const viewUp = vec3.fromValues(\n    camera.viewUp[0],\n    camera.viewUp[1],\n    camera.viewUp[2]\n  );\n  const viewPlaneNormal = vec3.fromValues(\n    camera.viewPlaneNormal[0],\n    camera.viewPlaneNormal[1],\n    camera.viewPlaneNormal[2]\n  );\n  const viewRight = vec3.create();\n\n  vec3.cross(viewRight, viewUp, viewPlaneNormal);\n\n  // we need to find the bounding box of the sphere in the image, e.g., the\n  // topLeftWorld and bottomRightWorld points of the bounding box.\n  // We go from the sphereCenter in the normal direction of amount radius, and\n  // we go left to find the topLeftWorld point of the bounding box. Next we go\n  // in the opposite direction and go right to find the bottomRightWorld point\n  // of the bounding box.\n  const topLeftWorld = vec3.create();\n  const bottomRightWorld = vec3.create();\n\n  vec3.scaleAndAdd(topLeftWorld, top, viewPlaneNormal, radiusWorld);\n  vec3.scaleAndAdd(bottomRightWorld, bottom, viewPlaneNormal, -radiusWorld);\n\n  // go in the direction of viewRight with the value of radius\n  vec3.scaleAndAdd(topLeftWorld, topLeftWorld, viewRight, -radiusWorld);\n  vec3.scaleAndAdd(bottomRightWorld, bottomRightWorld, viewRight, radiusWorld);\n\n  // convert the world coordinates to index coordinates\n\n  const sphereCornersIJK = [\n    <Types.Point3>transformWorldToIndex(imageData, <Types.Point3>topLeftWorld),\n    <Types.Point3>(\n      transformWorldToIndex(imageData, <Types.Point3>bottomRightWorld)\n    ),\n  ];\n\n  // get the bounding box of the sphere in the image\n  const boundsIJK = getBoundingBoxAroundShape(sphereCornersIJK, dimensions);\n\n  return boundsIJK;\n}\n","import type { Types } from '@cornerstonejs/core';\nimport { vec3 } from 'gl-matrix';\n\ntype Sphere = {\n  center: Types.Point3 | vec3;\n  radius: number;\n};\n\n/**\n * Checks if a point is inside a sphere. Note: this is similar to the\n * `pointInEllipse` function, but since we don't need checks for the\n * ellipse's rotation in different views, we can use a simpler equation\n * which would be faster (no if statements).\n *\n * @param sphere - Sphere object with center and radius\n * @param pointLPS - the point to check in world coordinates\n * @returns boolean\n */\nexport default function pointInSphere(\n  sphere: Sphere,\n  pointLPS: Types.Point3\n): boolean {\n  const { center, radius } = sphere;\n\n  return (\n    (pointLPS[0] - center[0]) ** 2 +\n      (pointLPS[1] - center[1]) ** 2 +\n      (pointLPS[2] - center[2]) ** 2 <=\n    radius ** 2\n  );\n}\n","/**\n * Truncates decimal points to that there is at least 1+precision significant\n * digits.\n *\n * For example, with the default precision 2 (3 significant digits)\n * * Values larger than 100 show no information after the decimal point\n * * Values between 10 and 99 show 1 decimal point\n * * Values between 1 and 9 show 2 decimal points\n *\n * @param value - to return a fixed measurement value from\n * @param precision - defining how many digits after 1..9 are desired\n */\nfunction roundNumber(value: string | number, precision = 2): string {\n  if (value === undefined || value === null || value === '') {\n    return 'NaN';\n  }\n  value = Number(value);\n  if (value < 0.0001) {\n    return `${value}`;\n  }\n  const fixedPrecision =\n    value >= 100\n      ? precision - 2\n      : value >= 10\n      ? precision - 1\n      : value >= 1\n      ? precision\n      : value >= 0.1\n      ? precision + 1\n      : value >= 0.01\n      ? precision + 2\n      : value >= 0.001\n      ? precision + 3\n      : precision + 4;\n  return value.toFixed(fixedPrecision);\n}\n\nexport default roundNumber;\n","import { Types } from '@cornerstonejs/core';\n\nfunction isWithinThreshold(\n  index: number,\n  imageVolume: Types.IImageVolume,\n  strategySpecificConfiguration: any\n) {\n  const { THRESHOLD_INSIDE_CIRCLE } = strategySpecificConfiguration;\n\n  const voxelValue = imageVolume.getScalarData()[index];\n  const { threshold } = THRESHOLD_INSIDE_CIRCLE;\n\n  return threshold[0] <= voxelValue && voxelValue <= threshold[1];\n}\n\nexport default isWithinThreshold;\n","import type { Types } from '@cornerstonejs/core';\nimport { utilities as csUtils } from '@cornerstonejs/core';\n\nimport { triggerSegmentationDataModified } from '../../../stateManagement/segmentation/triggerSegmentationEvents';\nimport { pointInSurroundingSphereCallback } from '../../../utilities';\nimport isWithinThreshold from './utils/isWithinThreshold';\n\ntype OperationData = {\n  points: [Types.Point3, Types.Point3, Types.Point3, Types.Point3];\n  volume: Types.IImageVolume;\n  imageVolume: Types.IImageVolume;\n  segmentIndex: number;\n  segmentationId: string;\n  segmentsLocked: number[];\n  viewPlaneNormal: Types.Point3;\n  viewUp: Types.Point3;\n  strategySpecificConfiguration: any;\n  constraintFn: () => boolean;\n};\n\nfunction fillSphere(\n  enabledElement: Types.IEnabledElement,\n  operationData: OperationData,\n  _inside = true,\n  threshold = false\n): void {\n  const { viewport } = enabledElement;\n  const {\n    volume: segmentation,\n    segmentsLocked,\n    segmentIndex,\n    imageVolume,\n    strategySpecificConfiguration,\n    segmentationId,\n    points,\n  } = operationData;\n\n  const { imageData, dimensions } = segmentation;\n  const scalarData = segmentation.getScalarData();\n  const scalarIndex = [];\n\n  let callback;\n\n  if (threshold) {\n    callback = ({ value, index, pointIJK }) => {\n      if (segmentsLocked.includes(value)) {\n        return;\n      }\n\n      if (\n        isWithinThreshold(index, imageVolume, strategySpecificConfiguration)\n      ) {\n        scalarData[index] = segmentIndex;\n        scalarIndex.push(index);\n      }\n    };\n  } else {\n    callback = ({ index, value }) => {\n      if (segmentsLocked.includes(value)) {\n        return;\n      }\n      scalarData[index] = segmentIndex;\n      scalarIndex.push(index);\n    };\n  }\n\n  pointInSurroundingSphereCallback(\n    imageData,\n    [points[0], points[1]],\n    callback,\n    viewport as Types.IVolumeViewport\n  );\n\n  // Since the scalar indexes start from the top left corner of the cube, the first\n  // slice that needs to be rendered can be calculated from the first mask coordinate\n  // divided by the zMultiple, as well as the last slice for the last coordinate\n  const zMultiple = dimensions[0] * dimensions[1];\n  const minSlice = Math.floor(scalarIndex[0] / zMultiple);\n  const maxSlice = Math.floor(scalarIndex[scalarIndex.length - 1] / zMultiple);\n  const sliceArray = Array.from(\n    { length: maxSlice - minSlice + 1 },\n    (v, k) => k + minSlice\n  );\n\n  triggerSegmentationDataModified(segmentationId, sliceArray);\n}\n\n/**\n * Fill inside a sphere with the given segment index in the given operation data. The\n * operation data contains the sphere required points.\n * @param enabledElement - The element that is enabled and selected.\n * @param operationData - OperationData\n */\nexport function fillInsideSphere(\n  enabledElement: Types.IEnabledElement,\n  operationData: OperationData\n): void {\n  fillSphere(enabledElement, operationData, true);\n}\n\n/**\n * Fill inside the circular region segment inside the segmentation defined by the operationData.\n * It fills the segmentation pixels inside the defined circle.\n * @param enabledElement - The element for which the segment is being filled.\n * @param operationData - EraseOperationData\n */\nexport function thresholdInsideSphere(\n  enabledElement: Types.IEnabledElement,\n  operationData: OperationData\n): void {\n  const { volume, imageVolume } = operationData;\n\n  if (\n    !csUtils.isEqual(volume.dimensions, imageVolume.dimensions) ||\n    !csUtils.isEqual(volume.direction, imageVolume.direction)\n  ) {\n    throw new Error(\n      'Only source data the same dimensions/size/orientation as the segmentation currently supported.'\n    );\n  }\n\n  fillSphere(enabledElement, operationData, true, true);\n}\n\n/**\n * Fill outside a sphere with the given segment index in the given operation data. The\n * operation data contains the sphere required points.\n * @param enabledElement - The element that is enabled and selected.\n * @param operationData - OperationData\n */\nexport function fillOutsideSphere(\n  enabledElement: Types.IEnabledElement,\n  operationData: OperationData\n): void {\n  fillSphere(enabledElement, operationData, false);\n}\n","import type { Types } from '@cornerstonejs/core';\n\nimport { fillInsideSphere } from './fillSphere';\n\ntype OperationData = {\n  points: [Types.Point3, Types.Point3, Types.Point3, Types.Point3];\n  imageVolume: Types.IImageVolume;\n  volume: Types.IImageVolume;\n  segmentIndex: number;\n  segmentationId: string;\n  segmentsLocked: number[];\n  viewPlaneNormal: Types.Point3;\n  viewUp: Types.Point3;\n  constraintFn: () => boolean;\n  strategySpecificConfiguration: any;\n};\n\nexport function eraseInsideSphere(\n  enabledElement: Types.IEnabledElement,\n  operationData: OperationData\n): void {\n  // Take the arguments and set the segmentIndex to 0,\n  // Then use existing fillInsideCircle functionality.\n  const eraseOperationData = Object.assign({}, operationData, {\n    segmentIndex: 0,\n  });\n\n  fillInsideSphere(enabledElement, eraseOperationData);\n}\n","import type { Types } from '@cornerstonejs/core';\n\ntype Ellipse = {\n  center: Types.Point3;\n  xRadius: number;\n  yRadius: number;\n  zRadius: number;\n};\n\n/**\n * Given an ellipse and a point, return true if the point is inside the ellipse\n * @param ellipse - The ellipse object to check against.\n * @param pointLPS - The point in LPS space to test.\n * @returns A boolean value.\n */\nexport default function pointInEllipse(\n  ellipse: Ellipse,\n  pointLPS: Types.Point3\n): boolean {\n  const { center: circleCenterWorld, xRadius, yRadius, zRadius } = ellipse;\n  const [x, y, z] = pointLPS;\n  const [x0, y0, z0] = circleCenterWorld;\n\n  let inside = 0;\n  if (xRadius !== 0) {\n    inside += ((x - x0) * (x - x0)) / (xRadius * xRadius);\n  }\n\n  if (yRadius !== 0) {\n    inside += ((y - y0) * (y - y0)) / (yRadius * yRadius);\n  }\n\n  if (zRadius !== 0) {\n    inside += ((z - z0) * (z - z0)) / (zRadius * zRadius);\n  }\n\n  return inside <= 1;\n}\n","import type { Types } from '@cornerstonejs/core';\n\ntype canvasCoordinates = [\n  Types.Point2, // bottom\n  Types.Point2, // top\n  Types.Point2, // left\n  Types.Point2 // right\n];\n\n/**\n * It takes the canvas coordinates of the ellipse corners and returns the top left and bottom right\n * corners of it\n *\n * @param ellipseCanvasPoints - The coordinates of the ellipse in the canvas.\n * @returns An array of two points.\n */\nexport default function getCanvasEllipseCorners(\n  ellipseCanvasPoints: canvasCoordinates\n): Array<Types.Point2> {\n  const [bottom, top, left, right] = ellipseCanvasPoints;\n\n  const topLeft = <Types.Point2>[left[0], top[1]];\n  const bottomRight = <Types.Point2>[right[0], bottom[1]];\n\n  return [topLeft, bottomRight];\n}\n","import { vec3 } from 'gl-matrix';\nimport type { Types } from '@cornerstonejs/core';\nimport { utilities as csUtils } from '@cornerstonejs/core';\n\nimport {\n  getCanvasEllipseCorners,\n  pointInEllipse,\n} from '../../../utilities/math/ellipse';\nimport { getBoundingBoxAroundShape } from '../../../utilities/boundingBox';\nimport { triggerSegmentationDataModified } from '../../../stateManagement/segmentation/triggerSegmentationEvents';\nimport { pointInShapeCallback } from '../../../utilities';\nimport isWithinThreshold from './utils/isWithinThreshold';\n\nconst { transformWorldToIndex } = csUtils;\n\ntype OperationData = {\n  segmentationId: string;\n  imageVolume: Types.IImageVolume;\n  points: any; // Todo:fix\n  volume: Types.IImageVolume;\n  segmentIndex: number;\n  segmentsLocked: number[];\n  viewPlaneNormal: number[];\n  viewUp: number[];\n  strategySpecificConfiguration: any;\n  constraintFn: () => boolean;\n};\n\nfunction fillCircle(\n  enabledElement: Types.IEnabledElement,\n  operationData: OperationData,\n  threshold = false\n): void {\n  const {\n    volume: segmentationVolume,\n    imageVolume,\n    points,\n    segmentsLocked,\n    segmentIndex,\n    segmentationId,\n    strategySpecificConfiguration,\n  } = operationData;\n  const { imageData, dimensions } = segmentationVolume;\n  const scalarData = segmentationVolume.getScalarData();\n  const { viewport } = enabledElement;\n\n  // Average the points to get the center of the ellipse\n  const center = vec3.fromValues(0, 0, 0);\n  points.forEach((point) => {\n    vec3.add(center, center, point);\n  });\n  vec3.scale(center, center, 1 / points.length);\n\n  const canvasCoordinates = points.map((p) => viewport.worldToCanvas(p));\n\n  // 1. From the drawn tool: Get the ellipse (circle) topLeft and bottomRight\n  // corners in canvas coordinates\n  const [topLeftCanvas, bottomRightCanvas] =\n    getCanvasEllipseCorners(canvasCoordinates);\n\n  // 2. Find the extent of the ellipse (circle) in IJK index space of the image\n  const topLeftWorld = viewport.canvasToWorld(topLeftCanvas);\n  const bottomRightWorld = viewport.canvasToWorld(bottomRightCanvas);\n\n  const ellipsoidCornersIJK = [\n    <Types.Point3>transformWorldToIndex(imageData, topLeftWorld),\n    <Types.Point3>transformWorldToIndex(imageData, bottomRightWorld),\n  ];\n\n  const boundsIJK = getBoundingBoxAroundShape(ellipsoidCornersIJK, dimensions);\n\n  // using circle as a form of ellipse\n  const ellipseObj = {\n    center: center as Types.Point3,\n    xRadius: Math.abs(topLeftWorld[0] - bottomRightWorld[0]) / 2,\n    yRadius: Math.abs(topLeftWorld[1] - bottomRightWorld[1]) / 2,\n    zRadius: Math.abs(topLeftWorld[2] - bottomRightWorld[2]) / 2,\n  };\n\n  const modifiedSlicesToUse = new Set() as Set<number>;\n\n  let callback;\n\n  if (threshold) {\n    callback = ({ value, index, pointIJK }) => {\n      if (segmentsLocked.includes(value)) {\n        return;\n      }\n\n      if (\n        isWithinThreshold(index, imageVolume, strategySpecificConfiguration)\n      ) {\n        scalarData[index] = segmentIndex;\n        //Todo: I don't think this will always be index 2 in streamingImageVolume?\n        modifiedSlicesToUse.add(pointIJK[2]);\n      }\n    };\n  } else {\n    callback = ({ value, index, pointIJK }) => {\n      if (segmentsLocked.includes(value)) {\n        return;\n      }\n      scalarData[index] = segmentIndex;\n      //Todo: I don't think this will always be index 2 in streamingImageVolume?\n      modifiedSlicesToUse.add(pointIJK[2]);\n    };\n  }\n\n  pointInShapeCallback(\n    imageData,\n    (pointLPS, pointIJK) => pointInEllipse(ellipseObj, pointLPS),\n    callback,\n    boundsIJK\n  );\n\n  const arrayOfSlices: number[] = Array.from(modifiedSlicesToUse);\n\n  triggerSegmentationDataModified(segmentationId, arrayOfSlices);\n}\n\n/**\n * Fill inside the circular region segment inside the segmentation defined by the operationData.\n * It fills the segmentation pixels inside the defined circle.\n * @param enabledElement - The element for which the segment is being erased.\n * @param operationData - EraseOperationData\n */\nexport function fillInsideCircle(\n  enabledElement: Types.IEnabledElement,\n  operationData: OperationData\n): void {\n  fillCircle(enabledElement, operationData, false);\n}\n\n/**\n * Fill inside the circular region segment inside the segmentation defined by the operationData.\n * It fills the segmentation pixels inside the defined circle.\n * @param enabledElement - The element for which the segment is being erased.\n * @param operationData - EraseOperationData\n */\nexport function thresholdInsideCircle(\n  enabledElement: Types.IEnabledElement,\n  operationData: OperationData\n): void {\n  const { volume, imageVolume } = operationData;\n\n  if (\n    !csUtils.isEqual(volume.dimensions, imageVolume.dimensions) ||\n    !csUtils.isEqual(volume.direction, imageVolume.direction)\n  ) {\n    throw new Error(\n      'Only source data the same dimensions/size/orientation as the segmentation currently supported.'\n    );\n  }\n\n  fillCircle(enabledElement, operationData, true);\n}\n\n/**\n * Fill outside the circular region segment inside the segmentation defined by the operationData.\n * It fills the segmentation pixels outside the  defined circle.\n * @param enabledElement - The element for which the segment is being erased.\n * @param operationData - EraseOperationData\n */\nexport function fillOutsideCircle(\n  enabledElement: Types.IEnabledElement,\n  operationData: OperationData\n): void {\n  throw new Error('Not yet implemented');\n}\n","import type { Types } from '@cornerstonejs/core';\n\nimport { fillInsideCircle } from './fillCircle';\n\ntype OperationData = {\n  segmentationId: string;\n  imageVolume: Types.IImageVolume;\n  points: any; // Todo:fix\n  volume: Types.IImageVolume;\n  segmentIndex: number;\n  segmentsLocked: number[];\n  viewPlaneNormal: number[];\n  viewUp: number[];\n  strategySpecificConfiguration: any;\n  constraintFn: () => boolean;\n};\n\nexport function eraseInsideCircle(\n  enabledElement: Types.IEnabledElement,\n  operationData: OperationData\n): void {\n  // Take the arguments and set the segmentIndex to 0,\n  // Then use existing fillInsideCircle functionality.\n  const eraseOperationData = {\n    ...operationData,\n    segmentIndex: 0,\n  };\n\n  fillInsideCircle(enabledElement, eraseOperationData);\n}\n","const DEFINED_CURSORS = Symbol('DefinedCursors');\nconst STANDARD_CURSORS = new Set([\n  'alias',\n  'all-scroll',\n  'auto',\n  'cell',\n  'col-resize',\n  'context-menu',\n  'copy',\n  'crosshair',\n  'default',\n  'e-resize',\n  'ew-resize',\n  'grab',\n  'grabbing',\n  'help',\n  'move',\n  'ne-resize',\n  'nesw-resize',\n  'no-drop',\n  'none',\n  'not-allowed',\n  'n-resize',\n  'ns-resize',\n  'nw-resize',\n  'nwse-resize',\n  'pointer',\n  'progress',\n  'row-resize',\n  'se-resize',\n  's-resize',\n  'sw-resize',\n  'text',\n  'vertical-text',\n  'wait',\n  'w-resize',\n  'zoom-in',\n  'zoom-out',\n]);\n\nexport default class MouseCursor {\n  private name: string;\n  private fallback: MouseCursor | undefined;\n\n  constructor(name: string, fallback?: MouseCursor | undefined) {\n    this.name = name + '';\n    this.fallback = fallback;\n  }\n\n  getName(): string {\n    return this.name + '';\n  }\n\n  addFallbackStyleProperty(style: string): string {\n    const { fallback } = this;\n    if (fallback instanceof MouseCursor) {\n      return `${style}, ${fallback.getStyleProperty()}`;\n    }\n    return style + '';\n  }\n\n  getStyleProperty(): string {\n    return this.addFallbackStyleProperty(this.name) + '';\n  }\n\n  static getDefinedCursor(name: string): MouseCursor | undefined {\n    const definedCursors = getDefinedCursors(\n      // @ts-ignore\n      MouseCursor as Record<symbol, Map<string, MouseCursor>>,\n      DEFINED_CURSORS\n    );\n    let mouseCursor = definedCursors.get(name);\n    if (mouseCursor instanceof MouseCursor) {\n      return mouseCursor;\n    }\n    if (STANDARD_CURSORS.has(name)) {\n      mouseCursor = new MouseCursor(name);\n      definedCursors.set(name, mouseCursor);\n      return mouseCursor;\n    }\n  }\n\n  static setDefinedCursor(name: string, cursor: MouseCursor): boolean {\n    if (cursor instanceof MouseCursor) {\n      const definedCursors = getDefinedCursors(\n        // @ts-ignore\n        MouseCursor as Record<symbol, Map<string, MouseCursor>>,\n        DEFINED_CURSORS\n      );\n      definedCursors.set(name, cursor);\n      return true;\n    }\n    return false;\n  }\n}\n\n/*\n * Helpers\n */\n\nfunction getDefinedCursors(\n  context: Record<symbol, Map<string, MouseCursor>>,\n  symbol: symbol\n): Map<string, MouseCursor> {\n  let definedCursors = context[symbol];\n  if (!(definedCursors instanceof Map)) {\n    definedCursors = new Map();\n    Object.defineProperty(context, symbol, { value: definedCursors });\n  }\n  return definedCursors;\n}\n\nconst standardCursorNames = STANDARD_CURSORS.values();\nexport { standardCursorNames };\n","import { utilities } from '@cornerstonejs/core';\nimport MouseCursor from './MouseCursor';\n\nconst DEFAULT_NAME = 'image-cursor';\n\nexport default class ImageMouseCursor extends MouseCursor {\n  private url: string;\n  private x: number;\n  private y: number;\n\n  constructor(\n    url: string,\n    x?: number,\n    y?: number,\n    name?: string | undefined,\n    fallback?: MouseCursor | undefined\n  ) {\n    super(\n      name || ImageMouseCursor.getUniqueInstanceName(DEFAULT_NAME),\n      fallback\n    );\n    this.url = url;\n    this.x = Number(x) || 0;\n    this.y = Number(y) || 0;\n  }\n\n  getStyleProperty(): string {\n    const { url, x, y } = this;\n    let style = `url('${url}')`;\n    if (x >= 0 && y >= 0 && (x > 0 || y > 0)) {\n      style += ` ${x} ${y}`;\n    }\n    return this.addFallbackStyleProperty(style);\n  }\n\n  static getUniqueInstanceName(prefix: string): string {\n    return `${prefix}-${utilities.getRuntimeId(ImageMouseCursor)}`;\n  }\n}\n","import { SVGCursorDescriptor } from '../types';\n\n/*\n * Definitions\n */\n\nconst BASE: SVGCursorDescriptor = {\n  iconContent: '',\n  iconSize: 16,\n  viewBox: {\n    x: 16,\n    y: 16,\n  },\n  mousePoint: {\n    x: 8,\n    y: 8,\n  },\n  mousePointerGroupString: `\n    <path stroke=\"{{color}}\" d=\"M8 16L8 0\"></path>\n    <path stroke=\"{{color}}\" d=\"M16 8L0 8\"></path>\n  `,\n};\n\nconst SEGMENTATION_CURSOR_BOUNDARIES = {\n  x: 127,\n  y: 60,\n};\n\nconst MINUS_RECT = `\n<rect fill=\"{{color}}\" x=\"80.19\" y=\"25.03\" width=\"47.14\" height=\"15.85\"/>\n`;\n\nconst PLUS_RECT = `\n<rect fill=\"{{color}}\" x=\"80.19\" y=\"25.03\" width=\"47.14\" height=\"15.85\"/>\n<rect fill=\"{{color}}\" x=\"95.84\" y=\"9.38\" width=\"15.85\" height=\"47.14\"/>\n`;\n\nconst SCISSOR_ICON = `<path fill=\"{{color}}\" d=\"M82.89,10a12.09,12.09,0,0,0-16.8-2.5l-27.5,20.4-8.5-6.3a2.93,2.93,0,0,1-1.1-3,14.66,14.66,0,0,0,.1-6.6,14.08,14.08,0,1,0-6.5,15.2,2.87,2.87,0,0,1,3.2.2l8.2,6.1-8.2,6.1a2.87,2.87,0,0,1-3.2.2,14.16,14.16,0,1,0,6.7,14.4,14,14,0,0,0-.3-5.8,2.93,2.93,0,0,1,1.1-3l8.5-6.3,27.5,20.4A11.91,11.91,0,0,0,82.89,57l-31.7-23.5ZM15.29,21a5.9,5.9,0,1,1,5.9-5.9A5.91,5.91,0,0,1,15.29,21Zm0,36.8a5.9,5.9,0,1,1,5.9-5.9A5.91,5.91,0,0,1,15.29,57.77Zm28.3-21.5a2.8,2.8,0,1,1,2.8-2.8A2.8,2.8,0,0,1,43.59,36.27Z\" transform=\"translate(-1.17 -0.96)\"/>`;\nconst RECTANGLE_ICON = `<path fill=\"{{color}}\" d=\"M8.86,2.25V66.08H72.69V2.25H8.86ZM65.28,58.67h-49v-49h49v49Z\" transform=\"translate(-8.86 -2.25)\"/>`;\nconst CIRCLE_ICON = `<path fill=\"{{color}}\" d=\"M40.77,2.25A31.92,31.92,0,1,0,72.69,34.16,31.92,31.92,0,0,0,40.77,2.25Zm0,57.63A25.71,25.71,0,1,1,66.48,34.16,25.71,25.71,0,0,1,40.77,59.87Z\" transform=\"translate(-8.86 -2.25)\"/>`;\n\nconst CursorSVG: Record<string, SVGCursorDescriptor> = {\n  Angle: extend(BASE, {\n    iconContent: `<path fill=\"{{color}}\" d=\"M1203 544q0 13-10 23l-393 393 393 393q10 10 10 23t-10 23l-50\n    50q-10 10-23 10t-23-10l-466-466q-10-10-10-23t10-23l466-466q10-10 23-10t23\n    10l50 50q10 10 10 23z\" />`,\n    viewBox: {\n      x: 1792,\n      y: 1792,\n    },\n  }),\n  ArrowAnnotate: extend(BASE, {\n    iconContent: `<g id=\"arrowAnnotate-group\" fill=\"none\" stroke-width=\"1\" stroke=\"{{color}}\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path id=\"arrowAnnotate-arrow\" d=\"M23,7 l-15,15 M7,17 l0,6 6,0\" stroke-width=\"2\" />\n  </g>`,\n    viewBox: {\n      x: 24,\n      y: 24,\n    },\n  }),\n  Bidirectional: extend(BASE, {\n    iconContent: `<g fill=\"{{color}}\" stroke-width=\"3\" stroke=\"{{color}}\">\n    <path d=\"M27.63 3.21L3.12 28.81\"></path>\n    <path d=\"M27.63 15.75L15.27 4.43\"></path>\n    <path d=\"M16.5 4.28C16.5 4.96 15.95 5.51 15.27 5.51C14.59 5.51 14.03 4.96 14.03 4.28C14.03 3.59 14.59 3.04 15.27 3.04C15.95 3.04 16.5 3.59 16.5 4.28Z\" ></path>\n    <path d=\"M28.87 3.19C28.87 3.87 28.31 4.43 27.63 4.43C26.95 4.43 26.4 3.87 26.4 3.19C26.4 2.51 26.95 1.95 27.63 1.95C28.31 1.95 28.87 2.51 28.87 3.19Z\"></path>\n    <path d=\"M28.87 15.75C28.87 16.43 28.31 16.99 27.63 16.99C26.95 16.99 26.4 16.43 26.4 15.75C26.4 15.07 26.95 14.51 27.63 14.51C28.31 14.51 28.87 15.07 28.87 15.75Z\"></path>\n    <path d=\"M4.73 28.44C4.73 29.12 4.17 29.68 3.49 29.68C2.81 29.68 2.25 29.12 2.25 28.44C2.25 27.76 2.81 27.2 3.49 27.2C4.17 27.2 4.73 27.76 4.73 28.44Z\"></path>\n  </g>`,\n    viewBox: {\n      x: 48,\n      y: 48,\n    },\n  }),\n  CobbAngle: extend(BASE, {\n    iconContent: `<g stroke=\"{{color}}\" stroke-width=\"3\">\n    <path d=\"M28.59 2.34L3.82 12.32\"></path>\n    <path d=\"M28.59 29.66L3.82 19.68\"></path>\n    <path stroke-dasharray=\"2\" fill-opacity=\"0\" d=\"M12.37\n      23.06C12.67 22.36 12.85 21.93 12.92 21.76C14.6 17.8 14.68 13.35 13.15\n      9.33C13.11 9.24 13.02 9 12.88 8.63\">\n    </path>\n  </g>`,\n    viewBox: {\n      x: 32,\n      y: 32,\n    },\n  }),\n  CircleROI: extend(BASE, {\n    iconContent: `<circle stroke=\"{{color}}\" fill=\"none\" stroke-width=\"3\" cx=\"16\" cy=\"16\" r=\"14\" />`,\n    viewBox: {\n      x: 32,\n      y: 32,\n    },\n  }),\n  EllipticalROI: extend(BASE, {\n    iconContent: `<path stroke=\"{{color}}\" fill=\"none\" stroke-width=\"3\" d=\"M30.74 15.76C30.74 20.99 24.14 25.23 16\n    25.23C7.86 25.23 1.26 20.99 1.26 15.76C1.26 10.54 7.86 6.3 16 6.3C24.14\n    6.3 30.74 10.54 30.74 15.76Z\" />`,\n    viewBox: {\n      x: 32,\n      y: 32,\n    },\n  }),\n  FreehandROI: extend(BASE, {\n    iconContent: `<g fill=\"{{color}}\" stroke=\"{{color}}\" stroke-width=\"2\">\n    <ellipse ry=\"1\" rx=\"1\" id=\"svg_3\" cy=\"4.240343\" cx=\"14.306499\"/>\n    <line id=\"svg_4\" y2=\"3.58462\" x2=\"12.242186\" y1=\"3.997482\" x1=\"13.432202\"/>\n    <line id=\"svg_5\" y2=\"3.268901\" x2=\"10.857882\" y1=\"3.608906\" x1=\"12.387902\"/>\n    <line id=\"svg_6\" y2=\"3.147471\" x2=\"9.740724\" y1=\"3.293187\" x1=\"10.955026\"/>\n    <line id=\"svg_7\" y2=\"3.147471\" x2=\"8.089274\" y1=\"3.196043\" x1=\"9.983585\"/>\n    <line id=\"svg_8\" y2=\"3.268901\" x2=\"6.874972\" y1=\"3.123185\" x1=\"8.307848\"/>\n    <line id=\"svg_9\" y2=\"3.657478\" x2=\"5.587812\" y1=\"3.220329\" x1=\"7.020688\"/>\n    <line id=\"svg_10\" y2=\"4.046054\" x2=\"4.737801\" y1=\"3.560334\" x1=\"5.854959\"/>\n    <line id=\"svg_11\" y2=\"4.337487\" x2=\"4.300652\" y1=\"3.997482\" x1=\"4.834945\"/>\n    <line id=\"svg_12\" y2=\"4.726063\" x2=\"3.88779\" y1=\"4.191771\" x1=\"4.470655\"/>\n    <line id=\"svg_15\" y2=\"5.3575\" x2=\"3.377783\" y1=\"4.604633\" x1=\"3.960648\"/>\n    <line id=\"svg_16\" y2=\"6.183226\" x2=\"2.916348\" y1=\"5.138926\" x1=\"3.547785\"/>\n    <line id=\"svg_17\" y2=\"6.960379\" x2=\"2.770632\" y1=\"5.867507\" x1=\"3.037779\"/>\n    <line id=\"svg_18\" y2=\"7.713246\" x2=\"2.673488\" y1=\"6.741804\" x1=\"2.819204\"/>\n    <line id=\"svg_19\" y2=\"8.684687\" x2=\"2.697774\" y1=\"7.616102\" x1=\"2.673488\"/>\n    <line id=\"svg_20\" y2=\"9.753273\" x2=\"2.892062\" y1=\"8.611829\" x1=\"2.697774\"/>\n    <line id=\"svg_21\" y2=\"10.724714\" x2=\"3.134923\" y1=\"9.534698\" x1=\"2.84349\"/>\n    <line id=\"svg_23\" y2=\"11.647583\" x2=\"3.596357\" y1=\"10.578998\" x1=\"3.086351\"/>\n    <line id=\"svg_25\" y2=\"12.521881\" x2=\"4.276366\" y1=\"11.501867\" x1=\"3.499213\"/>\n    <line id=\"svg_26\" y2=\"13.930471\" x2=\"5.830673\" y1=\"12.376165\" x1=\"4.13065\"/>\n    <line id=\"svg_28\" y2=\"14.707624\" x2=\"7.263549\" y1=\"13.881899\" x1=\"5.733528\"/>\n    <line id=\"svg_29\" y2=\"15.339061\" x2=\"8.963571\" y1=\"14.61048\" x1=\"7.06926\"/>\n    <line id=\"svg_30\" y2=\"15.581921\" x2=\"10.882168\" y1=\"15.314775\" x1=\"8.817855\"/>\n    <line id=\"svg_31\" y2=\"15.460491\" x2=\"12.023612\" y1=\"15.581921\" x1=\"10.785024\"/>\n    <line id=\"svg_33\" y2=\"15.120487\" x2=\"13.092197\" y1=\"15.484777\" x1=\"11.877895\"/>\n    <line id=\"svg_34\" y2=\"14.586194\" x2=\"13.86935\" y1=\"15.217631\" x1=\"12.897909\"/>\n    <line id=\"svg_35\" y2=\"13.833327\" x2=\"14.597931\" y1=\"14.756196\" x1=\"13.699348\"/>\n    <line id=\"svg_37\" y2=\"12.716169\" x2=\"15.180796\" y1=\"13.881899\" x1=\"14.549359\"/>\n    <line id=\"svg_39\" y2=\"11.429009\" x2=\"15.520801\" y1=\"12.813313\" x1=\"15.15651\"/>\n    <ellipse ry=\"1\" rx=\"1\" id=\"svg_40\" cy=\"10.967574\" cx=\"15.520801\"/>\n  </g>`,\n    viewBox: {\n      x: 18,\n      y: 18,\n    },\n  }),\n  FreehandROISculptor: extend(BASE, {\n    iconContent: `<g id=\"icon-freehand-sculpt\" fill=\"none\" stroke-width=\"1.5\" stroke=\"{{color}}\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <line id=\"svg_1\" y2=\"2.559367\" x2=\"10.184807\" y1=\"4.467781\" x1=\"8.81711\"/>\n    <line id=\"svg_4\" y2=\"1.493836\" x2=\"11.727442\" y1=\"2.766112\" x1=\"10.089386\"/>\n    <line id=\"svg_7\" y2=\"1.080346\" x2=\"13.047428\" y1=\"1.748291\" x1=\"11.345759\"/>\n    <line id=\"svg_8\" y2=\"1.000829\" x2=\"14.351511\" y1=\"1.112153\" x1=\"12.77707\"/>\n    <line id=\"svg_9\" y2=\"1.350705\" x2=\"15.242104\" y1=\"0.905408\" x1=\"13.969828\"/>\n    <line id=\"svg_10\" y2=\"2.098167\" x2=\"15.862339\" y1=\"1.14396\" x1=\"14.955842\"/>\n    <line id=\"svg_11\" y2=\"3.195505\" x2=\"16.41896\" y1=\"1.939133\" x1=\"15.766918\"/>\n    <line id=\"svg_12\" y2=\"4.292843\" x2=\"16.530284\" y1=\"2.925147\" x1=\"16.387153\"/>\n    <line id=\"svg_16\" y2=\"5.644637\" x2=\"16.196311\" y1=\"3.831643\" x1=\"16.593898\"/>\n    <line id=\"svg_18\" y2=\"7.266789\" x2=\"15.623787\" y1=\"5.19934\" x1=\"16.275829\"/>\n    <line id=\"svg_19\" y2=\"10.813258\" x2=\"14.526449\" y1=\"6.726071\" x1=\"15.766918\"/>\n    <line id=\"svg_20\" y2=\"5.056209\" x2=\"8.085552\" y1=\"4.181519\" x1=\"8.976145\"/>\n    <line id=\"svg_23\" y2=\"5.326568\" x2=\"7.481221\" y1=\"4.78585\" x1=\"8.403621\"/>\n    <line id=\"svg_24\" y2=\"5.565119\" x2=\"6.749662\" y1=\"5.294761\" x1=\"7.624352\"/>\n    <line id=\"svg_25\" y2=\"5.994512\" x2=\"5.429675\" y1=\"5.533312\" x1=\"6.956407\"/>\n    <line id=\"svg_27\" y2=\"6.551133\" x2=\"4.284627\" y1=\"5.962706\" x1=\"5.572807\"/>\n    <line id=\"svg_28\" y2=\"7.584858\" x2=\"3.044158\" y1=\"6.392099\" x1=\"4.427758\"/>\n    <line id=\"svg_29\" y2=\"8.84123\" x2=\"2.185372\" y1=\"7.489437\" x1=\"3.219096\"/>\n    <line id=\"svg_31\" y2=\"10.606513\" x2=\"1.644654\" y1=\"8.602678\" x1=\"2.280792\"/>\n    <line id=\"svg_32\" y2=\"13.214679\" x2=\"1.48562\" y1=\"10.352058\" x1=\"1.724171\"/>\n    <line id=\"svg_33\" y2=\"14.375631\" x2=\"1.676461\" y1=\"12.992031\" x1=\"1.453813\"/>\n    <line id=\"svg_34\" y2=\"15.298031\" x2=\"2.264889\" y1=\"14.152983\" x1=\"1.517427\"/>\n    <line id=\"svg_35\" y2=\"16.172721\" x2=\"3.521261\" y1=\"14.948155\" x1=\"1.915013\"/>\n    <line id=\"svg_36\" y2=\"16.824762\" x2=\"5.207027\" y1=\"15.997783\" x1=\"3.28271\"/>\n    <line id=\"svg_38\" y2=\"17.063314\" x2=\"7.035924\" y1=\"16.745245\" x1=\"4.968475\"/>\n    <line id=\"svg_39\" y2=\"16.888376\" x2=\"9.278311\" y1=\"17.047411\" x1=\"6.733758\"/>\n    <line id=\"svg_40\" y2=\"16.284045\" x2=\"10.661911\" y1=\"16.983797\" x1=\"8.992048\"/>\n    <line id=\"svg_41\" y2=\"15.313934\" x2=\"11.647925\" y1=\"16.395369\" x1=\"10.455166\"/>\n    <line id=\"svg_44\" y2=\"13.898527\" x2=\"12.82478\" y1=\"15.425259\" x1=\"11.504794\"/>\n    <line id=\"svg_45\" y2=\"12.037824\" x2=\"14.144766\" y1=\"14.312017\" x1=\"12.522614\"/>\n    <line id=\"svg_47\" y2=\"10.59061\" x2=\"14.605966\" y1=\"12.228665\" x1=\"13.953925\"/>\n    <ellipse ry=\"1\" rx=\"1\" id=\"svg_48\" cy=\"3.982726\" cx=\"13.460918\"/>\n  </g>`,\n    viewBox: {\n      x: 18,\n      y: 18,\n    },\n  }),\n  Length: extend(BASE, {\n    iconContent: `<g id=\"length-group\" fill=\"none\" stroke-width=\"1\" stroke=\"{{color}}\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n    <path id=\"length-dashes\" d=\"m22.5,6 -16.5,16.5\" stroke-width=\"3\" stroke-dasharray=\"0.6666,5\" />\n  </g>`,\n    viewBox: {\n      x: 24,\n      y: 24,\n    },\n  }),\n  Probe: extend(BASE, {\n    iconContent: `<path fill=\"{{color}}\" d=\"M1152 896q0 106-75 181t-181 75-181-75-75-181 75-181 181-75 181 75\n    75 181zm-256-544q-148 0-273 73t-198 198-73 273 73 273 198 198 273 73 273-73\n    198-198 73-273-73-273-198-198-273-73zm768 544q0 209-103 385.5t-279.5\n    279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5\n    385.5-103 385.5 103 279.5 279.5 103 385.5z\" />`,\n    viewBox: {\n      x: 1792,\n      y: 1792,\n    },\n  }),\n  RectangleROI: extend(BASE, {\n    iconContent: `<path fill=\"{{color}}\" d=\"M1312 256h-832q-66 0-113 47t-47 113v832q0 66 47\n    113t113 47h832q66 0 113-47t47-113v-832q0-66-47-113t-113-47zm288 160v832q0\n    119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119\n    84.5-203.5t203.5-84.5h832q119 0 203.5 84.5t84.5 203.5z\" />`,\n    viewBox: {\n      x: 1792,\n      y: 1792,\n    },\n  }),\n  TextMarker: extend(BASE, {\n    iconContent: `<path fill=\"{{color}}\" d=\"M789 559l-170 450q33 0 136.5 2t160.5 2q19 0\n    57-2-87-253-184-452zm-725 1105l2-79q23-7 56-12.5t57-10.5 49.5-14.5 44.5-29\n    31-50.5l237-616 280-724h128q8 14 11 21l205 480q33 78 106 257.5t114 274.5q15\n    34 58 144.5t72 168.5q20 45 35 57 19 15 88 29.5t84 20.5q6 38 6 57 0 5-.5\n    13.5t-.5 12.5q-63 0-190-8t-191-8q-76 0-215 7t-178 8q0-43 4-78l131-28q1 0\n    12.5-2.5t15.5-3.5 14.5-4.5 15-6.5 11-8 9-11\n    2.5-14q0-16-31-96.5t-72-177.5-42-100l-450-2q-26 58-76.5 195.5t-50.5 162.5q0\n    22 14 37.5t43.5 24.5 48.5 13.5 57 8.5 41 4q1 19 1 58 0 9-2 27-58\n    0-174.5-10t-174.5-10q-8 0-26.5 4t-21.5 4q-80 14-188 14z\" />`,\n    viewBox: {\n      x: 1792,\n      y: 1792,\n    },\n  }),\n  Crosshairs: extend(BASE, {\n    iconContent: `<path fill=\"{{color}}\" d=\"M1325 1024h-109q-26 0-45-19t-19-45v-128q0-26\n    19-45t45-19h109q-32-108-112.5-188.5t-188.5-112.5v109q0 26-19 45t-45\n    19h-128q-26 0-45-19t-19-45v-109q-108 32-188.5 112.5t-112.5 188.5h109q26\n    0 45 19t19 45v128q0 26-19 45t-45 19h-109q32 108 112.5 188.5t188.5\n    112.5v-109q0-26 19-45t45-19h128q26 0 45 19t19 45v109q108-32\n    188.5-112.5t112.5-188.5zm339-192v128q0 26-19 45t-45 19h-143q-37 161-154.5\n    278.5t-278.5 154.5v143q0 26-19 45t-45 19h-128q-26\n    0-45-19t-19-45v-143q-161-37-278.5-154.5t-154.5-278.5h-143q-26\n    0-45-19t-19-45v-128q0-26 19-45t45-19h143q37-161\n    154.5-278.5t278.5-154.5v-143q0-26 19-45t45-19h128q26 0 45 19t19 45v143q161\n    37 278.5 154.5t154.5 278.5h143q26 0 45 19t19 45z\" />`,\n    viewBox: {\n      x: 1792,\n      y: 1792,\n    },\n  }),\n  Eraser: extend(BASE, {\n    iconContent: `<path transform=\"translate(0,1792) scale(1,-1)\" fill=\"{{color}}\" d=\"M960 1408l336-384h-768l-336 384h768zm1013-1077q15\n    34 9.5 71.5t-30.5 65.5l-896 1024q-38 44-96 44h-768q-38\n    0-69.5-20.5t-47.5-54.5q-15-34-9.5-71.5t30.5-65.5l896-1024q38-44 96-44h768q38\n    0 69.5 20.5t47.5 54.5z\" />`,\n    viewBox: {\n      x: 2048,\n      y: 1792,\n    },\n  }),\n  Magnify: extend(BASE, {\n    iconContent: `<path fill=\"{{color}}\" d=\"M508.5 481.6l-129-129c-2.3-2.3-5.3-3.5-8.5-3.5h-10.3C395\n    312 416 262.5 416 208 416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c54.5\n    0 104-21 141.1-55.2V371c0 3.2 1.3 6.2 3.5 8.5l129 129c4.7 4.7 12.3 4.7 17\n    0l9.9-9.9c4.7-4.7 4.7-12.3 0-17zM208 384c-97.3 0-176-78.7-176-176S110.7 32 208\n    32s176 78.7 176 176-78.7 176-176 176z\" />`,\n    viewBox: {\n      x: 512,\n      y: 512,\n    },\n  }),\n  Pan: extend(BASE, {\n    iconContent: `<path fill=\"{{color}}\" d=\"M1411 541l-355 355 355 355 144-144q29-31 70-14 39 17\n    39 59v448q0 26-19 45t-45 19h-448q-42 0-59-40-17-39 14-69l144-144-355-355-355\n    355 144 144q31 30 14 69-17 40-59 40h-448q-26 0-45-19t-19-45v-448q0-42 40-59\n    39-17 69 14l144 144 355-355-355-355-144 144q-19 19-45 19-12\n    0-24-5-40-17-40-59v-448q0-26 19-45t45-19h448q42 0 59 40 17 39-14 69l-144\n    144 355 355 355-355-144-144q-31-30-14-69 17-40 59-40h448q26 0 45 19t19\n    45v448q0 42-39 59-13 5-25 5-26 0-45-19z\" />`,\n    viewBox: {\n      x: 1792,\n      y: 1792,\n    },\n  }),\n  Rotate: extend(BASE, {\n    iconContent: `<path fill=\"{{color}}\" d=\"M1664 256v448q0 26-19 45t-45 19h-448q-42 0-59-40-17-39\n    14-69l138-138q-148-137-349-137-104 0-198.5 40.5t-163.5 109.5-109.5\n    163.5-40.5 198.5 40.5 198.5 109.5 163.5 163.5 109.5 198.5 40.5q119 0\n    225-52t179-147q7-10 23-12 15 0 25 9l137 138q9 8 9.5 20.5t-7.5 22.5q-109\n    132-264 204.5t-327 72.5q-156 0-298-61t-245-164-164-245-61-298 61-298\n    164-245 245-164 298-61q147 0 284.5 55.5t244.5 156.5l130-129q29-31 70-14\n    39 17 39 59z\" />`,\n    viewBox: {\n      x: 1792,\n      y: 1792,\n    },\n  }),\n  StackScroll: extend(BASE, {\n    iconContent: `<path fill=\"{{color}}\" d=\"M24 21v2c0 0.547-0.453 1-1 1h-22c-0.547\n    0-1-0.453-1-1v-2c0-0.547 0.453-1 1-1h22c0.547 0 1 0.453 1 1zM24 13v2c0\n    0.547-0.453 1-1 1h-22c-0.547 0-1-0.453-1-1v-2c0-0.547 0.453-1 1-1h22c0.547\n    0 1 0.453 1 1zM24 5v2c0 0.547-0.453 1-1 1h-22c-0.547\n    0-1-0.453-1-1v-2c0-0.547 0.453-1 1-1h22c0.547 0 1 0.453 1 1z\" />`,\n    viewBox: {\n      x: 24,\n      y: 28,\n    },\n  }),\n  WindowLevelRegion: extend(BASE, {\n    iconContent: `<path fill=\"{{color}}\" d=\"M1664 416v960q0 119-84.5 203.5t-203.5 84.5h-960q-119\n    0-203.5-84.5t-84.5-203.5v-960q0-119 84.5-203.5t203.5-84.5h960q119 0 203.5\n    84.5t84.5 203.5z\" />`,\n    viewBox: {\n      x: 1792,\n      y: 1792,\n    },\n  }),\n  WindowLevel: extend(BASE, {\n    iconContent: `\n    <path fill=\"{{color}}\" d=\"M14.5,3.5 a1 1 0 0 1 -11,11 Z\" stroke=\"none\" opacity=\"0.8\" />\n    <circle cx=\"9\" cy=\"9\" r=\"8\" fill=\"none\" stroke-width=\"2\" stroke=\"{{color}}\" />`,\n    viewBox: {\n      x: 18,\n      y: 18,\n    },\n  }),\n  Zoom: extend(BASE, {\n    iconContent: `\n  <path fill=\"{{color}}\" d=\"M508.5 481.6l-129-129c-2.3-2.3-5.3-3.5-8.5-3.5h-10.3C395\n    312 416 262.5 416 208 416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c54.5\n    0 104-21 141.1-55.2V371c0 3.2 1.3 6.2 3.5 8.5l129 129c4.7 4.7 12.3 4.7 17\n    0l9.9-9.9c4.7-4.7 4.7-12.3 0-17zM208 384c-97.3 0-176-78.7-176-176S110.7 32 208\n    32s176 78.7 176 176-78.7 176-176 176z\" />\n  <path fill=\"{{color}}\" transform=\"scale(0.22,0.22) translate(1400,0)\" d=\"M1216\n    320q0 26-19 45t-45 19h-128v1024h128q26 0 45 19t19 45-19 45l-256 256q-19\n    19-45 19t-45-19l-256-256q-19-19-19-45t19-45 45-19h128v-1024h-128q-26\n    0-45-19t-19-45 19-45l256-256q19-19 45-19t45 19l256 256q19 19 19 45z\" />`,\n    viewBox: {\n      x: 640,\n      y: 512,\n    },\n  }),\n\n  /*\n   * Segmentation Cursors\n   */\n\n  SegmentationFreeHandEraseInside: extend(BASE, {\n    iconContent: `${SCISSOR_ICON} ${MINUS_RECT}`,\n    viewBox: SEGMENTATION_CURSOR_BOUNDARIES,\n  }),\n\n  SegmentationFreeHandFillInside: extend(BASE, {\n    iconContent: `${SCISSOR_ICON} ${PLUS_RECT}`,\n    viewBox: SEGMENTATION_CURSOR_BOUNDARIES,\n  }),\n\n  SegmentationFreeHandEraseOutside: extend(BASE, {\n    iconContent: `${SCISSOR_ICON} ${MINUS_RECT}`,\n    viewBox: SEGMENTATION_CURSOR_BOUNDARIES,\n  }),\n\n  SegmentationFreeHandFillOutside: extend(BASE, {\n    iconContent: `${SCISSOR_ICON} ${PLUS_RECT}`,\n    viewBox: SEGMENTATION_CURSOR_BOUNDARIES,\n  }),\n\n  SegmentationRectangleEraseInside: extend(BASE, {\n    iconContent: `${RECTANGLE_ICON} ${MINUS_RECT}`,\n    viewBox: SEGMENTATION_CURSOR_BOUNDARIES,\n  }),\n\n  // Default Rectangle Scissors\n  RectangleScissor: extend(BASE, {\n    iconContent: `${RECTANGLE_ICON} ${PLUS_RECT}`,\n    viewBox: SEGMENTATION_CURSOR_BOUNDARIES,\n  }),\n\n  'RectangleScissor.FILL_INSIDE': extend(BASE, {\n    iconContent: `${RECTANGLE_ICON} ${PLUS_RECT}`,\n    viewBox: SEGMENTATION_CURSOR_BOUNDARIES,\n  }),\n\n  'RectangleScissor.FILL_OUTSIDE': extend(BASE, {\n    iconContent: `${RECTANGLE_ICON} ${PLUS_RECT}`,\n    viewBox: SEGMENTATION_CURSOR_BOUNDARIES,\n  }),\n\n  'RectangleScissor.ERASE_OUTSIDE': extend(BASE, {\n    iconContent: `${RECTANGLE_ICON} ${MINUS_RECT}`,\n    viewBox: SEGMENTATION_CURSOR_BOUNDARIES,\n  }),\n\n  'RectangleScissor.ERASE_INSIDE': extend(BASE, {\n    iconContent: `${RECTANGLE_ICON} ${MINUS_RECT}`,\n    viewBox: SEGMENTATION_CURSOR_BOUNDARIES,\n  }),\n\n  CircleScissor: extend(BASE, {\n    iconContent: `${CIRCLE_ICON} ${PLUS_RECT}`,\n    viewBox: SEGMENTATION_CURSOR_BOUNDARIES,\n  }),\n\n  'CircleScissor.FILL_INSIDE': extend(BASE, {\n    iconContent: `${CIRCLE_ICON} ${PLUS_RECT}`,\n    viewBox: SEGMENTATION_CURSOR_BOUNDARIES,\n  }),\n\n  'CircleScissor.ERASE_OUTSIDE': extend(BASE, {\n    iconContent: `${CIRCLE_ICON} ${MINUS_RECT}`,\n    viewBox: SEGMENTATION_CURSOR_BOUNDARIES,\n  }),\n\n  'CircleScissor.FILL_OUTSIDE': extend(BASE, {\n    iconContent: `${CIRCLE_ICON} ${PLUS_RECT}`,\n    viewBox: SEGMENTATION_CURSOR_BOUNDARIES,\n  }),\n};\n\n/*\n * Utils\n */\n\nfunction extend(\n  base: SVGCursorDescriptor,\n  values: Record<string, unknown>\n): SVGCursorDescriptor {\n  return Object.assign(Object.create(base), values);\n}\n\n/**\n * Registers a cursor to the list, so that it will be used for the given `toolName`.\n * Overwrites the given cursor if it is already set.\n *\n * @param toolName - The name of the tool to assign a cursor to.\n * @param iconContent - The SVG icon content of the cursor.\n * @param viewBox - The viewBox of the cursor object.\n */\nfunction registerCursor(\n  toolName: string,\n  iconContent: string,\n  viewBox: { x: number; y: number }\n) {\n  CursorSVG[toolName] = extend(BASE, {\n    iconContent,\n    viewBox,\n  });\n}\n\nfunction getDefinedSVGCursorDescriptor(\n  name: string\n): SVGCursorDescriptor | undefined {\n  return CursorSVG[name];\n}\n\n/*\n * Exports\n */\nconst svgCursorNames = Object.keys(CursorSVG);\n\nexport {\n  getDefinedSVGCursorDescriptor,\n  registerCursor,\n  svgCursorNames,\n  CursorSVG,\n};\n","import { ToolModes, AnnotationStyleStates } from '../enums';\nimport MouseCursor from './MouseCursor';\nimport ImageMouseCursor from './ImageMouseCursor';\nimport { getDefinedSVGCursorDescriptor } from './SVGCursorDescriptor';\nimport { getStyleProperty } from '../stateManagement/annotation/config/helpers';\n\nimport type { StyleSpecifier } from '../types/AnnotationStyle';\nimport type { SVGCursorDescriptor } from '../types';\n\nconst PROPERTY = 'color';\nconst STATE = AnnotationStyleStates.Highlighted;\nconst MODE = ToolModes.Active;\n\nexport default class SVGMouseCursor extends ImageMouseCursor {\n  constructor(\n    url: string,\n    x?: number,\n    y?: number,\n    name?: string | undefined,\n    fallback?: MouseCursor | undefined\n  ) {\n    super(url, x, y, name, fallback);\n  }\n\n  /**\n   * Get a shared instance of the SVGMouseCursor class satisfying the given parameters.\n   *\n   * @param name - The name of the cursor (defined in SVGCursorDescriptor.ts);\n   * @param pointer - Should be true to use the version of the cursor containing\n   * a mouse pointer. Defaults to false (which does not add a pointer to the cursor);\n   * @param color - The color of the cursor. Defaults to tool.style.colorHighlightedActive;\n   * @returns a SVGMouseCursor instance or\n   * undefined if no SVG cursor descriptor was found with the given name;\n   */\n  static getDefinedCursor(\n    name: string,\n    pointer = false,\n    color?: string\n  ): MouseCursor {\n    if (!color) {\n      color = getStyleProperty(PROPERTY, {} as StyleSpecifier, STATE, MODE);\n    }\n    const urn = getCursorURN(name, pointer, color);\n    let cursor = super.getDefinedCursor(urn);\n    if (!cursor) {\n      const descriptor = getDefinedSVGCursorDescriptor(name);\n      if (descriptor) {\n        cursor = createSVGMouseCursor(\n          descriptor,\n          urn,\n          pointer,\n          color,\n          super.getDefinedCursor('default')\n        );\n        super.setDefinedCursor(urn, cursor);\n      }\n    }\n    return cursor;\n  }\n}\n\n/*\n * Helpers\n */\n\nfunction format(template: string, dictionary: Record<string, unknown>): string {\n  const dict = Object(dictionary);\n  const defined = Object.prototype.hasOwnProperty.bind(dict);\n  return (template + '').replace(/\\{\\{(\\w+)\\}\\}/g, (match, key) => {\n    return defined(key) ? dict[key] + '' : '';\n  });\n}\n\nfunction getCursorURN(name: string, pointer: boolean, color: string) {\n  const type = pointer ? 'pointer' : 'cursor';\n  return `${type}:${name}/${color}`;\n}\n\nfunction createSVGMouseCursor(\n  descriptor: SVGCursorDescriptor,\n  name: string,\n  pointer: boolean,\n  color: string,\n  fallback: MouseCursor\n): SVGMouseCursor {\n  const { x, y } = descriptor.mousePoint;\n  return new SVGMouseCursor(\n    createSVGIconUrl(descriptor, pointer, { color }),\n    x,\n    y,\n    name,\n    fallback\n  );\n}\n\nfunction createSVGIconUrl(\n  descriptor: SVGCursorDescriptor,\n  pointer: boolean,\n  options: Record<string, unknown>\n): string {\n  return URL.createObjectURL(createSVGIconBlob(descriptor, pointer, options));\n}\n\nfunction createSVGIconBlob(\n  descriptor: SVGCursorDescriptor,\n  pointer: boolean,\n  options: Record<string, unknown>\n): Blob {\n  const svgString = (pointer ? createSVGIconWithPointer : createSVGIcon)(\n    descriptor,\n    options\n  );\n  return new Blob([svgString], { type: 'image/svg+xml' });\n}\n\nfunction createSVGIcon(\n  descriptor: SVGCursorDescriptor,\n  options: Record<string, unknown>\n): string {\n  const { iconContent, iconSize, viewBox } = descriptor;\n  const svgString = `\n    <svg data-icon=\"cursor\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"${iconSize}\" height=\"${iconSize}\" viewBox=\"0 0\n      ${viewBox.x} ${viewBox.y}\">\n      ${iconContent}\n    </svg>`;\n  return format(svgString, options);\n}\n\nfunction createSVGIconWithPointer(\n  descriptor: SVGCursorDescriptor,\n  options: Record<string, unknown>\n) {\n  const { iconContent, iconSize, viewBox, mousePointerGroupString } =\n    descriptor;\n  const scale = iconSize / Math.max(viewBox.x, viewBox.y, 1);\n  const svgSize = 16 + iconSize;\n  const svgString = `\n    <svg data-icon=\"cursor\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"${svgSize}\" height=\"${svgSize}\" viewBox=\"0 0 ${svgSize} ${svgSize}\">\n      <g>${mousePointerGroupString}</g>\n      <g transform=\"translate(16, 16) scale(${scale})\">${iconContent}</g>\n    </svg>`;\n  return format(svgString, options);\n}\n","import { setElementCursor } from './elementCursor';\nimport MouseCursor from './MouseCursor';\nimport SVGMouseCursor from './SVGMouseCursor';\n\n/**\n * Set the cursor for an HTML element. cursorNames can be either\n * cornerstone3DTools cursors or standard cursors.\n *\n * @param element - The element to set the cursor on.\n * @param cursorName - The name of the cursor to set. This can be\n * any cursor name either Cornerstone-specific cursor names or the standard\n * CSS cursor names.\n */\nfunction setCursorForElement(\n  element: HTMLDivElement,\n  cursorName: string\n): void {\n  let cursor = SVGMouseCursor.getDefinedCursor(cursorName, true);\n  if (!cursor) {\n    cursor = MouseCursor.getDefinedCursor(cursorName);\n  }\n\n  if (!cursor) {\n    console.log(\n      `Cursor ${cursorName} is not defined either as SVG or as a standard cursor.`\n    );\n    cursor = MouseCursor.getDefinedCursor(cursorName);\n  }\n\n  setElementCursor(element, cursor);\n}\n\nexport default setCursorForElement;\n","import MouseCursor, { standardCursorNames } from './MouseCursor';\nimport ImageMouseCursor from './ImageMouseCursor';\nimport SVGMouseCursor from './SVGMouseCursor';\nimport * as elementCursor from './elementCursor';\nimport setCursorForElement from './setCursorForElement';\nimport {\n  registerCursor,\n  svgCursorNames,\n  CursorSVG,\n} from './SVGCursorDescriptor';\n\n// Todo: this should be enum\nconst CursorNames = [...svgCursorNames, ...standardCursorNames];\n\nexport {\n  MouseCursor,\n  ImageMouseCursor,\n  SVGMouseCursor,\n  elementCursor,\n  registerCursor,\n  CursorNames,\n  CursorSVG,\n  setCursorForElement,\n};\n","import { MouseCursor } from '.';\n\nconst ELEMENT_CURSORS_MAP = Symbol('ElementCursorsMap');\n\n/*\n * Public Methods\n */\n\nfunction initElementCursor(\n  element: HTMLDivElement,\n  cursor: MouseCursor | null\n): void {\n  _getElementCursors(element)[0] = cursor;\n  _setElementCursor(element, cursor);\n}\n\nfunction _setElementCursor(\n  element: HTMLDivElement,\n  cursor: MouseCursor | null\n): void {\n  const cursors = _getElementCursors(element);\n  cursors[1] = cursors[0];\n  cursors[0] = cursor;\n  element.style.cursor = (\n    cursor instanceof MouseCursor\n      ? cursor\n      : MouseCursor.getDefinedCursor('auto')\n  ).getStyleProperty();\n}\n\nfunction resetElementCursor(element: HTMLDivElement): void {\n  _setElementCursor(element, _getElementCursors(element)[1]);\n}\n\nfunction hideElementCursor(element: HTMLDivElement): void {\n  _setElementCursor(element, MouseCursor.getDefinedCursor('none'));\n}\n\n/*\n * Helpers\n */\n\nfunction _getElementCursors(\n  element: HTMLDivElement\n): [MouseCursor | null, MouseCursor | null] {\n  let map = _getElementCursors[ELEMENT_CURSORS_MAP];\n  if (!(map instanceof WeakMap)) {\n    map = new WeakMap();\n    Object.defineProperty(_getElementCursors, ELEMENT_CURSORS_MAP, {\n      value: map,\n    });\n  }\n  let cursors = map.get(element);\n  if (!cursors) {\n    cursors = [null, null];\n    map.set(element, cursors);\n  }\n  return cursors;\n}\n\n/*\n * Exports\n */\nexport {\n  initElementCursor,\n  resetElementCursor,\n  hideElementCursor,\n  _setElementCursor as setElementCursor,\n};\n","import { cache, getEnabledElement, StackViewport } from '@cornerstonejs/core';\nimport { vec3 } from 'gl-matrix';\n\nimport type { Types } from '@cornerstonejs/core';\nimport type {\n  PublicToolProps,\n  ToolProps,\n  EventTypes,\n  SVGDrawingHelper,\n} from '../../types';\nimport { BaseTool } from '../base';\nimport {\n  fillInsideSphere,\n  thresholdInsideSphere,\n} from './strategies/fillSphere';\nimport { eraseInsideSphere } from './strategies/eraseSphere';\nimport {\n  thresholdInsideCircle,\n  fillInsideCircle,\n} from './strategies/fillCircle';\nimport { eraseInsideCircle } from './strategies/eraseCircle';\nimport { Events, ToolModes } from '../../enums';\nimport { drawCircle as drawCircleSvg } from '../../drawingSvg';\nimport {\n  resetElementCursor,\n  hideElementCursor,\n} from '../../cursors/elementCursor';\n\nimport triggerAnnotationRenderForViewportUIDs from '../../utilities/triggerAnnotationRenderForViewportIds';\nimport {\n  config as segmentationConfig,\n  segmentLocking,\n  segmentIndex as segmentIndexController,\n  state as segmentationState,\n  activeSegmentation,\n} from '../../stateManagement/segmentation';\nimport { LabelmapSegmentationData } from '../../types/LabelmapTypes';\n\n/**\n * @public\n */\nclass BrushTool extends BaseTool {\n  static toolName;\n  private _editData: {\n    segmentation: Types.IImageVolume;\n    imageVolume: Types.IImageVolume; //\n    segmentsLocked: number[]; //\n  } | null;\n  private _hoverData?: {\n    brushCursor: any;\n    segmentationId: string;\n    segmentIndex: number;\n    segmentationRepresentationUID: string;\n    segmentColor: [number, number, number, number];\n    viewportIdsToRender: string[];\n    centerCanvas?: Array<number>;\n  };\n\n  constructor(\n    toolProps: PublicToolProps = {},\n    defaultToolProps: ToolProps = {\n      supportedInteractionTypes: ['Mouse', 'Touch'],\n      configuration: {\n        strategies: {\n          FILL_INSIDE_CIRCLE: fillInsideCircle,\n          ERASE_INSIDE_CIRCLE: eraseInsideCircle,\n          FILL_INSIDE_SPHERE: fillInsideSphere,\n          ERASE_INSIDE_SPHERE: eraseInsideSphere,\n          THRESHOLD_INSIDE_CIRCLE: thresholdInsideCircle,\n          THRESHOLD_INSIDE_SPHERE: thresholdInsideSphere,\n        },\n        strategySpecificConfiguration: {\n          THRESHOLD_INSIDE_CIRCLE: {\n            threshold: [-150, -70], // E.g. CT Fat // Only used during threshold strategies.\n          },\n        },\n        defaultStrategy: 'FILL_INSIDE_CIRCLE',\n        activeStrategy: 'FILL_INSIDE_CIRCLE',\n        brushSize: 25,\n      },\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n  }\n\n  onSetToolPassive = () => {\n    this.disableCursor();\n  };\n\n  onSetToolEnabled = () => {\n    this.disableCursor();\n  };\n\n  onSetToolDisabled = () => {\n    this.disableCursor();\n  };\n\n  private disableCursor() {\n    this._hoverData = undefined;\n  }\n\n  preMouseDownCallback = (\n    evt: EventTypes.MouseDownActivateEventType\n  ): boolean => {\n    const eventData = evt.detail;\n    const { element } = eventData;\n\n    const enabledElement = getEnabledElement(element);\n    const { viewport, renderingEngine } = enabledElement;\n\n    if (viewport instanceof StackViewport) {\n      throw new Error('Not implemented yet');\n    }\n\n    const toolGroupId = this.toolGroupId;\n\n    const activeSegmentationRepresentation =\n      activeSegmentation.getActiveSegmentationRepresentation(toolGroupId);\n    if (!activeSegmentationRepresentation) {\n      throw new Error(\n        'No active segmentation detected, create one before using the brush tool'\n      );\n    }\n\n    const { segmentationId, type } = activeSegmentationRepresentation;\n    const segmentsLocked = segmentLocking.getLockedSegments(segmentationId);\n\n    const { representationData } =\n      segmentationState.getSegmentation(segmentationId);\n\n    // Todo: are we going to support contour editing with this tool?\n    const { volumeId } = representationData[type] as LabelmapSegmentationData;\n    const segmentation = cache.getVolume(volumeId);\n\n    const actors = viewport.getActors();\n\n    // Note: For tools that need the source data. Assumed to use\n    // First volume actor for now.\n    const firstVolumeActorUID = actors[0].uid;\n    const imageVolume = cache.getVolume(firstVolumeActorUID);\n\n    const viewportIdsToRender = [viewport.id];\n\n    this._editData = {\n      segmentation,\n      imageVolume,\n      segmentsLocked,\n    };\n\n    this._activateDraw(element);\n\n    hideElementCursor(element);\n\n    evt.preventDefault();\n\n    triggerAnnotationRenderForViewportUIDs(\n      renderingEngine,\n      viewportIdsToRender\n    );\n\n    return true;\n  };\n\n  mouseMoveCallback = (evt: EventTypes.InteractionEventType): void => {\n    if (this.mode === ToolModes.Active) {\n      this.updateCursor(evt);\n    }\n  };\n\n  private updateCursor(evt: EventTypes.InteractionEventType) {\n    const eventData = evt.detail;\n    const { element } = eventData;\n    const { currentPoints } = eventData;\n    const centerCanvas = currentPoints.canvas;\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine, viewport } = enabledElement;\n\n    const camera = viewport.getCamera();\n    const { viewPlaneNormal, viewUp } = camera;\n\n    const toolGroupId = this.toolGroupId;\n\n    const activeSegmentationRepresentation =\n      activeSegmentation.getActiveSegmentationRepresentation(toolGroupId);\n    if (!activeSegmentationRepresentation) {\n      console.warn(\n        'No active segmentation detected, create one before using the brush tool'\n      );\n      return;\n    }\n\n    const { segmentationRepresentationUID, segmentationId } =\n      activeSegmentationRepresentation;\n    const segmentIndex =\n      segmentIndexController.getActiveSegmentIndex(segmentationId);\n\n    const segmentColor = segmentationConfig.color.getColorForSegmentIndex(\n      toolGroupId,\n      segmentationRepresentationUID,\n      segmentIndex\n    );\n\n    const viewportIdsToRender = [viewport.id];\n\n    // Center of circle in canvas Coordinates\n\n    const brushCursor = {\n      metadata: {\n        viewPlaneNormal: <Types.Point3>[...viewPlaneNormal],\n        viewUp: <Types.Point3>[...viewUp],\n        FrameOfReferenceUID: viewport.getFrameOfReferenceUID(),\n        referencedImageId: '',\n        toolName: this.getToolName(),\n        segmentColor,\n      },\n      data: {},\n    };\n\n    this._hoverData = {\n      brushCursor,\n      centerCanvas,\n      segmentIndex,\n      segmentationId,\n      segmentationRepresentationUID,\n      segmentColor,\n      viewportIdsToRender,\n    };\n\n    this._calculateCursor(element, centerCanvas);\n\n    triggerAnnotationRenderForViewportUIDs(\n      renderingEngine,\n      viewportIdsToRender\n    );\n  }\n\n  private _dragCallback = (evt: EventTypes.InteractionEventType): void => {\n    const eventData = evt.detail;\n    const { element } = eventData;\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    const { imageVolume, segmentation, segmentsLocked } = this._editData;\n\n    this.updateCursor(evt);\n\n    const {\n      segmentIndex,\n      segmentationId,\n      segmentationRepresentationUID,\n      brushCursor,\n      viewportIdsToRender,\n    } = this._hoverData;\n\n    const { data } = brushCursor;\n    const { viewPlaneNormal, viewUp } = brushCursor.metadata;\n\n    triggerAnnotationRenderForViewportUIDs(\n      renderingEngine,\n      viewportIdsToRender\n    );\n\n    const operationData = {\n      points: data.handles.points,\n      volume: segmentation, // todo: just pass the segmentationId instead\n      imageVolume,\n      segmentIndex,\n      segmentsLocked,\n      viewPlaneNormal,\n      toolGroupId: this.toolGroupId,\n      segmentationId,\n      segmentationRepresentationUID,\n      viewUp,\n      strategySpecificConfiguration:\n        this.configuration.strategySpecificConfiguration,\n    };\n\n    this.applyActiveStrategy(enabledElement, operationData);\n  };\n\n  private _calculateCursor(element, centerCanvas) {\n    const enabledElement = getEnabledElement(element);\n    const { viewport } = enabledElement;\n    const { canvasToWorld } = viewport;\n    const camera = viewport.getCamera();\n    const { brushSize } = this.configuration;\n\n    const viewUp = vec3.fromValues(\n      camera.viewUp[0],\n      camera.viewUp[1],\n      camera.viewUp[2]\n    );\n    const viewPlaneNormal = vec3.fromValues(\n      camera.viewPlaneNormal[0],\n      camera.viewPlaneNormal[1],\n      camera.viewPlaneNormal[2]\n    );\n    const viewRight = vec3.create();\n\n    vec3.cross(viewRight, viewUp, viewPlaneNormal);\n\n    // in the world coordinate system, the brushSize is the radius of the circle\n    // in mm\n    const centerCursorInWorld: Types.Point3 = canvasToWorld([\n      centerCanvas[0],\n      centerCanvas[1],\n    ]);\n\n    const bottomCursorInWorld = vec3.create();\n    const topCursorInWorld = vec3.create();\n    const leftCursorInWorld = vec3.create();\n    const rightCursorInWorld = vec3.create();\n\n    // Calculate the bottom and top points of the circle in world coordinates\n    for (let i = 0; i <= 2; i++) {\n      bottomCursorInWorld[i] = centerCursorInWorld[i] - viewUp[i] * brushSize;\n      topCursorInWorld[i] = centerCursorInWorld[i] + viewUp[i] * brushSize;\n      leftCursorInWorld[i] = centerCursorInWorld[i] - viewRight[i] * brushSize;\n      rightCursorInWorld[i] = centerCursorInWorld[i] + viewRight[i] * brushSize;\n    }\n\n    const { brushCursor } = this._hoverData;\n    const { data } = brushCursor;\n\n    if (data.handles === undefined) {\n      data.handles = {};\n    }\n\n    data.handles.points = [\n      bottomCursorInWorld,\n      topCursorInWorld,\n      leftCursorInWorld,\n      rightCursorInWorld,\n    ];\n\n    data.invalidated = false;\n  }\n\n  private _endCallback = (evt: EventTypes.InteractionEventType): void => {\n    const eventData = evt.detail;\n    const { element } = eventData;\n\n    const { imageVolume, segmentation, segmentsLocked } = this._editData;\n    const {\n      segmentIndex,\n      segmentationId,\n      segmentationRepresentationUID,\n      brushCursor,\n    } = this._hoverData;\n\n    const { data } = brushCursor;\n    const { viewPlaneNormal, viewUp } = brushCursor.metadata;\n\n    this._deactivateDraw(element);\n\n    resetElementCursor(element);\n\n    const enabledElement = getEnabledElement(element);\n    const { viewport } = enabledElement;\n\n    this._editData = null;\n    this.updateCursor(evt);\n\n    if (viewport instanceof StackViewport) {\n      throw new Error('Not implemented yet');\n    }\n\n    const operationData = {\n      points: data.handles.points,\n      volume: segmentation,\n      imageVolume,\n      segmentIndex,\n      segmentsLocked,\n      viewPlaneNormal,\n      toolGroupId: this.toolGroupId,\n      segmentationId,\n      segmentationRepresentationUID,\n      viewUp,\n      strategySpecificConfiguration:\n        this.configuration.strategySpecificConfiguration,\n    };\n\n    this.applyActiveStrategy(enabledElement, operationData);\n  };\n\n  /**\n   * Add event handlers for the modify event loop, and prevent default event propagation.\n   */\n  private _activateDraw = (element: HTMLDivElement): void => {\n    element.addEventListener(\n      Events.MOUSE_UP,\n      this._endCallback as EventListener\n    );\n    element.addEventListener(\n      Events.MOUSE_DRAG,\n      this._dragCallback as EventListener\n    );\n    element.addEventListener(\n      Events.MOUSE_CLICK,\n      this._endCallback as EventListener\n    );\n  };\n\n  /**\n   * Add event handlers for the modify event loop, and prevent default event prapogation.\n   */\n  private _deactivateDraw = (element: HTMLDivElement): void => {\n    element.removeEventListener(\n      Events.MOUSE_UP,\n      this._endCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.MOUSE_DRAG,\n      this._dragCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.MOUSE_CLICK,\n      this._endCallback as EventListener\n    );\n  };\n\n  public invalidateBrushCursor() {\n    if (this._hoverData !== undefined) {\n      const { data } = this._hoverData.brushCursor;\n\n      data.invalidated = true;\n    }\n  }\n\n  renderAnnotation(\n    enabledElement: Types.IEnabledElement,\n    svgDrawingHelper: SVGDrawingHelper\n  ): void {\n    if (!this._hoverData) {\n      return;\n    }\n\n    const { viewport } = enabledElement;\n\n    const viewportIdsToRender = this._hoverData.viewportIdsToRender;\n\n    if (!viewportIdsToRender.includes(viewport.id)) {\n      return;\n    }\n\n    const brushCursor = this._hoverData.brushCursor;\n\n    if (brushCursor.data.invalidated === true) {\n      const { centerCanvas } = this._hoverData;\n      const { element } = viewport;\n\n      // This can be set true when changing the brush size programmatically\n      // whilst the cursor is being rendered.\n      this._calculateCursor(element, centerCanvas);\n    }\n\n    const toolMetadata = brushCursor.metadata;\n    const annotationUID = toolMetadata.brushCursorUID;\n\n    const data = brushCursor.data;\n    const { points } = data.handles;\n    const canvasCoordinates = points.map((p) => viewport.worldToCanvas(p));\n\n    const bottom = canvasCoordinates[0];\n    const top = canvasCoordinates[1];\n\n    const center = [\n      Math.floor((bottom[0] + top[0]) / 2),\n      Math.floor((bottom[1] + top[1]) / 2),\n    ];\n\n    const radius = Math.abs(bottom[1] - Math.floor((bottom[1] + top[1]) / 2));\n\n    const color = `rgb(${toolMetadata.segmentColor.slice(0, 3)})`;\n\n    // If rendering engine has been destroyed while rendering\n    if (!viewport.getRenderingEngine()) {\n      console.warn('Rendering Engine has been destroyed');\n      return;\n    }\n\n    const circleUID = '0';\n    drawCircleSvg(\n      svgDrawingHelper,\n      annotationUID,\n      circleUID,\n      center as Types.Point2,\n      radius,\n      {\n        color,\n      }\n    );\n  }\n}\n\nBrushTool.toolName = 'Brush';\nexport default BrushTool;\n","import { Types } from '@cornerstonejs/core';\nimport { utilities as csUtils } from '@cornerstonejs/core';\nimport { getToolGroup } from '../../store/ToolGroupManager';\nimport BrushTool from '../../tools/segmentation/BrushTool';\nimport getBoundingBoxAroundShape from '../boundingBox/getBoundingBoxAroundShape';\n\nexport type ThresholdInformation = {\n  volume: Types.IImageVolume;\n  lower: number;\n  upper: number;\n};\n\nexport default function getBrushToolInstances(\n  toolGroupId: string,\n  toolName?: string\n) {\n  const toolGroup = getToolGroup(toolGroupId);\n\n  if (toolGroup === undefined) {\n    return;\n  }\n\n  const toolInstances = toolGroup._toolInstances;\n\n  if (!Object.keys(toolInstances).length) {\n    return;\n  }\n\n  if (toolName && toolInstances[toolName]) {\n    return [toolInstances[toolName]];\n  }\n\n  // For each tool that has BrushTool as base class, set the brush size.\n  const brushBasedToolInstances = Object.values(toolInstances).filter(\n    (toolInstance) => toolInstance instanceof BrushTool\n  ) as BrushTool[];\n\n  return brushBasedToolInstances;\n}\n\nconst equalsCheck = (a, b) => {\n  return JSON.stringify(a) === JSON.stringify(b);\n};\n\n/**\n * Given the center of a voxel in world coordinates, calculate the voxel\n * corners in world coords to calculate the voxel overlap in another volume\n */\nexport function getVoxelOverlap(\n  imageData,\n  dimensions,\n  voxelSpacing,\n  voxelCenter\n) {\n  const voxelCornersWorld = [];\n  for (let i = 0; i < 2; i++) {\n    for (let j = 0; j < 2; j++) {\n      for (let k = 0; k < 2; k++) {\n        const point = [...voxelCenter]; // Create a new point from voxelCenter\n        point[0] = point[0] + ((i * 2 - 1) * voxelSpacing[0]) / 2;\n        point[1] = point[1] + ((j * 2 - 1) * voxelSpacing[1]) / 2;\n        point[2] = point[2] + ((k * 2 - 1) * voxelSpacing[2]) / 2;\n        voxelCornersWorld.push(point);\n      }\n    }\n  }\n  const voxelCornersIJK = voxelCornersWorld.map(\n    (world) => csUtils.transformWorldToIndex(imageData, world) as Types.Point3\n  );\n  const overlapBounds = getBoundingBoxAroundShape(voxelCornersIJK, dimensions);\n\n  return overlapBounds;\n}\n\n/**\n * Prepare a list of volume information objects for callback functions\n */\nexport function processVolumes(\n  segmentationVolume: Types.IImageVolume,\n  thresholdVolumeInformation: ThresholdInformation[]\n) {\n  const { spacing: segmentationSpacing } = segmentationVolume;\n  const scalarData = segmentationVolume.getScalarData();\n\n  // prepare a list of volume information objects for callback functions\n  const volumeInfoList = [];\n  let baseVolumeIdx = 0;\n  for (let i = 0; i < thresholdVolumeInformation.length; i++) {\n    const { imageData, spacing, dimensions } =\n      thresholdVolumeInformation[i].volume;\n\n    const volumeSize =\n      thresholdVolumeInformation[i].volume.getScalarData().length;\n    // discover the index of the volume the segmentation data is based on\n    if (\n      volumeSize === scalarData.length &&\n      equalsCheck(spacing, segmentationSpacing)\n    ) {\n      baseVolumeIdx = i;\n    }\n\n    // prepare information used in callback functions\n    const referenceValues = imageData.getPointData().getScalars().getData();\n    const lower = thresholdVolumeInformation[i].lower;\n    const upper = thresholdVolumeInformation[i].upper;\n\n    volumeInfoList.push({\n      imageData,\n      referenceValues,\n      lower,\n      upper,\n      spacing,\n      dimensions,\n      volumeSize,\n    });\n  }\n\n  return {\n    volumeInfoList,\n    baseVolumeIdx,\n  };\n}\n","import { Types } from '@cornerstonejs/core';\nimport { pointInShapeCallback } from '../../utilities';\nimport { triggerSegmentationDataModified } from '../../stateManagement/segmentation/triggerSegmentationEvents';\nimport { BoundsIJK } from '../../types';\nimport {\n  getVoxelOverlap,\n  processVolumes,\n  ThresholdInformation,\n} from './utilities';\n\nexport type ThresholdRangeOptions = {\n  overwrite: boolean;\n  boundsIJK: BoundsIJK;\n  overlapType?: number;\n};\n\n/**\n * It thresholds a segmentation volume based on a set of threshold values with\n * respect to a list of volumes and respective threshold ranges.\n * @param segmentationVolume - the segmentation volume to be modified\n * @param thresholdVolumeInformation - array of objects containing volume data\n * and a range (lower and upper values) to threshold\n * @param options - the options for thresholding\n * As there is a chance the volumes might have different dimensions and spacing,\n * could be the case of no 1 to 1 mapping. So we need to work with the idea of\n * voxel overlaps (1 to many mappings). We consider all intersections valid, to\n * avoid the complexity to calculate a minimum voxel intersection percentage.\n * This function, given a voxel center and spacing, calculates the overlap of\n * the voxel with another volume and range check the voxels in the overlap.\n * Three situations can occur: all voxels pass the range check, some voxels pass\n * or none voxels pass. The overlapType parameter indicates if the user requires\n * all voxels pass (overlapType = 1) or any voxel pass (overlapType = 0)\n *\n * @returns segmented volume\n */\nfunction thresholdVolumeByRange(\n  segmentationVolume: Types.IImageVolume,\n  thresholdVolumeInformation: ThresholdInformation[],\n  options: ThresholdRangeOptions\n): Types.IImageVolume {\n  const { imageData: segmentationImageData } = segmentationVolume;\n  const scalarData = segmentationVolume.getScalarData();\n\n  const { overwrite, boundsIJK } = options;\n  const overlapType = options?.overlapType || 0;\n\n  // set the segmentation to all zeros\n  if (overwrite) {\n    for (let i = 0; i < scalarData.length; i++) {\n      scalarData[i] = 0;\n    }\n  }\n\n  const { baseVolumeIdx, volumeInfoList } = processVolumes(\n    segmentationVolume,\n    thresholdVolumeInformation\n  );\n\n  // global variables used in callbackOverlap function\n  let overlaps, total, range;\n\n  const testOverlapRange = (volumeInfo, voxelSpacing, voxelCenter) => {\n    /**\n     * This callback function will test all overlaps between a voxel in base\n     * volume (the reference for segmentation volume creation) and voxels in other\n     * volumes.\n     */\n    const callbackOverlap = ({ value }) => {\n      total = total + 1;\n      if (value >= range.lower && value <= range.upper) {\n        overlaps = overlaps + 1;\n      }\n    };\n\n    const { imageData, dimensions, lower, upper } = volumeInfo;\n\n    const overlapBounds = getVoxelOverlap(\n      imageData,\n      dimensions,\n      voxelSpacing,\n      voxelCenter\n    );\n\n    // reset global variables and setting the range check\n    total = 0;\n    overlaps = 0;\n    range = { lower, upper };\n\n    let overlapTest = false;\n\n    // check all voxel overlaps\n    pointInShapeCallback(imageData, () => true, callbackOverlap, overlapBounds);\n\n    if (overlapType === 0) {\n      overlapTest = overlaps > 0; // any voxel overlap is accepted\n    } else if (overlapType == 1) {\n      overlapTest = overlaps === total; // require all voxel overlaps\n    }\n    return overlapTest;\n  };\n\n  // range checks a voxel in a volume with same dimension as the segmentation\n  const testRange = (volumeInfo, pointIJK) => {\n    const { imageData, referenceValues, lower, upper } = volumeInfo;\n    const offset = imageData.computeOffsetIndex(pointIJK);\n\n    const value = referenceValues[offset];\n    if (value <= lower || value >= upper) {\n      return false;\n    } else {\n      return true;\n    }\n  };\n\n  /**\n   * This callback function will test all overlaps between a voxel in base\n   * volume (the reference for segmentation volume creation) and voxels in other\n   * volumes.\n   */\n  const callback = ({ index, pointIJK, pointLPS }) => {\n    let insert = volumeInfoList.length > 0;\n    for (let i = 0; i < volumeInfoList.length; i++) {\n      // if volume has the same size as segmentation volume, just range check\n      if (volumeInfoList[i].volumeSize === scalarData.length) {\n        insert = testRange(volumeInfoList[i], pointIJK);\n      } else {\n        // if not, need to calculate overlaps\n        insert = testOverlapRange(\n          volumeInfoList[i],\n          volumeInfoList[baseVolumeIdx].spacing,\n          pointLPS\n        );\n      }\n      if (!insert) {\n        break;\n      }\n    }\n\n    // Todo: make the segmentIndex a parameter\n    if (insert) {\n      scalarData[index] = 1;\n    }\n  };\n\n  pointInShapeCallback(segmentationImageData, () => true, callback, boundsIJK);\n\n  triggerSegmentationDataModified(segmentationVolume.volumeId);\n\n  return segmentationVolume;\n}\n\nexport default thresholdVolumeByRange;\n","import { BaseTool } from './base';\nimport { getEnabledElement } from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\nimport { EventTypes, PublicToolProps, ToolProps } from '../types';\n\n/**\n * Tool that pans the camera in the plane defined by the viewPlaneNormal and the viewUp.\n */\nclass PanTool extends BaseTool {\n  static toolName;\n  constructor(\n    toolProps: PublicToolProps = {},\n    defaultToolProps: ToolProps = {\n      supportedInteractionTypes: ['Mouse', 'Touch'],\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n  }\n\n  touchDragCallback(evt: EventTypes.InteractionEventType) {\n    this._dragCallback(evt);\n  }\n\n  mouseDragCallback(evt: EventTypes.InteractionEventType) {\n    this._dragCallback(evt);\n  }\n\n  _dragCallback(evt: EventTypes.InteractionEventType) {\n    const { element, deltaPoints } = evt.detail;\n    const enabledElement = getEnabledElement(element);\n\n    const deltaPointsWorld = deltaPoints.world;\n    const camera = enabledElement.viewport.getCamera();\n    const { focalPoint, position } = camera;\n\n    const updatedPosition = <Types.Point3>[\n      position[0] - deltaPointsWorld[0],\n      position[1] - deltaPointsWorld[1],\n      position[2] - deltaPointsWorld[2],\n    ];\n\n    const updatedFocalPoint = <Types.Point3>[\n      focalPoint[0] - deltaPointsWorld[0],\n      focalPoint[1] - deltaPointsWorld[1],\n      focalPoint[2] - deltaPointsWorld[2],\n    ];\n\n    enabledElement.viewport.setCamera({\n      focalPoint: updatedFocalPoint,\n      position: updatedPosition,\n    });\n    enabledElement.viewport.render();\n  }\n}\n\nPanTool.toolName = 'Pan';\nexport default PanTool;\n","import vtkMath from '@kitware/vtk.js/Common/Core/Math';\n\nimport { getEnabledElement } from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\nimport { mat4, vec3 } from 'gl-matrix';\nimport { EventTypes, PublicToolProps, ToolProps } from '../types';\nimport { BaseTool } from './base';\n\n/**\n * Tool that rotates the camera in the plane defined by the viewPlaneNormal and the viewUp.\n */\nclass TrackballRotateTool extends BaseTool {\n  static toolName;\n  touchDragCallback: (evt: EventTypes.InteractionEventType) => void;\n  mouseDragCallback: (evt: EventTypes.InteractionEventType) => void;\n\n  constructor(\n    toolProps: PublicToolProps = {},\n    defaultToolProps: ToolProps = {\n      supportedInteractionTypes: ['Mouse', 'Touch'],\n      configuration: {\n        rotateIncrementDegrees: 2,\n      },\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n\n    this.touchDragCallback = this._dragCallback.bind(this);\n    this.mouseDragCallback = this._dragCallback.bind(this);\n  }\n\n  rotateCamera = (viewport, centerWorld, axis, angle) => {\n    const vtkCamera = viewport.getVtkActiveCamera();\n    const viewUp = vtkCamera.getViewUp();\n    const focalPoint = vtkCamera.getFocalPoint();\n    const position = vtkCamera.getPosition();\n\n    const newPosition: Types.Point3 = [0, 0, 0];\n    const newFocalPoint: Types.Point3 = [0, 0, 0];\n    const newViewUp: Types.Point3 = [0, 0, 0];\n\n    const transform = mat4.identity(new Float32Array(16));\n    mat4.translate(transform, transform, centerWorld);\n    mat4.rotate(transform, transform, angle, axis);\n    mat4.translate(transform, transform, [\n      -centerWorld[0],\n      -centerWorld[1],\n      -centerWorld[2],\n    ]);\n    vec3.transformMat4(newPosition, position, transform);\n    vec3.transformMat4(newFocalPoint, focalPoint, transform);\n\n    mat4.identity(transform);\n    mat4.rotate(transform, transform, angle, axis);\n    vec3.transformMat4(newViewUp, viewUp, transform);\n\n    viewport.setCamera({\n      position: newPosition,\n      viewUp: newViewUp,\n      focalPoint: newFocalPoint,\n    });\n  };\n\n  // pseudocode inspired from\n  // https://github.com/kitware/vtk-js/blob/HEAD/Sources/Interaction/Manipulators/MouseCameraUnicamRotateManipulator/index.js\n  _dragCallback(evt: EventTypes.InteractionEventType): void {\n    const { element, currentPoints, lastPoints } = evt.detail;\n    const currentPointsCanvas = currentPoints.canvas;\n    const lastPointsCanvas = lastPoints.canvas;\n    const { rotateIncrementDegrees } = this.configuration;\n    const enabledElement = getEnabledElement(element);\n    const { viewport } = enabledElement;\n    const camera = viewport.getCamera();\n    const width = element.clientWidth;\n    const height = element.clientHeight;\n\n    const normalizedPosition = [\n      currentPointsCanvas[0] / width,\n      currentPointsCanvas[1] / height,\n    ];\n\n    const normalizedPreviousPosition = [\n      lastPointsCanvas[0] / width,\n      lastPointsCanvas[1] / height,\n    ];\n\n    const center: Types.Point2 = [width * 0.5, height * 0.5];\n    // NOTE: centerWorld corresponds to the focal point in cornerstone3D\n    const centerWorld = viewport.canvasToWorld(center);\n    const normalizedCenter = [0.5, 0.5];\n\n    const radsq = (1.0 + Math.abs(normalizedCenter[0])) ** 2.0;\n    const op = [normalizedPreviousPosition[0], 0, 0];\n    const oe = [normalizedPosition[0], 0, 0];\n\n    const opsq = op[0] ** 2;\n    const oesq = oe[0] ** 2;\n\n    const lop = opsq > radsq ? 0 : Math.sqrt(radsq - opsq);\n    const loe = oesq > radsq ? 0 : Math.sqrt(radsq - oesq);\n\n    const nop: Types.Point3 = [op[0], 0, lop];\n    vtkMath.normalize(nop);\n    const noe: Types.Point3 = [oe[0], 0, loe];\n    vtkMath.normalize(noe);\n\n    const dot = vtkMath.dot(nop, noe);\n    if (Math.abs(dot) > 0.0001) {\n      const angleX =\n        -2 *\n        Math.acos(vtkMath.clampValue(dot, -1.0, 1.0)) *\n        Math.sign(normalizedPosition[0] - normalizedPreviousPosition[0]) *\n        rotateIncrementDegrees;\n\n      const upVec = camera.viewUp;\n      const atV = camera.viewPlaneNormal;\n      const rightV: Types.Point3 = [0, 0, 0];\n      const forwardV: Types.Point3 = [0, 0, 0];\n\n      vtkMath.cross(upVec, atV, rightV);\n      vtkMath.normalize(rightV);\n\n      vtkMath.cross(atV, rightV, forwardV);\n      vtkMath.normalize(forwardV);\n      vtkMath.normalize(upVec);\n\n      this.rotateCamera(viewport, centerWorld, forwardV, angleX);\n\n      const angleY =\n        (normalizedPreviousPosition[1] - normalizedPosition[1]) *\n        rotateIncrementDegrees;\n\n      this.rotateCamera(viewport, centerWorld, rightV, angleY);\n\n      viewport.render();\n    }\n  }\n}\n\nTrackballRotateTool.toolName = 'TrackballRotate';\nexport default TrackballRotateTool;\n","import { BaseTool } from './base';\nimport {\n  getEnabledElement,\n  VolumeViewport,\n  StackViewport,\n  utilities,\n  cache,\n  Types,\n} from '@cornerstonejs/core';\nimport { EventTypes } from '../types';\n\n// Todo: should move to configuration\nconst DEFAULT_MULTIPLIER = 4;\nconst DEFAULT_IMAGE_DYNAMIC_RANGE = 1024;\nconst PT = 'PT';\n\n/**\n * WindowLevel tool manipulates the windowLevel applied to a viewport. It\n * provides a way to set the windowCenter and windowWidth of a viewport\n * by dragging mouse over the image.\n *\n */\nclass WindowLevelTool extends BaseTool {\n  static toolName;\n  constructor(\n    toolProps = {},\n    defaultToolProps = {\n      supportedInteractionTypes: ['Mouse', 'Touch'],\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n  }\n\n  touchDragCallback(evt: EventTypes.InteractionEventType) {\n    this.mouseDragCallback(evt);\n  }\n\n  mouseDragCallback(evt: EventTypes.InteractionEventType) {\n    const { element, deltaPoints } = evt.detail;\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine, viewport } = enabledElement;\n\n    let volumeId,\n      lower,\n      upper,\n      modality,\n      newRange,\n      viewportsContainingVolumeUID;\n    let isPreScaled = false;\n\n    if (viewport instanceof VolumeViewport) {\n      const targetId = this.getTargetId(viewport as Types.IVolumeViewport);\n      volumeId = targetId.split('volumeId:')[1];\n      viewportsContainingVolumeUID = utilities.getViewportsWithVolumeId(\n        volumeId,\n        renderingEngine.id\n      );\n      const properties = viewport.getProperties();\n      ({ lower, upper } = properties.voiRange);\n      const volume = cache.getVolume(volumeId);\n      modality = volume.metadata.Modality;\n      isPreScaled = volume.scaling && Object.keys(volume.scaling).length > 0;\n    } else if (viewport instanceof StackViewport) {\n      const properties = viewport.getProperties();\n      modality = viewport.modality;\n      ({ lower, upper } = properties.voiRange);\n      const { preScale } = viewport.getImageData();\n      isPreScaled =\n        preScale.scaled && preScale.scalingParameters?.suvbw !== undefined;\n    } else {\n      throw new Error('Viewport is not a valid type');\n    }\n\n    // If modality is PT, treat it special to not include the canvas delta in\n    // the x direction. For other modalities, use the canvas delta in both\n    // directions, and if the viewport is a volumeViewport, the multiplier\n    // is calculate using the volume min and max.\n    if (modality === PT) {\n      newRange = this.getPTScaledNewRange({\n        deltaPointsCanvas: deltaPoints.canvas,\n        lower,\n        upper,\n        clientHeight: element.clientHeight,\n        isPreScaled,\n        viewport,\n        volumeId,\n      });\n    } else {\n      newRange = this.getNewRange({\n        viewport,\n        deltaPointsCanvas: deltaPoints.canvas,\n        volumeId,\n        lower,\n        upper,\n      });\n    }\n\n    if (viewport instanceof StackViewport) {\n      viewport.setProperties({\n        voiRange: newRange,\n      });\n\n      viewport.render();\n      return;\n    }\n\n    if (viewport instanceof VolumeViewport) {\n      viewport.setProperties({\n        voiRange: newRange,\n      });\n\n      viewportsContainingVolumeUID.forEach((vp) => {\n        vp.render();\n      });\n      return;\n    }\n  }\n\n  getPTScaledNewRange({\n    deltaPointsCanvas,\n    lower,\n    upper,\n    clientHeight,\n    viewport,\n    volumeId,\n    isPreScaled,\n  }) {\n    let multiplier = DEFAULT_MULTIPLIER;\n\n    if (isPreScaled) {\n      multiplier = 5 / clientHeight;\n    } else {\n      multiplier =\n        this._getMultiplierFromDynamicRange(viewport, volumeId) ||\n        DEFAULT_MULTIPLIER;\n    }\n\n    const deltaY = deltaPointsCanvas[1];\n    const wcDelta = deltaY * multiplier;\n\n    upper -= wcDelta;\n    upper = isPreScaled ? Math.max(upper, 0.1) : upper;\n\n    return { lower, upper };\n  }\n\n  getNewRange({ viewport, deltaPointsCanvas, volumeId, lower, upper }) {\n    const multiplier =\n      this._getMultiplierFromDynamicRange(viewport, volumeId) ||\n      DEFAULT_MULTIPLIER;\n\n    const wwDelta = deltaPointsCanvas[0] * multiplier;\n    const wcDelta = deltaPointsCanvas[1] * multiplier;\n\n    let { windowWidth, windowCenter } = utilities.windowLevel.toWindowLevel(\n      lower,\n      upper\n    );\n\n    windowWidth += wwDelta;\n    windowCenter += wcDelta;\n\n    windowWidth = Math.max(windowWidth, 1);\n\n    // Convert back to range\n    return utilities.windowLevel.toLowHighRange(windowWidth, windowCenter);\n  }\n\n  _getMultiplierFromDynamicRange(viewport, volumeId) {\n    let imageDynamicRange;\n\n    if (volumeId) {\n      const imageVolume = cache.getVolume(volumeId);\n      const { dimensions } = imageVolume;\n      const scalarData = imageVolume.getScalarData();\n      const calculatedDynamicRange = this._getImageDynamicRangeFromMiddleSlice(\n        scalarData,\n        dimensions\n      );\n      const BitsStored = imageVolume?.metadata?.BitsStored;\n      const metadataDynamicRange = BitsStored ? 2 ** BitsStored : Infinity;\n      // Burned in Pixels often use pixel values above the BitsStored.\n      // This results in a multiplier which is way higher than what you would\n      // want in practice. Thus we take the min between the metadata dynamic\n      // range and actual middel slice dynamic range.\n      imageDynamicRange = Math.min(\n        calculatedDynamicRange,\n        metadataDynamicRange\n      );\n    } else {\n      imageDynamicRange = this._getImageDynamicRangeFromViewport(viewport);\n    }\n\n    const ratio = imageDynamicRange / DEFAULT_IMAGE_DYNAMIC_RANGE;\n\n    let multiplier = DEFAULT_MULTIPLIER;\n\n    if (ratio > 1) {\n      multiplier = Math.round(ratio);\n    }\n    return multiplier;\n  }\n\n  _getImageDynamicRangeFromViewport(viewport) {\n    const { imageData } = viewport.getImageData();\n    const dimensions = imageData.getDimensions();\n\n    let scalarData;\n    // if getScalarData is a method on imageData\n    if (imageData.getScalarData) {\n      scalarData = imageData.getScalarData();\n    } else {\n      scalarData = imageData.getPointData().getScalars();\n    }\n\n    if (dimensions[2] !== 1) {\n      return this._getImageDynamicRangeFromMiddleSlice(scalarData, dimensions);\n    }\n\n    let range;\n    if (scalarData.getRange) {\n      range = scalarData.getRange();\n    } else {\n      const { min, max } = this._getMinMax(scalarData, scalarData.length);\n      range = [min, max];\n    }\n\n    return range[1] - range[0];\n  }\n\n  _getImageDynamicRangeFromMiddleSlice = (scalarData, dimensions) => {\n    const middleSliceIndex = Math.floor(dimensions[2] / 2);\n\n    const frameLength = dimensions[0] * dimensions[1];\n    let bytesPerVoxel;\n    let TypedArrayConstructor;\n\n    if (scalarData instanceof Float32Array) {\n      bytesPerVoxel = 4;\n      TypedArrayConstructor = Float32Array;\n    } else if (scalarData instanceof Uint8Array) {\n      bytesPerVoxel = 1;\n      TypedArrayConstructor = Uint8Array;\n    } else if (scalarData instanceof Uint16Array) {\n      bytesPerVoxel = 2;\n      TypedArrayConstructor = Uint16Array;\n    } else if (scalarData instanceof Int16Array) {\n      bytesPerVoxel = 2;\n      TypedArrayConstructor = Int16Array;\n    }\n\n    const buffer = scalarData.buffer;\n    const byteOffset = middleSliceIndex * frameLength * bytesPerVoxel;\n    const frame = new TypedArrayConstructor(buffer, byteOffset, frameLength);\n\n    const { max, min } = this._getMinMax(frame, frameLength);\n\n    return max - min;\n  };\n\n  private _getMinMax(frame: Uint8Array | Float32Array, frameLength: number) {\n    let min = Infinity;\n    let max = -Infinity;\n\n    for (let i = 0; i < frameLength; i++) {\n      const voxel = frame[i];\n\n      if (voxel < min) {\n        min = voxel;\n      }\n\n      if (voxel > max) {\n        max = voxel;\n      }\n    }\n    return { max, min };\n  }\n}\n\nWindowLevelTool.toolName = 'WindowLevel';\nexport default WindowLevelTool;\n","import {\n  getEnabledElementByIds,\n  VolumeViewport,\n  StackViewport,\n  utilities as csUtils,\n} from '@cornerstonejs/core';\nimport { BaseTool } from './base';\nimport { scroll } from '../utilities';\nimport { PublicToolProps, ToolProps, EventTypes } from '../types';\n\n/**\n * The StackScrollTool is a tool that allows the user to scroll through a\n * stack of images by pressing the mouse click and dragging\n */\nclass StackScrollTool extends BaseTool {\n  static toolName;\n  deltaY: number;\n  constructor(\n    toolProps: PublicToolProps = {},\n    defaultToolProps: ToolProps = {\n      supportedInteractionTypes: ['Mouse', 'Touch'],\n      configuration: {\n        invert: false,\n        debounceIfNotLoaded: true,\n        loop: false,\n      },\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n    this.deltaY = 1;\n  }\n\n  mouseDragCallback(evt: EventTypes.InteractionEventType) {\n    this._dragCallback(evt);\n  }\n  touchDragCallback(evt: EventTypes.InteractionEventType) {\n    this._dragCallback(evt);\n  }\n\n  _dragCallback(evt: EventTypes.InteractionEventType) {\n    const { deltaPoints, viewportId, renderingEngineId } = evt.detail;\n    const { viewport } = getEnabledElementByIds(viewportId, renderingEngineId);\n\n    const targetId = this.getTargetId(viewport);\n    const { debounceIfNotLoaded, invert, loop } = this.configuration;\n\n    const deltaPointY = deltaPoints.canvas[1];\n\n    let volumeId;\n    if (viewport instanceof VolumeViewport) {\n      volumeId = targetId.split('volumeId:')[1];\n    }\n\n    const pixelsPerImage = this._getPixelPerImage(viewport);\n    const deltaY = deltaPointY + this.deltaY;\n\n    if (!pixelsPerImage) {\n      return;\n    }\n\n    if (Math.abs(deltaY) >= pixelsPerImage) {\n      const imageIdIndexOffset = Math.round(deltaY / pixelsPerImage);\n\n      scroll(viewport, {\n        delta: invert ? -imageIdIndexOffset : imageIdIndexOffset,\n        volumeId,\n        debounceLoading: debounceIfNotLoaded,\n        loop: loop,\n      });\n\n      this.deltaY = deltaY % pixelsPerImage;\n    } else {\n      this.deltaY = deltaY;\n    }\n  }\n\n  _getPixelPerImage(viewport) {\n    const { element } = viewport;\n    const numberOfSlices = this._getNumberOfSlices(viewport);\n\n    // The Math.max here makes it easier to mouseDrag-scroll small or really large image stacks\n    return Math.max(2, element.offsetHeight / Math.max(numberOfSlices, 8));\n  }\n\n  _getNumberOfSlices(viewport) {\n    if (viewport instanceof VolumeViewport) {\n      const { numberOfSlices } =\n        csUtils.getImageSliceDataForVolumeViewport(viewport);\n      return numberOfSlices;\n    } else if (viewport instanceof StackViewport) {\n      return viewport.getImageIds().length;\n    }\n  }\n}\n\nStackScrollTool.toolName = 'StackScroll';\nexport default StackScrollTool;\n","import type { Types } from '@cornerstonejs/core';\nimport { vec2, vec3 } from 'gl-matrix';\n\ntype Line2D = [Types.Point2, Types.Point2];\ntype Line3D = [Types.Point3, Types.Point3];\ntype Line = Line2D | Line3D;\n\n/**\n * Calculates the angle between two 3D lines.\n */\nfunction angleBetween3DLines(line1: Line3D, line2: Line3D): number {\n  const [p1, p2] = line1;\n  const [p3, p4] = line2;\n\n  const v1 = vec3.sub(vec3.create(), p2, p1);\n  const v2 = vec3.sub(vec3.create(), p3, p4);\n\n  const dot = vec3.dot(v1, v2);\n\n  const v1Length = vec3.length(v1);\n  const v2Length = vec3.length(v2);\n\n  const cos = dot / (v1Length * v2Length);\n\n  const radian = Math.acos(cos);\n\n  return (radian * 180) / Math.PI;\n}\n\n/**\n * Calculates the angle between two 2D lines.\n */\nfunction angleBetween2DLines(line1: Line2D, line2: Line2D): number {\n  const [p1, p2] = line1;\n  const [p3, p4] = line2;\n\n  const v1 = vec2.sub(vec2.create(), p2, p1);\n  const v2 = vec2.sub(vec2.create(), p3, p4);\n\n  const dot = vec2.dot(v1, v2);\n  const v1Length = vec2.length(v1);\n  const v2Length = vec2.length(v2);\n\n  const cos = dot / (v1Length * v2Length);\n  return Math.acos(cos) * (180 / Math.PI);\n}\n\n/**\n * Returns the angle between two lines in degrees.\n * The angle measured is that between the vectors\n * line1[1]->line1[0] AND line2[0]->line2[1].\n * @param line1 - Line = [p1, p2]\n * @param line2 - Line = [p3, p4]\n * @returns The angle between two lines in degrees.\n */\nexport default function angleBetweenLines(line1: Line, line2: Line): number {\n  const is3D = line1[0].length === 3;\n  return is3D\n    ? angleBetween3DLines(line1 as Line3D, line2 as Line3D)\n    : angleBetween2DLines(line1 as Line2D, line2 as Line2D);\n}\n","import {\n  BaseVolumeViewport,\n  getEnabledElement,\n  Types,\n} from '@cornerstonejs/core';\nimport { mat4, vec3 } from 'gl-matrix';\nimport { BaseTool } from './base';\nimport angleBetweenLines from '../utilities/math/angle/angleBetweenLines';\nimport { PublicToolProps, ToolProps, EventTypes } from '../types';\n\n/**\n * The PlanarRotateTool is a tool that allows the user to rotate\n * the image by pressing the mouse click and dragging\n */\nclass PlanarRotateTool extends BaseTool {\n  static toolName;\n  touchDragCallback: (evt: EventTypes.MouseDragEventType) => void;\n  mouseDragCallback: (evt: EventTypes.MouseDragEventType) => void;\n\n  constructor(\n    toolProps: PublicToolProps = {},\n    defaultToolProps: ToolProps = {\n      supportedInteractionTypes: ['Mouse', 'Touch'],\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n\n    this.touchDragCallback = this._dragCallback.bind(this);\n    this.mouseDragCallback = this._dragCallback.bind(this);\n  }\n\n  _dragCallback(evt: EventTypes.MouseDragEventType) {\n    const { element, currentPoints, startPoints } = evt.detail;\n    const currentPointWorld = currentPoints.world;\n    const startPointWorld = startPoints.world;\n    const enabledElement = getEnabledElement(element);\n    const { viewport } = enabledElement;\n    const camera = viewport.getCamera();\n    const width = element.clientWidth;\n    const height = element.clientHeight;\n\n    const centerCanvas: Types.Point2 = [width * 0.5, height * 0.5];\n    const centerWorld = viewport.canvasToWorld(centerCanvas);\n\n    let angle = angleBetweenLines(\n      [startPointWorld, centerWorld],\n      [centerWorld, currentPointWorld]\n    );\n\n    const { viewPlaneNormal, viewUp } = camera;\n\n    const v1 = vec3.sub(vec3.create(), centerWorld, startPointWorld);\n    const v2 = vec3.sub(vec3.create(), centerWorld, currentPointWorld);\n    const cross = vec3.cross(vec3.create(), v1, v2);\n    if (vec3.dot(viewPlaneNormal, cross) > 0) {\n      angle = -angle;\n    }\n\n    if (Number.isNaN(angle)) {\n      return;\n    }\n\n    if (viewport instanceof BaseVolumeViewport) {\n      const rotAngle = (angle * Math.PI) / 180;\n      const rotMat = mat4.identity(new Float32Array(16));\n      mat4.rotate(rotMat, rotMat, rotAngle, viewPlaneNormal);\n      const rotatedViewUp = vec3.transformMat4(vec3.create(), viewUp, rotMat);\n      viewport.setCamera({ viewUp: rotatedViewUp as Types.Point3 });\n    } else {\n      const { rotation } = (viewport as Types.IStackViewport).getProperties();\n      viewport.setProperties({ rotation: rotation + angle });\n    }\n\n    viewport.render();\n  }\n}\n\nPlanarRotateTool.toolName = 'PlanarRotate';\nexport default PlanarRotateTool;\n","import { getEnabledElement } from '@cornerstonejs/core';\nimport { BaseTool } from './base';\nimport { MouseWheelEventType } from '../types/EventTypes';\nimport scroll from '../utilities/scroll';\n\n/**\n * The StackScrollMouseWheelTool is a tool that allows the user to scroll through a\n * stack of images using the mouse wheel\n */\nclass StackScrollMouseWheelTool extends BaseTool {\n  static toolName;\n\n  _configuration: any;\n\n  constructor(\n    toolProps = {},\n    defaultToolProps = {\n      supportedInteractionTypes: ['Mouse', 'Touch'],\n      configuration: {\n        invert: false,\n        debounceIfNotLoaded: true,\n        loop: false,\n      },\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n  }\n\n  mouseWheelCallback(evt: MouseWheelEventType): void {\n    const { wheel, element } = evt.detail;\n    const { direction } = wheel;\n    const { invert } = this.configuration;\n    const { viewport } = getEnabledElement(element);\n    const delta = direction * (invert ? -1 : 1);\n\n    const targetId = this.getTargetId(viewport);\n    const volumeId = targetId.split('volumeId:')[1];\n\n    scroll(viewport, {\n      delta,\n      debounceLoading: this.configuration.debounceIfNotLoaded,\n      loop: this.configuration.loop,\n      volumeId,\n    });\n  }\n}\n\nStackScrollMouseWheelTool.toolName = 'StackScrollMouseWheel';\nexport default StackScrollMouseWheelTool;\n","import { vec3 } from 'gl-matrix';\nimport vtkMath from '@kitware/vtk.js/Common/Core/Math';\nimport { getEnabledElement, Types } from '@cornerstonejs/core';\nimport { BaseTool } from './base';\nimport { EventTypes, PublicToolProps, ToolProps } from '../types';\n\n/**\n * ZoomTool tool manipulates the camera zoom applied to a viewport. It\n * provides a way to set the zoom of a viewport by dragging mouse over the image.\n *\n */\nclass ZoomTool extends BaseTool {\n  static toolName;\n  touchDragCallback: (evt: EventTypes.InteractionEventType) => void;\n  mouseDragCallback: (evt: EventTypes.InteractionEventType) => void;\n  initialMousePosWorld: Types.Point3;\n  dirVec: Types.Point3;\n\n  constructor(\n    toolProps: PublicToolProps = {},\n    defaultToolProps: ToolProps = {\n      supportedInteractionTypes: ['Mouse', 'Touch'],\n      configuration: {\n        // whether zoom to the center of the image OR zoom to the mouse position\n        zoomToCenter: false,\n        minZoomScale: 0.1,\n        maxZoomScale: 30,\n        pinchToZoom: true,\n        pan: true,\n        invert: false,\n      },\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n    this.initialMousePosWorld = [0, 0, 0];\n    this.dirVec = [0, 0, 0];\n    if (this.configuration.pinchToZoom) {\n      this.touchDragCallback = this._pinchCallback.bind(this);\n    } else {\n      this.touchDragCallback = this._dragCallback.bind(this);\n    }\n    this.mouseDragCallback = this._dragCallback.bind(this);\n  }\n\n  preMouseDownCallback = (evt: EventTypes.InteractionEventType): boolean => {\n    const eventData = evt.detail;\n    const { element, currentPoints } = eventData;\n    const worldPos = currentPoints.world;\n    const enabledElement = getEnabledElement(element);\n\n    const camera = enabledElement.viewport.getCamera();\n    const { focalPoint } = camera;\n\n    this.initialMousePosWorld = worldPos;\n\n    // The direction vector from the clicked location to the focal point\n    // which would act as the vector to translate the image (if zoomToCenter is false)\n    let dirVec = vec3.fromValues(\n      focalPoint[0] - worldPos[0],\n      focalPoint[1] - worldPos[1],\n      focalPoint[2] - worldPos[2]\n    );\n\n    dirVec = vec3.normalize(vec3.create(), dirVec);\n\n    this.dirVec = dirVec as Types.Point3;\n\n    // we should not return true here, returning true in the preMouseDownCallback\n    // means that the event is handled by the tool and no other methods\n    // can claim the event, which will result in a bug where having Zoom on primary\n    // and clicking on an annotation will not manipulate the annotation, but will\n    // instead zoom the image (which is not what we want), so we return false here\n    return false;\n  };\n\n  preTouchStartCallback = (evt: EventTypes.InteractionEventType): boolean => {\n    if (!this.configuration.pinchToZoom) {\n      return this.preMouseDownCallback(evt);\n    }\n  };\n\n  _pinchCallback(evt: EventTypes.InteractionEventType) {\n    const pointsList = (evt as EventTypes.TouchStartEventType).detail\n      .currentPointsList;\n\n    if (pointsList.length > 1) {\n      const { element, currentPoints } = evt.detail;\n      const enabledElement = getEnabledElement(element);\n      const { viewport } = enabledElement;\n      const camera = viewport.getCamera();\n      const worldPos = currentPoints.world;\n      const { focalPoint } = camera;\n      this.initialMousePosWorld = worldPos;\n      // The direction vector from the clicked location to the focal point\n      // which would act as the vector to translate the image (if zoomToCenter is false)\n      let dirVec = vec3.fromValues(\n        focalPoint[0] - worldPos[0],\n        focalPoint[1] - worldPos[1],\n        focalPoint[2] - worldPos[2]\n      );\n      dirVec = vec3.normalize(vec3.create(), dirVec);\n\n      this.dirVec = dirVec as Types.Point3;\n      if (camera.parallelProjection) {\n        this._dragParallelProjection(evt, viewport, camera, true);\n      } else {\n        this._dragPerspectiveProjection(evt, viewport, camera, true);\n      }\n      viewport.render();\n    }\n\n    if (this.configuration.pan) {\n      this._panCallback(evt);\n    }\n  }\n\n  // Takes ICornerstoneEvent, Mouse or Touch\n  _dragCallback(evt: EventTypes.InteractionEventType) {\n    const { element } = evt.detail;\n    const enabledElement = getEnabledElement(element);\n    const { viewport } = enabledElement;\n\n    const camera = viewport.getCamera();\n\n    if (camera.parallelProjection) {\n      this._dragParallelProjection(evt, viewport, camera);\n    } else {\n      this._dragPerspectiveProjection(evt, viewport, camera);\n    }\n\n    viewport.render();\n  }\n\n  _dragParallelProjection = (\n    evt: EventTypes.InteractionEventType,\n    viewport: Types.IStackViewport | Types.IVolumeViewport,\n    camera: Types.ICamera,\n    pinch = false\n  ): void => {\n    const { element, deltaPoints } = evt.detail;\n    const deltaY = pinch\n      ? (evt as EventTypes.TouchDragEventType).detail.deltaDistance.canvas\n      : deltaPoints.canvas[1];\n\n    const size = [element.clientWidth, element.clientHeight];\n    const { parallelScale, focalPoint, position } = camera;\n\n    const zoomScale = 5 / size[1];\n    const k = deltaY * zoomScale * (this.configuration.invert ? -1 : 1);\n\n    const parallelScaleToSet = (1.0 - k) * parallelScale;\n\n    let focalPointToSet = focalPoint;\n    let positionToSet = position;\n\n    // if we're not zooming to the center, we need to adjust the focal point\n    // and position to set the focal point and position to the value that\n    // would simulate the zoom to the mouse position\n    if (!this.configuration.zoomToCenter) {\n      // Distance of the initial mouse position (world) to the focal point\n      // which is always the center of the canvas.\n      const distanceToCanvasCenter = vec3.distance(\n        focalPoint,\n        this.initialMousePosWorld\n      );\n\n      positionToSet = vec3.scaleAndAdd(\n        vec3.create(),\n        position,\n        this.dirVec,\n        -distanceToCanvasCenter * k\n      ) as Types.Point3;\n\n      focalPointToSet = vec3.scaleAndAdd(\n        vec3.create(),\n        focalPoint,\n        this.dirVec,\n        -distanceToCanvasCenter * k\n      ) as Types.Point3;\n    }\n\n    // If it is a regular GPU accelerated viewport, then parallel scale\n    // has a physical meaning and we can use that to determine the threshold\n    // Added spacing preset in case there is no imageData on viewport\n    const imageData = viewport.getImageData();\n    let spacing = [1, 1, 1];\n    if (imageData) {\n      spacing = imageData.spacing;\n    }\n\n    const { minZoomScale, maxZoomScale } = this.configuration;\n\n    const t = element.clientHeight * spacing[1] * 0.5;\n    const scale = t / parallelScaleToSet;\n\n    let cappedParallelScale = parallelScaleToSet;\n    let thresholdExceeded = false;\n\n    if (imageData) {\n      if (scale < minZoomScale) {\n        cappedParallelScale = t / minZoomScale;\n        thresholdExceeded = true;\n      } else if (scale >= maxZoomScale) {\n        cappedParallelScale = t / maxZoomScale;\n        thresholdExceeded = true;\n      }\n    }\n\n    viewport.setCamera({\n      parallelScale: cappedParallelScale,\n      focalPoint: thresholdExceeded ? focalPoint : focalPointToSet,\n      position: thresholdExceeded ? position : positionToSet,\n    });\n  };\n\n  _dragPerspectiveProjection = (\n    evt: EventTypes.InteractionEventType,\n    viewport: Types.IStackViewport | Types.IVolumeViewport,\n    camera: Types.ICamera,\n    pinch = false\n  ): void => {\n    const { element, deltaPoints } = evt.detail;\n    const deltaY = pinch\n      ? (evt as EventTypes.TouchDragEventType).detail.deltaDistance.canvas\n      : deltaPoints.canvas[1];\n\n    const size = [element.clientWidth, element.clientHeight];\n    const { position, focalPoint, viewPlaneNormal } = camera;\n\n    const distance = vtkMath.distance2BetweenPoints(position, focalPoint);\n    const zoomScale = Math.sqrt(distance) / size[1];\n\n    const directionOfProjection = [\n      -viewPlaneNormal[0],\n      -viewPlaneNormal[1],\n      -viewPlaneNormal[2],\n    ];\n\n    const k = this.configuration.invert\n      ? deltaY / zoomScale\n      : deltaY * zoomScale;\n\n    let tmp = k * directionOfProjection[0];\n    position[0] += tmp;\n    focalPoint[0] += tmp;\n\n    tmp = k * directionOfProjection[1];\n    position[1] += tmp;\n    focalPoint[1] += tmp;\n\n    tmp = k * directionOfProjection[2];\n    position[2] += tmp;\n    focalPoint[2] += tmp;\n\n    viewport.setCamera({ position, focalPoint });\n  };\n\n  _panCallback(evt: EventTypes.InteractionEventType) {\n    const { element, deltaPoints } = evt.detail;\n    const enabledElement = getEnabledElement(element);\n\n    const deltaPointsWorld = deltaPoints.world;\n    const camera = enabledElement.viewport.getCamera();\n    const { focalPoint, position } = camera;\n\n    const updatedPosition = <Types.Point3>[\n      position[0] - deltaPointsWorld[0],\n      position[1] - deltaPointsWorld[1],\n      position[2] - deltaPointsWorld[2],\n    ];\n\n    const updatedFocalPoint = <Types.Point3>[\n      focalPoint[0] - deltaPointsWorld[0],\n      focalPoint[1] - deltaPointsWorld[1],\n      focalPoint[2] - deltaPointsWorld[2],\n    ];\n\n    enabledElement.viewport.setCamera({\n      focalPoint: updatedFocalPoint,\n      position: updatedPosition,\n    });\n    enabledElement.viewport.render();\n  }\n}\n\nZoomTool.toolName = 'Zoom';\nexport default ZoomTool;\n","import { BaseTool } from './base';\nimport { getEnabledElement } from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\nimport { mat4, vec3 } from 'gl-matrix';\nimport { PublicToolProps, ToolProps } from '../types';\nimport { MouseWheelEventType } from '../types/EventTypes';\n\nconst DIRECTIONS = {\n  X: [1, 0, 0],\n  Y: [0, 1, 0],\n  Z: [0, 0, 1],\n  CUSTOM: [],\n};\n\n/**\n * Tool that rotates the camera on mouse wheel.\n * It rotates the camera around the focal point, and around a defined axis. Default\n * axis is set to be Z axis, but it can be configured to any custom normalized axis.\n *\n */\nclass VolumeRotateMouseWheelTool extends BaseTool {\n  static toolName;\n  _configuration: any;\n\n  constructor(\n    toolProps: PublicToolProps = {},\n    defaultToolProps: ToolProps = {\n      supportedInteractionTypes: ['Mouse', 'Touch'],\n      configuration: {\n        direction: DIRECTIONS.Z,\n        rotateIncrementDegrees: 0.5,\n      },\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n  }\n\n  mouseWheelCallback(evt: MouseWheelEventType) {\n    // https://github.com/kitware/vtk-js/blob/HEAD/Sources/Interaction/Manipulators/MouseCameraUnicamRotateManipulator/index.js#L73\n    const { element, wheel } = evt.detail;\n    const enabledElement = getEnabledElement(element);\n    const { viewport } = enabledElement;\n    const { direction, rotateIncrementDegrees } = this.configuration;\n\n    const camera = viewport.getCamera();\n    const { viewUp, position, focalPoint } = camera;\n\n    const { direction: deltaY } = wheel;\n\n    const [cx, cy, cz] = focalPoint;\n    const [ax, ay, az] = direction;\n\n    const angle = deltaY * rotateIncrementDegrees;\n\n    // position[3] = 1.0\n    // focalPoint[3] = 1.0\n    // viewUp[3] = 0.0\n\n    const newPosition: Types.Point3 = [0, 0, 0];\n    const newFocalPoint: Types.Point3 = [0, 0, 0];\n    const newViewUp: Types.Point3 = [0, 0, 0];\n\n    const transform = mat4.identity(new Float32Array(16));\n    mat4.translate(transform, transform, [cx, cy, cz]);\n    mat4.rotate(transform, transform, angle, [ax, ay, az]);\n    mat4.translate(transform, transform, [-cx, -cy, -cz]);\n    vec3.transformMat4(newPosition, position, transform);\n    vec3.transformMat4(newFocalPoint, focalPoint, transform);\n\n    mat4.identity(transform);\n    mat4.rotate(transform, transform, angle, [ax, ay, az]);\n    vec3.transformMat4(<Types.Point3>newViewUp, viewUp, transform);\n\n    viewport.setCamera({\n      position: newPosition,\n      viewUp: newViewUp,\n      focalPoint: newFocalPoint,\n    });\n\n    viewport.render();\n  }\n}\n\nVolumeRotateMouseWheelTool.toolName = 'VolumeRotateMouseWheel';\nexport default VolumeRotateMouseWheelTool;\n","import { vec3 } from 'gl-matrix';\nimport type { Types } from '@cornerstonejs/core';\n\n/**\n * Given two world positions and an orthogonal view to an `imageVolume` defined\n * by a `viewPlaneNormal` and a `viewUp`, get the width and height in world coordinates\n * of the rectangle defined by the two points. The implementation works both with orthogonal\n * non-orthogonal rectangles.\n *\n * @param viewPlaneNormal - The normal of the view.\n * @param viewUp - The up direction of the view.\n * @param imageVolume - The imageVolume to use to measure.\n * @param topLeftWorld - The first world position.\n * @param bottomRightWorld - The second world position.\n *\n * @returns The `worldWidth` and `worldHeight`.\n */\nexport default function getWorldWidthAndHeightFromCorners(\n  viewPlaneNormal: Types.Point3,\n  viewUp: Types.Point3,\n  topLeftWorld: Types.Point3,\n  bottomRightWorld: Types.Point3\n): { worldWidth: number; worldHeight: number } {\n  const viewRight = vec3.create();\n\n  vec3.cross(viewRight, <vec3>viewUp, <vec3>viewPlaneNormal);\n\n  const pos1 = vec3.fromValues(...topLeftWorld);\n  const pos2 = vec3.fromValues(...bottomRightWorld);\n\n  const diagonal = vec3.create();\n  vec3.subtract(diagonal, pos1, pos2);\n\n  const diagonalLength = vec3.length(diagonal);\n\n  // When the two points are very close to each other return width as 0\n  // to avoid NaN the cosTheta formula calculation\n  if (diagonalLength < 0.0001) {\n    return { worldWidth: 0, worldHeight: 0 };\n  }\n\n  const cosTheta =\n    vec3.dot(diagonal, viewRight) / (diagonalLength * vec3.length(viewRight));\n\n  const sinTheta = Math.sqrt(1 - cosTheta * cosTheta);\n\n  const worldWidth = sinTheta * diagonalLength;\n  const worldHeight = cosTheta * diagonalLength;\n\n  return { worldWidth, worldHeight };\n}\n","import vtkMath from '@kitware/vtk.js/Common/Core/Math';\nimport { utilities as csUtils } from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n/**\n * Returns a point based on some criteria (e.g., minimum or maximum intensity) in\n * the line of sight (on the line between the passed worldPosition and camera position).\n * It iterated over the points with a step size on the line.\n *\n * @param viewport - Volume viewport\n * @param worldPos - World coordinates of the clicked location\n * @param targetVolumeId - target Volume ID in the viewport\n * @param criteriaFunction - A function that returns the point if it passes a certain\n * written logic, for instance, it can be a maxValue function that keeps the\n * records of all intensity values, and only return the point if its intensity\n * is greater than the maximum intensity of the points passed before.\n * @param stepsSize - Percentage of the spacing in the normal direction, default value\n * is 0.25 which means steps = 1/4 of the spacing in the normal direction.\n * @returns the World pos of the point that passes the criteriaFunction\n */\nexport default function getPointInLineOfSightWithCriteria(\n  viewport: Types.IVolumeViewport,\n  worldPos: Types.Point3,\n  targetVolumeId: string,\n  criteriaFunction: (intensity: number, point: Types.Point3) => Types.Point3,\n  stepSize = 0.25\n): Types.Point3 {\n  // 1. Getting the camera from the event details\n  const camera = viewport.getCamera();\n  const { position: cameraPosition } = camera;\n\n  // 2. Calculating the spacing in the normal direction, this will get\n  // used as the step size for iterating over the points in the line of sight\n  const { spacingInNormalDirection } =\n    csUtils.getTargetVolumeAndSpacingInNormalDir(\n      viewport,\n      camera,\n      targetVolumeId\n    );\n  // 2.1 Making sure, we are not missing any point\n  const step = spacingInNormalDirection * stepSize;\n\n  // 3. Getting the bounds of the viewports. Search for brightest point is\n  // limited to the visible bound\n  // Todo: this might be a problem since bounds will change to spatial bounds.\n  const bounds = viewport.getBounds();\n  const xMin = bounds[0];\n  const xMax = bounds[1];\n\n  // 5. Calculating the line, we use a parametric line definition\n  const vector = <Types.Point3>[0, 0, 0];\n\n  // 5.1 Point coordinate on the line\n  let point = <Types.Point3>[0, 0, 0];\n\n  // 5.2 Calculating the line direction, and storing in vector\n  vtkMath.subtract(worldPos, cameraPosition, vector);\n\n  let pickedPoint;\n\n  // 6. Iterating over the line from the lower bound to the upper bound, with the\n  // specified step size\n  for (let pointT = xMin; pointT <= xMax; pointT = pointT + step) {\n    // 6.1 Calculating the point x location\n    point = [pointT, 0, 0];\n    // 6.2 Calculating the point y,z location based on the line equation\n    const t = (pointT - cameraPosition[0]) / vector[0];\n    point[1] = t * vector[1] + cameraPosition[1];\n    point[2] = t * vector[2] + cameraPosition[2];\n\n    // 6.3 Checking if the points is inside the bounds\n    if (_inBounds(point, bounds)) {\n      // 6.4 Getting the intensity of the point\n      const intensity = viewport.getIntensityFromWorld(point);\n      // 6.5 Passing the intensity to the maximum value functions which decides\n      // whether the current point is of interest based on some criteria\n      const pointToPick = criteriaFunction(intensity, point);\n      if (pointToPick) {\n        pickedPoint = pointToPick;\n      }\n    }\n  }\n\n  return pickedPoint;\n}\n\n/**\n * Returns whether the point in the world is inside the bounds of the viewport\n * @param point - coordinates in the world\n * @returns boolean\n */\nconst _inBounds = function (\n  point: Types.Point3,\n  bounds: Array<number>\n): boolean {\n  const [xMin, xMax, yMin, yMax, zMin, zMax] = bounds;\n  return (\n    point[0] > xMin &&\n    point[0] < xMax &&\n    point[1] > yMin &&\n    point[1] < yMax &&\n    point[2] > zMin &&\n    point[2] < zMax\n  );\n};\n","import filterAnnotationsWithinSlice from './filterAnnotationsWithinSlice';\nimport getWorldWidthAndHeightFromCorners from './getWorldWidthAndHeightFromCorners';\nimport filterAnnotationsForDisplay from './filterAnnotationsForDisplay';\nimport getPointInLineOfSightWithCriteria from './getPointInLineOfSightWithCriteria';\n\nexport default {\n  filterAnnotationsWithinSlice,\n  getWorldWidthAndHeightFromCorners,\n  filterAnnotationsForDisplay,\n  getPointInLineOfSightWithCriteria,\n};\n\nexport {\n  filterAnnotationsWithinSlice,\n  getWorldWidthAndHeightFromCorners,\n  filterAnnotationsForDisplay,\n  getPointInLineOfSightWithCriteria,\n};\n","import { VolumeViewport } from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\nimport { vec3 } from 'gl-matrix';\n\n// Todo: merge this utility functionality with Crosshair _jump\n/**\n * Uses the viewport's current camera to jump to a specific world coordinate\n * @param enabledElement - enabled element\n * @param jumpWorld - location in the world to jump to\n * @returns True if successful\n */\nexport default function jumpToWorld(\n  viewport: Types.IVolumeViewport,\n  jumpWorld: Types.Point3\n): true | undefined {\n  // if not instance of volumeViewport, return\n  if (!(viewport instanceof VolumeViewport)) {\n    return;\n  }\n\n  const { focalPoint } = viewport.getCamera();\n\n  const delta: Types.Point3 = [0, 0, 0];\n  vec3.sub(delta, jumpWorld, focalPoint);\n\n  _applyShift(viewport, delta);\n\n  return true;\n}\n\nfunction _applyShift(viewport, delta) {\n  const camera = viewport.getCamera();\n  const normal = camera.viewPlaneNormal;\n\n  const dotProd = vec3.dot(delta, normal);\n  const projectedDelta = vec3.fromValues(normal[0], normal[1], normal[2]);\n\n  vec3.scale(projectedDelta, projectedDelta, dotProd);\n\n  if (\n    Math.abs(projectedDelta[0]) > 1e-3 ||\n    Math.abs(projectedDelta[1]) > 1e-3 ||\n    Math.abs(projectedDelta[2]) > 1e-3\n  ) {\n    const newFocalPoint: Types.Point3 = [0, 0, 0];\n    const newPosition: Types.Point3 = [0, 0, 0];\n\n    vec3.add(newFocalPoint, camera.focalPoint, projectedDelta);\n    vec3.add(newPosition, camera.position, projectedDelta);\n\n    viewport.setCamera({\n      focalPoint: newFocalPoint,\n      position: newPosition,\n    });\n    viewport.render();\n  }\n}\n","import { BaseTool } from './base';\nimport { getEnabledElement, VolumeViewport } from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\nimport { getPointInLineOfSightWithCriteria } from '../utilities/planar';\nimport jumpToWorld from '../utilities/viewport/jumpToWorld';\nimport { PublicToolProps, ToolProps } from '../types';\nimport { getToolGroupForViewport } from '../store/ToolGroupManager';\n\n/**\n * On a Maximum Intensity Projection (MIP) viewport, MIPJumpToClickTool allows the\n * user to click on a point in the MIP and the targetViewportIdS (provided in the\n * tool configuration) will be scrolled (jumped) to the location of the point with\n * the highest intensity value in the MIP.\n */\nclass MIPJumpToClickTool extends BaseTool {\n  static toolName;\n\n  _bounds: any;\n\n  constructor(\n    toolProps: PublicToolProps = {},\n    defaultToolProps: ToolProps = {\n      supportedInteractionTypes: ['Mouse', 'Touch'],\n      configuration: {\n        targetViewportIds: [],\n      },\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n  }\n\n  /**\n   * Handles the click event, and move the camera's focal point the brightest\n   * point that is in the line of sight of camera. This function 1) search for the\n   * brightest point in the line of sight, 2) move the camera to that point,\n   * this triggers a cameraModified event which then 4) moves all other synced\n   * viewports and their crosshairs.\n   *\n   * @param evt - click event\n   */\n  mouseClickCallback(evt): void {\n    const { element, currentPoints } = evt.detail;\n\n    // 1. Getting the enabled element\n    const enabledElement = getEnabledElement(element);\n    const { viewport, renderingEngine } = enabledElement;\n\n    // 2. Getting the target volume that is clicked on\n    const targetId = this.getTargetId(viewport as Types.IVolumeViewport);\n\n    if (!targetId.startsWith('volumeId')) {\n      throw new Error(\n        `MIPJumpToClickTool: targetId is not a volumeId, you should only use MIPJumpToClickTool with a volumeId as the targetId`\n      );\n    }\n\n    const volumeId = targetId.split('volumeId:')[1];\n\n    // 3. Criteria function to search for the point (maximum intensity)\n    let maxIntensity = -Infinity;\n    const maxFn = (intensity, point) => {\n      if (intensity > maxIntensity) {\n        maxIntensity = intensity;\n        return point;\n      }\n    };\n\n    // 4. Search for the brightest point location in the line of sight\n    const brightestPoint = getPointInLineOfSightWithCriteria(\n      viewport as Types.IVolumeViewport,\n      currentPoints.world,\n      volumeId,\n      maxFn\n    );\n\n    if (!brightestPoint || !brightestPoint.length) {\n      return;\n    }\n\n    const { targetViewportIds, toolGroupId } = this.configuration;\n    // TODO - consider making this a utility\n    const viewports = renderingEngine.getViewports().filter((vp) => {\n      if (targetViewportIds?.indexOf(vp.id) >= 0) {\n        return true;\n      }\n      const foundToolGroup = getToolGroupForViewport(vp.id, renderingEngine.id);\n      if (toolGroupId && toolGroupId === foundToolGroup?.id) {\n        return true;\n      }\n      return false;\n    });\n\n    // 6. Update all the targetedViewports to jump\n    viewports.forEach((viewport) => {\n      // Todo: current limitation is that we cannot jump in viewports\n      // that don't belong to the renderingEngine of the source clicked viewport\n      if (viewport instanceof VolumeViewport) {\n        jumpToWorld(viewport, brightestPoint);\n      } else {\n        console.warn(\n          'Cannot jump to specified world coordinates for a viewport that is not a VolumeViewport'\n        );\n      }\n    });\n  }\n}\n\nMIPJumpToClickTool.toolName = 'MIPJumpToClickTool';\nexport default MIPJumpToClickTool;\n","import type { Types } from '@cornerstonejs/core';\n\n/**\n * Given an array of viewports, returns a list of viewports that are viewing a\n * world space with the given `FrameOfReferenceUID`.\n *\n * @param viewports - An array of viewports.\n * @param FrameOfReferenceUID - The UID defining a particular world space/Frame Of Reference.\n *\n * @returns A filtered array of viewports.\n */\nexport default function filterViewportsWithFrameOfReferenceUID(\n  viewports: Array<Types.IViewport>,\n  FrameOfReferenceUID: string\n): Array<Types.IStackViewport | Types.IVolumeViewport> {\n  const numViewports = viewports.length;\n  const viewportsWithFrameOfReferenceUID = [];\n\n  for (let vp = 0; vp < numViewports; vp++) {\n    const viewport = viewports[vp];\n\n    if (viewport.getFrameOfReferenceUID() === FrameOfReferenceUID) {\n      viewportsWithFrameOfReferenceUID.push(viewport);\n    }\n  }\n\n  return viewportsWithFrameOfReferenceUID;\n}\n","import type { Types } from '@cornerstonejs/core';\nimport type { IToolGroup } from '../../types';\nimport { ToolGroupManager } from '../../store';\nimport { ToolModes } from '../../enums';\n\nconst { Active, Passive, Enabled } = ToolModes;\n\n/**\n * Given an array of viewports, returns a list of viewports that have the the specified tool enabled.\n *\n * @param viewports - An array of viewports.\n * @param toolName - The name of the tool to filter on.\n *\n * @returns A filtered array of viewports.\n */\nexport default function filterViewportsWithToolEnabled(\n  viewports: Array<Types.IViewport>,\n  toolName: string\n): Array<Types.IStackViewport | Types.IVolumeViewport> {\n  const numViewports = viewports.length;\n\n  const viewportsWithToolEnabled = [];\n\n  for (let vp = 0; vp < numViewports; vp++) {\n    const viewport = viewports[vp];\n\n    const toolGroup = ToolGroupManager.getToolGroupForViewport(\n      viewport.id,\n      viewport.renderingEngineId\n    );\n\n    if (!toolGroup) {\n      continue;\n    }\n\n    const hasTool = _toolGroupHasActiveEnabledOrPassiveTool(\n      toolGroup,\n      toolName\n    );\n\n    if (hasTool) {\n      viewportsWithToolEnabled.push(viewport);\n    }\n  }\n\n  return viewportsWithToolEnabled;\n}\n\n/**\n * Given a toolGroup, return true if it contains the tool with the given `toolName` and it is\n * active, passive or enabled.\n *\n * @param toolGroup - The `toolGroup` to check.\n * @param toolName - The name of the tool.\n *\n * @returns True if the tool is enabled, passive or active in the `toolGroup`.\n */\nfunction _toolGroupHasActiveEnabledOrPassiveTool(\n  toolGroup: IToolGroup,\n  toolName: string\n) {\n  const { toolOptions } = toolGroup;\n  const tool = toolOptions[toolName];\n\n  if (!tool) {\n    return false;\n  }\n\n  const toolMode = tool.mode;\n\n  return toolMode === Active || toolMode === Passive || toolMode === Enabled;\n}\n","import { vec3 } from 'gl-matrix';\n\n/**\n * It filters the viewports that are looking in the same view as the camera\n * It basically checks if the viewPlaneNormal is parallel to the camera viewPlaneNormal\n * @param viewports - Array of viewports to filter\n * @param camera - Camera to compare against\n * @returns - Array of viewports with the same view\n */\nexport function filterViewportsWithParallelNormals(\n  viewports,\n  camera,\n  EPS = 0.999\n) {\n  return viewports.filter((viewport) => {\n    const vpCamera = viewport.getCamera();\n\n    const isParallel =\n      Math.abs(vec3.dot(vpCamera.viewPlaneNormal, camera.viewPlaneNormal)) >\n      EPS;\n\n    return isParallel;\n  });\n}\n\nexport default filterViewportsWithParallelNormals;\n","import { getEnabledElement } from '@cornerstonejs/core';\nimport filterViewportsWithFrameOfReferenceUID from './filterViewportsWithFrameOfReferenceUID';\nimport filterViewportsWithToolEnabled from './filterViewportsWithToolEnabled';\nimport filterViewportsWithParallelNormals from './filterViewportsWithParallelNormals';\n\n/**\n * Given a cornerstone3D enabled `element`, and a `toolName`, find all viewportIds\n * looking at the same Frame Of Reference that have the tool with the given `toolName`\n * active, passive or enabled.\n *\n * @param element - The target cornerstone3D enabled element.\n * @param toolName - The string toolName.\n * @param requireParallelNormals - If true, only return viewports that have parallel normals.\n *\n * @returns An array of viewportIds.\n */\nexport default function getViewportIdsWithToolToRender(\n  element: HTMLDivElement,\n  toolName: string,\n  requireParallelNormals = true\n): string[] {\n  const enabledElement = getEnabledElement(element);\n  const { renderingEngine, FrameOfReferenceUID } = enabledElement;\n\n  let viewports = renderingEngine.getViewports();\n\n  viewports = filterViewportsWithFrameOfReferenceUID(\n    viewports,\n    FrameOfReferenceUID\n  );\n  viewports = filterViewportsWithToolEnabled(viewports, toolName);\n\n  const viewport = renderingEngine.getViewport(enabledElement.viewportId);\n\n  if (requireParallelNormals) {\n    viewports = filterViewportsWithParallelNormals(\n      viewports,\n      viewport.getCamera()\n    );\n  }\n\n  const viewportIds = viewports.map((vp) => vp.id);\n\n  return viewportIds;\n}\n","// Pulled from source: https://github.com/w8r/liang-barsky\n// MIT Licensed.\n\n/**\n * Fast, destructive implementation of Liang-Barsky line clipping algorithm.\n * It clips a 2D segment by a rectangle.\n * @author Alexander Milevski <info@w8r.name>\n * @license MIT\n */\n\nconst EPSILON = 1e-6;\nconst INSIDE = 1;\nconst OUTSIDE = 0;\n\nfunction clipT(num, denom, c) {\n  const [tE, tL] = c;\n  if (Math.abs(denom) < EPSILON) {\n    return num < 0;\n  }\n  const t = num / denom;\n\n  if (denom > 0) {\n    if (t > tL) {\n      return 0;\n    }\n    if (t > tE) {\n      c[0] = t;\n    }\n  } else {\n    if (t < tE) {\n      return 0;\n    }\n    if (t < tL) {\n      c[1] = t;\n    }\n  }\n  return 1;\n}\n\n/**\n * @param  {Point} a\n * @param  {Point} b\n * @param  {BoundingBox} box [xmin, ymin, xmax, ymax]\n * @param  {Point?} [da]\n * @param  {Point?} [db]\n * @return {number}\n */\nexport default function clip(a, b, box, da?, db?) {\n  const [x1, y1] = a;\n  const [x2, y2] = b;\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n\n  if (da === undefined || db === undefined) {\n    da = a;\n    db = b;\n  } else {\n    da[0] = a[0];\n    da[1] = a[1];\n    db[0] = b[0];\n    db[1] = b[1];\n  }\n\n  if (\n    Math.abs(dx) < EPSILON &&\n    Math.abs(dy) < EPSILON &&\n    x1 >= box[0] &&\n    x1 <= box[2] &&\n    y1 >= box[1] &&\n    y1 <= box[3]\n  ) {\n    return INSIDE;\n  }\n\n  const c = [0, 1];\n  if (\n    clipT(box[0] - x1, dx, c) &&\n    clipT(x1 - box[2], -dx, c) &&\n    clipT(box[1] - y1, dy, c) &&\n    clipT(y1 - box[3], -dy, c)\n  ) {\n    const [tE, tL] = c;\n    if (tL < 1) {\n      db[0] = x1 + tL * dx;\n      db[1] = y1 + tL * dy;\n    }\n    if (tE > 0) {\n      da[0] += tE * dx;\n      da[1] += tE * dy;\n    }\n    return INSIDE;\n  }\n  return OUTSIDE;\n}\n","import { Types } from '@cornerstonejs/core';\n\nfunction dist2(p1: Types.Point2, p2: Types.Point2): number {\n  return (p1[0] - p2[0]) * (p1[0] - p2[0]) + (p1[1] - p2[1]) * (p1[1] - p2[1]);\n}\n\n/**\n * Calculates the distance-squared of a point to a line\n *\n * @param lineStart - x,y coordinates of the start of the line\n * @param lineEnd - x,y coordinates of the end of the line\n * @param point - x,y of the point\n * @returns distance-squared\n */\nexport default function distanceToPointSquared(\n  lineStart: Types.Point2,\n  lineEnd: Types.Point2,\n  point: Types.Point2\n): number {\n  const d2 = dist2(lineStart, lineEnd);\n\n  if (d2 === 0) {\n    return dist2(point, lineStart);\n  }\n\n  const t =\n    ((point[0] - lineStart[0]) * (lineEnd[0] - lineStart[0]) +\n      (point[1] - lineStart[1]) * (lineEnd[1] - lineStart[1])) /\n    d2;\n\n  if (t < 0) {\n    return dist2(point, lineStart);\n  }\n  if (t > 1) {\n    return dist2(point, lineEnd);\n  }\n\n  const pt: Types.Point2 = [\n    lineStart[0] + t * (lineEnd[0] - lineStart[0]),\n    lineStart[1] + t * (lineEnd[1] - lineStart[1]),\n  ];\n\n  return dist2(point, pt);\n}\n","import distanceToPointSquared from './distanceToPointSquared';\nimport type { Types } from '@cornerstonejs/core';\n\n/**\n * Calculates the distance of a point to a line\n *\n * @param lineStart - x,y coordinates of the start of the line\n * @param lineEnd - x,y coordinates of the end of the line\n * @param point - x,y of the point\n * @returns distance\n */\nexport default function distanceToPoint(\n  lineStart: Types.Point2,\n  lineEnd: Types.Point2,\n  point: Types.Point2\n): number {\n  if (lineStart.length !== 2 || lineEnd.length !== 2 || point.length !== 2) {\n    throw Error(\n      'lineStart, lineEnd, and point should have 2 elements of [x, y]'\n    );\n  }\n\n  return Math.sqrt(distanceToPointSquared(lineStart, lineEnd, point));\n}\n","import type { Types } from '@cornerstonejs/core';\n\n// Returns sign of number\nfunction sign(x: any) {\n  return typeof x === 'number'\n    ? x\n      ? x < 0\n        ? -1\n        : 1\n      : x === x\n      ? 0\n      : NaN\n    : NaN;\n}\n\n/**\n * Calculates the intersection point between two lines in the 2D plane\n *\n * @param line1Start - x,y coordinates of the start of the first line\n * @param line1End - x,y coordinates of the end of the first line\n * @param line2Start - x,y coordinates of the start of the second line\n * @param line2End - x,y coordinates of the end of the second line\n * @returns [x,y] - point x,y of the point\n */\n\nexport default function intersectLine(\n  line1Start: Types.Point2,\n  line1End: Types.Point2,\n  line2Start: Types.Point2,\n  line2End: Types.Point2\n): number[] {\n  const [x1, y1] = line1Start;\n  const [x2, y2] = line1End;\n  const [x3, y3] = line2Start;\n  const [x4, y4] = line2End;\n\n  // Compute a1, b1, c1, where line joining points 1 and 2 is \"a1 x  +  b1 y  +  c1  =  0\"\n  const a1 = y2 - y1;\n  const b1 = x1 - x2;\n  const c1 = x2 * y1 - x1 * y2;\n\n  // Compute r3 and r4\n  const r3 = a1 * x3 + b1 * y3 + c1;\n  const r4 = a1 * x4 + b1 * y4 + c1;\n\n  /* Check signs of r3 and r4.  If both point 3 and point 4 lie on\n   * same side of line 1, the line segments do not intersect.\n   */\n\n  if (r3 !== 0 && r4 !== 0 && sign(r3) === sign(r4)) {\n    return;\n  }\n\n  // Compute a2, b2, c2\n  const a2 = y4 - y3;\n  const b2 = x3 - x4;\n  const c2 = x4 * y3 - x3 * y4;\n\n  // Compute r1 and r2\n  const r1 = a2 * x1 + b2 * y1 + c2;\n  const r2 = a2 * x2 + b2 * y2 + c2;\n\n  /* Check signs of r1 and r2.  If both point 1 and point 2 lie\n   * on same side of second line segment, the line segments do\n   * not intersect.\n   */\n\n  if (r1 !== 0 && r2 !== 0 && sign(r1) === sign(r2)) {\n    return;\n  }\n\n  /* Line segments intersect: compute intersection point.\n   */\n\n  const denom = a1 * b2 - a2 * b1;\n  let num;\n\n  /* The denom/2 is to get rounding instead of truncating.  It\n   * is added or subtracted to the numerator, depending upon the\n   * sign of the numerator.\n   */\n\n  num = b1 * c2 - b2 * c1;\n  const x = num / denom;\n\n  num = a2 * c1 - a1 * c2;\n  const y = num / denom;\n\n  const intersectionPoint = [x, y];\n\n  return intersectionPoint;\n}\n","import { vec2, vec3 } from 'gl-matrix';\nimport vtkMath from '@kitware/vtk.js/Common/Core/Math';\nimport vtkMatrixBuilder from '@kitware/vtk.js/Common/Core/MatrixBuilder';\n\nimport { AnnotationTool } from './base';\n\nimport {\n  getEnabledElementByIds,\n  getEnabledElement,\n  utilities as csUtils,\n  Enums,\n} from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\nimport {\n  getToolGroup,\n  getToolGroupForViewport,\n} from '../store/ToolGroupManager';\n\nimport {\n  addAnnotation,\n  getAnnotations,\n  removeAnnotation,\n} from '../stateManagement/annotation/annotationState';\n\nimport {\n  drawCircle as drawCircleSvg,\n  drawHandles as drawHandlesSvg,\n  drawLine as drawLineSvg,\n} from '../drawingSvg';\nimport { state } from '../store';\nimport { Events } from '../enums';\nimport { getViewportIdsWithToolToRender } from '../utilities/viewportFilters';\nimport {\n  resetElementCursor,\n  hideElementCursor,\n} from '../cursors/elementCursor';\nimport liangBarksyClip from '../utilities/math/vec2/liangBarksyClip';\n\nimport * as lineSegment from '../utilities/math/line';\nimport {\n  Annotation,\n  Annotations,\n  EventTypes,\n  ToolHandle,\n  PublicToolProps,\n  ToolProps,\n  InteractionTypes,\n  SVGDrawingHelper,\n} from '../types';\nimport { isAnnotationLocked } from '../stateManagement/annotation/annotationLocking';\nimport triggerAnnotationRenderForViewportIds from '../utilities/triggerAnnotationRenderForViewportIds';\nimport { CONSTANTS } from '@cornerstonejs/core';\n\nconst { RENDERING_DEFAULTS } = CONSTANTS;\n\n// TODO: nested config is weird\ninterface ToolConfiguration {\n  configuration?: {\n    getReferenceLineColor?: (viewportId: string) => string;\n    getReferenceLineControllable?: (viewportId: string) => boolean;\n    getReferenceLineDraggableRotatable?: (viewportId: string) => boolean;\n    getReferenceLineSlabThicknessControlsOn?: (viewportId: string) => boolean;\n    referenceLinesCenterGapRadius?: number;\n    shadow?: boolean;\n    autopan?: {\n      enabled: boolean;\n      panSize: number;\n    };\n    mobile?: {\n      enabled: boolean;\n      opacity: number;\n      handleRadius: number;\n    };\n  };\n}\n\ninterface CrosshairsAnnotation extends Annotation {\n  data: {\n    handles: {\n      rotationPoints: any[]; // rotation handles, used for rotation interactions\n      slabThicknessPoints: any[]; // slab thickness handles, used for setting the slab thickness\n      activeOperation: number | null; // 0 translation, 1 rotation handles, 2 slab thickness handles\n      toolCenter: Types.Point3;\n    };\n    activeViewportIds: string[]; // a list of the viewport ids connected to the reference lines being translated\n    viewportId: string;\n  };\n}\n\nfunction defaultReferenceLineColor() {\n  return 'rgb(0, 200, 0)';\n}\n\nfunction defaultReferenceLineControllable() {\n  return true;\n}\n\nfunction defaultReferenceLineDraggableRotatable() {\n  return true;\n}\n\nfunction defaultReferenceLineSlabThicknessControlsOn() {\n  return true;\n}\n\nconst OPERATION = {\n  DRAG: 1,\n  ROTATE: 2,\n  SLAB: 3,\n};\n\nconst EPSILON = 1e-3;\n\n/**\n * CrosshairsTool is a tool that provides reference lines between different viewports\n * of a toolGroup. Using crosshairs, you can jump to a specific location in one\n * viewport and the rest of the viewports in the toolGroup will be aligned to that location.\n * Crosshairs have grababble handles that can be used to rotate and translate the\n * reference lines. They can also be used to set the slab thickness of the viewports\n * by modifying the slab thickness handles.\n *\n */\nclass CrosshairsTool extends AnnotationTool {\n  static toolName;\n\n  toolCenter: Types.Point3 = [0, 0, 0]; // NOTE: it is assumed that all the active/linked viewports share the same crosshair center.\n  // This because the rotation operation rotates also all the other active/intersecting reference lines of the same angle\n  _getReferenceLineColor?: (viewportId: string) => string;\n  _getReferenceLineControllable?: (viewportId: string) => boolean;\n  _getReferenceLineDraggableRotatable?: (viewportId: string) => boolean;\n  _getReferenceLineSlabThicknessControlsOn?: (viewportId: string) => boolean;\n  editData: {\n    annotation: any;\n  } | null;\n\n  constructor(\n    toolProps: PublicToolProps = {},\n    defaultToolProps: ToolProps = {\n      supportedInteractionTypes: ['Mouse'],\n      configuration: {\n        shadow: true,\n        // renders a colored circle on top right of the viewports whose color\n        // matches the color of the reference line\n        viewportIndicators: true,\n        // Auto pan is a configuration which will update pan\n        // other viewports in the toolGroup if the center of the crosshairs\n        // is outside of the viewport. This might be useful for the case\n        // when the user is scrolling through an image (usually in the zoomed view)\n        // and the crosshairs will eventually get outside of the viewport for\n        // the other viewports.\n        autoPan: {\n          enabled: false,\n          panSize: 10,\n        },\n        // radius of the area around the intersection of the planes, in which\n        // the reference lines will not be rendered. This is only used when\n        // having 3 viewports in the toolGroup.\n        referenceLinesCenterGapRadius: 20,\n        // actorUIDs for slabThickness application, if not defined, the slab thickness\n        // will be applied to all actors of the viewport\n        filterActorUIDsToSetSlabThickness: [],\n        // blend mode for slabThickness modifications\n        slabThicknessBlendMode: Enums.BlendModes.MAXIMUM_INTENSITY_BLEND,\n        mobile: {\n          enabled: false,\n          opacity: 0.8,\n          handleRadius: 9,\n        },\n      },\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n\n    this._getReferenceLineColor =\n      toolProps.configuration?.getReferenceLineColor ||\n      defaultReferenceLineColor;\n    this._getReferenceLineControllable =\n      toolProps.configuration?.getReferenceLineControllable ||\n      defaultReferenceLineControllable;\n    this._getReferenceLineDraggableRotatable =\n      toolProps.configuration?.getReferenceLineDraggableRotatable ||\n      defaultReferenceLineDraggableRotatable;\n    this._getReferenceLineSlabThicknessControlsOn =\n      toolProps.configuration?.getReferenceLineSlabThicknessControlsOn ||\n      defaultReferenceLineSlabThicknessControlsOn;\n  }\n\n  /**\n   * Gets the camera from the viewport, and adds crosshairs annotation for the viewport\n   * to the annotationManager. If any annotation is found in the annotationManager, it\n   * overwrites it.\n   * @param viewportInfo - The viewportInfo for the viewport to add the crosshairs\n   * @returns viewPlaneNormal and center of viewport canvas in world space\n   */\n  initializeViewport = ({\n    renderingEngineId,\n    viewportId,\n  }: Types.IViewportId): {\n    normal: Types.Point3;\n    point: Types.Point3;\n  } => {\n    const enabledElement = getEnabledElementByIds(\n      viewportId,\n      renderingEngineId\n    );\n    const { FrameOfReferenceUID, viewport } = enabledElement;\n    const { element } = viewport;\n    const { position, focalPoint, viewPlaneNormal } = viewport.getCamera();\n\n    // Check if there is already annotation for this viewport\n    let annotations = this._getAnnotations(enabledElement);\n    annotations = this.filterInteractableAnnotationsForElement(\n      element,\n      annotations\n    );\n\n    if (annotations.length) {\n      // If found, it will override it by removing the annotation and adding it later\n      removeAnnotation(annotations[0].annotationUID);\n    }\n\n    const annotation = {\n      highlighted: false,\n      metadata: {\n        cameraPosition: <Types.Point3>[...position],\n        cameraFocalPoint: <Types.Point3>[...focalPoint],\n        FrameOfReferenceUID,\n        toolName: this.getToolName(),\n      },\n      data: {\n        handles: {\n          rotationPoints: [], // rotation handles, used for rotation interactions\n          slabThicknessPoints: [], // slab thickness handles, used for setting the slab thickness\n          toolCenter: this.toolCenter,\n        },\n        activeOperation: null, // 0 translation, 1 rotation handles, 2 slab thickness handles\n        activeViewportIds: [], // a list of the viewport ids connected to the reference lines being translated\n        viewportId,\n      },\n    };\n\n    addAnnotation(annotation, element);\n\n    return {\n      normal: viewPlaneNormal,\n      point: viewport.canvasToWorld([\n        viewport.canvas.clientWidth / 2,\n        viewport.canvas.clientHeight / 2,\n      ]),\n    };\n  };\n\n  _getViewportsInfo = () => {\n    const viewports = getToolGroup(this.toolGroupId).viewportsInfo;\n\n    return viewports;\n  };\n\n  onSetToolActive() {\n    const viewportsInfo = this._getViewportsInfo();\n\n    // Upon new setVolumes on viewports we need to update the crosshairs\n    // reference points in the new space, so we subscribe to the event\n    // and update the reference points accordingly.\n    this._unsubscribeToViewportNewVolumeSet(viewportsInfo);\n    this._subscribeToViewportNewVolumeSet(viewportsInfo);\n\n    this.computeToolCenter(viewportsInfo);\n  }\n\n  onSetToolPassive() {\n    const viewportsInfo = this._getViewportsInfo();\n\n    this.computeToolCenter(viewportsInfo);\n  }\n\n  onSetToolEnabled() {\n    const viewportsInfo = this._getViewportsInfo();\n\n    this.computeToolCenter(viewportsInfo);\n  }\n\n  onSetToolDisabled() {\n    const viewportsInfo = this._getViewportsInfo();\n\n    this._unsubscribeToViewportNewVolumeSet(viewportsInfo);\n\n    // Crosshairs annotations in the state\n    // has no value when the tool is disabled\n    // since viewports can change (zoom, pan, scroll)\n    // between disabled and enabled/active states.\n    // so we just remove the annotations from the state\n    viewportsInfo.forEach(({ renderingEngineId, viewportId }) => {\n      const enabledElement = getEnabledElementByIds(\n        viewportId,\n        renderingEngineId\n      );\n\n      if (!enabledElement) {\n        return;\n      }\n\n      const annotations = this._getAnnotations(enabledElement);\n\n      if (annotations?.length) {\n        annotations.forEach((annotation) => {\n          removeAnnotation(annotation.annotationUID);\n        });\n      }\n    });\n  }\n\n  /**\n   * When activated, it initializes the crosshairs. It begins by computing\n   * the intersection of viewports associated with the crosshairs instance.\n   * When all three views are accessible, the intersection (e.g., crosshairs tool centre)\n   * will be an exact point in space; however, with two viewports, because the\n   * intersection of two planes is a line, it assumes the last view is between the centre\n   * of the two rendering viewports.\n   * @param viewportsInfo Array of viewportInputs which each item containing {viewportId, renderingEngineId}\n   */\n  computeToolCenter = (viewportsInfo): void => {\n    if (!viewportsInfo.length || viewportsInfo.length === 1) {\n      throw new Error(\n        'For crosshairs to operate, at least two viewports must be given.'\n      );\n    }\n\n    // Todo: handle two same view viewport, or more than 3 viewports\n    const [firstViewport, secondViewport, thirdViewport] = viewportsInfo;\n\n    // Initialize first viewport\n    const { normal: normal1, point: point1 } =\n      this.initializeViewport(firstViewport);\n\n    // Initialize second viewport\n    const { normal: normal2, point: point2 } =\n      this.initializeViewport(secondViewport);\n\n    let normal3 = <Types.Point3>[0, 0, 0];\n    let point3 = vec3.create();\n\n    // If there are three viewports\n    if (thirdViewport) {\n      ({ normal: normal3, point: point3 } =\n        this.initializeViewport(thirdViewport));\n    } else {\n      // If there are only two views (viewport) associated with the crosshairs:\n      // In this situation, we don't have a third information to find the\n      // exact intersection, and we \"assume\" the third view is looking at\n      // a location in between the first and second view centers\n      vec3.add(point3, point1, point2);\n      vec3.scale(point3, point3, 0.5);\n      vec3.cross(normal3, normal1, normal2);\n    }\n\n    // Planes of each viewport\n    const firstPlane = csUtils.planar.planeEquation(normal1, point1);\n    const secondPlane = csUtils.planar.planeEquation(normal2, point2);\n    const thirdPlane = csUtils.planar.planeEquation(normal3, point3);\n\n    // Calculating the intersection of 3 planes\n    // prettier-ignore\n    this.toolCenter = csUtils.planar.threePlaneIntersection(firstPlane, secondPlane, thirdPlane)\n\n    // assuming all viewports are in the same rendering engine\n    const { renderingEngine } = getEnabledElementByIds(\n      viewportsInfo[0].viewportId,\n      viewportsInfo[0].renderingEngineId\n    );\n\n    triggerAnnotationRenderForViewportIds(\n      renderingEngine,\n      viewportsInfo.map(({ viewportId }) => viewportId)\n    );\n  };\n\n  /**\n   * addNewAnnotation acts as jump for the crosshairs tool. It is called when\n   * the user clicks on the image. It does not store the annotation in the stateManager though.\n   *\n   * @param evt - The mouse event\n   * @param interactionType - The type of interaction (e.g., mouse, touch, etc.)\n   * @returns Crosshairs annotation\n   */\n  addNewAnnotation = (\n    evt: EventTypes.InteractionEventType\n  ): CrosshairsAnnotation => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    const { currentPoints } = eventDetail;\n    const jumpWorld = currentPoints.world;\n\n    const enabledElement = getEnabledElement(element);\n    const { viewport } = enabledElement;\n    this._jump(enabledElement, jumpWorld);\n\n    const annotations = this._getAnnotations(enabledElement);\n    const filteredAnnotations = this.filterInteractableAnnotationsForElement(\n      viewport.element,\n      annotations\n    );\n\n    // viewport Annotation\n    const { data } = filteredAnnotations[0];\n\n    const { rotationPoints } = data.handles;\n    const viewportIdArray = [];\n    // put all the draggable reference lines in the viewportIdArray\n    for (let i = 0; i < rotationPoints.length - 1; ++i) {\n      const otherViewport = rotationPoints[i][1];\n      const viewportControllable = this._getReferenceLineControllable(\n        otherViewport.id\n      );\n      const viewportDraggableRotatable =\n        this._getReferenceLineDraggableRotatable(otherViewport.id);\n      if (!viewportControllable || !viewportDraggableRotatable) {\n        continue;\n      }\n      viewportIdArray.push(otherViewport.id);\n      // rotation handles are two per viewport\n      i++;\n    }\n\n    data.activeViewportIds = [...viewportIdArray];\n    // set translation operation\n    data.handles.activeOperation = OPERATION.DRAG;\n\n    evt.preventDefault();\n\n    hideElementCursor(element);\n\n    this._activateModify(element);\n    return filteredAnnotations[0];\n  };\n\n  cancel = () => {\n    console.log('Not implemented yet');\n  };\n\n  /**\n   * It checks if the mouse click is near crosshairs handles, if yes\n   * it returns the handle location. If the mouse click is not near any\n   * of the handles, it does not return anything.\n   *\n   * @param element - The element that the tool is attached to.\n   * @param annotation - The annotation object associated with the annotation\n   * @param canvasCoords - The coordinates of the mouse click on canvas\n   * @param proximity - The distance from the mouse cursor to the point\n   * that is considered \"near\".\n   * @returns The handle that is closest to the cursor, or null if the cursor\n   * is not near any of the handles.\n   */\n  getHandleNearImagePoint(\n    element: HTMLDivElement,\n    annotation: Annotation,\n    canvasCoords: Types.Point2,\n    proximity: number\n  ): ToolHandle | undefined {\n    const enabledElement = getEnabledElement(element);\n    const { viewport } = enabledElement;\n\n    let point = this._getRotationHandleNearImagePoint(\n      viewport,\n      annotation,\n      canvasCoords,\n      proximity\n    );\n\n    if (point !== null) {\n      return point;\n    }\n\n    point = this._getSlabThicknessHandleNearImagePoint(\n      viewport,\n      annotation,\n      canvasCoords,\n      proximity\n    );\n\n    if (point !== null) {\n      return point;\n    }\n  }\n\n  handleSelectedCallback = (\n    evt: EventTypes.InteractionEventType,\n    annotation: Annotation\n  ): void => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n    annotation.highlighted = true;\n\n    // NOTE: handle index or coordinates are not used when dragging.\n    // This because the handle points are actually generated in the renderTool and they are a derivative\n    // from the camera variables of the viewports and of the slab thickness variable.\n    // Remember that the translation and rotation operations operate on the camera\n    // variables and not really on the handles. Similar for the slab thickness.\n    this._activateModify(element);\n\n    hideElementCursor(element);\n\n    evt.preventDefault();\n  };\n\n  /**\n   * It returns if the canvas point is near the provided crosshairs annotation in the\n   * provided element or not. A proximity is passed to the function to determine the\n   * proximity of the point to the annotation in number of pixels.\n   *\n   * @param element - HTML Element\n   * @param annotation - Annotation\n   * @param canvasCoords - Canvas coordinates\n   * @param proximity - Proximity to tool to consider\n   * @returns Boolean, whether the canvas point is near tool\n   */\n  isPointNearTool = (\n    element: HTMLDivElement,\n    annotation: CrosshairsAnnotation,\n    canvasCoords: Types.Point2,\n    proximity: number\n  ): boolean => {\n    if (this._pointNearTool(element, annotation, canvasCoords, 6)) {\n      return true;\n    }\n\n    return false;\n  };\n\n  toolSelectedCallback = (\n    evt: EventTypes.InteractionEventType,\n    annotation: Annotation,\n    interactionType: InteractionTypes\n  ): void => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n    annotation.highlighted = true;\n    this._activateModify(element);\n\n    hideElementCursor(element);\n\n    evt.preventDefault();\n  };\n\n  onCameraModified = (evt) => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n    const viewport = enabledElement.viewport as Types.IVolumeViewport;\n\n    const annotations = this._getAnnotations(enabledElement);\n    const filteredToolAnnotations =\n      this.filterInteractableAnnotationsForElement(element, annotations);\n\n    // viewport that the camera modified is originating from\n    const viewportAnnotation =\n      filteredToolAnnotations[0] as CrosshairsAnnotation;\n\n    if (!viewportAnnotation) {\n      return;\n    }\n\n    // -- Update the camera of other linked viewports containing the same volumeId that\n    //    have the same camera in case of translation\n    // -- Update the crosshair center in world coordinates in annotation.\n    // This is necessary because other tools can modify the position of the slices,\n    // e.g. stackScroll tool at wheel scroll. So we update the coordinates of the center always here.\n    // NOTE: rotation and slab thickness handles are created/updated in renderTool.\n    const currentCamera = viewport.getCamera();\n    const oldCameraPosition = viewportAnnotation.metadata.cameraPosition;\n    const deltaCameraPosition: Types.Point3 = [0, 0, 0];\n    vtkMath.subtract(\n      currentCamera.position,\n      oldCameraPosition,\n      deltaCameraPosition\n    );\n\n    const oldCameraFocalPoint = viewportAnnotation.metadata.cameraFocalPoint;\n    const deltaCameraFocalPoint: Types.Point3 = [0, 0, 0];\n    vtkMath.subtract(\n      currentCamera.focalPoint,\n      oldCameraFocalPoint,\n      deltaCameraFocalPoint\n    );\n\n    // updated cached \"previous\" camera position and focal point\n    viewportAnnotation.metadata.cameraPosition = [...currentCamera.position];\n    viewportAnnotation.metadata.cameraFocalPoint = [\n      ...currentCamera.focalPoint,\n    ];\n\n    const viewportControllable = this._getReferenceLineControllable(\n      viewport.id\n    );\n    const viewportDraggableRotatable = this._getReferenceLineDraggableRotatable(\n      viewport.id\n    );\n    if (\n      !csUtils.isEqual(currentCamera.position, oldCameraPosition, 1e-3) &&\n      viewportControllable &&\n      viewportDraggableRotatable\n    ) {\n      // Is camera Modified a TRANSLATION or ROTATION?\n      let isRotation = false;\n\n      // This is guaranteed to be the same diff for both position and focal point\n      // if the camera is modified by pan, zoom, or scroll BUT for rotation of\n      // crosshairs handles it will be different.\n      const cameraModifiedSameForPosAndFocalPoint = csUtils.isEqual(\n        deltaCameraPosition,\n        deltaCameraFocalPoint,\n        1e-3\n      );\n\n      // NOTE: it is a translation if the the focal point and camera position shifts are the same\n      if (!cameraModifiedSameForPosAndFocalPoint) {\n        isRotation = true;\n      }\n\n      const cameraModifiedInPlane =\n        Math.abs(\n          vtkMath.dot(deltaCameraPosition, currentCamera.viewPlaneNormal)\n        ) < 1e-2;\n\n      // TRANSLATION\n      // NOTE1: if the camera modified is a result of a pan or zoom don't update the crosshair center\n      // NOTE2: rotation handles are updates in renderTool\n      if (!isRotation && !cameraModifiedInPlane) {\n        this.toolCenter[0] += deltaCameraPosition[0];\n        this.toolCenter[1] += deltaCameraPosition[1];\n        this.toolCenter[2] += deltaCameraPosition[2];\n      }\n    }\n\n    // AutoPan modification\n    if (this.configuration.autoPan?.enabled) {\n      const toolGroup = getToolGroupForViewport(\n        viewport.id,\n        renderingEngine.id\n      );\n\n      const otherViewportIds = toolGroup\n        .getViewportIds()\n        .filter((id) => id !== viewport.id);\n\n      otherViewportIds.forEach((viewportId) => {\n        this._autoPanViewportIfNecessary(viewportId, renderingEngine);\n      });\n    }\n\n    const requireSameOrientation = false;\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName(),\n      requireSameOrientation\n    );\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n  };\n\n  mouseMoveCallback = (\n    evt: EventTypes.MouseMoveEventType,\n    filteredToolAnnotations: Annotations\n  ): boolean => {\n    const { element, currentPoints } = evt.detail;\n    const canvasCoords = currentPoints.canvas;\n    let imageNeedsUpdate = false;\n\n    for (let i = 0; i < filteredToolAnnotations.length; i++) {\n      const annotation = filteredToolAnnotations[i] as CrosshairsAnnotation;\n\n      if (isAnnotationLocked(annotation)) {\n        continue;\n      }\n\n      const { data, highlighted } = annotation;\n      if (!data.handles) {\n        continue;\n      }\n\n      const previousActiveOperation = data.handles.activeOperation;\n      const previousActiveViewportIds =\n        data.activeViewportIds && data.activeViewportIds.length > 0\n          ? [...data.activeViewportIds]\n          : [];\n\n      // This init are necessary, because when we move the mouse they are not cleaned by _endCallback\n      data.activeViewportIds = [];\n      data.handles.activeOperation = null;\n\n      const handleNearImagePoint = this.getHandleNearImagePoint(\n        element,\n        annotation,\n        canvasCoords,\n        6\n      );\n\n      let near = false;\n      if (handleNearImagePoint) {\n        near = true;\n      } else {\n        near = this._pointNearTool(element, annotation, canvasCoords, 6);\n      }\n\n      const nearToolAndNotMarkedActive = near && !highlighted;\n      const notNearToolAndMarkedActive = !near && highlighted;\n      if (nearToolAndNotMarkedActive || notNearToolAndMarkedActive) {\n        annotation.highlighted = !highlighted;\n        imageNeedsUpdate = true;\n      } else if (\n        data.handles.activeOperation !== previousActiveOperation ||\n        !this._areViewportIdArraysEqual(\n          data.activeViewportIds,\n          previousActiveViewportIds\n        )\n      ) {\n        imageNeedsUpdate = true;\n      }\n    }\n\n    return imageNeedsUpdate;\n  };\n\n  filterInteractableAnnotationsForElement = (element, annotations) => {\n    if (!annotations || !annotations.length) {\n      return [];\n    }\n\n    const enabledElement = getEnabledElement(element);\n    const { viewportId } = enabledElement;\n\n    const viewportUIDSpecificCrosshairs = annotations.filter(\n      (annotation) => annotation.data.viewportId === viewportId\n    );\n\n    return viewportUIDSpecificCrosshairs;\n  };\n\n  /**\n   * renders the crosshairs lines and handles in the requestAnimationFrame callback\n   *\n   * @param enabledElement - The Cornerstone's enabledElement.\n   * @param svgDrawingHelper - The svgDrawingHelper providing the context for drawing.\n   */\n  renderAnnotation = (\n    enabledElement: Types.IEnabledElement,\n    svgDrawingHelper: SVGDrawingHelper\n  ): boolean => {\n    let renderStatus = false;\n    const { viewport, renderingEngine } = enabledElement;\n    const { element } = viewport;\n    const annotations = this._getAnnotations(enabledElement);\n    const camera = viewport.getCamera();\n    const filteredToolAnnotations =\n      this.filterInteractableAnnotationsForElement(element, annotations);\n\n    // viewport Annotation\n    const viewportAnnotation = filteredToolAnnotations[0];\n    if (!annotations?.length || !viewportAnnotation?.data) {\n      // No annotations yet, and didn't just create it as we likely don't have a FrameOfReference/any data loaded yet.\n      return renderStatus;\n    }\n\n    const annotationUID = viewportAnnotation.annotationUID;\n\n    // Get cameras/canvases for each of these.\n    // -- Get two world positions for this canvas in this line (e.g. the diagonal)\n    // -- Convert these world positions to this canvas.\n    // -- Extend/confine this line to fit in this canvas.\n    // -- Render this line.\n    const { clientWidth, clientHeight } = viewport.canvas;\n    const canvasDiagonalLength = Math.sqrt(\n      clientWidth * clientWidth + clientHeight * clientHeight\n    );\n    const canvasMinDimensionLength = Math.min(clientWidth, clientHeight);\n\n    const data = viewportAnnotation.data;\n    const crosshairCenterCanvas = viewport.worldToCanvas(this.toolCenter);\n\n    const otherViewportAnnotations =\n      this._filterAnnotationsByUniqueViewportOrientations(\n        enabledElement,\n        annotations\n      );\n\n    const referenceLines = [];\n\n    // get canvas information for points and lines (canvas box, canvas horizontal distances)\n    const canvasBox = [0, 0, clientWidth, clientHeight];\n\n    otherViewportAnnotations.forEach((annotation) => {\n      const { data } = annotation;\n\n      data.handles.toolCenter = this.toolCenter;\n\n      const otherViewport = renderingEngine.getViewport(\n        data.viewportId\n      ) as Types.IVolumeViewport;\n\n      const otherCamera = otherViewport.getCamera();\n\n      const otherViewportControllable = this._getReferenceLineControllable(\n        otherViewport.id\n      );\n      const otherViewportDraggableRotatable =\n        this._getReferenceLineDraggableRotatable(otherViewport.id);\n      const otherViewportSlabThicknessControlsOn =\n        this._getReferenceLineSlabThicknessControlsOn(otherViewport.id);\n\n      // get coordinates for the reference line\n      const { clientWidth, clientHeight } = otherViewport.canvas;\n      const otherCanvasDiagonalLength = Math.sqrt(\n        clientWidth * clientWidth + clientHeight * clientHeight\n      );\n      const otherCanvasCenter: Types.Point2 = [\n        clientWidth * 0.5,\n        clientHeight * 0.5,\n      ];\n      const otherViewportCenterWorld =\n        otherViewport.canvasToWorld(otherCanvasCenter);\n\n      const direction: Types.Point3 = [0, 0, 0];\n      vtkMath.cross(\n        camera.viewPlaneNormal,\n        otherCamera.viewPlaneNormal,\n        direction\n      );\n      vtkMath.normalize(direction);\n      vtkMath.multiplyScalar(\n        <Types.Point3>direction,\n        otherCanvasDiagonalLength\n      );\n\n      const pointWorld0: Types.Point3 = [0, 0, 0];\n      vtkMath.add(otherViewportCenterWorld, direction, pointWorld0);\n\n      const pointWorld1: Types.Point3 = [0, 0, 0];\n      vtkMath.subtract(otherViewportCenterWorld, direction, pointWorld1);\n\n      const pointCanvas0 = viewport.worldToCanvas(pointWorld0);\n\n      const otherViewportCenterCanvas = viewport.worldToCanvas(\n        otherViewportCenterWorld\n      );\n\n      const canvasUnitVectorFromCenter = vec2.create();\n      vec2.subtract(\n        canvasUnitVectorFromCenter,\n        pointCanvas0,\n        otherViewportCenterCanvas\n      );\n      vec2.normalize(canvasUnitVectorFromCenter, canvasUnitVectorFromCenter);\n\n      // Graphic:\n      // Mid -> SlabThickness handle\n      // Short -> Rotation handle\n      //                           Long\n      //                            |\n      //                            |\n      //                            |\n      //                           Mid\n      //                            |\n      //                            |\n      //                            |\n      //                          Short\n      //                            |\n      //                            |\n      //                            |\n      // Long --- Mid--- Short--- Center --- Short --- Mid --- Long\n      //                            |\n      //                            |\n      //                            |\n      //                          Short\n      //                            |\n      //                            |\n      //                            |\n      //                           Mid\n      //                            |\n      //                            |\n      //                            |\n      //                           Long\n      const canvasVectorFromCenterLong = vec2.create();\n\n      vec2.scale(\n        canvasVectorFromCenterLong,\n        canvasUnitVectorFromCenter,\n        canvasDiagonalLength * 100\n      );\n      const canvasVectorFromCenterMid = vec2.create();\n      vec2.scale(\n        canvasVectorFromCenterMid,\n        canvasUnitVectorFromCenter,\n        // to maximize the visibility of the controls, they need to be\n        // placed at most at half the length of the shortest side of the canvas.\n        // Chosen 0.4 to have some margin to the edge.\n        canvasMinDimensionLength * 0.4\n      );\n      const canvasVectorFromCenterShort = vec2.create();\n      vec2.scale(\n        canvasVectorFromCenterShort,\n        canvasUnitVectorFromCenter,\n        // Chosen 0.2 because is half of 0.4.\n        canvasMinDimensionLength * 0.2\n      );\n      const canvasVectorFromCenterStart = vec2.create();\n      const centerGap = this.configuration.referenceLinesCenterGapRadius;\n      vec2.scale(\n        canvasVectorFromCenterStart,\n        canvasUnitVectorFromCenter,\n        // Don't put a gap if the the third view is missing\n        otherViewportAnnotations.length === 2 ? centerGap : 0\n      );\n\n      // Computing Reference start and end (4 lines per viewport in case of 3 view MPR)\n      const refLinePointOne = vec2.create();\n      const refLinePointTwo = vec2.create();\n      const refLinePointThree = vec2.create();\n      const refLinePointFour = vec2.create();\n\n      let refLinesCenter = vec2.clone(crosshairCenterCanvas);\n      if (!otherViewportDraggableRotatable || !otherViewportControllable) {\n        refLinesCenter = vec2.clone(otherViewportCenterCanvas);\n      }\n\n      vec2.add(refLinePointOne, refLinesCenter, canvasVectorFromCenterStart);\n      vec2.add(refLinePointTwo, refLinesCenter, canvasVectorFromCenterLong);\n      vec2.subtract(\n        refLinePointThree,\n        refLinesCenter,\n        canvasVectorFromCenterStart\n      );\n      vec2.subtract(\n        refLinePointFour,\n        refLinesCenter,\n        canvasVectorFromCenterLong\n      );\n\n      // Clipping lines to be only included in a box (canvas), we don't want\n      // the lines goes beyond canvas\n      liangBarksyClip(refLinePointOne, refLinePointTwo, canvasBox);\n      liangBarksyClip(refLinePointThree, refLinePointFour, canvasBox);\n\n      // Computing rotation handle positions\n      const rotHandleOne = vec2.create();\n      vec2.subtract(\n        rotHandleOne,\n        crosshairCenterCanvas,\n        canvasVectorFromCenterMid\n      );\n\n      const rotHandleTwo = vec2.create();\n      vec2.add(rotHandleTwo, crosshairCenterCanvas, canvasVectorFromCenterMid);\n\n      // Computing SlabThickness (st below) position\n\n      // SlabThickness center in canvas\n      let stHandlesCenterCanvas = vec2.clone(crosshairCenterCanvas);\n      if (\n        !otherViewportDraggableRotatable &&\n        otherViewportSlabThicknessControlsOn\n      ) {\n        stHandlesCenterCanvas = vec2.clone(otherViewportCenterCanvas);\n      }\n\n      // SlabThickness center in world\n      let stHandlesCenterWorld: Types.Point3 = [...this.toolCenter];\n      if (\n        !otherViewportDraggableRotatable &&\n        otherViewportSlabThicknessControlsOn\n      ) {\n        stHandlesCenterWorld = [...otherViewportCenterWorld];\n      }\n\n      const worldUnitVectorFromCenter: Types.Point3 = [0, 0, 0];\n      vtkMath.subtract(pointWorld0, pointWorld1, worldUnitVectorFromCenter);\n      vtkMath.normalize(worldUnitVectorFromCenter);\n\n      const { viewPlaneNormal } = camera;\n      // @ts-ignore // Todo: fix after vtk pr merged\n      const { matrix } = vtkMatrixBuilder\n        .buildFromDegree()\n        // @ts-ignore fix after vtk pr merged\n        .rotate(90, viewPlaneNormal);\n\n      const worldUnitOrthoVectorFromCenter: Types.Point3 = [0, 0, 0];\n      vec3.transformMat4(\n        worldUnitOrthoVectorFromCenter,\n        worldUnitVectorFromCenter,\n        matrix\n      );\n\n      const slabThicknessValue = otherViewport.getSlabThickness();\n      const worldOrthoVectorFromCenter: Types.Point3 = [\n        ...worldUnitOrthoVectorFromCenter,\n      ];\n      vtkMath.multiplyScalar(worldOrthoVectorFromCenter, slabThicknessValue);\n\n      const worldVerticalRefPoint: Types.Point3 = [0, 0, 0];\n      vtkMath.add(\n        stHandlesCenterWorld,\n        worldOrthoVectorFromCenter,\n        worldVerticalRefPoint\n      );\n\n      // convert vertical world distances in canvas coordinates\n      const canvasVerticalRefPoint = viewport.worldToCanvas(\n        worldVerticalRefPoint\n      );\n\n      // points for slab thickness lines\n      const canvasOrthoVectorFromCenter = vec2.create();\n      vec2.subtract(\n        canvasOrthoVectorFromCenter,\n        stHandlesCenterCanvas,\n        canvasVerticalRefPoint\n      );\n\n      const stLinePointOne = vec2.create();\n      vec2.subtract(\n        stLinePointOne,\n        stHandlesCenterCanvas,\n        canvasVectorFromCenterLong\n      );\n      vec2.add(stLinePointOne, stLinePointOne, canvasOrthoVectorFromCenter);\n\n      const stLinePointTwo = vec2.create();\n      vec2.add(\n        stLinePointTwo,\n        stHandlesCenterCanvas,\n        canvasVectorFromCenterLong\n      );\n      vec2.add(stLinePointTwo, stLinePointTwo, canvasOrthoVectorFromCenter);\n\n      liangBarksyClip(stLinePointOne, stLinePointTwo, canvasBox);\n\n      const stLinePointThree = vec2.create();\n      vec2.add(\n        stLinePointThree,\n        stHandlesCenterCanvas,\n        canvasVectorFromCenterLong\n      );\n      vec2.subtract(\n        stLinePointThree,\n        stLinePointThree,\n        canvasOrthoVectorFromCenter\n      );\n\n      const stLinePointFour = vec2.create();\n      vec2.subtract(\n        stLinePointFour,\n        stHandlesCenterCanvas,\n        canvasVectorFromCenterLong\n      );\n      vec2.subtract(\n        stLinePointFour,\n        stLinePointFour,\n        canvasOrthoVectorFromCenter\n      );\n\n      liangBarksyClip(stLinePointThree, stLinePointFour, canvasBox);\n\n      // points for slab thickness handles\n      const stHandleOne = vec2.create();\n      const stHandleTwo = vec2.create();\n      const stHandleThree = vec2.create();\n      const stHandleFour = vec2.create();\n\n      vec2.subtract(\n        stHandleOne,\n        stHandlesCenterCanvas,\n        canvasVectorFromCenterShort\n      );\n      vec2.add(stHandleOne, stHandleOne, canvasOrthoVectorFromCenter);\n      vec2.add(stHandleTwo, stHandlesCenterCanvas, canvasVectorFromCenterShort);\n      vec2.add(stHandleTwo, stHandleTwo, canvasOrthoVectorFromCenter);\n      vec2.subtract(\n        stHandleThree,\n        stHandlesCenterCanvas,\n        canvasVectorFromCenterShort\n      );\n      vec2.subtract(stHandleThree, stHandleThree, canvasOrthoVectorFromCenter);\n      vec2.add(\n        stHandleFour,\n        stHandlesCenterCanvas,\n        canvasVectorFromCenterShort\n      );\n      vec2.subtract(stHandleFour, stHandleFour, canvasOrthoVectorFromCenter);\n\n      referenceLines.push([\n        otherViewport,\n        refLinePointOne,\n        refLinePointTwo,\n        refLinePointThree,\n        refLinePointFour,\n        stLinePointOne,\n        stLinePointTwo,\n        stLinePointThree,\n        stLinePointFour,\n        rotHandleOne,\n        rotHandleTwo,\n        stHandleOne,\n        stHandleTwo,\n        stHandleThree,\n        stHandleFour,\n      ]);\n    });\n\n    const newRtpoints = [];\n    const newStpoints = [];\n    const viewportColor = this._getReferenceLineColor(viewport.id);\n    const color =\n      viewportColor !== undefined ? viewportColor : 'rgb(200, 200, 200)';\n\n    referenceLines.forEach((line, lineIndex) => {\n      // get color for the reference line\n      const otherViewport = line[0];\n      const viewportColor = this._getReferenceLineColor(otherViewport.id);\n      const viewportControllable = this._getReferenceLineControllable(\n        otherViewport.id\n      );\n      const viewportDraggableRotatable =\n        this._getReferenceLineDraggableRotatable(otherViewport.id) ||\n        this.configuration.mobile?.enabled;\n      const viewportSlabThicknessControlsOn =\n        this._getReferenceLineSlabThicknessControlsOn(otherViewport.id) ||\n        this.configuration.mobile?.enabled;\n      const selectedViewportId = data.activeViewportIds.find(\n        (id) => id === otherViewport.id\n      );\n\n      let color =\n        viewportColor !== undefined ? viewportColor : 'rgb(200, 200, 200)';\n\n      let lineWidth = 1;\n\n      const lineActive =\n        data.handles.activeOperation !== null &&\n        data.handles.activeOperation === OPERATION.DRAG &&\n        selectedViewportId;\n\n      if (lineActive) {\n        lineWidth = 2.5;\n      }\n\n      let lineUID = `${lineIndex}`;\n      if (viewportControllable && viewportDraggableRotatable) {\n        lineUID = `${lineIndex}One`;\n        drawLineSvg(\n          svgDrawingHelper,\n          annotationUID,\n          lineUID,\n          line[1],\n          line[2],\n          {\n            color,\n            lineWidth,\n          }\n        );\n\n        lineUID = `${lineIndex}Two`;\n        drawLineSvg(\n          svgDrawingHelper,\n          annotationUID,\n          lineUID,\n          line[3],\n          line[4],\n          {\n            color,\n            lineWidth,\n          }\n        );\n      } else {\n        drawLineSvg(\n          svgDrawingHelper,\n          annotationUID,\n          lineUID,\n          line[2],\n          line[4],\n          {\n            color,\n            lineWidth,\n          }\n        );\n      }\n\n      if (viewportControllable) {\n        color =\n          viewportColor !== undefined ? viewportColor : 'rgb(200, 200, 200)';\n\n        const rotHandlesActive =\n          data.handles.activeOperation === OPERATION.ROTATE;\n        const rotationHandles = [line[9], line[10]];\n\n        const rotHandleWorldOne = [\n          viewport.canvasToWorld(line[9]),\n          otherViewport,\n          line[1],\n          line[2],\n        ];\n        const rotHandleWorldTwo = [\n          viewport.canvasToWorld(line[10]),\n          otherViewport,\n          line[3],\n          line[4],\n        ];\n        newRtpoints.push(rotHandleWorldOne, rotHandleWorldTwo);\n\n        const slabThicknessHandlesActive =\n          data.handles.activeOperation === OPERATION.SLAB;\n        const slabThicknessHandles = [line[11], line[12], line[13], line[14]];\n\n        const slabThicknessHandleWorldOne = [\n          viewport.canvasToWorld(line[11]),\n          otherViewport,\n          line[5],\n          line[6],\n        ];\n        const slabThicknessHandleWorldTwo = [\n          viewport.canvasToWorld(line[12]),\n          otherViewport,\n          line[5],\n          line[6],\n        ];\n        const slabThicknessHandleWorldThree = [\n          viewport.canvasToWorld(line[13]),\n          otherViewport,\n          line[7],\n          line[8],\n        ];\n        const slabThicknessHandleWorldFour = [\n          viewport.canvasToWorld(line[14]),\n          otherViewport,\n          line[7],\n          line[8],\n        ];\n        newStpoints.push(\n          slabThicknessHandleWorldOne,\n          slabThicknessHandleWorldTwo,\n          slabThicknessHandleWorldThree,\n          slabThicknessHandleWorldFour\n        );\n\n        if (\n          (lineActive || this.configuration.mobile?.enabled) &&\n          !rotHandlesActive &&\n          !slabThicknessHandlesActive &&\n          viewportDraggableRotatable &&\n          viewportSlabThicknessControlsOn\n        ) {\n          // draw all handles inactive (rotation and slab thickness)\n          let handleUID = `${lineIndex}One`;\n          drawHandlesSvg(\n            svgDrawingHelper,\n            annotationUID,\n            handleUID,\n            rotationHandles,\n            {\n              color,\n              handleRadius: this.configuration.mobile?.enabled\n                ? this.configuration.mobile?.handleRadius\n                : 3,\n              opacity: this.configuration.mobile?.enabled\n                ? this.configuration.mobile?.opacity\n                : 1,\n              type: 'circle',\n            }\n          );\n          handleUID = `${lineIndex}Two`;\n          drawHandlesSvg(\n            svgDrawingHelper,\n            annotationUID,\n            handleUID,\n            slabThicknessHandles,\n            {\n              color,\n              handleRadius: this.configuration.mobile?.enabled\n                ? this.configuration.mobile?.handleRadius\n                : 3,\n              opacity: this.configuration.mobile?.enabled\n                ? this.configuration.mobile?.opacity\n                : 1,\n              type: 'rect',\n            }\n          );\n        } else if (\n          lineActive &&\n          !rotHandlesActive &&\n          !slabThicknessHandlesActive &&\n          viewportDraggableRotatable\n        ) {\n          const handleUID = `${lineIndex}`;\n          // draw rotation handles inactive\n          drawHandlesSvg(\n            svgDrawingHelper,\n            annotationUID,\n            handleUID,\n            rotationHandles,\n            {\n              color,\n              handleRadius: this.configuration.mobile?.enabled\n                ? this.configuration.mobile?.handleRadius\n                : 3,\n              opacity: this.configuration.mobile?.enabled\n                ? this.configuration.mobile?.opacity\n                : 1,\n              type: 'circle',\n            }\n          );\n        } else if (\n          selectedViewportId &&\n          !rotHandlesActive &&\n          !slabThicknessHandlesActive &&\n          viewportSlabThicknessControlsOn\n        ) {\n          const handleUID = `${lineIndex}`;\n          // draw slab thickness handles inactive\n          drawHandlesSvg(\n            svgDrawingHelper,\n            annotationUID,\n            handleUID,\n            slabThicknessHandles,\n            {\n              color,\n              handleRadius: this.configuration.mobile?.enabled\n                ? this.configuration.mobile?.handleRadius\n                : 3,\n              opacity: this.configuration.mobile?.enabled\n                ? this.configuration.mobile?.opacity\n                : 1,\n              type: 'rect',\n            }\n          );\n        } else if (rotHandlesActive && viewportDraggableRotatable) {\n          const handleUID = `${lineIndex}`;\n          // draw all rotation handles as active\n          drawHandlesSvg(\n            svgDrawingHelper,\n            annotationUID,\n            handleUID,\n            rotationHandles,\n            {\n              color,\n              handleRadius: 2,\n              fill: color,\n              type: 'circle',\n            }\n          );\n        } else if (\n          slabThicknessHandlesActive &&\n          selectedViewportId &&\n          viewportSlabThicknessControlsOn\n        ) {\n          // draw only the slab thickness handles for the active viewport as active\n          drawHandlesSvg(\n            svgDrawingHelper,\n            annotationUID,\n            lineUID,\n            slabThicknessHandles,\n            {\n              color,\n              handleRadius: 2,\n              fill: color,\n              type: 'rect',\n            }\n          );\n        }\n        const slabThicknessValue = otherViewport.getSlabThickness();\n        if (slabThicknessValue > 0.5 && viewportSlabThicknessControlsOn) {\n          // draw slab thickness reference lines\n          lineUID = `${lineIndex}STOne`;\n          drawLineSvg(\n            svgDrawingHelper,\n            annotationUID,\n            lineUID,\n            line[5],\n            line[6],\n            {\n              color,\n              width: 1,\n              lineDash: [2, 3],\n            }\n          );\n\n          lineUID = `${lineIndex}STTwo`;\n          drawLineSvg(\n            svgDrawingHelper,\n            annotationUID,\n            lineUID,\n            line[7],\n            line[8],\n            {\n              color,\n              width: line,\n              lineDash: [2, 3],\n            }\n          );\n        }\n      }\n    });\n\n    renderStatus = true;\n\n    // Save new handles points in annotation\n    data.handles.rotationPoints = newRtpoints;\n    data.handles.slabThicknessPoints = newStpoints;\n\n    if (this.configuration.viewportIndicators) {\n      // render a circle to pin point the viewport color\n      // TODO: This should not be part of the tool, and definitely not part of the renderAnnotation loop\n      const referenceColorCoordinates = [\n        clientWidth * 0.95,\n        clientHeight * 0.05,\n      ] as Types.Point2;\n      const circleRadius = canvasDiagonalLength * 0.01;\n\n      const circleUID = '0';\n      drawCircleSvg(\n        svgDrawingHelper,\n        annotationUID,\n        circleUID,\n        referenceColorCoordinates,\n        circleRadius,\n        { color, fill: color }\n      );\n    }\n\n    return renderStatus;\n  };\n\n  _getAnnotations = (enabledElement: Types.IEnabledElement) => {\n    const { viewport } = enabledElement;\n    return getAnnotations(this.getToolName(), viewport.element);\n  };\n\n  _onNewVolume = (e: any) => {\n    const viewportsInfo = this._getViewportsInfo();\n    this.computeToolCenter(viewportsInfo);\n  };\n\n  _unsubscribeToViewportNewVolumeSet(viewportsInfo) {\n    viewportsInfo.forEach(({ viewportId, renderingEngineId }) => {\n      const { viewport } = getEnabledElementByIds(\n        viewportId,\n        renderingEngineId\n      );\n      const { element } = viewport;\n\n      element.removeEventListener(\n        Enums.Events.VOLUME_VIEWPORT_NEW_VOLUME,\n        this._onNewVolume\n      );\n    });\n  }\n\n  _subscribeToViewportNewVolumeSet(viewports) {\n    viewports.forEach(({ viewportId, renderingEngineId }) => {\n      const { viewport } = getEnabledElementByIds(\n        viewportId,\n        renderingEngineId\n      );\n      const { element } = viewport;\n\n      element.addEventListener(\n        Enums.Events.VOLUME_VIEWPORT_NEW_VOLUME,\n        this._onNewVolume\n      );\n    });\n  }\n\n  _autoPanViewportIfNecessary(\n    viewportId: string,\n    renderingEngine: Types.IRenderingEngine\n  ): void {\n    // 1. Check if the toolCenter is outside the viewport\n    // 2. If it is outside, pan the viewport to fit in the toolCenter\n\n    const viewport = renderingEngine.getViewport(viewportId);\n    const { clientWidth, clientHeight } = viewport.canvas;\n\n    const toolCenterCanvas = viewport.worldToCanvas(this.toolCenter);\n\n    // pan the viewport to fit the toolCenter in the direction\n    // that is out of bounds\n    const pan = this.configuration.autoPan.panSize;\n\n    const visiblePointCanvas = <Types.Point2>[\n      toolCenterCanvas[0],\n      toolCenterCanvas[1],\n    ];\n\n    if (toolCenterCanvas[0] < 0) {\n      visiblePointCanvas[0] = pan;\n    } else if (toolCenterCanvas[0] > clientWidth) {\n      visiblePointCanvas[0] = clientWidth - pan;\n    }\n\n    if (toolCenterCanvas[1] < 0) {\n      visiblePointCanvas[1] = pan;\n    } else if (toolCenterCanvas[1] > clientHeight) {\n      visiblePointCanvas[1] = clientHeight - pan;\n    }\n\n    if (\n      visiblePointCanvas[0] === toolCenterCanvas[0] &&\n      visiblePointCanvas[1] === toolCenterCanvas[1]\n    ) {\n      return;\n    }\n\n    const visiblePointWorld = viewport.canvasToWorld(visiblePointCanvas);\n\n    const deltaPointsWorld = [\n      visiblePointWorld[0] - this.toolCenter[0],\n      visiblePointWorld[1] - this.toolCenter[1],\n      visiblePointWorld[2] - this.toolCenter[2],\n    ];\n\n    const camera = viewport.getCamera();\n    const { focalPoint, position } = camera;\n\n    const updatedPosition = <Types.Point3>[\n      position[0] - deltaPointsWorld[0],\n      position[1] - deltaPointsWorld[1],\n      position[2] - deltaPointsWorld[2],\n    ];\n\n    const updatedFocalPoint = <Types.Point3>[\n      focalPoint[0] - deltaPointsWorld[0],\n      focalPoint[1] - deltaPointsWorld[1],\n      focalPoint[2] - deltaPointsWorld[2],\n    ];\n\n    viewport.setCamera({\n      focalPoint: updatedFocalPoint,\n      position: updatedPosition,\n    });\n\n    viewport.render();\n  }\n\n  _areViewportIdArraysEqual = (viewportIdArrayOne, viewportIdArrayTwo) => {\n    if (viewportIdArrayOne.length !== viewportIdArrayTwo.length) {\n      return false;\n    }\n\n    viewportIdArrayOne.forEach((id) => {\n      let itemFound = false;\n      for (let i = 0; i < viewportIdArrayTwo.length; ++i) {\n        if (id === viewportIdArrayTwo[i]) {\n          itemFound = true;\n          break;\n        }\n      }\n      if (itemFound === false) {\n        return false;\n      }\n    });\n\n    return true;\n  };\n\n  // It filters the viewports with crosshairs and only return viewports\n  // that have different camera.\n  _getAnnotationsForViewportsWithDifferentCameras = (\n    enabledElement,\n    annotations\n  ) => {\n    const { viewportId, renderingEngine, viewport } = enabledElement;\n\n    const otherViewportAnnotations = annotations.filter(\n      (annotation) => annotation.data.viewportId !== viewportId\n    );\n\n    if (!otherViewportAnnotations || !otherViewportAnnotations.length) {\n      return [];\n    }\n\n    const camera = viewport.getCamera();\n    const { viewPlaneNormal, position } = camera;\n\n    const viewportsWithDifferentCameras = otherViewportAnnotations.filter(\n      (annotation) => {\n        const { viewportId } = annotation.data;\n        const targetViewport = renderingEngine.getViewport(viewportId);\n        const cameraOfTarget = targetViewport.getCamera();\n\n        return !(\n          csUtils.isEqual(\n            cameraOfTarget.viewPlaneNormal,\n            viewPlaneNormal,\n            1e-2\n          ) && csUtils.isEqual(cameraOfTarget.position, position, 1)\n        );\n      }\n    );\n\n    return viewportsWithDifferentCameras;\n  };\n\n  _filterViewportWithSameOrientation = (\n    enabledElement,\n    referenceAnnotation,\n    annotations\n  ) => {\n    const { renderingEngine } = enabledElement;\n    const { data } = referenceAnnotation;\n    const viewport = renderingEngine.getViewport(data.viewportId);\n\n    const linkedViewportAnnotations = annotations.filter((annotation) => {\n      const { data } = annotation;\n      const otherViewport = renderingEngine.getViewport(data.viewportId);\n      const otherViewportControllable = this._getReferenceLineControllable(\n        otherViewport.id\n      );\n\n      return otherViewportControllable === true;\n    });\n\n    if (!linkedViewportAnnotations || !linkedViewportAnnotations.length) {\n      return [];\n    }\n\n    const camera = viewport.getCamera();\n    const viewPlaneNormal = camera.viewPlaneNormal;\n    vtkMath.normalize(viewPlaneNormal);\n\n    const otherViewportsAnnotationsWithSameCameraDirection =\n      linkedViewportAnnotations.filter((annotation) => {\n        const { viewportId } = annotation.data;\n        const otherViewport = renderingEngine.getViewport(viewportId);\n        const otherCamera = otherViewport.getCamera();\n        const otherViewPlaneNormal = otherCamera.viewPlaneNormal;\n        vtkMath.normalize(otherViewPlaneNormal);\n\n        return (\n          csUtils.isEqual(viewPlaneNormal, otherViewPlaneNormal, 1e-2) &&\n          csUtils.isEqual(camera.viewUp, otherCamera.viewUp, 1e-2)\n        );\n      });\n\n    return otherViewportsAnnotationsWithSameCameraDirection;\n  };\n\n  _filterAnnotationsByUniqueViewportOrientations = (\n    enabledElement,\n    annotations\n  ) => {\n    const { renderingEngine, viewport } = enabledElement;\n    const camera = viewport.getCamera();\n    const viewPlaneNormal = camera.viewPlaneNormal;\n    vtkMath.normalize(viewPlaneNormal);\n\n    const otherLinkedViewportAnnotationsFromSameScene = annotations.filter(\n      (annotation) => {\n        const { data } = annotation;\n        const otherViewport = renderingEngine.getViewport(data.viewportId);\n        const otherViewportControllable = this._getReferenceLineControllable(\n          otherViewport.id\n        );\n\n        return (\n          viewport !== otherViewport &&\n          // scene === otherScene &&\n          otherViewportControllable === true\n        );\n      }\n    );\n\n    const otherViewportsAnnotationsWithUniqueCameras = [];\n    // Iterate first on other viewport from the same scene linked\n    for (\n      let i = 0;\n      i < otherLinkedViewportAnnotationsFromSameScene.length;\n      ++i\n    ) {\n      const annotation = otherLinkedViewportAnnotationsFromSameScene[i];\n      const { viewportId } = annotation.data;\n      const otherViewport = renderingEngine.getViewport(viewportId);\n      const otherCamera = otherViewport.getCamera();\n      const otherViewPlaneNormal = otherCamera.viewPlaneNormal;\n      vtkMath.normalize(otherViewPlaneNormal);\n\n      if (\n        csUtils.isEqual(viewPlaneNormal, otherViewPlaneNormal, 1e-2) ||\n        csUtils.isOpposite(viewPlaneNormal, otherViewPlaneNormal, 1e-2)\n      ) {\n        continue;\n      }\n\n      let cameraFound = false;\n      for (\n        let jj = 0;\n        jj < otherViewportsAnnotationsWithUniqueCameras.length;\n        ++jj\n      ) {\n        const annotation = otherViewportsAnnotationsWithUniqueCameras[jj];\n        const { viewportId } = annotation.data;\n        const stockedViewport = renderingEngine.getViewport(viewportId);\n        const cameraOfStocked = stockedViewport.getCamera();\n\n        if (\n          csUtils.isEqual(\n            cameraOfStocked.viewPlaneNormal,\n            otherCamera.viewPlaneNormal,\n            1e-2\n          ) &&\n          csUtils.isEqual(cameraOfStocked.position, otherCamera.position, 1)\n        ) {\n          cameraFound = true;\n        }\n      }\n\n      if (!cameraFound) {\n        otherViewportsAnnotationsWithUniqueCameras.push(annotation);\n      }\n    }\n\n    const otherNonLinkedViewportAnnotationsFromSameScene = annotations.filter(\n      (annotation) => {\n        const { data } = annotation;\n        const otherViewport = renderingEngine.getViewport(data.viewportId);\n        const otherViewportControllable = this._getReferenceLineControllable(\n          otherViewport.id\n        );\n\n        return (\n          viewport !== otherViewport &&\n          // scene === otherScene &&\n          otherViewportControllable !== true\n        );\n      }\n    );\n\n    // Iterate second on other viewport from the same scene non linked\n    for (\n      let i = 0;\n      i < otherNonLinkedViewportAnnotationsFromSameScene.length;\n      ++i\n    ) {\n      const annotation = otherNonLinkedViewportAnnotationsFromSameScene[i];\n      const { viewportId } = annotation.data;\n      const otherViewport = renderingEngine.getViewport(viewportId);\n\n      const otherCamera = otherViewport.getCamera();\n      const otherViewPlaneNormal = otherCamera.viewPlaneNormal;\n      vtkMath.normalize(otherViewPlaneNormal);\n\n      if (\n        csUtils.isEqual(viewPlaneNormal, otherViewPlaneNormal, 1e-2) ||\n        csUtils.isOpposite(viewPlaneNormal, otherViewPlaneNormal, 1e-2)\n      ) {\n        continue;\n      }\n\n      let cameraFound = false;\n      for (\n        let jj = 0;\n        jj < otherViewportsAnnotationsWithUniqueCameras.length;\n        ++jj\n      ) {\n        const annotation = otherViewportsAnnotationsWithUniqueCameras[jj];\n        const { viewportId } = annotation.data;\n        const stockedViewport = renderingEngine.getViewport(viewportId);\n        const cameraOfStocked = stockedViewport.getCamera();\n\n        if (\n          csUtils.isEqual(\n            cameraOfStocked.viewPlaneNormal,\n            otherCamera.viewPlaneNormal,\n            1e-2\n          ) &&\n          csUtils.isEqual(cameraOfStocked.position, otherCamera.position, 1)\n        ) {\n          cameraFound = true;\n        }\n      }\n\n      if (!cameraFound) {\n        otherViewportsAnnotationsWithUniqueCameras.push(annotation);\n      }\n    }\n\n    // Iterate on all the viewport\n    const otherViewportAnnotations =\n      this._getAnnotationsForViewportsWithDifferentCameras(\n        enabledElement,\n        annotations\n      );\n\n    for (let i = 0; i < otherViewportAnnotations.length; ++i) {\n      const annotation = otherViewportAnnotations[i];\n      if (\n        otherViewportsAnnotationsWithUniqueCameras.some(\n          (element) => element === annotation\n        )\n      ) {\n        continue;\n      }\n\n      const { viewportId } = annotation.data;\n      const otherViewport = renderingEngine.getViewport(viewportId);\n      const otherCamera = otherViewport.getCamera();\n      const otherViewPlaneNormal = otherCamera.viewPlaneNormal;\n      vtkMath.normalize(otherViewPlaneNormal);\n\n      if (\n        csUtils.isEqual(viewPlaneNormal, otherViewPlaneNormal, 1e-2) ||\n        csUtils.isOpposite(viewPlaneNormal, otherViewPlaneNormal, 1e-2)\n      ) {\n        continue;\n      }\n\n      let cameraFound = false;\n      for (\n        let jj = 0;\n        jj < otherViewportsAnnotationsWithUniqueCameras.length;\n        ++jj\n      ) {\n        const annotation = otherViewportsAnnotationsWithUniqueCameras[jj];\n        const { viewportId } = annotation.data;\n        const stockedViewport = renderingEngine.getViewport(viewportId);\n        const cameraOfStocked = stockedViewport.getCamera();\n\n        if (\n          csUtils.isEqual(\n            cameraOfStocked.viewPlaneNormal,\n            otherCamera.viewPlaneNormal,\n            1e-2\n          ) &&\n          csUtils.isEqual(cameraOfStocked.position, otherCamera.position, 1)\n        ) {\n          cameraFound = true;\n        }\n      }\n\n      if (!cameraFound) {\n        otherViewportsAnnotationsWithUniqueCameras.push(annotation);\n      }\n    }\n\n    return otherViewportsAnnotationsWithUniqueCameras;\n  };\n\n  _checkIfViewportsRenderingSameScene = (viewport, otherViewport) => {\n    const actors = viewport.getActors();\n    const otherViewportActors = otherViewport.getActors();\n\n    let sameScene = true;\n\n    actors.forEach((actor) => {\n      if (\n        actors.length !== otherViewportActors.length ||\n        otherViewportActors.find(({ uid }) => uid === actor.uid) === undefined\n      ) {\n        sameScene = false;\n      }\n    });\n\n    return sameScene;\n  };\n\n  _jump = (enabledElement, jumpWorld) => {\n    state.isInteractingWithTool = true;\n    const { viewport, renderingEngine } = enabledElement;\n\n    const annotations = this._getAnnotations(enabledElement);\n\n    const delta: Types.Point3 = [0, 0, 0];\n    vtkMath.subtract(jumpWorld, this.toolCenter, delta);\n\n    // TRANSLATION\n    // get the annotation of the other viewport which are parallel to the delta shift and are of the same scene\n    const otherViewportAnnotations =\n      this._getAnnotationsForViewportsWithDifferentCameras(\n        enabledElement,\n        annotations\n      );\n\n    const viewportsAnnotationsToUpdate = otherViewportAnnotations.filter(\n      (annotation) => {\n        const { data } = annotation;\n        const otherViewport = renderingEngine.getViewport(data.viewportId);\n\n        const sameScene = this._checkIfViewportsRenderingSameScene(\n          viewport,\n          otherViewport\n        );\n\n        return (\n          this._getReferenceLineControllable(otherViewport.id) &&\n          this._getReferenceLineDraggableRotatable(otherViewport.id) &&\n          sameScene\n        );\n      }\n    );\n\n    if (viewportsAnnotationsToUpdate.length === 0) {\n      state.isInteractingWithTool = false;\n      return false;\n    }\n\n    this._applyDeltaShiftToSelectedViewportCameras(\n      renderingEngine,\n      viewportsAnnotationsToUpdate,\n      delta\n    );\n\n    state.isInteractingWithTool = false;\n\n    return true;\n  };\n\n  _activateModify = (element) => {\n    // mobile sometimes has lingering interaction even when touchEnd triggers\n    // this check allows for multiple handles to be active which doesn't affect\n    // tool usage.\n    state.isInteractingWithTool = !this.configuration.mobile?.enabled;\n\n    element.addEventListener(Events.MOUSE_UP, this._endCallback);\n    element.addEventListener(Events.MOUSE_DRAG, this._dragCallback);\n    element.addEventListener(Events.MOUSE_CLICK, this._endCallback);\n\n    element.addEventListener(Events.TOUCH_END, this._endCallback);\n    element.addEventListener(Events.TOUCH_DRAG, this._dragCallback);\n    element.addEventListener(Events.TOUCH_TAP, this._endCallback);\n  };\n\n  _deactivateModify = (element) => {\n    state.isInteractingWithTool = false;\n\n    element.removeEventListener(Events.MOUSE_UP, this._endCallback);\n    element.removeEventListener(Events.MOUSE_DRAG, this._dragCallback);\n    element.removeEventListener(Events.MOUSE_CLICK, this._endCallback);\n\n    element.removeEventListener(Events.TOUCH_END, this._endCallback);\n    element.removeEventListener(Events.TOUCH_DRAG, this._dragCallback);\n    element.removeEventListener(Events.TOUCH_TAP, this._endCallback);\n  };\n\n  _endCallback = (evt: EventTypes.InteractionEventType) => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    this.editData.annotation.data.handles.activeOperation = null;\n    this.editData.annotation.data.activeViewportIds = [];\n\n    this._deactivateModify(element);\n\n    resetElementCursor(element);\n\n    this.editData = null;\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    const requireSameOrientation = false;\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName(),\n      requireSameOrientation\n    );\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n  };\n\n  _dragCallback = (evt: EventTypes.InteractionEventType) => {\n    const eventDetail = evt.detail;\n    const delta = eventDetail.deltaPoints.world;\n\n    if (\n      Math.abs(delta[0]) < 1e-3 &&\n      Math.abs(delta[1]) < 1e-3 &&\n      Math.abs(delta[2]) < 1e-3\n    ) {\n      return;\n    }\n\n    const { element } = eventDetail;\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine, viewport } = enabledElement;\n    const annotations = this._getAnnotations(\n      enabledElement\n    ) as CrosshairsAnnotation[];\n    const filteredToolAnnotations =\n      this.filterInteractableAnnotationsForElement(element, annotations);\n\n    // viewport Annotation\n    const viewportAnnotation = filteredToolAnnotations[0];\n    if (!viewportAnnotation) {\n      return;\n    }\n\n    const { handles } = viewportAnnotation.data;\n    const { currentPoints } = evt.detail;\n    const canvasCoords = currentPoints.canvas;\n\n    if (handles.activeOperation === OPERATION.DRAG) {\n      // TRANSLATION\n      // get the annotation of the other viewport which are parallel to the delta shift and are of the same scene\n      const otherViewportAnnotations =\n        this._getAnnotationsForViewportsWithDifferentCameras(\n          enabledElement,\n          annotations\n        );\n\n      const viewportsAnnotationsToUpdate = otherViewportAnnotations.filter(\n        (annotation) => {\n          const { data } = annotation;\n          const otherViewport = renderingEngine.getViewport(data.viewportId);\n          const otherViewportControllable = this._getReferenceLineControllable(\n            otherViewport.id\n          );\n          const otherViewportDraggableRotatable =\n            this._getReferenceLineDraggableRotatable(otherViewport.id);\n\n          return (\n            otherViewportControllable === true &&\n            otherViewportDraggableRotatable === true &&\n            viewportAnnotation.data.activeViewportIds.find(\n              (id) => id === otherViewport.id\n            )\n          );\n        }\n      );\n\n      this._applyDeltaShiftToSelectedViewportCameras(\n        renderingEngine,\n        viewportsAnnotationsToUpdate,\n        delta\n      );\n    } else if (handles.activeOperation === OPERATION.ROTATE) {\n      // ROTATION\n      const otherViewportAnnotations =\n        this._getAnnotationsForViewportsWithDifferentCameras(\n          enabledElement,\n          annotations\n        );\n\n      const viewportsAnnotationsToUpdate = otherViewportAnnotations.filter(\n        (annotation) => {\n          const { data } = annotation;\n          const otherViewport = renderingEngine.getViewport(data.viewportId);\n          const otherViewportControllable = this._getReferenceLineControllable(\n            otherViewport.id\n          );\n          const otherViewportDraggableRotatable =\n            this._getReferenceLineDraggableRotatable(otherViewport.id);\n\n          return (\n            otherViewportControllable === true &&\n            otherViewportDraggableRotatable === true\n          );\n        }\n      );\n\n      const dir1 = vec2.create();\n      const dir2 = vec2.create();\n\n      const center: Types.Point3 = [\n        this.toolCenter[0],\n        this.toolCenter[1],\n        this.toolCenter[2],\n      ];\n\n      const centerCanvas = viewport.worldToCanvas(center);\n\n      const finalPointCanvas = eventDetail.currentPoints.canvas;\n      const originalPointCanvas = vec2.create();\n      vec2.sub(\n        originalPointCanvas,\n        finalPointCanvas,\n        eventDetail.deltaPoints.canvas\n      );\n      vec2.sub(dir1, originalPointCanvas, <vec2>centerCanvas);\n      vec2.sub(dir2, finalPointCanvas, <vec2>centerCanvas);\n\n      let angle = vec2.angle(dir1, dir2);\n\n      if (\n        this._isClockWise(centerCanvas, originalPointCanvas, finalPointCanvas)\n      ) {\n        angle *= -1;\n      }\n\n      // Rounding the angle to allow rotated handles to be undone\n      // If we don't round and rotate handles clockwise by 0.0131233 radians,\n      // there's no assurance that the counter-clockwise rotation occurs at\n      // precisely -0.0131233, resulting in the drawn annotations being lost.\n      angle = Math.round(angle * 100) / 100;\n\n      const rotationAxis = viewport.getCamera().viewPlaneNormal;\n      // @ts-ignore : vtkjs incorrect typing\n      const { matrix } = vtkMatrixBuilder\n        .buildFromRadian()\n        .translate(center[0], center[1], center[2])\n        // @ts-ignore\n        .rotate(angle, rotationAxis) //todo: why we are passing\n        .translate(-center[0], -center[1], -center[2]);\n\n      const otherViewportsIds = [];\n      // update camera for the other viewports.\n      // NOTE: The lines then are rendered by the onCameraModified\n      viewportsAnnotationsToUpdate.forEach((annotation) => {\n        const { data } = annotation;\n        data.handles.toolCenter = center;\n\n        const otherViewport = renderingEngine.getViewport(data.viewportId);\n        const camera = otherViewport.getCamera();\n        const { viewUp, position, focalPoint } = camera;\n\n        viewUp[0] += position[0];\n        viewUp[1] += position[1];\n        viewUp[2] += position[2];\n\n        vec3.transformMat4(focalPoint, focalPoint, matrix);\n        vec3.transformMat4(position, position, matrix);\n        vec3.transformMat4(viewUp, viewUp, matrix);\n\n        viewUp[0] -= position[0];\n        viewUp[1] -= position[1];\n        viewUp[2] -= position[2];\n\n        otherViewport.setCamera({\n          position,\n          viewUp,\n          focalPoint,\n        });\n        otherViewportsIds.push(otherViewport.id);\n      });\n      renderingEngine.renderViewports(otherViewportsIds);\n    } else if (handles.activeOperation === OPERATION.SLAB) {\n      // SLAB THICKNESS\n      // this should be just the active one under the mouse,\n      const otherViewportAnnotations =\n        this._getAnnotationsForViewportsWithDifferentCameras(\n          enabledElement,\n          annotations\n        );\n\n      const referenceAnnotations = otherViewportAnnotations.filter(\n        (annotation) => {\n          const { data } = annotation;\n          const otherViewport = renderingEngine.getViewport(data.viewportId);\n          const otherViewportControllable = this._getReferenceLineControllable(\n            otherViewport.id\n          );\n          const otherViewportSlabThicknessControlsOn =\n            this._getReferenceLineSlabThicknessControlsOn(otherViewport.id);\n\n          return (\n            otherViewportControllable === true &&\n            otherViewportSlabThicknessControlsOn === true &&\n            viewportAnnotation.data.activeViewportIds.find(\n              (id) => id === otherViewport.id\n            )\n          );\n        }\n      );\n\n      if (referenceAnnotations.length === 0) {\n        return;\n      }\n      const viewportsAnnotationsToUpdate =\n        this._filterViewportWithSameOrientation(\n          enabledElement,\n          referenceAnnotations[0],\n          annotations\n        );\n\n      const viewportsIds = [];\n      viewportsIds.push(viewport.id);\n      viewportsAnnotationsToUpdate.forEach(\n        (annotation: CrosshairsAnnotation) => {\n          const { data } = annotation;\n\n          const otherViewport = renderingEngine.getViewport(\n            data.viewportId\n          ) as Types.IVolumeViewport;\n          const camera = otherViewport.getCamera();\n          const normal = camera.viewPlaneNormal;\n\n          const dotProd = vtkMath.dot(delta, normal);\n          const projectedDelta: Types.Point3 = [...normal];\n          vtkMath.multiplyScalar(projectedDelta, dotProd);\n\n          if (\n            Math.abs(projectedDelta[0]) > 1e-3 ||\n            Math.abs(projectedDelta[1]) > 1e-3 ||\n            Math.abs(projectedDelta[2]) > 1e-3\n          ) {\n            const mod = Math.sqrt(\n              projectedDelta[0] * projectedDelta[0] +\n                projectedDelta[1] * projectedDelta[1] +\n                projectedDelta[2] * projectedDelta[2]\n            );\n\n            const currentPoint = eventDetail.lastPoints.world;\n            const direction: Types.Point3 = [0, 0, 0];\n\n            const currentCenter: Types.Point3 = [\n              this.toolCenter[0],\n              this.toolCenter[1],\n              this.toolCenter[2],\n            ];\n\n            // use this.toolCenter only if viewportDraggableRotatable\n            const viewportDraggableRotatable =\n              this._getReferenceLineDraggableRotatable(otherViewport.id);\n            if (!viewportDraggableRotatable) {\n              const { rotationPoints } = this.editData.annotation.data.handles;\n              // Todo: what is a point uid?\n              const otherViewportRotationPoints = rotationPoints.filter(\n                (point) => point[1].uid === otherViewport.id\n              );\n              if (otherViewportRotationPoints.length === 2) {\n                const point1 = viewport.canvasToWorld(\n                  otherViewportRotationPoints[0][3]\n                );\n                const point2 = viewport.canvasToWorld(\n                  otherViewportRotationPoints[1][3]\n                );\n                vtkMath.add(point1, point2, currentCenter);\n                vtkMath.multiplyScalar(<Types.Point3>currentCenter, 0.5);\n              }\n            }\n\n            vtkMath.subtract(currentPoint, currentCenter, direction);\n            const dotProdDirection = vtkMath.dot(direction, normal);\n            const projectedDirection: Types.Point3 = [...normal];\n            vtkMath.multiplyScalar(projectedDirection, dotProdDirection);\n            const normalizedProjectedDirection: Types.Point3 = [\n              projectedDirection[0],\n              projectedDirection[1],\n              projectedDirection[2],\n            ];\n            vec3.normalize(\n              normalizedProjectedDirection,\n              normalizedProjectedDirection\n            );\n            const normalizedProjectedDelta: Types.Point3 = [\n              projectedDelta[0],\n              projectedDelta[1],\n              projectedDelta[2],\n            ];\n            vec3.normalize(normalizedProjectedDelta, normalizedProjectedDelta);\n\n            let slabThicknessValue = otherViewport.getSlabThickness();\n            if (\n              csUtils.isOpposite(\n                normalizedProjectedDirection,\n                normalizedProjectedDelta,\n                1e-3\n              )\n            ) {\n              slabThicknessValue -= mod;\n            } else {\n              slabThicknessValue += mod;\n            }\n\n            slabThicknessValue = Math.abs(slabThicknessValue);\n            slabThicknessValue = Math.max(\n              RENDERING_DEFAULTS.MINIMUM_SLAB_THICKNESS,\n              slabThicknessValue\n            );\n\n            const near = this._pointNearReferenceLine(\n              viewportAnnotation,\n              canvasCoords,\n              6,\n              otherViewport\n            );\n\n            if (near) {\n              slabThicknessValue = RENDERING_DEFAULTS.MINIMUM_SLAB_THICKNESS;\n            }\n\n            // We want to set the slabThickness for the viewport's actors but\n            // since the crosshairs tool instance has configuration regarding which\n            // actorUIDs (in case of volume -> actorUID = volumeIds) to set the\n            // slabThickness for, we need to delegate the slabThickness setting\n            // to the crosshairs tool instance of the toolGroup since configurations\n            // exist on the toolInstance and each toolGroup has its own crosshairs\n            // tool instance (Otherwise, we would need to set this filterActorUIDsToSetSlabThickness at\n            // the viewport level which makes tool and viewport state convoluted).\n            const toolGroup = getToolGroupForViewport(\n              otherViewport.id,\n              renderingEngine.id\n            );\n            const crosshairsInstance = toolGroup.getToolInstance(\n              this.getToolName()\n            );\n            crosshairsInstance.setSlabThickness(\n              otherViewport,\n              slabThicknessValue\n            );\n\n            viewportsIds.push(otherViewport.id);\n          }\n        }\n      );\n      renderingEngine.renderViewports(viewportsIds);\n    }\n  };\n\n  setSlabThickness(viewport, slabThickness) {\n    let actorUIDs;\n    const { filterActorUIDsToSetSlabThickness } = this.configuration;\n    if (\n      filterActorUIDsToSetSlabThickness &&\n      filterActorUIDsToSetSlabThickness.length > 0\n    ) {\n      actorUIDs = filterActorUIDsToSetSlabThickness;\n    }\n\n    let blendModeToUse = this.configuration.slabThicknessBlendMode;\n    if (slabThickness === RENDERING_DEFAULTS.MINIMUM_SLAB_THICKNESS) {\n      blendModeToUse = Enums.BlendModes.COMPOSITE;\n    }\n\n    const immediate = false;\n    viewport.setBlendMode(blendModeToUse, actorUIDs, immediate);\n    viewport.setSlabThickness(slabThickness, actorUIDs);\n  }\n\n  _isClockWise(a, b, c) {\n    // return true if the rotation is clockwise\n    return (b[0] - a[0]) * (c[1] - a[1]) - (b[1] - a[1]) * (c[0] - a[0]) > 0;\n  }\n\n  _applyDeltaShiftToSelectedViewportCameras(\n    renderingEngine,\n    viewportsAnnotationsToUpdate,\n    delta\n  ) {\n    // update camera for the other viewports.\n    // NOTE1: The lines then are rendered by the onCameraModified\n    // NOTE2: crosshair center are automatically updated in the onCameraModified event\n    viewportsAnnotationsToUpdate.forEach((annotation) => {\n      this._applyDeltaShiftToViewportCamera(renderingEngine, annotation, delta);\n    });\n  }\n\n  _applyDeltaShiftToViewportCamera(\n    renderingEngine: Types.IRenderingEngine,\n    annotation,\n    delta\n  ) {\n    // update camera for the other viewports.\n    // NOTE1: The lines then are rendered by the onCameraModified\n    // NOTE2: crosshair center are automatically updated in the onCameraModified event\n    const { data } = annotation;\n\n    const viewport = renderingEngine.getViewport(data.viewportId);\n    const camera = viewport.getCamera();\n    const normal = camera.viewPlaneNormal;\n\n    // Project delta over camera normal\n    // (we don't need to pan, we need only to scroll the camera as in the wheel stack scroll tool)\n    const dotProd = vtkMath.dot(delta, normal);\n    const projectedDelta: Types.Point3 = [...normal];\n    vtkMath.multiplyScalar(projectedDelta, dotProd);\n\n    if (\n      Math.abs(projectedDelta[0]) > 1e-3 ||\n      Math.abs(projectedDelta[1]) > 1e-3 ||\n      Math.abs(projectedDelta[2]) > 1e-3\n    ) {\n      const newFocalPoint: Types.Point3 = [0, 0, 0];\n      const newPosition: Types.Point3 = [0, 0, 0];\n\n      vtkMath.add(camera.focalPoint, projectedDelta, newFocalPoint);\n      vtkMath.add(camera.position, projectedDelta, newPosition);\n\n      viewport.setCamera({\n        focalPoint: newFocalPoint,\n        position: newPosition,\n      });\n      viewport.render();\n    }\n  }\n\n  _pointNearReferenceLine = (\n    annotation,\n    canvasCoords,\n    proximity,\n    lineViewport\n  ) => {\n    const { data } = annotation;\n    const { rotationPoints } = data.handles;\n\n    for (let i = 0; i < rotationPoints.length - 1; ++i) {\n      const otherViewport = rotationPoints[i][1];\n      if (otherViewport.id !== lineViewport.id) {\n        continue;\n      }\n\n      const viewportControllable = this._getReferenceLineControllable(\n        otherViewport.id\n      );\n      if (!viewportControllable) {\n        continue;\n      }\n\n      const lineSegment1 = {\n        start: {\n          x: rotationPoints[i][2][0],\n          y: rotationPoints[i][2][1],\n        },\n        end: {\n          x: rotationPoints[i][3][0],\n          y: rotationPoints[i][3][1],\n        },\n      };\n\n      const distanceToPoint1 = lineSegment.distanceToPoint(\n        [lineSegment1.start.x, lineSegment1.start.y],\n        [lineSegment1.end.x, lineSegment1.end.y],\n        [canvasCoords[0], canvasCoords[1]]\n      );\n\n      const lineSegment2 = {\n        start: {\n          x: rotationPoints[i + 1][2][0],\n          y: rotationPoints[i + 1][2][1],\n        },\n        end: {\n          x: rotationPoints[i + 1][3][0],\n          y: rotationPoints[i + 1][3][1],\n        },\n      };\n\n      const distanceToPoint2 = lineSegment.distanceToPoint(\n        [lineSegment2.start.x, lineSegment2.start.y],\n        [lineSegment2.end.x, lineSegment2.end.y],\n        [canvasCoords[0], canvasCoords[1]]\n      );\n\n      if (distanceToPoint1 <= proximity || distanceToPoint2 <= proximity) {\n        return true;\n      }\n\n      // rotation handles are two for viewport\n      i++;\n    }\n\n    return false;\n  };\n\n  _getRotationHandleNearImagePoint(\n    viewport,\n    annotation,\n    canvasCoords,\n    proximity\n  ) {\n    const { data } = annotation;\n    const { rotationPoints } = data.handles;\n\n    for (let i = 0; i < rotationPoints.length; i++) {\n      const point = rotationPoints[i][0];\n      const otherViewport = rotationPoints[i][1];\n      const viewportControllable = this._getReferenceLineControllable(\n        otherViewport.id\n      );\n      if (!viewportControllable) {\n        continue;\n      }\n\n      const viewportDraggableRotatable =\n        this._getReferenceLineDraggableRotatable(otherViewport.id);\n      if (!viewportDraggableRotatable) {\n        continue;\n      }\n\n      const annotationCanvasCoordinate = viewport.worldToCanvas(point);\n      if (vec2.distance(canvasCoords, annotationCanvasCoordinate) < proximity) {\n        data.handles.activeOperation = OPERATION.ROTATE;\n\n        this.editData = {\n          annotation,\n        };\n\n        return point;\n      }\n    }\n\n    return null;\n  }\n\n  _getSlabThicknessHandleNearImagePoint(\n    viewport,\n    annotation,\n    canvasCoords,\n    proximity\n  ) {\n    const { data } = annotation;\n    const { slabThicknessPoints } = data.handles;\n\n    for (let i = 0; i < slabThicknessPoints.length; i++) {\n      const point = slabThicknessPoints[i][0];\n      const otherViewport = slabThicknessPoints[i][1];\n      const viewportControllable = this._getReferenceLineControllable(\n        otherViewport.id\n      );\n      if (!viewportControllable) {\n        continue;\n      }\n\n      const viewportSlabThicknessControlsOn =\n        this._getReferenceLineSlabThicknessControlsOn(otherViewport.id);\n      if (!viewportSlabThicknessControlsOn) {\n        continue;\n      }\n\n      const annotationCanvasCoordinate = viewport.worldToCanvas(point);\n      if (vec2.distance(canvasCoords, annotationCanvasCoordinate) < proximity) {\n        data.handles.activeOperation = OPERATION.SLAB;\n\n        data.activeViewportIds = [otherViewport.id];\n\n        this.editData = {\n          annotation,\n        };\n\n        return point;\n      }\n    }\n\n    return null;\n  }\n\n  _pointNearTool(element, annotation, canvasCoords, proximity) {\n    const enabledElement = getEnabledElement(element);\n    const { viewport } = enabledElement;\n    const { clientWidth, clientHeight } = viewport.canvas;\n    const canvasDiagonalLength = Math.sqrt(\n      clientWidth * clientWidth + clientHeight * clientHeight\n    );\n    const { data } = annotation;\n\n    const { rotationPoints } = data.handles;\n    const { slabThicknessPoints } = data.handles;\n    const viewportIdArray = [];\n\n    for (let i = 0; i < rotationPoints.length - 1; ++i) {\n      const otherViewport = rotationPoints[i][1];\n      const viewportControllable = this._getReferenceLineControllable(\n        otherViewport.id\n      );\n      const viewportDraggableRotatable =\n        this._getReferenceLineDraggableRotatable(otherViewport.id);\n\n      if (!viewportControllable || !viewportDraggableRotatable) {\n        continue;\n      }\n\n      const lineSegment1 = {\n        start: {\n          x: rotationPoints[i][2][0],\n          y: rotationPoints[i][2][1],\n        },\n        end: {\n          x: rotationPoints[i][3][0],\n          y: rotationPoints[i][3][1],\n        },\n      };\n\n      const distanceToPoint1 = lineSegment.distanceToPoint(\n        [lineSegment1.start.x, lineSegment1.start.y],\n        [lineSegment1.end.x, lineSegment1.end.y],\n        [canvasCoords[0], canvasCoords[1]]\n      );\n\n      const lineSegment2 = {\n        start: {\n          x: rotationPoints[i + 1][2][0],\n          y: rotationPoints[i + 1][2][1],\n        },\n        end: {\n          x: rotationPoints[i + 1][3][0],\n          y: rotationPoints[i + 1][3][1],\n        },\n      };\n\n      const distanceToPoint2 = lineSegment.distanceToPoint(\n        [lineSegment2.start.x, lineSegment2.start.y],\n        [lineSegment2.end.x, lineSegment2.end.y],\n        [canvasCoords[0], canvasCoords[1]]\n      );\n\n      if (distanceToPoint1 <= proximity || distanceToPoint2 <= proximity) {\n        viewportIdArray.push(otherViewport.id);\n        data.handles.activeOperation = OPERATION.DRAG;\n      }\n\n      // rotation handles are two for viewport\n      i++;\n    }\n\n    for (let i = 0; i < slabThicknessPoints.length - 1; ++i) {\n      const otherViewport = slabThicknessPoints[i][1];\n      if (viewportIdArray.find((id) => id === otherViewport.id)) {\n        continue;\n      }\n\n      const viewportControllable = this._getReferenceLineControllable(\n        otherViewport.id\n      );\n      const viewportSlabThicknessControlsOn =\n        this._getReferenceLineSlabThicknessControlsOn(otherViewport.id);\n\n      if (!viewportControllable || !viewportSlabThicknessControlsOn) {\n        continue;\n      }\n\n      const stPointLineCanvas1 = slabThicknessPoints[i][2];\n      const stPointLineCanvas2 = slabThicknessPoints[i][3];\n\n      const centerCanvas = vec2.create();\n      vec2.add(centerCanvas, stPointLineCanvas1, stPointLineCanvas2);\n      vec2.scale(centerCanvas, centerCanvas, 0.5);\n\n      const canvasUnitVectorFromCenter = vec2.create();\n      vec2.subtract(\n        canvasUnitVectorFromCenter,\n        stPointLineCanvas1,\n        centerCanvas\n      );\n      vec2.normalize(canvasUnitVectorFromCenter, canvasUnitVectorFromCenter);\n\n      const canvasVectorFromCenterStart = vec2.create();\n      vec2.scale(\n        canvasVectorFromCenterStart,\n        canvasUnitVectorFromCenter,\n        canvasDiagonalLength * 0.05\n      );\n\n      const stPointLineCanvas1Start = vec2.create();\n      const stPointLineCanvas2Start = vec2.create();\n      vec2.add(\n        stPointLineCanvas1Start,\n        centerCanvas,\n        canvasVectorFromCenterStart\n      );\n      vec2.subtract(\n        stPointLineCanvas2Start,\n        centerCanvas,\n        canvasVectorFromCenterStart\n      );\n\n      const lineSegment1 = {\n        start: {\n          x: stPointLineCanvas1Start[0],\n          y: stPointLineCanvas1Start[1],\n        },\n        end: {\n          x: stPointLineCanvas1[0],\n          y: stPointLineCanvas1[1],\n        },\n      };\n\n      const distanceToPoint1 = lineSegment.distanceToPoint(\n        [lineSegment1.start.x, lineSegment1.start.y],\n        [lineSegment1.end.x, lineSegment1.end.y],\n        [canvasCoords[0], canvasCoords[1]]\n      );\n\n      const lineSegment2 = {\n        start: {\n          x: stPointLineCanvas2Start[0],\n          y: stPointLineCanvas2Start[1],\n        },\n        end: {\n          x: stPointLineCanvas2[0],\n          y: stPointLineCanvas2[1],\n        },\n      };\n\n      const distanceToPoint2 = lineSegment.distanceToPoint(\n        [lineSegment2.start.x, lineSegment2.start.y],\n        [lineSegment2.end.x, lineSegment2.end.y],\n        [canvasCoords[0], canvasCoords[1]]\n      );\n\n      if (distanceToPoint1 <= proximity || distanceToPoint2 <= proximity) {\n        viewportIdArray.push(otherViewport.id); // we still need this to draw inactive slab thickness handles\n        data.handles.activeOperation = null; // no operation\n      }\n\n      // slab thickness handles are in couples\n      i++;\n    }\n\n    data.activeViewportIds = [...viewportIdArray];\n\n    this.editData = {\n      annotation,\n    };\n\n    return data.handles.activeOperation === OPERATION.DRAG ? true : false;\n  }\n}\n\nCrosshairsTool.toolName = 'Crosshairs';\nexport default CrosshairsTool;\n","import { BaseTool } from './base';\nimport { Events } from '../enums';\n\nimport { getEnabledElement, StackViewport } from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\nimport { EventTypes, PublicToolProps, ToolProps } from '../types';\nimport { getViewportIdsWithToolToRender } from '../utilities/viewportFilters';\nimport triggerAnnotationRenderForViewportIds from '../utilities/triggerAnnotationRenderForViewportIds';\nimport { state } from '../store';\nimport { Enums } from '@cornerstonejs/core';\n\nimport {\n  hideElementCursor,\n  resetElementCursor,\n} from '../cursors/elementCursor';\nimport { IPoints } from '../types';\n\nconst MAGNIFY_VIEWPORT_ID = 'magnify-viewport';\n\nclass MagnifyTool extends BaseTool {\n  static toolName;\n  _bounds: any;\n  editData: {\n    referencedImageId: string;\n    viewportIdsToRender: string[];\n    enabledElement: Types.IEnabledElement;\n    renderingEngine: Types.IRenderingEngine;\n    currentPoints: IPoints;\n  } | null;\n\n  constructor(\n    toolProps: PublicToolProps = {},\n    defaultToolProps: ToolProps = {\n      supportedInteractionTypes: ['Mouse', 'Touch'],\n      configuration: {\n        magnifySize: 10, // parallel scale , higher more zoom\n        magnifyWidth: 250, //px\n        magnifyHeight: 250, //px\n      },\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n  }\n\n  _getReferencedImageId(\n    viewport: Types.IStackViewport | Types.IVolumeViewport\n  ): string {\n    const targetId = this.getTargetId(viewport);\n\n    let referencedImageId;\n\n    if (viewport instanceof StackViewport) {\n      referencedImageId = targetId.split('imageId:')[1];\n    }\n\n    return referencedImageId;\n  }\n\n  preMouseDownCallback = (evt: EventTypes.InteractionEventType) => {\n    const eventDetail = evt.detail;\n    const { element, currentPoints } = eventDetail;\n    const enabledElement = getEnabledElement(element);\n    const { viewport, renderingEngine } = enabledElement;\n\n    if (!(viewport instanceof StackViewport)) {\n      throw new Error('MagnifyTool only works on StackViewports');\n    }\n\n    const referencedImageId = this._getReferencedImageId(viewport);\n\n    if (!referencedImageId) {\n      throw new Error(\n        'MagnifyTool: No referenced image id found, reconstructed planes not supported yet'\n      );\n    }\n\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    this.editData = {\n      referencedImageId,\n      viewportIdsToRender,\n      enabledElement,\n      renderingEngine,\n      currentPoints,\n    };\n\n    this._createMagnificationViewport();\n    this._activateDraw(element);\n\n    hideElementCursor(element);\n\n    evt.preventDefault();\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    return true;\n  };\n\n  preTouchStartCallback = (evt: EventTypes.InteractionEventType) => {\n    this.preMouseDownCallback(evt);\n  };\n\n  _createMagnificationViewport = () => {\n    const {\n      enabledElement,\n      referencedImageId,\n      viewportIdsToRender,\n      renderingEngine,\n      currentPoints,\n    } = this.editData;\n    const { viewport } = enabledElement;\n    const { element } = viewport;\n    const viewportProperties = viewport.getProperties();\n\n    const { canvas: canvasPos, world: worldPos } = currentPoints;\n\n    let magnifyToolElement: HTMLDivElement;\n\n    magnifyToolElement = element.querySelector('.magnifyTool');\n    if (magnifyToolElement === null) {\n      const magnifyElement = document.createElement('div');\n\n      magnifyElement.classList.add('magnifyTool');\n\n      magnifyElement.style.display = 'block';\n      magnifyElement.style.width = `${this.configuration.magnifyWidth}px`;\n      magnifyElement.style.height = `${this.configuration.magnifyHeight}px`;\n      magnifyElement.style.position = 'absolute';\n\n      magnifyToolElement = magnifyElement;\n\n      const viewportElement = element.querySelector('.viewport-element');\n      viewportElement.appendChild(magnifyElement);\n\n      const viewportInput = {\n        viewportId: MAGNIFY_VIEWPORT_ID,\n        type: Enums.ViewportType.STACK,\n        element: magnifyToolElement as HTMLDivElement,\n      };\n\n      renderingEngine.enableElement(viewportInput);\n    }\n\n    // Todo: use CSS transform instead of setting top and left for better performance\n    magnifyToolElement.style.top = `${\n      canvasPos[1] - this.configuration.magnifyHeight / 2\n    }px`;\n    magnifyToolElement.style.left = `${\n      canvasPos[0] - this.configuration.magnifyWidth / 2\n    }px`;\n\n    const magnifyViewport = renderingEngine.getViewport(\n      MAGNIFY_VIEWPORT_ID\n    ) as Types.IStackViewport;\n\n    magnifyViewport.setStack([referencedImageId]).then(() => {\n      // match the original viewport voi range\n      magnifyViewport.setProperties(viewportProperties);\n\n      // Use the original viewport for the base for parallelScale\n      const { parallelScale } = viewport.getCamera();\n\n      const { focalPoint, position, viewPlaneNormal } =\n        magnifyViewport.getCamera();\n\n      const distance = Math.sqrt(\n        Math.pow(focalPoint[0] - position[0], 2) +\n          Math.pow(focalPoint[1] - position[1], 2) +\n          Math.pow(focalPoint[2] - position[2], 2)\n      );\n\n      const updatedFocalPoint = <Types.Point3>[\n        worldPos[0],\n        worldPos[1],\n        worldPos[2],\n      ];\n\n      const updatedPosition = <Types.Point3>[\n        updatedFocalPoint[0] + distance * viewPlaneNormal[0],\n        updatedFocalPoint[1] + distance * viewPlaneNormal[1],\n        updatedFocalPoint[2] + distance * viewPlaneNormal[2],\n      ];\n\n      magnifyViewport.setCamera({\n        parallelScale: parallelScale * (1 / this.configuration.magnifySize),\n        focalPoint: updatedFocalPoint,\n        position: updatedPosition,\n      });\n      magnifyViewport.render();\n    });\n\n    magnifyToolElement.style.display = 'block';\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n  };\n\n  _dragCallback = (evt: EventTypes.InteractionEventType) => {\n    const eventDetail = evt.detail;\n\n    const { deltaPoints, element, currentPoints } = eventDetail;\n    const deltaPointsWorld = deltaPoints.world;\n    const canvasPos = currentPoints.canvas;\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    const magnifyViewport = renderingEngine.getViewport(MAGNIFY_VIEWPORT_ID);\n\n    const magnifyElement = element.querySelector(\n      '.magnifyTool'\n    ) as HTMLDivElement;\n\n    if (!magnifyElement) {\n      return;\n    }\n\n    magnifyElement.style.top = `${\n      canvasPos[1] - this.configuration.magnifyHeight / 2\n    }px`;\n    magnifyElement.style.left = `${\n      canvasPos[0] - this.configuration.magnifyWidth / 2\n    }px`;\n\n    const { focalPoint, position } = magnifyViewport.getCamera();\n\n    const updatedPosition = <Types.Point3>[\n      position[0] + deltaPointsWorld[0],\n      position[1] + deltaPointsWorld[1],\n      position[2] + deltaPointsWorld[2],\n    ];\n\n    const updatedFocalPoint = <Types.Point3>[\n      focalPoint[0] + deltaPointsWorld[0],\n      focalPoint[1] + deltaPointsWorld[1],\n      focalPoint[2] + deltaPointsWorld[2],\n    ];\n\n    magnifyViewport.setCamera({\n      focalPoint: updatedFocalPoint,\n      position: updatedPosition,\n    });\n\n    magnifyViewport.render();\n  };\n\n  _dragEndCallback = (evt: EventTypes.InteractionEventType) => {\n    const { element } = evt.detail;\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    renderingEngine.disableElement(MAGNIFY_VIEWPORT_ID);\n\n    const viewportElement = element.querySelector('.viewport-element');\n\n    const magnifyToolElement = viewportElement.querySelector(\n      '.magnifyTool'\n    ) as HTMLDivElement;\n\n    viewportElement.removeChild(magnifyToolElement);\n\n    this._deactivateDraw(element);\n    resetElementCursor(element);\n  };\n\n  _activateDraw = (element: HTMLDivElement) => {\n    state.isInteractingWithTool = true;\n\n    element.addEventListener(\n      Events.MOUSE_UP,\n      this._dragEndCallback as EventListener\n    );\n    element.addEventListener(\n      Events.MOUSE_DRAG,\n      this._dragCallback as EventListener\n    );\n    element.addEventListener(\n      Events.MOUSE_CLICK,\n      this._dragEndCallback as EventListener\n    );\n\n    element.addEventListener(\n      Events.TOUCH_END,\n      this._dragEndCallback as EventListener\n    );\n    element.addEventListener(\n      Events.TOUCH_DRAG,\n      this._dragCallback as EventListener\n    );\n  };\n\n  _deactivateDraw = (element: HTMLDivElement) => {\n    state.isInteractingWithTool = false;\n\n    element.removeEventListener(\n      Events.MOUSE_UP,\n      this._dragEndCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.MOUSE_DRAG,\n      this._dragCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.MOUSE_CLICK,\n      this._dragEndCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.TOUCH_END,\n      this._dragEndCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.TOUCH_DRAG,\n      this._dragCallback as EventListener\n    );\n  };\n}\n\nMagnifyTool.toolName = 'Magnify';\nexport default MagnifyTool;\n","import type { Types } from '@cornerstonejs/core';\n\ntype Point = Types.Point2 | Types.Point3;\n\n/**\n * Calculates the distance of a point to another point\n *\n * @param p1 - x,y or x,y,z of the point\n * @param p2 - x,y or x,y,z of the point\n * @returns distance\n */\nexport default function distanceToPoint(p1: Point, p2: Point): number {\n  if (p1.length !== p2.length) {\n    throw Error('Both points should have the same dimensionality');\n  }\n\n  const [x1, y1, z1 = 0] = p1;\n  const [x2, y2, z2 = 0] = p2;\n\n  return Math.sqrt(\n    Math.pow(x1 - x2, 2) + Math.pow(y1 - y2, 2) + Math.pow(z1 - z2, 2)\n  );\n}\n","import { distanceToPoint } from '../point';\nimport { canvasCoordinates } from './_types';\n\n/**\n * It takes the canvas coordinates of the circle corners and returns the top left and bottom right\n * corners of it\n *\n * @param circleCanvasPoints - The coordinates of the circle in the canvas.\n * @returns An array of two points.\n */\nexport default function getCanvasCircleRadius(\n  circleCanvasPoints: canvasCoordinates\n): number {\n  const [center, end] = circleCanvasPoints;\n  return distanceToPoint(center, end);\n}\n","import type { Types } from '@cornerstonejs/core';\nimport { distanceToPoint } from '../point';\nimport { canvasCoordinates } from './_types';\n\n/**\n * It takes the canvas coordinates of the circle corners (wrapping square rectangle)\n * and returns the top left and bottom right\n * corners of it\n *\n * @param circleCanvasPoints - The coordinates of the circle in the canvas.\n * @returns An array of two points.\n */\nexport default function getCanvasCircleCorners(\n  circleCanvasPoints: canvasCoordinates\n): Array<Types.Point2> {\n  const [center, end] = circleCanvasPoints;\n  const radius = distanceToPoint(center, end);\n\n  const topLeft = <Types.Point2>[center[0] - radius, center[1] - radius];\n  const bottomRight = <Types.Point2>[center[0] + radius, center[1] + radius];\n\n  return [topLeft, bottomRight];\n}\n","import { vec2, vec3 } from 'gl-matrix';\nimport {\n  getEnabledElement,\n  eventTarget,\n  utilities as csUtils,\n} from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\nimport {\n  SegmentationRepresentations,\n  ToolModes,\n  Events as cstEvents,\n} from '../enums';\nimport { ToolGroupManager, state } from '../store';\nimport { debounce } from '../utilities';\nimport { ToolModeChangedEventType } from '../types/EventTypes';\nimport { segmentation } from '..';\nimport { EventTypes, IToolGroup } from '../types';\nimport {\n  AnnotationTool,\n  AdvancedMagnifyTool,\n  SegmentationDisplayTool,\n} from './';\nimport { distanceToPoint } from '../utilities/math/point';\n\nconst MAGNIFY_CLASSNAME = 'advancedMagnifyTool';\nconst MAGNIFY_VIEWPORT_INITIAL_RADIUS = 125;\n\n// TODO: find a better to identify segmentation actors\nconst isSegmentation = (actor) => actor.uid !== actor.referenceId;\n\nexport type AutoPanCallbackData = {\n  points: {\n    currentPosition: {\n      canvas: Types.Point2;\n      world: Types.Point3;\n    };\n    newPosition: {\n      canvas: Types.Point2;\n      world: Types.Point3;\n    };\n  };\n  delta: {\n    canvas: Types.Point2;\n    world: Types.Point3;\n  };\n};\n\nexport type AutoPanCallback = (data: AutoPanCallbackData) => void;\n\nclass AdvancedMagnifyViewport {\n  private _viewportId: string;\n  private _sourceEnabledElement: Types.IEnabledElement;\n  private _enabledElement: Types.IEnabledElement = null;\n  private _sourceToolGroup: IToolGroup = null;\n  private _magnifyToolGroup: IToolGroup = null;\n  private _isViewportReady = false;\n  private _radius = 0;\n  private _resized = false;\n  private _resizeViewportAsync: () => void;\n  private _canAutoPan = false;\n  private _autoPan: {\n    enabled: boolean;\n    padding: number;\n    callback: AutoPanCallback;\n  };\n  public position: Types.Point2;\n  public zoomFactor: number;\n  public visible: boolean;\n\n  constructor({\n    magnifyViewportId,\n    sourceEnabledElement,\n    radius = MAGNIFY_VIEWPORT_INITIAL_RADIUS,\n    position = [0, 0],\n    zoomFactor,\n    autoPan,\n  }: {\n    magnifyViewportId?: string;\n    sourceEnabledElement: Types.IEnabledElement;\n    radius?: number;\n    position?: Types.Point2;\n    zoomFactor: number;\n    autoPan: {\n      enabled: boolean;\n      padding: number;\n      callback: AutoPanCallback;\n    };\n  }) {\n    // Private properties\n    this._viewportId = magnifyViewportId ?? csUtils.uuidv4();\n    this._sourceEnabledElement = sourceEnabledElement;\n    this._autoPan = autoPan;\n\n    // Pulic properties\n    this.radius = radius;\n    this.position = position;\n    this.zoomFactor = zoomFactor;\n    this.visible = true;\n\n    this._browserMouseDownCallback = this._browserMouseDownCallback.bind(this);\n    this._browserMouseUpCallback = this._browserMouseUpCallback.bind(this);\n    this._handleToolModeChanged = this._handleToolModeChanged.bind(this);\n    this._mouseDragCallback = this._mouseDragCallback.bind(this);\n    this._resizeViewportAsync = <() => void>(\n      debounce(this._resizeViewport.bind(this), 1)\n    );\n\n    this._initialize();\n  }\n\n  public get sourceEnabledElement() {\n    return this._sourceEnabledElement;\n  }\n\n  public get viewportId() {\n    return this._viewportId;\n  }\n\n  public get radius() {\n    return this._radius;\n  }\n\n  public set radius(radius: number) {\n    // Just moving the magnifying glass around may change its radius\n    // by very small amount due to floating number precision\n    if (Math.abs(this._radius - radius) > 0.00001) {\n      this._radius = radius;\n      this._resized = true;\n    }\n  }\n\n  public update() {\n    const { radius, position, visible } = this;\n    const { viewport } = this._enabledElement;\n    const { element } = viewport;\n    const size = 2 * radius;\n    const [x, y] = position;\n\n    if (this._resized) {\n      this._resizeViewportAsync();\n      this._resized = false;\n    }\n\n    Object.assign(element.style, {\n      display: visible ? 'block' : 'hidden',\n      width: `${size}px`,\n      height: `${size}px`,\n      left: `${-radius}px`,\n      top: `${-radius}px`,\n      transform: `translate(${x}px, ${y}px)`,\n    });\n\n    if (this._isViewportReady) {\n      this._syncViewports();\n      viewport.render();\n    }\n  }\n\n  public dispose() {\n    const { viewport } = this._enabledElement;\n    const { element } = viewport;\n    const renderingEngine = viewport.getRenderingEngine();\n\n    this._removeEventListeners(element);\n    renderingEngine.disableElement(viewport.id);\n\n    if (element.parentNode) {\n      element.parentNode.removeChild(element);\n    }\n  }\n\n  private _handleToolModeChanged(evt: ToolModeChangedEventType) {\n    const { _magnifyToolGroup: magnifyToolGroup } = this;\n    const { toolGroupId, toolName, mode, toolBindingsOptions } = evt.detail;\n\n    if (this._sourceToolGroup?.id !== toolGroupId) {\n      return;\n    }\n\n    switch (mode) {\n      case ToolModes.Active:\n        magnifyToolGroup.setToolActive(toolName, toolBindingsOptions);\n        break;\n      case ToolModes.Passive:\n        magnifyToolGroup.setToolPassive(toolName);\n        break;\n      case ToolModes.Enabled:\n        magnifyToolGroup.setToolEnabled(toolName);\n        break;\n      case ToolModes.Disabled:\n        magnifyToolGroup.setToolDisabled(toolName);\n        break;\n      default:\n        throw new Error(`Unknow tool mode (${mode})`);\n    }\n  }\n\n  // Children elements need to inherit border-radius otherwise the canvas will\n  // trigger events when moving/dragging/clicking on the corners outside of the\n  // border (circle) region.\n  private _inheritBorderRadius(magnifyElement) {\n    const viewport = magnifyElement.querySelector('.viewport-element');\n    const canvas = magnifyElement.querySelector('.cornerstone-canvas');\n\n    viewport.style.borderRadius = 'inherit';\n    canvas.style.borderRadius = 'inherit';\n  }\n\n  private _createViewportNode(): HTMLDivElement {\n    const magnifyElement = document.createElement('div');\n    const { radius } = this;\n    const size = radius * 2;\n\n    magnifyElement.classList.add(MAGNIFY_CLASSNAME);\n\n    // Update the style and move the element out of the screen with \"transforms\"\n    // to make it \"invisible\" and preserving its size because when \"display\" is\n    // set to \"none\" both \"offsetWidth\" and \"offsetHeight\" returns zero. Another\n    // way would be setting \"visibility\" to \"hidden\" but \"transforms\" is used\n    // because it is already being updated when update() is called\n    Object.assign(magnifyElement.style, {\n      display: 'block',\n      width: `${size}px`,\n      height: `${size}px`,\n      position: 'absolute',\n      overflow: 'hidden',\n      borderRadius: '50%',\n      boxSizing: 'border-box',\n      left: `${-radius}px`,\n      top: `${-radius}px`,\n      transform: `translate(-1000px, -1000px)`,\n    });\n\n    return magnifyElement;\n  }\n\n  private _convertZoomFactorToParalellScale(\n    viewport,\n    magnifyViewport,\n    zoomFactor\n  ) {\n    const { parallelScale } = viewport.getCamera();\n    const canvasRatio =\n      magnifyViewport.canvas.offsetWidth / viewport.canvas.offsetWidth;\n\n    return parallelScale * (1 / zoomFactor) * canvasRatio;\n  }\n\n  private _isStackViewport(\n    viewport: Types.IViewport\n  ): viewport is Types.IStackViewport {\n    return 'setStack' in viewport;\n  }\n\n  private _isVolumeViewport(\n    viewport: Types.IViewport\n  ): viewport is Types.IVolumeViewport {\n    return 'addVolumes' in viewport;\n  }\n\n  private _cloneToolGroups(\n    sourceViewport: Types.IViewport,\n    magnifyViewport: Types.IViewport\n  ) {\n    const sourceActors = sourceViewport.getActors();\n    const magnifyToolGroupId = `${magnifyViewport.id}-toolGroup`;\n    const sourceToolGroup = ToolGroupManager.getToolGroupForViewport(\n      sourceViewport.id,\n      sourceViewport.renderingEngineId\n    );\n\n    const magnifyToolGroup = sourceToolGroup.clone(\n      magnifyToolGroupId,\n      (toolName) => {\n        const toolInstance = sourceToolGroup.getToolInstance(toolName);\n        const isAnnotationTool =\n          toolInstance instanceof AnnotationTool &&\n          !(toolInstance instanceof AdvancedMagnifyTool);\n\n        return (\n          isAnnotationTool || toolName === SegmentationDisplayTool.toolName\n        );\n      }\n    );\n\n    magnifyToolGroup.addViewport(\n      magnifyViewport.id,\n      magnifyViewport.renderingEngineId\n    );\n\n    sourceActors.filter(isSegmentation).forEach((actor) => {\n      segmentation.addSegmentationRepresentations(magnifyToolGroupId, [\n        {\n          segmentationId: actor.referenceId,\n          type: SegmentationRepresentations.Labelmap,\n        },\n      ]);\n    });\n\n    return { sourceToolGroup, magnifyToolGroup };\n  }\n\n  private _cloneStack(\n    sourceViewport: Types.IStackViewport,\n    magnifyViewport: Types.IStackViewport\n  ): void {\n    const imageIds = sourceViewport.getImageIds();\n\n    magnifyViewport.setStack(imageIds).then(() => {\n      this._isViewportReady = true;\n      this.update();\n    });\n  }\n\n  private _cloneVolumes(\n    sourceViewport: Types.IVolumeViewport,\n    magnifyViewport: Types.IVolumeViewport\n  ): Types.IVolumeViewport {\n    const actors = sourceViewport.getActors();\n    const volumeInputArray: Types.IVolumeInput[] = actors\n      .filter((actor) => !isSegmentation(actor))\n      .map((actor) => ({ volumeId: actor.uid }));\n\n    magnifyViewport.setVolumes(volumeInputArray).then(() => {\n      this._isViewportReady = true;\n      this.update();\n    });\n\n    return magnifyViewport;\n  }\n\n  private _cloneViewport(sourceViewport, magnifyElement) {\n    const { viewportId: magnifyViewportId } = this;\n    const renderingEngine =\n      sourceViewport.getRenderingEngine() as Types.IRenderingEngine;\n\n    const { options: sourceViewportOptions } = sourceViewport;\n    const viewportInput = {\n      element: magnifyElement,\n      viewportId: magnifyViewportId,\n      type: sourceViewport.type,\n      defaultOptions: { ...sourceViewportOptions },\n    };\n\n    renderingEngine.enableElement(viewportInput);\n\n    const magnifyViewport = <Types.IViewport>(\n      renderingEngine.getViewport(magnifyViewportId)\n    );\n\n    if (this._isStackViewport(sourceViewport)) {\n      this._cloneStack(sourceViewport, magnifyViewport as Types.IStackViewport);\n    } else if (this._isVolumeViewport(sourceViewport)) {\n      this._cloneVolumes(\n        sourceViewport,\n        magnifyViewport as Types.IVolumeViewport\n      );\n    }\n\n    // Prevent handling events outside of the magnifying glass because it has rounded border\n    this._inheritBorderRadius(magnifyElement);\n\n    const toolGroups = this._cloneToolGroups(sourceViewport, magnifyViewport);\n\n    this._sourceToolGroup = toolGroups.sourceToolGroup;\n    this._magnifyToolGroup = toolGroups.magnifyToolGroup;\n  }\n\n  private _cancelMouseEventCallback(evt): void {\n    evt.stopPropagation();\n    evt.preventDefault();\n  }\n\n  private _browserMouseUpCallback(evt) {\n    const { element } = this._enabledElement.viewport;\n\n    document.removeEventListener('mouseup', this._browserMouseUpCallback);\n\n    // Restrict the scope of magnifying glass events again\n    element.addEventListener('mouseup', this._cancelMouseEventCallback);\n    element.addEventListener('mousemove', this._cancelMouseEventCallback);\n  }\n\n  private _browserMouseDownCallback(evt) {\n    const { element } = this._enabledElement.viewport;\n\n    // Enable auto pan only when user clicks inside of the magnifying glass\n    // viewport otherwise it can move when interacting with annotations outside\n    // of the magnifying glass or when trying to move/resize it.\n    this._canAutoPan = !!evt.target?.closest('.advancedMagnifyTool');\n\n    // Wait for the mouseup event to restrict the scope of magnifying glass events again\n    document.addEventListener('mouseup', this._browserMouseUpCallback);\n\n    // Allow mouseup and mousemove events to make it possible to manipulate the\n    // tool when passing the mouse over the magnifying glass (dragging a handle).\n    // Just relying on state.isInteractingWithTool does not work because there\n    // is a 400ms delay to handle double click (see mouseDownListener) which\n    // makes the magnifying glass unresponsive for that amount of time.\n    element.removeEventListener('mouseup', this._cancelMouseEventCallback);\n    element.removeEventListener('mousemove', this._cancelMouseEventCallback);\n  }\n\n  private _mouseDragCallback(evt: EventTypes.InteractionEventType) {\n    if (!state.isInteractingWithTool) {\n      return;\n    }\n\n    const { _autoPan: autoPan } = this;\n\n    if (!autoPan.enabled || !this._canAutoPan) {\n      return;\n    }\n\n    const { currentPoints } = evt.detail;\n    const { viewport } = this._enabledElement;\n    const { canvasToWorld } = viewport;\n    const { canvas: canvasCurrent } = currentPoints;\n    const { radius: magnifyRadius } = this;\n    const canvasCenter: Types.Point2 = [magnifyRadius, magnifyRadius];\n    const dist = distanceToPoint(canvasCenter, canvasCurrent);\n    const maxDist = magnifyRadius - autoPan.padding;\n\n    // No need to pan if it is not close to the border\n    if (dist <= maxDist) {\n      return;\n    }\n\n    const panDist = dist - maxDist;\n    const canvasDeltaPos = vec2.sub(\n      vec2.create(),\n      canvasCurrent,\n      canvasCenter\n    ) as Types.Point2;\n\n    vec2.normalize(canvasDeltaPos, canvasDeltaPos);\n    vec2.scale(canvasDeltaPos, canvasDeltaPos, panDist);\n\n    const newCanvasPosition = vec2.add(\n      vec2.create(),\n      this.position,\n      canvasDeltaPos\n    ) as Types.Point2;\n    const currentWorldPos = canvasToWorld(this.position);\n    const newWorldPos = canvasToWorld(newCanvasPosition);\n    const worldDeltaPos = vec3.sub(\n      vec3.create(),\n      newWorldPos,\n      currentWorldPos\n    ) as Types.Point3;\n\n    const autoPanCallbackData: AutoPanCallbackData = {\n      points: {\n        currentPosition: {\n          canvas: this.position,\n          world: currentWorldPos,\n        },\n        newPosition: {\n          canvas: newCanvasPosition,\n          world: newWorldPos,\n        },\n      },\n      delta: {\n        canvas: canvasDeltaPos,\n        world: worldDeltaPos,\n      },\n    };\n\n    autoPan.callback(autoPanCallbackData);\n  }\n\n  private _addBrowserEventListeners(element) {\n    // mousedown on document is handled in the capture phase because the other\n    // mousedown event listener added to the magnifying glass element does not\n    // allow the event to buble up and reach the document.\n    document.addEventListener(\n      'mousedown',\n      this._browserMouseDownCallback,\n      true\n    );\n\n    // All mouse events should not buble up avoiding the source viewport from\n    // handling those events resulting in unexpected behaviors.\n    element.addEventListener('mousedown', this._cancelMouseEventCallback);\n    element.addEventListener('mouseup', this._cancelMouseEventCallback);\n    element.addEventListener('mousemove', this._cancelMouseEventCallback);\n    element.addEventListener('dblclick', this._cancelMouseEventCallback);\n  }\n\n  private _removeBrowserEventListeners(element) {\n    document.removeEventListener(\n      'mousedown',\n      this._browserMouseDownCallback,\n      true\n    );\n    document.removeEventListener('mouseup', this._browserMouseUpCallback);\n\n    element.removeEventListener('mousedown', this._cancelMouseEventCallback);\n    element.removeEventListener('mouseup', this._cancelMouseEventCallback);\n    element.removeEventListener('mousemove', this._cancelMouseEventCallback);\n    element.removeEventListener('dblclick', this._cancelMouseEventCallback);\n  }\n\n  private _addEventListeners(element) {\n    eventTarget.addEventListener(\n      cstEvents.TOOL_MODE_CHANGED,\n      this._handleToolModeChanged\n    );\n\n    element.addEventListener(\n      cstEvents.MOUSE_MOVE,\n      this._mouseDragCallback as EventListener\n    );\n\n    element.addEventListener(\n      cstEvents.MOUSE_DRAG,\n      this._mouseDragCallback as EventListener\n    );\n\n    this._addBrowserEventListeners(element);\n  }\n\n  private _removeEventListeners(element) {\n    eventTarget.removeEventListener(\n      cstEvents.TOOL_MODE_CHANGED,\n      this._handleToolModeChanged\n    );\n\n    element.addEventListener(\n      cstEvents.MOUSE_MOVE,\n      this._mouseDragCallback as EventListener\n    );\n\n    element.addEventListener(\n      cstEvents.MOUSE_DRAG,\n      this._mouseDragCallback as EventListener\n    );\n\n    this._removeBrowserEventListeners(element);\n  }\n\n  private _initialize() {\n    const { _sourceEnabledElement: sourceEnabledElement } = this;\n    const { viewport: sourceViewport } = sourceEnabledElement;\n    const { canvas: sourceCanvas } = sourceViewport;\n    const magnifyElement = this._createViewportNode();\n\n    sourceCanvas.parentNode.appendChild(magnifyElement);\n\n    this._addEventListeners(magnifyElement);\n    this._cloneViewport(sourceViewport, magnifyElement);\n    this._enabledElement = getEnabledElement(magnifyElement);\n  }\n\n  private _syncViewportsCameras(sourceViewport, magnifyViewport) {\n    const worldPos = sourceViewport.canvasToWorld(this.position);\n\n    // Use the original viewport for the base for parallelScale\n    const parallelScale = this._convertZoomFactorToParalellScale(\n      sourceViewport,\n      magnifyViewport,\n      this.zoomFactor\n    );\n\n    const { focalPoint, position, viewPlaneNormal } =\n      magnifyViewport.getCamera();\n\n    const distance = Math.sqrt(\n      Math.pow(focalPoint[0] - position[0], 2) +\n        Math.pow(focalPoint[1] - position[1], 2) +\n        Math.pow(focalPoint[2] - position[2], 2)\n    );\n\n    const updatedFocalPoint = <Types.Point3>[\n      worldPos[0],\n      worldPos[1],\n      worldPos[2],\n    ];\n\n    const updatedPosition = <Types.Point3>[\n      updatedFocalPoint[0] + distance * viewPlaneNormal[0],\n      updatedFocalPoint[1] + distance * viewPlaneNormal[1],\n      updatedFocalPoint[2] + distance * viewPlaneNormal[2],\n    ];\n\n    magnifyViewport.setCamera({\n      parallelScale,\n      focalPoint: updatedFocalPoint,\n      position: updatedPosition,\n    });\n  }\n\n  private _syncStackViewports(\n    sourceViewport: Types.IStackViewport,\n    magnifyViewport: Types.IStackViewport\n  ) {\n    magnifyViewport.setImageIdIndex(sourceViewport.getCurrentImageIdIndex());\n  }\n\n  private _syncViewports() {\n    const { viewport: sourceViewport } = this._sourceEnabledElement;\n    const { viewport: magnifyViewport } = this._enabledElement;\n    const sourceProperties = sourceViewport.getProperties();\n\n    magnifyViewport.setProperties(sourceProperties);\n    this._syncViewportsCameras(sourceViewport, magnifyViewport);\n\n    if (this._isStackViewport(sourceViewport)) {\n      this._syncStackViewports(\n        sourceViewport as Types.IStackViewport,\n        magnifyViewport as Types.IStackViewport\n      );\n    }\n  }\n\n  private _resizeViewport() {\n    const { viewport } = this._enabledElement;\n    const renderingEngine = viewport.getRenderingEngine();\n\n    renderingEngine.resize();\n  }\n}\n\nexport { AdvancedMagnifyViewport as default, AdvancedMagnifyViewport };\n","import { vec3 } from 'gl-matrix';\nimport {\n  eventTarget,\n  Enums,\n  getRenderingEngine,\n  CONSTANTS,\n} from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\nimport { AnnotationRemovedEventType } from '../types/EventTypes';\nimport { Events as cstEvents } from '../enums';\nimport {\n  AdvancedMagnifyViewport,\n  AutoPanCallback,\n} from './AdvancedMagnifyViewport';\nimport { AdvancedMagnifyAnnotation } from '../types/ToolSpecificAnnotationTypes';\n\n// Defined the tool name internally instead of importing\n// AdvangedMagnifyTool due to cyclic dependency\nconst ADVANCED_MAGNIFY_TOOL_NAME = 'AdvancedMagnify';\n\nconst PARALLEL_THRESHOLD = 1 - CONSTANTS.EPSILON;\nconst { Events } = Enums;\n\nexport type MagnifyViewportInfo = {\n  // Viewport id to be used or new v4 compliant GUID is used instead\n  magnifyViewportId?: string;\n  // Enabled element where the magnifying glass shall be added to\n  sourceEnabledElement: Types.IEnabledElement;\n  // Magnifying glass position (center)\n  position: Types.Point2;\n  // Magnifying glass radius (pixels)\n  radius: number;\n  // Amount of magnification applied to the magnifying glass image compared to the source viewport.\n  zoomFactor: number;\n  // Allow panning the viewport when moving an annotation point close to the border of the magnifying glass\n  autoPan: {\n    // Enable or disable auto pan\n    enabled: boolean;\n    // Minimum distance to the border before start auto panning\n    padding: number;\n    // Callback function responsible for updating the annotation (circle)\n    // that contains the magnifying viewport\n    callback: AutoPanCallback;\n  };\n};\n\ntype MagnifyViewportsMapEntry = {\n  annotation: AdvancedMagnifyAnnotation;\n  magnifyViewport: AdvancedMagnifyViewport;\n};\n\n/**\n * Manager responsible for creating, storing and destroying magnifying glass\n * viewports. There are no restrictions to create a new instance of it but it\n * should be accessed through getInstance() method.\n */\nclass AdvancedMagnifyViewportManager {\n  private static _singleton: AdvancedMagnifyViewportManager;\n  private _magnifyViewportsMap: Map<string, MagnifyViewportsMapEntry>;\n\n  constructor() {\n    this._magnifyViewportsMap = new Map();\n    this._initialize();\n  }\n\n  /**\n   * Creates a new magnifying glass viewport manager instance when this method is\n   * called for the first time or return the instance previously created for\n   * any subsequent call (singleton pattern).\n   * @returns A magnifying viewport manager instance\n   */\n  public static getInstance(): AdvancedMagnifyViewportManager {\n    AdvancedMagnifyViewportManager._singleton =\n      AdvancedMagnifyViewportManager._singleton ??\n      new AdvancedMagnifyViewportManager();\n\n    return AdvancedMagnifyViewportManager._singleton;\n  }\n\n  /**\n   * Creates a new magnifying glass viewport instance\n   * @param viewportInfo - Viewport data used when creating a new magnifying glass viewport\n   * @returns A magnifying glass viewport instance\n   */\n  public createViewport = (\n    annotation: AdvancedMagnifyAnnotation,\n    viewportInfo: MagnifyViewportInfo\n  ): AdvancedMagnifyViewport => {\n    const {\n      magnifyViewportId,\n      sourceEnabledElement,\n      position,\n      radius,\n      zoomFactor,\n      autoPan,\n    } = viewportInfo;\n    const { viewport: sourceViewport } = sourceEnabledElement;\n    const { element: sourceElement } = sourceViewport;\n\n    const magnifyViewport = new AdvancedMagnifyViewport({\n      magnifyViewportId,\n      sourceEnabledElement,\n      radius,\n      position,\n      zoomFactor,\n      autoPan,\n    });\n\n    this._addSourceElementEventListener(sourceElement);\n    this._magnifyViewportsMap.set(magnifyViewport.viewportId, {\n      annotation,\n      magnifyViewport,\n    });\n\n    return magnifyViewport;\n  };\n\n  /**\n   * Find and return a magnifying glass viewport based on its id\n   * @param magnifyViewportId - Magnifying glass viewport id\n   * @returns A magnifying glass viewport instance\n   */\n  public getViewport(magnifyViewportId: string): AdvancedMagnifyViewport {\n    return this._magnifyViewportsMap.get(magnifyViewportId)?.magnifyViewport;\n  }\n\n  /**\n   * Release all magnifying glass viewport instances and remove all event\n   * listeners making all objects available to be garbage collected.\n   */\n  public dispose() {\n    this._removeEventListeners();\n    this._destroyViewports();\n  }\n\n  private _destroyViewport(magnifyViewportId: string) {\n    const magnifyViewportMapEntry =\n      this._magnifyViewportsMap.get(magnifyViewportId);\n\n    if (magnifyViewportMapEntry) {\n      const { magnifyViewport } = magnifyViewportMapEntry;\n      const { viewport: sourceViewport } = magnifyViewport.sourceEnabledElement;\n      const { element: sourceElement } = sourceViewport;\n\n      this._removeSourceElementEventListener(sourceElement);\n\n      magnifyViewport.dispose();\n      this._magnifyViewportsMap.delete(magnifyViewportId);\n    }\n  }\n\n  private _destroyViewports() {\n    const magnifyViewportIds = Array.from(this._magnifyViewportsMap.keys());\n\n    magnifyViewportIds.forEach((magnifyViewportId) =>\n      this._destroyViewport(magnifyViewportId)\n    );\n  }\n\n  private _annotationRemovedCallback = (evt: AnnotationRemovedEventType) => {\n    const { annotation } = evt.detail;\n\n    if (annotation.metadata.toolName !== ADVANCED_MAGNIFY_TOOL_NAME) {\n      return;\n    }\n\n    this._destroyViewport(annotation.data.magnifyViewportId);\n  };\n\n  private _getMagnifyViewportsMapEntriesBySourceViewportId(sourceViewportId) {\n    const magnifyViewportsMapEntries = Array.from(\n      this._magnifyViewportsMap.values()\n    );\n\n    return magnifyViewportsMapEntries.filter(({ magnifyViewport }) => {\n      const { viewport } = magnifyViewport.sourceEnabledElement;\n      return viewport.id === sourceViewportId;\n    });\n  }\n\n  private _newStackImageCallback = (\n    evt: Types.EventTypes.StackNewImageEvent\n  ) => {\n    const { viewportId: sourceViewportId, imageId } = evt.detail;\n    const magnifyViewportsMapEntries =\n      this._getMagnifyViewportsMapEntriesBySourceViewportId(sourceViewportId);\n\n    magnifyViewportsMapEntries.forEach(({ annotation }) => {\n      annotation.metadata.referencedImageId = imageId;\n      annotation.invalidated = true;\n    });\n  };\n\n  private _newVolumeImageCallback = (\n    evt: Types.EventTypes.VolumeNewImageEvent\n  ) => {\n    const { renderingEngineId, viewportId: sourceViewportId } = evt.detail;\n    const renderingEngine = getRenderingEngine(renderingEngineId);\n    const sourceViewport = renderingEngine.getViewport(sourceViewportId);\n    const { viewPlaneNormal: currentViewPlaneNormal } =\n      sourceViewport.getCamera();\n\n    const magnifyViewportsMapEntries =\n      this._getMagnifyViewportsMapEntriesBySourceViewportId(sourceViewportId);\n\n    magnifyViewportsMapEntries.forEach(({ annotation }) => {\n      const { viewPlaneNormal } = annotation.metadata;\n\n      // Compare the normal to make sure the volume is not rotate in 3D space\n      const isParallel =\n        Math.abs(vec3.dot(viewPlaneNormal, currentViewPlaneNormal)) >\n        PARALLEL_THRESHOLD;\n\n      if (!isParallel) {\n        return;\n      }\n\n      const { handles } = annotation.data;\n      const worldImagePlanePoint = sourceViewport.canvasToWorld([0, 0]);\n      const vecHandleToImagePlane = vec3.sub(\n        vec3.create(),\n        worldImagePlanePoint,\n        handles.points[0]\n      );\n      const worldDist = vec3.dot(vecHandleToImagePlane, currentViewPlaneNormal);\n      const worldDelta = vec3.scale(\n        vec3.create(),\n        currentViewPlaneNormal,\n        worldDist\n      );\n\n      // Move all handle points to the image plane to make the annotation visible\n      for (let i = 0, len = handles.points.length; i < len; i++) {\n        const point = handles.points[i];\n\n        point[0] += worldDelta[0];\n        point[1] += worldDelta[1];\n        point[2] += worldDelta[2];\n      }\n\n      annotation.invalidated = true;\n    });\n  };\n\n  private _addEventListeners() {\n    eventTarget.addEventListener(\n      cstEvents.ANNOTATION_REMOVED,\n      this._annotationRemovedCallback\n    );\n  }\n\n  private _removeEventListeners() {\n    eventTarget.removeEventListener(\n      cstEvents.ANNOTATION_REMOVED,\n      this._annotationRemovedCallback\n    );\n  }\n\n  private _addSourceElementEventListener(element) {\n    element.addEventListener(\n      Events.STACK_NEW_IMAGE,\n      this._newStackImageCallback\n    );\n\n    element.addEventListener(\n      Events.VOLUME_NEW_IMAGE,\n      this._newVolumeImageCallback\n    );\n  }\n\n  private _removeSourceElementEventListener(element) {\n    element.removeEventListener(\n      Events.STACK_NEW_IMAGE,\n      this._newStackImageCallback\n    );\n\n    element.removeEventListener(\n      Events.VOLUME_NEW_IMAGE,\n      this._newVolumeImageCallback\n    );\n  }\n\n  private _initialize() {\n    this._addEventListeners();\n  }\n}\n\nexport {\n  AdvancedMagnifyViewportManager as default,\n  AdvancedMagnifyViewportManager,\n};\n","import { AnnotationTool } from './base';\n\nimport {\n  getEnabledElement,\n  eventTarget,\n  triggerEvent,\n  utilities as csUtils,\n} from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\nimport {\n  addAnnotation,\n  getAnnotations,\n} from '../stateManagement/annotation/annotationState';\nimport { isAnnotationLocked } from '../stateManagement/annotation/annotationLocking';\nimport { isAnnotationVisible } from '../stateManagement/annotation/annotationVisibility';\nimport {\n  drawCircle as drawCircleSvg,\n  drawHandles as drawHandlesSvg,\n} from '../drawingSvg';\nimport { state } from '../store';\nimport { Events, MouseBindings, KeyboardBindings } from '../enums';\nimport { getViewportIdsWithToolToRender } from '../utilities/viewportFilters';\nimport {\n  resetElementCursor,\n  hideElementCursor,\n} from '../cursors/elementCursor';\nimport {\n  EventTypes,\n  ToolHandle,\n  PublicToolProps,\n  ToolProps,\n  SVGDrawingHelper,\n} from '../types';\nimport { AdvancedMagnifyAnnotation } from '../types/ToolSpecificAnnotationTypes';\n\nimport { AnnotationCompletedEventDetail } from '../types/EventTypes';\nimport triggerAnnotationRenderForViewportIds from '../utilities/triggerAnnotationRenderForViewportIds';\nimport { StyleSpecifier } from '../types/AnnotationStyle';\nimport { getCanvasCircleRadius } from '../utilities/math/circle';\nimport AdvancedMagnifyViewportManager from './AdvancedMagnifyViewportManager';\nimport type { AutoPanCallbackData } from './AdvancedMagnifyViewport';\n\nclass AdvancedMagnifyTool extends AnnotationTool {\n  static toolName;\n\n  magnifyViewportManager: AdvancedMagnifyViewportManager;\n  touchDragCallback: any;\n  mouseDragCallback: any;\n  editData: {\n    annotation: any;\n    viewportIdsToRender: Array<string>;\n    handleIndex?: number;\n    newAnnotation?: boolean;\n    hasMoved?: boolean;\n  } | null;\n  isDrawing: boolean;\n\n  constructor(\n    toolProps: PublicToolProps = {},\n    defaultToolProps: ToolProps = {\n      supportedInteractionTypes: ['Mouse', 'Touch'],\n      configuration: {\n        shadow: true,\n        magnifyingGlass: {\n          radius: 125, // px\n          zoomFactor: 2.5,\n          zoomFactorList: [2.5, 3, 3.5, 4, 4.5, 5],\n          autoPan: {\n            enabled: true,\n            padding: 10, // px\n          },\n        },\n        actions: [\n          {\n            method: 'showZoomFactorsList',\n            bindings: [\n              {\n                mouseButton: MouseBindings.Secondary,\n                modifierKey: KeyboardBindings.Shift,\n              },\n            ],\n          },\n        ],\n      },\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n    this.magnifyViewportManager = AdvancedMagnifyViewportManager.getInstance();\n  }\n\n  /**\n   * Based on the current position of the mouse and the current imageId to create\n   * a CircleROI Annotation and stores it in the annotationManager\n   *\n   * @param evt -  EventTypes.NormalizedMouseEventType\n   * @returns The annotation object.\n   *\n   */\n  addNewAnnotation = (\n    evt: EventTypes.InteractionEventType\n  ): AdvancedMagnifyAnnotation => {\n    const eventDetail = evt.detail;\n    const { currentPoints, element } = eventDetail;\n    const enabledElement = getEnabledElement(element);\n    const { viewport, renderingEngine } = enabledElement;\n    const worldPos = currentPoints.world;\n    const canvasPos = currentPoints.canvas;\n    const { magnifyingGlass: config } = this.configuration;\n    const { radius, zoomFactor, autoPan } = config;\n\n    const worldHandlesPoints = this._getWorldHandlesPoints(\n      viewport,\n      canvasPos,\n      radius\n    );\n\n    const camera = viewport.getCamera();\n    const { viewPlaneNormal, viewUp } = camera;\n\n    const referencedImageId = this.getReferencedImageId(\n      viewport,\n      worldPos,\n      viewPlaneNormal,\n      viewUp\n    );\n\n    const annotationUID = csUtils.uuidv4();\n    const magnifyViewportId = csUtils.uuidv4();\n    const FrameOfReferenceUID = viewport.getFrameOfReferenceUID();\n\n    const annotation: AdvancedMagnifyAnnotation = {\n      annotationUID,\n      highlighted: true,\n      invalidated: true,\n      metadata: {\n        toolName: this.getToolName(),\n        viewPlaneNormal: <Types.Point3>[...viewPlaneNormal],\n        viewUp: <Types.Point3>[...viewUp],\n        FrameOfReferenceUID,\n        referencedImageId,\n      },\n      data: {\n        sourceViewportId: viewport.id,\n        magnifyViewportId,\n        zoomFactor,\n        handles: {\n          points: worldHandlesPoints,\n          activeHandleIndex: null,\n        },\n      },\n    };\n\n    this.magnifyViewportManager.createViewport(annotation, {\n      magnifyViewportId,\n      sourceEnabledElement: enabledElement,\n      position: canvasPos,\n      radius,\n      zoomFactor,\n      autoPan: {\n        enabled: autoPan.enabled,\n        padding: autoPan.padding,\n        callback: (data: AutoPanCallbackData) => {\n          const annotationPoints = annotation.data.handles.points;\n          const { world: worldDelta } = data.delta;\n\n          for (let i = 0, len = annotationPoints.length; i < len; i++) {\n            annotationPoints[i][0] += worldDelta[0];\n            annotationPoints[i][1] += worldDelta[1];\n            annotationPoints[i][2] += worldDelta[2];\n          }\n        },\n      },\n    });\n\n    addAnnotation(annotation, element);\n\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    evt.preventDefault();\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    return annotation;\n  };\n\n  /**\n   * It returns if the canvas point is near the provided annotation in the provided\n   * element or not. A proximity is passed to the function to determine the\n   * proximity of the point to the annotation in number of pixels.\n   *\n   * @param element - HTML Element\n   * @param annotation - Annotation\n   * @param canvasCoords - Canvas coordinates\n   * @param proximity - Proximity to tool to consider\n   * @returns Boolean, whether the canvas point is near tool\n   */\n  public isPointNearTool = (\n    element: HTMLDivElement,\n    annotation: AdvancedMagnifyAnnotation,\n    canvasCoords: Types.Point2,\n    proximity: number\n  ): boolean => {\n    const enabledElement = getEnabledElement(element);\n    const { viewport } = enabledElement;\n\n    const { data } = annotation;\n    const { points } = data.handles;\n\n    // For some reason Typescript doesn't understand this, so we need to be\n    // more specific about the type\n    const canvasCoordinates = points.map((p) => viewport.worldToCanvas(p)) as [\n      Types.Point2,\n      Types.Point2,\n      Types.Point2,\n      Types.Point2\n    ];\n\n    const canvasTop = canvasCoordinates[0];\n    const canvasBottom = canvasCoordinates[2];\n    const canvasLeft = canvasCoordinates[3];\n    const radius = Math.abs(canvasBottom[1] - canvasTop[1]) * 0.5;\n    const center = [\n      canvasLeft[0] + radius,\n      canvasTop[1] + radius,\n    ] as Types.Point2;\n    const radiusPoint = getCanvasCircleRadius([center, canvasCoords]);\n\n    if (Math.abs(radiusPoint - radius) < proximity * 1.5) {\n      return true;\n    }\n\n    return false;\n  };\n\n  toolSelectedCallback = (\n    evt: EventTypes.InteractionEventType,\n    annotation: AdvancedMagnifyAnnotation\n  ): void => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    annotation.highlighted = true;\n\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    this.editData = {\n      annotation,\n      viewportIdsToRender,\n    };\n\n    hideElementCursor(element);\n\n    this._activateModify(element);\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    evt.preventDefault();\n  };\n\n  handleSelectedCallback = (\n    evt: EventTypes.InteractionEventType,\n    annotation: AdvancedMagnifyAnnotation,\n    handle: ToolHandle\n  ): void => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n    const { data } = annotation;\n\n    annotation.highlighted = true;\n\n    const { points } = data.handles;\n    const handleIndex = points.findIndex((p) => p === handle);\n\n    // Find viewports to render on drag.\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    this.editData = {\n      annotation,\n      viewportIdsToRender,\n      handleIndex,\n    };\n    this._activateModify(element);\n\n    hideElementCursor(element);\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    evt.preventDefault();\n  };\n\n  _endCallback = (evt: EventTypes.InteractionEventType): void => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    const { annotation, viewportIdsToRender, newAnnotation } = this.editData;\n    const { data } = annotation;\n\n    data.handles.activeHandleIndex = null;\n\n    this._deactivateModify(element);\n\n    resetElementCursor(element);\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    this.editData = null;\n    this.isDrawing = false;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    if (newAnnotation) {\n      const eventType = Events.ANNOTATION_COMPLETED;\n\n      const eventDetail: AnnotationCompletedEventDetail = {\n        annotation,\n      };\n\n      triggerEvent(eventTarget, eventType, eventDetail);\n    }\n  };\n\n  _dragDrawCallback = (evt: EventTypes.InteractionEventType): void => {\n    this.isDrawing = true;\n    const eventDetail = evt.detail;\n    const { element, deltaPoints } = eventDetail;\n    const worldPosDelta = deltaPoints?.world ?? [0, 0, 0];\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    const { annotation, viewportIdsToRender } = this.editData;\n    const { points } = annotation.data.handles;\n\n    points.forEach((point) => {\n      point[0] += worldPosDelta[0];\n      point[1] += worldPosDelta[1];\n      point[2] += worldPosDelta[2];\n    });\n\n    annotation.invalidated = true;\n    this.editData.hasMoved = true;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n  };\n\n  _dragModifyCallback = (evt: EventTypes.InteractionEventType): void => {\n    this.isDrawing = true;\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    const { annotation, viewportIdsToRender, handleIndex } = this.editData;\n    const { data } = annotation;\n\n    if (handleIndex === undefined) {\n      // Moving tool\n      const { deltaPoints } = eventDetail;\n      const worldPosDelta = deltaPoints.world;\n\n      const points = data.handles.points;\n\n      points.forEach((point) => {\n        point[0] += worldPosDelta[0];\n        point[1] += worldPosDelta[1];\n        point[2] += worldPosDelta[2];\n      });\n      annotation.invalidated = true;\n    } else {\n      this._dragHandle(evt);\n      annotation.invalidated = true;\n    }\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n  };\n\n  _dragHandle = (evt: EventTypes.InteractionEventType): void => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n    const enabledElement = getEnabledElement(element);\n    const { viewport } = enabledElement;\n    const { worldToCanvas } = viewport;\n\n    const { annotation } = this.editData;\n    const { data } = annotation;\n    const { points } = data.handles;\n\n    const canvasCoordinates = points.map((p) => worldToCanvas(p));\n    const canvasTop = canvasCoordinates[0];\n    const canvasBottom = canvasCoordinates[2];\n    const canvasLeft = canvasCoordinates[3];\n    const radius = Math.abs(canvasBottom[1] - canvasTop[1]) * 0.5;\n    const canvasCenter: Types.Point2 = [\n      canvasLeft[0] + radius,\n      canvasTop[1] + radius,\n    ];\n\n    const { currentPoints } = eventDetail;\n    const currentCanvasPoints = currentPoints.canvas;\n\n    const newRadius = getCanvasCircleRadius([\n      canvasCenter,\n      currentCanvasPoints,\n    ]);\n    const newWorldHandlesPoints = this._getWorldHandlesPoints(\n      viewport,\n      canvasCenter,\n      newRadius\n    );\n\n    points[0] = newWorldHandlesPoints[0];\n    points[1] = newWorldHandlesPoints[1];\n    points[2] = newWorldHandlesPoints[2];\n    points[3] = newWorldHandlesPoints[3];\n  };\n\n  cancel = (element: HTMLDivElement) => {\n    // If it is mid-draw or mid-modify\n    if (!this.isDrawing) {\n      return;\n    }\n\n    this.isDrawing = false;\n    this._deactivateModify(element);\n    resetElementCursor(element);\n\n    const { annotation, viewportIdsToRender, newAnnotation } = this.editData;\n    const { data } = annotation;\n\n    annotation.highlighted = false;\n    data.handles.activeHandleIndex = null;\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    if (newAnnotation) {\n      const eventType = Events.ANNOTATION_COMPLETED;\n\n      const eventDetail: AnnotationCompletedEventDetail = {\n        annotation,\n      };\n\n      triggerEvent(eventTarget, eventType, eventDetail);\n    }\n\n    this.editData = null;\n    return annotation.annotationUID;\n  };\n\n  _activateModify = (element) => {\n    state.isInteractingWithTool = true;\n\n    element.addEventListener(Events.MOUSE_UP, this._endCallback);\n    element.addEventListener(Events.MOUSE_DRAG, this._dragModifyCallback);\n    element.addEventListener(Events.MOUSE_CLICK, this._endCallback);\n\n    element.addEventListener(Events.TOUCH_END, this._endCallback);\n    element.addEventListener(Events.TOUCH_DRAG, this._dragModifyCallback);\n    element.addEventListener(Events.TOUCH_TAP, this._endCallback);\n  };\n\n  _deactivateModify = (element) => {\n    state.isInteractingWithTool = false;\n\n    element.removeEventListener(Events.MOUSE_UP, this._endCallback);\n    element.removeEventListener(Events.MOUSE_DRAG, this._dragModifyCallback);\n    element.removeEventListener(Events.MOUSE_CLICK, this._endCallback);\n\n    element.removeEventListener(Events.TOUCH_END, this._endCallback);\n    element.removeEventListener(Events.TOUCH_DRAG, this._dragModifyCallback);\n    element.removeEventListener(Events.TOUCH_TAP, this._endCallback);\n  };\n\n  /**\n   * it is used to draw the circleROI annotation in each\n   * request animation frame. It calculates the updated cached statistics if\n   * data is invalidated and cache it.\n   *\n   * @param enabledElement - The Cornerstone's enabledElement.\n   * @param svgDrawingHelper - The svgDrawingHelper providing the context for drawing.\n   */\n  renderAnnotation = (\n    enabledElement: Types.IEnabledElement,\n    svgDrawingHelper: SVGDrawingHelper\n  ): boolean => {\n    let renderStatus = false;\n    const { viewport } = enabledElement;\n    const { element } = viewport;\n\n    let annotations = getAnnotations(this.getToolName(), element);\n\n    if (!annotations?.length) {\n      return renderStatus;\n    }\n\n    annotations = this.filterInteractableAnnotationsForElement(\n      element,\n      annotations\n    );\n\n    annotations = annotations?.filter(\n      (annotation) =>\n        (<AdvancedMagnifyAnnotation>annotation).data.sourceViewportId ===\n        viewport.id\n    );\n\n    if (!annotations?.length) {\n      return renderStatus;\n    }\n\n    const styleSpecifier: StyleSpecifier = {\n      toolGroupId: this.toolGroupId,\n      toolName: this.getToolName(),\n      viewportId: enabledElement.viewport.id,\n    };\n\n    for (let i = 0; i < annotations.length; i++) {\n      const annotation = annotations[i] as AdvancedMagnifyAnnotation;\n      const { annotationUID, data } = annotation;\n      const { magnifyViewportId, zoomFactor, handles } = data;\n      const { points, activeHandleIndex } = handles;\n\n      styleSpecifier.annotationUID = annotationUID;\n\n      const lineWidth = this.getStyle('lineWidth', styleSpecifier, annotation);\n      const lineDash = this.getStyle('lineDash', styleSpecifier, annotation);\n      const color = this.getStyle('color', styleSpecifier, annotation);\n\n      const canvasCoordinates = points.map((p) =>\n        viewport.worldToCanvas(p)\n      ) as Types.Point2[];\n      const canvasTop = canvasCoordinates[0];\n      const canvasBottom = canvasCoordinates[2];\n      const canvasLeft = canvasCoordinates[3];\n      const radius = Math.abs(canvasBottom[1] - canvasTop[1]) * 0.5;\n      const center = [\n        canvasLeft[0] + radius,\n        canvasTop[1] + radius,\n      ] as Types.Point2;\n\n      // If rendering engine has been destroyed while rendering\n      if (!viewport.getRenderingEngine()) {\n        console.warn('Rendering Engine has been destroyed');\n        return renderStatus;\n      }\n\n      let activeHandleCanvasCoords;\n\n      if (!isAnnotationVisible(annotationUID)) {\n        continue;\n      }\n\n      if (\n        !isAnnotationLocked(annotation) &&\n        !this.editData &&\n        activeHandleIndex !== null\n      ) {\n        // Not locked or creating and hovering over handle, so render handle.\n        activeHandleCanvasCoords = [canvasCoordinates[activeHandleIndex]];\n      }\n\n      if (activeHandleCanvasCoords) {\n        const handleGroupUID = '0';\n        drawHandlesSvg(\n          svgDrawingHelper,\n          annotationUID,\n          handleGroupUID,\n          activeHandleCanvasCoords,\n          {\n            color,\n          }\n        );\n      }\n\n      const dataId = `${annotationUID}-advancedMagnify`;\n      const circleUID = '0';\n      drawCircleSvg(\n        svgDrawingHelper,\n        annotationUID,\n        circleUID,\n        center,\n        radius,\n        {\n          color,\n          lineDash,\n          lineWidth,\n        },\n        dataId\n      );\n\n      const magnifyViewport =\n        this.magnifyViewportManager.getViewport(magnifyViewportId);\n\n      magnifyViewport.position = center;\n      magnifyViewport.radius = radius;\n      magnifyViewport.zoomFactor = zoomFactor;\n      magnifyViewport.update();\n\n      renderStatus = true;\n    }\n\n    return renderStatus;\n  };\n\n  // Basic dropdown component that allows the user to select a different zoom factor.\n  // configurations.actions may be changed to use a customized dropdown.\n  public showZoomFactorsList(\n    evt: EventTypes.InteractionEventType,\n    annotation: AdvancedMagnifyAnnotation\n  ) {\n    const { element, currentPoints } = evt.detail;\n    const enabledElement = getEnabledElement(element);\n    const { viewport } = enabledElement;\n    const { canvas: canvasPoint } = currentPoints;\n    const viewportElement = element.querySelector(':scope .viewport-element');\n    const currentZoomFactor = annotation.data.zoomFactor;\n    const remove = () => dropdown.parentElement.removeChild(dropdown);\n\n    const dropdown = this._getZoomFactorsListDropdown(\n      currentZoomFactor,\n      (newZoomFactor) => {\n        if (newZoomFactor !== undefined) {\n          annotation.data.zoomFactor = Number.parseFloat(newZoomFactor);\n          annotation.invalidated = true;\n        }\n\n        remove();\n        viewport.render();\n      }\n    );\n\n    Object.assign(dropdown.style, {\n      left: `${canvasPoint[0]}px`,\n      top: `${canvasPoint[1]}px`,\n    });\n\n    viewportElement.appendChild(dropdown);\n    dropdown.focus();\n  }\n\n  private _getZoomFactorsListDropdown(currentZoomFactor, onChangeCallback) {\n    const { zoomFactorList } = this.configuration.magnifyingGlass;\n    const dropdown = document.createElement('select');\n\n    dropdown.size = 5;\n    Object.assign(dropdown.style, {\n      width: '50px',\n      position: 'absolute',\n    });\n\n    ['mousedown', 'mouseup', 'mousemove', 'click'].forEach((eventName) => {\n      dropdown.addEventListener(eventName, (evt) => evt.stopPropagation());\n    });\n\n    dropdown.addEventListener('change', (evt) => {\n      evt.stopPropagation();\n      onChangeCallback(dropdown.value);\n    });\n\n    dropdown.addEventListener('keydown', (evt) => {\n      const shouldCancel =\n        (evt.keyCode ?? evt.which === 27) ||\n        evt.key?.toLowerCase() === 'escape';\n\n      if (shouldCancel) {\n        evt.stopPropagation();\n        onChangeCallback();\n      }\n    });\n\n    zoomFactorList.forEach((zoomFactor) => {\n      const option = document.createElement('option');\n\n      option.label = zoomFactor;\n      option.title = `Zoom factor ${zoomFactor.toFixed(1)}`;\n      option.value = zoomFactor;\n      option.defaultSelected = zoomFactor === currentZoomFactor;\n\n      dropdown.add(option);\n    });\n\n    return dropdown;\n  }\n\n  private _getWorldHandlesPoints = (\n    viewport,\n    canvasCenterPos,\n    canvasRadius\n  ): Types.Point3[] => {\n    const canvasHandlesPoints = [\n      [canvasCenterPos[0], canvasCenterPos[1] - canvasRadius], // top\n      [canvasCenterPos[0] + canvasRadius, canvasCenterPos[1]], // right\n      [canvasCenterPos[0], canvasCenterPos[1] + canvasRadius], // bottom\n      [canvasCenterPos[0] - canvasRadius, canvasCenterPos[1]], // left\n    ];\n\n    const worldHandlesPoints = canvasHandlesPoints.map((p) =>\n      viewport.canvasToWorld(p)\n    ) as Types.Point3[];\n\n    return worldHandlesPoints;\n  };\n}\n\nAdvancedMagnifyTool.toolName = 'AdvancedMagnify';\n\nexport { AdvancedMagnifyTool as default };\n","import { vec3 } from 'gl-matrix';\nimport {\n  getRenderingEngines,\n  CONSTANTS,\n  utilities as csUtils,\n} from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\nimport { addAnnotation } from '../stateManagement/annotation/annotationState';\n\nimport { drawLine as drawLineSvg } from '../drawingSvg';\nimport { filterViewportsWithToolEnabled } from '../utilities/viewportFilters';\nimport triggerAnnotationRenderForViewportIds from '../utilities/triggerAnnotationRenderForViewportIds';\nimport { PublicToolProps, ToolProps, SVGDrawingHelper } from '../types';\nimport { ReferenceLineAnnotation } from '../types/ToolSpecificAnnotationTypes';\nimport { StyleSpecifier } from '../types/AnnotationStyle';\nimport AnnotationDisplayTool from './base/AnnotationDisplayTool';\n\nconst { EPSILON } = CONSTANTS;\n\n/**\n * @public\n */\n\nclass ReferenceLines extends AnnotationDisplayTool {\n  static toolName;\n\n  public touchDragCallback: any;\n  public mouseDragCallback: any;\n  _throttledCalculateCachedStats: any;\n  editData: {\n    renderingEngine: any;\n    sourceViewport: any;\n    annotation: ReferenceLineAnnotation;\n  } | null = {} as any;\n  isDrawing: boolean;\n  isHandleOutsideImage: boolean;\n\n  constructor(\n    toolProps: PublicToolProps = {},\n    defaultToolProps: ToolProps = {\n      supportedInteractionTypes: ['Mouse', 'Touch'],\n      configuration: {\n        sourceViewportId: '',\n        showFullDimension: false,\n      },\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n\n    // this._throttledCalculateCachedStats = throttle(\n    //   this._calculateCachedStats,\n    //   100,\n    //   { trailing: true }\n    // );\n  }\n\n  _init = (): void => {\n    const renderingEngines = getRenderingEngines();\n    const renderingEngine = renderingEngines[0];\n\n    // Todo: handle this case where it is too soon to get the rendering engine\n    if (!renderingEngine) {\n      return;\n    }\n\n    let viewports = renderingEngine.getViewports();\n    viewports = filterViewportsWithToolEnabled(viewports, this.getToolName());\n\n    const sourceViewport = renderingEngine.getViewport(\n      this.configuration.sourceViewportId\n    ) as Types.IVolumeViewport;\n\n    if (!sourceViewport || !sourceViewport.getImageData()) {\n      return;\n    }\n\n    const { element } = sourceViewport;\n    const { viewUp, viewPlaneNormal } = sourceViewport.getCamera();\n\n    const sourceViewportCanvasCornersInWorld =\n      csUtils.getViewportImageCornersInWorld(sourceViewport);\n\n    let annotation = this.editData.annotation;\n    const FrameOfReferenceUID = sourceViewport.getFrameOfReferenceUID();\n\n    if (!annotation) {\n      const newAnnotation: ReferenceLineAnnotation = {\n        highlighted: true,\n        invalidated: true,\n        metadata: {\n          toolName: this.getToolName(),\n          viewPlaneNormal: <Types.Point3>[...viewPlaneNormal],\n          viewUp: <Types.Point3>[...viewUp],\n          FrameOfReferenceUID,\n          referencedImageId: null,\n        },\n        data: {\n          handles: {\n            points: sourceViewportCanvasCornersInWorld,\n          },\n        },\n      };\n\n      addAnnotation(newAnnotation, element);\n      annotation = newAnnotation;\n    } else {\n      this.editData.annotation.data.handles.points =\n        sourceViewportCanvasCornersInWorld;\n    }\n\n    this.editData = {\n      sourceViewport,\n      renderingEngine,\n      annotation,\n    };\n\n    triggerAnnotationRenderForViewportIds(\n      renderingEngine,\n      viewports\n        .filter((viewport) => viewport.id !== sourceViewport.id)\n        .map((viewport) => viewport.id)\n    );\n  };\n\n  onSetToolEnabled = (): void => {\n    this._init();\n  };\n\n  onCameraModified = (evt: Types.EventTypes.CameraModifiedEvent): void => {\n    // If the camera is modified, we need to update the reference lines\n    // we really don't care which viewport triggered the\n    // camera modification, since we want to update all of them\n    // with respect to the targetViewport\n    this._init();\n  };\n\n  /**\n   * it is used to draw the length annotation in each\n   * request animation frame. It calculates the updated cached statistics if\n   * data is invalidated and cache it.\n   *\n   * @param enabledElement - The Cornerstone's enabledElement.\n   * @param svgDrawingHelper - The svgDrawingHelper providing the context for drawing.\n   */\n  renderAnnotation = (\n    enabledElement: Types.IEnabledElement,\n    svgDrawingHelper: SVGDrawingHelper\n  ): boolean => {\n    const { viewport: targetViewport } = enabledElement;\n    const { annotation, sourceViewport } = this.editData;\n\n    let renderStatus = false;\n\n    if (!sourceViewport) {\n      return renderStatus;\n    }\n\n    if (sourceViewport.id === targetViewport.id) {\n      // If the source viewport is the same as the current viewport, we don't need to render\n      return renderStatus;\n    }\n\n    if (!annotation || !annotation?.data?.handles?.points) {\n      return renderStatus;\n    }\n\n    const styleSpecifier: StyleSpecifier = {\n      toolGroupId: this.toolGroupId,\n      toolName: this.getToolName(),\n      viewportId: enabledElement.viewport.id,\n    };\n\n    // top left world, top right world, bottom right world, bottom left world\n    const topLeft = annotation.data.handles.points[0];\n    const topRight = annotation.data.handles.points[1];\n    const bottomLeft = annotation.data.handles.points[2];\n    const bottomRight = annotation.data.handles.points[3];\n\n    const { focalPoint, viewPlaneNormal, viewUp } = targetViewport.getCamera();\n    const { viewPlaneNormal: sourceViewPlaneNormal } =\n      sourceViewport.getCamera();\n\n    if (this.isParallel(viewPlaneNormal, sourceViewPlaneNormal)) {\n      // If the source and target viewports are parallel, we don't need to render\n      return renderStatus;\n    }\n\n    const targetViewportPlane = csUtils.planar.planeEquation(\n      viewPlaneNormal,\n      focalPoint\n    );\n\n    // check if the topLeft and bottomLeft line is parallel to the viewUp\n    const pointSet1 = [topLeft, bottomLeft, topRight, bottomRight];\n    const pointSet2 = [topLeft, topRight, bottomLeft, bottomRight];\n\n    let pointSetToUse = pointSet1;\n\n    let topBottomVec = vec3.subtract(vec3.create(), pointSet1[0], pointSet1[1]);\n    topBottomVec = vec3.normalize(vec3.create(), topBottomVec) as Types.Point3;\n\n    let topRightVec = vec3.subtract(vec3.create(), pointSet1[2], pointSet1[0]);\n    topRightVec = vec3.normalize(vec3.create(), topRightVec);\n\n    const newNormal = vec3.cross(\n      vec3.create(),\n      topBottomVec,\n      topRightVec\n    ) as Types.Point3;\n\n    if (this.isParallel(newNormal, viewPlaneNormal)) {\n      return renderStatus;\n    }\n\n    // check if it is perpendicular to the viewPlaneNormal which means\n    // the line does not intersect the viewPlaneNormal\n    if (this.isPerpendicular(topBottomVec, viewPlaneNormal)) {\n      // 'use pointSet2';\n      pointSetToUse = pointSet2;\n    }\n\n    const lineStartWorld = csUtils.planar.linePlaneIntersection(\n      pointSetToUse[0],\n      pointSetToUse[1],\n      targetViewportPlane\n    );\n\n    const lineEndWorld = csUtils.planar.linePlaneIntersection(\n      pointSetToUse[2],\n      pointSetToUse[3],\n      targetViewportPlane\n    );\n    const { annotationUID } = annotation;\n\n    styleSpecifier.annotationUID = annotationUID;\n    const lineWidth = this.getStyle('lineWidth', styleSpecifier, annotation);\n    const lineDash = this.getStyle('lineDash', styleSpecifier, annotation);\n    const color = this.getStyle('color', styleSpecifier, annotation);\n    const shadow = this.getStyle('shadow', styleSpecifier, annotation);\n\n    let canvasCoordinates = [lineStartWorld, lineEndWorld].map((world) =>\n      targetViewport.worldToCanvas(world)\n    );\n\n    if (this.configuration.showFullDimension) {\n      canvasCoordinates = this.handleFullDimension(\n        targetViewport,\n        lineStartWorld,\n        viewPlaneNormal,\n        viewUp,\n        lineEndWorld,\n        canvasCoordinates\n      );\n    }\n\n    const dataId = `${annotationUID}-line`;\n    const lineUID = '1';\n    drawLineSvg(\n      svgDrawingHelper,\n      annotationUID,\n      lineUID,\n      canvasCoordinates[0],\n      canvasCoordinates[1],\n      {\n        color,\n        width: lineWidth,\n        lineDash,\n        shadow,\n      },\n      dataId\n    );\n\n    renderStatus = true;\n\n    return renderStatus;\n  };\n\n  isPerpendicular = (vec1: Types.Point3, vec2: Types.Point3): boolean => {\n    const dot = vec3.dot(vec1, vec2);\n    return Math.abs(dot) < EPSILON;\n  };\n\n  private handleFullDimension(\n    targetViewport: Types.IStackViewport | Types.IVolumeViewport,\n    lineStartWorld: Types.Point3,\n    viewPlaneNormal: Types.Point3,\n    viewUp: Types.Point3,\n    lineEndWorld: Types.Point3,\n    canvasCoordinates: Types.Point2[]\n  ) {\n    const renderingEngine = targetViewport.getRenderingEngine();\n    const targetId = this.getTargetId(targetViewport);\n    const targetImage = this.getTargetIdImage(targetId, renderingEngine);\n\n    const referencedImageId = this.getReferencedImageId(\n      targetViewport,\n      lineStartWorld,\n      viewPlaneNormal,\n      viewUp\n    );\n\n    if (referencedImageId && targetImage) {\n      try {\n        const { imageData, dimensions } = targetImage;\n\n        // Calculate bound image coordinates\n        const [\n          topLeftImageCoord,\n          topRightImageCoord,\n          bottomRightImageCoord,\n          bottomLeftImageCoord,\n        ] = [\n          imageData.indexToWorld([0, 0, 0]) as Types.Point3,\n          imageData.indexToWorld([dimensions[0] - 1, 0, 0]) as Types.Point3,\n          imageData.indexToWorld([\n            dimensions[0] - 1,\n            dimensions[1] - 1,\n            0,\n          ]) as Types.Point3,\n          imageData.indexToWorld([0, dimensions[1] - 1, 0]) as Types.Point3,\n        ].map((world) => csUtils.worldToImageCoords(referencedImageId, world));\n\n        // Calculate line start and end image coordinates\n        const [lineStartImageCoord, lineEndImageCoord] = [\n          lineStartWorld,\n          lineEndWorld,\n        ].map((world) => csUtils.worldToImageCoords(referencedImageId, world));\n\n        // Calculate intersection points between line and image bounds\n        canvasCoordinates = [\n          [topLeftImageCoord, topRightImageCoord],\n          [topRightImageCoord, bottomRightImageCoord],\n          [bottomLeftImageCoord, bottomRightImageCoord],\n          [topLeftImageCoord, bottomLeftImageCoord],\n        ]\n          .map(([start, end]) =>\n            this.intersectInfiniteLines(\n              start,\n              end,\n              lineStartImageCoord,\n              lineEndImageCoord\n            )\n          )\n          .filter((point) => point && this.isInBound(point, dimensions))\n          .map((point) => {\n            const world = csUtils.imageToWorldCoords(\n              referencedImageId,\n              point as Types.Point2\n            );\n            return targetViewport.worldToCanvas(world);\n          });\n      } catch (err) {\n        console.log(err);\n      }\n    }\n    return canvasCoordinates;\n  }\n\n  // get the intersection point between two infinite lines, not line segments\n  intersectInfiniteLines(\n    line1Start: Types.Point2,\n    line1End: Types.Point2,\n    line2Start: Types.Point2,\n    line2End: Types.Point2\n  ) {\n    const [x1, y1] = line1Start;\n    const [x2, y2] = line1End;\n    const [x3, y3] = line2Start;\n    const [x4, y4] = line2End;\n\n    // Compute a1, b1, c1, where line joining points 1 and 2 is \"a1 x  +  b1 y  +  c1  =  0\"\n    const a1 = y2 - y1;\n    const b1 = x1 - x2;\n    const c1 = x2 * y1 - x1 * y2;\n\n    // Compute a2, b2, c2\n    const a2 = y4 - y3;\n    const b2 = x3 - x4;\n    const c2 = x4 * y3 - x3 * y4;\n\n    if (Math.abs(a1 * b2 - a2 * b1) < EPSILON) {\n      return;\n    }\n\n    const x = (b1 * c2 - b2 * c1) / (a1 * b2 - a2 * b1);\n    const y = (a2 * c1 - a1 * c2) / (a1 * b2 - a2 * b1);\n\n    return [x, y];\n  }\n\n  isParallel(vec1: Types.Point3, vec2: Types.Point3): boolean {\n    return Math.abs(vec3.dot(vec1, vec2)) > 1 - EPSILON;\n  }\n\n  isInBound(point: number[], dimensions: Types.Point3): boolean {\n    return (\n      point[0] >= 0 &&\n      point[0] <= dimensions[0] &&\n      point[1] >= 0 &&\n      point[1] <= dimensions[1]\n    );\n  }\n}\n\nReferenceLines.toolName = 'ReferenceLines';\nexport default ReferenceLines;\n","import { vec3 } from 'gl-matrix';\nimport {\n  metaData,\n  CONSTANTS,\n  getRenderingEngine,\n  utilities as csUtils,\n} from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\nimport {\n  addAnnotation,\n  getAnnotations,\n} from '../stateManagement/annotation/annotationState';\n\nimport { getToolGroup } from '../store/ToolGroupManager';\n\nimport { drawLine as drawLineSvg } from '../drawingSvg';\nimport triggerAnnotationRenderForViewportIds from '../utilities/triggerAnnotationRenderForViewportIds';\n\nimport {\n  PublicToolProps,\n  ToolProps,\n  SVGDrawingHelper,\n  Annotation,\n} from '../types';\nimport { StyleSpecifier } from '../types/AnnotationStyle';\nimport AnnotationDisplayTool from './base/AnnotationDisplayTool';\n\nconst { EPSILON } = CONSTANTS;\n\nexport interface OverlayGridAnnotation extends Annotation {\n  data: {\n    viewportData: Map<string, object>;\n    pointSets: Array<object>;\n  };\n}\n\n/**\n * @public\n */\nclass OverlayGridTool extends AnnotationDisplayTool {\n  static toolName;\n\n  public touchDragCallback: any;\n  public mouseDragCallback: any;\n  _throttledCalculateCachedStats: any;\n  isDrawing: boolean;\n  isHandleOutsideImage: boolean;\n\n  constructor(\n    toolProps: PublicToolProps = {},\n    defaultToolProps: ToolProps = {\n      supportedInteractionTypes: ['Mouse', 'Touch'],\n      configuration: {\n        sourceImageIds: [],\n      },\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n  }\n\n  onSetToolEnabled = (): void => {\n    this._init();\n  };\n\n  onSetToolActive = (): void => {\n    this._init();\n  };\n\n  _init = (): void => {\n    const sourceImageIds = this.configuration.sourceImageIds;\n    if (!sourceImageIds?.length) {\n      console.warn(\n        'OverlayGridTool: No sourceImageIds provided in configuration'\n      );\n      return;\n    }\n\n    const imagePlaneModule = metaData.get(\n      'imagePlaneModule',\n      sourceImageIds[0]\n    );\n\n    if (!imagePlaneModule) {\n      console.warn(\n        'OverlayGridTool: No imagePlaneModule found for sourceImageIds'\n      );\n      return;\n    }\n\n    const { frameOfReferenceUID } = imagePlaneModule;\n\n    const viewportsInfo = getToolGroup(this.toolGroupId).viewportsInfo;\n\n    if (!viewportsInfo?.length) {\n      console.warn('OverlayGridTool: No viewports found');\n      return;\n    }\n\n    const annotations = getAnnotations(this.getToolName(), frameOfReferenceUID);\n\n    if (!annotations?.length) {\n      const pointSets = sourceImageIds.map((id) => {\n        // check if pointSets for the imageId was calculated. If not calculate and store\n        return this.calculateImageIdPointSets(id);\n      });\n\n      const newAnnotation: OverlayGridAnnotation = {\n        highlighted: true,\n        invalidated: true,\n        metadata: {\n          toolName: this.getToolName(),\n          FrameOfReferenceUID: frameOfReferenceUID,\n          referencedImageId: null,\n        },\n        data: {\n          viewportData: new Map(),\n          pointSets,\n        },\n      };\n\n      addAnnotation(newAnnotation, frameOfReferenceUID);\n    }\n\n    triggerAnnotationRenderForViewportIds(\n      getRenderingEngine(viewportsInfo[0].renderingEngineId),\n      viewportsInfo.map(({ viewportId }) => viewportId)\n    );\n  };\n\n  /**\n   * Calculates the point sets based on the image corners relative to an imageId\n   * @param imageId - The imageId to calculate the point sets for\n   * @returns\n   */\n  calculateImageIdPointSets = (imageId: string) => {\n    const {\n      imagePositionPatient,\n      rows,\n      columns,\n      rowCosines,\n      columnCosines,\n      rowPixelSpacing,\n      columnPixelSpacing,\n    } = metaData.get('imagePlaneModule', imageId);\n\n    // top left world, top right world, bottom right world, bottom left world\n    const topLeft = <Types.Point3>[...imagePositionPatient];\n    const topRight = <Types.Point3>[...imagePositionPatient];\n    const bottomLeft = <Types.Point3>[...imagePositionPatient];\n    const bottomRight = <Types.Point3>[...imagePositionPatient];\n\n    vec3.scaleAndAdd(\n      topRight,\n      imagePositionPatient,\n      columnCosines,\n      columns * columnPixelSpacing\n    );\n    vec3.scaleAndAdd(\n      bottomLeft,\n      imagePositionPatient,\n      rowCosines,\n      rows * rowPixelSpacing\n    );\n\n    vec3.scaleAndAdd(\n      bottomRight,\n      bottomLeft,\n      columnCosines,\n      columns * columnPixelSpacing\n    );\n\n    // check if the topLeft and bottomLeft line is parallel to the viewUp\n    const pointSet1 = [topLeft, bottomLeft, topRight, bottomRight];\n    const pointSet2 = [topLeft, topRight, bottomLeft, bottomRight];\n\n    return { pointSet1, pointSet2 };\n  };\n\n  /**\n   * it is used to draw the length annotation in each\n   * request animation frame. It calculates the updated cached statistics if\n   * data is invalidated and cache it.\n   *\n   * @param enabledElement - The Cornerstone's enabledElement.\n   * @param svgDrawingHelper - The svgDrawingHelper providing the context for drawing.\n   */\n  renderAnnotation = (\n    enabledElement: Types.IEnabledElement,\n    svgDrawingHelper: SVGDrawingHelper\n  ): boolean => {\n    const sourceImageIds = this.configuration.sourceImageIds;\n\n    let renderStatus = false;\n    if (!sourceImageIds?.length) {\n      return renderStatus;\n    }\n\n    const { viewport: targetViewport, FrameOfReferenceUID } = enabledElement;\n    const targetImageIds = targetViewport.getImageIds();\n    if (targetImageIds.length < 2) {\n      return renderStatus;\n    }\n\n    const annotations = getAnnotations(this.getToolName(), FrameOfReferenceUID);\n    if (!annotations?.length) {\n      return renderStatus;\n    }\n    const annotation = annotations[0];\n    const { annotationUID } = annotation;\n\n    const { focalPoint, viewPlaneNormal } = targetViewport.getCamera();\n\n    const styleSpecifier: StyleSpecifier = {\n      toolGroupId: this.toolGroupId,\n      toolName: this.getToolName(),\n      viewportId: enabledElement.viewport.id,\n    };\n    const imageIdNormal = <Types.Point3>(\n      this.getImageIdNormal(sourceImageIds[0])\n    );\n\n    if (this.isParallel(viewPlaneNormal, imageIdNormal)) {\n      // If the source and target viewports are parallel, we don't need to render\n      return renderStatus;\n    }\n\n    const targetViewportPlane = csUtils.planar.planeEquation(\n      viewPlaneNormal,\n      focalPoint\n    );\n\n    const pointSets = annotation.data.pointSets;\n    const viewportData = annotation.data.viewportData;\n    for (let i = 0; i < sourceImageIds.length; i++) {\n      // check if pointSets for the imageId was calculated. If not calculate and store\n      const { pointSet1, pointSet2 } = pointSets[i];\n\n      const targetData =\n        viewportData.get(targetViewport.id) ||\n        this.initializeViewportData(viewportData, targetViewport.id);\n\n      // check if pointSetToUse was calculated. If not calculate and store\n      if (!targetData.pointSetsToUse[i]) {\n        let pointSetToUse = pointSet1;\n\n        let topBottomVec = vec3.subtract(\n          vec3.create(),\n          pointSet1[0],\n          pointSet1[1]\n        );\n        topBottomVec = vec3.normalize(\n          vec3.create(),\n          topBottomVec\n        ) as Types.Point3;\n\n        // check if it is perpendicular to the viewPlaneNormal which means\n        // the line does not intersect the viewPlaneNormal\n        if (this.isPerpendicular(topBottomVec, viewPlaneNormal)) {\n          // 'use pointSet2';\n          pointSetToUse = pointSet2;\n        }\n\n        targetData.pointSetsToUse[i] = pointSetToUse;\n\n        targetData.lineStartsWorld[i] = csUtils.planar.linePlaneIntersection(\n          pointSetToUse[0],\n          pointSetToUse[1],\n          targetViewportPlane\n        );\n\n        targetData.lineEndsWorld[i] = csUtils.planar.linePlaneIntersection(\n          pointSetToUse[2],\n          pointSetToUse[3],\n          targetViewportPlane\n        );\n      }\n\n      const lineStartWorld = targetData.lineStartsWorld[i];\n      const lineEndWorld = targetData.lineEndsWorld[i];\n\n      styleSpecifier.annotationUID = annotationUID;\n      const lineWidth = this.getStyle('lineWidth', styleSpecifier, annotation);\n      const lineDash = this.getStyle('lineDash', styleSpecifier, annotation);\n      const color = this.getStyle('color', styleSpecifier, annotation);\n      const shadow = this.getStyle('shadow', styleSpecifier, annotation);\n\n      const canvasCoordinates = [lineStartWorld, lineEndWorld].map((world) =>\n        targetViewport.worldToCanvas(world)\n      );\n\n      const dataId = `${annotationUID}-line`;\n      const lineUID = `${i}`;\n      drawLineSvg(\n        svgDrawingHelper,\n        annotationUID,\n        lineUID,\n        canvasCoordinates[0],\n        canvasCoordinates[1],\n        {\n          color,\n          width: lineWidth,\n          lineDash,\n          shadow,\n        },\n        dataId\n      );\n    }\n\n    renderStatus = true;\n\n    return renderStatus;\n  };\n\n  private initializeViewportData = (viewportData, id) => {\n    viewportData.set(id, {\n      pointSetsToUse: [],\n      lineStartsWorld: [],\n      lineEndsWorld: [],\n    });\n\n    return viewportData.get(id);\n  };\n\n  private isPerpendicular = (\n    vec1: Types.Point3,\n    vec2: Types.Point3\n  ): boolean => {\n    const dot = vec3.dot(vec1, vec2);\n    return Math.abs(dot) < EPSILON;\n  };\n\n  private isParallel(vec1: Types.Point3, vec2: Types.Point3): boolean {\n    return Math.abs(vec3.dot(vec1, vec2)) > 1 - EPSILON;\n  }\n\n  private getImageIdNormal(imageId: string): vec3 {\n    const { imageOrientationPatient } = metaData.get(\n      'imagePlaneModule',\n      imageId\n    );\n    const rowCosineVec = vec3.fromValues(\n      imageOrientationPatient[0],\n      imageOrientationPatient[1],\n      imageOrientationPatient[2]\n    );\n    const colCosineVec = vec3.fromValues(\n      imageOrientationPatient[3],\n      imageOrientationPatient[4],\n      imageOrientationPatient[5]\n    );\n    return vec3.cross(vec3.create(), rowCosineVec, colCosineVec);\n  }\n}\n\nOverlayGridTool.toolName = 'OverlayGrid';\nexport default OverlayGridTool;\n","import { getRenderingEngine } from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\nimport {\n  addAnnotation,\n  getAnnotations,\n} from '../stateManagement/annotation/annotationState';\nimport { drawPolyline } from '../drawingSvg';\nimport { getToolGroup } from '../store/ToolGroupManager';\nimport triggerAnnotationRenderForViewportIds from '../utilities/triggerAnnotationRenderForViewportIds';\nimport { PublicToolProps, ToolProps, SVGDrawingHelper } from '../types';\nimport AnnotationDisplayTool from './base/AnnotationDisplayTool';\nimport { Annotation } from '../types';\nimport { distanceToPoint } from '../utilities/math/point';\nimport { pointToString } from '../utilities/pointToString';\nimport { polyDataUtils } from '../utilities';\n\nexport interface SegmentationIntersectionAnnotation extends Annotation {\n  data: {\n    actorsWorldPointsMap: Map<string, Map<string, object>>;\n  };\n}\n\nclass SegmentationIntersectionTool extends AnnotationDisplayTool {\n  static toolName;\n\n  constructor(\n    toolProps: PublicToolProps = {},\n    defaultToolProps: ToolProps = {\n      configuration: {\n        opacity: 0.5,\n      },\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n  }\n\n  /**\n   * Initialize the annotation data and calculates surface intersections\n   * @returns\n   */\n  _init = (): void => {\n    const viewportsInfo = getToolGroup(this.toolGroupId).viewportsInfo;\n\n    if (!viewportsInfo?.length) {\n      console.warn(this.getToolName() + 'Tool: No viewports found');\n      return;\n    }\n\n    const firstViewport = getRenderingEngine(\n      viewportsInfo[0].renderingEngineId\n    )?.getViewport(viewportsInfo[0].viewportId);\n\n    if (!firstViewport) {\n      return;\n    }\n    const frameOfReferenceUID = firstViewport.getFrameOfReferenceUID();\n    const annotations = getAnnotations(this.getToolName(), frameOfReferenceUID);\n\n    if (!annotations?.length) {\n      const actorsWorldPointsMap = new Map();\n      calculateSurfaceSegmentationIntersections(\n        actorsWorldPointsMap,\n        viewportsInfo\n      );\n      const newAnnotation: SegmentationIntersectionAnnotation = {\n        highlighted: true,\n        invalidated: true,\n        metadata: {\n          toolName: this.getToolName(),\n          FrameOfReferenceUID: frameOfReferenceUID,\n          referencedImageId: null,\n        },\n        data: {\n          actorsWorldPointsMap,\n        },\n      };\n\n      addAnnotation(newAnnotation, frameOfReferenceUID);\n    }\n\n    triggerAnnotationRenderForViewportIds(\n      getRenderingEngine(viewportsInfo[0].renderingEngineId),\n      viewportsInfo.map(({ viewportId }) => viewportId)\n    );\n  };\n\n  onSetToolEnabled = (): void => {\n    this._init();\n  };\n\n  onCameraModified = (evt: Types.EventTypes.CameraModifiedEvent): void => {\n    this._init();\n  };\n\n  /**\n   * Renders the surface intersections\n   *\n   * @param enabledElement - The Cornerstone's enabledElement.\n   * @param svgDrawingHelper - The svgDrawingHelper providing the context for drawing.\n   */\n  renderAnnotation = (\n    enabledElement: Types.IEnabledElement,\n    svgDrawingHelper: SVGDrawingHelper\n  ): boolean => {\n    const { viewport, FrameOfReferenceUID } = enabledElement;\n\n    let renderStatus = false;\n\n    const annotations = getAnnotations(this.getToolName(), FrameOfReferenceUID);\n    if (!annotations?.length) {\n      return renderStatus;\n    }\n    const annotation = annotations[0];\n    const { annotationUID } = annotation;\n    const actorsWorldPointsMap = annotation.data.actorsWorldPointsMap;\n\n    calculateSurfaceSegmentationIntersectionsForViewport(\n      actorsWorldPointsMap,\n      viewport\n    );\n\n    const actorEntries = viewport.getActors();\n    const cacheId = getCacheId(viewport);\n\n    actorEntries.forEach((actorEntry) => {\n      if (!actorEntry?.clippingFilter) {\n        return;\n      }\n      const actorWorldPointMap = actorsWorldPointsMap.get(actorEntry.uid);\n      if (!actorWorldPointMap) {\n        return;\n      }\n      if (!actorWorldPointMap.get(cacheId)) {\n        return;\n      }\n      let polyLineIdx = 1;\n      const { worldPointsSet, color } = actorWorldPointMap.get(cacheId);\n      for (let i = 0; i < worldPointsSet.length; i++) {\n        const worldPoints = worldPointsSet[i];\n        const canvasPoints = worldPoints.map((point) =>\n          viewport.worldToCanvas(point)\n        );\n\n        const options = {\n          color: color,\n          fillColor: color,\n          fillOpacity: this.configuration.opacity,\n          connectLastToFirst: true,\n        };\n\n        const polyLineUID = actorEntry.uid + '#' + polyLineIdx;\n        drawPolyline(\n          svgDrawingHelper,\n          annotationUID,\n          polyLineUID,\n          canvasPoints,\n          options\n        );\n        polyLineIdx++;\n      }\n    });\n\n    renderStatus = true;\n    return renderStatus;\n  };\n}\n\n/**\n * Calculates surface intersections points for all surface actors in a list of viewports\n * @param actorWorldPointsMap\n * @param viewportsInfo\n */\nfunction calculateSurfaceSegmentationIntersections(\n  actorsWorldPointsMap,\n  viewportsInfo\n) {\n  viewportsInfo.forEach(({ viewportId, renderingEngineId }) => {\n    const viewport =\n      getRenderingEngine(renderingEngineId)?.getViewport(viewportId);\n    calculateSurfaceSegmentationIntersectionsForViewport(\n      actorsWorldPointsMap,\n      viewport\n    );\n  });\n}\n\n/**\n * Calculates surface intersections points for all surface actors in a viewport\n * generating a set of polyline points for each actor\n * @param actorWorldPointsMap\n * @param viewport\n */\nfunction calculateSurfaceSegmentationIntersectionsForViewport(\n  actorsWorldPointsMap,\n  viewport\n) {\n  const actorEntries = viewport.getActors();\n\n  // we should not use the focalPoint here, since the pan and zoom updates it,\n  // imageIndex is reliable enough\n  const cacheId = getCacheId(viewport);\n\n  actorEntries.forEach((actorEntry) => {\n    if (!actorEntry?.clippingFilter) {\n      return;\n    }\n\n    let actorWorldPointsMap = actorsWorldPointsMap.get(actorEntry.uid);\n    if (!actorWorldPointsMap) {\n      actorWorldPointsMap = new Map();\n      actorsWorldPointsMap.set(actorEntry.uid, actorWorldPointsMap);\n    }\n    if (!actorWorldPointsMap.get(cacheId)) {\n      const polyData = actorEntry.clippingFilter.getOutputData();\n      const worldPointsSet = polyDataUtils.getPolyDataPoints(polyData);\n      if (!worldPointsSet) {\n        return;\n      }\n\n      // worldPointsSet = removeExtraPoints(viewport, worldPointsSet);\n      const colorArray = actorEntry.actor.getProperty().getColor();\n      const color = colorToString(colorArray);\n      actorWorldPointsMap.set(cacheId, { worldPointsSet, color });\n    }\n  });\n}\n\nfunction getCacheId(viewport) {\n  const { viewPlaneNormal } = viewport.getCamera();\n  const imageIndex = viewport.getCurrentImageIdIndex();\n  return `${viewport.id}-${pointToString(viewPlaneNormal)}-${imageIndex}`;\n}\n\n/**\n * Transform a color array into a string\n * @param colorArray\n * @returns\n */\nfunction colorToString(colorArray): string {\n  function colorComponentToString(component) {\n    let componentString = Math.floor(component * 255).toString(16);\n    if (componentString.length === 1) {\n      componentString = '0' + componentString;\n    }\n    return componentString;\n  }\n  return (\n    '#' +\n    colorComponentToString(colorArray[0]) +\n    colorComponentToString(colorArray[1]) +\n    colorComponentToString(colorArray[2])\n  );\n}\n\n/**\n * Remove duplicate and unnecessary points\n * @param worldPoints\n * @param canvasPoints\n * @returns\n */\nfunction removeExtraPoints(viewport, worldPointsSet) {\n  return worldPointsSet.map((worldPoints) => {\n    const canvasPoints = worldPoints.map((point) => {\n      const canvasPoint = viewport.worldToCanvas(point);\n      return [Math.floor(canvasPoint[0]), Math.floor(canvasPoint[1])];\n    });\n\n    let lastPoint;\n    const newWorldPoints = [];\n    let newCanvasPoints = [];\n    // removing duplicate points\n    for (let i = 0; i < worldPoints.length; i++) {\n      if (lastPoint) {\n        if (distanceToPoint(lastPoint, canvasPoints[i]) > 0) {\n          newWorldPoints.push(worldPoints[i]);\n          newCanvasPoints.push(canvasPoints[i]);\n        }\n      }\n      lastPoint = canvasPoints[i];\n    }\n\n    // checking if a middle point is near the start\n    const firstPoint = newCanvasPoints[0];\n    for (\n      let j = Math.min(30, newCanvasPoints.length);\n      j < newCanvasPoints.length;\n      j++\n    ) {\n      if (distanceToPoint(firstPoint, newCanvasPoints[j]) < 0.5) {\n        newCanvasPoints = newCanvasPoints.slice(0, j);\n        return newWorldPoints.slice(0, j);\n      }\n    }\n    return newWorldPoints;\n  });\n}\n\nSegmentationIntersectionTool.toolName = 'SegmentationIntersection';\nexport default SegmentationIntersectionTool;\n","import { Enums } from '@cornerstonejs/core';\n\nconst { CalibrationTypes } = Enums;\nconst PIXEL_UNITS = 'px';\n\n/**\n * Extracts the length units and the type of calibration for those units\n * into the response.  The length units will typically be either mm or px\n * while the calibration type can be any of a number of different calibraiton types.\n *\n * Volumetric images have no calibration type, so are just the raw mm.\n *\n * TODO: Handle region calibration\n *\n * @param handles - used to detect if the spacing information is different\n *   between various points (eg angled ERMF or US Region).\n *   Currently unused, but needed for correct US Region handling\n * @param image - to extract the calibration from\n *        image.calibration - calibration value to extract units form\n * @returns String containing the units and type of calibration\n */\nconst getCalibratedLengthUnits = (handles, image): string => {\n  const { calibration, hasPixelSpacing } = image;\n  // Anachronistic - moving to using calibration consistently, but not completed yet\n  const units = hasPixelSpacing ? 'mm' : PIXEL_UNITS;\n  if (!calibration || !calibration.type) {\n    return units;\n  }\n  if (calibration.type === CalibrationTypes.UNCALIBRATED) {\n    return PIXEL_UNITS;\n  }\n  // TODO - handle US regions properly\n  if (calibration.SequenceOfUltrasoundRegions) {\n    return 'US Region';\n  }\n  return `${units} ${calibration.type}`;\n};\n\nconst SQUARE = '\\xb2';\n/**\n *  Extracts the area units, including the squared sign plus calibration type.\n */\nconst getCalibratedAreaUnits = (handles, image): string => {\n  const { calibration, hasPixelSpacing } = image;\n  const units = (hasPixelSpacing ? 'mm' : PIXEL_UNITS) + SQUARE;\n  if (!calibration || !calibration.type) {\n    return units;\n  }\n  if (calibration.SequenceOfUltrasoundRegions) {\n    return 'US Region';\n  }\n  return `${units} ${calibration.type}`;\n};\n\n/**\n * Gets the scale divisor for converting from internal spacing to\n * image spacing for calibrated images.\n */\nconst getCalibratedScale = (image) => image.calibration?.scale || 1;\n\n/** Gets the aspect ratio of the screen display relative to the image\n * display in order to square up measurement values.\n * That is, suppose the spacing on the image is 1, 0.5 (x,y spacing)\n * This is displayed at 1, 1 spacing on screen, then the\n * aspect value will be 1/0.5 = 2\n */\nconst getCalibratedAspect = (image) => image.calibration?.aspect || 1;\n\nexport default getCalibratedLengthUnits;\n\nexport {\n  getCalibratedAreaUnits,\n  getCalibratedLengthUnits,\n  getCalibratedScale,\n  getCalibratedAspect,\n};\n","import type { Types } from '@cornerstonejs/core';\n\n/**\n * Determine the coordinates that will place the textbox to the right of the\n * annotation.\n *\n * @param annotationCanvasPoints - The canvas points of the annotation's handles.\n * @returns - The coordinates for default placement of the textbox.\n */\nexport default function getTextBoxCoordsCanvas(\n  annotationCanvasPoints: Array<Types.Point2>\n): Types.Point2 {\n  const corners = _determineCorners(annotationCanvasPoints);\n  const centerY = (corners.top[1] + corners.bottom[1]) / 2;\n  const textBoxCanvas = <Types.Point2>[corners.right[0], centerY];\n\n  return textBoxCanvas;\n}\n\n/**\n * Determine the handles that have the min/max x and y values.\n *\n * @param canvasPoints - The canvas points of the annotation's handles.\n * @returns - The top, left, bottom, and right handles.\n */\nfunction _determineCorners(canvasPoints: Array<Types.Point2>) {\n  const handlesLeftToRight = [canvasPoints[0], canvasPoints[1]].sort(_compareX);\n  const handlesTopToBottom = [canvasPoints[0], canvasPoints[1]].sort(_compareY);\n  const right = handlesLeftToRight[handlesLeftToRight.length - 1];\n  const top = handlesTopToBottom[0];\n  const bottom = handlesTopToBottom[handlesTopToBottom.length - 1];\n\n  return {\n    top,\n    bottom,\n    right,\n  };\n\n  function _compareX(a, b) {\n    return a[0] < b[0] ? -1 : 1;\n  }\n  function _compareY(a, b) {\n    return a[1] < b[1] ? -1 : 1;\n  }\n}\n","import { vec2, vec3 } from 'gl-matrix';\nimport {\n  getEnabledElement,\n  triggerEvent,\n  eventTarget,\n  utilities as csUtils,\n} from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\nimport {\n  getCalibratedLengthUnits,\n  getCalibratedScale,\n} from '../../utilities/getCalibratedUnits';\nimport roundNumber from '../../utilities/roundNumber';\nimport { AnnotationTool } from '../base';\nimport throttle from '../../utilities/throttle';\nimport {\n  addAnnotation,\n  getAnnotations,\n  removeAnnotation,\n} from '../../stateManagement/annotation/annotationState';\nimport { isAnnotationLocked } from '../../stateManagement/annotation/annotationLocking';\nimport { isAnnotationVisible } from '../../stateManagement/annotation/annotationVisibility';\nimport {\n  drawLine as drawLineSvg,\n  drawHandles as drawHandlesSvg,\n  drawLinkedTextBox as drawLinkedTextBoxSvg,\n} from '../../drawingSvg';\nimport { state } from '../../store';\nimport { Events } from '../../enums';\nimport { getViewportIdsWithToolToRender } from '../../utilities/viewportFilters';\nimport * as lineSegment from '../../utilities/math/line';\nimport { getTextBoxCoordsCanvas } from '../../utilities/drawing';\nimport {\n  resetElementCursor,\n  hideElementCursor,\n} from '../../cursors/elementCursor';\nimport {\n  EventTypes,\n  ToolHandle,\n  TextBoxHandle,\n  PublicToolProps,\n  ToolProps,\n  InteractionTypes,\n  SVGDrawingHelper,\n} from '../../types';\nimport { BidirectionalAnnotation } from '../../types/ToolSpecificAnnotationTypes';\n\nimport {\n  AnnotationCompletedEventDetail,\n  AnnotationModifiedEventDetail,\n  MouseDragEventType,\n  MouseMoveEventType,\n} from '../../types/EventTypes';\nimport triggerAnnotationRenderForViewportIds from '../../utilities/triggerAnnotationRenderForViewportIds';\nimport { StyleSpecifier } from '../../types/AnnotationStyle';\n\nconst { transformWorldToIndex } = csUtils;\n\n/**\n * BidirectionalTool let you draw annotations that measures the length and\n * width at the same time in `mm` unit. It is consisted of two perpendicular lines and\n * a text box. You can use the BidirectionalTool in all planes even in oblique\n * reconstructed planes. Note: annotation tools in cornerstone3DTools exists in the exact location\n * in the physical 3d space, as a result, by default, all annotations that are\n * drawing in the same frameOfReference will get shared between viewports that\n * are in the same frameOfReference.\n *\n * The resulting annotation's data (statistics) and metadata (the\n * state of the viewport while drawing was happening) will get added to the\n * ToolState manager and can be accessed from the ToolState by calling getAnnotations\n * or similar methods.\n *\n * ```js\n * cornerstoneTools.addTool(BidirectionalTool)\n *\n * const toolGroup = ToolGroupManager.createToolGroup('toolGroupId')\n *\n * toolGroup.addTool(BidirectionalTool.toolName)\n *\n * toolGroup.addViewport('viewportId', 'renderingEngineId')\n *\n * toolGroup.setToolActive(BidirectionalTool.toolName, {\n *   bindings: [\n *    {\n *       mouseButton: MouseBindings.Primary, // Left Click\n *     },\n *   ],\n * })\n * ```\n *\n * Read more in the Docs section of the website.\n */\n\nclass BidirectionalTool extends AnnotationTool {\n  static toolName;\n\n  touchDragCallback: any;\n  mouseDragCallback: any;\n  _throttledCalculateCachedStats: any;\n  editData: {\n    annotation: any;\n    viewportIdsToRender: string[];\n    handleIndex?: number;\n    movingTextBox: boolean;\n    newAnnotation?: boolean;\n    hasMoved?: boolean;\n  } | null;\n  isDrawing: boolean;\n  isHandleOutsideImage: boolean;\n  preventHandleOutsideImage: boolean;\n\n  constructor(\n    toolProps: PublicToolProps = {},\n    defaultToolProps: ToolProps = {\n      supportedInteractionTypes: ['Mouse', 'Touch'],\n      configuration: {\n        preventHandleOutsideImage: false,\n        getTextLines: defaultGetTextLines,\n      },\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n\n    this._throttledCalculateCachedStats = throttle(\n      this._calculateCachedStats,\n      100,\n      { trailing: true }\n    );\n  }\n\n  /**\n   * Based on the current position of the mouse and the current imageId to create\n   * a Bidirectional Annotation and stores it in the annotationManager\n   *\n   * @param evt -  EventTypes.NormalizedMouseEventType\n   * @returns The annotation object.\n   *\n   */\n  addNewAnnotation(\n    evt: EventTypes.InteractionEventType\n  ): BidirectionalAnnotation {\n    const eventDetail = evt.detail;\n    const { currentPoints, element } = eventDetail;\n    const worldPos = currentPoints.world;\n    const enabledElement = getEnabledElement(element);\n    const { viewport, renderingEngine } = enabledElement;\n\n    this.isDrawing = true;\n\n    const camera = viewport.getCamera();\n    const { viewPlaneNormal, viewUp } = camera;\n\n    const referencedImageId = this.getReferencedImageId(\n      viewport,\n      worldPos,\n      viewPlaneNormal,\n      viewUp\n    );\n\n    const FrameOfReferenceUID = viewport.getFrameOfReferenceUID();\n\n    const annotation: BidirectionalAnnotation = {\n      highlighted: true,\n      invalidated: true,\n      metadata: {\n        toolName: this.getToolName(),\n        viewPlaneNormal: <Types.Point3>[...viewPlaneNormal],\n        viewUp: <Types.Point3>[...viewUp],\n        FrameOfReferenceUID,\n        referencedImageId,\n      },\n      data: {\n        handles: {\n          points: [\n            // long\n            <Types.Point3>[...worldPos],\n            <Types.Point3>[...worldPos],\n            // short\n            <Types.Point3>[...worldPos],\n            <Types.Point3>[...worldPos],\n          ],\n          textBox: {\n            hasMoved: false,\n            worldPosition: <Types.Point3>[0, 0, 0],\n            worldBoundingBox: {\n              topLeft: <Types.Point3>[0, 0, 0],\n              topRight: <Types.Point3>[0, 0, 0],\n              bottomLeft: <Types.Point3>[0, 0, 0],\n              bottomRight: <Types.Point3>[0, 0, 0],\n            },\n          },\n          activeHandleIndex: null,\n        },\n        label: '',\n        cachedStats: {},\n      },\n    };\n\n    addAnnotation(annotation, element);\n\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    this.editData = {\n      annotation,\n      viewportIdsToRender,\n      handleIndex: 1,\n      movingTextBox: false,\n      newAnnotation: true,\n      hasMoved: false,\n    };\n    this._activateDraw(element);\n\n    hideElementCursor(element);\n\n    evt.preventDefault();\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    return annotation;\n  }\n\n  /**\n   * It returns if the canvas point is near the provided annotation in the provided\n   * element or not. A proximity is passed to the function to determine the\n   * proximity of the point to the annotation in number of pixels.\n   *\n   * @param element - HTML Element\n   * @param annotation - Annotation\n   * @param canvasCoords - Canvas coordinates\n   * @param proximity - Proximity to tool to consider\n   * @returns Boolean, whether the canvas point is near tool\n   */\n  isPointNearTool = (\n    element: HTMLDivElement,\n    annotation: BidirectionalAnnotation,\n    canvasCoords: Types.Point2,\n    proximity: number\n  ): boolean => {\n    const enabledElement = getEnabledElement(element);\n    const { viewport } = enabledElement;\n    const { data } = annotation;\n    const { points } = data.handles;\n\n    // Check long axis\n    let canvasPoint1 = viewport.worldToCanvas(points[0]);\n    let canvasPoint2 = viewport.worldToCanvas(points[1]);\n\n    let line = {\n      start: {\n        x: canvasPoint1[0],\n        y: canvasPoint1[1],\n      },\n      end: {\n        x: canvasPoint2[0],\n        y: canvasPoint2[1],\n      },\n    };\n\n    let distanceToPoint = lineSegment.distanceToPoint(\n      [line.start.x, line.start.y],\n      [line.end.x, line.end.y],\n      [canvasCoords[0], canvasCoords[1]]\n    );\n\n    if (distanceToPoint <= proximity) {\n      return true;\n    }\n\n    // Check short axis\n    canvasPoint1 = viewport.worldToCanvas(points[2]);\n    canvasPoint2 = viewport.worldToCanvas(points[3]);\n\n    line = {\n      start: {\n        x: canvasPoint1[0],\n        y: canvasPoint1[1],\n      },\n      end: {\n        x: canvasPoint2[0],\n        y: canvasPoint2[1],\n      },\n    };\n\n    distanceToPoint = lineSegment.distanceToPoint(\n      [line.start.x, line.start.y],\n      [line.end.x, line.end.y],\n      [canvasCoords[0], canvasCoords[1]]\n    );\n\n    if (distanceToPoint <= proximity) {\n      return true;\n    }\n\n    return false;\n  };\n\n  /**\n   * Handles the toolSelected callback for bidirectional tool\n   * @param evt - EventTypes.MouseDownEventType\n   * @param annotation - Bidirectional annotation\n   * @param interactionType - interaction type (mouse, touch)\n   */\n  toolSelectedCallback = (\n    evt: EventTypes.InteractionEventType,\n    annotation: BidirectionalAnnotation\n  ): void => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    annotation.highlighted = true;\n\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    this.editData = {\n      annotation,\n      viewportIdsToRender,\n      movingTextBox: false,\n    };\n\n    this._activateModify(element);\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    hideElementCursor(element);\n\n    evt.preventDefault();\n  };\n\n  /**\n   * Executes the callback for when mouse has selected a handle (anchor point) of\n   * the bidirectional tool or when the text box has been selected.\n   *\n   * @param evt - EventTypes.MouseDownEventType\n   * @param annotation - Bidirectional annotation\n   * @param handle - Handle index or selected textBox information\n   * @param interactionType - interaction type (mouse, touch)\n   */\n  handleSelectedCallback = (\n    evt: EventTypes.InteractionEventType,\n    annotation: BidirectionalAnnotation,\n    handle: ToolHandle\n  ): void => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n    const data = annotation.data;\n\n    annotation.highlighted = true;\n\n    let movingTextBox = false;\n    let handleIndex;\n\n    if ((handle as TextBoxHandle).worldPosition) {\n      movingTextBox = true;\n    } else {\n      handleIndex = data.handles.points.findIndex((p) => p === handle);\n    }\n\n    // Find viewports to render on drag.\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    hideElementCursor(element);\n\n    this.editData = {\n      annotation,\n      viewportIdsToRender,\n      handleIndex,\n      movingTextBox,\n    };\n    this._activateModify(element);\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    evt.preventDefault();\n  };\n\n  /**\n   * Handles the mouse up action for the bidirectional tool. It can be at the end\n   * of the annotation drawing (MouseUpEventType) or when the user clicks and release\n   * the mouse button instantly which let to the annotation to draw without holding\n   * the mouse button (MouseClickEventType).\n   *\n   * @param evt - mouse up or mouse click event types\n   */\n  _endCallback = (evt: EventTypes.InteractionEventType): void => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    const { annotation, viewportIdsToRender, newAnnotation, hasMoved } =\n      this.editData;\n    const { data } = annotation;\n\n    if (newAnnotation && !hasMoved) {\n      return;\n    }\n\n    data.handles.activeHandleIndex = null;\n\n    this._deactivateModify(element);\n    this._deactivateDraw(element);\n\n    resetElementCursor(element);\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    if (this.editData.handleIndex !== undefined) {\n      const { points } = data.handles;\n      const firstLineSegmentLength = vec3.distance(points[0], points[1]);\n      const secondLineSegmentLength = vec3.distance(points[2], points[3]);\n\n      if (secondLineSegmentLength > firstLineSegmentLength) {\n        // Switch points so [0,1] is the long axis and [2,3] is the short axis.\n\n        const longAxis = [[...points[2]], [...points[3]]];\n\n        const shortAxisPoint0 = [...points[0]];\n        const shortAxisPoint1 = [...points[1]];\n\n        // shortAxis[0->1] should be perpendicular (counter-clockwise) to longAxis[0->1]\n        const longAxisVector = vec2.create();\n\n        vec2.set(\n          longAxisVector,\n          longAxis[1][0] - longAxis[0][0],\n          longAxis[1][1] - longAxis[1][0]\n        );\n\n        const counterClockWisePerpendicularToLongAxis = vec2.create();\n\n        vec2.set(\n          counterClockWisePerpendicularToLongAxis,\n          -longAxisVector[1],\n          longAxisVector[0]\n        );\n\n        const currentShortAxisVector = vec2.create();\n\n        vec2.set(\n          currentShortAxisVector,\n          shortAxisPoint1[0] - shortAxisPoint0[0],\n          shortAxisPoint1[1] - shortAxisPoint0[0]\n        );\n\n        let shortAxis;\n\n        if (\n          vec2.dot(\n            currentShortAxisVector,\n            counterClockWisePerpendicularToLongAxis\n          ) > 0\n        ) {\n          shortAxis = [shortAxisPoint0, shortAxisPoint1];\n        } else {\n          shortAxis = [shortAxisPoint1, shortAxisPoint0];\n        }\n\n        data.handles.points = [\n          longAxis[0],\n          longAxis[1],\n          shortAxis[0],\n          shortAxis[1],\n        ];\n      }\n    }\n\n    if (\n      this.isHandleOutsideImage &&\n      this.configuration.preventHandleOutsideImage\n    ) {\n      removeAnnotation(annotation.annotationUID);\n    }\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    if (newAnnotation) {\n      const eventType = Events.ANNOTATION_COMPLETED;\n\n      const eventDetail: AnnotationCompletedEventDetail = {\n        annotation,\n      };\n\n      triggerEvent(eventTarget, eventType, eventDetail);\n    }\n\n    this.editData = null;\n    this.isDrawing = false;\n  };\n\n  /**\n   * @param evt - mouse move event type or mouse drag\n   */\n  _dragDrawCallback = (evt: EventTypes.InteractionEventType): void => {\n    this.isDrawing = true;\n\n    const eventDetail = evt.detail;\n    const { currentPoints, element } = eventDetail;\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine, viewport } = enabledElement;\n    const { worldToCanvas } = viewport;\n    const { annotation, viewportIdsToRender, handleIndex } = this.editData;\n    const { data } = annotation;\n\n    const worldPos = currentPoints.world;\n\n    // Update first move handle\n    data.handles.points[handleIndex] = [...worldPos];\n\n    const canvasCoordPoints = data.handles.points.map(worldToCanvas);\n\n    const canvasCoords = {\n      longLineSegment: {\n        start: {\n          x: canvasCoordPoints[0][0],\n          y: canvasCoordPoints[0][1],\n        },\n        end: {\n          x: canvasCoordPoints[1][0],\n          y: canvasCoordPoints[1][1],\n        },\n      },\n      shortLineSegment: {\n        start: {\n          x: canvasCoordPoints[2][0],\n          y: canvasCoordPoints[2][1],\n        },\n        end: {\n          x: canvasCoordPoints[3][0],\n          y: canvasCoordPoints[3][1],\n        },\n      },\n    };\n\n    // ~~ calculate worldPos of our short axis handles\n    // short axis is perpendicular to long axis, and we set its length to be 2/3 of long axis\n    // (meaning each)\n    const dist = vec2.distance(canvasCoordPoints[0], canvasCoordPoints[1]);\n\n    const shortAxisDistFromCenter = dist / 3;\n    // Calculate long line's incline\n    const dx =\n      canvasCoords.longLineSegment.start.x - canvasCoords.longLineSegment.end.x;\n    const dy =\n      canvasCoords.longLineSegment.start.y - canvasCoords.longLineSegment.end.y;\n    const length = Math.sqrt(dx * dx + dy * dy);\n    const vectorX = dx / length;\n    const vectorY = dy / length;\n    // middle point between long line segment's points\n    const xMid =\n      (canvasCoords.longLineSegment.start.x +\n        canvasCoords.longLineSegment.end.x) /\n      2;\n    const yMid =\n      (canvasCoords.longLineSegment.start.y +\n        canvasCoords.longLineSegment.end.y) /\n      2;\n    // short points 1/3 distance from center of long points\n    const startX = xMid + shortAxisDistFromCenter * vectorY;\n    const startY = yMid - shortAxisDistFromCenter * vectorX;\n    const endX = xMid - shortAxisDistFromCenter * vectorY;\n    const endY = yMid + shortAxisDistFromCenter * vectorX;\n\n    // Update perpendicular line segment's points\n    data.handles.points[2] = viewport.canvasToWorld([startX, startY]);\n    data.handles.points[3] = viewport.canvasToWorld([endX, endY]);\n\n    annotation.invalidated = true;\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    this.editData.hasMoved = true;\n  };\n\n  /**\n   * Mouse drag to edit annotation callback\n   * @param evt - mouse drag event\n   */\n  _dragModifyCallback = (evt: EventTypes.InteractionEventType): void => {\n    this.isDrawing = true;\n\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n    const { annotation, viewportIdsToRender, handleIndex, movingTextBox } =\n      this.editData;\n    const { data } = annotation;\n    if (movingTextBox) {\n      const { deltaPoints } = eventDetail;\n      const worldPosDelta = deltaPoints.world;\n\n      const { textBox } = data.handles;\n      const { worldPosition } = textBox;\n\n      worldPosition[0] += worldPosDelta[0];\n      worldPosition[1] += worldPosDelta[1];\n      worldPosition[2] += worldPosDelta[2];\n\n      textBox.hasMoved = true;\n    } else if (handleIndex === undefined) {\n      // Moving tool\n      const { deltaPoints } = eventDetail;\n      const worldPosDelta = deltaPoints.world;\n      const points = data.handles.points;\n\n      points.forEach((point) => {\n        point[0] += worldPosDelta[0];\n        point[1] += worldPosDelta[1];\n        point[2] += worldPosDelta[2];\n      });\n      annotation.invalidated = true;\n    } else {\n      this._dragModifyHandle(evt);\n      annotation.invalidated = true;\n    }\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n  };\n\n  /**\n   * Mouse dragging a handle callback\n   * @param evt - mouse drag event\n   */\n  _dragModifyHandle = (evt: EventTypes.InteractionEventType): void => {\n    const eventDetail = evt.detail;\n    const { currentPoints, element } = eventDetail;\n    const enabledElement = getEnabledElement(element);\n    const { viewport } = enabledElement;\n    const { annotation, handleIndex: movingHandleIndex } = this.editData;\n    const { data } = annotation;\n\n    // Moving handle\n    const worldPos = currentPoints.world;\n    const canvasCoordHandlesCurrent = [\n      viewport.worldToCanvas(data.handles.points[0]),\n      viewport.worldToCanvas(data.handles.points[1]),\n      viewport.worldToCanvas(data.handles.points[2]),\n      viewport.worldToCanvas(data.handles.points[3]),\n    ];\n\n    const firstLineSegment = {\n      start: {\n        x: canvasCoordHandlesCurrent[0][0],\n        y: canvasCoordHandlesCurrent[0][1],\n      },\n      end: {\n        x: canvasCoordHandlesCurrent[1][0],\n        y: canvasCoordHandlesCurrent[1][1],\n      },\n    };\n    const secondLineSegment = {\n      start: {\n        x: canvasCoordHandlesCurrent[2][0],\n        y: canvasCoordHandlesCurrent[2][1],\n      },\n      end: {\n        x: canvasCoordHandlesCurrent[3][0],\n        y: canvasCoordHandlesCurrent[3][1],\n      },\n    };\n\n    // Handle we've selected's proposed point\n    const proposedPoint = <Types.Point3>[...worldPos];\n    const proposedCanvasCoord = viewport.worldToCanvas(proposedPoint);\n\n    if (movingHandleIndex === 0 || movingHandleIndex === 1) {\n      const fixedHandleIndex = movingHandleIndex === 0 ? 1 : 0;\n\n      const fixedHandleCanvasCoord =\n        canvasCoordHandlesCurrent[fixedHandleIndex];\n\n      const fixedHandleToProposedCoordVec = vec2.set(\n        vec2.create(),\n        proposedCanvasCoord[0] - fixedHandleCanvasCoord[0],\n        proposedCanvasCoord[1] - fixedHandleCanvasCoord[1]\n      );\n\n      const fixedHandleToOldCoordVec = vec2.set(\n        vec2.create(),\n        canvasCoordHandlesCurrent[movingHandleIndex][0] -\n          fixedHandleCanvasCoord[0],\n        canvasCoordHandlesCurrent[movingHandleIndex][1] -\n          fixedHandleCanvasCoord[1]\n      );\n\n      // normalize vector\n      vec2.normalize(\n        fixedHandleToProposedCoordVec,\n        fixedHandleToProposedCoordVec\n      );\n      vec2.normalize(fixedHandleToOldCoordVec, fixedHandleToOldCoordVec);\n\n      // Check whether this\n      const proposedFirstLineSegment = {\n        start: {\n          x: fixedHandleCanvasCoord[0],\n          y: fixedHandleCanvasCoord[1],\n        },\n        end: {\n          x: proposedCanvasCoord[0],\n          y: proposedCanvasCoord[1],\n        },\n      };\n\n      // Note: this is the case when we are modifying the long axis line segment\n      // and we make it shorter and shorter until its second half size becomes zero\n      // which basically means that any more modification would make the long axis\n      // second half disappear. In this case, we just bail out and do not update\n      // since we don't want to disrupt the bidirectional shape.\n      if (\n        this._movingLongAxisWouldPutItThroughShortAxis(\n          proposedFirstLineSegment,\n          secondLineSegment\n        )\n      ) {\n        return;\n      }\n\n      const centerOfRotation = fixedHandleCanvasCoord;\n\n      const angle = this._getSignedAngle(\n        fixedHandleToOldCoordVec,\n        fixedHandleToProposedCoordVec\n      );\n\n      // rotate handles around the center of rotation, first translate to origin,\n      // then rotate, then translate back\n      let firstPointX = canvasCoordHandlesCurrent[2][0];\n      let firstPointY = canvasCoordHandlesCurrent[2][1];\n\n      let secondPointX = canvasCoordHandlesCurrent[3][0];\n      let secondPointY = canvasCoordHandlesCurrent[3][1];\n\n      // translate to origin\n      firstPointX -= centerOfRotation[0];\n      firstPointY -= centerOfRotation[1];\n\n      secondPointX -= centerOfRotation[0];\n      secondPointY -= centerOfRotation[1];\n\n      // rotate\n      const rotatedFirstPoint =\n        firstPointX * Math.cos(angle) - firstPointY * Math.sin(angle);\n      const rotatedFirstPointY =\n        firstPointX * Math.sin(angle) + firstPointY * Math.cos(angle);\n\n      const rotatedSecondPoint =\n        secondPointX * Math.cos(angle) - secondPointY * Math.sin(angle);\n      const rotatedSecondPointY =\n        secondPointX * Math.sin(angle) + secondPointY * Math.cos(angle);\n\n      // translate back\n      firstPointX = rotatedFirstPoint + centerOfRotation[0];\n      firstPointY = rotatedFirstPointY + centerOfRotation[1];\n\n      secondPointX = rotatedSecondPoint + centerOfRotation[0];\n      secondPointY = rotatedSecondPointY + centerOfRotation[1];\n\n      // update handles\n      const newFirstPoint = viewport.canvasToWorld([firstPointX, firstPointY]);\n      const newSecondPoint = viewport.canvasToWorld([\n        secondPointX,\n        secondPointY,\n      ]);\n\n      // the fixed handle is the one that is not being moved so we\n      // don't need to update it\n      data.handles.points[movingHandleIndex] = proposedPoint;\n      data.handles.points[2] = newFirstPoint;\n      data.handles.points[3] = newSecondPoint;\n    } else {\n      // Translation manipulator\n      const translateHandleIndex = movingHandleIndex === 2 ? 3 : 2;\n\n      const canvasCoordsCurrent = {\n        longLineSegment: {\n          start: firstLineSegment.start,\n          end: firstLineSegment.end,\n        },\n        shortLineSegment: {\n          start: secondLineSegment.start,\n          end: secondLineSegment.end,\n        },\n      };\n\n      const longLineSegmentVec = vec2.subtract(\n        vec2.create(),\n        [\n          canvasCoordsCurrent.longLineSegment.end.x,\n          canvasCoordsCurrent.longLineSegment.end.y,\n        ],\n        [\n          canvasCoordsCurrent.longLineSegment.start.x,\n          canvasCoordsCurrent.longLineSegment.start.y,\n        ]\n      );\n\n      const longLineSegmentVecNormalized = vec2.normalize(\n        vec2.create(),\n        longLineSegmentVec\n      );\n\n      const proposedToCurrentVec = vec2.subtract(\n        vec2.create(),\n        [proposedCanvasCoord[0], proposedCanvasCoord[1]],\n        [\n          canvasCoordHandlesCurrent[movingHandleIndex][0],\n          canvasCoordHandlesCurrent[movingHandleIndex][1],\n        ]\n      );\n\n      const movementLength = vec2.length(proposedToCurrentVec);\n\n      const angle = this._getSignedAngle(\n        longLineSegmentVecNormalized,\n        proposedToCurrentVec\n      );\n\n      const movementAlongLineSegmentLength = Math.cos(angle) * movementLength;\n\n      const newTranslatedPoint = vec2.scaleAndAdd(\n        vec2.create(),\n        [\n          canvasCoordHandlesCurrent[translateHandleIndex][0],\n          canvasCoordHandlesCurrent[translateHandleIndex][1],\n        ],\n        longLineSegmentVecNormalized,\n        movementAlongLineSegmentLength\n      );\n\n      // don't update if it passes through the other line segment\n      if (\n        this._movingLongAxisWouldPutItThroughShortAxis(\n          {\n            start: {\n              x: proposedCanvasCoord[0],\n              y: proposedCanvasCoord[1],\n            },\n            end: {\n              x: newTranslatedPoint[0],\n              y: newTranslatedPoint[1],\n            },\n          },\n          {\n            start: {\n              x: canvasCoordsCurrent.longLineSegment.start.x,\n              y: canvasCoordsCurrent.longLineSegment.start.y,\n            },\n            end: {\n              x: canvasCoordsCurrent.longLineSegment.end.x,\n              y: canvasCoordsCurrent.longLineSegment.end.y,\n            },\n          }\n        )\n      ) {\n        return;\n      }\n\n      const intersectionPoint = lineSegment.intersectLine(\n        [proposedCanvasCoord[0], proposedCanvasCoord[1]],\n        [newTranslatedPoint[0], newTranslatedPoint[1]],\n        [firstLineSegment.start.x, firstLineSegment.start.y],\n        [firstLineSegment.end.x, firstLineSegment.end.y]\n      );\n\n      // don't update if it doesn't intersect\n      if (!intersectionPoint) {\n        return;\n      }\n\n      data.handles.points[translateHandleIndex] = viewport.canvasToWorld(\n        newTranslatedPoint as Types.Point2\n      );\n      data.handles.points[movingHandleIndex] = proposedPoint;\n    }\n  };\n\n  /**\n   * Cancels an ongoing drawing of a bidirectional annotation\n   * @param element - HTML Element\n   */\n  cancel = (element: HTMLDivElement) => {\n    // If it is mid-draw or mid-modify\n    if (this.isDrawing) {\n      this.isDrawing = false;\n      this._deactivateDraw(element);\n      this._deactivateModify(element);\n      resetElementCursor(element);\n\n      const { annotation, viewportIdsToRender, newAnnotation } = this.editData;\n      const { data } = annotation;\n\n      annotation.highlighted = false;\n      data.handles.activeHandleIndex = null;\n\n      const enabledElement = getEnabledElement(element);\n      const { renderingEngine } = enabledElement;\n\n      triggerAnnotationRenderForViewportIds(\n        renderingEngine,\n        viewportIdsToRender\n      );\n\n      if (newAnnotation) {\n        const eventType = Events.ANNOTATION_COMPLETED;\n\n        const eventDetail: AnnotationCompletedEventDetail = {\n          annotation,\n        };\n\n        triggerEvent(eventTarget, eventType, eventDetail);\n      }\n\n      this.editData = null;\n      return annotation.annotationUID;\n    }\n  };\n\n  _activateDraw = (element) => {\n    state.isInteractingWithTool = true;\n\n    element.addEventListener(Events.MOUSE_UP, this._endCallback);\n    element.addEventListener(Events.MOUSE_DRAG, this._dragDrawCallback);\n    element.addEventListener(Events.MOUSE_MOVE, this._dragDrawCallback);\n    element.addEventListener(Events.MOUSE_CLICK, this._endCallback);\n\n    element.addEventListener(\n      Events.TOUCH_TAP,\n      this._endCallback as EventListener\n    );\n    element.addEventListener(\n      Events.TOUCH_END,\n      this._endCallback as EventListener\n    );\n    element.addEventListener(\n      Events.TOUCH_DRAG,\n      this._dragDrawCallback as EventListener\n    );\n  };\n\n  _deactivateDraw = (element) => {\n    state.isInteractingWithTool = false;\n\n    element.removeEventListener(Events.MOUSE_UP, this._endCallback);\n    element.removeEventListener(Events.MOUSE_DRAG, this._dragDrawCallback);\n    element.removeEventListener(Events.MOUSE_MOVE, this._dragDrawCallback);\n    element.removeEventListener(Events.MOUSE_CLICK, this._endCallback);\n\n    element.removeEventListener(\n      Events.TOUCH_TAP,\n      this._endCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.TOUCH_END,\n      this._endCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.TOUCH_DRAG,\n      this._dragDrawCallback as EventListener\n    );\n  };\n\n  _activateModify = (element) => {\n    state.isInteractingWithTool = true;\n\n    element.addEventListener(Events.MOUSE_UP, this._endCallback);\n    element.addEventListener(Events.MOUSE_DRAG, this._dragModifyCallback);\n    element.addEventListener(Events.MOUSE_CLICK, this._endCallback);\n\n    element.addEventListener(\n      Events.TOUCH_END,\n      this._endCallback as EventListener\n    );\n    element.addEventListener(\n      Events.TOUCH_DRAG,\n      this._dragModifyCallback as EventListener\n    );\n    element.addEventListener(\n      Events.TOUCH_TAP,\n      this._endCallback as EventListener\n    );\n  };\n\n  _deactivateModify = (element) => {\n    state.isInteractingWithTool = false;\n\n    element.removeEventListener(Events.MOUSE_UP, this._endCallback);\n    element.removeEventListener(Events.MOUSE_DRAG, this._dragModifyCallback);\n    element.removeEventListener(Events.MOUSE_CLICK, this._endCallback);\n\n    element.removeEventListener(\n      Events.TOUCH_END,\n      this._endCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.TOUCH_DRAG,\n      this._dragModifyCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.TOUCH_TAP,\n      this._endCallback as EventListener\n    );\n  };\n\n  /**\n   * it is used to draw the bidirectional annotation in each\n   * request animation frame. It calculates the updated cached statistics if\n   * data is invalidated and cache it.\n   *\n   * @param enabledElement - The Cornerstone's enabledElement.\n   * @param svgDrawingHelper - The svgDrawingHelper providing the context for drawing.\n   */\n  renderAnnotation = (\n    enabledElement: Types.IEnabledElement,\n    svgDrawingHelper: SVGDrawingHelper\n  ): boolean => {\n    let renderStatus = true;\n    const { viewport } = enabledElement;\n    const { element } = viewport;\n    let annotations = getAnnotations(this.getToolName(), element);\n\n    if (!annotations?.length) {\n      return renderStatus;\n    }\n\n    annotations = this.filterInteractableAnnotationsForElement(\n      element,\n      annotations\n    );\n\n    if (!annotations?.length) {\n      return renderStatus;\n    }\n\n    const targetId = this.getTargetId(viewport);\n\n    const renderingEngine = viewport.getRenderingEngine();\n\n    const styleSpecifier: StyleSpecifier = {\n      toolGroupId: this.toolGroupId,\n      toolName: this.getToolName(),\n      viewportId: enabledElement.viewport.id,\n    };\n\n    for (let i = 0; i < annotations.length; i++) {\n      const annotation = annotations[i] as BidirectionalAnnotation;\n      const { annotationUID, data } = annotation;\n      const { points, activeHandleIndex } = data.handles;\n      const canvasCoordinates = points.map((p) => viewport.worldToCanvas(p));\n\n      styleSpecifier.annotationUID = annotationUID;\n\n      const lineWidth = this.getStyle('lineWidth', styleSpecifier, annotation);\n      const lineDash = this.getStyle('lineDash', styleSpecifier, annotation);\n      const color = this.getStyle('color', styleSpecifier, annotation);\n      const shadow = this.getStyle('shadow', styleSpecifier, annotation);\n\n      // If cachedStats does not exist, or the unit is missing (as part of import/hydration etc.),\n      // force to recalculate the stats from the points\n      if (\n        !data.cachedStats[targetId] ||\n        data.cachedStats[targetId].unit == null\n      ) {\n        data.cachedStats[targetId] = {\n          length: null,\n          width: null,\n          unit: null,\n        };\n\n        this._calculateCachedStats(annotation, renderingEngine, enabledElement);\n      } else if (annotation.invalidated) {\n        this._throttledCalculateCachedStats(\n          annotation,\n          renderingEngine,\n          enabledElement\n        );\n      }\n\n      // If rendering engine has been destroyed while rendering\n      if (!viewport.getRenderingEngine()) {\n        console.warn('Rendering Engine has been destroyed');\n        return renderStatus;\n      }\n\n      let activeHandleCanvasCoords;\n\n      if (!isAnnotationVisible(annotationUID)) {\n        continue;\n      }\n\n      if (\n        !isAnnotationLocked(annotation) &&\n        !this.editData &&\n        activeHandleIndex !== null\n      ) {\n        // Not locked or creating and hovering over handle, so render handle.\n        activeHandleCanvasCoords = [canvasCoordinates[activeHandleIndex]];\n      }\n\n      if (activeHandleCanvasCoords) {\n        const handleGroupUID = '0';\n\n        drawHandlesSvg(\n          svgDrawingHelper,\n          annotationUID,\n          handleGroupUID,\n          activeHandleCanvasCoords,\n          {\n            color,\n          }\n        );\n      }\n\n      const dataId1 = `${annotationUID}-line-1`;\n      const dataId2 = `${annotationUID}-line-2`;\n\n      const lineUID = '0';\n      drawLineSvg(\n        svgDrawingHelper,\n        annotationUID,\n        lineUID,\n        canvasCoordinates[0],\n        canvasCoordinates[1],\n        {\n          color,\n          lineDash,\n          lineWidth,\n          shadow,\n        },\n        dataId1\n      );\n\n      const secondLineUID = '1';\n      drawLineSvg(\n        svgDrawingHelper,\n        annotationUID,\n        secondLineUID,\n        canvasCoordinates[2],\n        canvasCoordinates[3],\n        {\n          color,\n          lineDash,\n          lineWidth,\n          shadow,\n        },\n        dataId2\n      );\n\n      renderStatus = true;\n\n      const options = this.getLinkedTextBoxStyle(styleSpecifier, annotation);\n      if (!options.visibility) {\n        data.handles.textBox = {\n          hasMoved: false,\n          worldPosition: <Types.Point3>[0, 0, 0],\n          worldBoundingBox: {\n            topLeft: <Types.Point3>[0, 0, 0],\n            topRight: <Types.Point3>[0, 0, 0],\n            bottomLeft: <Types.Point3>[0, 0, 0],\n            bottomRight: <Types.Point3>[0, 0, 0],\n          },\n        };\n        continue;\n      }\n\n      const textLines = this.configuration.getTextLines(data, targetId);\n      if (!textLines || textLines.length === 0) {\n        continue;\n      }\n\n      let canvasTextBoxCoords;\n\n      if (!data.handles.textBox.hasMoved) {\n        canvasTextBoxCoords = getTextBoxCoordsCanvas(canvasCoordinates);\n\n        data.handles.textBox.worldPosition =\n          viewport.canvasToWorld(canvasTextBoxCoords);\n      }\n\n      const textBoxPosition = viewport.worldToCanvas(\n        data.handles.textBox.worldPosition\n      );\n\n      const textBoxUID = '1';\n      const boundingBox = drawLinkedTextBoxSvg(\n        svgDrawingHelper,\n        annotationUID,\n        textBoxUID,\n        textLines,\n        textBoxPosition,\n        canvasCoordinates,\n        {},\n        options\n      );\n\n      const { x: left, y: top, width, height } = boundingBox;\n\n      data.handles.textBox.worldBoundingBox = {\n        topLeft: viewport.canvasToWorld([left, top]),\n        topRight: viewport.canvasToWorld([left + width, top]),\n        bottomLeft: viewport.canvasToWorld([left, top + height]),\n        bottomRight: viewport.canvasToWorld([left + width, top + height]),\n      };\n    }\n\n    return renderStatus;\n  };\n\n  _movingLongAxisWouldPutItThroughShortAxis = (\n    firstLineSegment,\n    secondLineSegment\n  ) => {\n    const vectorInSecondLineDirection = vec2.create();\n\n    vec2.set(\n      vectorInSecondLineDirection,\n      secondLineSegment.end.x - secondLineSegment.start.x,\n      secondLineSegment.end.y - secondLineSegment.start.y\n    );\n\n    vec2.normalize(vectorInSecondLineDirection, vectorInSecondLineDirection);\n\n    const extendedSecondLineSegment = {\n      start: {\n        x: secondLineSegment.start.x - vectorInSecondLineDirection[0] * 10,\n        y: secondLineSegment.start.y - vectorInSecondLineDirection[1] * 10,\n      },\n      end: {\n        x: secondLineSegment.end.x + vectorInSecondLineDirection[0] * 10,\n        y: secondLineSegment.end.y + vectorInSecondLineDirection[1] * 10,\n      },\n    };\n\n    // Add some buffer in the secondLineSegment when finding the proposedIntersectionPoint\n    // Of points to stop us getting stack when rotating quickly.\n\n    const proposedIntersectionPoint = lineSegment.intersectLine(\n      [extendedSecondLineSegment.start.x, extendedSecondLineSegment.start.y],\n      [extendedSecondLineSegment.end.x, extendedSecondLineSegment.end.y],\n      [firstLineSegment.start.x, firstLineSegment.start.y],\n      [firstLineSegment.end.x, firstLineSegment.end.y]\n    );\n\n    const wouldPutThroughShortAxis = !proposedIntersectionPoint;\n\n    return wouldPutThroughShortAxis;\n  };\n\n  _calculateLength(pos1, pos2) {\n    const dx = pos1[0] - pos2[0];\n    const dy = pos1[1] - pos2[1];\n    const dz = pos1[2] - pos2[2];\n\n    return Math.sqrt(dx * dx + dy * dy + dz * dz);\n  }\n\n  _calculateCachedStats = (annotation, renderingEngine, enabledElement) => {\n    const { data } = annotation;\n    const { viewportId, renderingEngineId } = enabledElement;\n\n    const worldPos1 = data.handles.points[0];\n    const worldPos2 = data.handles.points[1];\n    const worldPos3 = data.handles.points[2];\n    const worldPos4 = data.handles.points[3];\n\n    const { cachedStats } = data;\n    const targetIds = Object.keys(cachedStats);\n\n    for (let i = 0; i < targetIds.length; i++) {\n      const targetId = targetIds[i];\n\n      const image = this.getTargetIdImage(targetId, renderingEngine);\n\n      // If image does not exists for the targetId, skip. This can be due\n      // to various reasons such as if the target was a volumeViewport, and\n      // the volumeViewport has been decached in the meantime.\n      if (!image) {\n        continue;\n      }\n\n      const { imageData, dimensions } = image;\n      const scale = getCalibratedScale(image);\n      const dist1 = this._calculateLength(worldPos1, worldPos2) / scale;\n      const dist2 = this._calculateLength(worldPos3, worldPos4) / scale;\n      const length = dist1 > dist2 ? dist1 : dist2;\n      const width = dist1 > dist2 ? dist2 : dist1;\n\n      const index1 = transformWorldToIndex(imageData, worldPos1);\n      const index2 = transformWorldToIndex(imageData, worldPos2);\n      const index3 = transformWorldToIndex(imageData, worldPos3);\n      const index4 = transformWorldToIndex(imageData, worldPos4);\n\n      this._isInsideVolume(index1, index2, index3, index4, dimensions)\n        ? (this.isHandleOutsideImage = false)\n        : (this.isHandleOutsideImage = true);\n\n      cachedStats[targetId] = {\n        length,\n        width,\n        unit: getCalibratedLengthUnits(null, image),\n      };\n    }\n\n    annotation.invalidated = false;\n\n    // Dispatching annotation modified\n    const eventType = Events.ANNOTATION_MODIFIED;\n\n    const eventDetail: AnnotationModifiedEventDetail = {\n      annotation,\n      viewportId,\n      renderingEngineId,\n    };\n    triggerEvent(eventTarget, eventType, eventDetail);\n\n    return cachedStats;\n  };\n\n  _isInsideVolume = (index1, index2, index3, index4, dimensions): boolean => {\n    return (\n      csUtils.indexWithinDimensions(index1, dimensions) &&\n      csUtils.indexWithinDimensions(index2, dimensions) &&\n      csUtils.indexWithinDimensions(index3, dimensions) &&\n      csUtils.indexWithinDimensions(index4, dimensions)\n    );\n  };\n\n  _getSignedAngle = (vector1, vector2) => {\n    return Math.atan2(\n      vector1[0] * vector2[1] - vector1[1] * vector2[0],\n      vector1[0] * vector2[0] + vector1[1] * vector2[1]\n    );\n  };\n}\n\nfunction defaultGetTextLines(data, targetId): string[] {\n  const { cachedStats } = data;\n  const { length, width, unit } = cachedStats[targetId];\n\n  if (length === undefined) {\n    return;\n  }\n\n  // spaceBetweenSlices & pixelSpacing &\n  // magnitude in each direction? Otherwise, this is \"px\"?\n  const textLines = [\n    `L: ${roundNumber(length)} ${unit}`,\n    `W: ${roundNumber(width)} ${unit}`,\n  ];\n\n  return textLines;\n}\n\nBidirectionalTool.toolName = 'Bidirectional';\nexport default BidirectionalTool;\n","import { Events } from '../../enums';\nimport {\n  getEnabledElement,\n  triggerEvent,\n  eventTarget,\n  utilities as csUtils,\n} from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\nimport {\n  getCalibratedLengthUnits,\n  getCalibratedScale,\n} from '../../utilities/getCalibratedUnits';\nimport roundNumber from '../../utilities/roundNumber';\nimport { AnnotationTool } from '../base';\nimport throttle from '../../utilities/throttle';\nimport {\n  addAnnotation,\n  getAnnotations,\n  removeAnnotation,\n} from '../../stateManagement/annotation/annotationState';\nimport { isAnnotationLocked } from '../../stateManagement/annotation/annotationLocking';\nimport { isAnnotationVisible } from '../../stateManagement/annotation/annotationVisibility';\nimport * as lineSegment from '../../utilities/math/line';\n\nimport {\n  drawHandles as drawHandlesSvg,\n  drawLine as drawLineSvg,\n  drawLinkedTextBox as drawLinkedTextBoxSvg,\n} from '../../drawingSvg';\nimport { state } from '../../store';\nimport { getViewportIdsWithToolToRender } from '../../utilities/viewportFilters';\nimport { getTextBoxCoordsCanvas } from '../../utilities/drawing';\nimport triggerAnnotationRenderForViewportIds from '../../utilities/triggerAnnotationRenderForViewportIds';\nimport {\n  AnnotationCompletedEventDetail,\n  AnnotationModifiedEventDetail,\n} from '../../types/EventTypes';\n\nimport {\n  resetElementCursor,\n  hideElementCursor,\n} from '../../cursors/elementCursor';\n\nimport {\n  EventTypes,\n  ToolHandle,\n  TextBoxHandle,\n  PublicToolProps,\n  ToolProps,\n  SVGDrawingHelper,\n} from '../../types';\nimport { LengthAnnotation } from '../../types/ToolSpecificAnnotationTypes';\nimport { StyleSpecifier } from '../../types/AnnotationStyle';\n\nconst { transformWorldToIndex } = csUtils;\n\n/**\n * LengthTool let you draw annotations that measures the length of two drawing\n * points on a slice. You can use the LengthTool in all imaging planes even in oblique\n * reconstructed planes. Note: annotation tools in cornerstone3DTools exists in the exact location\n * in the physical 3d space, as a result, by default, all annotations that are\n * drawing in the same frameOfReference will get shared between viewports that\n * are in the same frameOfReference.\n *\n * The resulting annotation's data (statistics) and metadata (the\n * state of the viewport while drawing was happening) will get added to the\n * ToolState manager and can be accessed from the ToolState by calling getAnnotations\n * or similar methods.\n *\n * ```js\n * cornerstoneTools.addTool(LengthTool)\n *\n * const toolGroup = ToolGroupManager.createToolGroup('toolGroupId')\n *\n * toolGroup.addTool(LengthTool.toolName)\n *\n * toolGroup.addViewport('viewportId', 'renderingEngineId')\n *\n * toolGroup.setToolActive(LengthTool.toolName, {\n *   bindings: [\n *    {\n *       mouseButton: MouseBindings.Primary, // Left Click\n *     },\n *   ],\n * })\n * ```\n *\n * Read more in the Docs section of the website.\n\n */\n\nclass LengthTool extends AnnotationTool {\n  static toolName;\n\n  public touchDragCallback: any;\n  public mouseDragCallback: any;\n  _throttledCalculateCachedStats: any;\n  editData: {\n    annotation: any;\n    viewportIdsToRender: string[];\n    handleIndex?: number;\n    movingTextBox?: boolean;\n    newAnnotation?: boolean;\n    hasMoved?: boolean;\n  } | null;\n  isDrawing: boolean;\n  isHandleOutsideImage: boolean;\n\n  constructor(\n    toolProps: PublicToolProps = {},\n    defaultToolProps: ToolProps = {\n      supportedInteractionTypes: ['Mouse', 'Touch'],\n      configuration: {\n        preventHandleOutsideImage: false,\n        getTextLines: defaultGetTextLines,\n      },\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n\n    this._throttledCalculateCachedStats = throttle(\n      this._calculateCachedStats,\n      100,\n      { trailing: true }\n    );\n  }\n\n  /**\n   * Based on the current position of the mouse and the current imageId to create\n   * a Length Annotation and stores it in the annotationManager\n   *\n   * @param evt -  EventTypes.NormalizedMouseEventType\n   * @returns The annotation object.\n   *\n   */\n  addNewAnnotation = (\n    evt: EventTypes.InteractionEventType\n  ): LengthAnnotation => {\n    const eventDetail = evt.detail;\n    const { currentPoints, element } = eventDetail;\n    const worldPos = currentPoints.world;\n    const enabledElement = getEnabledElement(element);\n    const { viewport, renderingEngine } = enabledElement;\n\n    hideElementCursor(element);\n    this.isDrawing = true;\n\n    const camera = viewport.getCamera();\n    const { viewPlaneNormal, viewUp } = camera;\n\n    const referencedImageId = this.getReferencedImageId(\n      viewport,\n      worldPos,\n      viewPlaneNormal,\n      viewUp\n    );\n\n    const FrameOfReferenceUID = viewport.getFrameOfReferenceUID();\n\n    const annotation = {\n      highlighted: true,\n      invalidated: true,\n      metadata: {\n        toolName: this.getToolName(),\n        viewPlaneNormal: <Types.Point3>[...viewPlaneNormal],\n        viewUp: <Types.Point3>[...viewUp],\n        FrameOfReferenceUID,\n        referencedImageId,\n      },\n      data: {\n        handles: {\n          points: [<Types.Point3>[...worldPos], <Types.Point3>[...worldPos]],\n          activeHandleIndex: null,\n          textBox: {\n            hasMoved: false,\n            worldPosition: <Types.Point3>[0, 0, 0],\n            worldBoundingBox: {\n              topLeft: <Types.Point3>[0, 0, 0],\n              topRight: <Types.Point3>[0, 0, 0],\n              bottomLeft: <Types.Point3>[0, 0, 0],\n              bottomRight: <Types.Point3>[0, 0, 0],\n            },\n          },\n        },\n        label: '',\n        cachedStats: {},\n      },\n    };\n\n    addAnnotation(annotation, element);\n\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    this.editData = {\n      annotation,\n      viewportIdsToRender,\n      handleIndex: 1,\n      movingTextBox: false,\n      newAnnotation: true,\n      hasMoved: false,\n    };\n    this._activateDraw(element);\n\n    evt.preventDefault();\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    return annotation;\n  };\n\n  /**\n   * It returns if the canvas point is near the provided length annotation in the provided\n   * element or not. A proximity is passed to the function to determine the\n   * proximity of the point to the annotation in number of pixels.\n   *\n   * @param element - HTML Element\n   * @param annotation - Annotation\n   * @param canvasCoords - Canvas coordinates\n   * @param proximity - Proximity to tool to consider\n   * @returns Boolean, whether the canvas point is near tool\n   */\n  isPointNearTool = (\n    element: HTMLDivElement,\n    annotation: LengthAnnotation,\n    canvasCoords: Types.Point2,\n    proximity: number\n  ): boolean => {\n    const enabledElement = getEnabledElement(element);\n    const { viewport } = enabledElement;\n    const { data } = annotation;\n    const [point1, point2] = data.handles.points;\n    const canvasPoint1 = viewport.worldToCanvas(point1);\n    const canvasPoint2 = viewport.worldToCanvas(point2);\n\n    const line = {\n      start: {\n        x: canvasPoint1[0],\n        y: canvasPoint1[1],\n      },\n      end: {\n        x: canvasPoint2[0],\n        y: canvasPoint2[1],\n      },\n    };\n\n    const distanceToPoint = lineSegment.distanceToPoint(\n      [line.start.x, line.start.y],\n      [line.end.x, line.end.y],\n      [canvasCoords[0], canvasCoords[1]]\n    );\n\n    if (distanceToPoint <= proximity) {\n      return true;\n    }\n\n    return false;\n  };\n\n  toolSelectedCallback = (\n    evt: EventTypes.InteractionEventType,\n    annotation: LengthAnnotation\n  ): void => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    annotation.highlighted = true;\n\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    this.editData = {\n      annotation,\n      viewportIdsToRender,\n      movingTextBox: false,\n    };\n\n    this._activateModify(element);\n\n    hideElementCursor(element);\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    evt.preventDefault();\n  };\n\n  handleSelectedCallback(\n    evt: EventTypes.InteractionEventType,\n    annotation: LengthAnnotation,\n    handle: ToolHandle\n  ): void {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n    const { data } = annotation;\n\n    annotation.highlighted = true;\n\n    let movingTextBox = false;\n    let handleIndex;\n\n    if ((handle as TextBoxHandle).worldPosition) {\n      movingTextBox = true;\n    } else {\n      handleIndex = data.handles.points.findIndex((p) => p === handle);\n    }\n\n    // Find viewports to render on drag.\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    this.editData = {\n      annotation,\n      viewportIdsToRender,\n      handleIndex,\n      movingTextBox,\n    };\n    this._activateModify(element);\n\n    hideElementCursor(element);\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    evt.preventDefault();\n  }\n\n  _endCallback = (evt: EventTypes.InteractionEventType): void => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    const { annotation, viewportIdsToRender, newAnnotation, hasMoved } =\n      this.editData;\n    const { data } = annotation;\n\n    if (newAnnotation && !hasMoved) {\n      // when user starts the drawing by click, and moving the mouse, instead\n      // of click and drag\n      return;\n    }\n\n    data.handles.activeHandleIndex = null;\n\n    this._deactivateModify(element);\n    this._deactivateDraw(element);\n    resetElementCursor(element);\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    if (\n      this.isHandleOutsideImage &&\n      this.configuration.preventHandleOutsideImage\n    ) {\n      removeAnnotation(annotation.annotationUID);\n    }\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    if (newAnnotation) {\n      const eventType = Events.ANNOTATION_COMPLETED;\n\n      const eventDetail: AnnotationCompletedEventDetail = {\n        annotation,\n      };\n\n      triggerEvent(eventTarget, eventType, eventDetail);\n    }\n\n    this.editData = null;\n    this.isDrawing = false;\n  };\n\n  _dragCallback = (evt: EventTypes.InteractionEventType): void => {\n    this.isDrawing = true;\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    const { annotation, viewportIdsToRender, handleIndex, movingTextBox } =\n      this.editData;\n    const { data } = annotation;\n\n    if (movingTextBox) {\n      // Drag mode - moving text box\n      const { deltaPoints } = eventDetail as EventTypes.MouseDragEventDetail;\n      const worldPosDelta = deltaPoints.world;\n\n      const { textBox } = data.handles;\n      const { worldPosition } = textBox;\n\n      worldPosition[0] += worldPosDelta[0];\n      worldPosition[1] += worldPosDelta[1];\n      worldPosition[2] += worldPosDelta[2];\n\n      textBox.hasMoved = true;\n    } else if (handleIndex === undefined) {\n      // Drag mode - moving handle\n      const { deltaPoints } = eventDetail as EventTypes.MouseDragEventDetail;\n      const worldPosDelta = deltaPoints.world;\n\n      const points = data.handles.points;\n\n      points.forEach((point) => {\n        point[0] += worldPosDelta[0];\n        point[1] += worldPosDelta[1];\n        point[2] += worldPosDelta[2];\n      });\n      annotation.invalidated = true;\n    } else {\n      // Move mode - after double click, and mouse move to draw\n      const { currentPoints } = eventDetail;\n      const worldPos = currentPoints.world;\n\n      data.handles.points[handleIndex] = [...worldPos];\n      annotation.invalidated = true;\n    }\n\n    this.editData.hasMoved = true;\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n  };\n\n  cancel = (element: HTMLDivElement) => {\n    // If it is mid-draw or mid-modify\n    if (this.isDrawing) {\n      this.isDrawing = false;\n      this._deactivateDraw(element);\n      this._deactivateModify(element);\n      resetElementCursor(element);\n\n      const { annotation, viewportIdsToRender, newAnnotation } = this.editData;\n      const { data } = annotation;\n\n      annotation.highlighted = false;\n      data.handles.activeHandleIndex = null;\n\n      const enabledElement = getEnabledElement(element);\n      const { renderingEngine } = enabledElement;\n\n      triggerAnnotationRenderForViewportIds(\n        renderingEngine,\n        viewportIdsToRender\n      );\n\n      if (newAnnotation) {\n        const eventType = Events.ANNOTATION_COMPLETED;\n\n        const eventDetail: AnnotationCompletedEventDetail = {\n          annotation,\n        };\n\n        triggerEvent(eventTarget, eventType, eventDetail);\n      }\n\n      this.editData = null;\n      return annotation.annotationUID;\n    }\n  };\n\n  _activateModify = (element: HTMLDivElement) => {\n    state.isInteractingWithTool = true;\n\n    element.addEventListener(\n      Events.MOUSE_UP,\n      this._endCallback as EventListener\n    );\n    element.addEventListener(\n      Events.MOUSE_DRAG,\n      this._dragCallback as EventListener\n    );\n    element.addEventListener(\n      Events.MOUSE_CLICK,\n      this._endCallback as EventListener\n    );\n\n    element.addEventListener(\n      Events.TOUCH_END,\n      this._endCallback as EventListener\n    );\n    element.addEventListener(\n      Events.TOUCH_DRAG,\n      this._dragCallback as EventListener\n    );\n    element.addEventListener(\n      Events.TOUCH_TAP,\n      this._endCallback as EventListener\n    );\n  };\n\n  _deactivateModify = (element: HTMLDivElement) => {\n    state.isInteractingWithTool = false;\n\n    element.removeEventListener(\n      Events.MOUSE_UP,\n      this._endCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.MOUSE_DRAG,\n      this._dragCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.MOUSE_CLICK,\n      this._endCallback as EventListener\n    );\n\n    element.removeEventListener(\n      Events.TOUCH_END,\n      this._endCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.TOUCH_DRAG,\n      this._dragCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.TOUCH_TAP,\n      this._endCallback as EventListener\n    );\n  };\n\n  _activateDraw = (element: HTMLDivElement) => {\n    state.isInteractingWithTool = true;\n\n    element.addEventListener(\n      Events.MOUSE_UP,\n      this._endCallback as EventListener\n    );\n    element.addEventListener(\n      Events.MOUSE_DRAG,\n      this._dragCallback as EventListener\n    );\n    element.addEventListener(\n      Events.MOUSE_MOVE,\n      this._dragCallback as EventListener\n    );\n    element.addEventListener(\n      Events.MOUSE_CLICK,\n      this._endCallback as EventListener\n    );\n\n    element.addEventListener(\n      Events.TOUCH_END,\n      this._endCallback as EventListener\n    );\n    element.addEventListener(\n      Events.TOUCH_DRAG,\n      this._dragCallback as EventListener\n    );\n    element.addEventListener(\n      Events.TOUCH_TAP,\n      this._endCallback as EventListener\n    );\n  };\n\n  _deactivateDraw = (element: HTMLDivElement) => {\n    state.isInteractingWithTool = false;\n\n    element.removeEventListener(\n      Events.MOUSE_UP,\n      this._endCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.MOUSE_DRAG,\n      this._dragCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.MOUSE_MOVE,\n      this._dragCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.MOUSE_CLICK,\n      this._endCallback as EventListener\n    );\n\n    element.removeEventListener(\n      Events.TOUCH_END,\n      this._endCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.TOUCH_DRAG,\n      this._dragCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.TOUCH_TAP,\n      this._endCallback as EventListener\n    );\n  };\n\n  /**\n   * it is used to draw the length annotation in each\n   * request animation frame. It calculates the updated cached statistics if\n   * data is invalidated and cache it.\n   *\n   * @param enabledElement - The Cornerstone's enabledElement.\n   * @param svgDrawingHelper - The svgDrawingHelper providing the context for drawing.\n   */\n  renderAnnotation = (\n    enabledElement: Types.IEnabledElement,\n    svgDrawingHelper: SVGDrawingHelper\n  ): boolean => {\n    let renderStatus = false;\n    const { viewport } = enabledElement;\n    const { element } = viewport;\n\n    let annotations = getAnnotations(this.getToolName(), element);\n\n    // Todo: We don't need this anymore, filtering happens in triggerAnnotationRender\n    if (!annotations?.length) {\n      return renderStatus;\n    }\n\n    annotations = this.filterInteractableAnnotationsForElement(\n      element,\n      annotations\n    );\n\n    if (!annotations?.length) {\n      return renderStatus;\n    }\n\n    const targetId = this.getTargetId(viewport);\n    const renderingEngine = viewport.getRenderingEngine();\n\n    const styleSpecifier: StyleSpecifier = {\n      toolGroupId: this.toolGroupId,\n      toolName: this.getToolName(),\n      viewportId: enabledElement.viewport.id,\n    };\n\n    // Draw SVG\n    for (let i = 0; i < annotations.length; i++) {\n      const annotation = annotations[i] as LengthAnnotation;\n      const { annotationUID, data } = annotation;\n      const { points, activeHandleIndex } = data.handles;\n\n      styleSpecifier.annotationUID = annotationUID;\n\n      // Todo: move these into annotationTool class\n      const lineWidth = this.getStyle('lineWidth', styleSpecifier, annotation);\n      const lineDash = this.getStyle('lineDash', styleSpecifier, annotation);\n      const color = this.getStyle('color', styleSpecifier, annotation);\n      const shadow = this.getStyle('shadow', styleSpecifier, annotation);\n\n      const canvasCoordinates = points.map((p) => viewport.worldToCanvas(p));\n\n      let activeHandleCanvasCoords;\n\n      // If cachedStats does not exist, or the unit is missing (as part of import/hydration etc.),\n      // force to recalculate the stats from the points\n      if (\n        !data.cachedStats[targetId] ||\n        data.cachedStats[targetId].unit == null\n      ) {\n        data.cachedStats[targetId] = {\n          length: null,\n          unit: null,\n        };\n\n        this._calculateCachedStats(annotation, renderingEngine, enabledElement);\n      } else if (annotation.invalidated) {\n        this._throttledCalculateCachedStats(\n          annotation,\n          renderingEngine,\n          enabledElement\n        );\n      }\n\n      if (!isAnnotationVisible(annotationUID)) {\n        continue;\n      }\n\n      if (\n        !isAnnotationLocked(annotation) &&\n        !this.editData &&\n        activeHandleIndex !== null\n      ) {\n        // Not locked or creating and hovering over handle, so render handle.\n        activeHandleCanvasCoords = [canvasCoordinates[activeHandleIndex]];\n      }\n\n      if (activeHandleCanvasCoords) {\n        const handleGroupUID = '0';\n\n        drawHandlesSvg(\n          svgDrawingHelper,\n          annotationUID,\n          handleGroupUID,\n          canvasCoordinates,\n          {\n            color,\n            lineDash,\n            lineWidth,\n          }\n        );\n      }\n\n      const dataId = `${annotationUID}-line`;\n      const lineUID = '1';\n      drawLineSvg(\n        svgDrawingHelper,\n        annotationUID,\n        lineUID,\n        canvasCoordinates[0],\n        canvasCoordinates[1],\n        {\n          color,\n          width: lineWidth,\n          lineDash,\n          shadow,\n        },\n        dataId\n      );\n\n      renderStatus = true;\n\n      // If rendering engine has been destroyed while rendering\n      if (!viewport.getRenderingEngine()) {\n        console.warn('Rendering Engine has been destroyed');\n        return renderStatus;\n      }\n\n      const options = this.getLinkedTextBoxStyle(styleSpecifier, annotation);\n      if (!options.visibility) {\n        data.handles.textBox = {\n          hasMoved: false,\n          worldPosition: <Types.Point3>[0, 0, 0],\n          worldBoundingBox: {\n            topLeft: <Types.Point3>[0, 0, 0],\n            topRight: <Types.Point3>[0, 0, 0],\n            bottomLeft: <Types.Point3>[0, 0, 0],\n            bottomRight: <Types.Point3>[0, 0, 0],\n          },\n        };\n        continue;\n      }\n\n      const textLines = this.configuration.getTextLines(data, targetId);\n\n      // Need to update to sync with annotation while unlinked/not moved\n      if (!data.handles.textBox.hasMoved) {\n        const canvasTextBoxCoords = getTextBoxCoordsCanvas(canvasCoordinates);\n\n        data.handles.textBox.worldPosition =\n          viewport.canvasToWorld(canvasTextBoxCoords);\n      }\n\n      const textBoxPosition = viewport.worldToCanvas(\n        data.handles.textBox.worldPosition\n      );\n\n      const textBoxUID = '1';\n      const boundingBox = drawLinkedTextBoxSvg(\n        svgDrawingHelper,\n        annotationUID,\n        textBoxUID,\n        textLines,\n        textBoxPosition,\n        canvasCoordinates,\n        {},\n        options\n      );\n\n      const { x: left, y: top, width, height } = boundingBox;\n\n      data.handles.textBox.worldBoundingBox = {\n        topLeft: viewport.canvasToWorld([left, top]),\n        topRight: viewport.canvasToWorld([left + width, top]),\n        bottomLeft: viewport.canvasToWorld([left, top + height]),\n        bottomRight: viewport.canvasToWorld([left + width, top + height]),\n      };\n    }\n\n    return renderStatus;\n  };\n\n  _calculateLength(pos1, pos2) {\n    const dx = pos1[0] - pos2[0];\n    const dy = pos1[1] - pos2[1];\n    const dz = pos1[2] - pos2[2];\n\n    return Math.sqrt(dx * dx + dy * dy + dz * dz);\n  }\n\n  _calculateCachedStats(annotation, renderingEngine, enabledElement) {\n    const data = annotation.data;\n    const { viewportId, renderingEngineId } = enabledElement;\n\n    const worldPos1 = data.handles.points[0];\n    const worldPos2 = data.handles.points[1];\n    const { cachedStats } = data;\n    const targetIds = Object.keys(cachedStats);\n\n    // TODO clean up, this doesn't need a length per volume, it has no stats derived from volumes.\n\n    for (let i = 0; i < targetIds.length; i++) {\n      const targetId = targetIds[i];\n\n      const image = this.getTargetIdImage(targetId, renderingEngine);\n\n      // If image does not exists for the targetId, skip. This can be due\n      // to various reasons such as if the target was a volumeViewport, and\n      // the volumeViewport has been decached in the meantime.\n      if (!image) {\n        continue;\n      }\n\n      const { imageData, dimensions } = image;\n      const scale = getCalibratedScale(image);\n\n      const length = this._calculateLength(worldPos1, worldPos2) / scale;\n\n      const index1 = transformWorldToIndex(imageData, worldPos1);\n      const index2 = transformWorldToIndex(imageData, worldPos2);\n\n      this._isInsideVolume(index1, index2, dimensions)\n        ? (this.isHandleOutsideImage = false)\n        : (this.isHandleOutsideImage = true);\n\n      // TODO -> Do we instead want to clip to the bounds of the volume and only include that portion?\n      // Seems like a lot of work for an unrealistic case. At the moment bail out of stat calculation if either\n      // corner is off the canvas.\n\n      // todo: add insideVolume calculation, for removing tool if outside\n      cachedStats[targetId] = {\n        length,\n        unit: getCalibratedLengthUnits(null, image),\n      };\n    }\n\n    annotation.invalidated = false;\n\n    // Dispatching annotation modified\n    const eventType = Events.ANNOTATION_MODIFIED;\n\n    const eventDetail: AnnotationModifiedEventDetail = {\n      annotation,\n      viewportId,\n      renderingEngineId,\n    };\n    triggerEvent(eventTarget, eventType, eventDetail);\n\n    return cachedStats;\n  }\n\n  _isInsideVolume(index1, index2, dimensions) {\n    return (\n      csUtils.indexWithinDimensions(index1, dimensions) &&\n      csUtils.indexWithinDimensions(index2, dimensions)\n    );\n  }\n}\n\nfunction defaultGetTextLines(data, targetId): string[] {\n  const cachedVolumeStats = data.cachedStats[targetId];\n  const { length, unit } = cachedVolumeStats;\n\n  // Can be null on load\n  if (length === undefined || length === null || isNaN(length)) {\n    return;\n  }\n\n  const textLines = [`${roundNumber(length)} ${unit}`];\n\n  return textLines;\n}\n\nLengthTool.toolName = 'Length';\nexport default LengthTool;\n","import { metaData } from '@cornerstonejs/core';\n\ntype ModalityUnitOptions = {\n  isPreScaled: boolean;\n  isSuvScaled: boolean;\n};\n\nfunction getModalityUnit(\n  modality: string,\n  imageId: string,\n  options: ModalityUnitOptions\n): string {\n  if (modality === 'CT') {\n    return 'HU';\n  } else if (modality === 'PT') {\n    return _handlePTModality(imageId, options);\n  } else {\n    return '';\n  }\n}\n\nfunction _handlePTModality(imageId: string, options: ModalityUnitOptions) {\n  if (!options.isPreScaled) {\n    return 'raw';\n  }\n\n  if (options.isSuvScaled) {\n    return 'SUV';\n  }\n\n  const generalSeriesModule = metaData.get('generalSeriesModule', imageId);\n\n  // it might be possible that the referenceImageId is not the one\n  // that is being displayed. So we need to get the modality from imageId again\n  if (generalSeriesModule?.modality === 'PT') {\n    const petSeriesModule = metaData.get('petSeriesModule', imageId);\n    return petSeriesModule?.units || 'unitless';\n  }\n}\n\nexport { getModalityUnit, ModalityUnitOptions };\n","import {\n  cache,\n  StackViewport,\n  Types,\n  BaseVolumeViewport,\n} from '@cornerstonejs/core';\n\nfunction isViewportPreScaled(\n  viewport: Types.IStackViewport | Types.IVolumeViewport,\n  targetId: string\n): boolean {\n  if (viewport instanceof BaseVolumeViewport) {\n    const targetIdTokens = targetId.split('volumeId:');\n    const volumeId =\n      targetIdTokens.length > 1 ? targetIdTokens[1] : targetIdTokens[0];\n    const volume = cache.getVolume(volumeId);\n    return !!volume?.scaling && Object.keys(volume.scaling).length > 0;\n  } else if (viewport instanceof StackViewport) {\n    const { preScale } = viewport.getImageData() || {};\n    return !!preScale?.scaled;\n  } else {\n    throw new Error('Viewport is not a valid type');\n  }\n}\n\nexport { isViewportPreScaled };\n","/* eslint-disable @typescript-eslint/no-empty-function */\nimport { vec2 } from 'gl-matrix';\n\nimport {\n  getEnabledElement,\n  VolumeViewport,\n  triggerEvent,\n  eventTarget,\n  utilities as csUtils,\n  utilities,\n} from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\nimport { AnnotationTool } from '../base';\nimport {\n  addAnnotation,\n  getAnnotations,\n  removeAnnotation,\n} from '../../stateManagement/annotation/annotationState';\nimport {\n  drawHandles as drawHandlesSvg,\n  drawTextBox as drawTextBoxSvg,\n} from '../../drawingSvg';\nimport { state } from '../../store';\nimport { Events } from '../../enums';\nimport { getViewportIdsWithToolToRender } from '../../utilities/viewportFilters';\nimport {\n  resetElementCursor,\n  hideElementCursor,\n} from '../../cursors/elementCursor';\nimport {\n  AnnotationCompletedEventDetail,\n  AnnotationModifiedEventDetail,\n} from '../../types/EventTypes';\n\nimport triggerAnnotationRenderForViewportIds from '../../utilities/triggerAnnotationRenderForViewportIds';\n\nimport {\n  EventTypes,\n  ToolHandle,\n  PublicToolProps,\n  ToolProps,\n  SVGDrawingHelper,\n} from '../../types';\nimport { ProbeAnnotation } from '../../types/ToolSpecificAnnotationTypes';\nimport { StyleSpecifier } from '../../types/AnnotationStyle';\nimport {\n  ModalityUnitOptions,\n  getModalityUnit,\n} from '../../utilities/getModalityUnit';\nimport { isViewportPreScaled } from '../../utilities/viewport/isViewportPreScaled';\n\nconst { transformWorldToIndex } = csUtils;\n\n/**\n * ProbeTool let you get the underlying voxel value by putting a probe in that\n * location. It will give index of the location and value of the voxel.\n * You can use ProbeTool in all perpendicular views (axial, sagittal, coronal).\n * Note: annotation tools in cornerstone3DTools exists in the exact location\n * in the physical 3d space, as a result, by default, all annotations that are\n * drawing in the same frameOfReference will get shared between viewports that\n * are in the same frameOfReference. Probe tool's text box are dynamically\n * generated based on the viewport's underlying Modality. For instance, if\n * the viewport is displaying CT, the text box will shown the statistics in Hounsfield units,\n * and if the viewport is displaying PET, the text box will show the statistics in\n * SUV units.\n *\n * The resulting annotation's data (statistics) and metadata (the\n * state of the viewport while drawing was happening) will get added to the\n * ToolState manager and can be accessed from the ToolState by calling getAnnotations\n * or similar methods.\n *\n * To use the ProbeTool, you first need to add it to cornerstoneTools, then create\n * a toolGroup and add the ProbeTool to it. Finally, setToolActive on the toolGroup\n *\n * ```js\n * cornerstoneTools.addTool(ProbeTool)\n *\n * const toolGroup = ToolGroupManager.createToolGroup('toolGroupId')\n *\n * toolGroup.addTool(ProbeTool.toolName)\n *\n * toolGroup.addViewport('viewportId', 'renderingEngineId')\n *\n * toolGroup.setToolActive(ProbeTool.toolName, {\n *   bindings: [\n *    {\n *       mouseButton: MouseBindings.Primary, // Left Click\n *     },\n *   ],\n * })\n * ```\n *\n * Read more in the Docs section of the website.\n *\n */\n\nclass ProbeTool extends AnnotationTool {\n  static toolName;\n\n  touchDragCallback: any;\n  mouseDragCallback: any;\n  editData: {\n    annotation: any;\n    viewportIdsToRender: string[];\n    newAnnotation?: boolean;\n  } | null;\n  eventDispatchDetail: {\n    viewportId: string;\n    renderingEngineId: string;\n  };\n  isDrawing: boolean;\n  isHandleOutsideImage: boolean;\n\n  constructor(\n    toolProps: PublicToolProps = {},\n    defaultToolProps: ToolProps = {\n      supportedInteractionTypes: ['Mouse', 'Touch'],\n      configuration: {\n        shadow: true,\n        preventHandleOutsideImage: false,\n        getTextLines: defaultGetTextLines,\n      },\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n  }\n\n  // Not necessary for this tool but needs to be defined since it's an abstract\n  // method from the parent class.\n  isPointNearTool(): boolean {\n    return false;\n  }\n\n  toolSelectedCallback() {}\n\n  /**\n   * Based on the current position of the mouse and the current imageId to create\n   * a Probe Annotation and stores it in the annotationManager\n   *\n   * @param evt -  EventTypes.NormalizedMouseEventType\n   * @returns The annotation object.\n   *\n   */\n  addNewAnnotation = (\n    evt: EventTypes.InteractionEventType\n  ): ProbeAnnotation => {\n    const eventDetail = evt.detail;\n    const { currentPoints, element } = eventDetail;\n    const worldPos = currentPoints.world;\n\n    const enabledElement = getEnabledElement(element);\n    const { viewport, renderingEngine } = enabledElement;\n\n    this.isDrawing = true;\n    const camera = viewport.getCamera();\n    const { viewPlaneNormal, viewUp } = camera;\n\n    const referencedImageId = this.getReferencedImageId(\n      viewport,\n      worldPos,\n      viewPlaneNormal,\n      viewUp\n    );\n\n    const FrameOfReferenceUID = viewport.getFrameOfReferenceUID();\n\n    const annotation = {\n      invalidated: true,\n      highlighted: true,\n      metadata: {\n        toolName: this.getToolName(),\n        viewPlaneNormal: <Types.Point3>[...viewPlaneNormal],\n        viewUp: <Types.Point3>[...viewUp],\n        FrameOfReferenceUID,\n        referencedImageId,\n      },\n      data: {\n        label: '',\n        handles: { points: [<Types.Point3>[...worldPos]] },\n        cachedStats: {},\n      },\n    };\n\n    addAnnotation(annotation, element);\n\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    this.editData = {\n      annotation,\n      newAnnotation: true,\n      viewportIdsToRender,\n    };\n    this._activateModify(element);\n\n    hideElementCursor(element);\n\n    evt.preventDefault();\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    return annotation;\n  };\n\n  /**\n   * It checks if the mouse click is near ProveTool, it overwrites the baseAnnotationTool\n   * getHandleNearImagePoint method.\n   *\n   * @param element - The element that the tool is attached to.\n   * @param annotation - The annotation object associated with the annotation\n   * @param canvasCoords - The coordinates of the mouse click on canvas\n   * @param proximity - The distance from the mouse cursor to the point\n   * that is considered \"near\".\n   * @returns The handle that is closest to the cursor, or null if the cursor\n   * is not near any of the handles.\n   */\n  getHandleNearImagePoint(\n    element: HTMLDivElement,\n    annotation: ProbeAnnotation,\n    canvasCoords: Types.Point2,\n    proximity: number\n  ): ToolHandle | undefined {\n    const enabledElement = getEnabledElement(element);\n    const { viewport } = enabledElement;\n\n    const { data } = annotation;\n    const point = data.handles.points[0];\n    const annotationCanvasCoordinate = viewport.worldToCanvas(point);\n\n    const near =\n      vec2.distance(canvasCoords, annotationCanvasCoordinate) < proximity;\n\n    if (near === true) {\n      return point;\n    }\n  }\n\n  handleSelectedCallback(\n    evt: EventTypes.InteractionEventType,\n    annotation: ProbeAnnotation\n  ): void {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    annotation.highlighted = true;\n\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    // Find viewports to render on drag.\n\n    this.editData = {\n      //handle, // This would be useful for other tools with more than one handle\n      annotation,\n      viewportIdsToRender,\n    };\n    this._activateModify(element);\n\n    hideElementCursor(element);\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    evt.preventDefault();\n  }\n\n  _endCallback = (evt: EventTypes.InteractionEventType): void => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    const { annotation, viewportIdsToRender, newAnnotation } = this.editData;\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    const { viewportId } = enabledElement;\n    this.eventDispatchDetail = {\n      viewportId,\n      renderingEngineId: renderingEngine.id,\n    };\n\n    this._deactivateModify(element);\n\n    resetElementCursor(element);\n\n    this.editData = null;\n    this.isDrawing = false;\n\n    if (\n      this.isHandleOutsideImage &&\n      this.configuration.preventHandleOutsideImage\n    ) {\n      removeAnnotation(annotation.annotationUID);\n    }\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    if (newAnnotation) {\n      const eventType = Events.ANNOTATION_COMPLETED;\n\n      const eventDetail: AnnotationCompletedEventDetail = {\n        annotation,\n      };\n\n      triggerEvent(eventTarget, eventType, eventDetail);\n    }\n  };\n\n  _dragCallback = (evt) => {\n    this.isDrawing = true;\n    const eventDetail = evt.detail;\n    const { currentPoints, element } = eventDetail;\n    const worldPos = currentPoints.world;\n\n    const { annotation, viewportIdsToRender } = this.editData;\n    const { data } = annotation;\n\n    data.handles.points[0] = [...worldPos];\n    annotation.invalidated = true;\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n  };\n\n  cancel = (element: HTMLDivElement) => {\n    // If it is mid-draw or mid-modify\n    if (this.isDrawing) {\n      this.isDrawing = false;\n      this._deactivateModify(element);\n      resetElementCursor(element);\n\n      const { annotation, viewportIdsToRender, newAnnotation } = this.editData;\n      const { data } = annotation;\n\n      annotation.highlighted = false;\n      data.handles.activeHandleIndex = null;\n\n      const enabledElement = getEnabledElement(element);\n      const { renderingEngine } = enabledElement;\n\n      triggerAnnotationRenderForViewportIds(\n        renderingEngine,\n        viewportIdsToRender\n      );\n\n      if (newAnnotation) {\n        const eventType = Events.ANNOTATION_COMPLETED;\n\n        const eventDetail: AnnotationCompletedEventDetail = {\n          annotation,\n        };\n\n        triggerEvent(eventTarget, eventType, eventDetail);\n      }\n\n      this.editData = null;\n      return annotation.annotationUID;\n    }\n  };\n\n  _activateModify = (element) => {\n    state.isInteractingWithTool = true;\n\n    element.addEventListener(Events.MOUSE_UP, this._endCallback);\n    element.addEventListener(Events.MOUSE_DRAG, this._dragCallback);\n    element.addEventListener(Events.MOUSE_CLICK, this._endCallback);\n\n    element.addEventListener(Events.TOUCH_END, this._endCallback);\n    element.addEventListener(Events.TOUCH_DRAG, this._dragCallback);\n    element.addEventListener(Events.TOUCH_TAP, this._endCallback);\n  };\n\n  _deactivateModify = (element) => {\n    state.isInteractingWithTool = false;\n\n    element.removeEventListener(Events.MOUSE_UP, this._endCallback);\n    element.removeEventListener(Events.MOUSE_DRAG, this._dragCallback);\n    element.removeEventListener(Events.MOUSE_CLICK, this._endCallback);\n\n    element.removeEventListener(Events.TOUCH_END, this._endCallback);\n    element.removeEventListener(Events.TOUCH_DRAG, this._dragCallback);\n    element.removeEventListener(Events.TOUCH_TAP, this._endCallback);\n  };\n\n  /**\n   * it is used to draw the probe annotation in each\n   * request animation frame. It calculates the updated cached statistics if\n   * data is invalidated and cache it.\n   *\n   * @param enabledElement - The Cornerstone's enabledElement.\n   * @param svgDrawingHelper - The svgDrawingHelper providing the context for drawing.\n   */\n  renderAnnotation = (\n    enabledElement: Types.IEnabledElement,\n    svgDrawingHelper: SVGDrawingHelper\n  ): boolean => {\n    let renderStatus = false;\n    const { viewport } = enabledElement;\n    const { element } = viewport;\n\n    let annotations = getAnnotations(this.getToolName(), element);\n\n    if (!annotations?.length) {\n      return renderStatus;\n    }\n\n    annotations = this.filterInteractableAnnotationsForElement(\n      element,\n      annotations\n    );\n\n    if (!annotations?.length) {\n      return renderStatus;\n    }\n\n    const targetId = this.getTargetId(viewport);\n    const renderingEngine = viewport.getRenderingEngine();\n\n    const styleSpecifier: StyleSpecifier = {\n      toolGroupId: this.toolGroupId,\n      toolName: this.getToolName(),\n      viewportId: enabledElement.viewport.id,\n    };\n\n    for (let i = 0; i < annotations.length; i++) {\n      const annotation = annotations[i] as ProbeAnnotation;\n      const annotationUID = annotation.annotationUID;\n      const data = annotation.data;\n      const point = data.handles.points[0];\n      const canvasCoordinates = viewport.worldToCanvas(point);\n\n      styleSpecifier.annotationUID = annotationUID;\n\n      const color = this.getStyle('color', styleSpecifier, annotation);\n\n      if (\n        !data.cachedStats[targetId] ||\n        data.cachedStats[targetId].value == null\n      ) {\n        data.cachedStats[targetId] = {\n          Modality: null,\n          index: null,\n          value: null,\n        };\n\n        this._calculateCachedStats(annotation, renderingEngine, enabledElement);\n      } else if (annotation.invalidated) {\n        this._calculateCachedStats(annotation, renderingEngine, enabledElement);\n\n        // If the invalidated data is as a result of volumeViewport manipulation\n        // of the tools, we need to invalidate the related stackViewports data if\n        // they are not at the referencedImageId, so that\n        // when scrolling to the related slice in which the tool were manipulated\n        // we re-render the correct tool position. This is due to stackViewport\n        // which doesn't have the full volume at each time, and we are only working\n        // on one slice at a time.\n        if (viewport instanceof VolumeViewport) {\n          const { referencedImageId } = annotation.metadata;\n\n          // invalidate all the relevant stackViewports if they are not\n          // at the referencedImageId\n          for (const targetId in data.cachedStats) {\n            if (targetId.startsWith('imageId')) {\n              const viewports = renderingEngine.getStackViewports();\n\n              const invalidatedStack = viewports.find((vp) => {\n                // The stack viewport that contains the imageId but is not\n                // showing it currently\n                const referencedImageURI =\n                  csUtils.imageIdToURI(referencedImageId);\n                const hasImageURI = vp.hasImageURI(referencedImageURI);\n                const currentImageURI = csUtils.imageIdToURI(\n                  vp.getCurrentImageId()\n                );\n                return hasImageURI && currentImageURI !== referencedImageURI;\n              });\n\n              if (invalidatedStack) {\n                delete data.cachedStats[targetId];\n              }\n            }\n          }\n        }\n      }\n\n      // If rendering engine has been destroyed while rendering\n      if (!viewport.getRenderingEngine()) {\n        console.warn('Rendering Engine has been destroyed');\n        return renderStatus;\n      }\n\n      const handleGroupUID = '0';\n\n      drawHandlesSvg(\n        svgDrawingHelper,\n        annotationUID,\n        handleGroupUID,\n        [canvasCoordinates],\n        { color }\n      );\n\n      renderStatus = true;\n\n      const options = this.getLinkedTextBoxStyle(styleSpecifier, annotation);\n      if (!options.visibility) {\n        continue;\n      }\n\n      const textLines = this.configuration.getTextLines(data, targetId);\n      if (textLines) {\n        const textCanvasCoordinates = [\n          canvasCoordinates[0] + 6,\n          canvasCoordinates[1] - 6,\n        ];\n\n        const textUID = '0';\n        drawTextBoxSvg(\n          svgDrawingHelper,\n          annotationUID,\n          textUID,\n          textLines,\n          [textCanvasCoordinates[0], textCanvasCoordinates[1]],\n          options\n        );\n      }\n    }\n\n    return renderStatus;\n  };\n\n  _calculateCachedStats(annotation, renderingEngine, enabledElement) {\n    const data = annotation.data;\n    const { viewportId, renderingEngineId, viewport } = enabledElement;\n\n    const worldPos = data.handles.points[0];\n    const { cachedStats } = data;\n\n    const targetIds = Object.keys(cachedStats);\n\n    for (let i = 0; i < targetIds.length; i++) {\n      const targetId = targetIds[i];\n\n      const modalityUnitOptions = {\n        isPreScaled: isViewportPreScaled(viewport, targetId),\n        isSuvScaled: this.isSuvScaled(\n          viewport,\n          targetId,\n          annotation.metadata.referencedImageId\n        ),\n      };\n\n      const image = this.getTargetIdImage(targetId, renderingEngine);\n\n      // If image does not exists for the targetId, skip. This can be due\n      // to various reasons such as if the target was a volumeViewport, and\n      // the volumeViewport has been decached in the meantime.\n      if (!image) {\n        continue;\n      }\n\n      const { dimensions, imageData, metadata } = image;\n      const scalarData =\n        'getScalarData' in image ? image.getScalarData() : image.scalarData;\n\n      const modality = metadata.Modality;\n      const index = transformWorldToIndex(imageData, worldPos);\n\n      index[0] = Math.round(index[0]);\n      index[1] = Math.round(index[1]);\n      index[2] = Math.round(index[2]);\n\n      if (csUtils.indexWithinDimensions(index, dimensions)) {\n        this.isHandleOutsideImage = false;\n        const yMultiple = dimensions[0];\n        const zMultiple = dimensions[0] * dimensions[1];\n\n        const value =\n          scalarData[index[2] * zMultiple + index[1] * yMultiple + index[0]];\n\n        // Index[2] for stackViewport is always 0, but for visualization\n        // we reset it to be imageId index\n        if (targetId.startsWith('imageId:')) {\n          const imageId = targetId.split('imageId:')[1];\n          const imageURI = csUtils.imageIdToURI(imageId);\n          const viewports = utilities.getViewportsWithImageURI(\n            imageURI,\n            renderingEngineId\n          );\n\n          const viewport = viewports[0];\n\n          index[2] = viewport.getCurrentImageIdIndex();\n        }\n\n        const modalityUnit = getModalityUnit(\n          modality,\n          annotation.metadata.referencedImageId,\n          modalityUnitOptions\n        );\n\n        cachedStats[targetId] = {\n          index,\n          value,\n          Modality: modality,\n          modalityUnit,\n        };\n      } else {\n        this.isHandleOutsideImage = true;\n        cachedStats[targetId] = {\n          index,\n          Modality: modality,\n        };\n      }\n\n      annotation.invalidated = false;\n\n      // Dispatching annotation modified\n      const eventType = Events.ANNOTATION_MODIFIED;\n\n      const eventDetail: AnnotationModifiedEventDetail = {\n        annotation,\n        viewportId,\n        renderingEngineId,\n      };\n\n      triggerEvent(eventTarget, eventType, eventDetail);\n    }\n\n    return cachedStats;\n  }\n}\n\nfunction defaultGetTextLines(data, targetId): string[] {\n  const cachedVolumeStats = data.cachedStats[targetId];\n  const { index, value, modalityUnit } = cachedVolumeStats;\n\n  if (value === undefined) {\n    return;\n  }\n\n  const textLines = [];\n\n  textLines.push(`(${index[0]}, ${index[1]}, ${index[2]})`);\n\n  textLines.push(`${value.toFixed(2)} ${modalityUnit}`);\n\n  return textLines;\n}\n\nProbeTool.toolName = 'Probe';\nexport default ProbeTool;\n","/* eslint-disable @typescript-eslint/no-empty-function */\nimport { getEnabledElement } from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\nimport {\n  drawHandles as drawHandlesSvg,\n  drawTextBox as drawTextBoxSvg,\n} from '../../drawingSvg';\nimport { getViewportIdsWithToolToRender } from '../../utilities/viewportFilters';\nimport { hideElementCursor } from '../../cursors/elementCursor';\nimport {\n  EventTypes,\n  PublicToolProps,\n  SVGDrawingHelper,\n  ToolProps,\n} from '../../types';\nimport triggerAnnotationRenderForViewportIds from '../../utilities/triggerAnnotationRenderForViewportIds';\nimport ProbeTool from './ProbeTool';\nimport { ProbeAnnotation } from '../../types/ToolSpecificAnnotationTypes';\nimport { StyleSpecifier } from '../../types/AnnotationStyle';\nimport { isViewportPreScaled } from '../../utilities/viewport/isViewportPreScaled';\n\nclass DragProbeTool extends ProbeTool {\n  static toolName;\n\n  touchDragCallback: any;\n  mouseDragCallback: any;\n  editData: {\n    annotation: any;\n    viewportIdsToRender: string[];\n    newAnnotation?: boolean;\n  } | null;\n  eventDispatchDetail: {\n    viewportId: string;\n    renderingEngineId: string;\n  };\n  isDrawing: boolean;\n  isHandleOutsideImage: boolean;\n\n  constructor(\n    toolProps: PublicToolProps = {},\n    defaultToolProps: ToolProps = {\n      supportedInteractionTypes: ['Mouse', 'Touch'],\n      configuration: {\n        shadow: true,\n        preventHandleOutsideImage: false,\n        getTextLines: defaultGetTextLines,\n      },\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n  }\n\n  postMouseDownCallback = (\n    evt: EventTypes.InteractionEventType\n  ): ProbeAnnotation => {\n    const eventDetail = evt.detail;\n    const { currentPoints, element } = eventDetail;\n    const worldPos = currentPoints.world;\n\n    const enabledElement = getEnabledElement(element);\n    const { viewport, renderingEngine } = enabledElement;\n\n    this.isDrawing = true;\n    const camera = viewport.getCamera();\n    const { viewPlaneNormal, viewUp } = camera;\n\n    const referencedImageId = this.getReferencedImageId(\n      viewport,\n      worldPos,\n      viewPlaneNormal,\n      viewUp\n    );\n\n    const annotation: ProbeAnnotation = {\n      invalidated: true,\n      highlighted: true,\n      isVisible: true,\n      metadata: {\n        toolName: this.getToolName(),\n        viewPlaneNormal: <Types.Point3>[...viewPlaneNormal],\n        viewUp: <Types.Point3>[...viewUp],\n        FrameOfReferenceUID: viewport.getFrameOfReferenceUID(),\n        referencedImageId,\n      },\n      data: {\n        label: '',\n        handles: { points: [<Types.Point3>[...worldPos]] },\n        cachedStats: {},\n      },\n    };\n\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    this.editData = {\n      annotation,\n      newAnnotation: true,\n      viewportIdsToRender,\n    };\n    this._activateModify(element);\n\n    hideElementCursor(element);\n\n    evt.preventDefault();\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    return annotation;\n  };\n\n  postTouchStartCallback = (\n    evt: EventTypes.InteractionEventType\n  ): ProbeAnnotation => {\n    return this.postMouseDownCallback(evt);\n  };\n\n  renderAnnotation = (\n    enabledElement: Types.IEnabledElement,\n    svgDrawingHelper: SVGDrawingHelper\n  ): boolean => {\n    let renderStatus = false;\n    const { viewport } = enabledElement;\n\n    if (!this.editData) {\n      return renderStatus;\n    }\n\n    const annotations = this.filterInteractableAnnotationsForElement(\n      viewport.element,\n      [this.editData.annotation]\n    );\n\n    if (!annotations?.length) {\n      return renderStatus;\n    }\n\n    const targetId = this.getTargetId(viewport);\n    const renderingEngine = viewport.getRenderingEngine();\n\n    const styleSpecifier: StyleSpecifier = {\n      toolGroupId: this.toolGroupId,\n      toolName: this.getToolName(),\n      viewportId: enabledElement.viewport.id,\n    };\n\n    const annotation = this.editData.annotation;\n    const annotationUID = annotation.annotationUID;\n    const data = annotation.data;\n    const point = data.handles.points[0];\n    const canvasCoordinates = viewport.worldToCanvas(point);\n\n    styleSpecifier.annotationUID = annotationUID;\n\n    const color = this.getStyle('color', styleSpecifier, annotation);\n\n    const modalityUnitOptions = {\n      isPreScaled: isViewportPreScaled(viewport, targetId),\n\n      isSuvScaled: this.isSuvScaled(\n        viewport,\n        targetId,\n        annotation.metadata.referencedImageId\n      ),\n    };\n\n    if (\n      !data.cachedStats[targetId] ||\n      data.cachedStats[targetId].value == null\n    ) {\n      data.cachedStats[targetId] = {\n        Modality: null,\n        index: null,\n        value: null,\n      };\n\n      this._calculateCachedStats(annotation, renderingEngine, enabledElement);\n    } else if (annotation.invalidated) {\n      this._calculateCachedStats(annotation, renderingEngine, enabledElement);\n    }\n\n    // If rendering engine has been destroyed while rendering\n    if (!viewport.getRenderingEngine()) {\n      console.warn('Rendering Engine has been destroyed');\n      return renderStatus;\n    }\n\n    const handleGroupUID = '0';\n\n    drawHandlesSvg(\n      svgDrawingHelper,\n      annotationUID,\n      handleGroupUID,\n      [canvasCoordinates],\n      { color }\n    );\n\n    renderStatus = true;\n\n    const textLines = this.configuration.getTextLines(data, targetId);\n    if (textLines) {\n      const textCanvasCoordinates = [\n        canvasCoordinates[0] + 6,\n        canvasCoordinates[1] - 6,\n      ];\n\n      const textUID = '0';\n      drawTextBoxSvg(\n        svgDrawingHelper,\n        annotationUID,\n        textUID,\n        textLines,\n        [textCanvasCoordinates[0], textCanvasCoordinates[1]],\n        this.getLinkedTextBoxStyle(styleSpecifier, annotation)\n      );\n    }\n\n    return renderStatus;\n  };\n}\n\nfunction defaultGetTextLines(data, targetId): string[] {\n  const cachedVolumeStats = data.cachedStats[targetId];\n  const { index, value, modalityUnit } = cachedVolumeStats;\n\n  if (value === undefined) {\n    return;\n  }\n\n  const textLines = [];\n\n  textLines.push(`(${index[0]}, ${index[1]}, ${index[2]})`);\n\n  textLines.push(`${value.toFixed(2)} ${modalityUnit}`);\n\n  return textLines;\n}\n\nDragProbeTool.toolName = 'DragProbe';\nexport default DragProbeTool;\n","import type { Types } from '@cornerstonejs/core';\nimport * as lineSegment from '../line';\n\ntype rectLineSegments = {\n  top: Types.Point2[];\n  right: Types.Point2[];\n  bottom: Types.Point2[];\n  left: Types.Point2[];\n};\n\n/**\n * Given a rectangle left, top, width and height, return an object containing the\n * line segments that make up the rectangle's four sides\n * @param left - The x-coordinate of the left edge of the rectangle.\n * @param top - The y-coordinate of the top edge of the rectangle.\n * @param width - The width of the rectangle.\n * @param height - The height of the rectangle.\n * @returns An object with four keys, each of which contains an array of two\n * points.\n */\nfunction rectToLineSegments(\n  left: number,\n  top: number,\n  width: number,\n  height: number\n): rectLineSegments {\n  const topLineStart: Types.Point2 = [left, top];\n  const topLineEnd: Types.Point2 = [left + width, top];\n\n  const rightLineStart: Types.Point2 = [left + width, top];\n  const rightLineEnd: Types.Point2 = [left + width, top + height];\n\n  const bottomLineStart: Types.Point2 = [left + width, top + height];\n  const bottomLineEnd: Types.Point2 = [left, top + height];\n\n  const leftLineStart: Types.Point2 = [left, top + height];\n  const leftLineEnd: Types.Point2 = [left, top];\n\n  const lineSegments = {\n    top: [topLineStart, topLineEnd],\n    right: [rightLineStart, rightLineEnd],\n    bottom: [bottomLineStart, bottomLineEnd],\n    left: [leftLineStart, leftLineEnd],\n  };\n\n  return lineSegments;\n}\n\n/**\n * Calculates distance of the point to the rectangle. It calculates the minimum\n * distance between the point and each line segment of the rectangle.\n *\n * @param rect - coordinates of the rectangle [left, top, width, height]\n * @param point - [x,y] coordinates of a point\n * @returns\n */\nexport default function distanceToPoint(\n  rect: number[],\n  point: Types.Point2\n): number {\n  if (rect.length !== 4 || point.length !== 2) {\n    throw Error(\n      'rectangle:[left, top, width, height] or point: [x,y] not defined correctly'\n    );\n  }\n\n  const [left, top, width, height] = rect;\n\n  let minDistance = 655535;\n  const lineSegments = rectToLineSegments(left, top, width, height);\n\n  Object.keys(lineSegments).forEach((segment) => {\n    const [lineStart, lineEnd] = lineSegments[segment];\n    const distance = lineSegment.distanceToPoint(lineStart, lineEnd, point);\n\n    if (distance < minDistance) {\n      minDistance = distance;\n    }\n  });\n\n  return minDistance;\n}\n","import { Statistics } from '../../../types';\n\nabstract class Calculator {\n  static run: ({ value }) => void;\n  static getStatistics: () => Statistics[];\n}\n\nexport default Calculator;\n","import { Statistics } from '../../../types';\nimport Calculator from './Calculator';\n\nexport default class BasicStatsCalculator extends Calculator {\n  private static max = -Infinity;\n  private static currentMax = 0;\n  private static sum = 0;\n  private static sumSquares = 0;\n  private static squaredDiffSum = 0;\n  private static count = 0;\n\n  /**\n   * This callback is used when we verify if the point is in the annotion drawn so we can get every point\n   * in the shape to calculate the statistics\n   * @param value of the point in the shape of the annotation\n   */\n  static statsCallback = ({ value: newValue }): void => {\n    if (newValue > this.max) {\n      this.max = newValue;\n      this.currentMax = newValue;\n    }\n\n    this.count += 1;\n\n    this.sum += newValue;\n    this.sumSquares += newValue ** 2;\n    this.squaredDiffSum += Math.pow(newValue - this.sum / this.count, 2);\n  };\n\n  /**\n   * Basic function that calculates statictics for a given array of points.\n   * @param points\n   * @returns An object that contains :\n   * max : The maximum value of the array\n   * mean : mean of the array\n   * stdDev : standard deviation of the array\n   * stdDevWithSumSquare : standard deviation of the array using sum\n   */\n\n  static getStatistics = (): Statistics[] => {\n    const mean = this.sum / this.count;\n    const stdDev = Math.sqrt(this.squaredDiffSum / this.count);\n    const stdDevWithSumSquare = Math.sqrt(\n      this.sumSquares / this.count - mean ** 2\n    );\n\n    this.max = -Infinity;\n    this.sum = 0;\n    this.sumSquares = 0;\n    this.squaredDiffSum = 0;\n    this.count = 0;\n\n    return [\n      { name: 'max', value: this.currentMax, unit: null },\n      { name: 'mean', value: mean, unit: null },\n      { name: 'stdDev', value: stdDev, unit: null },\n      { name: 'stdDevWithSumSquare', value: stdDevWithSumSquare, unit: null },\n    ];\n  };\n}\n","import { AnnotationTool } from '../base';\n\nimport {\n  getEnabledElement,\n  VolumeViewport,\n  triggerEvent,\n  eventTarget,\n  utilities as csUtils,\n} from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\nimport {\n  getCalibratedAreaUnits,\n  getCalibratedScale,\n} from '../../utilities/getCalibratedUnits';\nimport roundNumber from '../../utilities/roundNumber';\nimport throttle from '../../utilities/throttle';\nimport {\n  addAnnotation,\n  getAnnotations,\n  removeAnnotation,\n} from '../../stateManagement';\nimport { isAnnotationLocked } from '../../stateManagement/annotation/annotationLocking';\nimport { isAnnotationVisible } from '../../stateManagement/annotation/annotationVisibility';\nimport {\n  drawHandles as drawHandlesSvg,\n  drawLinkedTextBox as drawLinkedTextBoxSvg,\n  drawRect as drawRectSvg,\n} from '../../drawingSvg';\nimport { state } from '../../store';\nimport { Events } from '../../enums';\nimport { getViewportIdsWithToolToRender } from '../../utilities/viewportFilters';\nimport * as rectangle from '../../utilities/math/rectangle';\nimport { getTextBoxCoordsCanvas } from '../../utilities/drawing';\nimport getWorldWidthAndHeightFromCorners from '../../utilities/planar/getWorldWidthAndHeightFromCorners';\nimport {\n  resetElementCursor,\n  hideElementCursor,\n} from '../../cursors/elementCursor';\nimport triggerAnnotationRenderForViewportIds from '../../utilities/triggerAnnotationRenderForViewportIds';\n\nimport {\n  EventTypes,\n  ToolHandle,\n  TextBoxHandle,\n  ToolProps,\n  PublicToolProps,\n  SVGDrawingHelper,\n} from '../../types';\nimport { RectangleROIAnnotation } from '../../types/ToolSpecificAnnotationTypes';\nimport {\n  AnnotationCompletedEventDetail,\n  AnnotationModifiedEventDetail,\n} from '../../types/EventTypes';\nimport { StyleSpecifier } from '../../types/AnnotationStyle';\nimport { getModalityUnit } from '../../utilities/getModalityUnit';\nimport { isViewportPreScaled } from '../../utilities/viewport/isViewportPreScaled';\nimport { pointInShapeCallback } from '../../utilities/';\nimport { BasicStatsCalculator } from '../../utilities/math/basic';\n\nconst { transformWorldToIndex } = csUtils;\n\n/**\n * RectangleROIAnnotation let you draw annotations that measures the statistics\n * such as area, max, mean and stdDev of a Rectangular region of interest.\n * You can use RectangleROIAnnotation in all perpendicular views (axial, sagittal, coronal).\n * Note: annotation tools in cornerstone3DTools exists in the exact location\n * in the physical 3d space, as a result, by default, all annotations that are\n * drawing in the same frameOfReference will get shared between viewports that\n * are in the same frameOfReference. RectangleROI tool's text box lines are dynamically\n * generated based on the viewport's underlying Modality. For instance, if\n * the viewport is displaying CT, the text box will shown the statistics in Hounsfield units,\n * and if the viewport is displaying PET, the text box will show the statistics in\n * SUV units.\n *\n * The resulting annotation's data (statistics) and metadata (the\n * state of the viewport while drawing was happening) will get added to the\n * ToolState manager and can be accessed from the ToolState by calling getAnnotations\n * or similar methods.\n *\n * ```js\n * cornerstoneTools.addTool(RectangleROITool)\n *\n * const toolGroup = ToolGroupManager.createToolGroup('toolGroupId')\n *\n * toolGroup.addTool(RectangleROITool.toolName)\n *\n * toolGroup.addViewport('viewportId', 'renderingEngineId')\n *\n * toolGroup.setToolActive(RectangleROITool.toolName, {\n *   bindings: [\n *    {\n *       mouseButton: MouseBindings.Primary, // Left Click\n *     },\n *   ],\n * })\n * ```\n *\n * Read more in the Docs section of the website.\n */\n\nclass RectangleROITool extends AnnotationTool {\n  static toolName;\n\n  _throttledCalculateCachedStats: any;\n  editData: {\n    annotation: any;\n    viewportIdsToRender: string[];\n    handleIndex?: number;\n    movingTextBox?: boolean;\n    newAnnotation?: boolean;\n    hasMoved?: boolean;\n  } | null;\n  isDrawing: boolean;\n  isHandleOutsideImage: boolean;\n\n  constructor(\n    toolProps: PublicToolProps = {},\n    defaultToolProps: ToolProps = {\n      supportedInteractionTypes: ['Mouse', 'Touch'],\n      configuration: {\n        shadow: true,\n        preventHandleOutsideImage: false,\n        getTextLines: defaultGetTextLines,\n        statsCalculator: BasicStatsCalculator,\n      },\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n\n    this._throttledCalculateCachedStats = throttle(\n      this._calculateCachedStats,\n      100,\n      { trailing: true }\n    );\n  }\n\n  /**\n   * Based on the current position of the mouse and the current imageId to create\n   * a RectangleROI Annotation and stores it in the annotationManager\n   *\n   * @param evt -  EventTypes.NormalizedMouseEventType\n   * @returns The annotation object.\n   *\n   */\n  addNewAnnotation = (\n    evt: EventTypes.InteractionEventType\n  ): RectangleROIAnnotation => {\n    const eventDetail = evt.detail;\n    const { currentPoints, element } = eventDetail;\n    const worldPos = currentPoints.world;\n\n    const enabledElement = getEnabledElement(element);\n    const { viewport, renderingEngine } = enabledElement;\n\n    this.isDrawing = true;\n\n    const camera = viewport.getCamera();\n    const { viewPlaneNormal, viewUp } = camera;\n\n    const referencedImageId = this.getReferencedImageId(\n      viewport,\n      worldPos,\n      viewPlaneNormal,\n      viewUp\n    );\n\n    const FrameOfReferenceUID = viewport.getFrameOfReferenceUID();\n\n    const annotation = {\n      invalidated: true,\n      highlighted: true,\n      metadata: {\n        toolName: this.getToolName(),\n        viewPlaneNormal: <Types.Point3>[...viewPlaneNormal],\n        viewUp: <Types.Point3>[...viewUp],\n        FrameOfReferenceUID,\n        referencedImageId,\n      },\n      data: {\n        label: '',\n        handles: {\n          points: [\n            <Types.Point3>[...worldPos],\n            <Types.Point3>[...worldPos],\n            <Types.Point3>[...worldPos],\n            <Types.Point3>[...worldPos],\n          ],\n          textBox: {\n            hasMoved: false,\n            worldPosition: <Types.Point3>[0, 0, 0],\n            worldBoundingBox: {\n              topLeft: <Types.Point3>[0, 0, 0],\n              topRight: <Types.Point3>[0, 0, 0],\n              bottomLeft: <Types.Point3>[0, 0, 0],\n              bottomRight: <Types.Point3>[0, 0, 0],\n            },\n          },\n          activeHandleIndex: null,\n        },\n        cachedStats: {},\n      },\n    };\n\n    addAnnotation(annotation, element);\n\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    this.editData = {\n      annotation,\n      viewportIdsToRender,\n      handleIndex: 3,\n      movingTextBox: false,\n      newAnnotation: true,\n      hasMoved: false,\n    };\n    this._activateDraw(element);\n\n    hideElementCursor(element);\n\n    evt.preventDefault();\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    return annotation;\n  };\n\n  /**\n   * It returns if the canvas point is near the provided annotation in the provided\n   * element or not. A proximity is passed to the function to determine the\n   * proximity of the point to the annotation in number of pixels.\n   *\n   * @param element - HTML Element\n   * @param annotation - Annotation\n   * @param canvasCoords - Canvas coordinates\n   * @param proximity - Proximity to tool to consider\n   * @returns Boolean, whether the canvas point is near tool\n   */\n  isPointNearTool = (\n    element: HTMLDivElement,\n    annotation: RectangleROIAnnotation,\n    canvasCoords: Types.Point2,\n    proximity: number\n  ): boolean => {\n    const enabledElement = getEnabledElement(element);\n    const { viewport } = enabledElement;\n\n    const { data } = annotation;\n    const { points } = data.handles;\n\n    const canvasPoint1 = viewport.worldToCanvas(points[0]);\n    const canvasPoint2 = viewport.worldToCanvas(points[3]);\n\n    const rect = this._getRectangleImageCoordinates([\n      canvasPoint1,\n      canvasPoint2,\n    ]);\n\n    const point = [canvasCoords[0], canvasCoords[1]];\n    const { left, top, width, height } = rect;\n\n    const distanceToPoint = rectangle.distanceToPoint(\n      [left, top, width, height],\n      point as Types.Point2\n    );\n\n    if (distanceToPoint <= proximity) {\n      return true;\n    }\n\n    return false;\n  };\n\n  toolSelectedCallback = (\n    evt: EventTypes.InteractionEventType,\n    annotation: RectangleROIAnnotation\n  ): void => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    annotation.highlighted = true;\n\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    this.editData = {\n      annotation,\n      viewportIdsToRender,\n      movingTextBox: false,\n    };\n\n    this._activateModify(element);\n\n    hideElementCursor(element);\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    evt.preventDefault();\n  };\n\n  handleSelectedCallback = (\n    evt: EventTypes.InteractionEventType,\n    annotation: RectangleROIAnnotation,\n    handle: ToolHandle\n  ): void => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n    const { data } = annotation;\n\n    annotation.highlighted = true;\n\n    let movingTextBox = false;\n    let handleIndex;\n\n    if ((handle as TextBoxHandle).worldPosition) {\n      movingTextBox = true;\n    } else {\n      handleIndex = data.handles.points.findIndex((p) => p === handle);\n    }\n\n    // Find viewports to render on drag.\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    this.editData = {\n      annotation,\n      viewportIdsToRender,\n      handleIndex,\n      movingTextBox,\n    };\n    this._activateModify(element);\n\n    hideElementCursor(element);\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    evt.preventDefault();\n  };\n\n  _endCallback = (evt: EventTypes.InteractionEventType): void => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    const { annotation, viewportIdsToRender, newAnnotation, hasMoved } =\n      this.editData;\n    const { data } = annotation;\n\n    if (newAnnotation && !hasMoved) {\n      return;\n    }\n\n    data.handles.activeHandleIndex = null;\n\n    this._deactivateModify(element);\n    this._deactivateDraw(element);\n\n    resetElementCursor(element);\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    this.editData = null;\n    this.isDrawing = false;\n\n    if (\n      this.isHandleOutsideImage &&\n      this.configuration.preventHandleOutsideImage\n    ) {\n      removeAnnotation(annotation.annotationUID);\n    }\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    if (newAnnotation) {\n      const eventType = Events.ANNOTATION_COMPLETED;\n\n      const eventDetail: AnnotationCompletedEventDetail = {\n        annotation,\n      };\n\n      triggerEvent(eventTarget, eventType, eventDetail);\n    }\n  };\n\n  _dragCallback = (evt: EventTypes.InteractionEventType): void => {\n    this.isDrawing = true;\n\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    const { annotation, viewportIdsToRender, handleIndex, movingTextBox } =\n      this.editData;\n    const { data } = annotation;\n\n    if (movingTextBox) {\n      // Drag mode - Move the text boxes world position\n      const { deltaPoints } = eventDetail as EventTypes.MouseDragEventDetail;\n      const worldPosDelta = deltaPoints.world;\n\n      const { textBox } = data.handles;\n      const { worldPosition } = textBox;\n\n      worldPosition[0] += worldPosDelta[0];\n      worldPosition[1] += worldPosDelta[1];\n      worldPosition[2] += worldPosDelta[2];\n\n      textBox.hasMoved = true;\n    } else if (handleIndex === undefined) {\n      // Drag mode - Moving tool, so move all points by the world points delta\n      const { deltaPoints } = eventDetail as EventTypes.MouseDragEventDetail;\n      const worldPosDelta = deltaPoints.world;\n\n      const { points } = data.handles;\n\n      points.forEach((point) => {\n        point[0] += worldPosDelta[0];\n        point[1] += worldPosDelta[1];\n        point[2] += worldPosDelta[2];\n      });\n      annotation.invalidated = true;\n    } else {\n      // Moving handle.\n      const { currentPoints } = eventDetail;\n      const enabledElement = getEnabledElement(element);\n      const { worldToCanvas, canvasToWorld } = enabledElement.viewport;\n      const worldPos = currentPoints.world;\n\n      const { points } = data.handles;\n\n      // Move this handle.\n      points[handleIndex] = [...worldPos];\n\n      let bottomLeftCanvas;\n      let bottomRightCanvas;\n      let topLeftCanvas;\n      let topRightCanvas;\n\n      let bottomLeftWorld;\n      let bottomRightWorld;\n      let topLeftWorld;\n      let topRightWorld;\n\n      switch (handleIndex) {\n        case 0:\n        case 3:\n          // Moving bottomLeft or topRight\n\n          bottomLeftCanvas = worldToCanvas(points[0]);\n          topRightCanvas = worldToCanvas(points[3]);\n\n          bottomRightCanvas = [topRightCanvas[0], bottomLeftCanvas[1]];\n          topLeftCanvas = [bottomLeftCanvas[0], topRightCanvas[1]];\n\n          bottomRightWorld = canvasToWorld(bottomRightCanvas);\n          topLeftWorld = canvasToWorld(topLeftCanvas);\n\n          points[1] = bottomRightWorld;\n          points[2] = topLeftWorld;\n\n          break;\n        case 1:\n        case 2:\n          // Moving bottomRight or topLeft\n          bottomRightCanvas = worldToCanvas(points[1]);\n          topLeftCanvas = worldToCanvas(points[2]);\n\n          bottomLeftCanvas = <Types.Point2>[\n            topLeftCanvas[0],\n            bottomRightCanvas[1],\n          ];\n          topRightCanvas = <Types.Point2>[\n            bottomRightCanvas[0],\n            topLeftCanvas[1],\n          ];\n\n          bottomLeftWorld = canvasToWorld(bottomLeftCanvas);\n          topRightWorld = canvasToWorld(topRightCanvas);\n\n          points[0] = bottomLeftWorld;\n          points[3] = topRightWorld;\n\n          break;\n      }\n      annotation.invalidated = true;\n    }\n\n    this.editData.hasMoved = true;\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n  };\n\n  cancel = (element: HTMLDivElement) => {\n    // If it is mid-draw or mid-modify\n    if (this.isDrawing) {\n      this.isDrawing = false;\n      this._deactivateDraw(element);\n      this._deactivateModify(element);\n      resetElementCursor(element);\n\n      const { annotation, viewportIdsToRender, newAnnotation } = this.editData;\n\n      const { data } = annotation;\n\n      annotation.highlighted = false;\n      data.handles.activeHandleIndex = null;\n\n      const enabledElement = getEnabledElement(element);\n      const { renderingEngine } = enabledElement;\n\n      triggerAnnotationRenderForViewportIds(\n        renderingEngine,\n        viewportIdsToRender\n      );\n\n      if (newAnnotation) {\n        const eventType = Events.ANNOTATION_COMPLETED;\n\n        const eventDetail: AnnotationCompletedEventDetail = {\n          annotation,\n        };\n\n        triggerEvent(eventTarget, eventType, eventDetail);\n      }\n\n      this.editData = null;\n      return annotation.annotationUID;\n    }\n  };\n  /**\n   * Add event handlers for the modify event loop, and prevent default event prapogation.\n   */\n  _activateDraw = (element) => {\n    state.isInteractingWithTool = true;\n\n    element.addEventListener(Events.MOUSE_UP, this._endCallback);\n    element.addEventListener(Events.MOUSE_DRAG, this._dragCallback);\n    element.addEventListener(Events.MOUSE_MOVE, this._dragCallback);\n    element.addEventListener(Events.MOUSE_CLICK, this._endCallback);\n\n    element.addEventListener(Events.TOUCH_END, this._endCallback);\n    element.addEventListener(Events.TOUCH_DRAG, this._dragCallback);\n    element.addEventListener(Events.TOUCH_TAP, this._endCallback);\n  };\n\n  /**\n   * Add event handlers for the modify event loop, and prevent default event prapogation.\n   */\n  _deactivateDraw = (element) => {\n    state.isInteractingWithTool = false;\n\n    element.removeEventListener(Events.MOUSE_UP, this._endCallback);\n    element.removeEventListener(Events.MOUSE_DRAG, this._dragCallback);\n    element.removeEventListener(Events.MOUSE_MOVE, this._dragCallback);\n    element.removeEventListener(Events.MOUSE_CLICK, this._endCallback);\n\n    element.removeEventListener(Events.TOUCH_END, this._endCallback);\n    element.removeEventListener(Events.TOUCH_DRAG, this._dragCallback);\n    element.removeEventListener(Events.TOUCH_TAP, this._endCallback);\n  };\n\n  /**\n   * Add event handlers for the modify event loop, and prevent default event prapogation.\n   */\n  _activateModify = (element) => {\n    state.isInteractingWithTool = true;\n\n    element.addEventListener(Events.MOUSE_UP, this._endCallback);\n    element.addEventListener(Events.MOUSE_DRAG, this._dragCallback);\n    element.addEventListener(Events.MOUSE_CLICK, this._endCallback);\n\n    element.addEventListener(Events.TOUCH_END, this._endCallback);\n    element.addEventListener(Events.TOUCH_DRAG, this._dragCallback);\n    element.addEventListener(Events.TOUCH_TAP, this._endCallback);\n  };\n\n  /**\n   * Remove event handlers for the modify event loop, and enable default event propagation.\n   */\n  _deactivateModify = (element) => {\n    state.isInteractingWithTool = false;\n\n    element.removeEventListener(Events.MOUSE_UP, this._endCallback);\n    element.removeEventListener(Events.MOUSE_DRAG, this._dragCallback);\n    element.removeEventListener(Events.MOUSE_CLICK, this._endCallback);\n\n    element.removeEventListener(Events.TOUCH_END, this._endCallback);\n    element.removeEventListener(Events.TOUCH_DRAG, this._dragCallback);\n    element.removeEventListener(Events.TOUCH_TAP, this._endCallback);\n  };\n\n  /**\n   * it is used to draw the rectangleROI annotation in each\n   * request animation frame. It calculates the updated cached statistics if\n   * data is invalidated and cache it.\n   *\n   * @param enabledElement - The Cornerstone's enabledElement.\n   * @param svgDrawingHelper - The svgDrawingHelper providing the context for drawing.\n   */\n  renderAnnotation = (\n    enabledElement: Types.IEnabledElement,\n    svgDrawingHelper: SVGDrawingHelper\n  ): boolean => {\n    let renderStatus = false;\n    const { viewport } = enabledElement;\n    const { element } = viewport;\n\n    let annotations = getAnnotations(this.getToolName(), element);\n\n    if (!annotations?.length) {\n      return renderStatus;\n    }\n\n    annotations = this.filterInteractableAnnotationsForElement(\n      element,\n      annotations\n    );\n\n    if (!annotations?.length) {\n      return renderStatus;\n    }\n\n    const targetId = this.getTargetId(viewport);\n    const renderingEngine = viewport.getRenderingEngine();\n\n    const styleSpecifier: StyleSpecifier = {\n      toolGroupId: this.toolGroupId,\n      toolName: this.getToolName(),\n      viewportId: enabledElement.viewport.id,\n    };\n\n    for (let i = 0; i < annotations.length; i++) {\n      const annotation = annotations[i] as RectangleROIAnnotation;\n      const { annotationUID, data } = annotation;\n      const { points, activeHandleIndex } = data.handles;\n      const canvasCoordinates = points.map((p) => viewport.worldToCanvas(p));\n\n      styleSpecifier.annotationUID = annotationUID;\n\n      const lineWidth = this.getStyle('lineWidth', styleSpecifier, annotation);\n      const lineDash = this.getStyle('lineDash', styleSpecifier, annotation);\n      const color = this.getStyle('color', styleSpecifier, annotation);\n\n      const { viewPlaneNormal, viewUp } = viewport.getCamera();\n\n      // If cachedStats does not exist, or the unit is missing (as part of import/hydration etc.),\n      // force to recalculate the stats from the points\n      if (\n        !data.cachedStats[targetId] ||\n        data.cachedStats[targetId].areaUnit == null\n      ) {\n        data.cachedStats[targetId] = {\n          Modality: null,\n          area: null,\n          max: null,\n          mean: null,\n          stdDev: null,\n          areaUnit: null,\n        };\n\n        this._calculateCachedStats(\n          annotation,\n          viewPlaneNormal,\n          viewUp,\n          renderingEngine,\n          enabledElement\n        );\n      } else if (annotation.invalidated) {\n        this._throttledCalculateCachedStats(\n          annotation,\n          viewPlaneNormal,\n          viewUp,\n          renderingEngine,\n          enabledElement\n        );\n\n        // If the invalidated data is as a result of volumeViewport manipulation\n        // of the tools, we need to invalidate the related stackViewports data if\n        // they are not at the referencedImageId, so that\n        // when scrolling to the related slice in which the tool were manipulated\n        // we re-render the correct tool position. This is due to stackViewport\n        // which doesn't have the full volume at each time, and we are only working\n        // on one slice at a time.\n        if (viewport instanceof VolumeViewport) {\n          const { referencedImageId } = annotation.metadata;\n\n          // invalidate all the relevant stackViewports if they are not\n          // at the referencedImageId\n          for (const targetId in data.cachedStats) {\n            if (targetId.startsWith('imageId')) {\n              const viewports = renderingEngine.getStackViewports();\n\n              const invalidatedStack = viewports.find((vp) => {\n                // The stack viewport that contains the imageId but is not\n                // showing it currently\n                const referencedImageURI =\n                  csUtils.imageIdToURI(referencedImageId);\n                const hasImageURI = vp.hasImageURI(referencedImageURI);\n                const currentImageURI = csUtils.imageIdToURI(\n                  vp.getCurrentImageId()\n                );\n                return hasImageURI && currentImageURI !== referencedImageURI;\n              });\n\n              if (invalidatedStack) {\n                delete data.cachedStats[targetId];\n              }\n            }\n          }\n        }\n      }\n\n      // If rendering engine has been destroyed while rendering\n      if (!viewport.getRenderingEngine()) {\n        console.warn('Rendering Engine has been destroyed');\n        return renderStatus;\n      }\n\n      let activeHandleCanvasCoords;\n\n      if (!isAnnotationVisible(annotationUID)) {\n        continue;\n      }\n\n      if (\n        !isAnnotationLocked(annotation) &&\n        !this.editData &&\n        activeHandleIndex !== null\n      ) {\n        // Not locked or creating and hovering over handle, so render handle.\n        activeHandleCanvasCoords = [canvasCoordinates[activeHandleIndex]];\n      }\n\n      if (activeHandleCanvasCoords) {\n        const handleGroupUID = '0';\n\n        drawHandlesSvg(\n          svgDrawingHelper,\n          annotationUID,\n          handleGroupUID,\n          activeHandleCanvasCoords,\n          {\n            color,\n          }\n        );\n      }\n\n      const dataId = `${annotationUID}-rect`;\n      const rectangleUID = '0';\n      drawRectSvg(\n        svgDrawingHelper,\n        annotationUID,\n        rectangleUID,\n        canvasCoordinates[0],\n        canvasCoordinates[3],\n        {\n          color,\n          lineDash,\n          lineWidth,\n        },\n        dataId\n      );\n\n      renderStatus = true;\n\n      const options = this.getLinkedTextBoxStyle(styleSpecifier, annotation);\n      if (!options.visibility) {\n        data.handles.textBox = {\n          hasMoved: false,\n          worldPosition: <Types.Point3>[0, 0, 0],\n          worldBoundingBox: {\n            topLeft: <Types.Point3>[0, 0, 0],\n            topRight: <Types.Point3>[0, 0, 0],\n            bottomLeft: <Types.Point3>[0, 0, 0],\n            bottomRight: <Types.Point3>[0, 0, 0],\n          },\n        };\n        continue;\n      }\n\n      const textLines = this.configuration.getTextLines(data, targetId);\n      if (!textLines || textLines.length === 0) {\n        continue;\n      }\n\n      if (!data.handles.textBox.hasMoved) {\n        const canvasTextBoxCoords = getTextBoxCoordsCanvas(canvasCoordinates);\n\n        data.handles.textBox.worldPosition =\n          viewport.canvasToWorld(canvasTextBoxCoords);\n      }\n\n      const textBoxPosition = viewport.worldToCanvas(\n        data.handles.textBox.worldPosition\n      );\n\n      const textBoxUID = '1';\n      const boundingBox = drawLinkedTextBoxSvg(\n        svgDrawingHelper,\n        annotationUID,\n        textBoxUID,\n        textLines,\n        textBoxPosition,\n        canvasCoordinates,\n        {},\n        options\n      );\n\n      const { x: left, y: top, width, height } = boundingBox;\n\n      data.handles.textBox.worldBoundingBox = {\n        topLeft: viewport.canvasToWorld([left, top]),\n        topRight: viewport.canvasToWorld([left + width, top]),\n        bottomLeft: viewport.canvasToWorld([left, top + height]),\n        bottomRight: viewport.canvasToWorld([left + width, top + height]),\n      };\n    }\n\n    return renderStatus;\n  };\n\n  _getRectangleImageCoordinates = (\n    points: Array<Types.Point2>\n  ): {\n    left: number;\n    top: number;\n    width: number;\n    height: number;\n  } => {\n    const [point0, point1] = points;\n\n    return {\n      left: Math.min(point0[0], point1[0]),\n      top: Math.min(point0[1], point1[1]),\n      width: Math.abs(point0[0] - point1[0]),\n      height: Math.abs(point0[1] - point1[1]),\n    };\n  };\n\n  /**\n   * _calculateCachedStats - For each volume in the frame of reference that a\n   * tool instance in particular viewport defines as its target volume, find the\n   * volume coordinates (i,j,k) being probed by the two corners. One of i,j or k\n   * will be constant across the two points. In the other two directions iterate\n   * over the voxels and calculate the first and second-order statistics.\n   *\n   * @param data - The annotation tool-specific data.\n   * @param viewPlaneNormal - The normal vector of the camera.\n   * @param viewUp - The viewUp vector of the camera.\n   */\n  _calculateCachedStats = (\n    annotation,\n    viewPlaneNormal,\n    viewUp,\n    renderingEngine,\n    enabledElement\n  ) => {\n    const { data } = annotation;\n    const { viewportId, renderingEngineId, viewport } = enabledElement;\n\n    const worldPos1 = data.handles.points[0];\n    const worldPos2 = data.handles.points[3];\n    const { cachedStats } = data;\n\n    const targetIds = Object.keys(cachedStats);\n\n    for (let i = 0; i < targetIds.length; i++) {\n      const targetId = targetIds[i];\n\n      const image = this.getTargetIdImage(targetId, renderingEngine);\n\n      // If image does not exists for the targetId, skip. This can be due\n      // to various reasons such as if the target was a volumeViewport, and\n      // the volumeViewport has been decached in the meantime.\n      if (!image) {\n        continue;\n      }\n\n      const { dimensions, imageData, metadata } = image;\n      const scalarData =\n        'getScalarData' in image ? image.getScalarData() : image.scalarData;\n\n      const worldPos1Index = transformWorldToIndex(imageData, worldPos1);\n\n      worldPos1Index[0] = Math.floor(worldPos1Index[0]);\n      worldPos1Index[1] = Math.floor(worldPos1Index[1]);\n      worldPos1Index[2] = Math.floor(worldPos1Index[2]);\n\n      const worldPos2Index = transformWorldToIndex(imageData, worldPos2);\n\n      worldPos2Index[0] = Math.floor(worldPos2Index[0]);\n      worldPos2Index[1] = Math.floor(worldPos2Index[1]);\n      worldPos2Index[2] = Math.floor(worldPos2Index[2]);\n\n      // Check if one of the indexes are inside the volume, this then gives us\n      // Some area to do stats over.\n\n      if (this._isInsideVolume(worldPos1Index, worldPos2Index, dimensions)) {\n        this.isHandleOutsideImage = false;\n\n        // Calculate index bounds to iterate over\n\n        const iMin = Math.min(worldPos1Index[0], worldPos2Index[0]);\n        const iMax = Math.max(worldPos1Index[0], worldPos2Index[0]);\n\n        const jMin = Math.min(worldPos1Index[1], worldPos2Index[1]);\n        const jMax = Math.max(worldPos1Index[1], worldPos2Index[1]);\n\n        const kMin = Math.min(worldPos1Index[2], worldPos2Index[2]);\n        const kMax = Math.max(worldPos1Index[2], worldPos2Index[2]);\n\n        const boundsIJK = [\n          [iMin, iMax],\n          [jMin, jMax],\n          [kMin, kMax],\n        ] as [Types.Point2, Types.Point2, Types.Point2];\n\n        const { worldWidth, worldHeight } = getWorldWidthAndHeightFromCorners(\n          viewPlaneNormal,\n          viewUp,\n          worldPos1,\n          worldPos2\n        );\n        const scale = getCalibratedScale(image);\n\n        const area = Math.abs(worldWidth * worldHeight) / (scale * scale);\n\n        const modalityUnitOptions = {\n          isPreScaled: isViewportPreScaled(viewport, targetId),\n\n          isSuvScaled: this.isSuvScaled(\n            viewport,\n            targetId,\n            annotation.metadata.referencedImageId\n          ),\n        };\n\n        const modalityUnit = getModalityUnit(\n          metadata.Modality,\n          annotation.metadata.referencedImageId,\n          modalityUnitOptions\n        );\n\n        const pointsInShape = pointInShapeCallback(\n          imageData,\n          () => true,\n          this.configuration.statsCalculator.statsCallback,\n          boundsIJK\n        );\n\n        const stats = this.configuration.statsCalculator.getStatistics();\n\n        cachedStats[targetId] = {\n          Modality: metadata.Modality,\n          area,\n          mean: stats[1]?.value,\n          stdDev: stats[2]?.value,\n          max: stats[0]?.value,\n          statsArray: stats,\n          pointsInShape: pointsInShape,\n          areaUnit: getCalibratedAreaUnits(null, image),\n          modalityUnit,\n        };\n      } else {\n        this.isHandleOutsideImage = true;\n        cachedStats[targetId] = {\n          Modality: metadata.Modality,\n        };\n      }\n    }\n\n    annotation.invalidated = false;\n\n    // Dispatching annotation modified\n    const eventType = Events.ANNOTATION_MODIFIED;\n\n    const eventDetail: AnnotationModifiedEventDetail = {\n      annotation,\n      viewportId,\n      renderingEngineId,\n    };\n    triggerEvent(eventTarget, eventType, eventDetail);\n\n    return cachedStats;\n  };\n\n  _isInsideVolume = (index1, index2, dimensions) => {\n    return (\n      csUtils.indexWithinDimensions(index1, dimensions) &&\n      csUtils.indexWithinDimensions(index2, dimensions)\n    );\n  };\n}\n\n/**\n * _getTextLines - Returns the Area, mean and std deviation of the area of the\n * target volume enclosed by the rectangle.\n *\n * @param data - The annotation tool-specific data.\n * @param targetId - The volumeId of the volume to display the stats for.\n */\nfunction defaultGetTextLines(data, targetId: string): string[] {\n  const cachedVolumeStats = data.cachedStats[targetId];\n  const { area, mean, max, stdDev, areaUnit, modalityUnit } = cachedVolumeStats;\n\n  if (mean === undefined) {\n    return;\n  }\n\n  const textLines: string[] = [];\n\n  textLines.push(`Area: ${roundNumber(area)} ${areaUnit}`);\n  textLines.push(`Mean: ${roundNumber(mean)} ${modalityUnit}`);\n  textLines.push(`Max: ${roundNumber(max)} ${modalityUnit}`);\n  textLines.push(`Std Dev: ${roundNumber(stdDev)} ${modalityUnit}`);\n\n  return textLines;\n}\n\nRectangleROITool.toolName = 'RectangleROI';\nexport default RectangleROITool;\n","import { vec3 } from 'gl-matrix';\nimport type { Types } from '@cornerstonejs/core';\n\n/**\n * Given two world positions and an orthogonal view to an `imageVolume` defined by\n * a `viewPlaneNormal` and a `viewUp`, get the width and height in world coordinates of the rectangle\n * defined by the two points. The implementation works both with orthogonal\n * non-orthogonal rectangles.\n *\n * @param viewPlaneNormal - The normal of the view.\n * @param viewUp - The up direction of the view.\n * @param imageVolume - The imageVolume to use to measure.\n * @param worldPos1 - The first world position.\n * @param worldPos2 - The second world position.\n *\n * @returns The `worldWidth` and `worldHeight`.\n */\nexport default function getWorldWidthAndHeightFromTwoPoints(\n  viewPlaneNormal: Types.Point3,\n  viewUp: Types.Point3,\n  worldPos1: Types.Point3,\n  worldPos2: Types.Point3\n): { worldWidth: number; worldHeight: number } {\n  const viewRight = vec3.create();\n\n  vec3.cross(viewRight, <vec3>viewUp, <vec3>viewPlaneNormal);\n\n  const pos1 = vec3.fromValues(...worldPos1);\n  const pos2 = vec3.fromValues(...worldPos2);\n\n  const diagonal = vec3.create();\n  vec3.subtract(diagonal, pos1, pos2);\n\n  const diagonalLength = vec3.length(diagonal);\n\n  // When the two points are very close to each other return width as 0\n  // to avoid NaN the cosTheta formula calculation\n  if (diagonalLength < 0.0001) {\n    return { worldWidth: 0, worldHeight: 0 };\n  }\n\n  const cosTheta =\n    vec3.dot(diagonal, viewRight) / (diagonalLength * vec3.length(viewRight));\n\n  const sinTheta = Math.sqrt(1 - cosTheta * cosTheta);\n\n  const worldWidth = sinTheta * diagonalLength;\n  const worldHeight = cosTheta * diagonalLength;\n\n  return { worldWidth, worldHeight };\n}\n","import { AnnotationTool } from '../base';\n\nimport {\n  getEnabledElement,\n  VolumeViewport,\n  eventTarget,\n  triggerEvent,\n  utilities as csUtils,\n} from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\nimport {\n  getCalibratedAreaUnits,\n  getCalibratedScale,\n} from '../../utilities/getCalibratedUnits';\nimport roundNumber from '../../utilities/roundNumber';\nimport throttle from '../../utilities/throttle';\nimport {\n  addAnnotation,\n  getAnnotations,\n  removeAnnotation,\n} from '../../stateManagement/annotation/annotationState';\nimport { isAnnotationLocked } from '../../stateManagement/annotation/annotationLocking';\nimport { isAnnotationVisible } from '../../stateManagement/annotation/annotationVisibility';\nimport {\n  drawCircle as drawCircleSvg,\n  drawEllipse as drawEllipseSvg,\n  drawHandles as drawHandlesSvg,\n  drawLinkedTextBox as drawLinkedTextBoxSvg,\n} from '../../drawingSvg';\nimport { state } from '../../store';\nimport { Events } from '../../enums';\nimport { getViewportIdsWithToolToRender } from '../../utilities/viewportFilters';\nimport { getTextBoxCoordsCanvas } from '../../utilities/drawing';\nimport getWorldWidthAndHeightFromTwoPoints from '../../utilities/planar/getWorldWidthAndHeightFromTwoPoints';\nimport {\n  pointInEllipse,\n  getCanvasEllipseCorners,\n} from '../../utilities/math/ellipse';\nimport {\n  resetElementCursor,\n  hideElementCursor,\n} from '../../cursors/elementCursor';\nimport {\n  EventTypes,\n  ToolHandle,\n  TextBoxHandle,\n  PublicToolProps,\n  ToolProps,\n  SVGDrawingHelper,\n} from '../../types';\nimport { EllipticalROIAnnotation } from '../../types/ToolSpecificAnnotationTypes';\n\nimport {\n  AnnotationCompletedEventDetail,\n  AnnotationModifiedEventDetail,\n} from '../../types/EventTypes';\nimport triggerAnnotationRenderForViewportIds from '../../utilities/triggerAnnotationRenderForViewportIds';\nimport { pointInShapeCallback } from '../../utilities/';\nimport { StyleSpecifier } from '../../types/AnnotationStyle';\nimport {\n  ModalityUnitOptions,\n  getModalityUnit,\n} from '../../utilities/getModalityUnit';\nimport { isViewportPreScaled } from '../../utilities/viewport/isViewportPreScaled';\nimport { BasicStatsCalculator } from '../../utilities/math/basic';\n\nconst { transformWorldToIndex } = csUtils;\n\n/**\n * EllipticalROITool let you draw annotations that measures the statistics\n * such as area, max, mean and stdDev of an elliptical region of interest.\n * You can use EllipticalROITool in all perpendicular views (axial, sagittal, coronal).\n * Note: annotation tools in cornerstone3DTools exists in the exact location\n * in the physical 3d space, as a result, by default, all annotations that are\n * drawing in the same frameOfReference will get shared between viewports that\n * are in the same frameOfReference. Elliptical tool's text box lines are dynamically\n * generated based on the viewport's underlying Modality. For instance, if\n * the viewport is displaying CT, the text box will shown the statistics in Hounsfield units,\n * and if the viewport is displaying PET, the text box will show the statistics in\n * SUV units.\n *\n * The resulting annotation's data (statistics) and metadata (the\n * state of the viewport while drawing was happening) will get added to the\n * ToolState manager and can be accessed from the ToolState by calling getAnnotations\n * or similar methods.\n *\n * Changing tool configuration (see below) you can make the tool to draw the center\n * point circle with a given radius.\n *\n * ```js\n * cornerstoneTools.addTool(EllipticalROITool)\n *\n * const toolGroup = ToolGroupManager.createToolGroup('toolGroupId')\n *\n * toolGroup.addTool(EllipticalROITool.toolName)\n *\n * toolGroup.addViewport('viewportId', 'renderingEngineId')\n *\n * toolGroup.setToolActive(EllipticalROITool.toolName, {\n *   bindings: [\n *    {\n *       mouseButton: MouseBindings.Primary, // Left Click\n *     },\n *   ],\n * })\n *\n * // draw a circle at the center point with 4px radius.\n * toolGroup.setToolConfiguration(EllipticalROITool.toolName, {\n *   centerPointRadius: 4,\n * });\n * ```\n *\n * Read more in the Docs section of the website.\n */\n\nclass EllipticalROITool extends AnnotationTool {\n  static toolName;\n\n  touchDragCallback: any;\n  mouseDragCallback: any;\n  _throttledCalculateCachedStats: any;\n  editData: {\n    annotation: any;\n    viewportIdsToRender: Array<string>;\n    handleIndex?: number;\n    movingTextBox?: boolean;\n    centerWorld?: Array<number>;\n    canvasWidth?: number;\n    canvasHeight?: number;\n    originalHandleCanvas?: Array<number>;\n    newAnnotation?: boolean;\n    hasMoved?: boolean;\n  } | null;\n  isDrawing: boolean;\n  isHandleOutsideImage = false;\n\n  constructor(\n    toolProps: PublicToolProps = {},\n    defaultToolProps: ToolProps = {\n      supportedInteractionTypes: ['Mouse', 'Touch'],\n      configuration: {\n        shadow: true,\n        preventHandleOutsideImage: false,\n        // Radius of the circle to draw  at the center point of the ellipse.\n        // Set this zero(0) in order not to draw the circle.\n        centerPointRadius: 0,\n        getTextLines: defaultGetTextLines,\n        statsCalculator: BasicStatsCalculator,\n      },\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n\n    this._throttledCalculateCachedStats = throttle(\n      this._calculateCachedStats,\n      100,\n      { trailing: true }\n    );\n  }\n\n  /**\n   * Based on the current position of the mouse and the current imageId to create\n   * a EllipticalROI Annotation and stores it in the annotationManager\n   *\n   * @param evt -  EventTypes.NormalizedMouseEventType\n   * @returns The annotation object.\n   *\n   */\n  addNewAnnotation = (\n    evt: EventTypes.InteractionEventType\n  ): EllipticalROIAnnotation => {\n    const eventDetail = evt.detail;\n    const { currentPoints, element } = eventDetail;\n    const worldPos = currentPoints.world;\n    const canvasPos = currentPoints.canvas;\n\n    const enabledElement = getEnabledElement(element);\n    const { viewport, renderingEngine } = enabledElement;\n\n    this.isDrawing = true;\n\n    const camera = viewport.getCamera();\n    const { viewPlaneNormal, viewUp } = camera;\n\n    const referencedImageId = this.getReferencedImageId(\n      viewport,\n      worldPos,\n      viewPlaneNormal,\n      viewUp\n    );\n\n    const FrameOfReferenceUID = viewport.getFrameOfReferenceUID();\n\n    const annotation = {\n      highlighted: true,\n      invalidated: true,\n      metadata: {\n        toolName: this.getToolName(),\n        viewPlaneNormal: <Types.Point3>[...viewPlaneNormal],\n        viewUp: <Types.Point3>[...viewUp],\n        FrameOfReferenceUID,\n        referencedImageId,\n      },\n      data: {\n        label: '',\n        handles: {\n          textBox: {\n            hasMoved: false,\n            worldPosition: <Types.Point3>[0, 0, 0],\n            worldBoundingBox: {\n              topLeft: <Types.Point3>[0, 0, 0],\n              topRight: <Types.Point3>[0, 0, 0],\n              bottomLeft: <Types.Point3>[0, 0, 0],\n              bottomRight: <Types.Point3>[0, 0, 0],\n            },\n          },\n          points: [\n            [...worldPos],\n            [...worldPos],\n            [...worldPos],\n            [...worldPos],\n          ] as [Types.Point3, Types.Point3, Types.Point3, Types.Point3],\n          activeHandleIndex: null,\n        },\n        cachedStats: {},\n        initialRotation: viewport.getRotation(),\n      },\n    };\n\n    addAnnotation(annotation, element);\n\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    this.editData = {\n      annotation,\n      viewportIdsToRender,\n      centerWorld: worldPos,\n      newAnnotation: true,\n      hasMoved: false,\n    };\n    this._activateDraw(element);\n\n    hideElementCursor(element);\n\n    evt.preventDefault();\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    return annotation;\n  };\n\n  /**\n   * It returns if the canvas point is near the provided annotation in the provided\n   * element or not. A proximity is passed to the function to determine the\n   * proximity of the point to the annotation in number of pixels.\n   *\n   * @param element - HTML Element\n   * @param annotation - Annotation\n   * @param canvasCoords - Canvas coordinates\n   * @param proximity - Proximity to tool to consider\n   * @returns Boolean, whether the canvas point is near tool\n   */\n  isPointNearTool = (\n    element: HTMLDivElement,\n    annotation: EllipticalROIAnnotation,\n    canvasCoords: Types.Point2,\n    proximity: number\n  ): boolean => {\n    const enabledElement = getEnabledElement(element);\n    const { viewport } = enabledElement;\n\n    const { data } = annotation;\n    const { points } = data.handles;\n\n    // For some reason Typescript doesn't understand this, so we need to be\n    // more specific about the type\n    const canvasCoordinates = points.map((p) => viewport.worldToCanvas(p)) as [\n      Types.Point2,\n      Types.Point2,\n      Types.Point2,\n      Types.Point2\n    ];\n    const canvasCorners = getCanvasEllipseCorners(canvasCoordinates);\n\n    const [canvasPoint1, canvasPoint2] = canvasCorners;\n\n    const minorEllipse = {\n      left: Math.min(canvasPoint1[0], canvasPoint2[0]) + proximity / 2,\n      top: Math.min(canvasPoint1[1], canvasPoint2[1]) + proximity / 2,\n      width: Math.abs(canvasPoint1[0] - canvasPoint2[0]) - proximity,\n      height: Math.abs(canvasPoint1[1] - canvasPoint2[1]) - proximity,\n    };\n\n    const majorEllipse = {\n      left: Math.min(canvasPoint1[0], canvasPoint2[0]) - proximity / 2,\n      top: Math.min(canvasPoint1[1], canvasPoint2[1]) - proximity / 2,\n      width: Math.abs(canvasPoint1[0] - canvasPoint2[0]) + proximity,\n      height: Math.abs(canvasPoint1[1] - canvasPoint2[1]) + proximity,\n    };\n\n    const pointInMinorEllipse = this._pointInEllipseCanvas(\n      minorEllipse,\n      canvasCoords\n    );\n    const pointInMajorEllipse = this._pointInEllipseCanvas(\n      majorEllipse,\n      canvasCoords\n    );\n\n    if (pointInMajorEllipse && !pointInMinorEllipse) {\n      return true;\n    }\n\n    return false;\n  };\n\n  toolSelectedCallback = (\n    evt: EventTypes.InteractionEventType,\n    annotation: EllipticalROIAnnotation\n  ): void => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    annotation.highlighted = true;\n\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    this.editData = {\n      annotation,\n      viewportIdsToRender,\n      movingTextBox: false,\n    };\n\n    hideElementCursor(element);\n\n    this._activateModify(element);\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    evt.preventDefault();\n  };\n\n  handleSelectedCallback = (\n    evt: EventTypes.InteractionEventType,\n    annotation: EllipticalROIAnnotation,\n    handle: ToolHandle\n  ): void => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n    const { data } = annotation;\n\n    annotation.highlighted = true;\n\n    let movingTextBox = false;\n    let handleIndex;\n\n    let centerCanvas;\n    let centerWorld;\n    let canvasWidth;\n    let canvasHeight;\n    let originalHandleCanvas;\n\n    if ((handle as TextBoxHandle).worldPosition) {\n      movingTextBox = true;\n    } else {\n      const { points } = data.handles;\n      const { viewport } = getEnabledElement(element);\n      const { worldToCanvas, canvasToWorld } = viewport;\n\n      handleIndex = points.findIndex((p) => p === handle);\n\n      const pointsCanvas = points.map(worldToCanvas);\n\n      originalHandleCanvas = pointsCanvas[handleIndex];\n\n      canvasWidth = Math.abs(pointsCanvas[2][0] - pointsCanvas[3][0]);\n      canvasHeight = Math.abs(pointsCanvas[0][1] - pointsCanvas[1][1]);\n\n      centerCanvas = [\n        (pointsCanvas[2][0] + pointsCanvas[3][0]) / 2,\n        (pointsCanvas[0][1] + pointsCanvas[1][1]) / 2,\n      ];\n\n      centerWorld = canvasToWorld(centerCanvas);\n    }\n\n    // Find viewports to render on drag.\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    this.editData = {\n      annotation,\n      viewportIdsToRender,\n      handleIndex,\n      canvasWidth,\n      canvasHeight,\n      centerWorld,\n      originalHandleCanvas,\n      movingTextBox,\n    };\n    this._activateModify(element);\n\n    hideElementCursor(element);\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    evt.preventDefault();\n  };\n\n  _endCallback = (evt: EventTypes.InteractionEventType): void => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    const { annotation, viewportIdsToRender, newAnnotation, hasMoved } =\n      this.editData;\n    const { data } = annotation;\n\n    if (newAnnotation && !hasMoved) {\n      return;\n    }\n\n    // Elliptical ROI tool should reset its highlight to false on mouse up (as opposed\n    // to other tools that keep it highlighted until the user moves. The reason\n    // is that we use top-left and bottom-right handles to define the ellipse,\n    // and they are by definition not in the ellipse on mouse up.\n    annotation.highlighted = false;\n    data.handles.activeHandleIndex = null;\n\n    this._deactivateModify(element);\n    this._deactivateDraw(element);\n\n    resetElementCursor(element);\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    this.editData = null;\n    this.isDrawing = false;\n\n    if (\n      this.isHandleOutsideImage &&\n      this.configuration.preventHandleOutsideImage\n    ) {\n      removeAnnotation(annotation.annotationUID);\n    }\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    if (newAnnotation) {\n      const eventType = Events.ANNOTATION_COMPLETED;\n\n      const eventDetail: AnnotationCompletedEventDetail = {\n        annotation,\n      };\n\n      triggerEvent(eventTarget, eventType, eventDetail);\n    }\n  };\n\n  _dragDrawCallback = (evt: EventTypes.InteractionEventType): void => {\n    this.isDrawing = true;\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n    const { currentPoints } = eventDetail;\n    const currentCanvasPoints = currentPoints.canvas;\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine, viewport } = enabledElement;\n    const { canvasToWorld } = viewport;\n\n    //////\n    const { annotation, viewportIdsToRender, centerWorld } = this.editData;\n    const centerCanvas = viewport.worldToCanvas(centerWorld as Types.Point3);\n    const { data } = annotation;\n\n    const dX = Math.abs(currentCanvasPoints[0] - centerCanvas[0]);\n    const dY = Math.abs(currentCanvasPoints[1] - centerCanvas[1]);\n\n    // Todo: why bottom is -dY, it should be +dY\n    const bottomCanvas = <Types.Point2>[centerCanvas[0], centerCanvas[1] - dY];\n    const topCanvas = <Types.Point2>[centerCanvas[0], centerCanvas[1] + dY];\n    const leftCanvas = <Types.Point2>[centerCanvas[0] - dX, centerCanvas[1]];\n    const rightCanvas = <Types.Point2>[centerCanvas[0] + dX, centerCanvas[1]];\n\n    data.handles.points = [\n      canvasToWorld(bottomCanvas),\n      canvasToWorld(topCanvas),\n      canvasToWorld(leftCanvas),\n      canvasToWorld(rightCanvas),\n    ];\n\n    annotation.invalidated = true;\n\n    this.editData.hasMoved = true;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n  };\n\n  _dragModifyCallback = (evt: EventTypes.InteractionEventType): void => {\n    this.isDrawing = true;\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    const { annotation, viewportIdsToRender, handleIndex, movingTextBox } =\n      this.editData;\n    const { data } = annotation;\n\n    if (movingTextBox) {\n      const { deltaPoints } = eventDetail;\n      const worldPosDelta = deltaPoints.world;\n\n      const { textBox } = data.handles;\n      const { worldPosition } = textBox;\n\n      worldPosition[0] += worldPosDelta[0];\n      worldPosition[1] += worldPosDelta[1];\n      worldPosition[2] += worldPosDelta[2];\n\n      textBox.hasMoved = true;\n    } else if (handleIndex === undefined) {\n      // Moving tool\n      const { deltaPoints } = eventDetail;\n      const worldPosDelta = deltaPoints.world;\n\n      const points = data.handles.points;\n\n      points.forEach((point) => {\n        point[0] += worldPosDelta[0];\n        point[1] += worldPosDelta[1];\n        point[2] += worldPosDelta[2];\n      });\n      annotation.invalidated = true;\n    } else {\n      this._dragHandle(evt);\n      annotation.invalidated = true;\n    }\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n  };\n\n  _dragHandle = (evt: EventTypes.InteractionEventType): void => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n    const { viewport } = getEnabledElement(element);\n    const { canvasToWorld, worldToCanvas } = viewport;\n\n    const {\n      annotation,\n      canvasWidth,\n      canvasHeight,\n      handleIndex,\n      centerWorld,\n      originalHandleCanvas,\n    } = this.editData;\n    const centerCanvas = viewport.worldToCanvas(centerWorld as Types.Point3);\n    const { data } = annotation;\n    const { points } = data.handles;\n\n    // Move current point in that direction.\n    // Move other points in opposite direction.\n\n    const { currentPoints } = eventDetail;\n    const currentCanvasPoints = currentPoints.canvas;\n\n    if (handleIndex === 0 || handleIndex === 1) {\n      // Dragging top or bottom point\n      const dYCanvas = Math.abs(currentCanvasPoints[1] - centerCanvas[1]);\n      const canvasBottom = <Types.Point2>[\n        centerCanvas[0],\n        centerCanvas[1] - dYCanvas,\n      ];\n      const canvasTop = <Types.Point2>[\n        centerCanvas[0],\n        centerCanvas[1] + dYCanvas,\n      ];\n\n      points[0] = canvasToWorld(canvasBottom);\n      points[1] = canvasToWorld(canvasTop);\n\n      const dXCanvas = currentCanvasPoints[0] - originalHandleCanvas[0];\n      const newHalfCanvasWidth = canvasWidth / 2 + dXCanvas;\n      const canvasLeft = <Types.Point2>[\n        centerCanvas[0] - newHalfCanvasWidth,\n        centerCanvas[1],\n      ];\n      const canvasRight = <Types.Point2>[\n        centerCanvas[0] + newHalfCanvasWidth,\n        centerCanvas[1],\n      ];\n\n      points[2] = canvasToWorld(canvasLeft);\n      points[3] = canvasToWorld(canvasRight);\n    } else {\n      // Dragging left or right point\n      const dXCanvas = Math.abs(currentCanvasPoints[0] - centerCanvas[0]);\n      const canvasLeft = <Types.Point2>[\n        centerCanvas[0] - dXCanvas,\n        centerCanvas[1],\n      ];\n      const canvasRight = <Types.Point2>[\n        centerCanvas[0] + dXCanvas,\n        centerCanvas[1],\n      ];\n\n      points[2] = canvasToWorld(canvasLeft);\n      points[3] = canvasToWorld(canvasRight);\n\n      const dYCanvas = currentCanvasPoints[1] - originalHandleCanvas[1];\n      const newHalfCanvasHeight = canvasHeight / 2 + dYCanvas;\n      const canvasBottom = <Types.Point2>[\n        centerCanvas[0],\n        centerCanvas[1] - newHalfCanvasHeight,\n      ];\n      const canvasTop = <Types.Point2>[\n        centerCanvas[0],\n        centerCanvas[1] + newHalfCanvasHeight,\n      ];\n\n      points[0] = canvasToWorld(canvasBottom);\n      points[1] = canvasToWorld(canvasTop);\n    }\n  };\n\n  cancel = (element: HTMLDivElement) => {\n    // If it is mid-draw or mid-modify\n    if (this.isDrawing) {\n      this.isDrawing = false;\n      this._deactivateDraw(element);\n      this._deactivateModify(element);\n      resetElementCursor(element);\n\n      const { annotation, viewportIdsToRender, newAnnotation } = this.editData;\n      const { data } = annotation;\n\n      annotation.highlighted = false;\n      data.handles.activeHandleIndex = null;\n\n      const enabledElement = getEnabledElement(element);\n      const { renderingEngine } = enabledElement;\n\n      triggerAnnotationRenderForViewportIds(\n        renderingEngine,\n        viewportIdsToRender\n      );\n\n      if (newAnnotation) {\n        const eventType = Events.ANNOTATION_COMPLETED;\n\n        const eventDetail: AnnotationCompletedEventDetail = {\n          annotation,\n        };\n\n        triggerEvent(eventTarget, eventType, eventDetail);\n      }\n\n      this.editData = null;\n      return annotation.annotationUID;\n    }\n  };\n\n  _activateModify = (element) => {\n    state.isInteractingWithTool = true;\n\n    element.addEventListener(Events.MOUSE_UP, this._endCallback);\n    element.addEventListener(Events.MOUSE_DRAG, this._dragModifyCallback);\n    element.addEventListener(Events.MOUSE_CLICK, this._endCallback);\n\n    element.addEventListener(Events.TOUCH_END, this._endCallback);\n    element.addEventListener(Events.TOUCH_DRAG, this._dragModifyCallback);\n    element.addEventListener(Events.TOUCH_TAP, this._endCallback);\n  };\n\n  _deactivateModify = (element) => {\n    state.isInteractingWithTool = false;\n\n    element.removeEventListener(Events.MOUSE_UP, this._endCallback);\n    element.removeEventListener(Events.MOUSE_DRAG, this._dragModifyCallback);\n    element.removeEventListener(Events.MOUSE_CLICK, this._endCallback);\n\n    element.removeEventListener(Events.TOUCH_END, this._endCallback);\n    element.removeEventListener(Events.TOUCH_DRAG, this._dragModifyCallback);\n    element.removeEventListener(Events.TOUCH_TAP, this._endCallback);\n  };\n\n  _activateDraw = (element) => {\n    state.isInteractingWithTool = true;\n\n    element.addEventListener(Events.MOUSE_UP, this._endCallback);\n    element.addEventListener(Events.MOUSE_DRAG, this._dragDrawCallback);\n    element.addEventListener(Events.MOUSE_MOVE, this._dragDrawCallback);\n    element.addEventListener(Events.MOUSE_CLICK, this._endCallback);\n\n    element.addEventListener(Events.TOUCH_END, this._endCallback);\n    element.addEventListener(Events.TOUCH_DRAG, this._dragDrawCallback);\n    element.addEventListener(Events.TOUCH_TAP, this._endCallback);\n  };\n\n  _deactivateDraw = (element) => {\n    state.isInteractingWithTool = false;\n\n    element.removeEventListener(Events.MOUSE_UP, this._endCallback);\n    element.removeEventListener(Events.MOUSE_DRAG, this._dragDrawCallback);\n    element.removeEventListener(Events.MOUSE_MOVE, this._dragDrawCallback);\n    element.removeEventListener(Events.MOUSE_CLICK, this._endCallback);\n\n    element.removeEventListener(Events.TOUCH_END, this._endCallback);\n    element.removeEventListener(Events.TOUCH_DRAG, this._dragDrawCallback);\n    element.removeEventListener(Events.TOUCH_TAP, this._endCallback);\n  };\n\n  /**\n   * it is used to draw the ellipticalROI annotation in each\n   * request animation frame. It calculates the updated cached statistics if\n   * data is invalidated and cache it.\n   *\n   * @param enabledElement - The Cornerstone's enabledElement.\n   * @param svgDrawingHelper - The svgDrawingHelper providing the context for drawing.\n   */\n  renderAnnotation = (\n    enabledElement: Types.IEnabledElement,\n    svgDrawingHelper: SVGDrawingHelper\n  ): boolean => {\n    let renderStatus = false;\n    const { viewport } = enabledElement;\n    const { element } = viewport;\n\n    let annotations = getAnnotations(this.getToolName(), element);\n\n    if (!annotations?.length) {\n      return renderStatus;\n    }\n\n    annotations = this.filterInteractableAnnotationsForElement(\n      element,\n      annotations\n    );\n\n    if (!annotations?.length) {\n      return renderStatus;\n    }\n\n    const targetId = this.getTargetId(viewport);\n\n    const renderingEngine = viewport.getRenderingEngine();\n\n    const styleSpecifier: StyleSpecifier = {\n      toolGroupId: this.toolGroupId,\n      toolName: this.getToolName(),\n      viewportId: enabledElement.viewport.id,\n    };\n\n    for (let i = 0; i < annotations.length; i++) {\n      const annotation = annotations[i] as EllipticalROIAnnotation;\n      const { annotationUID, data } = annotation;\n      const { handles } = data;\n      const { points, activeHandleIndex } = handles;\n\n      styleSpecifier.annotationUID = annotationUID;\n\n      const lineWidth = this.getStyle('lineWidth', styleSpecifier, annotation);\n      const lineDash = this.getStyle('lineDash', styleSpecifier, annotation);\n      const color = this.getStyle('color', styleSpecifier, annotation);\n\n      const canvasCoordinates = points.map((p) =>\n        viewport.worldToCanvas(p)\n      ) as [Types.Point2, Types.Point2, Types.Point2, Types.Point2];\n\n      const rotation = Math.abs(\n        viewport.getRotation() - (data.initialRotation || 0)\n      );\n      let canvasCorners;\n\n      if (rotation == 90 || rotation == 270) {\n        canvasCorners = <Array<Types.Point2>>getCanvasEllipseCorners([\n          canvasCoordinates[2], // bottom\n          canvasCoordinates[3], // top\n          canvasCoordinates[0], // left\n          canvasCoordinates[1], // right\n        ]);\n      } else {\n        canvasCorners = <Array<Types.Point2>>(\n          getCanvasEllipseCorners(canvasCoordinates) // bottom, top, left, right, keep as is\n        );\n      }\n\n      const { centerPointRadius } = this.configuration;\n\n      // If cachedStats does not exist, or the unit is missing (as part of import/hydration etc.),\n      // force to recalculate the stats from the points\n      if (\n        !data.cachedStats[targetId] ||\n        data.cachedStats[targetId].areaUnit == null\n      ) {\n        data.cachedStats[targetId] = {\n          Modality: null,\n          area: null,\n          max: null,\n          mean: null,\n          stdDev: null,\n          areaUnit: null,\n        };\n\n        this._calculateCachedStats(\n          annotation,\n          viewport,\n          renderingEngine,\n          enabledElement\n        );\n      } else if (annotation.invalidated) {\n        this._throttledCalculateCachedStats(\n          annotation,\n          viewport,\n          renderingEngine,\n          enabledElement\n        );\n        // If the invalidated data is as a result of volumeViewport manipulation\n        // of the tools, we need to invalidate the related viewports data, so that\n        // when scrolling to the related slice in which the tool were manipulated\n        // we re-render the correct tool position. This is due to stackViewport\n        // which doesn't have the full volume at each time, and we are only working\n        // on one slice at a time.\n        if (viewport instanceof VolumeViewport) {\n          const { referencedImageId } = annotation.metadata;\n\n          // invalidate all the relevant stackViewports if they are not\n          // at the referencedImageId\n          for (const targetId in data.cachedStats) {\n            if (targetId.startsWith('imageId')) {\n              const viewports = renderingEngine.getStackViewports();\n\n              const invalidatedStack = viewports.find((vp) => {\n                // The stack viewport that contains the imageId but is not\n                // showing it currently\n                const referencedImageURI =\n                  csUtils.imageIdToURI(referencedImageId);\n                const hasImageURI = vp.hasImageURI(referencedImageURI);\n                const currentImageURI = csUtils.imageIdToURI(\n                  vp.getCurrentImageId()\n                );\n                return hasImageURI && currentImageURI !== referencedImageURI;\n              });\n\n              if (invalidatedStack) {\n                delete data.cachedStats[targetId];\n              }\n            }\n          }\n        }\n      }\n\n      // If rendering engine has been destroyed while rendering\n      if (!viewport.getRenderingEngine()) {\n        console.warn('Rendering Engine has been destroyed');\n        return renderStatus;\n      }\n\n      let activeHandleCanvasCoords;\n\n      if (!isAnnotationVisible(annotationUID)) {\n        continue;\n      }\n\n      if (\n        !isAnnotationLocked(annotation) &&\n        !this.editData &&\n        activeHandleIndex !== null\n      ) {\n        // Not locked or creating and hovering over handle, so render handle.\n        activeHandleCanvasCoords = [canvasCoordinates[activeHandleIndex]];\n      }\n\n      if (activeHandleCanvasCoords) {\n        const handleGroupUID = '0';\n        drawHandlesSvg(\n          svgDrawingHelper,\n          annotationUID,\n          handleGroupUID,\n          activeHandleCanvasCoords,\n          {\n            color,\n          }\n        );\n      }\n\n      const dataId = `${annotationUID}-ellipse`;\n      const ellipseUID = '0';\n      drawEllipseSvg(\n        svgDrawingHelper,\n        annotationUID,\n        ellipseUID,\n        canvasCorners[0],\n        canvasCorners[1],\n        {\n          color,\n          lineDash,\n          lineWidth,\n        },\n        dataId\n      );\n\n      // draw center point, if \"centerPointRadius\" configuration is valid.\n      if (centerPointRadius > 0) {\n        const minRadius = Math.min(\n          Math.abs(canvasCorners[0][0] - canvasCorners[1][0]) / 2, // horizontal radius\n          Math.abs(canvasCorners[0][1] - canvasCorners[1][1]) / 2 // vertical radius\n        );\n        if (minRadius > 3 * centerPointRadius) {\n          const centerPoint = this._getCanvasEllipseCenter(canvasCoordinates);\n          drawCircleSvg(\n            svgDrawingHelper,\n            annotationUID,\n            `${ellipseUID}-center`,\n            centerPoint,\n            centerPointRadius,\n            {\n              color,\n              lineDash,\n              lineWidth,\n            }\n          );\n        }\n      }\n\n      renderStatus = true;\n\n      const options = this.getLinkedTextBoxStyle(styleSpecifier, annotation);\n      if (!options.visibility) {\n        data.handles.textBox = {\n          hasMoved: false,\n          worldPosition: <Types.Point3>[0, 0, 0],\n          worldBoundingBox: {\n            topLeft: <Types.Point3>[0, 0, 0],\n            topRight: <Types.Point3>[0, 0, 0],\n            bottomLeft: <Types.Point3>[0, 0, 0],\n            bottomRight: <Types.Point3>[0, 0, 0],\n          },\n        };\n        continue;\n      }\n\n      const textLines = this.configuration.getTextLines(data, targetId);\n      if (!textLines || textLines.length === 0) {\n        continue;\n      }\n\n      // Poor man's cached?\n      let canvasTextBoxCoords;\n\n      if (!data.handles.textBox.hasMoved) {\n        canvasTextBoxCoords = getTextBoxCoordsCanvas(canvasCorners);\n\n        data.handles.textBox.worldPosition =\n          viewport.canvasToWorld(canvasTextBoxCoords);\n      }\n\n      const textBoxPosition = viewport.worldToCanvas(\n        data.handles.textBox.worldPosition\n      );\n\n      const textBoxUID = '1';\n      const boundingBox = drawLinkedTextBoxSvg(\n        svgDrawingHelper,\n        annotationUID,\n        textBoxUID,\n        textLines,\n        textBoxPosition,\n        canvasCoordinates,\n        {},\n        options\n      );\n\n      const { x: left, y: top, width, height } = boundingBox;\n\n      data.handles.textBox.worldBoundingBox = {\n        topLeft: viewport.canvasToWorld([left, top]),\n        topRight: viewport.canvasToWorld([left + width, top]),\n        bottomLeft: viewport.canvasToWorld([left, top + height]),\n        bottomRight: viewport.canvasToWorld([left + width, top + height]),\n      };\n    }\n\n    return renderStatus;\n  };\n\n  _calculateCachedStats = (\n    annotation,\n    viewport,\n    renderingEngine,\n    enabledElement\n  ) => {\n    const data = annotation.data;\n    const { viewportId, renderingEngineId } = enabledElement;\n\n    const { points } = data.handles;\n\n    const canvasCoordinates = points.map((p) => viewport.worldToCanvas(p));\n    const { viewPlaneNormal, viewUp } = viewport.getCamera();\n\n    const [topLeftCanvas, bottomRightCanvas] = <Array<Types.Point2>>(\n      getCanvasEllipseCorners(canvasCoordinates)\n    );\n\n    const topLeftWorld = viewport.canvasToWorld(topLeftCanvas);\n    const bottomRightWorld = viewport.canvasToWorld(bottomRightCanvas);\n    const { cachedStats } = data;\n\n    const targetIds = Object.keys(cachedStats);\n    const worldPos1 = topLeftWorld;\n    const worldPos2 = bottomRightWorld;\n\n    for (let i = 0; i < targetIds.length; i++) {\n      const targetId = targetIds[i];\n\n      const image = this.getTargetIdImage(targetId, renderingEngine);\n\n      // If image does not exists for the targetId, skip. This can be due\n      // to various reasons such as if the target was a volumeViewport, and\n      // the volumeViewport has been decached in the meantime.\n      if (!image) {\n        continue;\n      }\n\n      const { dimensions, imageData, metadata, hasPixelSpacing } = image;\n\n      const worldPos1Index = transformWorldToIndex(imageData, worldPos1);\n\n      worldPos1Index[0] = Math.floor(worldPos1Index[0]);\n      worldPos1Index[1] = Math.floor(worldPos1Index[1]);\n      worldPos1Index[2] = Math.floor(worldPos1Index[2]);\n\n      const worldPos2Index = transformWorldToIndex(imageData, worldPos2);\n\n      worldPos2Index[0] = Math.floor(worldPos2Index[0]);\n      worldPos2Index[1] = Math.floor(worldPos2Index[1]);\n      worldPos2Index[2] = Math.floor(worldPos2Index[2]);\n\n      // Check if one of the indexes are inside the volume, this then gives us\n      // Some area to do stats over.\n\n      if (this._isInsideVolume(worldPos1Index, worldPos2Index, dimensions)) {\n        const iMin = Math.min(worldPos1Index[0], worldPos2Index[0]);\n        const iMax = Math.max(worldPos1Index[0], worldPos2Index[0]);\n\n        const jMin = Math.min(worldPos1Index[1], worldPos2Index[1]);\n        const jMax = Math.max(worldPos1Index[1], worldPos2Index[1]);\n\n        const kMin = Math.min(worldPos1Index[2], worldPos2Index[2]);\n        const kMax = Math.max(worldPos1Index[2], worldPos2Index[2]);\n\n        const boundsIJK = [\n          [iMin, iMax],\n          [jMin, jMax],\n          [kMin, kMax],\n        ] as [Types.Point2, Types.Point2, Types.Point2];\n\n        const center = [\n          (topLeftWorld[0] + bottomRightWorld[0]) / 2,\n          (topLeftWorld[1] + bottomRightWorld[1]) / 2,\n          (topLeftWorld[2] + bottomRightWorld[2]) / 2,\n        ] as Types.Point3;\n\n        const ellipseObj = {\n          center,\n          xRadius: Math.abs(topLeftWorld[0] - bottomRightWorld[0]) / 2,\n          yRadius: Math.abs(topLeftWorld[1] - bottomRightWorld[1]) / 2,\n          zRadius: Math.abs(topLeftWorld[2] - bottomRightWorld[2]) / 2,\n        };\n\n        const { worldWidth, worldHeight } = getWorldWidthAndHeightFromTwoPoints(\n          viewPlaneNormal,\n          viewUp,\n          worldPos1,\n          worldPos2\n        );\n        const isEmptyArea = worldWidth === 0 && worldHeight === 0;\n        const scale = getCalibratedScale(image);\n        const area =\n          Math.abs(Math.PI * (worldWidth / 2) * (worldHeight / 2)) /\n          scale /\n          scale;\n\n        const modalityUnitOptions = {\n          isPreScaled: isViewportPreScaled(viewport, targetId),\n\n          isSuvScaled: this.isSuvScaled(\n            viewport,\n            targetId,\n            annotation.metadata.referencedImageId\n          ),\n        };\n\n        const modalityUnit = getModalityUnit(\n          metadata.Modality,\n          annotation.metadata.referencedImageId,\n          modalityUnitOptions\n        );\n\n        const pointsInShape = pointInShapeCallback(\n          imageData,\n          (pointLPS, pointIJK) => pointInEllipse(ellipseObj, pointLPS),\n          this.configuration.statsCalculator.statsCallback,\n          boundsIJK\n        );\n\n        const stats = this.configuration.statsCalculator.getStatistics();\n\n        cachedStats[targetId] = {\n          Modality: metadata.Modality,\n          area,\n          mean: stats[1]?.value,\n          max: stats[0]?.value,\n          stdDev: stats[2]?.value,\n          statsArray: stats,\n          pointsInShape: pointsInShape,\n          isEmptyArea,\n          areaUnit: getCalibratedAreaUnits(null, image),\n          modalityUnit,\n        };\n      } else {\n        this.isHandleOutsideImage = true;\n\n        cachedStats[targetId] = {\n          Modality: metadata.Modality,\n        };\n      }\n    }\n\n    annotation.invalidated = false;\n\n    // Dispatching annotation modified\n    const eventType = Events.ANNOTATION_MODIFIED;\n\n    const eventDetail: AnnotationModifiedEventDetail = {\n      annotation,\n      viewportId,\n      renderingEngineId,\n    };\n\n    triggerEvent(eventTarget, eventType, eventDetail);\n\n    return cachedStats;\n  };\n\n  _isInsideVolume = (index1, index2, dimensions) => {\n    return (\n      csUtils.indexWithinDimensions(index1, dimensions) &&\n      csUtils.indexWithinDimensions(index2, dimensions)\n    );\n  };\n\n  /**\n   * This is a temporary function to use the old ellipse's canvas-based\n   * calculation for isPointNearTool, we should move the the world-based\n   * calculation to the tool's isPointNearTool function.\n   *\n   * @param ellipse - The ellipse object\n   * @param location - The location to check\n   * @returns True if the point is inside the ellipse\n   */\n  _pointInEllipseCanvas(ellipse, location: Types.Point2): boolean {\n    const xRadius = ellipse.width / 2;\n    const yRadius = ellipse.height / 2;\n\n    if (xRadius <= 0.0 || yRadius <= 0.0) {\n      return false;\n    }\n\n    const center = [ellipse.left + xRadius, ellipse.top + yRadius];\n    const normalized = [location[0] - center[0], location[1] - center[1]];\n\n    const inEllipse =\n      (normalized[0] * normalized[0]) / (xRadius * xRadius) +\n        (normalized[1] * normalized[1]) / (yRadius * yRadius) <=\n      1.0;\n\n    return inEllipse;\n  }\n\n  /**\n   * It takes the canvas coordinates of the ellipse corners and returns the center point of it\n   *\n   * @param ellipseCanvasPoints - The coordinates of the ellipse in the canvas.\n   * @returns center point.\n   */\n  _getCanvasEllipseCenter(ellipseCanvasPoints: Types.Point2[]): Types.Point2 {\n    const [bottom, top, left, right] = ellipseCanvasPoints;\n    const topLeft = [left[0], top[1]];\n    const bottomRight = [right[0], bottom[1]];\n    return [\n      (topLeft[0] + bottomRight[0]) / 2,\n      (topLeft[1] + bottomRight[1]) / 2,\n    ] as Types.Point2;\n  }\n}\n\nfunction defaultGetTextLines(data, targetId): string[] {\n  const cachedVolumeStats = data.cachedStats[targetId];\n  const { area, mean, stdDev, max, isEmptyArea, areaUnit, modalityUnit } =\n    cachedVolumeStats;\n\n  const textLines: string[] = [];\n\n  if (area) {\n    const areaLine = isEmptyArea\n      ? `Area: Oblique not supported`\n      : `Area: ${roundNumber(area)} ${areaUnit}`;\n    textLines.push(areaLine);\n  }\n\n  if (mean) {\n    textLines.push(`Mean: ${roundNumber(mean)} ${modalityUnit}`);\n  }\n\n  if (max) {\n    textLines.push(`Max: ${roundNumber(max)} ${modalityUnit}`);\n  }\n\n  if (stdDev) {\n    textLines.push(`Std Dev: ${roundNumber(stdDev)} ${modalityUnit}`);\n  }\n\n  return textLines;\n}\n\nEllipticalROITool.toolName = 'EllipticalROI';\nexport default EllipticalROITool;\n","import { AnnotationTool } from '../base';\n\nimport {\n  getEnabledElement,\n  VolumeViewport,\n  eventTarget,\n  triggerEvent,\n  utilities as csUtils,\n} from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\nimport {\n  getCalibratedLengthUnits,\n  getCalibratedAreaUnits,\n  getCalibratedScale,\n  getCalibratedAspect,\n} from '../../utilities/getCalibratedUnits';\nimport roundNumber from '../../utilities/roundNumber';\nimport throttle from '../../utilities/throttle';\nimport {\n  addAnnotation,\n  getAnnotations,\n  removeAnnotation,\n} from '../../stateManagement/annotation/annotationState';\nimport { isAnnotationLocked } from '../../stateManagement/annotation/annotationLocking';\nimport { isAnnotationVisible } from '../../stateManagement/annotation/annotationVisibility';\nimport {\n  drawCircle as drawCircleSvg,\n  drawHandles as drawHandlesSvg,\n  drawLinkedTextBox as drawLinkedTextBoxSvg,\n} from '../../drawingSvg';\nimport { state } from '../../store';\nimport { Events } from '../../enums';\nimport { getViewportIdsWithToolToRender } from '../../utilities/viewportFilters';\nimport { getTextBoxCoordsCanvas } from '../../utilities/drawing';\nimport getWorldWidthAndHeightFromTwoPoints from '../../utilities/planar/getWorldWidthAndHeightFromTwoPoints';\nimport {\n  resetElementCursor,\n  hideElementCursor,\n} from '../../cursors/elementCursor';\nimport {\n  EventTypes,\n  ToolHandle,\n  TextBoxHandle,\n  PublicToolProps,\n  ToolProps,\n  SVGDrawingHelper,\n} from '../../types';\nimport { CircleROIAnnotation } from '../../types/ToolSpecificAnnotationTypes';\n\nimport {\n  AnnotationCompletedEventDetail,\n  AnnotationModifiedEventDetail,\n} from '../../types/EventTypes';\nimport triggerAnnotationRenderForViewportIds from '../../utilities/triggerAnnotationRenderForViewportIds';\nimport { pointInShapeCallback } from '../../utilities';\nimport { StyleSpecifier } from '../../types/AnnotationStyle';\nimport {\n  ModalityUnitOptions,\n  getModalityUnit,\n} from '../../utilities/getModalityUnit';\nimport { isViewportPreScaled } from '../../utilities/viewport/isViewportPreScaled';\nimport {\n  getCanvasCircleCorners,\n  getCanvasCircleRadius,\n} from '../../utilities/math/circle';\nimport { pointInEllipse } from '../../utilities/math/ellipse';\nimport { BasicStatsCalculator } from '../../utilities/math/basic';\n\nconst { transformWorldToIndex } = csUtils;\n\n/**\n * CircleROITool let you draw annotations that measures the statistics\n * such as area, max, mean and stdDev of an elliptical region of interest.\n * You can use CircleROITool in all perpendicular views (axial, sagittal, coronal).\n * Note: annotation tools in cornerstone3DTools exists in the exact location\n * in the physical 3d space, as a result, by default, all annotations that are\n * drawing in the same frameOfReference will get shared between viewports that\n * are in the same frameOfReference. Circle tool's text box lines are dynamically\n * generated based on the viewport's underlying Modality. For instance, if\n * the viewport is displaying CT, the text box will shown the statistics in Hounsfield units,\n * and if the viewport is displaying PET, the text box will show the statistics in\n * SUV units.\n *\n * The resulting annotation's data (statistics) and metadata (the\n * state of the viewport while drawing was happening) will get added to the\n * ToolState manager and can be accessed from the ToolState by calling getAnnotations\n * or similar methods.\n *\n * Changing tool configuration (see below) you can make the tool to draw the center\n * point circle with a given radius.\n *\n * ```js\n * cornerstoneTools.addTool(CircleROITool)\n *\n * const toolGroup = ToolGroupManager.createToolGroup('toolGroupId')\n *\n * toolGroup.addTool(CircleROITool.toolName)\n *\n * toolGroup.addViewport('viewportId', 'renderingEngineId')\n *\n * toolGroup.setToolActive(CircleROITool.toolName, {\n *   bindings: [\n *    {\n *       mouseButton: MouseBindings.Primary, // Left Click\n *     },\n *   ],\n * })\n *\n * // draw a circle at the center point with 4px radius.\n * toolGroup.setToolConfiguration(CircleROITool.toolName, {\n *   centerPointRadius: 4,\n * });\n * ```\n *\n * Read more in the Docs section of the website.\n */\n\nclass CircleROITool extends AnnotationTool {\n  static toolName;\n\n  touchDragCallback: any;\n  mouseDragCallback: any;\n  _throttledCalculateCachedStats: any;\n  editData: {\n    annotation: any;\n    viewportIdsToRender: Array<string>;\n    handleIndex?: number;\n    movingTextBox?: boolean;\n    newAnnotation?: boolean;\n    hasMoved?: boolean;\n  } | null;\n  isDrawing: boolean;\n  isHandleOutsideImage = false;\n\n  constructor(\n    toolProps: PublicToolProps = {},\n    defaultToolProps: ToolProps = {\n      supportedInteractionTypes: ['Mouse', 'Touch'],\n      configuration: {\n        shadow: true,\n        preventHandleOutsideImage: false,\n        // Radius of the circle to draw  at the center point of the circle.\n        // Set this zero(0) in order not to draw the circle.\n        centerPointRadius: 0,\n        getTextLines: defaultGetTextLines,\n        statsCalculator: BasicStatsCalculator,\n      },\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n\n    this._throttledCalculateCachedStats = throttle(\n      this._calculateCachedStats,\n      100,\n      { trailing: true }\n    );\n  }\n\n  /**\n   * Based on the current position of the mouse and the current imageId to create\n   * a CircleROI Annotation and stores it in the annotationManager\n   *\n   * @param evt -  EventTypes.NormalizedMouseEventType\n   * @returns The annotation object.\n   *\n   */\n  addNewAnnotation = (\n    evt: EventTypes.InteractionEventType\n  ): CircleROIAnnotation => {\n    const eventDetail = evt.detail;\n    const { currentPoints, element } = eventDetail;\n    const worldPos = currentPoints.world;\n    const canvasPos = currentPoints.canvas;\n\n    const enabledElement = getEnabledElement(element);\n    const { viewport, renderingEngine } = enabledElement;\n\n    this.isDrawing = true;\n\n    const camera = viewport.getCamera();\n    const { viewPlaneNormal, viewUp } = camera;\n\n    const referencedImageId = this.getReferencedImageId(\n      viewport,\n      worldPos,\n      viewPlaneNormal,\n      viewUp\n    );\n\n    const FrameOfReferenceUID = viewport.getFrameOfReferenceUID();\n\n    const annotation = {\n      highlighted: true,\n      invalidated: true,\n      metadata: {\n        toolName: this.getToolName(),\n        viewPlaneNormal: <Types.Point3>[...viewPlaneNormal],\n        viewUp: <Types.Point3>[...viewUp],\n        FrameOfReferenceUID,\n        referencedImageId,\n      },\n      data: {\n        label: '',\n        handles: {\n          textBox: {\n            hasMoved: false,\n            worldPosition: <Types.Point3>[0, 0, 0],\n            worldBoundingBox: {\n              topLeft: <Types.Point3>[0, 0, 0],\n              topRight: <Types.Point3>[0, 0, 0],\n              bottomLeft: <Types.Point3>[0, 0, 0],\n              bottomRight: <Types.Point3>[0, 0, 0],\n            },\n          },\n          points: [[...worldPos], [...worldPos]] as [\n            Types.Point3, // center\n            Types.Point3 // end\n          ],\n          activeHandleIndex: null,\n        },\n        cachedStats: {},\n      },\n    };\n\n    addAnnotation(annotation, element);\n\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    this.editData = {\n      annotation,\n      viewportIdsToRender,\n      newAnnotation: true,\n      hasMoved: false,\n    };\n    this._activateDraw(element);\n\n    hideElementCursor(element);\n\n    evt.preventDefault();\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    return annotation;\n  };\n\n  /**\n   * It returns if the canvas point is near the provided annotation in the provided\n   * element or not. A proximity is passed to the function to determine the\n   * proximity of the point to the annotation in number of pixels.\n   *\n   * @param element - HTML Element\n   * @param annotation - Annotation\n   * @param canvasCoords - Canvas coordinates\n   * @param proximity - Proximity to tool to consider\n   * @returns Boolean, whether the canvas point is near tool\n   */\n  isPointNearTool = (\n    element: HTMLDivElement,\n    annotation: CircleROIAnnotation,\n    canvasCoords: Types.Point2,\n    proximity: number\n  ): boolean => {\n    const enabledElement = getEnabledElement(element);\n    const { viewport } = enabledElement;\n\n    const { data } = annotation;\n    const { points } = data.handles;\n\n    // For some reason Typescript doesn't understand this, so we need to be\n    // more specific about the type\n    const canvasCoordinates = points.map((p) => viewport.worldToCanvas(p)) as [\n      Types.Point2,\n      Types.Point2\n    ];\n\n    const radius = getCanvasCircleRadius(canvasCoordinates);\n    const radiusPoint = getCanvasCircleRadius([\n      canvasCoordinates[0],\n      canvasCoords,\n    ]);\n\n    if (Math.abs(radiusPoint - radius) < proximity / 2) {\n      return true;\n    }\n\n    return false;\n  };\n\n  toolSelectedCallback = (\n    evt: EventTypes.InteractionEventType,\n    annotation: CircleROIAnnotation\n  ): void => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    annotation.highlighted = true;\n\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    this.editData = {\n      annotation,\n      viewportIdsToRender,\n      movingTextBox: false,\n    };\n\n    hideElementCursor(element);\n\n    this._activateModify(element);\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    evt.preventDefault();\n  };\n\n  handleSelectedCallback = (\n    evt: EventTypes.InteractionEventType,\n    annotation: CircleROIAnnotation,\n    handle: ToolHandle\n  ): void => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n    const { data } = annotation;\n\n    annotation.highlighted = true;\n\n    let movingTextBox = false;\n    let handleIndex;\n\n    if ((handle as TextBoxHandle).worldPosition) {\n      movingTextBox = true;\n    } else {\n      const { points } = data.handles;\n\n      handleIndex = points.findIndex((p) => p === handle);\n    }\n\n    // Find viewports to render on drag.\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    this.editData = {\n      annotation,\n      viewportIdsToRender,\n      handleIndex,\n      movingTextBox,\n    };\n    this._activateModify(element);\n\n    hideElementCursor(element);\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    evt.preventDefault();\n  };\n\n  _endCallback = (evt: EventTypes.InteractionEventType): void => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    const { annotation, viewportIdsToRender, newAnnotation, hasMoved } =\n      this.editData;\n    const { data } = annotation;\n\n    if (newAnnotation && !hasMoved) {\n      return;\n    }\n\n    // Circle ROI tool should reset its highlight to false on mouse up (as opposed\n    // to other tools that keep it highlighted until the user moves. The reason\n    // is that we use top-left and bottom-right handles to define the circle,\n    // and they are by definition not in the circle on mouse up.\n    annotation.highlighted = false;\n    data.handles.activeHandleIndex = null;\n\n    this._deactivateModify(element);\n    this._deactivateDraw(element);\n\n    resetElementCursor(element);\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    this.editData = null;\n    this.isDrawing = false;\n\n    if (\n      this.isHandleOutsideImage &&\n      this.configuration.preventHandleOutsideImage\n    ) {\n      removeAnnotation(annotation.annotationUID);\n    }\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    if (newAnnotation) {\n      const eventType = Events.ANNOTATION_COMPLETED;\n\n      const eventDetail: AnnotationCompletedEventDetail = {\n        annotation,\n      };\n\n      triggerEvent(eventTarget, eventType, eventDetail);\n    }\n  };\n\n  _dragDrawCallback = (evt: EventTypes.InteractionEventType): void => {\n    this.isDrawing = true;\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n    const { currentPoints } = eventDetail;\n    const currentCanvasPoints = currentPoints.canvas;\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine, viewport } = enabledElement;\n    const { canvasToWorld } = viewport;\n\n    //////\n    const { annotation, viewportIdsToRender } = this.editData;\n    const { data } = annotation;\n\n    data.handles.points = [\n      data.handles.points[0], // center stays\n      canvasToWorld(currentCanvasPoints), // end point moves (changing radius)\n    ];\n\n    annotation.invalidated = true;\n\n    this.editData.hasMoved = true;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n  };\n\n  _dragModifyCallback = (evt: EventTypes.InteractionEventType): void => {\n    this.isDrawing = true;\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    const { annotation, viewportIdsToRender, handleIndex, movingTextBox } =\n      this.editData;\n    const { data } = annotation;\n\n    if (movingTextBox) {\n      const { deltaPoints } = eventDetail;\n      const worldPosDelta = deltaPoints.world;\n\n      const { textBox } = data.handles;\n      const { worldPosition } = textBox;\n\n      worldPosition[0] += worldPosDelta[0];\n      worldPosition[1] += worldPosDelta[1];\n      worldPosition[2] += worldPosDelta[2];\n\n      textBox.hasMoved = true;\n    } else if (handleIndex === undefined) {\n      // Moving tool\n      const { deltaPoints } = eventDetail;\n      const worldPosDelta = deltaPoints.world;\n\n      const points = data.handles.points;\n\n      points.forEach((point) => {\n        point[0] += worldPosDelta[0];\n        point[1] += worldPosDelta[1];\n        point[2] += worldPosDelta[2];\n      });\n      annotation.invalidated = true;\n    } else {\n      this._dragHandle(evt);\n      annotation.invalidated = true;\n    }\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n  };\n\n  _dragHandle = (evt: EventTypes.InteractionEventType): void => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n    const enabledElement = getEnabledElement(element);\n    const { canvasToWorld, worldToCanvas } = enabledElement.viewport;\n\n    const { annotation, handleIndex } = this.editData;\n    const { data } = annotation;\n    const { points } = data.handles;\n\n    const canvasCoordinates = points.map((p) => worldToCanvas(p));\n\n    // Move current point in that direction.\n    // Move other points in opposite direction.\n\n    const { currentPoints } = eventDetail;\n    const currentCanvasPoints = currentPoints.canvas;\n\n    if (handleIndex === 0) {\n      // Dragging center, move the circle ROI\n      const dXCanvas = currentCanvasPoints[0] - canvasCoordinates[0][0];\n      const dYCanvas = currentCanvasPoints[1] - canvasCoordinates[0][1];\n\n      const canvasCenter = currentCanvasPoints as Types.Point2;\n      const canvasEnd = <Types.Point2>[\n        canvasCoordinates[1][0] + dXCanvas,\n        canvasCoordinates[1][1] + dYCanvas,\n      ];\n\n      points[0] = canvasToWorld(canvasCenter);\n      points[1] = canvasToWorld(canvasEnd);\n    } else {\n      // Dragging end point, center stays\n      points[1] = canvasToWorld(currentCanvasPoints);\n    }\n  };\n\n  cancel = (element: HTMLDivElement) => {\n    // If it is mid-draw or mid-modify\n    if (this.isDrawing) {\n      this.isDrawing = false;\n      this._deactivateDraw(element);\n      this._deactivateModify(element);\n      resetElementCursor(element);\n\n      const { annotation, viewportIdsToRender, newAnnotation } = this.editData;\n      const { data } = annotation;\n\n      annotation.highlighted = false;\n      data.handles.activeHandleIndex = null;\n\n      const enabledElement = getEnabledElement(element);\n      const { renderingEngine } = enabledElement;\n\n      triggerAnnotationRenderForViewportIds(\n        renderingEngine,\n        viewportIdsToRender\n      );\n\n      if (newAnnotation) {\n        const eventType = Events.ANNOTATION_COMPLETED;\n\n        const eventDetail: AnnotationCompletedEventDetail = {\n          annotation,\n        };\n\n        triggerEvent(eventTarget, eventType, eventDetail);\n      }\n\n      this.editData = null;\n      return annotation.annotationUID;\n    }\n  };\n\n  _activateModify = (element) => {\n    state.isInteractingWithTool = true;\n\n    element.addEventListener(Events.MOUSE_UP, this._endCallback);\n    element.addEventListener(Events.MOUSE_DRAG, this._dragModifyCallback);\n    element.addEventListener(Events.MOUSE_CLICK, this._endCallback);\n\n    element.addEventListener(Events.TOUCH_END, this._endCallback);\n    element.addEventListener(Events.TOUCH_DRAG, this._dragModifyCallback);\n    element.addEventListener(Events.TOUCH_TAP, this._endCallback);\n  };\n\n  _deactivateModify = (element) => {\n    state.isInteractingWithTool = false;\n\n    element.removeEventListener(Events.MOUSE_UP, this._endCallback);\n    element.removeEventListener(Events.MOUSE_DRAG, this._dragModifyCallback);\n    element.removeEventListener(Events.MOUSE_CLICK, this._endCallback);\n\n    element.removeEventListener(Events.TOUCH_END, this._endCallback);\n    element.removeEventListener(Events.TOUCH_DRAG, this._dragModifyCallback);\n    element.removeEventListener(Events.TOUCH_TAP, this._endCallback);\n  };\n\n  _activateDraw = (element) => {\n    state.isInteractingWithTool = true;\n\n    element.addEventListener(Events.MOUSE_UP, this._endCallback);\n    element.addEventListener(Events.MOUSE_DRAG, this._dragDrawCallback);\n    element.addEventListener(Events.MOUSE_MOVE, this._dragDrawCallback);\n    element.addEventListener(Events.MOUSE_CLICK, this._endCallback);\n\n    element.addEventListener(Events.TOUCH_END, this._endCallback);\n    element.addEventListener(Events.TOUCH_DRAG, this._dragDrawCallback);\n    element.addEventListener(Events.TOUCH_TAP, this._endCallback);\n  };\n\n  _deactivateDraw = (element) => {\n    state.isInteractingWithTool = false;\n\n    element.removeEventListener(Events.MOUSE_UP, this._endCallback);\n    element.removeEventListener(Events.MOUSE_DRAG, this._dragDrawCallback);\n    element.removeEventListener(Events.MOUSE_MOVE, this._dragDrawCallback);\n    element.removeEventListener(Events.MOUSE_CLICK, this._endCallback);\n\n    element.removeEventListener(Events.TOUCH_END, this._endCallback);\n    element.removeEventListener(Events.TOUCH_DRAG, this._dragDrawCallback);\n    element.removeEventListener(Events.TOUCH_TAP, this._endCallback);\n  };\n\n  /**\n   * it is used to draw the circleROI annotation in each\n   * request animation frame. It calculates the updated cached statistics if\n   * data is invalidated and cache it.\n   *\n   * @param enabledElement - The Cornerstone's enabledElement.\n   * @param svgDrawingHelper - The svgDrawingHelper providing the context for drawing.\n   */\n  renderAnnotation = (\n    enabledElement: Types.IEnabledElement,\n    svgDrawingHelper: SVGDrawingHelper\n  ): boolean => {\n    let renderStatus = false;\n    const { viewport } = enabledElement;\n    const { element } = viewport;\n\n    let annotations = getAnnotations(this.getToolName(), element);\n\n    if (!annotations?.length) {\n      return renderStatus;\n    }\n\n    annotations = this.filterInteractableAnnotationsForElement(\n      element,\n      annotations\n    );\n\n    if (!annotations?.length) {\n      return renderStatus;\n    }\n\n    const targetId = this.getTargetId(viewport);\n\n    const renderingEngine = viewport.getRenderingEngine();\n\n    const styleSpecifier: StyleSpecifier = {\n      toolGroupId: this.toolGroupId,\n      toolName: this.getToolName(),\n      viewportId: enabledElement.viewport.id,\n    };\n\n    for (let i = 0; i < annotations.length; i++) {\n      const annotation = annotations[i] as CircleROIAnnotation;\n      const { annotationUID, data } = annotation;\n      const { handles } = data;\n      const { points, activeHandleIndex } = handles;\n\n      styleSpecifier.annotationUID = annotationUID;\n\n      const lineWidth = this.getStyle('lineWidth', styleSpecifier, annotation);\n      const lineDash = this.getStyle('lineDash', styleSpecifier, annotation);\n      const color = this.getStyle('color', styleSpecifier, annotation);\n\n      const canvasCoordinates = points.map((p) =>\n        viewport.worldToCanvas(p)\n      ) as [Types.Point2, Types.Point2];\n      const center = canvasCoordinates[0];\n      const radius = getCanvasCircleRadius(canvasCoordinates);\n      const canvasCorners = getCanvasCircleCorners(canvasCoordinates);\n\n      const { centerPointRadius } = this.configuration;\n\n      // If cachedStats does not exist, or the unit is missing (as part of import/hydration etc.),\n      // force to recalculate the stats from the points\n      if (\n        !data.cachedStats[targetId] ||\n        data.cachedStats[targetId].areaUnit == null\n      ) {\n        data.cachedStats[targetId] = {\n          Modality: null,\n          area: null,\n          max: null,\n          mean: null,\n          stdDev: null,\n          areaUnit: null,\n          radius: null,\n          radiusUnit: null,\n          perimeter: null,\n        };\n\n        this._calculateCachedStats(\n          annotation,\n          viewport,\n          renderingEngine,\n          enabledElement\n        );\n      } else if (annotation.invalidated) {\n        this._throttledCalculateCachedStats(\n          annotation,\n          viewport,\n          renderingEngine,\n          enabledElement\n        );\n        // If the invalidated data is as a result of volumeViewport manipulation\n        // of the tools, we need to invalidate the related viewports data, so that\n        // when scrolling to the related slice in which the tool were manipulated\n        // we re-render the correct tool position. This is due to stackViewport\n        // which doesn't have the full volume at each time, and we are only working\n        // on one slice at a time.\n        if (viewport instanceof VolumeViewport) {\n          const { referencedImageId } = annotation.metadata;\n\n          // invalidate all the relevant stackViewports if they are not\n          // at the referencedImageId\n          for (const targetId in data.cachedStats) {\n            if (targetId.startsWith('imageId')) {\n              const viewports = renderingEngine.getStackViewports();\n\n              const invalidatedStack = viewports.find((vp) => {\n                // The stack viewport that contains the imageId but is not\n                // showing it currently\n                const referencedImageURI =\n                  csUtils.imageIdToURI(referencedImageId);\n                const hasImageURI = vp.hasImageURI(referencedImageURI);\n                const currentImageURI = csUtils.imageIdToURI(\n                  vp.getCurrentImageId()\n                );\n                return hasImageURI && currentImageURI !== referencedImageURI;\n              });\n\n              if (invalidatedStack) {\n                delete data.cachedStats[targetId];\n              }\n            }\n          }\n        }\n      }\n\n      // If rendering engine has been destroyed while rendering\n      if (!viewport.getRenderingEngine()) {\n        console.warn('Rendering Engine has been destroyed');\n        return renderStatus;\n      }\n\n      let activeHandleCanvasCoords;\n\n      if (!isAnnotationVisible(annotationUID)) {\n        continue;\n      }\n\n      if (\n        !isAnnotationLocked(annotation) &&\n        !this.editData &&\n        activeHandleIndex !== null\n      ) {\n        // Not locked or creating and hovering over handle, so render handle.\n        activeHandleCanvasCoords = [canvasCoordinates[activeHandleIndex]];\n      }\n\n      if (activeHandleCanvasCoords) {\n        const handleGroupUID = '0';\n        drawHandlesSvg(\n          svgDrawingHelper,\n          annotationUID,\n          handleGroupUID,\n          activeHandleCanvasCoords,\n          {\n            color,\n          }\n        );\n      }\n\n      const dataId = `${annotationUID}-circle`;\n      const circleUID = '0';\n      drawCircleSvg(\n        svgDrawingHelper,\n        annotationUID,\n        circleUID,\n        center,\n        radius,\n        {\n          color,\n          lineDash,\n          lineWidth,\n        },\n        dataId\n      );\n\n      // draw center point, if \"centerPointRadius\" configuration is valid.\n      if (centerPointRadius > 0) {\n        if (radius > 3 * centerPointRadius) {\n          drawCircleSvg(\n            svgDrawingHelper,\n            annotationUID,\n            `${circleUID}-center`,\n            center,\n            centerPointRadius,\n            {\n              color,\n              lineDash,\n              lineWidth,\n            }\n          );\n        }\n      }\n\n      renderStatus = true;\n\n      const options = this.getLinkedTextBoxStyle(styleSpecifier, annotation);\n      if (!options.visibility) {\n        data.handles.textBox = {\n          hasMoved: false,\n          worldPosition: <Types.Point3>[0, 0, 0],\n          worldBoundingBox: {\n            topLeft: <Types.Point3>[0, 0, 0],\n            topRight: <Types.Point3>[0, 0, 0],\n            bottomLeft: <Types.Point3>[0, 0, 0],\n            bottomRight: <Types.Point3>[0, 0, 0],\n          },\n        };\n        continue;\n      }\n\n      const textLines = this.configuration.getTextLines(data, targetId);\n      if (!textLines || textLines.length === 0) {\n        continue;\n      }\n\n      // Poor man's cached?\n      let canvasTextBoxCoords;\n\n      if (!data.handles.textBox.hasMoved) {\n        canvasTextBoxCoords = getTextBoxCoordsCanvas(canvasCorners);\n\n        data.handles.textBox.worldPosition =\n          viewport.canvasToWorld(canvasTextBoxCoords);\n      }\n\n      const textBoxPosition = viewport.worldToCanvas(\n        data.handles.textBox.worldPosition\n      );\n\n      const textBoxUID = '1';\n      const boundingBox = drawLinkedTextBoxSvg(\n        svgDrawingHelper,\n        annotationUID,\n        textBoxUID,\n        textLines,\n        textBoxPosition,\n        canvasCoordinates,\n        {},\n        options\n      );\n\n      const { x: left, y: top, width, height } = boundingBox;\n\n      data.handles.textBox.worldBoundingBox = {\n        topLeft: viewport.canvasToWorld([left, top]),\n        topRight: viewport.canvasToWorld([left + width, top]),\n        bottomLeft: viewport.canvasToWorld([left, top + height]),\n        bottomRight: viewport.canvasToWorld([left + width, top + height]),\n      };\n    }\n\n    return renderStatus;\n  };\n\n  _calculateCachedStats = (\n    annotation,\n    viewport,\n    renderingEngine,\n    enabledElement\n  ) => {\n    const data = annotation.data;\n    const { viewportId, renderingEngineId } = enabledElement;\n\n    const { points } = data.handles;\n\n    const canvasCoordinates = points.map((p) => viewport.worldToCanvas(p));\n    const { viewPlaneNormal, viewUp } = viewport.getCamera();\n\n    const [topLeftCanvas, bottomRightCanvas] = <Array<Types.Point2>>(\n      getCanvasCircleCorners(canvasCoordinates)\n    );\n\n    const topLeftWorld = viewport.canvasToWorld(topLeftCanvas);\n    const bottomRightWorld = viewport.canvasToWorld(bottomRightCanvas);\n    const { cachedStats } = data;\n\n    const targetIds = Object.keys(cachedStats);\n    const worldPos1 = topLeftWorld;\n    const worldPos2 = bottomRightWorld;\n\n    for (let i = 0; i < targetIds.length; i++) {\n      const targetId = targetIds[i];\n\n      const image = this.getTargetIdImage(targetId, renderingEngine);\n\n      // If image does not exists for the targetId, skip. This can be due\n      // to various reasons such as if the target was a volumeViewport, and\n      // the volumeViewport has been decached in the meantime.\n      if (!image) {\n        continue;\n      }\n\n      const { dimensions, imageData, metadata, hasPixelSpacing } = image;\n\n      const worldPos1Index = transformWorldToIndex(imageData, worldPos1);\n\n      worldPos1Index[0] = Math.floor(worldPos1Index[0]);\n      worldPos1Index[1] = Math.floor(worldPos1Index[1]);\n      worldPos1Index[2] = Math.floor(worldPos1Index[2]);\n\n      const worldPos2Index = transformWorldToIndex(imageData, worldPos2);\n\n      worldPos2Index[0] = Math.floor(worldPos2Index[0]);\n      worldPos2Index[1] = Math.floor(worldPos2Index[1]);\n      worldPos2Index[2] = Math.floor(worldPos2Index[2]);\n\n      // Check if one of the indexes are inside the volume, this then gives us\n      // Some area to do stats over.\n\n      if (this._isInsideVolume(worldPos1Index, worldPos2Index, dimensions)) {\n        const iMin = Math.min(worldPos1Index[0], worldPos2Index[0]);\n        const iMax = Math.max(worldPos1Index[0], worldPos2Index[0]);\n\n        const jMin = Math.min(worldPos1Index[1], worldPos2Index[1]);\n        const jMax = Math.max(worldPos1Index[1], worldPos2Index[1]);\n\n        const kMin = Math.min(worldPos1Index[2], worldPos2Index[2]);\n        const kMax = Math.max(worldPos1Index[2], worldPos2Index[2]);\n\n        const boundsIJK = [\n          [iMin, iMax],\n          [jMin, jMax],\n          [kMin, kMax],\n        ] as [Types.Point2, Types.Point2, Types.Point2];\n\n        const center = [\n          (topLeftWorld[0] + bottomRightWorld[0]) / 2,\n          (topLeftWorld[1] + bottomRightWorld[1]) / 2,\n          (topLeftWorld[2] + bottomRightWorld[2]) / 2,\n        ] as Types.Point3;\n\n        const ellipseObj = {\n          center,\n          xRadius: Math.abs(topLeftWorld[0] - bottomRightWorld[0]) / 2,\n          yRadius: Math.abs(topLeftWorld[1] - bottomRightWorld[1]) / 2,\n          zRadius: Math.abs(topLeftWorld[2] - bottomRightWorld[2]) / 2,\n        };\n\n        const { worldWidth, worldHeight } = getWorldWidthAndHeightFromTwoPoints(\n          viewPlaneNormal,\n          viewUp,\n          worldPos1,\n          worldPos2\n        );\n        const isEmptyArea = worldWidth === 0 && worldHeight === 0;\n        const scale = getCalibratedScale(image);\n        const aspect = getCalibratedAspect(image);\n        const area = Math.abs(\n          Math.PI *\n            (worldWidth / scale / 2) *\n            (worldHeight / aspect / scale / 2)\n        );\n\n        const modalityUnitOptions = {\n          isPreScaled: isViewportPreScaled(viewport, targetId),\n          isSuvScaled: this.isSuvScaled(\n            viewport,\n            targetId,\n            annotation.metadata.referencedImageId\n          ),\n        };\n\n        const modalityUnit = getModalityUnit(\n          metadata.Modality,\n          annotation.metadata.referencedImageId,\n          modalityUnitOptions\n        );\n\n        const pointsInShape = pointInShapeCallback(\n          imageData,\n          (pointLPS, pointIJK) => pointInEllipse(ellipseObj, pointLPS),\n          this.configuration.statsCalculator.statsCallback,\n          boundsIJK\n        );\n\n        const stats = this.configuration.statsCalculator.getStatistics();\n\n        cachedStats[targetId] = {\n          Modality: metadata.Modality,\n          area,\n          mean: stats[1]?.value,\n          max: stats[0]?.value,\n          stdDev: stats[2]?.value,\n          statsArray: stats,\n          pointsInShape: pointsInShape,\n          isEmptyArea,\n          areaUnit: getCalibratedAreaUnits(null, image),\n          radius: worldWidth / 2 / scale,\n          radiusUnit: getCalibratedLengthUnits(null, image),\n          perimeter: (2 * Math.PI * (worldWidth / 2)) / scale,\n          modalityUnit,\n        };\n      } else {\n        this.isHandleOutsideImage = true;\n\n        cachedStats[targetId] = {\n          Modality: metadata.Modality,\n        };\n      }\n    }\n\n    annotation.invalidated = false;\n\n    // Dispatching annotation modified\n    const eventType = Events.ANNOTATION_MODIFIED;\n\n    const eventDetail: AnnotationModifiedEventDetail = {\n      annotation,\n      viewportId,\n      renderingEngineId,\n    };\n\n    triggerEvent(eventTarget, eventType, eventDetail);\n\n    return cachedStats;\n  };\n\n  _isInsideVolume = (index1, index2, dimensions) => {\n    return (\n      csUtils.indexWithinDimensions(index1, dimensions) &&\n      csUtils.indexWithinDimensions(index2, dimensions)\n    );\n  };\n}\n\nfunction defaultGetTextLines(data, targetId): string[] {\n  const cachedVolumeStats = data.cachedStats[targetId];\n  const {\n    radius,\n    radiusUnit,\n    area,\n    mean,\n    stdDev,\n    max,\n    isEmptyArea,\n    Modality,\n    areaUnit,\n    modalityUnit,\n  } = cachedVolumeStats;\n\n  const textLines: string[] = [];\n\n  if (radius) {\n    const radiusLine = isEmptyArea\n      ? `Radius: Oblique not supported`\n      : `Radius: ${roundNumber(radius)} ${radiusUnit}`;\n    textLines.push(radiusLine);\n  }\n\n  if (area) {\n    const areaLine = isEmptyArea\n      ? `Area: Oblique not supported`\n      : `Area: ${roundNumber(area)} ${areaUnit}`;\n    textLines.push(areaLine);\n  }\n\n  if (mean) {\n    textLines.push(`Mean: ${roundNumber(mean)} ${modalityUnit}`);\n  }\n\n  if (max) {\n    textLines.push(`Max: ${roundNumber(max)} ${modalityUnit}`);\n  }\n\n  if (stdDev) {\n    textLines.push(`Std Dev: ${roundNumber(stdDev)} ${modalityUnit}`);\n  }\n\n  return textLines;\n}\n\nCircleROITool.toolName = 'CircleROI';\nexport default CircleROITool;\n","import { vec2 } from 'gl-matrix';\nimport type { Types } from '@cornerstonejs/core';\n\n/**\n * Orientation algoritm to determine if two lines cross.\n * Credit and details: geeksforgeeks.org/check-if-two-given-line-segments-intersect/\n */\n\nfunction getAllIntersectionsWithPolyline(\n  points: Types.Point2[],\n  p1: Types.Point2,\n  q1: Types.Point2,\n  closed = true\n): Types.Point2[] {\n  let initialI;\n  let j;\n  const intersections: Types.Point2[] = [];\n\n  if (closed) {\n    j = points.length - 1;\n    initialI = 0;\n  } else {\n    j = 0;\n    initialI = 1;\n  }\n\n  for (let i = initialI; i < points.length; i++) {\n    const p2 = points[j];\n    const q2 = points[i];\n\n    if (doesIntersect(p1, q1, p2, q2)) {\n      intersections.push([j, i]);\n    }\n\n    j = i;\n  }\n\n  return intersections;\n}\n\n/**\n * Returns all intersections points\n * between a line and a polyline\n */\nfunction getIntersectionCoordinatesWithPolyline(\n  points: Types.Point2[],\n  p1: Types.Point2,\n  q1: Types.Point2,\n  closed = true\n): Types.Point2[] {\n  const result = [];\n  const polylineIndexes = getAllIntersectionsWithPolyline(\n    points,\n    p1,\n    q1,\n    closed\n  );\n\n  for (let i = 0; i < polylineIndexes.length; i++) {\n    const p2 = points[polylineIndexes[i][0]];\n    const q2 = points[polylineIndexes[i][1]];\n    const intersection = getIntersection(p1, q1, p2, q2);\n    result.push(intersection);\n  }\n  return result;\n}\n\n/**\n * Checks whether the line (`p1`,`q1`) intersects any of the other lines in the\n * `points`, and returns the first value.\n */\nfunction getFirstIntersectionWithPolyline(\n  points: Types.Point2[],\n  p1: Types.Point2,\n  q1: Types.Point2,\n  closed = true\n): Types.Point2 | undefined {\n  let initialI;\n  let j;\n\n  if (closed) {\n    j = points.length - 1;\n    initialI = 0;\n  } else {\n    j = 0;\n    initialI = 1;\n  }\n\n  for (let i = initialI; i < points.length; i++) {\n    const p2 = points[j];\n    const q2 = points[i];\n\n    if (doesIntersect(p1, q1, p2, q2)) {\n      return [j, i];\n    }\n\n    j = i;\n  }\n}\n\n/**\n * Checks whether the line (`p1`,`q1`) intersects any of the other lines in the\n * `points`, and returns the closest value.\n */\nfunction getClosestIntersectionWithPolyline(\n  points: Types.Point2[],\n  p1: Types.Point2,\n  q1: Types.Point2,\n  closed = true\n): { segment: Types.Point2; distance: number } | undefined {\n  let initialI;\n  let j;\n\n  if (closed) {\n    j = points.length - 1;\n    initialI = 0;\n  } else {\n    j = 0;\n    initialI = 1;\n  }\n\n  const intersections = [];\n\n  for (let i = initialI; i < points.length; i++) {\n    const p2 = points[j];\n    const q2 = points[i];\n\n    if (doesIntersect(p1, q1, p2, q2)) {\n      intersections.push([j, i]);\n    }\n\n    j = i;\n  }\n\n  if (intersections.length === 0) {\n    return;\n  }\n\n  // Find intersection closest to the start point\n  const distances = [];\n\n  intersections.forEach((intersection) => {\n    const intersectionPoints = [\n      points[intersection[0]],\n      points[intersection[1]],\n    ];\n\n    const midpoint = [\n      (intersectionPoints[0][0] + intersectionPoints[1][0]) / 2,\n      (intersectionPoints[0][1] + intersectionPoints[1][1]) / 2,\n    ];\n\n    distances.push(vec2.distance(<vec2>midpoint, p1));\n  });\n\n  const minDistance = Math.min(...distances);\n  const indexOfMinDistance = distances.indexOf(minDistance);\n\n  return {\n    segment: intersections[indexOfMinDistance],\n    distance: minDistance,\n  };\n}\n\n/**\n * Checks whether the line (`p1`,`q1`) intersects the line (`p2`,`q2`) via an orientation algorithm.\n */\nfunction doesIntersect(\n  p1: Types.Point2,\n  q1: Types.Point2,\n  p2: Types.Point2,\n  q2: Types.Point2\n): boolean {\n  let result = false;\n\n  const orient = [\n    orientation(p1, q1, p2),\n    orientation(p1, q1, q2),\n    orientation(p2, q2, p1),\n    orientation(p2, q2, q1),\n  ];\n\n  // General Case\n  if (orient[0] !== orient[1] && orient[2] !== orient[3]) {\n    return true;\n  }\n\n  // Special Cases\n  if (orient[0] === 0 && onSegment(p1, p2, q1)) {\n    // If p1, q1 and p2 are colinear and p2 lies on segment p1q1\n    result = true;\n  } else if (orient[1] === 0 && onSegment(p1, q2, q1)) {\n    // If p1, q1 and p2 are colinear and q2 lies on segment p1q1\n    result = true;\n  } else if (orient[2] === 0 && onSegment(p2, p1, q2)) {\n    // If p2, q2 and p1 are colinear and p1 lies on segment p2q2\n    result = true;\n  } else if (orient[3] === 0 && onSegment(p2, q1, q2)) {\n    // If p2, q2 and q1 are colinear and q1 lies on segment p2q2\n    result = true;\n  }\n\n  return result;\n}\n\n/**\n * Checks the orientation of 3 points, returns a 0, 1 or 2 based on\n * the orientation of the points.\n */\nfunction orientation(\n  p: Types.Point2,\n  q: Types.Point2,\n  r: Types.Point2\n): number {\n  const orientationValue =\n    (q[1] - p[1]) * (r[0] - q[0]) - (q[0] - p[0]) * (r[1] - q[1]);\n\n  if (orientationValue === 0) {\n    return 0; // Colinear\n  }\n\n  return orientationValue > 0 ? 1 : 2;\n}\n\n/**\n * Checks if point `q` lies on the segment (`p`,`r`).\n */\nfunction onSegment(p: Types.Point2, q: Types.Point2, r: Types.Point2): boolean {\n  if (\n    q[0] <= Math.max(p[0], r[0]) &&\n    q[0] >= Math.min(p[0], r[0]) &&\n    q[1] <= Math.max(p[1], r[1]) &&\n    q[1] >= Math.min(p[1], r[1])\n  ) {\n    return true;\n  }\n\n  return false;\n}\n\n/**\n * Gets the intersection between the line (`p1`,`q1`) and the line (`p2`,`q2`)\n * http://jsfiddle.net/justin_c_rounds/Gd2S2/light/\n * https://en.wikipedia.org/wiki/Line%E2%80%93line_intersection#Given_two_points_on_each_line\n */\nfunction getIntersection(\n  p1: Types.Point2,\n  q1: Types.Point2,\n  p2: Types.Point2,\n  q2: Types.Point2\n): Types.Point2 {\n  const denominator =\n    (q2[1] - p2[1]) * (q1[0] - p1[0]) - (q2[0] - p2[0]) * (q1[1] - p1[1]);\n  if (denominator == 0) {\n    return;\n  }\n  let a = p1[1] - p2[1];\n  let b = p1[0] - p2[0];\n  const numerator1 = (q2[0] - p2[0]) * a - (q2[1] - p2[1]) * b;\n  const numerator2 = (q1[0] - p1[0]) * a - (q1[1] - p1[1]) * b;\n  a = numerator1 / denominator;\n  b = numerator2 / denominator;\n\n  const resultX = p1[0] + a * (q1[0] - p1[0]);\n  const resultY = p1[1] + a * (q1[1] - p1[1]);\n\n  return [resultX, resultY];\n}\n\nexport {\n  getAllIntersectionsWithPolyline,\n  getFirstIntersectionWithPolyline,\n  getClosestIntersectionWithPolyline,\n  getIntersectionCoordinatesWithPolyline,\n};\n","import { StackViewport } from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\nimport { vec3 } from 'gl-matrix';\n\nconst EPSILON = 1e-3;\n\n/**\n * Gets the desired spacing for points in the polyline for the\n * `PlanarFreehandROITool` in the x and y canvas directions, as well as\n * returning these canvas directions in world space.\n *\n * @param viewport - The Cornerstone3D `StackViewport` or `VolumeViewport`.\n * @param subPixelResolution - The number to divide the image pixel spacing by\n * to get the sub pixel spacing. E.g. `10` will return spacings 10x smaller than\n * the native image spacing.\n * @returns The spacings of the X and Y directions, and the 3D directions of the\n * x and y directions.\n */\nconst getSubPixelSpacingAndXYDirections = (\n  viewport: Types.IStackViewport | Types.IVolumeViewport,\n  subPixelResolution: number\n): { spacing: Types.Point2; xDir: Types.Point3; yDir: Types.Point3 } => {\n  let spacing;\n  let xDir;\n  let yDir;\n\n  if (viewport instanceof StackViewport) {\n    // Check XY directions\n    const imageData = viewport.getImageData();\n\n    xDir = imageData.direction.slice(0, 3);\n    yDir = imageData.direction.slice(3, 6);\n\n    spacing = imageData.spacing;\n  } else {\n    // Check volume directions\n    const imageData = viewport.getImageData();\n    const { direction, spacing: volumeSpacing } = imageData;\n    const { viewPlaneNormal, viewUp } = viewport.getCamera();\n\n    // Calculate size of spacing vector in normal direction\n    const iVector = direction.slice(0, 3) as Types.Point3;\n    const jVector = direction.slice(3, 6) as Types.Point3;\n    const kVector = direction.slice(6, 9) as Types.Point3;\n\n    const viewRight = vec3.create(); // Get the X direction of the viewport\n\n    vec3.cross(viewRight, <vec3>viewUp, <vec3>viewPlaneNormal);\n\n    const absViewRightDotI = Math.abs(vec3.dot(viewRight, iVector));\n    const absViewRightDotJ = Math.abs(vec3.dot(viewRight, jVector));\n    const absViewRightDotK = Math.abs(vec3.dot(viewRight, kVector));\n\n    // Get X spacing\n    let xSpacing;\n    if (Math.abs(1 - absViewRightDotI) < EPSILON) {\n      xSpacing = volumeSpacing[0];\n      xDir = iVector;\n    } else if (Math.abs(1 - absViewRightDotJ) < EPSILON) {\n      xSpacing = volumeSpacing[1];\n      xDir = jVector;\n    } else if (Math.abs(1 - absViewRightDotK) < EPSILON) {\n      xSpacing = volumeSpacing[2];\n      xDir = kVector;\n    } else {\n      throw new Error('No support yet for oblique plane planar contours');\n    }\n\n    const absViewUpDotI = Math.abs(vec3.dot(viewUp, iVector));\n    const absViewUpDotJ = Math.abs(vec3.dot(viewUp, jVector));\n    const absViewUpDotK = Math.abs(vec3.dot(viewUp, kVector));\n\n    // Get Y spacing\n    let ySpacing;\n    if (Math.abs(1 - absViewUpDotI) < EPSILON) {\n      ySpacing = volumeSpacing[0];\n      yDir = iVector;\n    } else if (Math.abs(1 - absViewUpDotJ) < EPSILON) {\n      ySpacing = volumeSpacing[1];\n      yDir = jVector;\n    } else if (Math.abs(1 - absViewUpDotK) < EPSILON) {\n      ySpacing = volumeSpacing[2];\n      yDir = kVector;\n    } else {\n      throw new Error('No support yet for oblique plane planar contours');\n    }\n\n    spacing = [xSpacing, ySpacing];\n  }\n\n  const subPixelSpacing: Types.Point2 = [\n    spacing[0] / subPixelResolution,\n    spacing[1] / subPixelResolution,\n  ];\n\n  return { spacing: subPixelSpacing, xDir, yDir };\n};\n\nexport default getSubPixelSpacingAndXYDirections;\n","import { vec2 } from 'gl-matrix';\nimport type { Types } from '@cornerstonejs/core';\n\n/**\n * Returns true if points `p1` and `p2` are within `closeContourProximity`.\n */\nconst pointsAreWithinCloseContourProximity = (\n  p1: Types.Point2,\n  p2: Types.Point2,\n  closeContourProximity: number\n): boolean => {\n  return vec2.dist(p1, p2) < closeContourProximity;\n};\n\nexport default pointsAreWithinCloseContourProximity;\n","import { getEnabledElement } from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\nimport { vec2, vec3 } from 'gl-matrix';\nimport { PlanarFreehandROICommonData } from './planarFreehandROIInternalTypes';\n\n/**\n * Adds one or more points to the array at a resolution defined by the underlying image.\n */\nconst addCanvasPointsToArray = (\n  element: HTMLDivElement,\n  canvasPoints: Types.Point2[],\n  newCanvasPoint: Types.Point2,\n  commonData: PlanarFreehandROICommonData\n): number => {\n  const { xDir, yDir, spacing } = commonData;\n  const enabledElement = getEnabledElement(element);\n  const { viewport } = enabledElement;\n\n  const lastWorldPos = viewport.canvasToWorld(\n    canvasPoints[canvasPoints.length - 1]\n  );\n  const newWorldPos = viewport.canvasToWorld(newCanvasPoint);\n\n  const worldPosDiff = vec3.create();\n\n  vec3.subtract(worldPosDiff, newWorldPos, lastWorldPos);\n\n  const xDist = Math.abs(vec3.dot(worldPosDiff, xDir));\n  const yDist = Math.abs(vec3.dot(worldPosDiff, yDir));\n\n  const numPointsToAdd = Math.max(\n    Math.floor(xDist / spacing[0]),\n    Math.floor(yDist / spacing[0])\n  );\n\n  if (numPointsToAdd > 1) {\n    const lastCanvasPoint = canvasPoints[canvasPoints.length - 1];\n\n    const canvasDist = vec2.dist(lastCanvasPoint, newCanvasPoint);\n\n    const canvasDir = vec2.create();\n\n    vec2.subtract(canvasDir, newCanvasPoint, lastCanvasPoint);\n\n    vec2.set(canvasDir, canvasDir[0] / canvasDist, canvasDir[1] / canvasDist);\n\n    const distPerPoint = canvasDist / numPointsToAdd;\n\n    for (let i = 1; i <= numPointsToAdd; i++) {\n      canvasPoints.push([\n        lastCanvasPoint[0] + distPerPoint * canvasDir[0] * i,\n        lastCanvasPoint[1] + distPerPoint * canvasDir[1] * i,\n      ]);\n    }\n  } else {\n    canvasPoints.push(newCanvasPoint);\n  }\n\n  return numPointsToAdd;\n};\n\nexport default addCanvasPointsToArray;\n","import type { Types } from '@cornerstonejs/core';\nimport { vec2 } from 'gl-matrix';\n\n/**\n * Returns `true` if the point `p` can project onto point (`p1`, `p2`), and if\n * this projected point is less than `proximity` units away.\n */\nconst pointCanProjectOnLine = (\n  p: Types.Point2,\n  p1: Types.Point2,\n  p2: Types.Point2,\n  proximity: number\n): boolean => {\n  // Perfom checks in order of computational complexity.\n  const p1p = [p[0] - p1[0], p[1] - p1[1]];\n  const p1p2 = [p2[0] - p1[0], p2[1] - p1[1]];\n\n  const dot = p1p[0] * p1p2[0] + p1p[1] * p1p2[1];\n\n  // Dot product needs to be positive to be a candidate for projection onto line segment.\n  if (dot < 0) {\n    return false;\n  }\n\n  const p1p2Mag = Math.sqrt(p1p2[0] * p1p2[0] + p1p2[1] * p1p2[1]);\n\n  if (p1p2Mag === 0) {\n    return false;\n  }\n\n  const projectionVectorMag = dot / p1p2Mag;\n  const p1p2UnitVector = [p1p2[0] / p1p2Mag, p1p2[1] / p1p2Mag];\n  const projectionVector = [\n    p1p2UnitVector[0] * projectionVectorMag,\n    p1p2UnitVector[1] * projectionVectorMag,\n  ];\n  const projectionPoint = <Types.Point2>[\n    p1[0] + projectionVector[0],\n    p1[1] + projectionVector[1],\n  ];\n\n  const distance = vec2.distance(p, projectionPoint);\n\n  if (distance > proximity) {\n    // point is too far away.\n    return false;\n  }\n\n  // Check projects onto line segment.\n  if (vec2.distance(p1, projectionPoint) > vec2.distance(p1, p2)) {\n    return false;\n  }\n\n  return true;\n};\n\nexport default pointCanProjectOnLine;\n","import type { Types } from '@cornerstonejs/core';\n\n/**\n * Calculates the area of an array of `Point2` points using the shoelace algorithm.\n *\n * The units of the area are in the same units as the points are in. E.g. if\n * the points are in canvas, then the result is in canvas pixels ^2; If they are\n * in mm, then the result is in mm^2; etc.\n */\nexport default function calculateAreaOfPoints(points: Types.Point2[]): number {\n  // Shoelace algorithm.\n  const n = points.length;\n  let area = 0.0;\n  let j = n - 1;\n\n  for (let i = 0; i < n; i++) {\n    area += (points[j][0] + points[i][0]) * (points[j][1] - points[i][1]);\n    j = i; // j is previous vertex to i\n  }\n\n  // Return absolute value of half the sum (half as summing up traingles).\n  return Math.abs(area / 2.0);\n}\n","import { Types } from '@cornerstonejs/core';\nimport { interpolatePoints } from './algorithms/bspline';\n\n/**\n * Returns a list of uniform distributed values. This list contains the max amount of values which has at least a minimum distance between two consecutive values.\n * minDistributionDistance means the min distance between two consecutive distributed values.\n * Closed interval contains the min/max values.\n *\n * Formula for reference\n * For given {x  R | x  0} and {minDis  R | minDis  0},  D(x) where D(x)  a and D(x)  b  =>\n *         |\n * D(x)  = |                  (b - a)\n *         |  round( ------------------------ * x  )   + a\n *         |                (b - a + 1)\n *         |        round( -----------  )\n *         |                 minDis\n */\nfunction getContinuousUniformDistributionValues(\n  minDistributionDistance: number,\n  closedInterval: [number, number]\n): number[] {\n  const result = [];\n  const [intervalIni, intervalEnd] = closedInterval;\n\n  const intervalSize = intervalEnd - intervalIni + 1;\n  const intensity = Math.floor(intervalSize / minDistributionDistance);\n\n  let x = 0;\n  let continuosDistributionValue =\n    Math.round(((intervalSize - 1) / (intensity - 1)) * x) + intervalIni;\n\n  while (continuosDistributionValue <= intervalEnd) {\n    result.push(continuosDistributionValue);\n    x++;\n    continuosDistributionValue =\n      Math.round(((intervalSize - 1) / (intensity - 1)) * x) + intervalIni;\n  }\n\n  return result;\n}\n\n/**\n * Interpolates a segment of points from iniIndex until endIndex.\n * The process of interpolation considers the param knotsRatioPercentage as being the percentage of points from Segment that are likely to be considered.\n * By default it uses b-spline algorithm.\n * The result total of points is equal to original points.\n */\nexport default function interpolateSegmentPoints(\n  points: (Types.Point2 | Types.Point3)[],\n  iniIndex: number,\n  endIndex: number,\n  knotsRatioPercentage: number\n): (Types.Point2 | Types.Point3)[] {\n  const segmentSize = endIndex - iniIndex + 1;\n\n  const amountOfKnots =\n    Math.floor((knotsRatioPercentage / 100) * segmentSize) ?? 1;\n  const minKnotDistance = Math.floor(segmentSize / amountOfKnots) ?? 1;\n\n  if (isNaN(segmentSize) || !segmentSize || !minKnotDistance) {\n    return points;\n  }\n\n  // segment should be at least the double of desired minKnot distance. This will ensure at there will enough knots to interpolate.\n  if (segmentSize / minKnotDistance < 2) {\n    return points;\n  }\n\n  const interpolationIniIndex = Math.max(0, iniIndex);\n  const interpolationEndIndex = Math.min(points.length - 1, endIndex);\n  const segmentPointsUnchangedBeg = points.slice(0, interpolationIniIndex);\n\n  const segmentPointsUnchangedEnd = points.slice(\n    interpolationEndIndex + 1,\n    points.length\n  );\n\n  const knotsIndexes = getContinuousUniformDistributionValues(minKnotDistance, [\n    interpolationIniIndex,\n    interpolationEndIndex,\n  ]);\n\n  const interpolatedPoints = interpolatePoints(points, knotsIndexes);\n\n  return [\n    ...segmentPointsUnchangedBeg,\n    ...interpolatedPoints,\n    ...segmentPointsUnchangedEnd,\n  ];\n}\n","import {\n  interpolateBasis as d3InterpolateBasis,\n  quantize as d3Quantize,\n} from 'd3-interpolate';\nimport { zip as d3Zip } from 'd3-array';\nimport { Types } from '@cornerstonejs/core';\n\nfunction isPoints3D(\n  points: (Types.Point2 | Types.Point3)[]\n): points is Types.Point3[] {\n  return (points as Types.Point3[])[0]?.length === 3;\n}\n\n/**\n * Returns an array of the originalPoints length containing the interpolated data.\n * It interpolates a set of points indexed by knotsIndexes.\n * That is, it DISCARDS all points except those in knotsIndexes. Then, a new set of points is created by using a b-spline on the remaining points, in order to re-create a new set of points.\n */\nexport function interpolatePoints(\n  originalPoints: (Types.Point2 | Types.Point3)[],\n  knotsIndexes: number[]\n): (Types.Point2 | Types.Point3)[] {\n  if (\n    !knotsIndexes ||\n    knotsIndexes.length === 0 ||\n    knotsIndexes.length === originalPoints.length\n  ) {\n    return originalPoints;\n  }\n\n  const n = knotsIndexes[knotsIndexes.length - 1] - knotsIndexes[0] + 1;\n  const xInterpolator = d3InterpolateBasis(\n    knotsIndexes.map((k) => originalPoints[k][0])\n  );\n  const yInterpolator = d3InterpolateBasis(\n    knotsIndexes.map((k) => originalPoints[k][1])\n  );\n\n  if (isPoints3D(originalPoints)) {\n    const zInterpolator = d3InterpolateBasis(\n      knotsIndexes.map((k) => originalPoints[k][2])\n    );\n    return <Types.Point3[]>(\n      d3Zip(\n        d3Quantize(xInterpolator, n),\n        d3Quantize(yInterpolator, n),\n        d3Quantize(zInterpolator, n)\n      )\n    );\n  } else {\n    return <Types.Point2[]>(\n      d3Zip(d3Quantize(xInterpolator, n), d3Quantize(yInterpolator, n))\n    );\n  }\n}\n","import { Types } from '@cornerstonejs/core';\nimport { point } from '../math';\nimport interpolateSegmentPoints from './interpolation/interpolateSegmentPoints';\n\nexport function shouldInterpolate(configuration: Record<any, any>): boolean {\n  return (\n    configuration?.interpolation?.interpolateOnAdd === true ||\n    configuration?.interpolation?.interpolateOnEdit === true\n  );\n}\n\n/**\n * Tells whether two points are equal by proximity or not as far as interpolation goes.\n */\nfunction isEqualByProximity(pointA, pointB) {\n  return point.distanceToPoint(pointA, pointB) < 0.001;\n}\n\n/**\n * Tells whether two points are strictly equal or not as far as interpolation goes.\n */\nfunction isEqual(pointA, pointB) {\n  return point.distanceToPoint(pointA, pointB) === 0;\n}\n\n/**\n * Finds the indexes of points list and otherPoints list that points are identical.\n */\nfunction findMatchIndexes(\n  points: Types.Point2[],\n  otherPoints: Types.Point2[]\n): [number, number] | undefined {\n  for (let i = 0; i < points.length; i++) {\n    for (let j = 0; j < otherPoints.length; j++) {\n      if (isEqual(points[i], otherPoints[j])) {\n        return [i, j];\n      }\n    }\n  }\n}\n/**\n * Returns the following index value (on circular basis) of index param on the given direction.\n */\nfunction followingIndex(\n  index: number,\n  size: number,\n  direction: number\n): number {\n  return (index + size + direction) % size;\n}\n/**\n * Array of params to be used on circular find next index.\n * The values respresent start index, indexDelimiter, list of points\n */\ntype ListParamsType = [number, number, Types.Point2[]];\n\n/**\n * Circular finding that returns the next index for two list where the criteria is met.\n *\n * It can compare two lists out of sync considering it does a circular iteration over them.\n *\n * @example\n *\n * ```\n * const pointsA = [[0, 1], [1, 3], [1, 5], [1,2]];\n * const pointsB = [[1, 2], [1, 5], [1, 3], [0,0]];\n * let firstParam = [0, 0, pointsA]\n * let secondParam = [1, 1, pointsB]\n * const criteria = (pointA, pointB) => areSamePosition(pointA, pointB)\n * const direction = 1;\n * let result = circularFindNextIndexBy(firstParam, secondParam, criteria,direction);\n * console.log(result);\n * // prints [1, 2]\n * // use this result and find again\n * firstParam = [result[0]+1, result[0], pointsA]\n * secondParam = [result[1]+1, result[1], pointsB]\n * result = circularFindNextIndexBy(firstParam, secondParam, criteria,direction);\n * * // prints [3, 0]\n *\n */\nfunction circularFindNextIndexBy(\n  listParams: ListParamsType,\n  otherListParams: ListParamsType,\n  criteria: (pointA: Types.Point2, pointB: Types.Point2) => boolean,\n  direction: number\n): [number | undefined, number | undefined] {\n  const [, indexDelimiter, points] = listParams;\n  const [, otherIndexDelimiter, otherPoints] = otherListParams;\n\n  const pointsLength = points.length;\n  const otherPointsLength = otherPoints.length;\n\n  let startIndex = listParams[0];\n  let otherStartIndex = otherListParams[0];\n\n  if (\n    !points[startIndex] ||\n    !otherPoints[otherStartIndex] ||\n    !points[indexDelimiter] ||\n    !otherPoints[otherIndexDelimiter]\n  ) {\n    return [undefined, undefined];\n  }\n\n  while (\n    startIndex !== indexDelimiter &&\n    otherStartIndex !== otherIndexDelimiter\n  ) {\n    if (criteria(otherPoints[otherStartIndex], points[startIndex])) {\n      return [startIndex, otherStartIndex];\n    }\n\n    startIndex = followingIndex(startIndex, pointsLength, direction);\n    otherStartIndex = followingIndex(\n      otherStartIndex,\n      otherPointsLength,\n      direction\n    );\n  }\n\n  return [undefined, undefined];\n}\n\n/**\n * Given two list it will find the first and last index of segment from points that diverges from previousPoints\n */\nfunction findChangedSegment(\n  points: Types.Point2[],\n  previousPoints: Types.Point2[]\n): [number, number] {\n  const [firstMatchIndex, previousFirstMatchIndex] =\n    findMatchIndexes(points, previousPoints) || [];\n\n  const toBeNotEqualCriteria = (pointA, pointB) =>\n    isEqualByProximity(pointA, pointB) === false;\n\n  const [lowDiffIndex, lowOtherDiffIndex] = circularFindNextIndexBy(\n    [\n      followingIndex(firstMatchIndex, points.length, 1),\n      firstMatchIndex,\n      points,\n    ],\n    [\n      followingIndex(previousFirstMatchIndex, previousPoints.length, 1),\n      previousFirstMatchIndex,\n      previousPoints,\n    ],\n    toBeNotEqualCriteria,\n    1\n  );\n\n  const [highIndex] = circularFindNextIndexBy(\n    [followingIndex(lowDiffIndex, points.length, -1), lowDiffIndex, points],\n    [\n      followingIndex(lowOtherDiffIndex, previousPoints.length, -1),\n      lowOtherDiffIndex,\n      previousPoints,\n    ],\n    toBeNotEqualCriteria,\n    -1\n  );\n\n  return [lowDiffIndex, highIndex];\n}\n\n/**\n * Interpolates the given list of points. In case there is a pointsOfReference the interpolation will occur only on segment disjoint of two list. I.e list of points from param points that are not on list of points from param pointsOfReference.\n */\nexport function getInterpolatedPoints(\n  configuration: Record<any, any>,\n  points: Types.Point2[],\n  pointsOfReference?: Types.Point2[]\n): Types.Point2[] {\n  const { interpolation } = configuration;\n\n  const result = points;\n\n  if (interpolation) {\n    const {\n      knotsRatioPercentageOnAdd,\n      knotsRatioPercentageOnEdit,\n      interpolateOnAdd = false,\n      interpolateOnEdit = false,\n    } = interpolation;\n\n    const knotsRatioPercentage = pointsOfReference\n      ? knotsRatioPercentageOnEdit\n      : knotsRatioPercentageOnAdd;\n    const isEnabled = pointsOfReference ? interpolateOnEdit : interpolateOnAdd;\n\n    if (isEnabled) {\n      // partial or total interpolation\n      const [changedIniIndex, changedEndIndex] = pointsOfReference\n        ? findChangedSegment(points, pointsOfReference)\n        : [0, points.length - 1];\n\n      // do not interpolate if there is no valid segment\n      if (!points[changedIniIndex] || !points[changedEndIndex]) {\n        return points;\n      }\n\n      return <Types.Point2[]>(\n        interpolateSegmentPoints(\n          points,\n          changedIniIndex,\n          changedEndIndex,\n          knotsRatioPercentage\n        )\n      );\n    }\n  }\n\n  return result;\n}\n","import type { Types } from '@cornerstonejs/core';\nimport { PlanarFreehandROIAnnotation } from '../../../types/ToolSpecificAnnotationTypes';\nimport { vec2 } from 'gl-matrix';\n\n/**\n * Finds the length of the longest line from the midpoint of the line\n * that joins the start and end of the open contour, to the surface of the\n * open contour.\n */\nexport default function findOpenUShapedContourVectorToPeak(\n  canvasPoints: Types.Point2[],\n  viewport: Types.IStackViewport | Types.IVolumeViewport\n): Types.Point3[] {\n  // Find chord from first to last point.\n  const first = canvasPoints[0];\n  const last = canvasPoints[canvasPoints.length - 1];\n\n  const firstToLastUnitVector = vec2.create();\n\n  vec2.set(firstToLastUnitVector, last[0] - first[0], last[1] - first[1]);\n  vec2.normalize(firstToLastUnitVector, firstToLastUnitVector);\n\n  // Get the two possible normal vector to this vector\n  // Note: Use the identity that the perpendicular line must have a gradient of\n  // 1 / gradient of the line.\n\n  const normalVector1 = vec2.create();\n  const normalVector2 = vec2.create();\n\n  vec2.set(normalVector1, -firstToLastUnitVector[1], firstToLastUnitVector[0]);\n  vec2.set(normalVector2, firstToLastUnitVector[1], -firstToLastUnitVector[0]);\n\n  // Find the center of the chord.\n  const centerOfFirstToLast: Types.Point2 = [\n    (first[0] + last[0]) / 2,\n    (first[1] + last[1]) / 2,\n  ];\n\n  // Get furthest point.\n\n  const furthest = {\n    dist: 0,\n    index: null,\n  };\n\n  for (let i = 0; i < canvasPoints.length; i++) {\n    const canvasPoint = canvasPoints[i];\n\n    const distance = vec2.dist(canvasPoint, <vec2>centerOfFirstToLast);\n\n    if (distance > furthest.dist) {\n      furthest.dist = distance;\n      furthest.index = i;\n    }\n  }\n\n  const toFurthest: [Types.Point2, Types.Point2] = [\n    canvasPoints[furthest.index],\n    centerOfFirstToLast,\n  ];\n  const toFurthestWorld = toFurthest.map(viewport.canvasToWorld);\n\n  return toFurthestWorld;\n}\n\nexport function findOpenUShapedContourVectorToPeakOnRender(\n  enabledElement: Types.IEnabledElement,\n  annotation: PlanarFreehandROIAnnotation\n): Types.Point3[] {\n  const { viewport } = enabledElement;\n  const canvasPoints = annotation.data.polyline.map(viewport.worldToCanvas);\n\n  return findOpenUShapedContourVectorToPeak(canvasPoints, viewport);\n}\n","import { getEnabledElement } from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\nimport {\n  resetElementCursor,\n  hideElementCursor,\n} from '../../../cursors/elementCursor';\nimport { Events } from '../../../enums';\nimport { EventTypes } from '../../../types';\nimport { state } from '../../../store';\nimport { vec3 } from 'gl-matrix';\nimport {\n  shouldInterpolate,\n  getInterpolatedPoints,\n} from '../../../utilities/planarFreehandROITool/interpolatePoints';\nimport triggerAnnotationRenderForViewportIds from '../../../utilities/triggerAnnotationRenderForViewportIds';\nimport { PlanarFreehandROIAnnotation } from '../../../types/ToolSpecificAnnotationTypes';\nimport findOpenUShapedContourVectorToPeak from './findOpenUShapedContourVectorToPeak';\nimport { polyline } from '../../../utilities/math';\nimport { removeAnnotation } from '../../../stateManagement/annotation/annotationState';\n\nconst {\n  addCanvasPointsToArray,\n  pointsAreWithinCloseContourProximity,\n  getFirstIntersectionWithPolyline,\n  getSubPixelSpacingAndXYDirections,\n} = polyline;\n\n/**\n * Activates the contour drawing event loop.\n */\nfunction activateDraw(\n  evt: EventTypes.InteractionEventType,\n  annotation: PlanarFreehandROIAnnotation,\n  viewportIdsToRender: string[]\n): void {\n  this.isDrawing = true;\n\n  const eventDetail = evt.detail;\n  const { currentPoints, element } = eventDetail;\n  const canvasPos = currentPoints.canvas;\n  const enabledElement = getEnabledElement(element);\n  const { viewport } = enabledElement;\n\n  const { spacing, xDir, yDir } = getSubPixelSpacingAndXYDirections(\n    viewport,\n    this.configuration.subPixelResolution\n  );\n\n  this.drawData = {\n    canvasPoints: [canvasPos],\n    polylineIndex: 0,\n  };\n\n  this.commonData = {\n    annotation,\n    viewportIdsToRender,\n    spacing,\n    xDir,\n    yDir,\n    movingTextBox: false,\n  };\n\n  state.isInteractingWithTool = true;\n\n  element.addEventListener(Events.MOUSE_UP, this.mouseUpDrawCallback);\n  element.addEventListener(Events.MOUSE_DRAG, this.mouseDragDrawCallback);\n  element.addEventListener(Events.MOUSE_CLICK, this.mouseUpDrawCallback);\n  element.addEventListener(Events.TOUCH_END, this.mouseUpDrawCallback);\n  element.addEventListener(Events.TOUCH_DRAG, this.mouseDragDrawCallback);\n  element.addEventListener(Events.TOUCH_TAP, this.mouseUpDrawCallback);\n\n  hideElementCursor(element);\n}\n/**\n * Dectivates and cleans up the contour drawing event loop.\n */\nfunction deactivateDraw(element: HTMLDivElement): void {\n  state.isInteractingWithTool = false;\n\n  element.removeEventListener(Events.MOUSE_UP, this.mouseUpDrawCallback);\n  element.removeEventListener(Events.MOUSE_DRAG, this.mouseDragDrawCallback);\n  element.removeEventListener(Events.MOUSE_CLICK, this.mouseUpDrawCallback);\n  element.removeEventListener(Events.TOUCH_END, this.mouseUpDrawCallback);\n  element.removeEventListener(Events.TOUCH_DRAG, this.mouseDragDrawCallback);\n  element.removeEventListener(Events.TOUCH_TAP, this.mouseUpDrawCallback);\n\n  resetElementCursor(element);\n}\n\n/**\n * Adds points to a set of preview canvas points of the contour being created.\n * Checks if crossing of lines means early completion and editing needs to be started.\n */\nfunction mouseDragDrawCallback(evt: EventTypes.InteractionEventType): void {\n  const eventDetail = evt.detail;\n  const { currentPoints, element } = eventDetail;\n  const worldPos = currentPoints.world;\n  const canvasPos = currentPoints.canvas;\n  const enabledElement = getEnabledElement(element);\n  const { renderingEngine, viewport } = enabledElement;\n\n  const {\n    annotation,\n    viewportIdsToRender,\n    xDir,\n    yDir,\n    spacing,\n    movingTextBox,\n  } = this.commonData;\n  const { polylineIndex, canvasPoints } = this.drawData;\n\n  const lastCanvasPoint = canvasPoints[canvasPoints.length - 1];\n  const lastWorldPoint = viewport.canvasToWorld(lastCanvasPoint);\n\n  const worldPosDiff = vec3.create();\n\n  vec3.subtract(worldPosDiff, worldPos, lastWorldPoint);\n\n  const xDist = Math.abs(vec3.dot(worldPosDiff, xDir));\n  const yDist = Math.abs(vec3.dot(worldPosDiff, yDir));\n\n  // Check that we have moved at least one voxel in each direction.\n  if (xDist <= spacing[0] && yDist <= spacing[1]) {\n    // Haven't changed world point enough, don't render\n    return;\n  }\n\n  if (movingTextBox) {\n    this.isDrawing = false;\n\n    // Drag mode - Move the text boxes world position\n    const { deltaPoints } = eventDetail as EventTypes.MouseDragEventDetail;\n    const worldPosDelta = deltaPoints.world;\n\n    const { textBox } = annotation.data.handles;\n    const { worldPosition } = textBox;\n\n    worldPosition[0] += worldPosDelta[0];\n    worldPosition[1] += worldPosDelta[1];\n    worldPosition[2] += worldPosDelta[2];\n\n    textBox.hasMoved = true;\n  } else {\n    const crossingIndex = this.findCrossingIndexDuringCreate(evt);\n\n    if (crossingIndex !== undefined) {\n      // If we have crossed our drawing line, create a closed contour and then\n      // start an edit.\n      this.applyCreateOnCross(evt, crossingIndex);\n    } else {\n      const numPointsAdded = addCanvasPointsToArray(\n        element,\n        canvasPoints,\n        canvasPos,\n        this.commonData\n      );\n\n      this.drawData.polylineIndex = polylineIndex + numPointsAdded;\n    }\n  }\n\n  triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n}\n\n/**\n * Completes the contour on mouse up. If the `allowOpenContours` configuration\n * option is `true`, checks if we should create an open or closed contour.\n * If the `allowOpenContours` configuration option is `false`, always creates a\n * closed contour.\n */\nfunction mouseUpDrawCallback(evt: EventTypes.InteractionEventType): void {\n  const { allowOpenContours } = this.configuration;\n  const { canvasPoints } = this.drawData;\n  const firstPoint = canvasPoints[0];\n  const lastPoint = canvasPoints[canvasPoints.length - 1];\n  const eventDetail = evt.detail;\n  const { element } = eventDetail;\n\n  if (\n    allowOpenContours &&\n    !pointsAreWithinCloseContourProximity(\n      firstPoint,\n      lastPoint,\n      this.configuration.closeContourProximity\n    )\n  ) {\n    this.completeDrawOpenContour(element);\n  } else {\n    this.completeDrawClosedContour(element);\n  }\n}\n\n/**\n * Completes the contour being drawn, creating a closed contour annotation. It will return true if contour is completed or false in case contour drawing is halted.\n */\nfunction completeDrawClosedContour(element: HTMLDivElement): boolean {\n  this.removeCrossedLinesOnCompleteDraw();\n  const { canvasPoints } = this.drawData;\n\n  // check and halt if necessary the drawing process, last chance to complete drawing and fire events.\n  if (this.haltDrawing(element, canvasPoints)) {\n    return false;\n  }\n\n  const { annotation, viewportIdsToRender } = this.commonData;\n  const enabledElement = getEnabledElement(element);\n  const { viewport, renderingEngine } = enabledElement;\n\n  // Convert annotation to world coordinates\n  addCanvasPointsToArray(\n    element,\n    canvasPoints,\n    canvasPoints[0],\n    this.commonData\n  );\n  // Remove last point which will be a duplicate now.\n  canvasPoints.pop();\n\n  const updatedPoints = shouldInterpolate(this.configuration)\n    ? getInterpolatedPoints(this.configuration, canvasPoints)\n    : canvasPoints;\n\n  // Note: -> This is pretty expensive and may not scale well with hundreds of\n  // contours. A future optimisation if we use this for segmentation is to re-do\n  // this rendering with the GPU rather than SVG.\n  const worldPoints = updatedPoints.map((canvasPoint) =>\n    viewport.canvasToWorld(canvasPoint)\n  );\n\n  annotation.data.polyline = worldPoints;\n  annotation.data.isOpenContour = false;\n  const { textBox } = annotation.data.handles;\n\n  if (!textBox.hasMoved) {\n    this.triggerAnnotationCompleted(annotation);\n  }\n\n  this.isDrawing = false;\n  this.drawData = undefined;\n  this.commonData = undefined;\n\n  triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n  this.deactivateDraw(element);\n\n  return true;\n}\n\n/**\n * If lines are crossed during the draw loop, remove the points drawn over the\n * crossing.\n */\nfunction removeCrossedLinesOnCompleteDraw(): void {\n  const { canvasPoints } = this.drawData;\n  const numPoints = canvasPoints.length;\n\n  const endToStart = [canvasPoints[0], canvasPoints[numPoints - 1]];\n  const canvasPointsMinusEnds = canvasPoints.slice(0, -1).slice(1);\n\n  const lineSegment = getFirstIntersectionWithPolyline(\n    canvasPointsMinusEnds,\n    endToStart[0],\n    endToStart[1],\n    false\n  );\n\n  if (lineSegment) {\n    const indexToRemoveUpTo = lineSegment[1];\n\n    this.drawData.canvasPoints = canvasPoints.splice(0, indexToRemoveUpTo);\n  }\n}\n\n/**\n * Completes the contour being drawn, creating an open contour annotation. It will return true if contour is completed or false in case contour drawing is halted.\n */\nfunction completeDrawOpenContour(element: HTMLDivElement): boolean {\n  const { canvasPoints } = this.drawData;\n\n  // check and halt if necessary the drawing process, last chance to complete drawing and fire events.\n  if (this.haltDrawing(element, canvasPoints)) {\n    return false;\n  }\n\n  const { annotation, viewportIdsToRender } = this.commonData;\n  const enabledElement = getEnabledElement(element);\n  const { viewport, renderingEngine } = enabledElement;\n\n  const updatedPoints = shouldInterpolate(this.configuration)\n    ? getInterpolatedPoints(this.configuration, canvasPoints)\n    : canvasPoints;\n\n  // Note: -> This is pretty expensive and may not scale well with hundreds of\n  // contours. A future optimisation if we use this for segmentation is to re-do\n  // this rendering with the GPU rather than SVG.\n  const worldPoints = updatedPoints.map((canvasPoint) =>\n    viewport.canvasToWorld(canvasPoint)\n  );\n\n  annotation.data.polyline = worldPoints;\n  annotation.data.isOpenContour = true;\n  const { textBox } = annotation.data.handles;\n\n  // Add the first and last points to the list of handles. These means they\n  // will render handles on mouse hover.\n  annotation.data.handles.points = [\n    worldPoints[0],\n    worldPoints[worldPoints.length - 1],\n  ];\n\n  // If the annotation is an open U-shaped annotation, find the annotation vector.\n  if (annotation.data.isOpenUShapeContour) {\n    annotation.data.openUShapeContourVectorToPeak =\n      findOpenUShapedContourVectorToPeak(canvasPoints, viewport);\n  }\n\n  if (!textBox.hasMoved) {\n    this.triggerAnnotationCompleted(annotation);\n  }\n\n  this.isDrawing = false;\n  this.drawData = undefined;\n  this.commonData = undefined;\n\n  triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n  this.deactivateDraw(element);\n\n  return true;\n}\n\n/**\n * Searches for a crossing of the contour during create. If found, returns the\n * index of the point just before the lines cross.\n */\nfunction findCrossingIndexDuringCreate(\n  evt: EventTypes.InteractionEventType\n): number | undefined {\n  // Note as we super sample the added points, we need to check the whole last mouse move, not the points\n  const eventDetail = evt.detail;\n  const { currentPoints, lastPoints } = eventDetail;\n  const canvasPos = currentPoints.canvas;\n  const lastCanvasPoint = lastPoints.canvas;\n\n  const { canvasPoints } = this.drawData;\n  const pointsLessLastOne = canvasPoints.slice(0, -1);\n\n  const lineSegment = getFirstIntersectionWithPolyline(\n    pointsLessLastOne,\n    canvasPos,\n    lastCanvasPoint,\n    false\n  );\n\n  if (lineSegment === undefined) {\n    return;\n  }\n\n  const crossingIndex = lineSegment[0];\n\n  return crossingIndex;\n}\n\n/**\n * On crossing of the draw line, create a closed contour, and then start an edit\n * since this occurs during a mouse drag.\n */\nfunction applyCreateOnCross(\n  evt: EventTypes.InteractionEventType,\n  crossingIndex: number\n): void {\n  const eventDetail = evt.detail;\n  const { element } = eventDetail;\n  const { canvasPoints } = this.drawData;\n  const { annotation, viewportIdsToRender } = this.commonData;\n\n  // Add points between the end point and crossing point\n  addCanvasPointsToArray(\n    element,\n    canvasPoints,\n    canvasPoints[crossingIndex],\n    this.commonData\n  );\n  // Remove last point which will be a duplicate now.\n  canvasPoints.pop();\n\n  // Remove points up to just before the crossing index\n  for (let i = 0; i < crossingIndex; i++) {\n    canvasPoints.shift();\n  }\n\n  if (this.completeDrawClosedContour(element)) {\n    // pos complete operation\n    this.activateClosedContourEdit(evt, annotation, viewportIdsToRender);\n  }\n}\n\n/**\n * Completes the contour on a cancel method call during the draw loop.\n */\nfunction cancelDrawing(element: HTMLElement) {\n  const { allowOpenContours } = this.configuration;\n  const { canvasPoints } = this.drawData;\n  const firstPoint = canvasPoints[0];\n  const lastPoint = canvasPoints[canvasPoints.length - 1];\n\n  if (\n    allowOpenContours &&\n    !pointsAreWithinCloseContourProximity(\n      firstPoint,\n      lastPoint,\n      this.configuration.closeContourProximity\n    )\n  ) {\n    this.completeDrawOpenContour(element);\n  } else {\n    this.completeDrawClosedContour(element);\n  }\n}\n\n/**\n * Tell whether a drawing should be halted or not. It will be true when canvas points is less than the minimum required.\n */\nfunction shouldHaltDrawing(\n  canvasPoints: any,\n  subPixelResolution: number\n): boolean {\n  const minPoints = Math.max(\n    /**\n     * The number of points to span 3 voxels in length, this is a realistically\n     * smallest open contour one could reasonably define (2 voxels should probably be a line).\n     */\n    subPixelResolution * 3,\n    /**\n     * Minimum 3 points, there are other annotations for one point (probe)\n     * or 2 points (line), so this comes only from a mistake in practice.\n     */\n    3\n  );\n  return canvasPoints.length < minPoints;\n}\n\n/**\n * Check and halt a drawing for a given event. It returns true in case drawing is halted, otherswise false.\n */\nfunction haltDrawing(element: HTMLDivElement, canvasPoints: any): boolean {\n  const { subPixelResolution } = this.configuration;\n\n  if (shouldHaltDrawing(canvasPoints, subPixelResolution)) {\n    // Remove annotation instead of completing it.\n    const { annotation, viewportIdsToRender } = this.commonData;\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    removeAnnotation(annotation.annotationUID);\n\n    this.isDrawing = false;\n    this.drawData = undefined;\n    this.commonData = undefined;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    this.deactivateDraw(element);\n\n    return true;\n  }\n\n  return false;\n}\n\n/**\n * Registers the contour drawing loop to the tool instance.\n */\nfunction registerDrawLoop(toolInstance): void {\n  toolInstance.activateDraw = activateDraw.bind(toolInstance);\n  toolInstance.deactivateDraw = deactivateDraw.bind(toolInstance);\n\n  toolInstance.applyCreateOnCross = applyCreateOnCross.bind(toolInstance);\n  toolInstance.findCrossingIndexDuringCreate =\n    findCrossingIndexDuringCreate.bind(toolInstance);\n  toolInstance.completeDrawOpenContour =\n    completeDrawOpenContour.bind(toolInstance);\n  toolInstance.removeCrossedLinesOnCompleteDraw =\n    removeCrossedLinesOnCompleteDraw.bind(toolInstance);\n  toolInstance.mouseDragDrawCallback = mouseDragDrawCallback.bind(toolInstance);\n  toolInstance.mouseUpDrawCallback = mouseUpDrawCallback.bind(toolInstance);\n  toolInstance.completeDrawClosedContour =\n    completeDrawClosedContour.bind(toolInstance);\n  toolInstance.cancelDrawing = cancelDrawing.bind(toolInstance);\n  toolInstance.haltDrawing = haltDrawing.bind(toolInstance);\n}\n\nexport default registerDrawLoop;\n","import { Types } from '@cornerstonejs/core';\nimport { vec2 } from 'gl-matrix';\nimport { polyline } from '../../../utilities/math';\nimport { EventTypes } from '../../../types';\n\nconst { addCanvasPointsToArray, getFirstIntersectionWithPolyline } = polyline;\n\n/**\n * Check if the `editCanvasPoints` have crossed the `prevCanvasPoints` during\n * an edit.\n *\n * @privateRemarks The following tricks are required to make the UX smooth and\n * the editing not very picky on exactly where you click:\n * - If we don't cross after 2 points, but projecting the line backwards the\n * proximity distance means we cross, extend the line back.\n * - If we travel the full proximity in canvas points but don't cross a line, we\n * are likely drawing along the line, which is intuitive to the user. At this point\n * snap the start of the edit to the closest place on the `prevCanvasPoints`,\n * so that the edit can be executed in-line.\n */\nfunction checkForFirstCrossing(\n  evt: EventTypes.InteractionEventType,\n  isClosedContour: boolean\n): void {\n  const eventDetail = evt.detail;\n  const { element, currentPoints, lastPoints } = eventDetail;\n  const canvasPos = currentPoints.canvas;\n  const lastCanvasPoint = lastPoints.canvas;\n  const { editCanvasPoints, prevCanvasPoints } = this.editData;\n\n  const crossedLineSegment = getFirstIntersectionWithPolyline(\n    prevCanvasPoints,\n    canvasPos,\n    lastCanvasPoint,\n    isClosedContour\n  );\n\n  if (crossedLineSegment) {\n    this.editData.startCrossingIndex = crossedLineSegment[0];\n\n    // On the first crossing, remove the first lines prior to the crossing\n    this.removePointsUpUntilFirstCrossing(isClosedContour);\n    // prevent continue if there are not the minimum of points for this op.\n  } else if (prevCanvasPoints.length >= 2) {\n    if (\n      editCanvasPoints.length >\n      this.configuration.checkCanvasEditFallbackProximity\n    ) {\n      // At this point, likely we are drawing along the line, we are past the proximity for grabbing.\n      // Search for nearest line segment to the start of the edit.\n      // Set the crossing index to the lower index of the segment.\n\n      const firstEditCanvasPoint = editCanvasPoints[0];\n\n      const distanceIndexPairs = [];\n\n      for (let i = 0; i < prevCanvasPoints.length; i++) {\n        const prevCanvasPoint = prevCanvasPoints[i];\n        const distance = vec2.distance(prevCanvasPoint, firstEditCanvasPoint);\n\n        distanceIndexPairs.push({ distance, index: i });\n      }\n\n      distanceIndexPairs.sort((a, b) => a.distance - b.distance);\n\n      const twoClosestDistanceIndexPairs = [\n        distanceIndexPairs[0],\n        distanceIndexPairs[1],\n      ];\n\n      const lowestIndex = Math.min(\n        twoClosestDistanceIndexPairs[0].index,\n        twoClosestDistanceIndexPairs[1].index\n      );\n\n      this.editData.startCrossingIndex = lowestIndex;\n    } else {\n      // Check if extending a line back 6 (Proximity) canvas pixels would cross a line.\n\n      // Extend point back 6 canvas pixels from first point.\n      const dir = vec2.create();\n\n      vec2.subtract(dir, editCanvasPoints[1], editCanvasPoints[0]);\n      vec2.normalize(dir, dir);\n\n      const proximity = 6;\n\n      const extendedPoint: Types.Point2 = [\n        editCanvasPoints[0][0] - dir[0] * proximity,\n        editCanvasPoints[0][1] - dir[1] * proximity,\n      ];\n\n      const crossedLineSegmentFromExtendedPoint =\n        getFirstIntersectionWithPolyline(\n          prevCanvasPoints,\n          extendedPoint,\n          editCanvasPoints[0],\n          isClosedContour\n        );\n\n      if (crossedLineSegmentFromExtendedPoint) {\n        // Add points.\n        const pointsToPrepend = [extendedPoint];\n\n        addCanvasPointsToArray(\n          element,\n          pointsToPrepend,\n          editCanvasPoints[0],\n          this.commonData\n        );\n\n        editCanvasPoints.unshift(...pointsToPrepend);\n\n        this.removePointsUpUntilFirstCrossing(isClosedContour);\n\n        this.editData.editIndex = editCanvasPoints.length - 1;\n        this.editData.startCrossingIndex =\n          crossedLineSegmentFromExtendedPoint[0];\n      }\n    }\n  }\n}\n\n/**\n * Removes the points from the `editCanvasPoints` up until the first crossing of\n * the `prevCanvasPoints`. This is so we can just insert this line segment\n * into the contour.\n */\nfunction removePointsUpUntilFirstCrossing(isClosedContour: boolean): void {\n  const { editCanvasPoints, prevCanvasPoints } = this.editData;\n  let numPointsToRemove = 0;\n\n  for (let i = 0; i < editCanvasPoints.length - 1; i++) {\n    const firstLine = [editCanvasPoints[i], editCanvasPoints[i + 1]];\n\n    const didCrossLine = !!getFirstIntersectionWithPolyline(\n      prevCanvasPoints,\n      firstLine[0],\n      firstLine[1],\n      isClosedContour\n    );\n\n    // Remove last element\n    numPointsToRemove++;\n\n    if (didCrossLine) {\n      break;\n    }\n  }\n\n  // Remove the points\n  editCanvasPoints.splice(0, numPointsToRemove);\n\n  this.editData.editIndex = editCanvasPoints.length - 1;\n}\n\n/**\n * Returns `true` if the `editCanvasPoints` crosses the `prevCanvasPoints` a\n * second time.\n */\nfunction checkForSecondCrossing(\n  evt: EventTypes.InteractionEventType,\n  isClosedContour: boolean\n): boolean {\n  const eventDetail = evt.detail;\n  const { currentPoints, lastPoints } = eventDetail;\n  const canvasPos = currentPoints.canvas;\n  const lastCanvasPoint = lastPoints.canvas;\n  const { prevCanvasPoints } = this.editData;\n\n  // Note this method is looking for the first corssing found of\n  // *the lines given* to it. The parameters given to it are specified to search\n  // for the second crossing of the prevCanvasPoints, by checking if the last\n  // mouse drag crossed these. This class method is only called if the edit loop\n  // has already has a crossing earlier in the edit.\n  const crossedLineSegment = getFirstIntersectionWithPolyline(\n    prevCanvasPoints,\n    canvasPos,\n    lastCanvasPoint,\n    isClosedContour\n  );\n\n  if (!crossedLineSegment) {\n    return false;\n  }\n\n  return true;\n}\n\n/**\n * Removes the points from the `editCanvasPoints` after the second crossing of\n * the `prevCanvasPoints`. This is so we can just insert this line segment\n * into the contour.\n */\nfunction removePointsAfterSecondCrossing(isClosedContour: boolean): void {\n  const { prevCanvasPoints, editCanvasPoints } = this.editData;\n\n  // Remove points after the crossing\n  for (let i = editCanvasPoints.length - 1; i > 0; i--) {\n    const lastLine = [editCanvasPoints[i], editCanvasPoints[i - 1]];\n\n    const didCrossLine = !!getFirstIntersectionWithPolyline(\n      prevCanvasPoints,\n      lastLine[0],\n      lastLine[1],\n      isClosedContour\n    );\n\n    // Remove last element\n    editCanvasPoints.pop();\n\n    if (didCrossLine) {\n      break;\n    }\n  }\n}\n\n/**\n * During an edit, finds the index on the `prevCanvasPoints` that the\n * `editCanvasPoints` should snap to to create one continuous contour.\n *\n * Returns the index, but returns -1 if there is no index on the\n * `prevCanvasPoints` that can be snapped to with causing a crossing of the\n * `editCanvasPoints`.\n */\nfunction findSnapIndex(): number {\n  const { editCanvasPoints, prevCanvasPoints, startCrossingIndex } =\n    this.editData;\n\n  if (\n    startCrossingIndex === undefined // Haven't crossed line yet\n  ) {\n    return;\n  }\n\n  const lastEditCanvasPoint = editCanvasPoints[editCanvasPoints.length - 1];\n\n  const distanceIndexPairs = [];\n\n  for (let i = 0; i < prevCanvasPoints.length; i++) {\n    const prevCanvasPoint = prevCanvasPoints[i];\n    const distance = vec2.distance(prevCanvasPoint, lastEditCanvasPoint);\n\n    distanceIndexPairs.push({ distance, index: i });\n  }\n\n  distanceIndexPairs.sort((a, b) => a.distance - b.distance);\n\n  // Search through from shortest distance and check which snap line doesn't\n  // Cross the edit line, in most cases the snap index will just be the first one.\n  const editCanvasPointsLessLastOne = editCanvasPoints.slice(0, -1);\n\n  for (let i = 0; i < distanceIndexPairs.length; i++) {\n    const { index } = distanceIndexPairs[i];\n    const snapCanvasPosition = prevCanvasPoints[index];\n    const lastEditCanvasPoint = editCanvasPoints[editCanvasPoints.length - 1];\n\n    const crossedLineSegment = getFirstIntersectionWithPolyline(\n      editCanvasPointsLessLastOne,\n      snapCanvasPosition,\n      lastEditCanvasPoint,\n      false // The edit line is not a closed contour\n    );\n\n    if (!crossedLineSegment) {\n      return index;\n    }\n  }\n\n  // If all of the lines caused a crossing, this means we should start a new edit.\n  // Use -1 to signify this.\n  return -1;\n}\n\n/**\n * Checks if the `editCanvasPoints` cross themselves. If they do, remove the\n * region after the cross index, these removes isolated \"island\" loops that the\n * user can draw which make closed contours no longer simple polygons, or open\n * contours twisted.\n */\nfunction checkAndRemoveCrossesOnEditLine(\n  evt: EventTypes.InteractionEventType\n): number | undefined {\n  const eventDetail = evt.detail;\n  const { currentPoints, lastPoints } = eventDetail;\n  const canvasPos = currentPoints.canvas;\n  const lastCanvasPoint = lastPoints.canvas;\n\n  const { editCanvasPoints } = this.editData;\n\n  const editCanvasPointsLessLastOne = editCanvasPoints.slice(0, -2);\n\n  const crossedLineSegment = getFirstIntersectionWithPolyline(\n    editCanvasPointsLessLastOne,\n    canvasPos,\n    lastCanvasPoint,\n    false\n  );\n\n  if (!crossedLineSegment) {\n    return;\n  }\n\n  // We have found a crossing, remove points after the crossing, cutting off\n  // the \"island\" loop drawn.\n\n  const editIndexCrossed = crossedLineSegment[0];\n  const numPointsToRemove = editCanvasPoints.length - editIndexCrossed;\n\n  for (let i = 0; i < numPointsToRemove; i++) {\n    editCanvasPoints.pop();\n  }\n}\n\n/**\n * Registers the contour drawing loop to the tool instance.\n */\nfunction registerEditLoopCommon(toolInstance) {\n  toolInstance.checkForFirstCrossing = checkForFirstCrossing.bind(toolInstance);\n  toolInstance.removePointsUpUntilFirstCrossing =\n    removePointsUpUntilFirstCrossing.bind(toolInstance);\n  toolInstance.checkForSecondCrossing =\n    checkForSecondCrossing.bind(toolInstance);\n  toolInstance.findSnapIndex = findSnapIndex.bind(toolInstance);\n  toolInstance.removePointsAfterSecondCrossing =\n    removePointsAfterSecondCrossing.bind(toolInstance);\n  toolInstance.checkAndRemoveCrossesOnEditLine =\n    checkAndRemoveCrossesOnEditLine.bind(toolInstance);\n}\n\nexport default registerEditLoopCommon;\n","import { getEnabledElement } from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\nimport { state } from '../../../store';\nimport { Events } from '../../../enums';\nimport {\n  resetElementCursor,\n  hideElementCursor,\n} from '../../../cursors/elementCursor';\nimport { EventTypes } from '../../../types';\nimport { polyline } from '../../../utilities/math';\nimport { vec3, vec2 } from 'gl-matrix';\nimport { PlanarFreehandROIAnnotation } from '../../../types/ToolSpecificAnnotationTypes';\nimport {\n  getInterpolatedPoints,\n  shouldInterpolate,\n} from '../../../utilities/planarFreehandROITool/interpolatePoints';\nimport triggerAnnotationRenderForViewportIds from '../../../utilities/triggerAnnotationRenderForViewportIds';\n\nconst {\n  getSubPixelSpacingAndXYDirections,\n  addCanvasPointsToArray,\n  calculateAreaOfPoints,\n} = polyline;\n\n/**\n * Activates the closed contour edit event loop.\n */\nfunction activateClosedContourEdit(\n  evt: EventTypes.InteractionEventType,\n  annotation: PlanarFreehandROIAnnotation,\n  viewportIdsToRender: string[]\n): void {\n  this.isEditingClosed = true;\n\n  const eventDetail = evt.detail;\n  const { currentPoints, element } = eventDetail;\n  const canvasPos = currentPoints.canvas;\n  const enabledElement = getEnabledElement(element);\n  const { viewport } = enabledElement;\n\n  const prevCanvasPoints = annotation.data.polyline.map(viewport.worldToCanvas);\n\n  const { spacing, xDir, yDir } = getSubPixelSpacingAndXYDirections(\n    viewport,\n    this.configuration.subPixelResolution\n  );\n\n  this.editData = {\n    prevCanvasPoints,\n    editCanvasPoints: [canvasPos],\n    startCrossingIndex: undefined,\n    editIndex: 0,\n  };\n\n  this.commonData = {\n    annotation,\n    viewportIdsToRender,\n    spacing,\n    xDir,\n    yDir,\n    movingTextBox: false,\n  };\n\n  state.isInteractingWithTool = true;\n\n  element.addEventListener(\n    Events.MOUSE_UP,\n    this.mouseUpClosedContourEditCallback\n  );\n  element.addEventListener(\n    Events.MOUSE_DRAG,\n    this.mouseDragClosedContourEditCallback\n  );\n  element.addEventListener(\n    Events.MOUSE_CLICK,\n    this.mouseUpClosedContourEditCallback\n  );\n\n  element.addEventListener(\n    Events.TOUCH_END,\n    this.mouseUpClosedContourEditCallback\n  );\n  element.addEventListener(\n    Events.TOUCH_DRAG,\n    this.mouseDragClosedContourEditCallback\n  );\n  element.addEventListener(\n    Events.TOUCH_TAP,\n    this.mouseUpClosedContourEditCallback\n  );\n\n  hideElementCursor(element);\n}\n\n/**\n * Dectivates and cleans up the closed contour edit event loop.\n */\nfunction deactivateClosedContourEdit(element: HTMLDivElement): void {\n  state.isInteractingWithTool = false;\n\n  element.removeEventListener(\n    Events.MOUSE_UP,\n    this.mouseUpClosedContourEditCallback\n  );\n  element.removeEventListener(\n    Events.MOUSE_DRAG,\n    this.mouseDragClosedContourEditCallback\n  );\n  element.removeEventListener(\n    Events.MOUSE_CLICK,\n    this.mouseUpClosedContourEditCallback\n  );\n\n  element.removeEventListener(\n    Events.TOUCH_END,\n    this.mouseUpClosedContourEditCallback\n  );\n  element.removeEventListener(\n    Events.TOUCH_DRAG,\n    this.mouseDragClosedContourEditCallback\n  );\n  element.removeEventListener(\n    Events.TOUCH_TAP,\n    this.mouseUpClosedContourEditCallback\n  );\n\n  resetElementCursor(element);\n}\n\n/**\n * Adds points to the edit line and calculates the preview of the edit to render.\n * Checks if an edit needs to be completed by crossing of lines, or by editing in\n * a way that requires a new edit to keep the contour a simple polygon.\n */\nfunction mouseDragClosedContourEditCallback(\n  evt: EventTypes.InteractionEventType\n): Types.Point2[] {\n  const eventDetail = evt.detail;\n  const { currentPoints, element } = eventDetail;\n  const worldPos = currentPoints.world;\n  const canvasPos = currentPoints.canvas;\n  const enabledElement = getEnabledElement(element);\n  const { renderingEngine, viewport } = enabledElement;\n\n  const { viewportIdsToRender, xDir, yDir, spacing } = this.commonData;\n  const { editIndex, editCanvasPoints, startCrossingIndex } = this.editData;\n\n  const lastCanvasPoint = editCanvasPoints[editCanvasPoints.length - 1];\n  const lastWorldPoint = viewport.canvasToWorld(lastCanvasPoint);\n\n  const worldPosDiff = vec3.create();\n\n  vec3.subtract(worldPosDiff, worldPos, lastWorldPoint);\n\n  const xDist = Math.abs(vec3.dot(worldPosDiff, xDir));\n  const yDist = Math.abs(vec3.dot(worldPosDiff, yDir));\n\n  // Check that we have moved at least one voxel in each direction.\n  if (xDist <= spacing[0] && yDist <= spacing[1]) {\n    // Haven't changed world point enough, don't render\n    return;\n  }\n\n  if (startCrossingIndex !== undefined) {\n    // Edge case: If the edit line itself crosses, remove part of that edit line so we don't\n    // Get isolated regions.\n    this.checkAndRemoveCrossesOnEditLine(evt);\n  }\n\n  const numPointsAdded = addCanvasPointsToArray(\n    element,\n    editCanvasPoints,\n    canvasPos,\n    this.commonData\n  );\n\n  const currentEditIndex = editIndex + numPointsAdded;\n\n  this.editData.editIndex = currentEditIndex;\n\n  if (startCrossingIndex === undefined && editCanvasPoints.length > 1) {\n    // If we haven't found the index of the first crossing yet,\n    // see if we can find it.\n    this.checkForFirstCrossing(evt, true);\n  }\n\n  this.editData.snapIndex = this.findSnapIndex();\n\n  if (this.editData.snapIndex === -1) {\n    // No point on the prevCanvasPoints for the editCanvasPoints line to\n    // snap to. Apply edit, and start a new edit as we've gone back on ourselves.\n    this.finishEditAndStartNewEdit(evt);\n    return;\n  }\n\n  this.editData.fusedCanvasPoints = this.fuseEditPointsWithClosedContour(evt);\n\n  if (\n    startCrossingIndex !== undefined &&\n    this.checkForSecondCrossing(evt, true)\n  ) {\n    // Crossed a second time, apply edit, and start a new edit from the crossing.\n    this.removePointsAfterSecondCrossing(true);\n    this.finishEditAndStartNewEdit(evt);\n  }\n\n  triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n}\n\n/**\n * Finish the current edit, and start a new one.\n */\nfunction finishEditAndStartNewEdit(evt: EventTypes.InteractionEventType): void {\n  const eventDetail = evt.detail;\n  const { element } = eventDetail;\n  const enabledElement = getEnabledElement(element);\n  const { viewport, renderingEngine } = enabledElement;\n\n  const { annotation, viewportIdsToRender } = this.commonData;\n  const { fusedCanvasPoints, editCanvasPoints } = this.editData;\n\n  const worldPoints = fusedCanvasPoints.map((canvasPoint) =>\n    viewport.canvasToWorld(canvasPoint)\n  );\n\n  annotation.data.polyline = worldPoints;\n  annotation.data.isOpenContour = false;\n\n  this.triggerAnnotationModified(annotation, enabledElement);\n\n  const lastEditCanvasPoint = editCanvasPoints.pop();\n\n  this.editData = {\n    prevCanvasPoints: fusedCanvasPoints,\n    editCanvasPoints: [lastEditCanvasPoint],\n    startCrossingIndex: undefined,\n    editIndex: 0,\n    snapIndex: undefined,\n  };\n\n  triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n}\n\n/**\n * This method combines the contour before editing (prevCanvasPoints) with\n * the current edit (editCanvasPoints), to produce a renderable preview of the\n * edit. Upon finishing the contour, the preview generated here is written back\n * into the contour state.\n *\n * @privateRemarks In this method we combine a few tricks to find the optimal\n * contour:\n * - As the contour is closed, our edit might stradle the boundary between the\n * last and 0th point of the contour, e.g. a small edit might go from e.g. index\n * 960 to index 4. We therefore calculate two possible contours, and find the\n * one with the biggest area, which will define the actual edit the user desired.\n * - As the contour and the edit can be drawn with different chiralities, we find if\n * the edit line aligns better with the intended cross points in its current order\n * or reversed. We do this by minimising the distance between its ends and the\n * intended crossing points.\n */\nfunction fuseEditPointsWithClosedContour(\n  evt: EventTypes.InteractionEventType\n): Types.Point2[] {\n  const { prevCanvasPoints, editCanvasPoints, startCrossingIndex, snapIndex } =\n    this.editData;\n\n  if (startCrossingIndex === undefined || snapIndex === undefined) {\n    return;\n  }\n\n  const eventDetail = evt.detail;\n  const { element } = eventDetail;\n\n  // Augment the editCanvasPoints array, between the end of edit and the snap index.\n  const augmentedEditCanvasPoints = [...editCanvasPoints];\n\n  addCanvasPointsToArray(\n    element,\n    augmentedEditCanvasPoints,\n    prevCanvasPoints[snapIndex],\n    this.commonData\n  );\n\n  if (augmentedEditCanvasPoints.length > editCanvasPoints.length) {\n    // If any points added, remove the last point, which will be a clone of the snapIndex\n    augmentedEditCanvasPoints.pop();\n  }\n\n  // Calculate the distances between the first and last edit points and the origin of the\n  // Contour with the snap point. These will be used to see which way around the edit array should be\n  // Placed within the preview.\n  let lowIndex;\n  let highIndex;\n\n  if (startCrossingIndex > snapIndex) {\n    lowIndex = snapIndex;\n    highIndex = startCrossingIndex;\n  } else {\n    lowIndex = startCrossingIndex;\n    highIndex = snapIndex;\n  }\n\n  const distanceBetweenLowAndFirstPoint = vec2.distance(\n    prevCanvasPoints[lowIndex],\n    augmentedEditCanvasPoints[0]\n  );\n\n  const distanceBetweenLowAndLastPoint = vec2.distance(\n    prevCanvasPoints[lowIndex],\n    augmentedEditCanvasPoints[augmentedEditCanvasPoints.length - 1]\n  );\n\n  const distanceBetweenHighAndFirstPoint = vec2.distance(\n    prevCanvasPoints[highIndex],\n    augmentedEditCanvasPoints[0]\n  );\n\n  const distanceBetweenHighAndLastPoint = vec2.distance(\n    prevCanvasPoints[highIndex],\n    augmentedEditCanvasPoints[augmentedEditCanvasPoints.length - 1]\n  );\n\n  // Generate two possible contours that could be intepreted from the edit:\n  //\n  // pointSet1 => 0 -> low -> edit -> high - max.\n  // pointSet2 => low -> high -> edit\n  //\n  // Depending on the placement of the edit and the origin, either of these could be the intended edit.\n  // We'll choose the one with the largest area, as edits are considered to be changes to the original area with\n  // A relative change of much less than unity.\n\n  // Point Set 1\n  const pointSet1 = [];\n\n  // Add points from the orignal contour origin up to the low index.\n  for (let i = 0; i < lowIndex; i++) {\n    const canvasPoint = prevCanvasPoints[i];\n\n    pointSet1.push([canvasPoint[0], canvasPoint[1]]);\n  }\n\n  // Check which orientation of the edit line minimizes the distance between the\n  // origial contour low/high points and the start/end nodes of the edit line.\n\n  let inPlaceDistance =\n    distanceBetweenLowAndFirstPoint + distanceBetweenHighAndLastPoint;\n\n  let reverseDistance =\n    distanceBetweenLowAndLastPoint + distanceBetweenHighAndFirstPoint;\n\n  if (inPlaceDistance < reverseDistance) {\n    for (let i = 0; i < augmentedEditCanvasPoints.length; i++) {\n      const canvasPoint = augmentedEditCanvasPoints[i];\n\n      pointSet1.push([canvasPoint[0], canvasPoint[1]]);\n    }\n  } else {\n    for (let i = augmentedEditCanvasPoints.length - 1; i >= 0; i--) {\n      const canvasPoint = augmentedEditCanvasPoints[i];\n\n      pointSet1.push([canvasPoint[0], canvasPoint[1]]);\n    }\n  }\n\n  // Add points from the orignal contour's high index up to to its end point.\n  for (let i = highIndex; i < prevCanvasPoints.length; i++) {\n    const canvasPoint = prevCanvasPoints[i];\n\n    pointSet1.push([canvasPoint[0], canvasPoint[1]]);\n  }\n\n  // Point Set 2\n  const pointSet2 = [];\n\n  for (let i = lowIndex; i < highIndex; i++) {\n    const canvasPoint = prevCanvasPoints[i];\n\n    pointSet2.push([canvasPoint[0], canvasPoint[1]]);\n  }\n\n  inPlaceDistance =\n    distanceBetweenHighAndFirstPoint + distanceBetweenLowAndLastPoint;\n\n  reverseDistance =\n    distanceBetweenHighAndLastPoint + distanceBetweenLowAndFirstPoint;\n\n  if (inPlaceDistance < reverseDistance) {\n    for (let i = 0; i < augmentedEditCanvasPoints.length; i++) {\n      const canvasPoint = augmentedEditCanvasPoints[i];\n\n      pointSet2.push([canvasPoint[0], canvasPoint[1]]);\n    }\n  } else {\n    for (let i = augmentedEditCanvasPoints.length - 1; i >= 0; i--) {\n      const canvasPoint = augmentedEditCanvasPoints[i];\n\n      pointSet2.push([canvasPoint[0], canvasPoint[1]]);\n    }\n  }\n\n  const areaPointSet1 = calculateAreaOfPoints(pointSet1);\n  const areaPointSet2 = calculateAreaOfPoints(pointSet2);\n\n  const pointsToRender: Types.Point2[] =\n    areaPointSet1 > areaPointSet2 ? pointSet1 : pointSet2;\n\n  return pointsToRender;\n}\n\n/**\n * Completes the edit of the closed contour when the mouse button is released.\n */\nfunction mouseUpClosedContourEditCallback(\n  evt: EventTypes.InteractionEventType\n): void {\n  const eventDetail = evt.detail;\n  const { element } = eventDetail;\n\n  this.completeClosedContourEdit(element);\n}\n\n/**\n * Completes the edit of the closed contour when the mouse button is released.\n */\nfunction completeClosedContourEdit(element: HTMLDivElement) {\n  const enabledElement = getEnabledElement(element);\n  const { viewport, renderingEngine } = enabledElement;\n\n  const { annotation, viewportIdsToRender } = this.commonData;\n  const { fusedCanvasPoints, prevCanvasPoints } = this.editData;\n\n  if (fusedCanvasPoints) {\n    const updatedPoints = shouldInterpolate(this.configuration)\n      ? getInterpolatedPoints(\n          this.configuration,\n          fusedCanvasPoints,\n          prevCanvasPoints\n        )\n      : fusedCanvasPoints;\n\n    const worldPoints = updatedPoints.map((canvasPoint) =>\n      viewport.canvasToWorld(canvasPoint)\n    );\n    annotation.data.polyline = worldPoints;\n    annotation.data.isOpenContour = false;\n\n    annotation.invalidated = true;\n\n    this.triggerAnnotationModified(annotation, enabledElement);\n  }\n\n  this.isEditingClosed = false;\n  this.editData = undefined;\n  this.commonData = undefined;\n\n  triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n  this.deactivateClosedContourEdit(element);\n}\n\n/**\n * Completes the edit on a cancel method call during the closed\n * contour edit loop.\n */\nfunction cancelClosedContourEdit(element: HTMLDivElement) {\n  this.completeClosedContourEdit(element);\n}\n\n/**\n * Registers the closed contour edit loop to the tool instance.\n */\nfunction registerClosedContourEditLoop(toolInstance): void {\n  toolInstance.activateClosedContourEdit =\n    activateClosedContourEdit.bind(toolInstance);\n  toolInstance.deactivateClosedContourEdit =\n    deactivateClosedContourEdit.bind(toolInstance);\n  toolInstance.mouseDragClosedContourEditCallback =\n    mouseDragClosedContourEditCallback.bind(toolInstance);\n  toolInstance.mouseUpClosedContourEditCallback =\n    mouseUpClosedContourEditCallback.bind(toolInstance);\n  toolInstance.finishEditAndStartNewEdit =\n    finishEditAndStartNewEdit.bind(toolInstance);\n  toolInstance.fuseEditPointsWithClosedContour =\n    fuseEditPointsWithClosedContour.bind(toolInstance);\n  toolInstance.cancelClosedContourEdit =\n    cancelClosedContourEdit.bind(toolInstance);\n  toolInstance.completeClosedContourEdit =\n    completeClosedContourEdit.bind(toolInstance);\n}\n\nexport default registerClosedContourEditLoop;\n","import { getEnabledElement } from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\nimport { state } from '../../../store';\nimport { Events } from '../../../enums';\nimport {\n  resetElementCursor,\n  hideElementCursor,\n} from '../../../cursors/elementCursor';\nimport type { EventTypes, Annotation } from '../../../types';\nimport { vec3, vec2 } from 'gl-matrix';\nimport { polyline } from '../../../utilities/math';\nimport {\n  shouldInterpolate,\n  getInterpolatedPoints,\n} from '../../../utilities/planarFreehandROITool/interpolatePoints';\nimport triggerAnnotationRenderForViewportIds from '../../../utilities/triggerAnnotationRenderForViewportIds';\nimport findOpenUShapedContourVectorToPeak from './findOpenUShapedContourVectorToPeak';\n\nconst { addCanvasPointsToArray, getSubPixelSpacingAndXYDirections } = polyline;\n\n/**\n * Activates the open contour edit event loop.\n */\nfunction activateOpenContourEdit(\n  evt: EventTypes.InteractionEventType,\n  annotation: Annotation,\n  viewportIdsToRender: string[]\n): void {\n  this.isEditingOpen = true;\n\n  const eventDetail = evt.detail;\n  const { currentPoints, element } = eventDetail;\n  const canvasPos = currentPoints.canvas;\n  const enabledElement = getEnabledElement(element);\n  const { viewport } = enabledElement;\n\n  const prevCanvasPoints = annotation.data.polyline.map(viewport.worldToCanvas);\n\n  const { spacing, xDir, yDir } = getSubPixelSpacingAndXYDirections(\n    viewport,\n    this.configuration.subPixelResolution\n  );\n\n  this.editData = {\n    prevCanvasPoints,\n    editCanvasPoints: [canvasPos],\n    startCrossingIndex: undefined,\n    editIndex: 0,\n  };\n\n  this.commonData = {\n    annotation,\n    viewportIdsToRender,\n    spacing,\n    xDir,\n    yDir,\n    movingTextBox: false,\n  };\n\n  state.isInteractingWithTool = true;\n\n  element.addEventListener(\n    Events.MOUSE_UP,\n    this.mouseUpOpenContourEditCallback\n  );\n  element.addEventListener(\n    Events.MOUSE_DRAG,\n    this.mouseDragOpenContourEditCallback\n  );\n  element.addEventListener(\n    Events.MOUSE_CLICK,\n    this.mouseUpOpenContourEditCallback\n  );\n\n  element.addEventListener(\n    Events.TOUCH_END,\n    this.mouseUpOpenContourEditCallback\n  );\n  element.addEventListener(\n    Events.TOUCH_DRAG,\n    this.mouseDragOpenContourEditCallback\n  );\n  element.addEventListener(\n    Events.TOUCH_TAP,\n    this.mouseUpOpenContourEditCallback\n  );\n  hideElementCursor(element);\n}\n\n/**\n * Deactivates and cleans up the closed contour edit event loop.\n */\nfunction deactivateOpenContourEdit(element: HTMLDivElement) {\n  state.isInteractingWithTool = false;\n\n  element.removeEventListener(\n    Events.MOUSE_UP,\n    this.mouseUpOpenContourEditCallback\n  );\n  element.removeEventListener(\n    Events.MOUSE_DRAG,\n    this.mouseDragOpenContourEditCallback\n  );\n  element.removeEventListener(\n    Events.MOUSE_CLICK,\n    this.mouseUpOpenContourEditCallback\n  );\n\n  element.removeEventListener(\n    Events.TOUCH_END,\n    this.mouseUpOpenContourEditCallback\n  );\n  element.removeEventListener(\n    Events.TOUCH_DRAG,\n    this.mouseDragOpenContourEditCallback\n  );\n  element.removeEventListener(\n    Events.TOUCH_TAP,\n    this.mouseUpOpenContourEditCallback\n  );\n  resetElementCursor(element);\n}\n\n/**\n * Adds points to the edit line and calculates the preview of the edit to render.\n * Checks if an edit needs to be completed by crossing of lines, or by dragging\n * the edit line past the end of the open contour.\n */\nfunction mouseDragOpenContourEditCallback(\n  evt: EventTypes.InteractionEventType\n): boolean {\n  const eventDetail = evt.detail;\n  const { currentPoints, element } = eventDetail;\n  const worldPos = currentPoints.world;\n  const canvasPos = currentPoints.canvas;\n  const enabledElement = getEnabledElement(element);\n  const { renderingEngine, viewport } = enabledElement;\n\n  const { viewportIdsToRender, xDir, yDir, spacing } = this.commonData;\n  const { editIndex, editCanvasPoints, startCrossingIndex } = this.editData;\n\n  const lastCanvasPoint = editCanvasPoints[editCanvasPoints.length - 1];\n  const lastWorldPoint = viewport.canvasToWorld(lastCanvasPoint);\n\n  const worldPosDiff = vec3.create();\n\n  vec3.subtract(worldPosDiff, worldPos, lastWorldPoint);\n\n  const xDist = Math.abs(vec3.dot(worldPosDiff, xDir));\n  const yDist = Math.abs(vec3.dot(worldPosDiff, yDir));\n\n  // Get pixel spacing in the direction.\n  // Check that we have moved at least one voxel in each direction.\n\n  if (xDist <= spacing[0] && yDist <= spacing[1]) {\n    // Haven't changed world point enough, don't render\n    return;\n  }\n\n  if (startCrossingIndex !== undefined) {\n    // Edge case: If the edit line itself crosses, remove part of that edit line so we don't\n    // Get isolated regions.\n    this.checkAndRemoveCrossesOnEditLine(evt);\n  }\n\n  const numPointsAdded = addCanvasPointsToArray(\n    element,\n    editCanvasPoints,\n    canvasPos,\n    this.commonData\n  );\n\n  const currentEditIndex = editIndex + numPointsAdded;\n\n  this.editData.editIndex = currentEditIndex;\n\n  if (startCrossingIndex === undefined && editCanvasPoints.length > 1) {\n    this.checkForFirstCrossing(evt, false);\n  }\n\n  this.editData.snapIndex = this.findSnapIndex();\n\n  this.editData.fusedCanvasPoints = this.fuseEditPointsWithOpenContour(evt);\n\n  if (\n    startCrossingIndex !== undefined &&\n    this.checkForSecondCrossing(evt, false)\n  ) {\n    this.removePointsAfterSecondCrossing(false);\n    this.finishEditOpenOnSecondCrossing(evt);\n  } else if (this.checkIfShouldOverwriteAnEnd(evt)) {\n    this.openContourEditOverwriteEnd(evt);\n  }\n\n  triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n}\n\n/**\n * Overwrite the end of the contour with the edit, and then switch to the\n * open contour end edit loop.\n */\nfunction openContourEditOverwriteEnd(\n  evt: EventTypes.InteractionEventType\n): void {\n  const eventDetail = evt.detail;\n  const { element } = eventDetail;\n  const enabledElement = getEnabledElement(element);\n  const { viewport } = enabledElement;\n  const { annotation, viewportIdsToRender } = this.commonData;\n  const fusedCanvasPoints = this.fuseEditPointsForOpenContourEndEdit();\n\n  const worldPoints = fusedCanvasPoints.map((canvasPoint) =>\n    viewport.canvasToWorld(canvasPoint)\n  );\n\n  annotation.data.polyline = worldPoints;\n  annotation.data.isOpenContour = true;\n  // Note: Contours generate from fusedCanvasPoints will be in the direction\n  // with the last point being the current mouse position\n  annotation.data.handles.points = [\n    worldPoints[0],\n    worldPoints[worldPoints.length - 1],\n  ];\n  annotation.data.handles.activeHandleIndex = 1;\n\n  this.triggerAnnotationModified(annotation, enabledElement);\n\n  this.isEditingOpen = false;\n  this.editData = undefined;\n  this.commonData = undefined;\n\n  // Jump to a normal line edit now.\n  this.deactivateOpenContourEdit(element);\n  this.activateOpenContourEndEdit(evt, annotation, viewportIdsToRender, null);\n}\n\n/**\n * Checks if we are moving the `editCanvasPoints` past the end of one of the\n * open contour's `prevCanvasPoint`s.\n */\nfunction checkIfShouldOverwriteAnEnd(\n  evt: EventTypes.InteractionEventType\n): boolean {\n  const eventDetail = evt.detail;\n  const { currentPoints, lastPoints } = eventDetail;\n  const canvasPos = currentPoints.canvas;\n  const lastCanvasPos = lastPoints.canvas;\n\n  const { snapIndex, prevCanvasPoints, startCrossingIndex } = this.editData;\n\n  if (startCrossingIndex === undefined || snapIndex === undefined) {\n    // Edit not started\n    return false;\n  }\n\n  // No snap index can be found, so contour is being edited away from line.\n  if (snapIndex === -1) {\n    return true;\n  }\n\n  if (snapIndex !== 0 && snapIndex !== prevCanvasPoints.length - 1) {\n    // Not snapping to final index\n    return false;\n  }\n\n  // Work out the angle between the last mouse move and\n  // And the current point to the snapped point.\n  const p1 = canvasPos;\n  const p2 = lastCanvasPos;\n  const p3 = prevCanvasPoints[snapIndex];\n\n  const a = vec2.create();\n  const b = vec2.create();\n\n  vec2.set(a, p1[0] - p2[0], p1[1] - p2[1]);\n  vec2.set(b, p1[0] - p3[0], p1[1] - p3[1]);\n\n  const aDotb = vec2.dot(a, b);\n  const magA = Math.sqrt(a[0] * a[0] + a[1] * a[1]);\n  const magB = Math.sqrt(b[0] * b[0] + b[1] * b[1]);\n\n  const theta = Math.acos(aDotb / (magA * magB));\n\n  if (theta < Math.PI / 2) {\n    return true;\n  }\n\n  return false;\n}\n\n/**\n * This method combines the contour before editing (prevCanvasPoints) with\n * the current edit (editCanvasPoints), to produce a single contour ready for\n * end editing.\n *\n * @privateRemarks In this method we use the following trick to find the\n * optimal contour:\n * - As the contour and the edit can be drawn with different chiralities, we find if\n * the edit line aligns better with the intended cross points in its current order\n * or reversed. We do this by minimising the distance between its ends and the\n * intended crossing points.\n */\nfunction fuseEditPointsForOpenContourEndEdit(): Types.Point2[] {\n  const { snapIndex, prevCanvasPoints, editCanvasPoints, startCrossingIndex } =\n    this.editData;\n\n  const newCanvasPoints = [];\n\n  // Note: Generated contours will both be in the direction with the\n  // last point being the current mouse position\n\n  if (snapIndex === 0) {\n    // end -> crossingpoint -> edit\n    // Add points from the end of the previous contour, to the crossing point.\n    for (let i = prevCanvasPoints.length - 1; i >= startCrossingIndex; i--) {\n      const canvasPoint = prevCanvasPoints[i];\n\n      newCanvasPoints.push([canvasPoint[0], canvasPoint[1]]);\n    }\n  } else {\n    // start -> crossingpoint -> edit\n    // Add points from the orignal contour origin up to the low index.\n    for (let i = 0; i < startCrossingIndex; i++) {\n      const canvasPoint = prevCanvasPoints[i];\n\n      newCanvasPoints.push([canvasPoint[0], canvasPoint[1]]);\n    }\n  }\n\n  const distanceBetweenCrossingIndexAndFirstPoint = vec2.distance(\n    prevCanvasPoints[startCrossingIndex],\n    editCanvasPoints[0]\n  );\n\n  const distanceBetweenCrossingIndexAndLastPoint = vec2.distance(\n    prevCanvasPoints[startCrossingIndex],\n    editCanvasPoints[editCanvasPoints.length - 1]\n  );\n\n  if (\n    distanceBetweenCrossingIndexAndFirstPoint <\n    distanceBetweenCrossingIndexAndLastPoint\n  ) {\n    // In order\n    for (let i = 0; i < editCanvasPoints.length; i++) {\n      const canvasPoint = editCanvasPoints[i];\n\n      newCanvasPoints.push([canvasPoint[0], canvasPoint[1]]);\n    }\n  } else {\n    // reverse\n    for (let i = editCanvasPoints.length - 1; i >= 0; i--) {\n      const canvasPoint = editCanvasPoints[i];\n\n      newCanvasPoints.push([canvasPoint[0], canvasPoint[1]]);\n    }\n  }\n\n  return newCanvasPoints;\n}\n\n/**\n * This method combines the contour before editing (prevCanvasPoints) with\n * the current edit (editCanvasPoints), to produce a renderable preview of the\n * edit. Upon finishing the contour, the preview generated here is written back\n * into the contour state.\n *\n * @privateRemarks In this method we use the following trick to find the\n * optimal contour:\n * - As the contour and the edit can be drawn with different chiralities, we find if\n * the edit line aligns better with the intended cross points in its current order\n * or reversed. We do this by minimising the distance between its ends and the\n * intended crossing points.\n */\nfunction fuseEditPointsWithOpenContour(\n  evt: EventTypes.InteractionEventType\n): Types.Point2[] {\n  const { prevCanvasPoints, editCanvasPoints, startCrossingIndex, snapIndex } =\n    this.editData;\n\n  if (startCrossingIndex === undefined || snapIndex === undefined) {\n    return undefined;\n  }\n\n  const eventDetail = evt.detail;\n  const { element } = eventDetail;\n\n  // Augment the editCanvasPoints array, between the end of edit and the snap index.\n  const augmentedEditCanvasPoints = [...editCanvasPoints];\n\n  addCanvasPointsToArray(\n    element,\n    augmentedEditCanvasPoints,\n    prevCanvasPoints[snapIndex],\n    this.commonData\n  );\n\n  if (augmentedEditCanvasPoints.length > editCanvasPoints.length) {\n    // If any points added, remove the last point, which will be a clone of the snapIndex\n    augmentedEditCanvasPoints.pop();\n  }\n\n  // Calculate the distances between the first and last edit points and the origin of the\n  // Contour with the snap point. These will be used to see which way around the edit array should be\n  // Placed within the preview.\n\n  let lowIndex;\n  let highIndex;\n\n  if (startCrossingIndex > snapIndex) {\n    lowIndex = snapIndex;\n    highIndex = startCrossingIndex;\n  } else {\n    lowIndex = startCrossingIndex;\n    highIndex = snapIndex;\n  }\n\n  const distanceBetweenLowAndFirstPoint = vec2.distance(\n    prevCanvasPoints[lowIndex],\n    augmentedEditCanvasPoints[0]\n  );\n\n  const distanceBetweenLowAndLastPoint = vec2.distance(\n    prevCanvasPoints[lowIndex],\n    augmentedEditCanvasPoints[augmentedEditCanvasPoints.length - 1]\n  );\n\n  const distanceBetweenHighAndFirstPoint = vec2.distance(\n    prevCanvasPoints[highIndex],\n    augmentedEditCanvasPoints[0]\n  );\n\n  const distanceBetweenHighAndLastPoint = vec2.distance(\n    prevCanvasPoints[highIndex],\n    augmentedEditCanvasPoints[augmentedEditCanvasPoints.length - 1]\n  );\n\n  const pointsToRender = [];\n\n  // Add points from the orignal contour origin up to the low index.\n  for (let i = 0; i < lowIndex; i++) {\n    const canvasPoint = prevCanvasPoints[i];\n\n    pointsToRender.push([canvasPoint[0], canvasPoint[1]]);\n  }\n\n  // Check which orientation of the edit line minimizes the distance between the\n  // origial contour low/high points and the start/end nodes of the edit line.\n\n  const inPlaceDistance =\n    distanceBetweenLowAndFirstPoint + distanceBetweenHighAndLastPoint;\n\n  const reverseDistance =\n    distanceBetweenLowAndLastPoint + distanceBetweenHighAndFirstPoint;\n\n  if (inPlaceDistance < reverseDistance) {\n    for (let i = 0; i < augmentedEditCanvasPoints.length; i++) {\n      const canvasPoint = augmentedEditCanvasPoints[i];\n\n      pointsToRender.push([canvasPoint[0], canvasPoint[1]]);\n    }\n  } else {\n    for (let i = augmentedEditCanvasPoints.length - 1; i >= 0; i--) {\n      const canvasPoint = augmentedEditCanvasPoints[i];\n\n      pointsToRender.push([canvasPoint[0], canvasPoint[1]]);\n    }\n  }\n\n  // Add points from the original contour's high index up to to its end point.\n  for (let i = highIndex; i < prevCanvasPoints.length; i++) {\n    const canvasPoint = prevCanvasPoints[i];\n\n    pointsToRender.push([canvasPoint[0], canvasPoint[1]]);\n  }\n\n  return pointsToRender;\n}\n\n/**\n * On a second crossing, apply edit, and start a new edit from the crossing.\n */\nfunction finishEditOpenOnSecondCrossing(\n  evt: EventTypes.InteractionEventType\n): void {\n  const eventDetail = evt.detail;\n  const { element } = eventDetail;\n  const enabledElement = getEnabledElement(element);\n  const { viewport, renderingEngine } = enabledElement;\n\n  const { annotation, viewportIdsToRender } = this.commonData;\n  const { fusedCanvasPoints, editCanvasPoints } = this.editData;\n\n  const worldPoints = fusedCanvasPoints.map((canvasPoint) =>\n    viewport.canvasToWorld(canvasPoint)\n  );\n\n  annotation.data.polyline = worldPoints;\n  annotation.data.isOpenContour = true;\n  annotation.data.handles.points = [\n    worldPoints[0],\n    worldPoints[worldPoints.length - 1],\n  ];\n\n  this.triggerAnnotationModified(annotation, enabledElement);\n\n  const lastEditCanvasPoint = editCanvasPoints.pop();\n\n  this.editData = {\n    prevCanvasPoints: fusedCanvasPoints,\n    editCanvasPoints: [lastEditCanvasPoint],\n    startCrossingIndex: undefined,\n    editIndex: 0,\n  };\n\n  triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n}\n\n/**\n * Completes the edit of the open contour when the mouse button is released.\n */\nfunction mouseUpOpenContourEditCallback(\n  evt: EventTypes.InteractionEventType\n): void {\n  const eventDetail = evt.detail;\n  const { element } = eventDetail;\n\n  this.completeOpenContourEdit(element);\n}\n\n/**\n * Completes the edit of the open contour.\n */\nfunction completeOpenContourEdit(element: HTMLDivElement) {\n  const enabledElement = getEnabledElement(element);\n  const { viewport, renderingEngine } = enabledElement;\n\n  const { annotation, viewportIdsToRender } = this.commonData;\n  const { fusedCanvasPoints, prevCanvasPoints } = this.editData;\n\n  if (fusedCanvasPoints) {\n    const updatedPoints = shouldInterpolate(this.configuration)\n      ? getInterpolatedPoints(\n          this.configuration,\n          fusedCanvasPoints,\n          prevCanvasPoints\n        )\n      : fusedCanvasPoints;\n\n    const worldPoints = updatedPoints.map((canvasPoint) =>\n      viewport.canvasToWorld(canvasPoint)\n    );\n    annotation.data.polyline = worldPoints;\n    annotation.data.isOpenContour = true;\n    annotation.data.handles.points = [\n      worldPoints[0],\n      worldPoints[worldPoints.length - 1],\n    ];\n\n    // If the annotation is an open U-shaped annotation, find the annotation vector.\n    if (annotation.data.isOpenUShapeContour) {\n      annotation.data.openUShapeContourVectorToPeak =\n        findOpenUShapedContourVectorToPeak(fusedCanvasPoints, viewport);\n    }\n\n    annotation.invalidated = true;\n\n    this.triggerAnnotationModified(annotation, enabledElement);\n  }\n\n  this.isEditingOpen = false;\n  this.editData = undefined;\n  this.commonData = undefined;\n\n  triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n  this.deactivateOpenContourEdit(element);\n}\n\n/**\n * Completes the edit on a cancel method call during the open\n * contour edit loop.\n */\nfunction cancelOpenContourEdit(element: HTMLDivElement) {\n  this.completeOpenContourEdit(element);\n}\n\n/**\n * Registers the open contour edit loop to the tool instance.\n */\nfunction registerOpenContourEditLoop(toolInstance) {\n  toolInstance.activateOpenContourEdit =\n    activateOpenContourEdit.bind(toolInstance);\n  toolInstance.deactivateOpenContourEdit =\n    deactivateOpenContourEdit.bind(toolInstance);\n  toolInstance.mouseDragOpenContourEditCallback =\n    mouseDragOpenContourEditCallback.bind(toolInstance);\n  toolInstance.mouseUpOpenContourEditCallback =\n    mouseUpOpenContourEditCallback.bind(toolInstance);\n  toolInstance.fuseEditPointsWithOpenContour =\n    fuseEditPointsWithOpenContour.bind(toolInstance);\n  toolInstance.finishEditOpenOnSecondCrossing =\n    finishEditOpenOnSecondCrossing.bind(toolInstance);\n  toolInstance.checkIfShouldOverwriteAnEnd =\n    checkIfShouldOverwriteAnEnd.bind(toolInstance);\n  toolInstance.fuseEditPointsForOpenContourEndEdit =\n    fuseEditPointsForOpenContourEndEdit.bind(toolInstance);\n  toolInstance.openContourEditOverwriteEnd =\n    openContourEditOverwriteEnd.bind(toolInstance);\n  toolInstance.cancelOpenContourEdit = cancelOpenContourEdit.bind(toolInstance);\n  toolInstance.completeOpenContourEdit =\n    completeOpenContourEdit.bind(toolInstance);\n}\n\nexport default registerOpenContourEditLoop;\n","import { getEnabledElement } from '@cornerstonejs/core';\nimport { state } from '../../../store';\nimport { Events } from '../../../enums';\nimport { hideElementCursor } from '../../../cursors/elementCursor';\nimport type {\n  EventTypes,\n  Annotation,\n  ToolHandle,\n  TextBoxHandle,\n} from '../../../types';\nimport { polyline } from '../../../utilities/math';\n\nconst { getSubPixelSpacingAndXYDirections } = polyline;\n\n/**\n * Activates the open contour end edit. This actually just sets up the state so\n * that the tool thinks we are mid draw, and then jumps into the drawing loop.\n */\nfunction activateOpenContourEndEdit(\n  evt: EventTypes.InteractionEventType,\n  annotation: Annotation,\n  viewportIdsToRender: string[],\n  handle: ToolHandle | null\n): void {\n  this.isDrawing = true;\n\n  const eventDetail = evt.detail;\n  const { element } = eventDetail;\n  const enabledElement = getEnabledElement(element);\n  const { viewport } = enabledElement;\n\n  const { spacing, xDir, yDir } = getSubPixelSpacingAndXYDirections(\n    viewport,\n    this.configuration.subPixelResolution\n  );\n\n  const canvasPoints = annotation.data.polyline.map(viewport.worldToCanvas);\n  const handleIndexGrabbed = annotation.data.handles.activeHandleIndex;\n\n  // If 0, invert point direction, if 1, keep point direction the same.\n  // This is so we can just jump as into the state as if the annotation was just being drawn.\n  if (handleIndexGrabbed === 0) {\n    canvasPoints.reverse();\n  }\n\n  let movingTextBox = false;\n  if ((handle as TextBoxHandle).worldPosition) {\n    movingTextBox = true;\n  }\n\n  this.drawData = {\n    canvasPoints: canvasPoints,\n    polylineIndex: canvasPoints.length - 1,\n  };\n\n  this.commonData = {\n    annotation,\n    viewportIdsToRender,\n    spacing,\n    xDir,\n    yDir,\n    movingTextBox,\n  };\n\n  state.isInteractingWithTool = true;\n\n  // Jump into drawing loop.\n  element.addEventListener(Events.MOUSE_UP, this.mouseUpDrawCallback);\n  element.addEventListener(Events.MOUSE_DRAG, this.mouseDragDrawCallback);\n  element.addEventListener(Events.MOUSE_CLICK, this.mouseUpDrawCallback);\n  element.addEventListener(Events.TOUCH_END, this.mouseUpDrawCallback);\n  element.addEventListener(Events.TOUCH_DRAG, this.mouseDragDrawCallback);\n  element.addEventListener(Events.TOUCH_TAP, this.mouseUpDrawCallback);\n\n  hideElementCursor(element);\n}\n\n/**\n * Registers the open contour end edit loop to the tool instance.\n */\nfunction registerOpenContourEndEditLoop(toolInstance): void {\n  toolInstance.activateOpenContourEndEdit =\n    activateOpenContourEndEdit.bind(toolInstance);\n}\n\nexport default registerOpenContourEndEditLoop;\n","import type { Types } from '@cornerstonejs/core';\nimport {\n  drawHandles as drawHandlesSvg,\n  drawPolyline as drawPolylineSvg,\n} from '../../../drawingSvg';\nimport { polyline } from '../../../utilities/math';\nimport { findOpenUShapedContourVectorToPeakOnRender } from './findOpenUShapedContourVectorToPeak';\nimport { PlanarFreehandROIAnnotation } from '../../../types/ToolSpecificAnnotationTypes';\nimport { StyleSpecifier } from '../../../types/AnnotationStyle';\nimport { SVGDrawingHelper } from '../../../types';\n\nconst { pointsAreWithinCloseContourProximity } = polyline;\n\ntype PlanarFreehandROIRenderOptions = {\n  color?: string;\n  width?: number;\n  connectFirstToLast?: boolean;\n};\n\nfunction _getRenderingOptions(\n  enabledElement: Types.IEnabledElement,\n  annotation: PlanarFreehandROIAnnotation\n): PlanarFreehandROIRenderOptions {\n  const styleSpecifier: StyleSpecifier = {\n    toolGroupId: this.toolGroupId,\n    toolName: this.getToolName(),\n    viewportId: enabledElement.viewport.id,\n    annotationUID: annotation.annotationUID,\n  };\n\n  const lineWidth = this.getStyle('lineWidth', styleSpecifier, annotation);\n  const lineDash = this.getStyle('lineDash', styleSpecifier, annotation);\n  const color = this.getStyle('color', styleSpecifier, annotation);\n\n  const isOpenContour = annotation.data.isOpenContour;\n\n  const options = {\n    color: color === undefined ? undefined : <string>color,\n    width: lineWidth === undefined ? undefined : <number>lineWidth,\n    lineDash: lineDash === undefined ? undefined : <number[]>lineDash,\n    connectLastToFirst: !isOpenContour,\n  };\n\n  return options;\n}\n\n/**\n * Renders a `PlanarFreehandROIAnnotation` that is not currently being drawn or edited.\n */\nfunction renderContour(\n  enabledElement: Types.IEnabledElement,\n  svgDrawingHelper: SVGDrawingHelper,\n  annotation: PlanarFreehandROIAnnotation\n): void {\n  // prevent drawing or further calculation in case viewport data is not ready yet\n  if (!enabledElement?.viewport?.getImageData()) {\n    return;\n  }\n  // Check if the contour is an open contour\n  if (annotation.data.isOpenContour) {\n    // If its an open contour, check i its a U-shaped contour\n    if (annotation.data.isOpenUShapeContour) {\n      calculateUShapeContourVectorToPeakIfNotPresent(\n        enabledElement,\n        annotation\n      );\n\n      this.renderOpenUShapedContour(\n        enabledElement,\n        svgDrawingHelper,\n        annotation\n      );\n    } else {\n      // If not a U-shaped contour, render standard open contour.\n      this.renderOpenContour(enabledElement, svgDrawingHelper, annotation);\n    }\n  } else {\n    this.renderClosedContour(enabledElement, svgDrawingHelper, annotation);\n  }\n}\n\n/**\n * If the open U-shaped contour does not have a peak.\n */\nfunction calculateUShapeContourVectorToPeakIfNotPresent(\n  enabledElement: Types.IEnabledElement,\n  annotation: PlanarFreehandROIAnnotation\n): void {\n  if (!annotation.data.openUShapeContourVectorToPeak) {\n    // Annotation just been set to be an open U-shaped contour.\n    // calculate its peak vector here.\n    annotation.data.openUShapeContourVectorToPeak =\n      findOpenUShapedContourVectorToPeakOnRender(enabledElement, annotation);\n  }\n}\n\n/**\n * Renders an closed `PlanarFreehandROIAnnotation` annotation.\n */\nfunction renderClosedContour(\n  enabledElement: Types.IEnabledElement,\n  svgDrawingHelper: SVGDrawingHelper,\n  annotation: PlanarFreehandROIAnnotation\n): void {\n  const { viewport } = enabledElement;\n  const options = this._getRenderingOptions(enabledElement, annotation);\n\n  // Its unfortunate that we have to do this for each annotation,\n  // Even if its unchanged. In the future we could cache the canvas points per\n  // element on the tool? That feels very weird also as we'd need to manage\n  // it/clean them up. Its a pre-optimisation for now and we can tackle it if it\n  // becomes a problem.\n  const canvasPoints = annotation.data.polyline.map((worldPos) =>\n    viewport.worldToCanvas(worldPos)\n  );\n\n  const polylineUID = '1';\n\n  drawPolylineSvg(\n    svgDrawingHelper,\n    annotation.annotationUID,\n    polylineUID,\n    canvasPoints,\n    options\n  );\n}\n\n/**\n * Renders an open `PlanarFreehandROIAnnotation` annotation.\n */\nfunction renderOpenContour(\n  enabledElement: Types.IEnabledElement,\n  svgDrawingHelper: SVGDrawingHelper,\n  annotation: PlanarFreehandROIAnnotation\n): void {\n  const { viewport } = enabledElement;\n  const options = this._getRenderingOptions(enabledElement, annotation);\n\n  const canvasPoints = annotation.data.polyline.map((worldPos) =>\n    viewport.worldToCanvas(worldPos)\n  );\n\n  const polylineUID = '1';\n\n  drawPolylineSvg(\n    svgDrawingHelper,\n    annotation.annotationUID,\n    polylineUID,\n    canvasPoints,\n    options\n  );\n\n  const activeHandleIndex = annotation.data.handles.activeHandleIndex;\n\n  if (this.configuration.alwaysRenderOpenContourHandles?.enabled === true) {\n    const radius = this.configuration.alwaysRenderOpenContourHandles.radius;\n\n    // Draw highlighted points\n    const handleGroupUID = '0';\n\n    // We already mapped all the points, so don't do the mapping again.\n    // The activeHandleIndex can only be one of two points.\n    const handlePoints = [\n      canvasPoints[0],\n      canvasPoints[canvasPoints.length - 1],\n    ];\n\n    // Don't render a hovered handle, as this will be rendered larger in\n    // the next block.\n    if (activeHandleIndex === 0) {\n      handlePoints.shift();\n    } else if (activeHandleIndex === 1) {\n      handlePoints.pop();\n    }\n\n    drawHandlesSvg(\n      svgDrawingHelper,\n      annotation.annotationUID,\n      handleGroupUID,\n      handlePoints,\n      {\n        color: options.color,\n        handleRadius: radius,\n      }\n    );\n  }\n\n  if (activeHandleIndex !== null) {\n    // Draw highlighted points\n    const handleGroupUID = '1';\n\n    // We already mapped all the points, so don't do the mapping again.\n    // The activeHandleIndex can only be one of two points.\n    const indexOfCanvasPoints =\n      activeHandleIndex === 0 ? 0 : canvasPoints.length - 1;\n\n    const handlePoint = canvasPoints[indexOfCanvasPoints];\n\n    drawHandlesSvg(\n      svgDrawingHelper,\n      annotation.annotationUID,\n      handleGroupUID,\n      [handlePoint],\n      { color: options.color }\n    );\n  }\n}\n\nfunction renderOpenUShapedContour(\n  enabledElement: Types.IEnabledElement,\n  svgDrawingHelper: SVGDrawingHelper,\n  annotation: PlanarFreehandROIAnnotation\n): void {\n  const { viewport } = enabledElement;\n  const { polyline, openUShapeContourVectorToPeak } = annotation.data;\n\n  this.renderOpenContour(enabledElement, svgDrawingHelper, annotation);\n\n  // prevent rendering u shape in case openUShapeContourVectorToPeak is not set yet\n  if (!openUShapeContourVectorToPeak) {\n    return;\n  }\n\n  const firstCanvasPoint = viewport.worldToCanvas(polyline[0]);\n  const lastCanvasPoint = viewport.worldToCanvas(polyline[polyline.length - 1]);\n\n  const openUShapeContourVectorToPeakCanvas = [\n    viewport.worldToCanvas(openUShapeContourVectorToPeak[0]),\n    viewport.worldToCanvas(openUShapeContourVectorToPeak[1]),\n  ];\n\n  const options = this._getRenderingOptions(enabledElement, annotation);\n\n  // Join first and last points\n  drawPolylineSvg(\n    svgDrawingHelper,\n    annotation.annotationUID,\n    'first-to-last',\n    [firstCanvasPoint, lastCanvasPoint],\n    {\n      color: options.color,\n      width: options.width,\n      connectLastToFirst: false,\n      lineDash: '2,2',\n    }\n  );\n\n  // Render midpoint to open contour surface line\n  drawPolylineSvg(\n    svgDrawingHelper,\n    annotation.annotationUID,\n    'midpoint-to-open-contour',\n    [\n      openUShapeContourVectorToPeakCanvas[0],\n      openUShapeContourVectorToPeakCanvas[1],\n    ],\n    {\n      color: options.color,\n      width: options.width,\n      connectLastToFirst: false,\n      lineDash: '2,2',\n    }\n  );\n}\n\n/**\n * Renders a new `PlanarFreehandROIAnnotation` annotation during\n * creation/drawing.\n */\nfunction renderContourBeingDrawn(\n  enabledElement: Types.IEnabledElement,\n  svgDrawingHelper: SVGDrawingHelper,\n  annotation: PlanarFreehandROIAnnotation\n): void {\n  const options = this._getRenderingOptions(enabledElement, annotation);\n\n  const { allowOpenContours } = this.configuration;\n  const { canvasPoints } = this.drawData;\n\n  // Override rendering whilst drawing the contour, we don't know if its open\n  // or closed yet\n  options.connectLastToFirst = false;\n\n  drawPolylineSvg(\n    svgDrawingHelper,\n    annotation.annotationUID,\n    '1',\n    canvasPoints,\n    options\n  );\n\n  if (allowOpenContours) {\n    const firstPoint = canvasPoints[0];\n    const lastPoint = canvasPoints[canvasPoints.length - 1];\n\n    // Check if start and end are within close proximity\n    if (\n      pointsAreWithinCloseContourProximity(\n        firstPoint,\n        lastPoint,\n        this.configuration.closeContourProximity\n      )\n    ) {\n      // Preview join last points\n      drawPolylineSvg(\n        svgDrawingHelper,\n        annotation.annotationUID,\n        '2',\n        [lastPoint, firstPoint],\n        options\n      );\n    } else {\n      // Draw start point\n      const handleGroupUID = '0';\n\n      drawHandlesSvg(\n        svgDrawingHelper,\n        annotation.annotationUID,\n        handleGroupUID,\n        [firstPoint],\n        { color: options.color, handleRadius: 2 }\n      );\n    }\n  }\n}\n\n/**\n * Renders a closed `PlanarFreehandROIAnnotation` being edited.\n */\nfunction renderClosedContourBeingEdited(\n  enabledElement,\n  svgDrawingHelper,\n  annotation\n): void {\n  const { fusedCanvasPoints } = this.editData;\n\n  if (fusedCanvasPoints === undefined) {\n    // No edit to render yet, render closed contour.\n    this.renderClosedContour(enabledElement, svgDrawingHelper, annotation);\n\n    return;\n  }\n\n  const options = this._getRenderingOptions(enabledElement, annotation);\n\n  const polylineUIDToRender = 'preview-1';\n\n  drawPolylineSvg(\n    svgDrawingHelper,\n    annotation.annotationUID,\n    polylineUIDToRender,\n    fusedCanvasPoints,\n    options\n  );\n}\n\n/**\n * Renders an open `PlanarFreehandROIAnnotation` being edited.\n */\nfunction renderOpenContourBeingEdited(\n  enabledElement: Types.IEnabledElement,\n  svgDrawingHelper: SVGDrawingHelper,\n  annotation: PlanarFreehandROIAnnotation\n): void {\n  const { fusedCanvasPoints } = this.editData;\n\n  if (fusedCanvasPoints === undefined) {\n    // No edit to render yet, render closed contour.\n    this.renderOpenContour(enabledElement, svgDrawingHelper, annotation);\n\n    return;\n  }\n\n  const options = this._getRenderingOptions(enabledElement, annotation);\n\n  const polylineUIDToRender = 'preview-1';\n\n  drawPolylineSvg(\n    svgDrawingHelper,\n    annotation.annotationUID,\n    polylineUIDToRender,\n    fusedCanvasPoints,\n    options\n  );\n}\n\n/**\n * Registers the render methods of various contour states to the tool instance.\n */\nfunction registerRenderMethods(toolInstance) {\n  toolInstance.renderContour = renderContour.bind(toolInstance);\n  toolInstance.renderClosedContour = renderClosedContour.bind(toolInstance);\n  toolInstance.renderOpenContour = renderOpenContour.bind(toolInstance);\n  toolInstance.renderOpenUShapedContour =\n    renderOpenUShapedContour.bind(toolInstance);\n\n  toolInstance.renderContourBeingDrawn =\n    renderContourBeingDrawn.bind(toolInstance);\n\n  toolInstance.renderClosedContourBeingEdited =\n    renderClosedContourBeingEdited.bind(toolInstance);\n  toolInstance.renderOpenContourBeingEdited =\n    renderOpenContourBeingEdited.bind(toolInstance);\n  toolInstance._getRenderingOptions = _getRenderingOptions.bind(toolInstance);\n}\n\nexport default registerRenderMethods;\n","import {\n  CONSTANTS,\n  getEnabledElement,\n  triggerEvent,\n  eventTarget,\n  StackViewport,\n  VolumeViewport,\n  utilities as csUtils,\n} from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\nimport { vec3 } from 'gl-matrix';\n\nimport {\n  getCalibratedAreaUnits,\n  getCalibratedScale,\n} from '../../utilities/getCalibratedUnits';\nimport roundNumber from '../../utilities/roundNumber';\nimport { Events } from '../../enums';\nimport { AnnotationTool } from '../base';\nimport {\n  addAnnotation,\n  getAnnotations,\n} from '../../stateManagement/annotation/annotationState';\nimport { polyline } from '../../utilities/math';\nimport { filterAnnotationsForDisplay } from '../../utilities/planar';\nimport throttle from '../../utilities/throttle';\nimport { getViewportIdsWithToolToRender } from '../../utilities/viewportFilters';\nimport triggerAnnotationRenderForViewportIds from '../../utilities/triggerAnnotationRenderForViewportIds';\nimport registerDrawLoop from './planarFreehandROITool/drawLoop';\nimport registerEditLoopCommon from './planarFreehandROITool/editLoopCommon';\nimport registerClosedContourEditLoop from './planarFreehandROITool/closedContourEditLoop';\nimport registerOpenContourEditLoop from './planarFreehandROITool/openContourEditLoop';\nimport registerOpenContourEndEditLoop from './planarFreehandROITool/openContourEndEditLoop';\nimport registerRenderMethods from './planarFreehandROITool/renderMethods';\nimport {\n  AnnotationCompletedEventDetail,\n  AnnotationModifiedEventDetail,\n} from '../../types/EventTypes';\nimport {\n  EventTypes,\n  ToolHandle,\n  Annotation,\n  Annotations,\n  AnnotationStyle,\n  PublicToolProps,\n  ToolProps,\n  SVGDrawingHelper,\n} from '../../types';\nimport { drawLinkedTextBox } from '../../drawingSvg';\nimport { PlanarFreehandROIAnnotation } from '../../types/ToolSpecificAnnotationTypes';\nimport { getTextBoxCoordsCanvas } from '../../utilities/drawing';\nimport { PlanarFreehandROICommonData } from '../../utilities/math/polyline/planarFreehandROIInternalTypes';\n\nimport { getIntersectionCoordinatesWithPolyline } from '../../utilities/math/polyline/getIntersectionWithPolyline';\nimport pointInShapeCallback from '../../utilities/pointInShapeCallback';\nimport { isViewportPreScaled } from '../../utilities/viewport/isViewportPreScaled';\nimport {\n  ModalityUnitOptions,\n  getModalityUnit,\n} from '../../utilities/getModalityUnit';\nimport { BasicStatsCalculator } from '../../utilities/math/basic';\n\nconst { pointCanProjectOnLine } = polyline;\nconst { EPSILON } = CONSTANTS;\n\nconst PARALLEL_THRESHOLD = 1 - EPSILON;\n/**\n * PlanarFreehandROITool lets you draw annotations that define an arbitrarily drawn region.\n * You can use the PlanarFreehandROITool in all perpendicular views (axial, sagittal, coronal),\n * support for oblique views is possible, but not yet supported, due to the implementation of\n * `getSubPixelSpacingAndXYDirections`.\n *\n * The resulting annotation's data and metadata (the\n * state of the viewport while drawing was happening) will get added to the\n * ToolState manager and can be accessed from the ToolState by calling getAnnotations\n * or similar methods.\n *\n * PlanarFreehandROITool annotation can be smoothed on drawing completion. This is a configured based approach.\n * The interpolation process uses b-spline algorithm and consider 4 configurations properties:\n * - interpolation.interpolateOnAdd: to tell whether it should be interpolated or not (for editing it is considered the property interpolateOnEdit) (default: false)\n * - interpolation.interpolateOnEdit: to tell whether it should be interpolated or not when editing (default: false)\n * - interpolation.knotsRatioPercentageOnAdd: percentage of points from Segment that are likely to be considered knots during interpolation (for editing it is considered the property knotsRatioPercentageOnEdit) ( default: 40)\n * - interpolation.knotsRatioPercentageOnEdit: same as knotsRatioPercentageOnAdd but applicable only when editing the tool (default: 40)\n *\n * So, with that said the interpolation might occur when:\n * - drawing is done (i.e mouse is released) and interpolation.interpolateOnAdd is true. Interpolation algorithm uses knotsRatioPercentageOnAdd\n * - edit drawing is done (i.e mouse is released) and interpolation.interpolateOnEdit is true. Interpolation algorithm uses knotsRatioPercentageOnEdit and its only applied to changed segment\n * Interpolation does not occur when:\n * - interpolation.interpolateOnAdd is false and drawing is completed\n * - interpolation.interpolateOnEdit is false and edit is completed\n * - drawing still happening (editing or not)\n *\n * The result of interpolation will be a smoother set of segments.\n * Changing tool configuration (see below) you can fine-tune the interpolation process by changing knotsRatioPercentageOnAdd and knotsRatioPercentageOnEdit value, which smaller values produces a more agressive interpolation.\n * A smaller value of knotsRatioPercentageOnAdd/knotsRatioPercentageOnEdit produces a more agressive interpolation.\n *\n * ```js\n * cornerstoneTools.addTool(PlanarFreehandROITool)\n *\n * const toolGroup = ToolGroupManager.createToolGroup('toolGroupId')\n *\n * toolGroup.addTool(PlanarFreehandROITool.toolName)\n *\n * toolGroup.addViewport('viewportId', 'renderingEngineId')\n *\n * toolGroup.setToolActive(PlanarFreehandROITool.toolName, {\n *   bindings: [\n *    {\n *       mouseButton: MouseBindings.Primary, // Left Click\n *     },\n *   ],\n * })\n *\n * // set interpolation agressiveness while adding new annotation (ps: this does not change if interpolation is ON or OFF)\n * toolGroup.setToolConfiguration(PlanarFreehandROITool.toolName, {\n *   interpolation: { knotsRatioPercentageOnAdd: 30 },\n * });\n *\n * // set interpolation to be ON while editing only\n * toolGroup.setToolConfiguration(PlanarFreehandROITool.toolName, {\n *   interpolation: { interpolateOnAdd: false, interpolateOnEdit: true  },\n * });\n * ```\n *\n * Read more in the Docs section of the website.\n */\n\nclass PlanarFreehandROITool extends AnnotationTool {\n  static toolName;\n\n  public touchDragCallback: any;\n  public mouseDragCallback: any;\n  _throttledCalculateCachedStats: any;\n  private commonData?: PlanarFreehandROICommonData;\n  isDrawing = false;\n  isEditingClosed = false;\n  isEditingOpen = false;\n\n  private activateDraw: (\n    evt: EventTypes.InteractionEventType,\n    annotation: PlanarFreehandROIAnnotation,\n    viewportIdsToRender: string[]\n  ) => void;\n  private activateClosedContourEdit: (\n    evt: EventTypes.InteractionEventType,\n    annotation: PlanarFreehandROIAnnotation,\n    viewportIdsToRender: string[]\n  ) => void;\n  private activateOpenContourEdit: (\n    evt: EventTypes.InteractionEventType,\n    annotation: PlanarFreehandROIAnnotation,\n    viewportIdsToRender: string[]\n  ) => void;\n  private activateOpenContourEndEdit: (\n    evt: EventTypes.InteractionEventType,\n    annotation: PlanarFreehandROIAnnotation,\n    viewportIdsToRender: string[],\n    handle: ToolHandle | null\n  ) => void;\n  private cancelDrawing: (element: HTMLDivElement) => void;\n  private cancelClosedContourEdit: (element: HTMLDivElement) => void;\n  private cancelOpenContourEdit: (element: HTMLDivElement) => void;\n\n  private renderContour: (\n    enabledElement: Types.IEnabledElement,\n    svgDrawingHelper: SVGDrawingHelper,\n    annotation: PlanarFreehandROIAnnotation\n  ) => void;\n  private renderContourBeingDrawn: (\n    enabledElement: Types.IEnabledElement,\n    svgDrawingHelper: SVGDrawingHelper,\n    annotation: PlanarFreehandROIAnnotation\n  ) => void;\n  private renderClosedContourBeingEdited: (\n    enabledElement: Types.IEnabledElement,\n    svgDrawingHelper: SVGDrawingHelper,\n    annotation: PlanarFreehandROIAnnotation\n  ) => void;\n  private renderOpenContourBeingEdited: (\n    enabledElement: Types.IEnabledElement,\n    svgDrawingHelper: SVGDrawingHelper,\n    annotation: PlanarFreehandROIAnnotation\n  ) => void;\n\n  constructor(\n    toolProps: PublicToolProps = {},\n    defaultToolProps: ToolProps = {\n      supportedInteractionTypes: ['Mouse', 'Touch'],\n      configuration: {\n        shadow: true,\n        preventHandleOutsideImage: false,\n        alwaysRenderOpenContourHandles: {\n          // When true, always render end points when you have an open contour, rather\n          // than just rendering a line.\n          enabled: false,\n          // When enabled, use this radius to draw the endpoints whilst not hovering.\n          radius: 2,\n        },\n        allowOpenContours: true,\n        // Proximity in canvas coordinates used to join contours.\n        closeContourProximity: 10,\n        // The proximity at which we fallback to the simplest grabbing logic for\n        // determining what index of the contour to start editing.\n        checkCanvasEditFallbackProximity: 6,\n        // The relative distance that points should be dropped along the polyline\n        // in units of the image pixel spacing. A value of 1 means that nodes must\n        // be placed no closed than the image spacing apart. A value of 4 means that 4\n        // nodes should be placed within the space of one image pixel size. A higher\n        // value gives more finese to the tool/smoother lines, but the value cannot\n        // be infinite as the lines become very computationally expensive to draw.\n        subPixelResolution: 4,\n        interpolation: {\n          interpolateOnAdd: false,\n          interpolateOnEdit: false, // used for edit only\n          knotsRatioPercentageOnAdd: 40,\n          knotsRatioPercentageOnEdit: 40,\n        },\n        calculateStats: false,\n        getTextLines: defaultGetTextLines,\n        statsCalculator: BasicStatsCalculator,\n      },\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n\n    // Register event loops and rendering logic, which are stored in different\n    // Files due to their complexity/size.\n    registerDrawLoop(this);\n    registerEditLoopCommon(this);\n    registerClosedContourEditLoop(this);\n    registerOpenContourEditLoop(this);\n    registerOpenContourEndEditLoop(this);\n    registerRenderMethods(this);\n\n    this._throttledCalculateCachedStats = throttle(\n      this._calculateCachedStats,\n      100,\n      { trailing: true }\n    );\n  }\n\n  /**\n   * Based on the current position of the mouse and the current image, creates\n   * a `PlanarFreehandROIAnnotation` and stores it in the annotationManager.\n   *\n   * @param evt - `EventTypes.NormalizedMouseEventType`\n   * @returns The `PlanarFreehandROIAnnotation` object.\n   */\n  addNewAnnotation = (\n    evt: EventTypes.InteractionEventType\n  ): PlanarFreehandROIAnnotation => {\n    const eventDetail = evt.detail;\n    const { currentPoints, element } = eventDetail;\n    const worldPos = currentPoints.world;\n    const enabledElement = getEnabledElement(element);\n    const { viewport, renderingEngine } = enabledElement;\n    const camera = viewport.getCamera();\n    const { viewPlaneNormal, viewUp } = camera;\n\n    const referencedImageId = this.getReferencedImageId(\n      viewport,\n      worldPos,\n      viewPlaneNormal,\n      viewUp\n    );\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    const FrameOfReferenceUID = viewport.getFrameOfReferenceUID();\n\n    const annotation: PlanarFreehandROIAnnotation = {\n      highlighted: true,\n      invalidated: true,\n      metadata: {\n        viewPlaneNormal: <Types.Point3>[...viewPlaneNormal],\n        viewUp: <Types.Point3>[...viewUp],\n        FrameOfReferenceUID,\n        referencedImageId,\n        toolName: this.getToolName(),\n      },\n      data: {\n        handles: {\n          points: [], // Handle points for open contours\n          activeHandleIndex: null,\n          textBox: {\n            hasMoved: false,\n            worldPosition: <Types.Point3>[0, 0, 0],\n            worldBoundingBox: {\n              topLeft: <Types.Point3>[0, 0, 0],\n              topRight: <Types.Point3>[0, 0, 0],\n              bottomLeft: <Types.Point3>[0, 0, 0],\n              bottomRight: <Types.Point3>[0, 0, 0],\n            },\n          },\n        },\n        polyline: [<Types.Point3>[...worldPos]], // Polyline coordinates\n        label: '',\n        cachedStats: {},\n      },\n    };\n\n    addAnnotation(annotation, element);\n\n    this.activateDraw(evt, annotation, viewportIdsToRender);\n\n    evt.preventDefault();\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    return annotation;\n  };\n\n  /**\n   * Begins an edit of an open contour, when the mouse has selected a handle\n   * (end) of the open contour.\n   *\n   * @param evt - `EventTypes.MouseDownEventType`\n   * @param annotation - `PlanarFreehandROIAnnotation` annotation.\n   * @param handle - The handle index, 0 for the start and 1 for the end.\n   * @param interactionType - interaction type (mouse, touch)\n   */\n  handleSelectedCallback = (\n    evt: EventTypes.InteractionEventType,\n    annotation: PlanarFreehandROIAnnotation,\n    handle: ToolHandle\n  ): void => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    this.activateOpenContourEndEdit(\n      evt,\n      annotation,\n      viewportIdsToRender,\n      handle\n    );\n  };\n\n  /**\n   * Edits the open or closed contour when the line is grabbed and dragged.\n   */\n  toolSelectedCallback = (\n    evt: EventTypes.InteractionEventType,\n    annotation: PlanarFreehandROIAnnotation\n  ): void => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    if (annotation.data.isOpenContour) {\n      this.activateOpenContourEdit(evt, annotation, viewportIdsToRender);\n    } else {\n      this.activateClosedContourEdit(evt, annotation, viewportIdsToRender);\n    }\n  };\n\n  /**\n   * Returns if the canvas point is near the line of the given annotation in the\n   * provided element or not. A proximity is passed to the function to determine the\n   * proximity of the point to the annotation in number of pixels.\n   *\n   * @param element - HTML Element\n   * @param annotation - The `PlanarFreehandROIAnnotation`.\n   * @param canvasCoords - Canvas coordinates\n   * @param proximity - Proximity to tool to consider\n   * @returns Boolean, whether the canvas point is near tool\n   */\n  isPointNearTool = (\n    element: HTMLDivElement,\n    annotation: PlanarFreehandROIAnnotation,\n    canvasCoords: Types.Point2,\n    proximity: number\n  ): boolean => {\n    const enabledElement = getEnabledElement(element);\n    const { viewport } = enabledElement;\n\n    const points = annotation.data.polyline;\n\n    // NOTE: It is implemented this way so that we do not double calculate\n    // points when number crunching adjacent line segments.\n    let previousPoint = viewport.worldToCanvas(points[0]);\n\n    for (let i = 1; i < points.length; i++) {\n      const p1 = previousPoint;\n      const p2 = viewport.worldToCanvas(points[i]);\n\n      const distance = pointCanProjectOnLine(canvasCoords, p1, p2, proximity);\n\n      if (distance === true) {\n        return true;\n      }\n\n      previousPoint = p2;\n    }\n\n    if (annotation.data.isOpenContour) {\n      // Contour is open, don't check last point to first point.\n      return false;\n    }\n\n    // check last point to first point\n    const pStart = viewport.worldToCanvas(points[0]);\n    const pEnd = viewport.worldToCanvas(points[points.length - 1]);\n\n    const distance = pointCanProjectOnLine(\n      canvasCoords,\n      pStart,\n      pEnd,\n      proximity\n    );\n\n    if (distance === true) {\n      return true;\n    }\n\n    return false;\n  };\n\n  cancel = (element: HTMLDivElement): void => {\n    const isDrawing = this.isDrawing;\n    const isEditingOpen = this.isEditingOpen;\n    const isEditingClosed = this.isEditingClosed;\n\n    if (isDrawing) {\n      this.cancelDrawing(element);\n    } else if (isEditingOpen) {\n      this.cancelOpenContourEdit(element);\n    } else if (isEditingClosed) {\n      this.cancelClosedContourEdit(element);\n    }\n  };\n\n  /**\n   * Triggers an annotation modified event.\n   */\n  triggerAnnotationModified = (\n    annotation: PlanarFreehandROIAnnotation,\n    enabledElement: Types.IEnabledElement\n  ): void => {\n    const { viewportId, renderingEngineId } = enabledElement;\n    // Dispatching annotation modified\n    const eventType = Events.ANNOTATION_MODIFIED;\n\n    const eventDetail: AnnotationModifiedEventDetail = {\n      annotation,\n      viewportId,\n      renderingEngineId,\n    };\n    triggerEvent(eventTarget, eventType, eventDetail);\n  };\n\n  /**\n   * Triggers an annotation completed event.\n   */\n  triggerAnnotationCompleted = (\n    annotation: PlanarFreehandROIAnnotation\n  ): void => {\n    const eventType = Events.ANNOTATION_COMPLETED;\n\n    const eventDetail: AnnotationCompletedEventDetail = {\n      annotation,\n    };\n\n    triggerEvent(eventTarget, eventType, eventDetail);\n  };\n\n  /**\n   * @override We need to override this method as the tool doesn't always have\n   * `handles`, which means `filterAnnotationsForDisplay` fails inside\n   * `filterAnnotationsWithinSlice`.\n   */\n  filterInteractableAnnotationsForElement(\n    element: HTMLDivElement,\n    annotations: Annotations\n  ): Annotations | undefined {\n    if (!annotations || !annotations.length) {\n      return;\n    }\n\n    const enabledElement = getEnabledElement(element);\n    const { viewport } = enabledElement;\n\n    let annotationsToDisplay;\n\n    if (viewport instanceof StackViewport) {\n      // Use the default `filterAnnotationsForDisplay` utility, as the stack\n      // path doesn't require handles.\n      annotationsToDisplay = filterAnnotationsForDisplay(viewport, annotations);\n    } else if (viewport instanceof VolumeViewport) {\n      const camera = viewport.getCamera();\n\n      const { spacingInNormalDirection } =\n        csUtils.getTargetVolumeAndSpacingInNormalDir(viewport, camera);\n\n      // Get data with same normal and within the same slice\n      annotationsToDisplay = this.filterAnnotationsWithinSlice(\n        annotations,\n        camera,\n        spacingInNormalDirection\n      );\n    } else {\n      throw new Error(`Viewport Type ${viewport.type} not supported`);\n    }\n\n    return annotationsToDisplay;\n  }\n\n  /**\n   * Altered version of the `utilities.planar.filterAnnotationsWithinSlice`,\n   * which uses the polyline position rather than the handle. As the polyline is\n   * always present.\n   */\n  private filterAnnotationsWithinSlice(\n    annotations: Annotations,\n    camera: Types.ICamera,\n    spacingInNormalDirection: number\n  ): Annotations {\n    const { viewPlaneNormal } = camera;\n\n    const annotationsWithParallelNormals = annotations.filter(\n      (td: Annotation) => {\n        const annotationViewPlaneNormal = td.metadata.viewPlaneNormal;\n\n        const isParallel =\n          Math.abs(vec3.dot(viewPlaneNormal, annotationViewPlaneNormal)) >\n          PARALLEL_THRESHOLD;\n\n        return annotationViewPlaneNormal && isParallel;\n      }\n    );\n\n    // No in plane annotations.\n    if (!annotationsWithParallelNormals.length) {\n      return [];\n    }\n\n    // Annotation should be within the slice, which means that it should be between\n    // camera's focalPoint +/- spacingInNormalDirection.\n\n    const halfSpacingInNormalDirection = spacingInNormalDirection / 2;\n    const { focalPoint } = camera;\n\n    const annotationsWithinSlice = [];\n\n    for (const annotation of annotationsWithParallelNormals) {\n      const data = annotation.data;\n      const point = data.polyline[0];\n\n      if (!annotation.isVisible) {\n        continue;\n      }\n\n      // A = point\n      // B = focal point\n      // P = normal\n\n      // B-A dot P  => Distance in the view direction.\n      // this should be less than half the slice distance.\n\n      const dir = vec3.create();\n\n      vec3.sub(dir, focalPoint, point);\n\n      const dot = vec3.dot(dir, viewPlaneNormal);\n\n      if (Math.abs(dot) < halfSpacingInNormalDirection) {\n        annotationsWithinSlice.push(annotation);\n      }\n    }\n\n    return annotationsWithinSlice;\n  }\n\n  /**\n   * Draws the `PlanarFreehandROIAnnotation`s at each request animation frame.\n   *\n   * @param enabledElement - The Cornerstone's enabledElement.\n   * @param svgDrawingHelper - The svgDrawingHelper providing the context for drawing.\n   */\n  renderAnnotation = (\n    enabledElement: Types.IEnabledElement,\n    svgDrawingHelper: SVGDrawingHelper\n  ): boolean => {\n    let renderStatus = false;\n    const { viewport, renderingEngine } = enabledElement;\n    const { element } = viewport;\n\n    const targetId = this.getTargetId(viewport);\n\n    let annotations = <PlanarFreehandROIAnnotation[]>(\n      getAnnotations(this.getToolName(), element)\n    );\n\n    // Todo: We don't need this anymore, filtering happens in triggerAnnotationRender\n    if (!annotations?.length) {\n      return renderStatus;\n    }\n\n    annotations = this.filterInteractableAnnotationsForElement(\n      element,\n      annotations\n    ) as PlanarFreehandROIAnnotation[];\n\n    if (!annotations?.length) {\n      return renderStatus;\n    }\n\n    const isDrawing = this.isDrawing;\n    const isEditingOpen = this.isEditingOpen;\n    const isEditingClosed = this.isEditingClosed;\n\n    if (!(isDrawing || isEditingOpen || isEditingClosed)) {\n      // No annotations are currently being modified, so we can just use the\n      // render contour method to render all of them\n      annotations.forEach((annotation) => {\n        this.renderContour(enabledElement, svgDrawingHelper, annotation);\n      });\n    } else {\n      // One of the annotations will need special rendering treatment, render all\n      // other annotations not being interacted with using the standard renderContour\n      // rendering path.\n      const activeAnnotationUID = this.commonData.annotation.annotationUID;\n\n      annotations.forEach((annotation) => {\n        if (annotation.annotationUID === activeAnnotationUID) {\n          if (isDrawing) {\n            this.renderContourBeingDrawn(\n              enabledElement,\n              svgDrawingHelper,\n              annotation\n            );\n          } else if (isEditingClosed) {\n            this.renderClosedContourBeingEdited(\n              enabledElement,\n              svgDrawingHelper,\n              annotation\n            );\n          } else if (isEditingOpen) {\n            this.renderOpenContourBeingEdited(\n              enabledElement,\n              svgDrawingHelper,\n              annotation\n            );\n          } else {\n            throw new Error(\n              `Unknown ${this.getToolName()} annotation rendering state`\n            );\n          }\n        } else {\n          this.renderContour(enabledElement, svgDrawingHelper, annotation);\n        }\n      });\n\n      // Todo: return boolean flag for each rendering route in the planar tool.\n      renderStatus = true;\n    }\n\n    if (!this.configuration.calculateStats) {\n      return;\n    }\n\n    annotations.forEach((annotation) => {\n      const activeAnnotationUID = this.commonData?.annotation.annotationUID;\n      if (\n        annotation.annotationUID === activeAnnotationUID &&\n        !this.commonData?.movingTextBox\n      ) {\n        return;\n      }\n\n      if (!this.commonData?.movingTextBox) {\n        const { data } = annotation;\n        if (\n          !data.cachedStats[targetId] ||\n          data.cachedStats[targetId].areaUnit == null\n        ) {\n          data.cachedStats[targetId] = {\n            Modality: null,\n            area: null,\n            max: null,\n            mean: null,\n            stdDev: null,\n            areaUnit: null,\n          };\n\n          this._calculateCachedStats(\n            annotation,\n            viewport,\n            renderingEngine,\n            enabledElement\n          );\n        } else if (annotation.invalidated) {\n          this._throttledCalculateCachedStats(\n            annotation,\n            viewport,\n            renderingEngine,\n            enabledElement\n          );\n        }\n      }\n\n      this._renderStats(annotation, viewport, enabledElement, svgDrawingHelper);\n    });\n\n    return renderStatus;\n  };\n\n  _calculateCachedStats = (\n    annotation,\n    viewport,\n    renderingEngine,\n    enabledElement\n  ) => {\n    const data = annotation.data;\n    const { cachedStats, polyline: points } = data;\n\n    const targetIds = Object.keys(cachedStats);\n\n    for (let i = 0; i < targetIds.length; i++) {\n      const targetId = targetIds[i];\n      const image = this.getTargetIdImage(targetId, renderingEngine);\n\n      // If image does not exists for the targetId, skip. This can be due\n      // to various reasons such as if the target was a volumeViewport, and\n      // the volumeViewport has been decached in the meantime.\n      if (!image) {\n        continue;\n      }\n\n      const { imageData, metadata } = image;\n      const canvasCoordinates = points.map((p) => viewport.worldToCanvas(p));\n\n      // Using an arbitrary start point (canvasPoint), calculate the\n      // mm spacing for the canvas in the X and Y directions.\n      const canvasPoint = canvasCoordinates[0];\n      const originalWorldPoint = viewport.canvasToWorld(canvasPoint);\n      const deltaXPoint = viewport.canvasToWorld([\n        canvasPoint[0] + 1,\n        canvasPoint[1],\n      ]);\n      const deltaYPoint = viewport.canvasToWorld([\n        canvasPoint[0],\n        canvasPoint[1] + 1,\n      ]);\n\n      const deltaInX = vec3.distance(originalWorldPoint, deltaXPoint);\n      const deltaInY = vec3.distance(originalWorldPoint, deltaYPoint);\n\n      const scale = getCalibratedScale(image);\n      let area =\n        polyline.calculateAreaOfPoints(canvasCoordinates) / scale / scale;\n      // Convert from canvas_pixels ^2 to mm^2\n      area *= deltaInX * deltaInY;\n\n      const worldPosIndex = csUtils.transformWorldToIndex(imageData, points[0]);\n      worldPosIndex[0] = Math.floor(worldPosIndex[0]);\n      worldPosIndex[1] = Math.floor(worldPosIndex[1]);\n      worldPosIndex[2] = Math.floor(worldPosIndex[2]);\n\n      let iMin = worldPosIndex[0];\n      let iMax = worldPosIndex[0];\n\n      let jMin = worldPosIndex[1];\n      let jMax = worldPosIndex[1];\n\n      let kMin = worldPosIndex[2];\n      let kMax = worldPosIndex[2];\n\n      for (let j = 1; j < points.length; j++) {\n        const worldPosIndex = csUtils.transformWorldToIndex(\n          imageData,\n          points[j]\n        );\n        worldPosIndex[0] = Math.floor(worldPosIndex[0]);\n        worldPosIndex[1] = Math.floor(worldPosIndex[1]);\n        worldPosIndex[2] = Math.floor(worldPosIndex[2]);\n        iMin = Math.min(iMin, worldPosIndex[0]);\n        iMax = Math.max(iMax, worldPosIndex[0]);\n\n        jMin = Math.min(jMin, worldPosIndex[1]);\n        jMax = Math.max(jMax, worldPosIndex[1]);\n\n        kMin = Math.min(kMin, worldPosIndex[2]);\n        kMax = Math.max(kMax, worldPosIndex[2]);\n      }\n\n      // Expand bounding box\n      const iDelta = 0.01 * (iMax - iMin);\n      const jDelta = 0.01 * (jMax - jMin);\n      const kDelta = 0.01 * (kMax - kMin);\n\n      iMin = Math.floor(iMin - iDelta);\n      iMax = Math.ceil(iMax + iDelta);\n      jMin = Math.floor(jMin - jDelta);\n      jMax = Math.ceil(jMax + jDelta);\n      kMin = Math.floor(kMin - kDelta);\n      kMax = Math.ceil(kMax + kDelta);\n\n      const boundsIJK = [\n        [iMin, iMax],\n        [jMin, jMax],\n        [kMin, kMax],\n      ] as [Types.Point2, Types.Point2, Types.Point2];\n\n      const worldPosEnd = imageData.indexToWorld([iMax, jMax, kMax]);\n      const canvasPosEnd = viewport.worldToCanvas(worldPosEnd);\n\n      let curRow = 0;\n      let intersections = [];\n      let intersectionCounter = 0;\n      const pointsInShape = pointInShapeCallback(\n        imageData,\n        (pointLPS, pointIJK) => {\n          let result = true;\n          const point = viewport.worldToCanvas(pointLPS);\n          if (point[1] != curRow) {\n            intersectionCounter = 0;\n            curRow = point[1];\n            intersections = getIntersectionCoordinatesWithPolyline(\n              canvasCoordinates,\n              point,\n              [canvasPosEnd[0], point[1]]\n            );\n            intersections.sort(\n              (function (index) {\n                return function (a, b) {\n                  return a[index] === b[index]\n                    ? 0\n                    : a[index] < b[index]\n                    ? -1\n                    : 1;\n                };\n              })(0)\n            );\n          }\n          if (intersections.length && point[0] > intersections[0][0]) {\n            intersections.shift();\n            intersectionCounter++;\n          }\n          if (intersectionCounter % 2 === 0) {\n            result = false;\n          }\n          return result;\n        },\n        this.configuration.statsCalculator.statsCallback,\n        boundsIJK\n      );\n\n      const modalityUnitOptions = {\n        isPreScaled: isViewportPreScaled(viewport, targetId),\n        isSuvScaled: this.isSuvScaled(\n          viewport,\n          targetId,\n          annotation.metadata.referencedImageId\n        ),\n      };\n\n      const modalityUnit = getModalityUnit(\n        metadata.Modality,\n        annotation.metadata.referencedImageId,\n        modalityUnitOptions\n      );\n\n      const stats = this.configuration.statsCalculator.getStatistics();\n\n      cachedStats[targetId] = {\n        Modality: metadata.Modality,\n        area,\n        mean: stats[1]?.value,\n        max: stats[0]?.value,\n        stdDev: stats[3]?.value,\n        statsArray: stats,\n        pointsInShape: pointsInShape,\n        areaUnit: getCalibratedAreaUnits(null, image),\n        modalityUnit,\n      };\n    }\n\n    this.triggerAnnotationModified(annotation, enabledElement);\n\n    annotation.invalidated = false;\n\n    return cachedStats;\n  };\n\n  _renderStats = (annotation, viewport, enabledElement, svgDrawingHelper) => {\n    const data = annotation.data;\n    const targetId = this.getTargetId(viewport);\n\n    const styleSpecifier: AnnotationStyle.StyleSpecifier = {\n      toolGroupId: this.toolGroupId,\n      toolName: this.getToolName(),\n      viewportId: enabledElement.viewport.id,\n    };\n\n    const options = this.getLinkedTextBoxStyle(styleSpecifier, annotation);\n    if (!options.visibility) {\n      return;\n    }\n\n    const textLines = this.configuration.getTextLines(data, targetId);\n    if (!textLines || textLines.length === 0) {\n      return;\n    }\n\n    const canvasCoordinates = data.polyline.map((p) =>\n      viewport.worldToCanvas(p)\n    );\n    if (!data.handles.textBox.hasMoved) {\n      const canvasTextBoxCoords = getTextBoxCoordsCanvas(canvasCoordinates);\n\n      data.handles.textBox.worldPosition =\n        viewport.canvasToWorld(canvasTextBoxCoords);\n    }\n\n    const textBoxPosition = viewport.worldToCanvas(\n      data.handles.textBox.worldPosition\n    );\n\n    const textBoxUID = '1';\n    const boundingBox = drawLinkedTextBox(\n      svgDrawingHelper,\n      annotation.annotationUID ?? '',\n      textBoxUID,\n      textLines,\n      textBoxPosition,\n      canvasCoordinates,\n      {},\n      options\n    );\n\n    const { x: left, y: top, width, height } = boundingBox;\n\n    data.handles.textBox.worldBoundingBox = {\n      topLeft: viewport.canvasToWorld([left, top]),\n      topRight: viewport.canvasToWorld([left + width, top]),\n      bottomLeft: viewport.canvasToWorld([left, top + height]),\n      bottomRight: viewport.canvasToWorld([left + width, top + height]),\n    };\n  };\n}\n\nfunction defaultGetTextLines(data, targetId): string[] {\n  const cachedVolumeStats = data.cachedStats[targetId];\n  const { area, mean, stdDev, max, isEmptyArea, areaUnit, modalityUnit } =\n    cachedVolumeStats;\n\n  const textLines: string[] = [];\n\n  if (area) {\n    const areaLine = isEmptyArea\n      ? `Area: Oblique not supported`\n      : `Area: ${roundNumber(area)} ${areaUnit}`;\n    textLines.push(areaLine);\n  }\n\n  if (mean) {\n    textLines.push(`Mean: ${roundNumber(mean)} ${modalityUnit}`);\n  }\n\n  if (max) {\n    textLines.push(`Max: ${roundNumber(max)} ${modalityUnit}`);\n  }\n\n  if (stdDev) {\n    textLines.push(`Std Dev: ${roundNumber(stdDev)} ${modalityUnit}`);\n  }\n\n  return textLines;\n}\n\nPlanarFreehandROITool.toolName = 'PlanarFreehandROI';\nexport default PlanarFreehandROITool;\n","import { Events } from '../../enums';\nimport {\n  getEnabledElement,\n  triggerEvent,\n  eventTarget,\n  utilities as csUtils,\n} from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\nimport { AnnotationTool } from '../base';\nimport {\n  addAnnotation,\n  getAnnotations,\n  removeAnnotation,\n} from '../../stateManagement/annotation/annotationState';\nimport { isAnnotationLocked } from '../../stateManagement/annotation/annotationLocking';\nimport * as lineSegment from '../../utilities/math/line';\n\nimport {\n  drawHandles as drawHandlesSvg,\n  drawArrow as drawArrowSvg,\n  drawLinkedTextBox as drawLinkedTextBoxSvg,\n} from '../../drawingSvg';\nimport { state } from '../../store';\nimport { getViewportIdsWithToolToRender } from '../../utilities/viewportFilters';\nimport { getTextBoxCoordsCanvas } from '../../utilities/drawing';\nimport triggerAnnotationRenderForViewportIds from '../../utilities/triggerAnnotationRenderForViewportIds';\nimport {\n  AnnotationCompletedEventDetail,\n  AnnotationModifiedEventDetail,\n} from '../../types/EventTypes';\n\nimport {\n  resetElementCursor,\n  hideElementCursor,\n} from '../../cursors/elementCursor';\n\nimport {\n  EventTypes,\n  ToolHandle,\n  TextBoxHandle,\n  PublicToolProps,\n  ToolProps,\n  InteractionTypes,\n  SVGDrawingHelper,\n} from '../../types';\nimport { ArrowAnnotation } from '../../types/ToolSpecificAnnotationTypes';\nimport { StyleSpecifier } from '../../types/AnnotationStyle';\n\nclass ArrowAnnotateTool extends AnnotationTool {\n  static toolName;\n\n  public touchDragCallback: any;\n  public mouseDragCallback: any;\n  _throttledCalculateCachedStats: any;\n  editData: {\n    annotation: any;\n    viewportIdsToRender: string[];\n    handleIndex?: number;\n    movingTextBox?: boolean;\n    newAnnotation?: boolean;\n    hasMoved?: boolean;\n  } | null;\n  isDrawing: boolean;\n  isHandleOutsideImage: boolean;\n\n  constructor(\n    toolProps: PublicToolProps = {},\n    defaultToolProps: ToolProps = {\n      supportedInteractionTypes: ['Mouse', 'Touch'],\n      configuration: {\n        shadow: true,\n        getTextCallback,\n        changeTextCallback,\n        preventHandleOutsideImage: false,\n        arrowFirst: true,\n      },\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n  }\n\n  /**\n   * Based on the current position of the mouse and the current imageId to create\n   * a Length Annotation and stores it in the annotationManager\n   *\n   * @param evt -  EventTypes.NormalizedMouseEventType\n   * @returns The annotation object.\n   *\n   */\n  addNewAnnotation = (\n    evt: EventTypes.InteractionEventType\n  ): ArrowAnnotation => {\n    const eventDetail = evt.detail;\n    const { currentPoints, element } = eventDetail;\n    const worldPos = currentPoints.world;\n    const enabledElement = getEnabledElement(element);\n    const { viewport, renderingEngine } = enabledElement;\n\n    hideElementCursor(element);\n    this.isDrawing = true;\n\n    const camera = viewport.getCamera();\n    const { viewPlaneNormal, viewUp } = camera;\n\n    const referencedImageId = this.getReferencedImageId(\n      viewport,\n      worldPos,\n      viewPlaneNormal,\n      viewUp\n    );\n\n    const { arrowFirst } = this.configuration;\n    const FrameOfReferenceUID = viewport.getFrameOfReferenceUID();\n\n    const annotation = {\n      highlighted: true,\n      invalidated: true,\n      metadata: {\n        toolName: this.getToolName(),\n        viewPlaneNormal: <Types.Point3>[...viewPlaneNormal],\n        viewUp: <Types.Point3>[...viewUp],\n        FrameOfReferenceUID,\n        referencedImageId,\n      },\n      data: {\n        text: '',\n        handles: {\n          points: [<Types.Point3>[...worldPos], <Types.Point3>[...worldPos]],\n          activeHandleIndex: null,\n          arrowFirst,\n          textBox: {\n            hasMoved: false,\n            worldPosition: <Types.Point3>[0, 0, 0],\n            worldBoundingBox: {\n              topLeft: <Types.Point3>[0, 0, 0],\n              topRight: <Types.Point3>[0, 0, 0],\n              bottomLeft: <Types.Point3>[0, 0, 0],\n              bottomRight: <Types.Point3>[0, 0, 0],\n            },\n          },\n        },\n        label: '',\n      },\n    };\n\n    addAnnotation(annotation, element);\n\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    this.editData = {\n      annotation,\n      viewportIdsToRender,\n      handleIndex: 1,\n      movingTextBox: false,\n      newAnnotation: true,\n      hasMoved: false,\n    };\n    this._activateDraw(element);\n\n    evt.preventDefault();\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    return annotation;\n  };\n\n  /**\n   * It returns if the canvas point is near the provided length annotation in the provided\n   * element or not. A proximity is passed to the function to determine the\n   * proximity of the point to the annotation in number of pixels.\n   *\n   * @param element - HTML Element\n   * @param annotation - Annotation\n   * @param canvasCoords - Canvas coordinates\n   * @param proximity - Proximity to tool to consider\n   * @returns Boolean, whether the canvas point is near tool\n   */\n  isPointNearTool = (\n    element: HTMLDivElement,\n    annotation: ArrowAnnotation,\n    canvasCoords: Types.Point2,\n    proximity: number\n  ): boolean => {\n    const enabledElement = getEnabledElement(element);\n    const { viewport } = enabledElement;\n    const { data } = annotation;\n    const [point1, point2] = data.handles.points;\n    const canvasPoint1 = viewport.worldToCanvas(point1);\n    const canvasPoint2 = viewport.worldToCanvas(point2);\n\n    const line = {\n      start: {\n        x: canvasPoint1[0],\n        y: canvasPoint1[1],\n      },\n      end: {\n        x: canvasPoint2[0],\n        y: canvasPoint2[1],\n      },\n    };\n\n    const distanceToPoint = lineSegment.distanceToPoint(\n      [line.start.x, line.start.y],\n      [line.end.x, line.end.y],\n      [canvasCoords[0], canvasCoords[1]]\n    );\n\n    if (distanceToPoint <= proximity) {\n      return true;\n    }\n\n    return false;\n  };\n\n  toolSelectedCallback = (\n    evt: EventTypes.InteractionEventType,\n    annotation: ArrowAnnotation\n  ): void => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    annotation.highlighted = true;\n\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    this.editData = {\n      annotation,\n      viewportIdsToRender,\n      movingTextBox: false,\n    };\n\n    this._activateModify(element);\n\n    hideElementCursor(element);\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    evt.preventDefault();\n  };\n\n  handleSelectedCallback(\n    evt: EventTypes.InteractionEventType,\n    annotation: ArrowAnnotation,\n    handle: ToolHandle\n  ): void {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n    const { data } = annotation;\n\n    annotation.highlighted = true;\n\n    let movingTextBox = false;\n    let handleIndex;\n\n    if ((handle as TextBoxHandle).worldPosition) {\n      movingTextBox = true;\n    } else {\n      handleIndex = data.handles.points.findIndex((p) => p === handle);\n    }\n\n    // Find viewports to render on drag.\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    this.editData = {\n      annotation,\n      viewportIdsToRender,\n      handleIndex,\n      movingTextBox,\n    };\n    this._activateModify(element);\n\n    hideElementCursor(element);\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    evt.preventDefault();\n  }\n\n  _endCallback = (evt: EventTypes.InteractionEventType): void => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    const { annotation, viewportIdsToRender, newAnnotation, hasMoved } =\n      this.editData;\n    const { data } = annotation;\n\n    if (newAnnotation && !hasMoved) {\n      // when user starts the drawing by click, and moving the mouse, instead\n      // of click and drag\n      return;\n    }\n\n    data.handles.activeHandleIndex = null;\n\n    this._deactivateModify(element);\n    this._deactivateDraw(element);\n    resetElementCursor(element);\n\n    const enabledElement = getEnabledElement(element);\n    const { viewportId, renderingEngineId, renderingEngine } = enabledElement;\n\n    if (\n      this.isHandleOutsideImage &&\n      this.configuration.preventHandleOutsideImage\n    ) {\n      removeAnnotation(annotation.annotationUID);\n    }\n\n    if (newAnnotation) {\n      this.configuration.getTextCallback((text) => {\n        if (!text) {\n          removeAnnotation(annotation.annotationUID);\n          triggerAnnotationRenderForViewportIds(\n            renderingEngine,\n            viewportIdsToRender\n          );\n          this.editData = null;\n          this.isDrawing = false;\n          return;\n        }\n        annotation.data.text = text;\n\n        const eventType = Events.ANNOTATION_COMPLETED;\n\n        const eventDetail: AnnotationCompletedEventDetail = {\n          annotation,\n        };\n\n        triggerEvent(eventTarget, eventType, eventDetail);\n\n        triggerAnnotationRenderForViewportIds(\n          renderingEngine,\n          viewportIdsToRender\n        );\n      });\n    } else {\n      const eventType = Events.ANNOTATION_MODIFIED;\n\n      const eventDetail: AnnotationModifiedEventDetail = {\n        annotation,\n        viewportId,\n        renderingEngineId,\n      };\n\n      triggerEvent(eventTarget, eventType, eventDetail);\n    }\n\n    this.editData = null;\n    this.isDrawing = false;\n  };\n\n  _dragCallback = (evt: EventTypes.InteractionEventType): void => {\n    this.isDrawing = true;\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    const { annotation, viewportIdsToRender, handleIndex, movingTextBox } =\n      this.editData;\n    const { data } = annotation;\n\n    if (movingTextBox) {\n      // Drag mode - moving text box\n      const { deltaPoints } = eventDetail as EventTypes.MouseDragEventDetail;\n      const worldPosDelta = deltaPoints.world;\n\n      const { textBox } = data.handles;\n      const { worldPosition } = textBox;\n\n      worldPosition[0] += worldPosDelta[0];\n      worldPosition[1] += worldPosDelta[1];\n      worldPosition[2] += worldPosDelta[2];\n\n      textBox.hasMoved = true;\n    } else if (handleIndex === undefined) {\n      // Drag mode - moving handle\n      const { deltaPoints } = eventDetail as EventTypes.MouseDragEventDetail;\n      const worldPosDelta = deltaPoints.world;\n\n      const points = data.handles.points;\n\n      points.forEach((point) => {\n        point[0] += worldPosDelta[0];\n        point[1] += worldPosDelta[1];\n        point[2] += worldPosDelta[2];\n      });\n      annotation.invalidated = true;\n    } else {\n      // Move mode - after double click, and mouse move to draw\n      const { currentPoints } = eventDetail;\n      const worldPos = currentPoints.world;\n\n      data.handles.points[handleIndex] = [...worldPos];\n      annotation.invalidated = true;\n    }\n\n    this.editData.hasMoved = true;\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n  };\n\n  touchTapCallback = (evt: EventTypes.TouchTapEventType) => {\n    if (evt.detail.taps == 2) {\n      this.doubleClickCallback(evt);\n    }\n  };\n\n  doubleClickCallback = (evt: EventTypes.TouchTapEventType): void => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n    let annotations = getAnnotations(this.getToolName(), element);\n\n    annotations = this.filterInteractableAnnotationsForElement(\n      element,\n      annotations\n    );\n\n    if (!annotations?.length) {\n      return;\n    }\n\n    const clickedAnnotation = annotations.find((annotation) =>\n      this.isPointNearTool(\n        element,\n        annotation as ArrowAnnotation,\n        eventDetail.currentPoints.canvas,\n        6 // Todo: get from configuration\n      )\n    );\n\n    if (!clickedAnnotation) {\n      return;\n    }\n\n    const annotation = clickedAnnotation as ArrowAnnotation;\n\n    this.configuration.changeTextCallback(\n      clickedAnnotation,\n      evt.detail,\n      this._doneChangingTextCallback.bind(this, element, annotation)\n    );\n\n    this.editData = null;\n    this.isDrawing = false;\n\n    // This double click was handled and the dialogue was displayed.\n    // No need for any other listener to handle it too - stopImmediatePropagation\n    // helps ensure this primarily so that no other listeners on the target element\n    // get called.\n    evt.stopImmediatePropagation();\n    evt.preventDefault();\n  };\n\n  _doneChangingTextCallback(element, annotation, updatedText): void {\n    annotation.data.text = updatedText;\n\n    const { renderingEngine, viewportId, renderingEngineId } =\n      getEnabledElement(element);\n\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    // Dispatching annotation modified\n    const eventType = Events.ANNOTATION_MODIFIED;\n\n    triggerEvent(eventTarget, eventType, {\n      annotation,\n      viewportId,\n      renderingEngineId,\n    });\n  }\n\n  cancel = (element: HTMLDivElement) => {\n    // If it is mid-draw or mid-modify\n    if (this.isDrawing) {\n      this.isDrawing = false;\n      this._deactivateDraw(element);\n      this._deactivateModify(element);\n      resetElementCursor(element);\n\n      const { annotation, viewportIdsToRender, newAnnotation } = this.editData;\n      const { data } = annotation;\n\n      annotation.highlighted = false;\n      data.handles.activeHandleIndex = null;\n\n      const enabledElement = getEnabledElement(element);\n      const { renderingEngine } = enabledElement;\n\n      triggerAnnotationRenderForViewportIds(\n        renderingEngine,\n        viewportIdsToRender\n      );\n\n      if (newAnnotation) {\n        const eventType = Events.ANNOTATION_COMPLETED;\n\n        const eventDetail: AnnotationCompletedEventDetail = {\n          annotation,\n        };\n\n        triggerEvent(eventTarget, eventType, eventDetail);\n      }\n\n      this.editData = null;\n      return annotation.annotationUID;\n    }\n  };\n\n  _activateModify = (element: HTMLDivElement) => {\n    state.isInteractingWithTool = true;\n\n    element.addEventListener(\n      Events.MOUSE_UP,\n      this._endCallback as EventListener\n    );\n    element.addEventListener(\n      Events.MOUSE_DRAG,\n      this._dragCallback as EventListener\n    );\n    element.addEventListener(\n      Events.MOUSE_CLICK,\n      this._endCallback as EventListener\n    );\n\n    element.addEventListener(\n      Events.TOUCH_TAP,\n      this._endCallback as EventListener\n    );\n    element.addEventListener(\n      Events.TOUCH_END,\n      this._endCallback as EventListener\n    );\n    element.addEventListener(\n      Events.TOUCH_DRAG,\n      this._dragCallback as EventListener\n    );\n  };\n\n  _deactivateModify = (element: HTMLDivElement) => {\n    state.isInteractingWithTool = false;\n\n    element.removeEventListener(\n      Events.MOUSE_UP,\n      this._endCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.MOUSE_DRAG,\n      this._dragCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.MOUSE_CLICK,\n      this._endCallback as EventListener\n    );\n\n    element.removeEventListener(\n      Events.TOUCH_TAP,\n      this._endCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.TOUCH_DRAG,\n      this._dragCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.TOUCH_END,\n      this._endCallback as EventListener\n    );\n  };\n\n  _activateDraw = (element: HTMLDivElement) => {\n    state.isInteractingWithTool = true;\n\n    element.addEventListener(\n      Events.MOUSE_UP,\n      this._endCallback as EventListener\n    );\n    element.addEventListener(\n      Events.MOUSE_DRAG,\n      this._dragCallback as EventListener\n    );\n    element.addEventListener(\n      Events.MOUSE_MOVE,\n      this._dragCallback as EventListener\n    );\n    element.addEventListener(\n      Events.MOUSE_CLICK,\n      this._endCallback as EventListener\n    );\n\n    element.addEventListener(\n      Events.TOUCH_TAP,\n      this._endCallback as EventListener\n    );\n    element.addEventListener(\n      Events.TOUCH_END,\n      this._endCallback as EventListener\n    );\n    element.addEventListener(\n      Events.TOUCH_DRAG,\n      this._dragCallback as EventListener\n    );\n  };\n\n  _deactivateDraw = (element: HTMLDivElement) => {\n    state.isInteractingWithTool = false;\n\n    element.removeEventListener(\n      Events.MOUSE_UP,\n      this._endCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.MOUSE_DRAG,\n      this._dragCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.MOUSE_MOVE,\n      this._dragCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.MOUSE_CLICK,\n      this._endCallback as EventListener\n    );\n\n    element.removeEventListener(\n      Events.TOUCH_TAP,\n      this._endCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.TOUCH_END,\n      this._endCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.TOUCH_DRAG,\n      this._dragCallback as EventListener\n    );\n  };\n\n  /**\n   * it is used to draw the length annotation in each\n   * request animation frame. It calculates the updated cached statistics if\n   * data is invalidated and cache it.\n   *\n   * @param enabledElement - The Cornerstone's enabledElement.\n   * @param svgDrawingHelper - The svgDrawingHelper providing the context for drawing.\n   */\n  renderAnnotation = (\n    enabledElement: Types.IEnabledElement,\n    svgDrawingHelper: SVGDrawingHelper\n  ): boolean => {\n    let renderStatus = false;\n    const { viewport } = enabledElement;\n    const { element } = viewport;\n\n    let annotations = getAnnotations(this.getToolName(), element);\n\n    // Todo: We don't need this anymore, filtering happens in triggerAnnotationRender\n    if (!annotations?.length) {\n      return renderStatus;\n    }\n\n    annotations = this.filterInteractableAnnotationsForElement(\n      element,\n      annotations\n    );\n\n    if (!annotations?.length) {\n      return renderStatus;\n    }\n\n    const styleSpecifier: StyleSpecifier = {\n      toolGroupId: this.toolGroupId,\n      toolName: this.getToolName(),\n      viewportId: enabledElement.viewport.id,\n    };\n\n    // Draw SVG\n    for (let i = 0; i < annotations.length; i++) {\n      const annotation = annotations[i] as ArrowAnnotation;\n      const { annotationUID, data } = annotation;\n      const { handles, text } = data;\n      const { points, activeHandleIndex } = handles;\n\n      styleSpecifier.annotationUID = annotationUID;\n\n      const lineWidth = this.getStyle('lineWidth', styleSpecifier, annotation);\n      const lineDash = this.getStyle('lineDash', styleSpecifier, annotation);\n      const color = this.getStyle('color', styleSpecifier, annotation);\n\n      const canvasCoordinates = points.map((p) => viewport.worldToCanvas(p));\n\n      let activeHandleCanvasCoords;\n\n      if (\n        !isAnnotationLocked(annotation) &&\n        !this.editData &&\n        activeHandleIndex !== null\n      ) {\n        // Not locked or creating and hovering over handle, so render handle.\n        activeHandleCanvasCoords = [canvasCoordinates[activeHandleIndex]];\n      }\n\n      if (activeHandleCanvasCoords) {\n        const handleGroupUID = '0';\n\n        drawHandlesSvg(\n          svgDrawingHelper,\n          annotationUID,\n          handleGroupUID,\n          canvasCoordinates,\n          {\n            color,\n            lineWidth,\n          }\n        );\n      }\n\n      const arrowUID = '1';\n      if (this.configuration.arrowFirst) {\n        drawArrowSvg(\n          svgDrawingHelper,\n          annotationUID,\n          arrowUID,\n          canvasCoordinates[1],\n          canvasCoordinates[0],\n          {\n            color,\n            width: lineWidth,\n            lineDash: lineDash,\n          }\n        );\n      } else {\n        drawArrowSvg(\n          svgDrawingHelper,\n          annotationUID,\n          arrowUID,\n          canvasCoordinates[0],\n          canvasCoordinates[1],\n          {\n            color,\n            width: lineWidth,\n            lineDash: lineDash,\n          }\n        );\n      }\n\n      renderStatus = true;\n\n      // If rendering engine has been destroyed while rendering\n      if (!viewport.getRenderingEngine()) {\n        console.warn('Rendering Engine has been destroyed');\n        return renderStatus;\n      }\n\n      if (!text) {\n        continue;\n      }\n\n      const options = this.getLinkedTextBoxStyle(styleSpecifier, annotation);\n      if (!options.visibility) {\n        data.handles.textBox = {\n          hasMoved: false,\n          worldPosition: <Types.Point3>[0, 0, 0],\n          worldBoundingBox: {\n            topLeft: <Types.Point3>[0, 0, 0],\n            topRight: <Types.Point3>[0, 0, 0],\n            bottomLeft: <Types.Point3>[0, 0, 0],\n            bottomRight: <Types.Point3>[0, 0, 0],\n          },\n        };\n        continue;\n      }\n\n      // Need to update to sync w/ annotation while unlinked/not moved\n      if (!data.handles.textBox.hasMoved) {\n        // linked to the point that doesn't have the arrowhead by default\n        const canvasTextBoxCoords = canvasCoordinates[1];\n\n        data.handles.textBox.worldPosition =\n          viewport.canvasToWorld(canvasTextBoxCoords);\n      }\n\n      const textBoxPosition = viewport.worldToCanvas(\n        data.handles.textBox.worldPosition\n      );\n\n      const textBoxUID = '1';\n      const boundingBox = drawLinkedTextBoxSvg(\n        svgDrawingHelper,\n        annotationUID,\n        textBoxUID,\n        [text],\n        textBoxPosition,\n        canvasCoordinates,\n        {},\n        options\n      );\n\n      const { x: left, y: top, width, height } = boundingBox;\n\n      data.handles.textBox.worldBoundingBox = {\n        topLeft: viewport.canvasToWorld([left, top]),\n        topRight: viewport.canvasToWorld([left + width, top]),\n        bottomLeft: viewport.canvasToWorld([left, top + height]),\n        bottomRight: viewport.canvasToWorld([left + width, top + height]),\n      };\n    }\n\n    return renderStatus;\n  };\n\n  _isInsideVolume(index1, index2, dimensions) {\n    return (\n      csUtils.indexWithinDimensions(index1, dimensions) &&\n      csUtils.indexWithinDimensions(index2, dimensions)\n    );\n  }\n}\n\nfunction getTextCallback(doneChangingTextCallback) {\n  return doneChangingTextCallback(prompt('Enter your annotation:'));\n}\n\nfunction changeTextCallback(data, eventData, doneChangingTextCallback) {\n  return doneChangingTextCallback(prompt('Enter your annotation:'));\n}\n\nArrowAnnotateTool.toolName = 'ArrowAnnotate';\nexport default ArrowAnnotateTool;\n","import { Events } from '../../enums';\nimport {\n  getEnabledElement,\n  triggerEvent,\n  eventTarget,\n} from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\nimport { AnnotationTool } from '../base';\nimport throttle from '../../utilities/throttle';\nimport {\n  addAnnotation,\n  getAnnotations,\n  removeAnnotation,\n} from '../../stateManagement/annotation/annotationState';\nimport { isAnnotationLocked } from '../../stateManagement/annotation/annotationLocking';\nimport * as lineSegment from '../../utilities/math/line';\nimport angleBetweenLines from '../../utilities/math/angle/angleBetweenLines';\nimport roundNumber from '../../utilities/roundNumber';\n\nimport {\n  drawHandles as drawHandlesSvg,\n  drawLine as drawLineSvg,\n  drawLinkedTextBox as drawLinkedTextBoxSvg,\n} from '../../drawingSvg';\nimport { state } from '../../store';\nimport { getViewportIdsWithToolToRender } from '../../utilities/viewportFilters';\nimport { getTextBoxCoordsCanvas } from '../../utilities/drawing';\nimport triggerAnnotationRenderForViewportIds from '../../utilities/triggerAnnotationRenderForViewportIds';\nimport {\n  AnnotationCompletedEventDetail,\n  AnnotationModifiedEventDetail,\n} from '../../types/EventTypes';\n\nimport {\n  resetElementCursor,\n  hideElementCursor,\n} from '../../cursors/elementCursor';\n\nimport {\n  EventTypes,\n  ToolHandle,\n  TextBoxHandle,\n  PublicToolProps,\n  ToolProps,\n  InteractionTypes,\n  SVGDrawingHelper,\n} from '../../types';\nimport { AngleAnnotation } from '../../types/ToolSpecificAnnotationTypes';\nimport { StyleSpecifier } from '../../types/AnnotationStyle';\n\nclass AngleTool extends AnnotationTool {\n  static toolName;\n\n  public touchDragCallback: any;\n  public mouseDragCallback: any;\n  angleStartedNotYetCompleted: boolean;\n  _throttledCalculateCachedStats: any;\n  editData: {\n    annotation: any;\n    viewportIdsToRender: string[];\n    handleIndex?: number;\n    movingTextBox?: boolean;\n    newAnnotation?: boolean;\n    hasMoved?: boolean;\n  } | null;\n  isDrawing: boolean;\n  isHandleOutsideImage: boolean;\n\n  constructor(\n    toolProps: PublicToolProps = {},\n    defaultToolProps: ToolProps = {\n      supportedInteractionTypes: ['Mouse', 'Touch'],\n      configuration: {\n        shadow: true,\n        preventHandleOutsideImage: false,\n        getTextLines: defaultGetTextLines,\n      },\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n\n    this._throttledCalculateCachedStats = throttle(\n      this._calculateCachedStats,\n      100,\n      { trailing: true }\n    );\n  }\n\n  /**\n   * Based on the current position of the mouse and the current imageId to create\n   * a Length Annotation and stores it in the annotationManager\n   *\n   * @param evt -  EventTypes.InteractionEventType\n   * @returns The annotation object.\n   *\n   */\n  addNewAnnotation = (\n    evt: EventTypes.InteractionEventType\n  ): AngleAnnotation => {\n    if (this.angleStartedNotYetCompleted) {\n      return;\n    }\n\n    this.angleStartedNotYetCompleted = true;\n    const eventDetail = evt.detail;\n    const { currentPoints, element } = eventDetail;\n\n    const worldPos = currentPoints.world;\n    const enabledElement = getEnabledElement(element);\n    const { viewport, renderingEngine } = enabledElement;\n\n    hideElementCursor(element);\n    this.isDrawing = true;\n\n    const camera = viewport.getCamera();\n    const { viewPlaneNormal, viewUp } = camera;\n\n    const referencedImageId = this.getReferencedImageId(\n      viewport,\n      worldPos,\n      viewPlaneNormal,\n      viewUp\n    );\n\n    const FrameOfReferenceUID = viewport.getFrameOfReferenceUID();\n\n    const annotation = {\n      highlighted: true,\n      invalidated: true,\n      metadata: {\n        toolName: this.getToolName(),\n        viewPlaneNormal: <Types.Point3>[...viewPlaneNormal],\n        viewUp: <Types.Point3>[...viewUp],\n        FrameOfReferenceUID,\n        referencedImageId,\n      },\n      data: {\n        handles: {\n          points: [<Types.Point3>[...worldPos], <Types.Point3>[...worldPos]],\n          activeHandleIndex: null,\n          textBox: {\n            hasMoved: false,\n            worldPosition: <Types.Point3>[0, 0, 0],\n            worldBoundingBox: {\n              topLeft: <Types.Point3>[0, 0, 0],\n              topRight: <Types.Point3>[0, 0, 0],\n              bottomLeft: <Types.Point3>[0, 0, 0],\n              bottomRight: <Types.Point3>[0, 0, 0],\n            },\n          },\n        },\n        label: '',\n        cachedStats: {},\n      },\n    };\n\n    addAnnotation(annotation, element);\n\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    this.editData = {\n      annotation,\n      viewportIdsToRender,\n      handleIndex: 1,\n      movingTextBox: false,\n      newAnnotation: true,\n      hasMoved: false,\n    };\n    this._activateDraw(element);\n\n    evt.preventDefault();\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    return annotation;\n  };\n\n  /**\n   * It returns if the canvas point is near the provided length annotation in the provided\n   * element or not. A proximity is passed to the function to determine the\n   * proximity of the point to the annotation in number of pixels.\n   *\n   * @param element - HTML Element\n   * @param annotation - Annotation\n   * @param canvasCoords - Canvas coordinates\n   * @param proximity - Proximity to tool to consider\n   * @returns Boolean, whether the canvas point is near tool\n   */\n  isPointNearTool = (\n    element: HTMLDivElement,\n    annotation: AngleAnnotation,\n    canvasCoords: Types.Point2,\n    proximity: number\n  ): boolean => {\n    const enabledElement = getEnabledElement(element);\n    const { viewport } = enabledElement;\n    const { data } = annotation;\n    const [point1, point2, point3] = data.handles.points;\n    const canvasPoint1 = viewport.worldToCanvas(point1);\n    const canvasPoint2 = viewport.worldToCanvas(point2);\n\n    const line1 = {\n      start: {\n        x: canvasPoint1[0],\n        y: canvasPoint1[1],\n      },\n      end: {\n        x: canvasPoint2[0],\n        y: canvasPoint2[1],\n      },\n    };\n\n    const distanceToPoint = lineSegment.distanceToPoint(\n      [line1.start.x, line1.start.y],\n      [line1.end.x, line1.end.y],\n      [canvasCoords[0], canvasCoords[1]]\n    );\n\n    if (distanceToPoint <= proximity) {\n      return true;\n    }\n    if (!point3) {\n      return false;\n    }\n\n    const canvasPoint3 = viewport.worldToCanvas(point3);\n\n    const line2 = {\n      start: {\n        x: canvasPoint2[0],\n        y: canvasPoint2[1],\n      },\n      end: {\n        x: canvasPoint3[0],\n        y: canvasPoint3[1],\n      },\n    };\n\n    const distanceToPoint2 = lineSegment.distanceToPoint(\n      [line2.start.x, line2.start.y],\n      [line2.end.x, line2.end.y],\n      [canvasCoords[0], canvasCoords[1]]\n    );\n\n    if (distanceToPoint2 <= proximity) {\n      return true;\n    }\n\n    return false;\n  };\n\n  toolSelectedCallback = (\n    evt: EventTypes.InteractionEventType,\n    annotation: AngleAnnotation\n  ): void => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    annotation.highlighted = true;\n\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    this.editData = {\n      annotation,\n      viewportIdsToRender,\n      movingTextBox: false,\n    };\n\n    this._activateModify(element);\n\n    hideElementCursor(element);\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    evt.preventDefault();\n  };\n\n  handleSelectedCallback(\n    evt: EventTypes.InteractionEventType,\n    annotation: AngleAnnotation,\n    handle: ToolHandle\n  ): void {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n    const { data } = annotation;\n\n    annotation.highlighted = true;\n\n    let movingTextBox = false;\n    let handleIndex;\n\n    if ((handle as TextBoxHandle).worldPosition) {\n      movingTextBox = true;\n    } else {\n      handleIndex = data.handles.points.findIndex((p) => p === handle);\n    }\n\n    // Find viewports to render on drag.\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    this.editData = {\n      annotation,\n      viewportIdsToRender,\n      handleIndex,\n      movingTextBox,\n    };\n    this._activateModify(element);\n\n    hideElementCursor(element);\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    evt.preventDefault();\n  }\n\n  _endCallback = (evt: EventTypes.InteractionEventType): void => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    const { annotation, viewportIdsToRender, newAnnotation, hasMoved } =\n      this.editData;\n\n    const { data } = annotation;\n    if (newAnnotation && !hasMoved) {\n      // when user starts the drawing by click, and moving the mouse, instead\n      // of click and drag\n      return;\n    }\n\n    // If preventing new measurement means we are in the middle of an existing measurement\n    // we shouldn't deactivate modify or draw\n    if (this.angleStartedNotYetCompleted && data.handles.points.length === 2) {\n      // adds the last point to the measurement\n      this.editData.handleIndex = 2;\n      return;\n    }\n\n    this.angleStartedNotYetCompleted = false;\n    data.handles.activeHandleIndex = null;\n\n    this._deactivateModify(element);\n    this._deactivateDraw(element);\n    resetElementCursor(element);\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    if (\n      this.isHandleOutsideImage &&\n      this.configuration.preventHandleOutsideImage\n    ) {\n      removeAnnotation(annotation.annotationUID);\n    }\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    if (newAnnotation) {\n      const eventType = Events.ANNOTATION_COMPLETED;\n\n      const eventDetail: AnnotationCompletedEventDetail = {\n        annotation,\n      };\n\n      triggerEvent(eventTarget, eventType, eventDetail);\n    }\n\n    this.editData = null;\n    this.isDrawing = false;\n  };\n\n  _dragCallback = (evt: EventTypes.InteractionEventType): void => {\n    this.isDrawing = true;\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    const { annotation, viewportIdsToRender, handleIndex, movingTextBox } =\n      this.editData;\n    const { data } = annotation;\n\n    if (movingTextBox) {\n      // Drag mode - moving text box\n      const { deltaPoints } = eventDetail as EventTypes.MouseDragEventDetail;\n      const worldPosDelta = deltaPoints.world;\n\n      const { textBox } = data.handles;\n      const { worldPosition } = textBox;\n\n      worldPosition[0] += worldPosDelta[0];\n      worldPosition[1] += worldPosDelta[1];\n      worldPosition[2] += worldPosDelta[2];\n\n      textBox.hasMoved = true;\n    } else if (handleIndex === undefined) {\n      // Drag mode - moving handle\n      const { deltaPoints } = eventDetail as EventTypes.MouseDragEventDetail;\n      const worldPosDelta = deltaPoints.world;\n\n      const points = data.handles.points;\n\n      points.forEach((point) => {\n        point[0] += worldPosDelta[0];\n        point[1] += worldPosDelta[1];\n        point[2] += worldPosDelta[2];\n      });\n      annotation.invalidated = true;\n    } else {\n      // Move mode - after double click, and mouse move to draw\n      const { currentPoints } = eventDetail;\n      const worldPos = currentPoints.world;\n\n      data.handles.points[handleIndex] = [...worldPos];\n      annotation.invalidated = true;\n    }\n\n    this.editData.hasMoved = true;\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n  };\n\n  cancel = (element: HTMLDivElement) => {\n    // If it is mid-draw or mid-modify\n    if (this.isDrawing) {\n      this.isDrawing = false;\n      this._deactivateDraw(element);\n      this._deactivateModify(element);\n      resetElementCursor(element);\n\n      const { annotation, viewportIdsToRender, newAnnotation } = this.editData;\n      const { data } = annotation;\n\n      annotation.highlighted = false;\n      data.handles.activeHandleIndex = null;\n\n      const enabledElement = getEnabledElement(element);\n      const { renderingEngine } = enabledElement;\n\n      triggerAnnotationRenderForViewportIds(\n        renderingEngine,\n        viewportIdsToRender\n      );\n\n      if (newAnnotation) {\n        const eventType = Events.ANNOTATION_COMPLETED;\n\n        const eventDetail: AnnotationCompletedEventDetail = {\n          annotation,\n        };\n\n        triggerEvent(eventTarget, eventType, eventDetail);\n      }\n\n      this.editData = null;\n      this.angleStartedNotYetCompleted = false;\n      return annotation.annotationUID;\n    }\n  };\n\n  _activateModify = (element: HTMLDivElement) => {\n    state.isInteractingWithTool = true;\n\n    element.addEventListener(\n      Events.MOUSE_UP,\n      this._endCallback as EventListener\n    );\n    element.addEventListener(\n      Events.MOUSE_DRAG,\n      this._dragCallback as EventListener\n    );\n    element.addEventListener(\n      Events.MOUSE_CLICK,\n      this._endCallback as EventListener\n    );\n\n    element.addEventListener(\n      Events.TOUCH_TAP,\n      this._endCallback as EventListener\n    );\n    element.addEventListener(\n      Events.TOUCH_END,\n      this._endCallback as EventListener\n    );\n    element.addEventListener(\n      Events.TOUCH_DRAG,\n      this._dragCallback as EventListener\n    );\n  };\n\n  _deactivateModify = (element: HTMLDivElement) => {\n    state.isInteractingWithTool = false;\n\n    element.removeEventListener(\n      Events.MOUSE_UP,\n      this._endCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.MOUSE_DRAG,\n      this._dragCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.MOUSE_CLICK,\n      this._endCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.TOUCH_TAP,\n      this._endCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.TOUCH_END,\n      this._endCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.TOUCH_DRAG,\n      this._dragCallback as EventListener\n    );\n  };\n\n  _activateDraw = (element: HTMLDivElement) => {\n    state.isInteractingWithTool = true;\n\n    element.addEventListener(\n      Events.MOUSE_UP,\n      this._endCallback as EventListener\n    );\n    element.addEventListener(\n      Events.MOUSE_DRAG,\n      this._dragCallback as EventListener\n    );\n    element.addEventListener(\n      Events.MOUSE_MOVE,\n      this._dragCallback as EventListener\n    );\n    element.addEventListener(\n      Events.MOUSE_CLICK,\n      this._endCallback as EventListener\n    );\n\n    element.addEventListener(\n      Events.TOUCH_TAP,\n      this._endCallback as EventListener\n    );\n    element.addEventListener(\n      Events.TOUCH_END,\n      this._endCallback as EventListener\n    );\n    element.addEventListener(\n      Events.TOUCH_DRAG,\n      this._dragCallback as EventListener\n    );\n  };\n\n  _deactivateDraw = (element: HTMLDivElement) => {\n    state.isInteractingWithTool = false;\n\n    element.removeEventListener(\n      Events.MOUSE_UP,\n      this._endCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.MOUSE_DRAG,\n      this._dragCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.MOUSE_MOVE,\n      this._dragCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.MOUSE_CLICK,\n      this._endCallback as EventListener\n    );\n\n    element.removeEventListener(\n      Events.TOUCH_TAP,\n      this._endCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.TOUCH_END,\n      this._endCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.TOUCH_DRAG,\n      this._dragCallback as EventListener\n    );\n  };\n\n  /**\n   * it is used to draw the length annotation in each\n   * request animation frame. It calculates the updated cached statistics if\n   * data is invalidated and cache it.\n   *\n   * @param enabledElement - The Cornerstone's enabledElement.\n   * @param svgDrawingHelper - The svgDrawingHelper providing the context for drawing.\n   */\n  renderAnnotation = (\n    enabledElement: Types.IEnabledElement,\n    svgDrawingHelper: SVGDrawingHelper\n  ): boolean => {\n    let renderStatus = false;\n\n    const { viewport } = enabledElement;\n    const { element } = viewport;\n\n    let annotations = getAnnotations(this.getToolName(), element);\n\n    // Todo: We don't need this anymore, filtering happens in triggerAnnotationRender\n    if (!annotations?.length) {\n      return renderStatus;\n    }\n\n    annotations = this.filterInteractableAnnotationsForElement(\n      element,\n      annotations\n    );\n\n    if (!annotations?.length) {\n      return renderStatus;\n    }\n\n    const targetId = this.getTargetId(viewport);\n    const renderingEngine = viewport.getRenderingEngine();\n\n    const styleSpecifier: StyleSpecifier = {\n      toolGroupId: this.toolGroupId,\n      toolName: this.getToolName(),\n      viewportId: enabledElement.viewport.id,\n    };\n\n    // Draw SVG\n    for (let i = 0; i < annotations.length; i++) {\n      const annotation = annotations[i] as AngleAnnotation;\n      const { annotationUID, data } = annotation;\n      const { points, activeHandleIndex } = data.handles;\n\n      styleSpecifier.annotationUID = annotationUID;\n\n      const lineWidth = this.getStyle('lineWidth', styleSpecifier, annotation);\n      const lineDash = this.getStyle('lineDash', styleSpecifier, annotation);\n      const color = this.getStyle('color', styleSpecifier, annotation);\n\n      const canvasCoordinates = points.map((p) => viewport.worldToCanvas(p));\n\n      // WE HAVE TO CACHE STATS BEFORE FETCHING TEXT\n      if (\n        !data.cachedStats[targetId] ||\n        data.cachedStats[targetId].angle == null\n      ) {\n        data.cachedStats[targetId] = {\n          angle: null,\n        };\n\n        this._calculateCachedStats(annotation, renderingEngine, enabledElement);\n      } else if (annotation.invalidated) {\n        this._throttledCalculateCachedStats(\n          annotation,\n          renderingEngine,\n          enabledElement\n        );\n      }\n\n      let activeHandleCanvasCoords;\n\n      if (\n        !isAnnotationLocked(annotation) &&\n        !this.editData &&\n        activeHandleIndex !== null\n      ) {\n        // Not locked or creating and hovering over handle, so render handle.\n        activeHandleCanvasCoords = [canvasCoordinates[activeHandleIndex]];\n      }\n\n      // If rendering engine has been destroyed while rendering\n      if (!viewport.getRenderingEngine()) {\n        console.warn('Rendering Engine has been destroyed');\n        return renderStatus;\n      }\n\n      if (activeHandleCanvasCoords) {\n        const handleGroupUID = '0';\n\n        drawHandlesSvg(\n          svgDrawingHelper,\n          annotationUID,\n          handleGroupUID,\n          canvasCoordinates,\n          {\n            color,\n            lineDash,\n            lineWidth,\n          }\n        );\n      }\n\n      let lineUID = '1';\n      drawLineSvg(\n        svgDrawingHelper,\n        annotationUID,\n        lineUID,\n        canvasCoordinates[0],\n        canvasCoordinates[1],\n        {\n          color,\n          width: lineWidth,\n          lineDash,\n        }\n      );\n\n      renderStatus = true;\n\n      // Don't add textBox until annotation has 3 anchor points (actually 4 because of the center point)\n      if (canvasCoordinates.length !== 3) {\n        return renderStatus;\n      }\n\n      lineUID = '2';\n\n      drawLineSvg(\n        svgDrawingHelper,\n        annotationUID,\n        lineUID,\n        canvasCoordinates[1],\n        canvasCoordinates[2],\n        {\n          color,\n          width: lineWidth,\n          lineDash,\n        }\n      );\n\n      if (!data.cachedStats[targetId]?.angle) {\n        continue;\n      }\n\n      const options = this.getLinkedTextBoxStyle(styleSpecifier, annotation);\n      if (!options.visibility) {\n        data.handles.textBox = {\n          hasMoved: false,\n          worldPosition: <Types.Point3>[0, 0, 0],\n          worldBoundingBox: {\n            topLeft: <Types.Point3>[0, 0, 0],\n            topRight: <Types.Point3>[0, 0, 0],\n            bottomLeft: <Types.Point3>[0, 0, 0],\n            bottomRight: <Types.Point3>[0, 0, 0],\n          },\n        };\n        continue;\n      }\n\n      const textLines = this.configuration.getTextLines(data, targetId);\n\n      if (!data.handles.textBox.hasMoved) {\n        // linked to the vertex by default\n        const canvasTextBoxCoords = canvasCoordinates[1];\n\n        data.handles.textBox.worldPosition =\n          viewport.canvasToWorld(canvasTextBoxCoords);\n      }\n\n      const textBoxPosition = viewport.worldToCanvas(\n        data.handles.textBox.worldPosition\n      );\n\n      const textBoxUID = '1';\n      const boundingBox = drawLinkedTextBoxSvg(\n        svgDrawingHelper,\n        annotationUID,\n        textBoxUID,\n        textLines,\n        textBoxPosition,\n        canvasCoordinates,\n        {},\n        options\n      );\n\n      const { x: left, y: top, width, height } = boundingBox;\n\n      data.handles.textBox.worldBoundingBox = {\n        topLeft: viewport.canvasToWorld([left, top]),\n        topRight: viewport.canvasToWorld([left + width, top]),\n        bottomLeft: viewport.canvasToWorld([left, top + height]),\n        bottomRight: viewport.canvasToWorld([left + width, top + height]),\n      };\n    }\n\n    return renderStatus;\n  };\n\n  _calculateCachedStats(annotation, renderingEngine, enabledElement) {\n    const data = annotation.data;\n    const { viewportId, renderingEngineId } = enabledElement;\n\n    // Until we have all three anchors bail out\n    if (data.handles.points.length !== 3) {\n      return;\n    }\n\n    const worldPos1 = data.handles.points[0];\n    const worldPos2 = data.handles.points[1];\n    const worldPos3 = data.handles.points[2];\n\n    const { cachedStats } = data;\n    const targetIds = Object.keys(cachedStats);\n\n    for (let i = 0; i < targetIds.length; i++) {\n      const targetId = targetIds[i];\n      const angle = angleBetweenLines(\n        [worldPos1, worldPos2],\n        [worldPos2, worldPos3]\n      );\n\n      cachedStats[targetId] = {\n        angle: isNaN(angle) ? 'Incomplete Angle' : angle,\n      };\n    }\n\n    annotation.invalidated = false;\n\n    // Dispatching annotation modified\n    const eventType = Events.ANNOTATION_MODIFIED;\n\n    const eventDetail: AnnotationModifiedEventDetail = {\n      annotation,\n      viewportId,\n      renderingEngineId,\n    };\n    triggerEvent(eventTarget, eventType, eventDetail);\n\n    return cachedStats;\n  }\n}\n\nfunction defaultGetTextLines(data, targetId): string[] {\n  const cachedVolumeStats = data.cachedStats[targetId];\n  const { angle } = cachedVolumeStats;\n\n  if (angle === undefined) {\n    return;\n  }\n\n  const textLines = [`${roundNumber(angle)} ${String.fromCharCode(176)}`];\n\n  return textLines;\n}\n\nAngleTool.toolName = 'Angle';\nexport default AngleTool;\n","import { Types } from '@cornerstonejs/core';\n\n/**\n * Return the midpoint (think average) of all the provided points.\n */\nconst midPoint = (\n  ...args: (Types.Point2 | Types.Point3)[]\n): Types.Point2 | Types.Point3 => {\n  const ret =\n    args[0].length === 2 ? <Types.Point2>[0, 0] : <Types.Point3>[0, 0, 0];\n  const len = args.length;\n  for (const arg of args) {\n    ret[0] += arg[0] / len;\n    ret[1] += arg[1] / len;\n    if (ret.length === 3) {\n      ret[2] += arg[2] / len;\n    }\n  }\n  return ret;\n};\n\nconst midPoint2 = midPoint as (...args: Types.Point2[]) => Types.Point2;\n\nexport default midPoint;\n\nexport { midPoint2 };\n","import { vec3 } from 'gl-matrix';\nimport { Events } from '../../enums';\nimport {\n  getEnabledElement,\n  triggerEvent,\n  eventTarget,\n} from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\nimport { AnnotationTool } from '../base';\nimport throttle from '../../utilities/throttle';\nimport {\n  addAnnotation,\n  getAnnotations,\n  removeAnnotation,\n} from '../../stateManagement/annotation/annotationState';\nimport { isAnnotationLocked } from '../../stateManagement/annotation/annotationLocking';\nimport * as lineSegment from '../../utilities/math/line';\nimport angleBetweenLines from '../../utilities/math/angle/angleBetweenLines';\nimport { midPoint2 } from '../../utilities/math/midPoint';\n\nimport {\n  drawHandles as drawHandlesSvg,\n  drawLine as drawLineSvg,\n  drawLinkedTextBox as drawLinkedTextBoxSvg,\n  drawTextBox as drawTextBoxSvg,\n} from '../../drawingSvg';\nimport { state } from '../../store';\nimport { getViewportIdsWithToolToRender } from '../../utilities/viewportFilters';\nimport { getTextBoxCoordsCanvas } from '../../utilities/drawing';\nimport triggerAnnotationRenderForViewportIds from '../../utilities/triggerAnnotationRenderForViewportIds';\nimport {\n  AnnotationCompletedEventDetail,\n  AnnotationModifiedEventDetail,\n} from '../../types/EventTypes';\n\nimport {\n  resetElementCursor,\n  hideElementCursor,\n} from '../../cursors/elementCursor';\n\nimport {\n  EventTypes,\n  ToolHandle,\n  TextBoxHandle,\n  PublicToolProps,\n  ToolProps,\n  InteractionTypes,\n  SVGDrawingHelper,\n} from '../../types';\nimport { CobbAngleAnnotation } from '../../types/ToolSpecificAnnotationTypes';\nimport { StyleSpecifier } from '../../types/AnnotationStyle';\n\nclass CobbAngleTool extends AnnotationTool {\n  static toolName;\n\n  public touchDragCallback: any;\n  public mouseDragCallback: any;\n  angleStartedNotYetCompleted: boolean;\n  _throttledCalculateCachedStats: any;\n  editData: {\n    annotation: any;\n    viewportIdsToRender: string[];\n    handleIndex?: number;\n    movingTextBox?: boolean;\n    newAnnotation?: boolean;\n    hasMoved?: boolean;\n    isNearFirstLine?: boolean;\n    isNearSecondLine?: boolean;\n  } | null;\n  isDrawing: boolean;\n  isHandleOutsideImage: boolean;\n\n  constructor(\n    toolProps: PublicToolProps = {},\n    defaultToolProps: ToolProps = {\n      supportedInteractionTypes: ['Mouse', 'Touch'],\n      configuration: {\n        shadow: true,\n        preventHandleOutsideImage: false,\n        getTextLines: defaultGetTextLines,\n      },\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n\n    this._throttledCalculateCachedStats = throttle(\n      this._calculateCachedStats,\n      25,\n      { trailing: true }\n    );\n  }\n\n  /**\n   * Based on the current position of the mouse and the current imageId to create\n   * a Length Annotation and stores it in the annotationManager\n   *\n   * @param evt -  EventTypes.NormalizedMouseEventType\n   * @returns The annotation object.\n   *\n   */\n  addNewAnnotation = (\n    evt: EventTypes.MouseDownActivateEventType\n  ): CobbAngleAnnotation => {\n    if (this.angleStartedNotYetCompleted) {\n      return;\n    }\n\n    this.angleStartedNotYetCompleted = true;\n    const eventDetail = evt.detail;\n    const { currentPoints, element } = eventDetail;\n    const worldPos = currentPoints.world;\n    const enabledElement = getEnabledElement(element);\n    const { viewport, renderingEngine } = enabledElement;\n\n    hideElementCursor(element);\n    this.isDrawing = true;\n\n    const camera = viewport.getCamera();\n    const { viewPlaneNormal, viewUp } = camera;\n\n    const referencedImageId = this.getReferencedImageId(\n      viewport,\n      worldPos,\n      viewPlaneNormal,\n      viewUp\n    );\n\n    const FrameOfReferenceUID = viewport.getFrameOfReferenceUID();\n\n    const annotation = {\n      highlighted: true,\n      invalidated: true,\n      metadata: {\n        toolName: this.getToolName(),\n        viewPlaneNormal: <Types.Point3>[...viewPlaneNormal],\n        viewUp: <Types.Point3>[...viewUp],\n        FrameOfReferenceUID,\n        referencedImageId,\n      },\n      data: {\n        handles: {\n          points: [<Types.Point3>[...worldPos], <Types.Point3>[...worldPos]],\n          activeHandleIndex: null,\n          textBox: {\n            hasMoved: false,\n            worldPosition: <Types.Point3>[0, 0, 0],\n            worldBoundingBox: {\n              topLeft: <Types.Point3>[0, 0, 0],\n              topRight: <Types.Point3>[0, 0, 0],\n              bottomLeft: <Types.Point3>[0, 0, 0],\n              bottomRight: <Types.Point3>[0, 0, 0],\n            },\n          },\n        },\n        label: '',\n        cachedStats: {},\n      },\n    };\n\n    addAnnotation(annotation, element);\n\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    this.editData = {\n      annotation,\n      viewportIdsToRender,\n      handleIndex: 1,\n      movingTextBox: false,\n      newAnnotation: true,\n      hasMoved: false,\n    };\n    this._activateDraw(element);\n\n    evt.preventDefault();\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    return annotation;\n  };\n\n  /**\n   * It returns if the canvas point is near the provided length annotation in the provided\n   * element or not. A proximity is passed to the function to determine the\n   * proximity of the point to the annotation in number of pixels.\n   *\n   * @param element - HTML Element\n   * @param annotation - Annotation\n   * @param canvasCoords - Canvas coordinates\n   * @param proximity - Proximity to tool to consider\n   * @returns Boolean, whether the canvas point is near tool\n   */\n  isPointNearTool = (\n    element: HTMLDivElement,\n    annotation: CobbAngleAnnotation,\n    canvasCoords: Types.Point2,\n    proximity: number\n  ): boolean => {\n    const enabledElement = getEnabledElement(element);\n    const { viewport } = enabledElement;\n    const { data } = annotation;\n\n    const { distanceToPoint, distanceToPoint2 } = this.distanceToLines({\n      viewport,\n      points: data.handles.points,\n      canvasCoords,\n      proximity,\n    });\n\n    if (distanceToPoint <= proximity || distanceToPoint2 <= proximity) {\n      return true;\n    }\n\n    return false;\n  };\n\n  toolSelectedCallback = (\n    evt: EventTypes.MouseDownEventType,\n    annotation: CobbAngleAnnotation,\n    interactionType: InteractionTypes,\n    canvasCoords: Types.Point2,\n    proximity = 6\n  ): void => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    annotation.highlighted = true;\n\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine, viewport } = enabledElement;\n\n    const { isNearFirstLine, isNearSecondLine } = this.distanceToLines({\n      viewport,\n      points: annotation.data.handles.points,\n      canvasCoords,\n      proximity,\n    });\n\n    this.editData = {\n      annotation,\n      viewportIdsToRender,\n      movingTextBox: false,\n      isNearFirstLine,\n      isNearSecondLine,\n    };\n\n    this._activateModify(element);\n\n    hideElementCursor(element);\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    evt.preventDefault();\n  };\n\n  handleSelectedCallback(\n    evt: EventTypes.MouseDownEventType,\n    annotation: CobbAngleAnnotation,\n    handle: ToolHandle,\n    interactionType = 'mouse'\n  ): void {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n    const { data } = annotation;\n\n    annotation.highlighted = true;\n\n    let movingTextBox = false;\n    let handleIndex;\n\n    if ((handle as TextBoxHandle).worldPosition) {\n      movingTextBox = true;\n    } else {\n      handleIndex = data.handles.points.findIndex((p) => p === handle);\n    }\n\n    // Find viewports to render on drag.\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    this.editData = {\n      annotation,\n      viewportIdsToRender,\n      handleIndex,\n      movingTextBox,\n    };\n    this._activateModify(element);\n\n    hideElementCursor(element);\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    evt.preventDefault();\n  }\n\n  _mouseUpCallback = (\n    evt: EventTypes.MouseUpEventType | EventTypes.MouseClickEventType\n  ) => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    const { annotation, viewportIdsToRender, newAnnotation, hasMoved } =\n      this.editData;\n\n    const { data } = annotation;\n    if (newAnnotation && !hasMoved) {\n      // when user starts the drawing by click, and moving the mouse, instead\n      // of click and drag\n      return;\n    }\n\n    // If preventing new measurement means we are in the middle of an existing measurement\n    // we shouldn't deactivate modify or draw\n    if (this.angleStartedNotYetCompleted && data.handles.points.length < 4) {\n      resetElementCursor(element);\n\n      // adds the first point of the second line\n      this.editData.handleIndex = data.handles.points.length;\n      return;\n    }\n\n    this.angleStartedNotYetCompleted = false;\n    data.handles.activeHandleIndex = null;\n\n    this._deactivateModify(element);\n    this._deactivateDraw(element);\n    resetElementCursor(element);\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    if (\n      this.isHandleOutsideImage &&\n      this.configuration.preventHandleOutsideImage\n    ) {\n      removeAnnotation(annotation.annotationUID);\n    }\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    if (newAnnotation) {\n      const eventType = Events.ANNOTATION_COMPLETED;\n\n      const eventDetail: AnnotationCompletedEventDetail = {\n        annotation,\n      };\n\n      triggerEvent(eventTarget, eventType, eventDetail);\n    }\n\n    this.editData = null;\n    this.isDrawing = false;\n  };\n\n  /**\n   * Handles the mouse down for all points that follow the very first mouse down.\n   * The very first mouse down is handled by addAnnotation.\n   * This method ensures that the state of the tool is correct for the drawing of the second line segment.\n   * In particular it ensures that the second segment can be created via a mouse down and drag.\n   */\n  _mouseDownCallback = (\n    evt: EventTypes.MouseUpEventType | EventTypes.MouseClickEventType\n  ) => {\n    const { annotation, handleIndex } = this.editData;\n    const eventDetail = evt.detail;\n    const { element, currentPoints } = eventDetail;\n    const worldPos = currentPoints.world;\n    const { data } = annotation;\n\n    if (handleIndex === 1) {\n      // This is the mouse down for the second point of the first segment.\n      // The mouse up takes care of adding the first point of the second segment.\n      data.handles.points[1] = worldPos;\n      this.editData.hasMoved =\n        data.handles.points[1][0] !== data.handles.points[0][0] ||\n        data.handles.points[1][1] !== data.handles.points[0][0];\n      return;\n    }\n\n    if (handleIndex === 3) {\n      // This is the mouse down for the second point of the second segment (i.e. the last point)\n      data.handles.points[3] = worldPos;\n      this.editData.hasMoved =\n        data.handles.points[3][0] !== data.handles.points[2][0] ||\n        data.handles.points[3][1] !== data.handles.points[2][0];\n\n      this.angleStartedNotYetCompleted = false;\n      return;\n    }\n\n    // This is the first mouse down of the first point of the second line segment.\n    // It is as if we have not moved yet because Cobb Angle has two, disjoint sections, each with its own move.\n    this.editData.hasMoved = false;\n    hideElementCursor(element);\n\n    // Add the last segment points for the subsequent drag/mouse move.\n    data.handles.points[2] = data.handles.points[3] = worldPos;\n    this.editData.handleIndex = data.handles.points.length - 1;\n  };\n\n  _mouseDragCallback = (\n    evt: EventTypes.MouseDragEventType | EventTypes.MouseMoveEventType\n  ) => {\n    this.isDrawing = true;\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    const {\n      annotation,\n      viewportIdsToRender,\n      handleIndex,\n      movingTextBox,\n      isNearFirstLine,\n      isNearSecondLine,\n    } = this.editData;\n    const { data } = annotation;\n\n    if (movingTextBox) {\n      // Drag mode - moving text box\n      const { deltaPoints } = eventDetail as EventTypes.MouseDragEventDetail;\n      const worldPosDelta = deltaPoints.world;\n\n      const { textBox } = data.handles;\n      const { worldPosition } = textBox;\n\n      worldPosition[0] += worldPosDelta[0];\n      worldPosition[1] += worldPosDelta[1];\n      worldPosition[2] += worldPosDelta[2];\n\n      textBox.hasMoved = true;\n    } else if (\n      handleIndex === undefined &&\n      (isNearFirstLine || isNearSecondLine)\n    ) {\n      // select tool mode - moving annotation\n      const { deltaPoints } = eventDetail as EventTypes.MouseDragEventDetail;\n      const worldPosDelta = deltaPoints.world;\n      const points = data.handles.points;\n\n      // separate the logic for moving handles to move them separately\n      if (isNearFirstLine) {\n        const firstLinePoints = [points[0], points[1]];\n        firstLinePoints.forEach((point) => {\n          point[0] += worldPosDelta[0];\n          point[1] += worldPosDelta[1];\n          point[2] += worldPosDelta[2];\n        });\n      } else if (isNearSecondLine) {\n        const secondLinePoints = [points[2], points[3]];\n        secondLinePoints.forEach((point) => {\n          point[0] += worldPosDelta[0];\n          point[1] += worldPosDelta[1];\n          point[2] += worldPosDelta[2];\n        });\n      }\n\n      annotation.invalidated = true;\n    } else {\n      // Drag handle mode - after double click, and mouse move to draw\n      const { currentPoints } = eventDetail;\n      const worldPos = currentPoints.world;\n\n      data.handles.points[handleIndex] = [...worldPos];\n      annotation.invalidated = true;\n    }\n\n    this.editData.hasMoved = true;\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n  };\n\n  cancel = (element: HTMLDivElement) => {\n    // If it is mid-draw or mid-modify\n    if (!this.isDrawing) {\n      return;\n    }\n\n    this.isDrawing = false;\n    this._deactivateDraw(element);\n    this._deactivateModify(element);\n    resetElementCursor(element);\n\n    const { annotation, viewportIdsToRender, newAnnotation } = this.editData;\n    const { data } = annotation;\n\n    if (data.handles.points.length < 4) {\n      // If it is mid-draw\n      removeAnnotation(annotation.annotationUID);\n    }\n\n    annotation.highlighted = false;\n    data.handles.activeHandleIndex = null;\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    if (newAnnotation) {\n      const eventType = Events.ANNOTATION_COMPLETED;\n\n      const eventDetail: AnnotationCompletedEventDetail = {\n        annotation,\n      };\n\n      triggerEvent(eventTarget, eventType, eventDetail);\n    }\n\n    this.editData = null;\n    this.angleStartedNotYetCompleted = false;\n    return annotation.annotationUID;\n  };\n\n  _activateModify = (element: HTMLDivElement) => {\n    state.isInteractingWithTool = true;\n\n    element.addEventListener(\n      Events.MOUSE_UP,\n      this._mouseUpCallback as EventListener\n    );\n    element.addEventListener(\n      Events.MOUSE_DRAG,\n      this._mouseDragCallback as EventListener\n    );\n    element.addEventListener(\n      Events.MOUSE_CLICK,\n      this._mouseUpCallback as EventListener\n    );\n\n    // element.addEventListener(Events.TOUCH_END, this._mouseUpCallback)\n    // element.addEventListener(Events.TOUCH_DRAG, this._mouseDragCallback)\n  };\n\n  _deactivateModify = (element: HTMLDivElement) => {\n    state.isInteractingWithTool = false;\n\n    element.removeEventListener(\n      Events.MOUSE_UP,\n      this._mouseUpCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.MOUSE_DRAG,\n      this._mouseDragCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.MOUSE_CLICK,\n      this._mouseUpCallback as EventListener\n    );\n\n    // element.removeEventListener(Events.TOUCH_END, this._mouseUpCallback)\n    // element.removeEventListener(Events.TOUCH_DRAG, this._mouseDragCallback)\n  };\n\n  _activateDraw = (element: HTMLDivElement) => {\n    state.isInteractingWithTool = true;\n\n    element.addEventListener(\n      Events.MOUSE_UP,\n      this._mouseUpCallback as EventListener\n    );\n    element.addEventListener(\n      Events.MOUSE_DRAG,\n      this._mouseDragCallback as EventListener\n    );\n    element.addEventListener(\n      Events.MOUSE_MOVE,\n      this._mouseDragCallback as EventListener\n    );\n    element.addEventListener(\n      Events.MOUSE_CLICK,\n      this._mouseUpCallback as EventListener\n    );\n    element.addEventListener(\n      Events.MOUSE_DOWN,\n      this._mouseDownCallback as EventListener\n    );\n\n    // element.addEventListener(Events.TOUCH_END, this._mouseUpCallback)\n    // element.addEventListener(Events.TOUCH_DRAG, this._mouseDragCallback)\n  };\n\n  _deactivateDraw = (element: HTMLDivElement) => {\n    state.isInteractingWithTool = false;\n\n    element.removeEventListener(\n      Events.MOUSE_UP,\n      this._mouseUpCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.MOUSE_DRAG,\n      this._mouseDragCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.MOUSE_MOVE,\n      this._mouseDragCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.MOUSE_CLICK,\n      this._mouseUpCallback as EventListener\n    );\n    element.removeEventListener(\n      Events.MOUSE_DOWN,\n      this._mouseDownCallback as EventListener\n    );\n\n    // element.removeEventListener(Events.TOUCH_END, this._mouseUpCallback)\n    // element.removeEventListener(Events.TOUCH_DRAG, this._mouseDragCallback)\n  };\n\n  /**\n   * it is used to draw the length annotation in each\n   * request animation frame. It calculates the updated cached statistics if\n   * data is invalidated and cache it.\n   *\n   * @param enabledElement - The Cornerstone's enabledElement.\n   * @param svgDrawingHelper - The svgDrawingHelper providing the context for drawing.\n   */\n  renderAnnotation = (\n    enabledElement: Types.IEnabledElement,\n    svgDrawingHelper: SVGDrawingHelper\n  ): boolean => {\n    let renderStatus = false;\n\n    const { viewport } = enabledElement;\n    const { element } = viewport;\n\n    let annotations = getAnnotations(this.getToolName(), element);\n\n    // Todo: We don't need this anymore, filtering happens in triggerAnnotationRender\n    if (!annotations?.length) {\n      return renderStatus;\n    }\n\n    annotations = this.filterInteractableAnnotationsForElement(\n      element,\n      annotations\n    );\n\n    if (!annotations?.length) {\n      return renderStatus;\n    }\n\n    const targetId = this.getTargetId(viewport);\n    const renderingEngine = viewport.getRenderingEngine();\n\n    const styleSpecifier: StyleSpecifier = {\n      toolGroupId: this.toolGroupId,\n      toolName: this.getToolName(),\n      viewportId: enabledElement.viewport.id,\n    };\n\n    // Draw SVG\n    for (let i = 0; i < annotations.length; i++) {\n      const annotation = annotations[i] as CobbAngleAnnotation;\n      const { annotationUID, data } = annotation;\n      const { points, activeHandleIndex } = data.handles;\n\n      styleSpecifier.annotationUID = annotationUID;\n\n      const lineWidth = this.getStyle('lineWidth', styleSpecifier, annotation);\n      const lineDash = this.getStyle('lineDash', styleSpecifier, annotation);\n      const color = this.getStyle('color', styleSpecifier, annotation);\n\n      const canvasCoordinates = points.map((p) => viewport.worldToCanvas(p));\n\n      // WE HAVE TO CACHE STATS BEFORE FETCHING TEXT\n      if (\n        !data.cachedStats[targetId] ||\n        data.cachedStats[targetId].angle == null\n      ) {\n        data.cachedStats[targetId] = {\n          angle: null,\n          arc1Angle: null,\n          arc2Angle: null,\n          points: {\n            world: {\n              arc1Start: null,\n              arc1End: null,\n              arc2Start: null,\n              arc2End: null,\n              arc1Angle: null,\n              arc2Angle: null,\n            },\n            canvas: {\n              arc1Start: null,\n              arc1End: null,\n              arc2Start: null,\n              arc2End: null,\n              arc1Angle: null,\n              arc2Angle: null,\n            },\n          },\n        };\n\n        this._calculateCachedStats(annotation, renderingEngine, enabledElement);\n      } else if (annotation.invalidated) {\n        this._throttledCalculateCachedStats(\n          annotation,\n          renderingEngine,\n          enabledElement\n        );\n      }\n\n      let activeHandleCanvasCoords;\n\n      if (\n        !isAnnotationLocked(annotation) &&\n        !this.editData &&\n        activeHandleIndex !== null\n      ) {\n        // Not locked or creating and hovering over handle, so render handle.\n        activeHandleCanvasCoords = [canvasCoordinates[activeHandleIndex]];\n      }\n\n      // If rendering engine has been destroyed while rendering\n      if (!viewport.getRenderingEngine()) {\n        console.warn('Rendering Engine has been destroyed');\n        return renderStatus;\n      }\n\n      if (activeHandleCanvasCoords) {\n        const handleGroupUID = '0';\n\n        drawHandlesSvg(\n          svgDrawingHelper,\n          annotationUID,\n          handleGroupUID,\n          canvasCoordinates,\n          {\n            color,\n            lineDash,\n            lineWidth,\n          }\n        );\n      }\n\n      const firstLine = [canvasCoordinates[0], canvasCoordinates[1]] as [\n        Types.Point2,\n        Types.Point2\n      ];\n      const secondLine = [canvasCoordinates[2], canvasCoordinates[3]] as [\n        Types.Point2,\n        Types.Point2\n      ];\n\n      let lineUID = 'line1';\n      drawLineSvg(\n        svgDrawingHelper,\n        annotationUID,\n        lineUID,\n        firstLine[0],\n        firstLine[1],\n        {\n          color,\n          width: lineWidth,\n          lineDash,\n        }\n      );\n\n      renderStatus = true;\n\n      // Don't add the stats until annotation has 4 anchor points\n      if (canvasCoordinates.length < 4) {\n        return renderStatus;\n      }\n\n      lineUID = 'line2';\n\n      drawLineSvg(\n        svgDrawingHelper,\n        annotationUID,\n        lineUID,\n        secondLine[0],\n        secondLine[1],\n        {\n          color,\n          width: lineWidth,\n          lineDash,\n        }\n      );\n\n      lineUID = 'linkLine';\n      const mid1 = midPoint2(firstLine[0], firstLine[1]);\n      const mid2 = midPoint2(secondLine[0], secondLine[1]);\n      drawLineSvg(svgDrawingHelper, annotationUID, lineUID, mid1, mid2, {\n        color,\n        lineWidth: '1',\n        lineDash: '1,4',\n      });\n\n      // Calculating the arcs\n\n      const { arc1Start, arc1End, arc2End, arc2Start } =\n        data.cachedStats[targetId].points.canvas;\n      const { arc1Angle, arc2Angle } = data.cachedStats[targetId];\n\n      lineUID = 'arc1';\n\n      drawLineSvg(\n        svgDrawingHelper,\n        annotationUID,\n        lineUID,\n        arc1Start as Types.Point2,\n        arc1End as Types.Point2,\n        {\n          color,\n          lineWidth: '1',\n        }\n      );\n\n      lineUID = 'arc2';\n\n      drawLineSvg(\n        svgDrawingHelper,\n        annotationUID,\n        lineUID,\n        arc2Start as Types.Point2,\n        arc2End as Types.Point2,\n        {\n          color,\n          lineWidth: '1',\n        }\n      );\n\n      if (!data.cachedStats[targetId]?.angle) {\n        continue;\n      }\n\n      const options = this.getLinkedTextBoxStyle(styleSpecifier, annotation);\n      if (!options.visibility) {\n        data.handles.textBox = {\n          hasMoved: false,\n          worldPosition: <Types.Point3>[0, 0, 0],\n          worldBoundingBox: {\n            topLeft: <Types.Point3>[0, 0, 0],\n            topRight: <Types.Point3>[0, 0, 0],\n            bottomLeft: <Types.Point3>[0, 0, 0],\n            bottomRight: <Types.Point3>[0, 0, 0],\n          },\n        };\n        continue;\n      }\n\n      const textLines = this.configuration.getTextLines(data, targetId);\n\n      if (!data.handles.textBox.hasMoved) {\n        const canvasTextBoxCoords = getTextBoxCoordsCanvas(canvasCoordinates);\n\n        data.handles.textBox.worldPosition =\n          viewport.canvasToWorld(canvasTextBoxCoords);\n      }\n\n      const textBoxPosition = viewport.worldToCanvas(\n        data.handles.textBox.worldPosition\n      );\n\n      const textBoxUID = 'cobbAngleText';\n      const boundingBox = drawLinkedTextBoxSvg(\n        svgDrawingHelper,\n        annotationUID,\n        textBoxUID,\n        textLines,\n        textBoxPosition,\n        canvasCoordinates,\n        {},\n        options\n      );\n\n      const { x: left, y: top, width, height } = boundingBox;\n\n      data.handles.textBox.worldBoundingBox = {\n        topLeft: viewport.canvasToWorld([left, top]),\n        topRight: viewport.canvasToWorld([left + width, top]),\n        bottomLeft: viewport.canvasToWorld([left, top + height]),\n        bottomRight: viewport.canvasToWorld([left + width, top + height]),\n      };\n\n      const arc1TextBoxUID = 'arcAngle1';\n\n      const arc1TextLine = [\n        `${arc1Angle.toFixed(2)} ${String.fromCharCode(176)}`,\n      ];\n\n      const arch1TextPosCanvas = midPoint2(arc1Start, arc1End);\n\n      drawTextBoxSvg(\n        svgDrawingHelper,\n        annotationUID,\n        arc1TextBoxUID,\n        arc1TextLine,\n        arch1TextPosCanvas,\n        {\n          ...options,\n          padding: 3,\n        }\n      );\n\n      const arc2TextBoxUID = 'arcAngle2';\n\n      const arc2TextLine = [\n        `${arc2Angle.toFixed(2)} ${String.fromCharCode(176)}`,\n      ];\n\n      const arch2TextPosCanvas = midPoint2(arc2Start, arc2End);\n\n      drawTextBoxSvg(\n        svgDrawingHelper,\n        annotationUID,\n        arc2TextBoxUID,\n        arc2TextLine,\n        arch2TextPosCanvas,\n        {\n          ...options,\n          padding: 3,\n        }\n      );\n    }\n\n    return renderStatus;\n  };\n\n  _calculateCachedStats(annotation, renderingEngine, enabledElement) {\n    const data = annotation.data;\n    const { viewportId, renderingEngineId } = enabledElement;\n\n    // Until we have all four anchors bail out\n    if (data.handles.points.length !== 4) {\n      return;\n    }\n\n    const seg1: [Types.Point3, Types.Point3] = [null, null];\n    const seg2: [Types.Point3, Types.Point3] = [null, null];\n    let minDist = Number.MAX_VALUE;\n\n    // Order the endpoints of each line segment such that seg1[1] and seg2[0]\n    // are the closest (Euclidean distance-wise) to each other. Thus\n    // the angle formed between the vectors seg1[1]->seg1[0] and seg2[0]->seg[1]\n    // is calculated.\n    // The assumption here is that the Cobb angle line segments are drawn\n    // such that the segments intersect nearest the segment endpoints\n    // that are closest AND those closest endpoints are the tails of the\n    // vectors used to calculate the angle between the vectors/line segments.\n    for (let i = 0; i < 2; i += 1) {\n      for (let j = 2; j < 4; j += 1) {\n        const dist = vec3.distance(\n          data.handles.points[i],\n          data.handles.points[j]\n        );\n        if (dist < minDist) {\n          minDist = dist;\n          seg1[1] = data.handles.points[i];\n          seg1[0] = data.handles.points[(i + 1) % 2];\n          seg2[0] = data.handles.points[j];\n          seg2[1] = data.handles.points[2 + ((j - 1) % 2)];\n        }\n      }\n    }\n    const { viewport } = enabledElement;\n\n    const canvasPoints = data.handles.points.map((p) =>\n      viewport.worldToCanvas(p)\n    );\n\n    const firstLine = [canvasPoints[0], canvasPoints[1]] as [\n      Types.Point2,\n      Types.Point2\n    ];\n    const secondLine = [canvasPoints[2], canvasPoints[3]] as [\n      Types.Point2,\n      Types.Point2\n    ];\n\n    const mid1 = midPoint2(firstLine[0], firstLine[1]);\n    const mid2 = midPoint2(secondLine[0], secondLine[1]);\n\n    const { arc1Start, arc1End, arc2End, arc2Start, arc1Angle, arc2Angle } =\n      this.getArcsStartEndPoints({\n        firstLine,\n        secondLine,\n        mid1,\n        mid2,\n      });\n\n    const { cachedStats } = data;\n    const targetIds = Object.keys(cachedStats);\n\n    for (let i = 0; i < targetIds.length; i++) {\n      const targetId = targetIds[i];\n\n      cachedStats[targetId] = {\n        angle: angleBetweenLines(seg1, seg2),\n        arc1Angle,\n        arc2Angle,\n        points: {\n          canvas: {\n            arc1Start,\n            arc1End,\n            arc2End,\n            arc2Start,\n          },\n          world: {\n            arc1Start: viewport.canvasToWorld(arc1Start),\n            arc1End: viewport.canvasToWorld(arc1End),\n            arc2End: viewport.canvasToWorld(arc2End),\n            arc2Start: viewport.canvasToWorld(arc2Start),\n          },\n        },\n      };\n    }\n\n    annotation.invalidated = false;\n\n    // Dispatching annotation modified\n    const eventType = Events.ANNOTATION_MODIFIED;\n\n    const eventDetail: AnnotationModifiedEventDetail = {\n      annotation,\n      viewportId,\n      renderingEngineId,\n    };\n    triggerEvent(eventTarget, eventType, eventDetail);\n\n    return cachedStats;\n  }\n\n  distanceToLines = ({ viewport, points, canvasCoords, proximity }) => {\n    const [point1, point2, point3, point4] = points;\n    const canvasPoint1 = viewport.worldToCanvas(point1);\n    const canvasPoint2 = viewport.worldToCanvas(point2);\n    const canvasPoint3 = viewport.worldToCanvas(point3);\n    const canvasPoint4 = viewport.worldToCanvas(point4);\n\n    const line1 = {\n      start: {\n        x: canvasPoint1[0],\n        y: canvasPoint1[1],\n      },\n      end: {\n        x: canvasPoint2[0],\n        y: canvasPoint2[1],\n      },\n    };\n\n    const line2 = {\n      start: {\n        x: canvasPoint3[0],\n        y: canvasPoint3[1],\n      },\n      end: {\n        x: canvasPoint4[0],\n        y: canvasPoint4[1],\n      },\n    };\n\n    const distanceToPoint = lineSegment.distanceToPoint(\n      [line1.start.x, line1.start.y],\n      [line1.end.x, line1.end.y],\n      [canvasCoords[0], canvasCoords[1]]\n    );\n\n    const distanceToPoint2 = lineSegment.distanceToPoint(\n      [line2.start.x, line2.start.y],\n      [line2.end.x, line2.end.y],\n      [canvasCoords[0], canvasCoords[1]]\n    );\n\n    let isNearFirstLine = false;\n    let isNearSecondLine = false;\n\n    if (distanceToPoint <= proximity) {\n      isNearFirstLine = true;\n    } else if (distanceToPoint2 <= proximity) {\n      isNearSecondLine = true;\n    }\n    return {\n      distanceToPoint,\n      distanceToPoint2,\n      isNearFirstLine,\n      isNearSecondLine,\n    };\n  };\n\n  getArcsStartEndPoints = ({\n    firstLine,\n    secondLine,\n    mid1,\n    mid2,\n  }): {\n    arc1Start: Types.Point2;\n    arc1End: Types.Point2;\n    arc2Start: Types.Point2;\n    arc2End: Types.Point2;\n    arc1Angle: number;\n    arc2Angle: number;\n  } => {\n    const linkLine = [mid1, mid2] as [Types.Point2, Types.Point2];\n\n    const arc1Angle = angleBetweenLines(firstLine, linkLine);\n    const arc2Angle = angleBetweenLines(secondLine, linkLine);\n\n    const arc1Side = arc1Angle > 90 ? 1 : 0;\n    const arc2Side = arc2Angle > 90 ? 0 : 1;\n\n    const midLinkLine = midPoint2(linkLine[0], linkLine[1]);\n\n    const linkLineLength = Math.sqrt(\n      (linkLine[1][0] - linkLine[0][0]) ** 2 +\n        (linkLine[1][1] - linkLine[0][1]) ** 2\n    );\n    const ratio = 0.1; // 10% of the line length\n\n    const midFirstLine = midPoint2(firstLine[0], firstLine[1]);\n    const midSecondLine = midPoint2(secondLine[0], secondLine[1]);\n\n    // For arc1Start\n    const directionVectorStartArc1 = [\n      firstLine[arc1Side][0] - midFirstLine[0],\n      firstLine[arc1Side][1] - midFirstLine[1],\n    ];\n    const magnitudeStartArc1 = Math.sqrt(\n      directionVectorStartArc1[0] ** 2 + directionVectorStartArc1[1] ** 2\n    );\n    const normalizedDirectionStartArc1 = [\n      directionVectorStartArc1[0] / magnitudeStartArc1,\n      directionVectorStartArc1[1] / magnitudeStartArc1,\n    ];\n    const arc1Start = [\n      midFirstLine[0] +\n        normalizedDirectionStartArc1[0] * linkLineLength * ratio,\n      midFirstLine[1] +\n        normalizedDirectionStartArc1[1] * linkLineLength * ratio,\n    ] as Types.Point2;\n\n    // Existing logic for arc1End\n    const directionVectorEndArc1 = [\n      midLinkLine[0] - mid1[0],\n      midLinkLine[1] - mid1[1],\n    ];\n    const magnitudeEndArc1 = Math.sqrt(\n      directionVectorEndArc1[0] ** 2 + directionVectorEndArc1[1] ** 2\n    );\n    const normalizedDirectionEndArc1 = [\n      directionVectorEndArc1[0] / magnitudeEndArc1,\n      directionVectorEndArc1[1] / magnitudeEndArc1,\n    ];\n    const arc1End = [\n      mid1[0] + normalizedDirectionEndArc1[0] * linkLineLength * ratio,\n      mid1[1] + normalizedDirectionEndArc1[1] * linkLineLength * ratio,\n    ] as Types.Point2;\n\n    // Similar logic for arc2Start\n    const directionVectorStartArc2 = [\n      secondLine[arc2Side][0] - midSecondLine[0],\n      secondLine[arc2Side][1] - midSecondLine[1],\n    ];\n    const magnitudeStartArc2 = Math.sqrt(\n      directionVectorStartArc2[0] ** 2 + directionVectorStartArc2[1] ** 2\n    );\n    const normalizedDirectionStartArc2 = [\n      directionVectorStartArc2[0] / magnitudeStartArc2,\n      directionVectorStartArc2[1] / magnitudeStartArc2,\n    ];\n    const arc2Start = [\n      midSecondLine[0] +\n        normalizedDirectionStartArc2[0] * linkLineLength * ratio,\n      midSecondLine[1] +\n        normalizedDirectionStartArc2[1] * linkLineLength * ratio,\n    ] as Types.Point2;\n\n    // Similar logic for arc2End\n    const directionVectorEndArc2 = [\n      midLinkLine[0] - mid2[0],\n      midLinkLine[1] - mid2[1],\n    ];\n    const magnitudeEndArc2 = Math.sqrt(\n      directionVectorEndArc2[0] ** 2 + directionVectorEndArc2[1] ** 2\n    );\n    const normalizedDirectionEndArc2 = [\n      directionVectorEndArc2[0] / magnitudeEndArc2,\n      directionVectorEndArc2[1] / magnitudeEndArc2,\n    ];\n    const arc2End = [\n      mid2[0] + normalizedDirectionEndArc2[0] * linkLineLength * ratio,\n      mid2[1] + normalizedDirectionEndArc2[1] * linkLineLength * ratio,\n    ] as Types.Point2;\n\n    return {\n      arc1Start,\n      arc1End,\n      arc2Start,\n      arc2End,\n      arc1Angle: arc1Angle > 90 ? 180 - arc1Angle : arc1Angle,\n      arc2Angle: arc2Angle > 90 ? 180 - arc2Angle : arc2Angle,\n    };\n  };\n}\n\nfunction defaultGetTextLines(data, targetId): string[] {\n  const cachedVolumeStats = data.cachedStats[targetId];\n  const { angle } = cachedVolumeStats;\n\n  if (angle === undefined) {\n    return;\n  }\n\n  const textLines = [`${angle.toFixed(2)} ${String.fromCharCode(176)}`];\n\n  return textLines;\n}\n\nCobbAngleTool.toolName = 'CobbAngle';\nexport default CobbAngleTool;\n","import {\n  getEnabledElement,\n  StackViewport,\n  VolumeViewport,\n  utilities,\n  getEnabledElementByIds,\n} from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\nimport {\n  addAnnotation,\n  getAnnotations,\n} from '../stateManagement/annotation/annotationState';\nimport { isAnnotationVisible } from '../stateManagement/annotation/annotationVisibility';\nimport { drawLine } from '../drawingSvg';\nimport { getViewportIdsWithToolToRender } from '../utilities/viewportFilters';\nimport {\n  EventTypes,\n  PublicToolProps,\n  ToolProps,\n  SVGDrawingHelper,\n  Annotation,\n  Annotations,\n} from '../types';\nimport { ReferenceCursor } from '../types/ToolSpecificAnnotationTypes';\n\nimport triggerAnnotationRenderForViewportIds from '../utilities/triggerAnnotationRenderForViewportIds';\nimport { StyleSpecifier } from '../types/AnnotationStyle';\nimport { vec3 } from 'gl-matrix';\nimport AnnotationDisplayTool from './base/AnnotationDisplayTool';\nimport vtkMath from '@kitware/vtk.js/Common/Core/Math';\nimport {\n  hideElementCursor,\n  resetElementCursor,\n} from '../cursors/elementCursor';\nimport { getToolGroup } from '../store/ToolGroupManager';\n\n/**\n * ReferenceCursors is a tool that will show your cursors position in all other elements in the toolGroup if they have a matching FrameOfReference relative to its position in world space.\n * Also when positionSync is enabled, it will try to sync viewports so that the cursor can be displayed in the correct position in all viewports.\n *\n * Configuration:\n * - positionSync: boolean, if true, it will try to sync viewports so that the cursor can be displayed in the correct position in all viewports.\n * - disableCursor: boolean, if true, it will hide the cursor in all viewports. You need to disable and reactivate the tool for this to apply.\n * - displayThreshold: number, if the distance of the cursor in a viewport is bigger than this threshold the cursor will not be displayed.\n *\n * Only uses Active and Disabled state\n */\nclass ReferenceCursors extends AnnotationDisplayTool {\n  static toolName;\n  touchDragCallback: any;\n  mouseDragCallback: any;\n  _throttledCalculateCachedStats: any;\n  isDrawing = false;\n  isHandleOutsideImage = false;\n  _elementWithCursor: null | HTMLDivElement = null;\n  _currentCursorWorldPosition: null | Types.Point3 = null;\n  _currentCanvasPosition: null | Types.Point2 = null;\n  //need to keep track if this was enabled when tool was enabled because we need to know if we should reset cursors\n  _disableCursorEnabled = false;\n\n  constructor(\n    toolProps: PublicToolProps = {},\n    defaultToolProps: ToolProps = {\n      supportedInteractionTypes: ['Mouse', 'Touch'],\n      configuration: {\n        shadow: true,\n        preventHandleOutsideImage: false,\n        displayThreshold: 5,\n        positionSync: true,\n        disableCursor: false,\n      },\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n    this._disableCursorEnabled = this.configuration.disableCursor;\n  }\n\n  /**\n   * Overwritten mouseMoveCallback since we want to keep track of the current mouse position and redraw on mouseMove\n   * @virtual Event handler for Cornerstone MOUSE_MOVE event.\n   *\n   *\n   * @param evt - The normalized mouse event\n   * @param filteredAnnotations - The annotations to check for hover interactions\n   * @returns True if the annotation needs to be re-drawn by the annotationRenderingEngine.\n   */\n  mouseMoveCallback = (evt: EventTypes.InteractionEventType): boolean => {\n    const { detail } = evt;\n    const { element, currentPoints } = detail;\n\n    //save current positions and current element the curser is hovering over\n    this._currentCursorWorldPosition = currentPoints.world;\n    this._currentCanvasPosition = currentPoints.canvas;\n    this._elementWithCursor = element;\n\n    const annotation = this.getActiveAnnotation(element);\n    if (annotation === null) {\n      this.createInitialAnnotation(currentPoints.world, element);\n      return false;\n    }\n    this.updateAnnotationPosition(element, annotation);\n    return false;\n  };\n\n  onSetToolActive(): void {\n    this._disableCursorEnabled = this.configuration.disableCursor;\n    if (!this._disableCursorEnabled) {\n      return;\n    }\n    const viewportIds = getToolGroup(this.toolGroupId).viewportsInfo;\n    if (!viewportIds) {\n      return;\n    }\n    const enabledElements = viewportIds.map((e) =>\n      getEnabledElementByIds(e.viewportId, e.renderingEngineId)\n    );\n\n    enabledElements.forEach((element) => {\n      if (element) {\n        hideElementCursor(element.viewport.element);\n      }\n    });\n  }\n  onSetToolDisabled(): void {\n    if (!this._disableCursorEnabled) {\n      return;\n    }\n    const viewportIds = getToolGroup(this.toolGroupId).viewportsInfo;\n    if (!viewportIds) {\n      return;\n    }\n    const enabledElements = viewportIds.map((e) =>\n      getEnabledElementByIds(e.viewportId, e.renderingEngineId)\n    );\n    enabledElements.forEach((element) => {\n      if (element) {\n        resetElementCursor(element.viewport.element);\n      }\n    });\n  }\n\n  createInitialAnnotation = (\n    worldPos: Types.Point3,\n    element: HTMLDivElement\n  ): void => {\n    const enabledElement = getEnabledElement(element);\n    if (!enabledElement) {\n      throw new Error('No enabled element found');\n    }\n    const { viewport, renderingEngine } = enabledElement;\n\n    this.isDrawing = true;\n\n    const camera = viewport.getCamera();\n    const { viewPlaneNormal, viewUp } = camera;\n    if (!viewPlaneNormal || !viewUp) {\n      throw new Error('Camera not found');\n    }\n\n    const referencedImageId = this.getReferencedImageId(\n      viewport,\n      worldPos,\n      viewPlaneNormal,\n      viewUp\n    );\n\n    const FrameOfReferenceUID = viewport.getFrameOfReferenceUID();\n\n    const annotation = {\n      highlighted: true,\n      invalidated: true,\n      metadata: {\n        toolName: this.getToolName(),\n        viewPlaneNormal: <Types.Point3>[...viewPlaneNormal],\n        viewUp: <Types.Point3>[...viewUp],\n        FrameOfReferenceUID,\n        referencedImageId,\n      },\n      data: {\n        label: '',\n        handles: {\n          points: [[...worldPos]] as [Types.Point3],\n          activeHandleIndex: null,\n          textBox: {\n            hasMoved: false,\n            worldPosition: <Types.Point3>[0, 0, 0],\n            worldBoundingBox: {\n              topLeft: <Types.Point3>[0, 0, 0],\n              topRight: <Types.Point3>[0, 0, 0],\n              bottomLeft: <Types.Point3>[0, 0, 0],\n              bottomRight: <Types.Point3>[0, 0, 0],\n            },\n          },\n        },\n      },\n    };\n\n    const annotations = getAnnotations(this.getToolName(), element);\n\n    if (annotations.length > 0) {\n      return null;\n    }\n    const annotationId = addAnnotation(annotation, element);\n\n    if (annotationId === null) {\n      return;\n    }\n\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName(),\n      false\n    );\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n  };\n\n  getActiveAnnotation(element: HTMLDivElement): null | Annotation {\n    const annotations = getAnnotations(this.getToolName(), element);\n    if (!annotations.length) {\n      return null;\n    }\n    const targetAnnotation = annotations[0];\n    return targetAnnotation;\n  }\n\n  /**\n   * updates the position of the annotation to match the currently set world position\n   */\n  updateAnnotationPosition(\n    element: HTMLDivElement,\n    annotation: Annotation\n  ): void {\n    const worldPos = this._currentCursorWorldPosition;\n    if (!worldPos) {\n      return;\n    }\n    if (!annotation.data?.handles?.points) {\n      return;\n    }\n    annotation.data.handles.points = [[...worldPos]];\n    annotation.invalidated = true;\n\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName(),\n      false\n    );\n    const enabledElement = getEnabledElement(element);\n    if (!enabledElement) {\n      return;\n    }\n    const { renderingEngine } = enabledElement;\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n  }\n\n  //checks if we need to update the annotation position due to camera changes\n  onCameraModified = (evt: any): void => {\n    const eventDetail = evt.detail;\n    const { element, previousCamera, camera } = eventDetail;\n    const enabledElement = getEnabledElement(element);\n    const viewport = enabledElement.viewport as\n      | Types.IVolumeViewport\n      | Types.IStackViewport;\n\n    //only react to changes for element with cursor, otherwise would cause infinite loop\n    if (element !== this._elementWithCursor) {\n      return;\n    }\n    //check if camera moved along its normal\n    const oldFocalPoint = previousCamera.focalPoint;\n    const cameraNormal = camera.viewPlaneNormal;\n    const newFocalPoint = camera.focalPoint;\n\n    const deltaCameraFocalPoint: Types.Point3 = [0, 0, 0];\n    vtkMath.subtract(newFocalPoint, oldFocalPoint, deltaCameraFocalPoint);\n    //check if focal point changed\n    if (deltaCameraFocalPoint.reduce((a, b) => a + b, 0) === 0) {\n      return;\n    }\n    //if nomrmal is perpendicular to focal point change, then we are not moving along the normal\n    const dotProduct = vtkMath.dot(deltaCameraFocalPoint, cameraNormal);\n    //dot product is 0 -> perpendicular\n    if (Math.abs(dotProduct) < 1e-2) {\n      return;\n    }\n\n    //need to update the position of the annotation since camera changed\n    if (!this._currentCanvasPosition) {\n      return;\n    }\n\n    const newWorldPos = viewport.canvasToWorld(this._currentCanvasPosition);\n    this._currentCursorWorldPosition = newWorldPos;\n    this.updateAnnotationPosition(element, this.getActiveAnnotation(element));\n  };\n\n  //display annotation if current viewing plane has a max distance of \"displayThreshold\" from the annotation\n  filterInteractableAnnotationsForElement(\n    element: HTMLDivElement,\n    annotations: Annotations\n  ): Annotations {\n    //calculate distance of current viewport to annotation\n    if (!(annotations instanceof Array) || annotations.length === 0) {\n      return [];\n    }\n    const annotation = annotations[0];\n    const viewport = getEnabledElement(element)?.viewport;\n    if (!viewport) {\n      return [];\n    }\n    const camera = viewport.getCamera();\n    const { viewPlaneNormal, focalPoint } = camera;\n    if (!viewPlaneNormal || !focalPoint) {\n      return [];\n    }\n    const points = annotation.data?.handles?.points;\n    if (!(points instanceof Array) || points.length !== 1) {\n      return [];\n    }\n    const worldPos = points[0];\n    const plane = utilities.planar.planeEquation(viewPlaneNormal, focalPoint);\n    const distance = utilities.planar.planeDistanceToPoint(plane, worldPos);\n    return distance < this.configuration.displayThreshold ? [annotation] : [];\n  }\n\n  /**\n   * Draws the cursor representation on the enabledElement\n   * Checks if a stack change has happened and updates annotation in that case\n   *\n   * @param enabledElement - The Cornerstone's enabledElement.\n   * @param svgDrawingHelper - The svgDrawingHelper providing the context for drawing.\n   */\n  renderAnnotation = (\n    enabledElement: Types.IEnabledElement,\n    svgDrawingHelper: SVGDrawingHelper\n  ): boolean => {\n    let renderStatus = false;\n    const { viewport, FrameOfReferenceUID } = enabledElement;\n\n    const isElementWithCursor = this._elementWithCursor === viewport.element;\n\n    //update stack position if position sync is enabled\n    if (this.configuration.positionSync && !isElementWithCursor) {\n      this.updateViewportImage(viewport);\n    }\n\n    const { element } = viewport;\n\n    let annotations = getAnnotations(this.getToolName(), element);\n\n    if (!annotations?.length) {\n      return renderStatus;\n    }\n\n    //the viewport change from updateStackPosition might not be applied yet, so sometimes the annotation might not be immediately visible\n    annotations = this.filterInteractableAnnotationsForElement(\n      element,\n      annotations\n    ) as Annotations;\n\n    if (!annotations?.length) {\n      return renderStatus;\n    }\n\n    const styleSpecifier: StyleSpecifier = {\n      toolGroupId: this.toolGroupId,\n      toolName: this.getToolName(),\n      viewportId: enabledElement.viewport.id,\n    };\n\n    for (let i = 0; i < annotations.length; i++) {\n      const annotation = annotations[i] as ReferenceCursor;\n      const { annotationUID, data } = annotation;\n      const { handles } = data;\n      const { points } = handles;\n\n      if (!annotationUID) {\n        return renderStatus;\n      }\n      styleSpecifier.annotationUID = annotationUID;\n\n      const lineWidthBase = parseFloat(\n        this.getStyle('lineWidth', styleSpecifier, annotation) as string\n      );\n\n      const lineWidth =\n        typeof lineWidthBase === 'number' && isElementWithCursor\n          ? lineWidthBase\n          : lineWidthBase;\n      const lineDash = this.getStyle('lineDash', styleSpecifier, annotation);\n      const color = this.getStyle('color', styleSpecifier, annotation);\n\n      if (points[0].some((e) => isNaN(e))) {\n        return renderStatus;\n      }\n      const canvasCoordinates = points.map((p) =>\n        viewport.worldToCanvas(p)\n      ) as [Types.Point2];\n\n      // If rendering engine has been destroyed while rendering\n      if (!viewport.getRenderingEngine()) {\n        console.warn('Rendering Engine has been destroyed');\n        return renderStatus;\n      }\n\n      if (!isAnnotationVisible(annotationUID)) {\n        continue;\n      }\n\n      const crosshairUIDs = {\n        upper: 'upper',\n        right: 'right',\n        lower: 'lower',\n        left: 'left',\n      };\n      const [x, y] = canvasCoordinates[0];\n      const centerSpace = isElementWithCursor ? 20 : 7;\n      const lineLength = isElementWithCursor ? 5 : 7;\n      drawLine(\n        svgDrawingHelper,\n        annotationUID,\n        crosshairUIDs.upper,\n        [x, y - (centerSpace / 2 + lineLength)],\n        [x, y - centerSpace / 2],\n        { color, lineDash, lineWidth }\n      );\n      drawLine(\n        svgDrawingHelper,\n        annotationUID,\n        crosshairUIDs.lower,\n        [x, y + (centerSpace / 2 + lineLength)],\n        [x, y + centerSpace / 2],\n        { color, lineDash, lineWidth }\n      );\n      drawLine(\n        svgDrawingHelper,\n        annotationUID,\n        crosshairUIDs.right,\n        [x + (centerSpace / 2 + lineLength), y],\n        [x + centerSpace / 2, y],\n        { color, lineDash, lineWidth }\n      );\n      drawLine(\n        svgDrawingHelper,\n        annotationUID,\n        crosshairUIDs.left,\n        [x - (centerSpace / 2 + lineLength), y],\n        [x - centerSpace / 2, y],\n        { color, lineDash, lineWidth }\n      );\n      renderStatus = true;\n    }\n\n    return renderStatus;\n  };\n\n  updateViewportImage(\n    viewport: Types.IStackViewport | Types.IVolumeViewport\n  ): void {\n    const currentMousePosition = this._currentCursorWorldPosition;\n\n    if (!currentMousePosition || currentMousePosition.some((e) => isNaN(e))) {\n      return;\n    }\n\n    if (viewport instanceof StackViewport) {\n      const closestIndex = utilities.getClosestStackImageIndexForPoint(\n        currentMousePosition,\n        viewport\n      );\n\n      if (closestIndex === null) {\n        return;\n      }\n      if (closestIndex !== viewport.getCurrentImageIdIndex()) {\n        viewport.setImageIdIndex(closestIndex);\n      }\n    } else if (viewport instanceof VolumeViewport) {\n      const { focalPoint, viewPlaneNormal } = viewport.getCamera();\n      if (!focalPoint || !viewPlaneNormal) {\n        return;\n      }\n      const plane = utilities.planar.planeEquation(viewPlaneNormal, focalPoint);\n      const currentDistance = utilities.planar.planeDistanceToPoint(\n        plane,\n        currentMousePosition,\n        true\n      );\n\n      if (Math.abs(currentDistance) < 0.5) {\n        return;\n      }\n      const normalizedViewPlane = vec3.normalize(\n        vec3.create(),\n        vec3.fromValues(...viewPlaneNormal)\n      );\n      const scaledPlaneNormal = vec3.scale(\n        vec3.create(),\n        normalizedViewPlane,\n        currentDistance\n      );\n      const newFocalPoint = vec3.add(\n        vec3.create(),\n        vec3.fromValues(...focalPoint),\n        scaledPlaneNormal\n      ) as Types.Point3;\n      //TODO: make check if new focal point is within bounds of volume\n      const isInBounds = true;\n      if (isInBounds) {\n        viewport.setCamera({ focalPoint: newFocalPoint });\n        const renderingEngine = viewport.getRenderingEngine();\n        if (renderingEngine) {\n          renderingEngine.renderViewport(viewport.id);\n        }\n      }\n    }\n  }\n}\n\nReferenceCursors.toolName = 'ReferenceCursors';\nexport default ReferenceCursors;\n","import AnnotationDisplayTool from './base/AnnotationDisplayTool';\nimport { vec3 } from 'gl-matrix';\nimport {\n  getEnabledElementByIds,\n  getRenderingEngines,\n  utilities as csUtils,\n} from '@cornerstonejs/core';\nimport { ScaleOverlayAnnotation } from '../types/ToolSpecificAnnotationTypes';\nimport type { Types } from '@cornerstonejs/core';\nimport {\n  addAnnotation,\n  getAnnotations,\n} from '../stateManagement/annotation/annotationState';\nimport {\n  drawLine as drawLineSvg,\n  drawTextBox as drawTextBoxSvg,\n} from '../drawingSvg';\nimport {\n  EventTypes,\n  PublicToolProps,\n  ToolProps,\n  SVGDrawingHelper,\n} from '../types';\nimport { StyleSpecifier } from '../types/AnnotationStyle';\nimport { getToolGroup } from '../store/ToolGroupManager';\n\nconst SCALEOVERLAYTOOL_ID = 'scaleoverlay-viewport';\nconst viewportsWithAnnotations = [];\n\n/**\n * @public\n * @class ScaleOverlayTool\n * @memberof Tools\n *\n * @classdesc Tool for displaying a scale overlay on the image.\n * @extends Tools.Base.BaseTool\n */\nclass ScaleOverlayTool extends AnnotationDisplayTool {\n  static toolName;\n\n  public touchDragCallback: any;\n  public mouseDragCallback: any;\n  _throttledCalculateCachedStats: any;\n  editData: {\n    renderingEngine: any;\n    viewport: any;\n    annotation: ScaleOverlayAnnotation;\n  } | null = {} as any;\n  isDrawing: boolean;\n  isHandleOutsideImage: boolean;\n\n  constructor(\n    toolProps: PublicToolProps = {},\n    defaultToolProps: ToolProps = {\n      configuration: {\n        viewportId: '',\n        scaleLocation: 'bottom',\n      },\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n  }\n\n  _init = (): void => {\n    const renderingEngines = getRenderingEngines();\n    const renderingEngine = renderingEngines[0];\n\n    if (!renderingEngine) {\n      return;\n    }\n\n    // get viewports with tool enabled\n    const viewportIds = getToolGroup(this.toolGroupId).viewportsInfo;\n\n    if (!viewportIds) {\n      return;\n    }\n\n    // get enabled elements\n    const enabledElements = viewportIds.map((e) =>\n      getEnabledElementByIds(e.viewportId, e.renderingEngineId)\n    );\n\n    let { viewport } = enabledElements[0];\n    const { FrameOfReferenceUID } = enabledElements[0];\n\n    // onCameraModified, configuration.viewportId is set to the active\n    // viewport Id, here we are setting the viewport variable to the\n    // viewport with the matching Id\n    if (this.configuration.viewportId) {\n      enabledElements.forEach((element) => {\n        if (element.viewport.id == this.configuration.viewportId) {\n          viewport = element.viewport;\n        }\n      });\n    }\n\n    if (!viewport) {\n      return;\n    }\n\n    const { viewUp, viewPlaneNormal } = viewport.getCamera();\n\n    const viewportCanvasCornersInWorld =\n      csUtils.getViewportImageCornersInWorld(viewport);\n\n    let annotation = this.editData.annotation;\n\n    const annotations = getAnnotations(this.getToolName(), viewport.element);\n\n    // if annotations have been created, get the annotation for the\n    // current viewport Id\n    if (annotations.length) {\n      annotation = annotations.filter(\n        (thisAnnotation) => thisAnnotation.data.viewportId == viewport.id\n      )[0] as ScaleOverlayAnnotation;\n    }\n\n    // viewportsWithAnnotations stores which viewports have an annotation,\n    // if the viewport does not have an annotation, create a new one\n    if (!viewportsWithAnnotations.includes(viewport.id)) {\n      const newAnnotation: ScaleOverlayAnnotation = {\n        metadata: {\n          toolName: this.getToolName(),\n          viewPlaneNormal: <Types.Point3>[...viewPlaneNormal],\n          viewUp: <Types.Point3>[...viewUp],\n          FrameOfReferenceUID,\n          referencedImageId: null,\n        },\n        data: {\n          handles: {\n            points: viewportCanvasCornersInWorld,\n          },\n          viewportId: viewport.id,\n        },\n      };\n\n      viewportsWithAnnotations.push(viewport.id);\n\n      addAnnotation(newAnnotation, viewport.element);\n      annotation = newAnnotation;\n    } else if (this.editData.annotation.data.viewportId == viewport.id) {\n      this.editData.annotation.data.handles.points =\n        viewportCanvasCornersInWorld;\n      this.editData.annotation.data.viewportId = viewport.id;\n    }\n\n    this.editData = {\n      viewport,\n      renderingEngine,\n      annotation,\n    };\n  };\n\n  onSetToolEnabled = (): void => {\n    this._init();\n  };\n\n  onCameraModified = (evt: Types.EventTypes.CameraModifiedEvent): void => {\n    // If the camera is modified, we need to update the viewport\n    // that the camera was modified on\n    this.configuration.viewportId = evt.detail.viewportId;\n    this._init();\n  };\n\n  /**\n   * Used to draw the scale annotation in each request animation\n   * frame.\n   *\n   * @param enabledElement - The Cornerstone's enabledElement.\n   * @param svgDrawingHelper - The svgDrawingHelper providing the context for drawing.\n   * @returns\n   */\n\n  renderAnnotation(\n    enabledElement: Types.IEnabledElement,\n    svgDrawingHelper: SVGDrawingHelper\n  ) {\n    if (!this.editData.viewport) {\n      return;\n    }\n    const location = this.configuration.scaleLocation;\n    const { viewport } = enabledElement;\n\n    const annotations = getAnnotations(this.getToolName(), viewport.element);\n    const annotation = annotations.filter(\n      (thisAnnotation) => thisAnnotation.data.viewportId == viewport.id\n    )[0];\n    const canvas = enabledElement.viewport.canvas;\n\n    const renderStatus = false;\n\n    if (!viewport) {\n      return renderStatus;\n    }\n\n    const styleSpecifier: StyleSpecifier = {\n      toolGroupId: this.toolGroupId,\n      toolName: this.getToolName(),\n      viewportId: enabledElement.viewport.id,\n    };\n\n    const canvasSize = {\n      width: canvas.width,\n      height: canvas.height,\n    };\n\n    const topLeft = annotation.data.handles.points[0];\n    const topRight = annotation.data.handles.points[1];\n    const bottomLeft = annotation.data.handles.points[2];\n    const bottomRight = annotation.data.handles.points[3];\n\n    const pointSet1 = [topLeft, bottomLeft, topRight, bottomRight];\n\n    const worldWidthViewport = vec3.distance(bottomLeft, bottomRight);\n    const worldHeightViewport = vec3.distance(topLeft, bottomLeft);\n\n    // hscaleBounds and vscaleBounds compute the max bound for scales on the image\n    const hscaleBounds = this.computeScaleBounds(\n      canvasSize,\n      0.05,\n      0.05,\n      location\n    );\n\n    const vscaleBounds = this.computeScaleBounds(\n      canvasSize,\n      0.05,\n      0.05,\n      location\n    );\n\n    // Computes which scale size to use, ex: 100mm, 50mm\n    const scaleSize = this.computeScaleSize(\n      worldWidthViewport,\n      worldHeightViewport,\n      location\n    );\n\n    // Applies the scale with the predetermined size to the image in\n    // world coordinates, then converts them to canvas coordinates\n    const canvasCoordinates = this.computeWorldScaleCoordinates(\n      scaleSize,\n      location,\n      pointSet1\n    ).map((world) => viewport.worldToCanvas(world));\n\n    // Uses the bounds and canvas size to center the scale\n    // based on the location\n    const scaleCanvasCoordinates = this.computeCanvasScaleCoordinates(\n      canvasSize,\n      canvasCoordinates,\n      vscaleBounds,\n      hscaleBounds,\n      location\n    );\n\n    // Computes the end scale ticks coordinates\n    const scaleTicks = this.computeEndScaleTicks(\n      scaleCanvasCoordinates,\n      location\n    );\n\n    const { annotationUID } = annotation;\n\n    styleSpecifier.annotationUID = annotationUID;\n    const lineWidth = this.getStyle('lineWidth', styleSpecifier, annotation);\n    const lineDash = this.getStyle('lineDash', styleSpecifier, annotation);\n    const color = this.getStyle('color', styleSpecifier, annotation);\n    const shadow = this.getStyle('shadow', styleSpecifier, annotation);\n\n    const scaleId = `${annotationUID}-scaleline`;\n    const scaleLineUID = '1';\n    drawLineSvg(\n      svgDrawingHelper,\n      annotationUID,\n      scaleLineUID,\n      scaleCanvasCoordinates[0],\n      scaleCanvasCoordinates[1],\n      {\n        color,\n        width: lineWidth,\n        lineDash,\n        shadow,\n      },\n      scaleId\n    );\n    const leftTickId = `${annotationUID}-left`;\n    const leftTickUID = '2';\n\n    drawLineSvg(\n      svgDrawingHelper,\n      annotationUID,\n      leftTickUID,\n      scaleTicks.endTick1[0] as Types.Point2,\n      scaleTicks.endTick1[1] as Types.Point2,\n      {\n        color,\n        width: lineWidth,\n        lineDash,\n        shadow,\n      },\n      leftTickId\n    );\n    const rightTickId = `${annotationUID}-right`;\n    const rightTickUID = '3';\n\n    drawLineSvg(\n      svgDrawingHelper,\n      annotationUID,\n      rightTickUID,\n      scaleTicks.endTick2[0] as Types.Point2,\n      scaleTicks.endTick2[1] as Types.Point2,\n      {\n        color,\n        width: lineWidth,\n        lineDash,\n        shadow,\n      },\n      rightTickId\n    );\n\n    const locationTextOffest = {\n      bottom: [-10, -42],\n      top: [-12, -35],\n      left: [-40, -20],\n      right: [-50, -20],\n    };\n\n    const textCanvasCoordinates = [\n      scaleCanvasCoordinates[0][0] + locationTextOffest[location][0],\n      scaleCanvasCoordinates[0][1] + locationTextOffest[location][1],\n    ];\n    const textBoxLines = this._getTextLines(scaleSize);\n\n    const { tickIds, tickUIDs, tickCoordinates } = this.computeInnerScaleTicks(\n      scaleSize,\n      location,\n      annotationUID,\n      scaleTicks.endTick1,\n      scaleTicks.endTick2\n    );\n\n    // draws inner ticks for scale\n    for (let i = 0; i < tickUIDs.length; i++) {\n      drawLineSvg(\n        svgDrawingHelper,\n        annotationUID,\n        tickUIDs[i],\n        tickCoordinates[i][0],\n        tickCoordinates[i][1],\n        {\n          color,\n          width: lineWidth,\n          lineDash,\n          shadow,\n        },\n        tickIds[i]\n      );\n    }\n\n    const textUID = 'text0';\n    drawTextBoxSvg(\n      svgDrawingHelper,\n      annotationUID,\n      textUID,\n      textBoxLines,\n      [textCanvasCoordinates[0], textCanvasCoordinates[1]],\n      {\n        fontFamily: 'Helvetica Neue, Helvetica, Arial, sans-serif',\n        fontSize: '14px',\n        lineDash: '2,3',\n        lineWidth: '1',\n        shadow: true,\n        color: color,\n      }\n    );\n\n    return renderStatus;\n  }\n\n  _getTextLines(scaleSize: number): string[] | undefined {\n    let scaleSizeDisplayValue;\n    let scaleSizeUnits;\n    if (scaleSize >= 50) {\n      scaleSizeDisplayValue = scaleSize / 10; //convert to cm\n      scaleSizeUnits = ' cm';\n    } else {\n      scaleSizeDisplayValue = scaleSize; //convert to cm\n      scaleSizeUnits = ' mm';\n    }\n\n    const textLines = [scaleSizeDisplayValue.toString().concat(scaleSizeUnits)];\n\n    return textLines;\n  }\n\n  /**\n   *\n   * @param worldWidthViewport\n   * @returns currentScaleSize\n   */\n  computeScaleSize = (\n    worldWidthViewport: number,\n    worldHeightViewport: number,\n    location: any\n  ) => {\n    const scaleSizes = [\n      16000, 8000, 4000, 2000, 1000, 500, 250, 100, 50, 25, 10, 5, 2,\n    ];\n    let currentScaleSize;\n    if (location == 'top' || location == 'bottom') {\n      currentScaleSize = scaleSizes.filter(\n        (scaleSize) =>\n          scaleSize < worldWidthViewport * 0.6 &&\n          scaleSize > worldWidthViewport * 0.2\n      );\n    } else {\n      currentScaleSize = scaleSizes.filter(\n        (scaleSize) =>\n          scaleSize < worldHeightViewport * 0.6 &&\n          scaleSize > worldHeightViewport * 0.2\n      );\n    }\n\n    return currentScaleSize[0];\n  };\n\n  /**\n   *  calculates scale ticks for ends of the scale\n   * @param canvasCoordinates\n   * @returns leftTick, rightTick\n   */\n  computeEndScaleTicks = (canvasCoordinates, location) => {\n    const locationTickOffset = {\n      bottom: [\n        [0, -10],\n        [0, -10],\n      ],\n      top: [\n        [0, 10],\n        [0, 10],\n      ],\n      left: [\n        [0, 0],\n        [10, 0],\n      ],\n      right: [\n        [0, 0],\n        [-10, 0],\n      ],\n    };\n\n    const endTick1 = [\n      [\n        canvasCoordinates[1][0] + locationTickOffset[location][0][0],\n        canvasCoordinates[1][1] + locationTickOffset[location][0][0],\n      ],\n      [\n        canvasCoordinates[1][0] + locationTickOffset[location][1][0],\n        canvasCoordinates[1][1] + locationTickOffset[location][1][1],\n      ],\n    ];\n    const endTick2 = [\n      [\n        canvasCoordinates[0][0] + locationTickOffset[location][0][0],\n        canvasCoordinates[0][1] + locationTickOffset[location][0][0],\n      ],\n      [\n        canvasCoordinates[0][0] + locationTickOffset[location][1][0],\n        canvasCoordinates[0][1] + locationTickOffset[location][1][1],\n      ],\n    ];\n\n    return {\n      endTick1: endTick1,\n      endTick2: endTick2,\n    };\n  };\n\n  computeInnerScaleTicks = (\n    scaleSize: number,\n    location: string,\n    annotationUID: string,\n    leftTick: any[][],\n    rightTick: any[][]\n  ) => {\n    let canvasScaleSize;\n    if (location == 'bottom' || location == 'top') {\n      canvasScaleSize = rightTick[0][0] - leftTick[0][0];\n    } else if (location == 'left' || location == 'right') {\n      canvasScaleSize = rightTick[0][1] - leftTick[0][1];\n    }\n    const tickIds = [];\n    const tickUIDs = [];\n    const tickCoordinates = [];\n    let numberSmallTicks = scaleSize;\n\n    if (scaleSize >= 50) {\n      numberSmallTicks = scaleSize / 10;\n    }\n\n    const tickSpacing = canvasScaleSize / numberSmallTicks;\n\n    for (let i = 0; i < numberSmallTicks - 1; i++) {\n      const locationOffset = {\n        bottom: [\n          [tickSpacing * (i + 1), 0],\n          [tickSpacing * (i + 1), 5],\n        ],\n        top: [\n          [tickSpacing * (i + 1), 0],\n          [tickSpacing * (i + 1), -5],\n        ],\n        left: [\n          [0, tickSpacing * (i + 1)],\n          [-5, tickSpacing * (i + 1)],\n        ],\n        right: [\n          [0, tickSpacing * (i + 1)],\n          [5, tickSpacing * (i + 1)],\n        ],\n      };\n      tickIds.push(`${annotationUID}-tick${i}`);\n      tickUIDs.push(`tick${i}`);\n      if ((i + 1) % 5 == 0) {\n        tickCoordinates.push([\n          [\n            leftTick[0][0] + locationOffset[location][0][0],\n            leftTick[0][1] + locationOffset[location][0][1],\n          ],\n          [\n            leftTick[1][0] + locationOffset[location][0][0],\n            leftTick[1][1] + locationOffset[location][0][1],\n          ],\n        ]);\n      } else {\n        tickCoordinates.push([\n          [\n            leftTick[0][0] + locationOffset[location][0][0],\n            leftTick[0][1] + locationOffset[location][0][1],\n          ],\n          [\n            leftTick[1][0] + locationOffset[location][1][0],\n            leftTick[1][1] + locationOffset[location][1][1],\n          ],\n        ]);\n      }\n    }\n\n    return { tickIds, tickUIDs, tickCoordinates };\n  };\n\n  computeWorldScaleCoordinates = (scaleSize, location, pointSet) => {\n    let worldCoordinates;\n    let topBottomVec = vec3.subtract(vec3.create(), pointSet[0], pointSet[1]);\n    topBottomVec = vec3.normalize(vec3.create(), topBottomVec) as Types.Point3;\n\n    let topRightVec = vec3.subtract(vec3.create(), pointSet[2], pointSet[0]);\n    topRightVec = vec3.normalize(vec3.create(), topRightVec);\n\n    const midpointLocation = {\n      bottom: [pointSet[1], pointSet[2]],\n      top: [pointSet[0], pointSet[3]],\n      right: [pointSet[2], pointSet[3]],\n      left: [pointSet[0], pointSet[1]],\n    };\n\n    const midpoint = vec3\n      .add(\n        vec3.create(),\n        midpointLocation[location][0],\n        midpointLocation[location][0]\n      )\n      .map((i) => i / 2) as Types.Point3;\n\n    const offset =\n      scaleSize /\n      2 /\n      Math.sqrt(\n        Math.pow(topBottomVec[0], 2) +\n          Math.pow(topBottomVec[1], 2) +\n          Math.pow(topBottomVec[2], 2)\n      );\n\n    if (location == 'top' || location == 'bottom') {\n      worldCoordinates = [\n        vec3.subtract(\n          vec3.create(),\n          midpoint,\n          topRightVec.map((i) => i * offset) as Types.Point3\n        ),\n        vec3.add(\n          vec3.create(),\n          midpoint,\n          topRightVec.map((i) => i * offset) as Types.Point3\n        ),\n      ];\n    } else if (location == 'left' || location == 'right') {\n      worldCoordinates = [\n        vec3.add(\n          vec3.create(),\n          midpoint,\n          topBottomVec.map((i) => i * offset) as Types.Point3\n        ),\n        vec3.subtract(\n          vec3.create(),\n          midpoint,\n          topBottomVec.map((i) => i * offset) as Types.Point3\n        ),\n      ];\n    }\n\n    return worldCoordinates;\n  };\n\n  /**\n   * Computes the centered canvas coordinates for scale\n   * @param canvasSize\n   * @param canvasCoordinates\n   * @param vscaleBounds\n   * @returns scaleCanvasCoordinates\n   */\n  computeCanvasScaleCoordinates = (\n    canvasSize,\n    canvasCoordinates,\n    vscaleBounds,\n    hscaleBounds,\n    location\n  ) => {\n    let scaleCanvasCoordinates;\n    if (location == 'top' || location == 'bottom') {\n      const worldDistanceOnCanvas =\n        canvasCoordinates[0][0] - canvasCoordinates[1][0];\n      scaleCanvasCoordinates = [\n        [canvasSize.width / 2 - worldDistanceOnCanvas / 2, vscaleBounds.height],\n        [canvasSize.width / 2 + worldDistanceOnCanvas / 2, vscaleBounds.height],\n      ];\n    } else if (location == 'left' || location == 'right') {\n      const worldDistanceOnCanvas =\n        canvasCoordinates[0][1] - canvasCoordinates[1][1];\n      scaleCanvasCoordinates = [\n        [hscaleBounds.width, canvasSize.height / 2 - worldDistanceOnCanvas / 2],\n        [hscaleBounds.width, canvasSize.height / 2 + worldDistanceOnCanvas / 2],\n      ];\n    }\n\n    return scaleCanvasCoordinates;\n  };\n\n  /**\n   * Computes the max bound for scales on the image\n   * @param  {{width: number, height: number}} canvasSize\n   * @param  {number} horizontalReduction\n   * @param  {number} verticalReduction\n   * @returns {Object.<string, { x:number, y:number }>}\n   */\n  computeScaleBounds = (\n    canvasSize,\n    horizontalReduction,\n    verticalReduction,\n    location\n  ) => {\n    const hReduction = horizontalReduction * Math.min(1000, canvasSize.width);\n    const vReduction = verticalReduction * Math.min(1000, canvasSize.height);\n    const locationBounds = {\n      bottom: [-vReduction, -hReduction],\n      top: [vReduction, hReduction],\n      left: [vReduction, hReduction],\n      right: [-vReduction, -hReduction],\n    };\n    const canvasBounds = {\n      bottom: [canvasSize.height, canvasSize.width],\n      top: [0, canvasSize.width],\n      left: [canvasSize.height, 0],\n      right: [canvasSize.height, canvasSize.width],\n    };\n\n    return {\n      height: canvasBounds[location][0] + locationBounds[location][0],\n      width: canvasBounds[location][1] + locationBounds[location][1],\n    };\n  };\n}\n\nScaleOverlayTool.toolName = 'ScaleOverlay';\nexport default ScaleOverlayTool;\n","import { ImageVolume, utilities as csUtils } from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\nimport { getBoundingBoxAroundShape } from '../../../utilities/boundingBox';\nimport { pointInShapeCallback } from '../../../utilities';\nimport { triggerSegmentationDataModified } from '../../../stateManagement/segmentation/triggerSegmentationEvents';\n\nconst { transformWorldToIndex } = csUtils;\n\ntype OperationData = {\n  segmentationId: string;\n  points: [Types.Point3, Types.Point3, Types.Point3, Types.Point3];\n  volume: ImageVolume;\n  constraintFn: (x: [number, number, number]) => boolean;\n  segmentIndex: number;\n  segmentsLocked: number[];\n};\n\n/**\n * For each point in the bounding box around the rectangle, if the point is inside\n * the rectangle, set the scalar value to the segmentIndex\n * @param toolGroupId - string\n * @param operationData - OperationData\n * @param constraintFn - can be used to perform threshold segmentation\n * @param inside - boolean\n */\n// Todo: why we have another constraintFn? in addition to the one in the operationData?\nfunction fillRectangle(\n  enabledElement: Types.IEnabledElement,\n  operationData: OperationData,\n  inside = true\n): void {\n  const {\n    volume: segmentation,\n    points,\n    segmentsLocked,\n    segmentIndex,\n    segmentationId,\n    constraintFn,\n  } = operationData;\n  const { imageData, dimensions } = segmentation;\n  const scalarData = segmentation.getScalarData();\n\n  let rectangleCornersIJK = points.map((world) => {\n    return transformWorldToIndex(imageData, world);\n  });\n\n  // math round\n  rectangleCornersIJK = rectangleCornersIJK.map((point) => {\n    return point.map((coord) => {\n      return Math.round(coord);\n    });\n  });\n\n  const boundsIJK = getBoundingBoxAroundShape(rectangleCornersIJK, dimensions);\n\n  // Since always all points inside the boundsIJK is inside the rectangle...\n  const pointInRectangle = () => true;\n\n  const callback = ({ value, index, pointIJK }) => {\n    if (segmentsLocked.includes(value)) {\n      return;\n    }\n\n    if (!constraintFn) {\n      scalarData[index] = segmentIndex;\n      return;\n    }\n\n    if (constraintFn(pointIJK)) {\n      scalarData[index] = segmentIndex;\n    }\n  };\n\n  pointInShapeCallback(imageData, pointInRectangle, callback, boundsIJK);\n\n  triggerSegmentationDataModified(segmentationId);\n}\n\n/**\n * Fill the inside of a rectangle\n * @param toolGroupId - The unique identifier of the tool group.\n * @param operationData - The data that will be used to create the\n * new rectangle.\n * @param constraintFn - can be used to perform threshold segmentation\n */\nexport function fillInsideRectangle(\n  enabledElement: Types.IEnabledElement,\n  operationData: OperationData\n): void {\n  fillRectangle(enabledElement, operationData, true);\n}\n\n/**\n * Fill the area outside of a rectangle for the toolGroupId and segmentationRepresentationUID.\n * @param toolGroupId - The unique identifier of the tool group.\n * @param operationData - The data that will be used to create the\n * new rectangle.\n * @param constraintFn - can be used to perform threshold segmentation\n */\nexport function fillOutsideRectangle(\n  enabledElement: Types.IEnabledElement,\n  operationData: OperationData\n): void {\n  fillRectangle(enabledElement, operationData, false);\n}\n","import { ImageVolume, utilities as csUtils } from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\nimport { getBoundingBoxAroundShape } from '../../../utilities/boundingBox';\nimport { triggerSegmentationDataModified } from '../../../stateManagement/segmentation/triggerSegmentationEvents';\nimport { pointInShapeCallback } from '../../../utilities';\n\nconst { transformWorldToIndex } = csUtils;\n\ntype EraseOperationData = {\n  segmentationId: string;\n  points: [Types.Point3, Types.Point3, Types.Point3, Types.Point3];\n  volume: ImageVolume;\n  constraintFn: (x: [number, number, number]) => boolean;\n  segmentsLocked: number[];\n};\n\nfunction eraseRectangle(\n  enabledElement: Types.IEnabledElement,\n  operationData: EraseOperationData,\n  inside = true\n): void {\n  const {\n    volume: segmentation,\n    points,\n    segmentsLocked,\n    segmentationId,\n  } = operationData;\n  const { imageData, dimensions } = segmentation;\n  const scalarData = segmentation.getScalarData();\n\n  const rectangleCornersIJK = points.map((world) => {\n    return transformWorldToIndex(imageData, world);\n  });\n\n  const boundsIJK = getBoundingBoxAroundShape(rectangleCornersIJK, dimensions);\n\n  // Since always all points inside the boundsIJK is inside the rectangle...\n  const pointInShape = () => true;\n\n  const callback = ({ value, index }) => {\n    if (segmentsLocked.includes(value)) {\n      return;\n    }\n    scalarData[index] = 0;\n  };\n\n  pointInShapeCallback(imageData, pointInShape, callback, boundsIJK);\n\n  triggerSegmentationDataModified(segmentationId);\n}\n\n/**\n * Erase the rectangle region segment inside the segmentation defined by the operationData.\n * It erases the segmentation pixels inside the defined rectangle.\n * @param enabledElement - The element for which the segment is being erased.\n * @param operationData - EraseOperationData\n */\nexport function eraseInsideRectangle(\n  enabledElement: Types.IEnabledElement,\n  operationData: EraseOperationData\n): void {\n  eraseRectangle(enabledElement, operationData, true);\n}\n\n/**\n * Erase the rectangle region segment inside the segmentation defined by the operationData.\n * It erases the segmentation pixels outside the defined rectangle.\n * @param enabledElement - The element for which the segment is being erased.\n * @param operationData - EraseOperationData\n */\nexport function eraseOutsideRectangle(\n  enabledElement: Types.IEnabledElement,\n  operationData: EraseOperationData\n): void {\n  eraseRectangle(enabledElement, operationData, false);\n}\n","import { cache, getEnabledElement, StackViewport } from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\nimport { BaseTool } from '../base';\nimport {\n  PublicToolProps,\n  ToolProps,\n  EventTypes,\n  SVGDrawingHelper,\n} from '../../types';\nimport { fillInsideRectangle } from './strategies/fillRectangle';\nimport { eraseInsideRectangle } from './strategies/eraseRectangle';\nimport { getViewportIdsWithToolToRender } from '../../utilities/viewportFilters';\n\nimport { Events } from '../../enums';\nimport { drawRect as drawRectSvg } from '../../drawingSvg';\nimport {\n  resetElementCursor,\n  hideElementCursor,\n} from '../../cursors/elementCursor';\n\nimport triggerAnnotationRenderForViewportIds from '../../utilities/triggerAnnotationRenderForViewportIds';\nimport {\n  config as segmentationConfig,\n  segmentLocking,\n  segmentIndex as segmentIndexController,\n  activeSegmentation,\n} from '../../stateManagement/segmentation';\n\nimport { getSegmentation } from '../../stateManagement/segmentation/segmentationState';\nimport { LabelmapSegmentationData } from '../../types/LabelmapTypes';\n\n/**\n * Tool for manipulating segmentation data by drawing a rectangle. It acts on the\n * active Segmentation on the viewport (enabled element) and requires an active\n * segmentation to be already present. By default it will use the activeSegmentIndex\n * for the segmentation to modify. You can use SegmentationModule to set the active\n * segmentation and segmentIndex.\n */\nclass RectangleScissorsTool extends BaseTool {\n  static toolName;\n  _throttledCalculateCachedStats: any;\n  editData: {\n    annotation: any;\n    segmentationId: string;\n    segmentation: any;\n    segmentIndex: number;\n    segmentsLocked: number[];\n    segmentColor: [number, number, number, number];\n    viewportIdsToRender: string[];\n    handleIndex?: number;\n    movingTextBox: boolean;\n    newAnnotation?: boolean;\n    hasMoved?: boolean;\n  } | null;\n  isDrawing: boolean;\n  isHandleOutsideImage: boolean;\n\n  constructor(\n    toolProps: PublicToolProps = {},\n    defaultToolProps: ToolProps = {\n      supportedInteractionTypes: ['Mouse', 'Touch'],\n      configuration: {\n        strategies: {\n          FILL_INSIDE: fillInsideRectangle,\n          ERASE_INSIDE: eraseInsideRectangle,\n        },\n        defaultStrategy: 'FILL_INSIDE',\n        activeStrategy: 'FILL_INSIDE',\n      },\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n  }\n\n  /**\n   * Based on the current position of the mouse and the enabledElement, it\n   * finds the active segmentation info and use it for the current tool.\n   *\n   * @param evt -  EventTypes.NormalizedMouseEventType\n   * @returns The annotation object.\n   *\n   */\n  preMouseDownCallback = (evt: EventTypes.InteractionEventType): boolean => {\n    const eventDetail = evt.detail;\n    const { currentPoints, element } = eventDetail;\n    const worldPos = currentPoints.world;\n\n    const enabledElement = getEnabledElement(element);\n    const { viewport, renderingEngine } = enabledElement;\n\n    this.isDrawing = true;\n\n    const camera = viewport.getCamera();\n    const { viewPlaneNormal, viewUp } = camera;\n    const toolGroupId = this.toolGroupId;\n\n    const activeSegmentationRepresentation =\n      activeSegmentation.getActiveSegmentationRepresentation(toolGroupId);\n    if (!activeSegmentationRepresentation) {\n      throw new Error(\n        'No active segmentation detected, create one before using scissors tool'\n      );\n    }\n\n    const { segmentationRepresentationUID, segmentationId, type } =\n      activeSegmentationRepresentation;\n    const segmentIndex =\n      segmentIndexController.getActiveSegmentIndex(segmentationId);\n    const segmentsLocked = segmentLocking.getLockedSegments(segmentationId);\n\n    const segmentColor = segmentationConfig.color.getColorForSegmentIndex(\n      toolGroupId,\n      segmentationRepresentationUID,\n      segmentIndex\n    );\n\n    const { representationData } = getSegmentation(segmentationId);\n\n    // Todo: are we going to support contour editing with rectangle scissors?\n    const { volumeId } = representationData[type] as LabelmapSegmentationData;\n    const segmentation = cache.getVolume(volumeId);\n\n    // Todo: Used for drawing the svg only, we might not need it at all\n    const annotation = {\n      highlighted: true,\n      invalidated: true,\n      metadata: {\n        viewPlaneNormal: <Types.Point3>[...viewPlaneNormal],\n        viewUp: <Types.Point3>[...viewUp],\n        FrameOfReferenceUID: viewport.getFrameOfReferenceUID(),\n        referencedImageId: '',\n        toolName: this.getToolName(),\n        segmentColor,\n      },\n      data: {\n        handles: {\n          points: [\n            <Types.Point3>[...worldPos],\n            <Types.Point3>[...worldPos],\n            <Types.Point3>[...worldPos],\n            <Types.Point3>[...worldPos],\n          ],\n          activeHandleIndex: null,\n        },\n      },\n    };\n\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    this.editData = {\n      annotation,\n      segmentation,\n      segmentIndex,\n      segmentsLocked,\n      segmentColor,\n      segmentationId,\n      viewportIdsToRender,\n      handleIndex: 3,\n      movingTextBox: false,\n      newAnnotation: true,\n      hasMoved: false,\n    };\n\n    this._activateDraw(element);\n\n    hideElementCursor(element);\n\n    evt.preventDefault();\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    return true;\n  };\n\n  _dragCallback = (evt: EventTypes.InteractionEventType) => {\n    this.isDrawing = true;\n\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    const { annotation, viewportIdsToRender, handleIndex } = this.editData;\n    const { data } = annotation;\n\n    // Moving handle.\n    const { currentPoints } = eventDetail;\n    const enabledElement = getEnabledElement(element);\n    const { worldToCanvas, canvasToWorld } = enabledElement.viewport;\n    const worldPos = currentPoints.world;\n\n    const { points } = data.handles;\n\n    // Move this handle.\n    points[handleIndex] = [...worldPos];\n\n    let bottomLeftCanvas;\n    let bottomRightCanvas;\n    let topLeftCanvas;\n    let topRightCanvas;\n\n    let bottomLeftWorld;\n    let bottomRightWorld;\n    let topLeftWorld;\n    let topRightWorld;\n\n    switch (handleIndex) {\n      case 0:\n      case 3:\n        // Moving bottomLeft or topRight\n\n        bottomLeftCanvas = worldToCanvas(points[0]);\n        topRightCanvas = worldToCanvas(points[3]);\n\n        bottomRightCanvas = [topRightCanvas[0], bottomLeftCanvas[1]];\n        topLeftCanvas = [bottomLeftCanvas[0], topRightCanvas[1]];\n\n        bottomRightWorld = canvasToWorld(bottomRightCanvas);\n        topLeftWorld = canvasToWorld(topLeftCanvas);\n\n        points[1] = bottomRightWorld;\n        points[2] = topLeftWorld;\n\n        break;\n      case 1:\n      case 2:\n        // Moving bottomRight or topLeft\n        bottomRightCanvas = worldToCanvas(points[1]);\n        topLeftCanvas = worldToCanvas(points[2]);\n\n        bottomLeftCanvas = <Types.Point2>[\n          topLeftCanvas[0],\n          bottomRightCanvas[1],\n        ];\n        topRightCanvas = <Types.Point2>[bottomRightCanvas[0], topLeftCanvas[1]];\n\n        bottomLeftWorld = canvasToWorld(bottomLeftCanvas);\n        topRightWorld = canvasToWorld(topRightCanvas);\n\n        points[0] = bottomLeftWorld;\n        points[3] = topRightWorld;\n\n        break;\n    }\n    annotation.invalidated = true;\n\n    this.editData.hasMoved = true;\n\n    const { renderingEngine } = enabledElement;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n  };\n\n  _endCallback = (evt: EventTypes.InteractionEventType) => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    const {\n      annotation,\n      newAnnotation,\n      hasMoved,\n      segmentation,\n      segmentationId,\n      segmentIndex,\n      segmentsLocked,\n    } = this.editData;\n    const { data } = annotation;\n\n    if (newAnnotation && !hasMoved) {\n      return;\n    }\n\n    data.handles.activeHandleIndex = null;\n\n    this._deactivateDraw(element);\n\n    resetElementCursor(element);\n\n    const enabledElement = getEnabledElement(element);\n    const { viewport } = enabledElement;\n\n    this.editData = null;\n    this.isDrawing = false;\n\n    if (viewport instanceof StackViewport) {\n      throw new Error('Not implemented yet');\n    }\n\n    const operationData = {\n      points: data.handles.points,\n      volume: segmentation,\n      segmentationId,\n      segmentIndex,\n      segmentsLocked,\n    };\n\n    this.applyActiveStrategy(enabledElement, operationData);\n  };\n\n  /**\n   * Add event handlers for the modify event loop, and prevent default event propagation.\n   */\n  _activateDraw = (element) => {\n    element.addEventListener(Events.MOUSE_UP, this._endCallback);\n    element.addEventListener(Events.MOUSE_DRAG, this._dragCallback);\n    element.addEventListener(Events.MOUSE_CLICK, this._endCallback);\n\n    element.addEventListener(Events.TOUCH_END, this._endCallback);\n    element.addEventListener(Events.TOUCH_DRAG, this._dragCallback);\n    element.addEventListener(Events.TOUCH_TAP, this._endCallback);\n  };\n\n  /**\n   * Add event handlers for the modify event loop, and prevent default event prapogation.\n   */\n  _deactivateDraw = (element) => {\n    element.removeEventListener(Events.MOUSE_UP, this._endCallback);\n    element.removeEventListener(Events.MOUSE_DRAG, this._dragCallback);\n    element.removeEventListener(Events.MOUSE_CLICK, this._endCallback);\n    element.removeEventListener(Events.TOUCH_TAP, this._endCallback);\n\n    element.removeEventListener(Events.TOUCH_END, this._endCallback);\n    element.removeEventListener(Events.TOUCH_DRAG, this._dragCallback);\n  };\n\n  /**\n   * it is used to draw the rectangleScissor annotation in each\n   * request animation frame. Note that the annotation are disappeared\n   * after the segmentation modification.\n   *\n   * @param enabledElement - The Cornerstone's enabledElement.\n   * @param svgDrawingHelper - The svgDrawingHelper providing the context for drawing.\n   */\n  renderAnnotation = (\n    enabledElement: Types.IEnabledElement,\n    svgDrawingHelper: SVGDrawingHelper\n  ): boolean => {\n    let renderStatus = false;\n    if (!this.editData) {\n      return renderStatus;\n    }\n\n    const { viewport } = enabledElement;\n    const { annotation } = this.editData;\n\n    // Todo: rectangle color based on segment index\n    const toolMetadata = annotation.metadata;\n    const annotationUID = annotation.annotationUID;\n\n    const data = annotation.data;\n    const { points } = data.handles;\n    const canvasCoordinates = points.map((p) => viewport.worldToCanvas(p));\n    const color = `rgb(${toolMetadata.segmentColor.slice(0, 3)})`;\n\n    // If rendering engine has been destroyed while rendering\n    if (!viewport.getRenderingEngine()) {\n      console.warn('Rendering Engine has been destroyed');\n      return renderStatus;\n    }\n\n    const rectangleUID = '0';\n    drawRectSvg(\n      svgDrawingHelper,\n      annotationUID,\n      rectangleUID,\n      canvasCoordinates[0],\n      canvasCoordinates[3],\n      {\n        color,\n      }\n    );\n\n    renderStatus = true;\n\n    return renderStatus;\n  };\n}\n\nRectangleScissorsTool.toolName = 'RectangleScissor';\nexport default RectangleScissorsTool;\n","import { cache, getEnabledElement, StackViewport } from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\nimport { BaseTool } from '../base';\nimport {\n  PublicToolProps,\n  ToolProps,\n  EventTypes,\n  SVGDrawingHelper,\n} from '../../types';\n\nimport { fillInsideCircle } from './strategies/fillCircle';\nimport { Events } from '../../enums';\nimport { drawCircle as drawCircleSvg } from '../../drawingSvg';\nimport {\n  resetElementCursor,\n  hideElementCursor,\n} from '../../cursors/elementCursor';\n\nimport triggerAnnotationRenderForViewportIds from '../../utilities/triggerAnnotationRenderForViewportIds';\nimport {\n  segmentLocking,\n  activeSegmentation,\n  segmentIndex as segmentIndexController,\n  config as segmentationConfig,\n} from '../../stateManagement/segmentation';\nimport { getSegmentation } from '../../stateManagement/segmentation/segmentationState';\nimport { LabelmapSegmentationData } from '../../types/LabelmapTypes';\n\n/**\n * Tool for manipulating segmentation data by drawing a circle. It acts on the\n * active Segmentation on the viewport (enabled element) and requires an active\n * segmentation to be already present. By default it will use the activeSegmentIndex\n * for the segmentation to modify. You can use SegmentationModule to set the active\n * segmentation and segmentIndex.\n */\nclass CircleScissorsTool extends BaseTool {\n  static toolName;\n  editData: {\n    annotation: any;\n    segmentation: any;\n    segmentIndex: number;\n    segmentationId: string;\n    segmentsLocked: number[];\n    segmentColor: [number, number, number, number];\n    viewportIdsToRender: string[];\n    handleIndex?: number;\n    movingTextBox: boolean;\n    newAnnotation?: boolean;\n    hasMoved?: boolean;\n    centerCanvas?: Array<number>;\n  } | null;\n  isDrawing: boolean;\n  isHandleOutsideImage: boolean;\n\n  constructor(\n    toolProps: PublicToolProps = {},\n    defaultToolProps: ToolProps = {\n      supportedInteractionTypes: ['Mouse', 'Touch'],\n      configuration: {\n        strategies: {\n          FILL_INSIDE: fillInsideCircle,\n          // ERASE_INSIDE: eraseInsideCircle,\n        },\n        defaultStrategy: 'FILL_INSIDE',\n        activeStrategy: 'FILL_INSIDE',\n      },\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n  }\n\n  /**\n   * Based on the current position of the mouse and the enabledElement, it\n   * finds the active segmentation info and use it for the current tool.\n   *\n   * @param evt -  EventTypes.NormalizedMouseEventType\n   * @returns The annotation object.\n   *\n   */\n  preMouseDownCallback = (evt: EventTypes.InteractionEventType): boolean => {\n    const eventDetail = evt.detail;\n    const { currentPoints, element } = eventDetail;\n    const worldPos = currentPoints.world;\n    const canvasPos = currentPoints.canvas;\n\n    const enabledElement = getEnabledElement(element);\n    const { viewport, renderingEngine } = enabledElement;\n\n    this.isDrawing = true;\n\n    const camera = viewport.getCamera();\n    const { viewPlaneNormal, viewUp } = camera;\n    const toolGroupId = this.toolGroupId;\n\n    const activeSegmentationRepresentation =\n      activeSegmentation.getActiveSegmentationRepresentation(toolGroupId);\n    if (!activeSegmentationRepresentation) {\n      throw new Error(\n        'No active segmentation detected, create one before using scissors tool'\n      );\n    }\n\n    const { segmentationRepresentationUID, segmentationId, type } =\n      activeSegmentationRepresentation;\n    const segmentIndex =\n      segmentIndexController.getActiveSegmentIndex(segmentationId);\n    const segmentsLocked = segmentLocking.getLockedSegments(segmentationId);\n\n    const segmentColor = segmentationConfig.color.getColorForSegmentIndex(\n      toolGroupId,\n      segmentationRepresentationUID,\n      segmentIndex\n    );\n\n    const { representationData } = getSegmentation(segmentationId);\n\n    // Todo: are we going to support contour editing with rectangle scissors?\n    const { volumeId } = representationData[type] as LabelmapSegmentationData;\n    const segmentation = cache.getVolume(volumeId);\n\n    // Todo: Used for drawing the svg only, we might not need it at all\n    const annotation = {\n      invalidated: true,\n      highlighted: true,\n      metadata: {\n        viewPlaneNormal: <Types.Point3>[...viewPlaneNormal],\n        viewUp: <Types.Point3>[...viewUp],\n        FrameOfReferenceUID: viewport.getFrameOfReferenceUID(),\n        referencedImageId: '',\n        toolName: this.getToolName(),\n        segmentColor,\n      },\n      data: {\n        handles: {\n          points: [[...worldPos], [...worldPos], [...worldPos], [...worldPos]],\n          activeHandleIndex: null,\n        },\n        isDrawing: true,\n        cachedStats: {},\n      },\n    };\n\n    const viewportIdsToRender = [viewport.id];\n\n    this.editData = {\n      annotation,\n      segmentation,\n      centerCanvas: canvasPos,\n      segmentIndex,\n      segmentationId,\n      segmentsLocked,\n      segmentColor,\n      viewportIdsToRender,\n      handleIndex: 3,\n      movingTextBox: false,\n      newAnnotation: true,\n      hasMoved: false,\n    };\n\n    this._activateDraw(element);\n\n    hideElementCursor(element);\n\n    evt.preventDefault();\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    return true;\n  };\n\n  _dragCallback = (evt: EventTypes.InteractionEventType) => {\n    this.isDrawing = true;\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n    const { currentPoints } = eventDetail;\n    const currentCanvasPoints = currentPoints.canvas;\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine, viewport } = enabledElement;\n    const { canvasToWorld } = viewport;\n\n    //////\n    const { annotation, viewportIdsToRender, centerCanvas } = this.editData;\n    const { data } = annotation;\n\n    // Center of circle in canvas Coordinates\n\n    const dX = Math.abs(currentCanvasPoints[0] - centerCanvas[0]);\n    const dY = Math.abs(currentCanvasPoints[1] - centerCanvas[1]);\n    const radius = Math.sqrt(dX * dX + dY * dY);\n\n    const bottomCanvas: Types.Point2 = [\n      centerCanvas[0],\n      centerCanvas[1] + radius,\n    ];\n    const topCanvas: Types.Point2 = [centerCanvas[0], centerCanvas[1] - radius];\n    const leftCanvas: Types.Point2 = [\n      centerCanvas[0] - radius,\n      centerCanvas[1],\n    ];\n    const rightCanvas: Types.Point2 = [\n      centerCanvas[0] + radius,\n      centerCanvas[1],\n    ];\n\n    data.handles.points = [\n      canvasToWorld(bottomCanvas),\n      canvasToWorld(topCanvas),\n      canvasToWorld(leftCanvas),\n      canvasToWorld(rightCanvas),\n    ];\n\n    annotation.invalidated = true;\n\n    this.editData.hasMoved = true;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n  };\n\n  _endCallback = (evt: EventTypes.InteractionEventType) => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    const {\n      annotation,\n      newAnnotation,\n      hasMoved,\n      segmentation,\n      segmentIndex,\n      segmentsLocked,\n      segmentationId,\n    } = this.editData;\n    const { data } = annotation;\n    const { viewPlaneNormal, viewUp } = annotation.metadata;\n\n    if (newAnnotation && !hasMoved) {\n      return;\n    }\n\n    data.handles.activeHandleIndex = null;\n\n    this._deactivateDraw(element);\n\n    resetElementCursor(element);\n\n    const enabledElement = getEnabledElement(element);\n    const { viewport } = enabledElement;\n\n    this.editData = null;\n    this.isDrawing = false;\n\n    if (viewport instanceof StackViewport) {\n      throw new Error('Not implemented yet');\n    }\n\n    const operationData = {\n      points: data.handles.points,\n      volume: segmentation,\n      segmentIndex,\n      segmentsLocked,\n      viewPlaneNormal,\n      segmentationId,\n      viewUp,\n    };\n\n    this.applyActiveStrategy(enabledElement, operationData);\n  };\n\n  /**\n   * Add event handlers for the modify event loop, and prevent default event propagation.\n   */\n  _activateDraw = (element) => {\n    element.addEventListener(Events.MOUSE_UP, this._endCallback);\n    element.addEventListener(Events.MOUSE_DRAG, this._dragCallback);\n    element.addEventListener(Events.MOUSE_CLICK, this._endCallback);\n\n    element.addEventListener(Events.TOUCH_TAP, this._endCallback);\n    element.addEventListener(Events.TOUCH_DRAG, this._dragCallback);\n    element.addEventListener(Events.TOUCH_END, this._endCallback);\n  };\n\n  /**\n   * Add event handlers for the modify event loop, and prevent default event prapogation.\n   */\n  _deactivateDraw = (element) => {\n    element.removeEventListener(Events.MOUSE_UP, this._endCallback);\n    element.removeEventListener(Events.MOUSE_DRAG, this._dragCallback);\n    element.removeEventListener(Events.MOUSE_CLICK, this._endCallback);\n\n    element.removeEventListener(Events.TOUCH_END, this._endCallback);\n    element.removeEventListener(Events.TOUCH_DRAG, this._dragCallback);\n    element.removeEventListener(Events.TOUCH_TAP, this._endCallback);\n  };\n\n  /**\n   * it is used to draw the circleScissor annotation in each\n   * request animation frame. Note that the annotation are disappeared\n   * after the segmentation modification.\n   *\n   * @param enabledElement - The Cornerstone's enabledElement.\n   * @param svgDrawingHelper - The svgDrawingHelper providing the context for drawing.\n   */\n  renderAnnotation = (\n    enabledElement: Types.IEnabledElement,\n    svgDrawingHelper: SVGDrawingHelper\n  ): boolean => {\n    let renderStatus = false;\n    if (!this.editData) {\n      return renderStatus;\n    }\n\n    const { viewport } = enabledElement;\n    const { viewportIdsToRender } = this.editData;\n\n    if (!viewportIdsToRender.includes(viewport.id)) {\n      return renderStatus;\n    }\n\n    const { annotation } = this.editData;\n\n    // Todo: rectangle color based on segment index\n    const toolMetadata = annotation.metadata;\n    const annotationUID = annotation.annotationUID;\n\n    const data = annotation.data;\n    const { points } = data.handles;\n    const canvasCoordinates = points.map((p) => viewport.worldToCanvas(p));\n\n    const bottom = canvasCoordinates[0];\n    const top = canvasCoordinates[1];\n\n    const center = [\n      Math.floor((bottom[0] + top[0]) / 2),\n      Math.floor((bottom[1] + top[1]) / 2),\n    ];\n\n    const radius = Math.abs(bottom[1] - Math.floor((bottom[1] + top[1]) / 2));\n\n    const color = `rgb(${toolMetadata.segmentColor.slice(0, 3)})`;\n\n    // If rendering engine has been destroyed while rendering\n    if (!viewport.getRenderingEngine()) {\n      console.warn('Rendering Engine has been destroyed');\n      return renderStatus;\n    }\n\n    const circleUID = '0';\n    drawCircleSvg(\n      svgDrawingHelper,\n      annotationUID,\n      circleUID,\n      center as Types.Point2,\n      radius,\n      {\n        color,\n      }\n    );\n\n    renderStatus = true;\n    return renderStatus;\n  };\n}\n\nCircleScissorsTool.toolName = 'CircleScissor';\nexport default CircleScissorsTool;\n","import { cache, getEnabledElement, StackViewport } from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\nimport { BaseTool } from '../base';\nimport {\n  PublicToolProps,\n  ToolProps,\n  EventTypes,\n  SVGDrawingHelper,\n} from '../../types';\n\nimport { fillInsideSphere } from './strategies/fillSphere';\nimport { Events } from '../../enums';\nimport { drawCircle as drawCircleSvg } from '../../drawingSvg';\nimport {\n  resetElementCursor,\n  hideElementCursor,\n} from '../../cursors/elementCursor';\n\nimport triggerAnnotationRenderForViewportIds from '../../utilities/triggerAnnotationRenderForViewportIds';\nimport {\n  config as segmentationConfig,\n  segmentLocking,\n  segmentIndex as segmentIndexController,\n  activeSegmentation,\n} from '../../stateManagement/segmentation';\n\nimport { getSegmentation } from '../../stateManagement/segmentation/segmentationState';\nimport { LabelmapSegmentationData } from '../../types/LabelmapTypes';\n\n/**\n * Tool for manipulating segmentation data by drawing a sphere in 3d space. It acts on the\n * active Segmentation on the viewport (enabled element) and requires an active\n * segmentation to be already present. By default it will use the activeSegmentIndex\n * for the segmentation to modify. You can use SegmentationModule to set the active\n * segmentation and segmentIndex. Todo: sphere scissor has some memory problem which\n * lead to ui blocking behavior that needs to be fixed.\n */\nclass SphereScissorsTool extends BaseTool {\n  static toolName;\n  editData: {\n    annotation: any;\n    segmentation: any;\n    segmentIndex: number;\n    segmentsLocked: number[];\n    segmentationId: string;\n    toolGroupId: string;\n    segmentColor: [number, number, number, number];\n    viewportIdsToRender: string[];\n    handleIndex?: number;\n    movingTextBox: boolean;\n    newAnnotation?: boolean;\n    hasMoved?: boolean;\n    centerCanvas?: Array<number>;\n  } | null;\n  isDrawing: boolean;\n  isHandleOutsideImage: boolean;\n\n  constructor(\n    toolProps: PublicToolProps = {},\n    defaultToolProps: ToolProps = {\n      supportedInteractionTypes: ['Mouse', 'Touch'],\n      configuration: {\n        strategies: {\n          FILL_INSIDE: fillInsideSphere,\n        },\n        defaultStrategy: 'FILL_INSIDE',\n        activeStrategy: 'FILL_INSIDE',\n      },\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n  }\n\n  /**\n   * Based on the current position of the mouse and the enabledElement, it\n   * finds the active segmentation info and use it for the current tool.\n   *\n   * @param evt -  EventTypes.NormalizedMouseEventType\n   * @returns The annotation object.\n   *\n   */\n  preMouseDownCallback = (evt: EventTypes.InteractionEventType): true => {\n    const eventDetail = evt.detail;\n    const { currentPoints, element } = eventDetail;\n    const worldPos = currentPoints.world;\n    const canvasPos = currentPoints.canvas;\n\n    const enabledElement = getEnabledElement(element);\n    const { viewport, renderingEngine } = enabledElement;\n\n    this.isDrawing = true;\n\n    const camera = viewport.getCamera();\n    const { viewPlaneNormal, viewUp } = camera;\n    const toolGroupId = this.toolGroupId;\n\n    const activeSegmentationRepresentation =\n      activeSegmentation.getActiveSegmentationRepresentation(toolGroupId);\n    if (!activeSegmentationRepresentation) {\n      throw new Error(\n        'No active segmentation detected, create one before using scissors tool'\n      );\n    }\n\n    const { segmentationRepresentationUID, segmentationId, type } =\n      activeSegmentationRepresentation;\n    const segmentIndex =\n      segmentIndexController.getActiveSegmentIndex(segmentationId);\n    const segmentsLocked = segmentLocking.getLockedSegments(segmentationId);\n\n    const segmentColor = segmentationConfig.color.getColorForSegmentIndex(\n      toolGroupId,\n      segmentationRepresentationUID,\n      segmentIndex\n    );\n\n    const { representationData } = getSegmentation(segmentationId);\n\n    // Todo: are we going to support contour editing with rectangle scissors?\n    const { volumeId } = representationData[type] as LabelmapSegmentationData;\n    const segmentation = cache.getVolume(volumeId);\n\n    this.isDrawing = true;\n\n    // Used for drawing the svg only, we might not need it at all\n    const annotation = {\n      metadata: {\n        viewPlaneNormal: <Types.Point3>[...viewPlaneNormal],\n        viewUp: <Types.Point3>[...viewUp],\n        FrameOfReferenceUID: viewport.getFrameOfReferenceUID(),\n        referencedImageId: '',\n        toolName: this.getToolName(),\n        segmentColor,\n      },\n      data: {\n        invalidated: true,\n        handles: {\n          points: [[...worldPos], [...worldPos], [...worldPos], [...worldPos]],\n          activeHandleIndex: null,\n        },\n        cachedStats: {},\n        highlighted: true,\n      },\n    };\n\n    const viewportIdsToRender = [viewport.id];\n\n    this.editData = {\n      annotation,\n      segmentation,\n      centerCanvas: canvasPos,\n      segmentIndex,\n      segmentsLocked,\n      segmentColor,\n      segmentationId,\n      toolGroupId,\n      viewportIdsToRender,\n      handleIndex: 3,\n      movingTextBox: false,\n      newAnnotation: true,\n      hasMoved: false,\n    };\n\n    this._activateDraw(element);\n\n    hideElementCursor(element);\n\n    evt.preventDefault();\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    return true;\n  };\n\n  _dragCallback = (evt: EventTypes.InteractionEventType) => {\n    this.isDrawing = true;\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n    const { currentPoints } = eventDetail;\n    const currentCanvasPoints = currentPoints.canvas;\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine, viewport } = enabledElement;\n    const { canvasToWorld } = viewport;\n\n    //////\n    const { annotation, viewportIdsToRender, centerCanvas } = this.editData;\n    const { data } = annotation;\n\n    const dX = Math.abs(currentCanvasPoints[0] - centerCanvas[0]);\n    const dY = Math.abs(currentCanvasPoints[1] - centerCanvas[1]);\n    const radius = Math.sqrt(dX * dX + dY * dY);\n\n    const bottomCanvas: Types.Point2 = [\n      centerCanvas[0],\n      centerCanvas[1] + radius,\n    ];\n    const topCanvas: Types.Point2 = [centerCanvas[0], centerCanvas[1] - radius];\n    const leftCanvas: Types.Point2 = [\n      centerCanvas[0] - radius,\n      centerCanvas[1],\n    ];\n    const rightCanvas: Types.Point2 = [\n      centerCanvas[0] + radius,\n      centerCanvas[1],\n    ];\n\n    data.handles.points = [\n      canvasToWorld(bottomCanvas),\n      canvasToWorld(topCanvas),\n      canvasToWorld(leftCanvas),\n      canvasToWorld(rightCanvas),\n    ];\n\n    annotation.invalidated = true;\n\n    this.editData.hasMoved = true;\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n  };\n\n  _endCallback = (evt: EventTypes.InteractionEventType) => {\n    const eventDetail = evt.detail;\n    const { element } = eventDetail;\n\n    const {\n      annotation,\n      newAnnotation,\n      hasMoved,\n      segmentation,\n      segmentIndex,\n      segmentsLocked,\n      segmentationId,\n    } = this.editData;\n    const { data } = annotation;\n    const { viewPlaneNormal, viewUp } = annotation.metadata;\n\n    if (newAnnotation && !hasMoved) {\n      return;\n    }\n    annotation.highlighted = false;\n    data.handles.activeHandleIndex = null;\n\n    this._deactivateDraw(element);\n\n    resetElementCursor(element);\n\n    const enabledElement = getEnabledElement(element);\n    const { viewport } = enabledElement;\n\n    this.editData = null;\n    this.isDrawing = false;\n\n    if (viewport instanceof StackViewport) {\n      throw new Error('Not implemented yet');\n    }\n\n    const operationData = {\n      points: data.handles.points,\n      volume: segmentation,\n      segmentIndex,\n      segmentsLocked,\n      segmentationId,\n      viewPlaneNormal,\n      viewUp,\n    };\n\n    this.applyActiveStrategy(enabledElement, operationData);\n  };\n\n  /**\n   * Add event handlers for the modify event loop, and prevent default event propagation.\n   */\n  _activateDraw = (element) => {\n    element.addEventListener(Events.MOUSE_UP, this._endCallback);\n    element.addEventListener(Events.MOUSE_DRAG, this._dragCallback);\n    element.addEventListener(Events.MOUSE_CLICK, this._endCallback);\n\n    element.addEventListener(Events.TOUCH_END, this._endCallback);\n    element.addEventListener(Events.TOUCH_TAP, this._endCallback);\n    element.addEventListener(Events.TOUCH_DRAG, this._dragCallback);\n  };\n\n  /**\n   * Add event handlers for the modify event loop, and prevent default event prapogation.\n   */\n  _deactivateDraw = (element) => {\n    element.removeEventListener(Events.MOUSE_UP, this._endCallback);\n    element.removeEventListener(Events.MOUSE_DRAG, this._dragCallback);\n    element.removeEventListener(Events.MOUSE_CLICK, this._endCallback);\n\n    element.removeEventListener(Events.TOUCH_END, this._endCallback);\n    element.removeEventListener(Events.TOUCH_DRAG, this._dragCallback);\n    element.removeEventListener(Events.TOUCH_TAP, this._endCallback);\n  };\n\n  /**\n   * it is used to draw the sphereScissor annotation in each\n   * request animation frame. Note that the annotation are disappeared\n   * after the segmentation modification.\n   *\n   * @param enabledElement - The Cornerstone's enabledElement.\n   * @param svgDrawingHelper - The svgDrawingHelper providing the context for drawing.\n   */\n  renderAnnotation = (\n    enabledElement: Types.IEnabledElement,\n    svgDrawingHelper: SVGDrawingHelper\n  ): boolean => {\n    let renderStatus = false;\n    if (!this.editData) {\n      return renderStatus;\n    }\n\n    const { viewport } = enabledElement;\n    const { viewportIdsToRender } = this.editData;\n\n    if (!viewportIdsToRender.includes(viewport.id)) {\n      return renderStatus;\n    }\n\n    const { annotation } = this.editData;\n\n    // Todo: rectangle color based on segment index\n    const toolMetadata = annotation.metadata;\n    const annotationUID = annotation.annotationUID;\n\n    const data = annotation.data;\n    const { points } = data.handles;\n    const canvasCoordinates = points.map((p) => viewport.worldToCanvas(p));\n\n    const bottom = canvasCoordinates[0];\n    const top = canvasCoordinates[1];\n\n    const center = [\n      Math.floor((bottom[0] + top[0]) / 2),\n      Math.floor((bottom[1] + top[1]) / 2),\n    ];\n\n    const radius = Math.abs(bottom[1] - Math.floor((bottom[1] + top[1]) / 2));\n\n    const color = `rgb(${toolMetadata.segmentColor.slice(0, 3)})`;\n\n    // If rendering engine has been destroyed while rendering\n    if (!viewport.getRenderingEngine()) {\n      console.warn('Rendering Engine has been destroyed');\n      return renderStatus;\n    }\n\n    const circleUID = '0';\n    drawCircleSvg(\n      svgDrawingHelper,\n      annotationUID,\n      circleUID,\n      center as Types.Point2,\n      radius,\n      {\n        color,\n      }\n    );\n\n    renderStatus = true;\n\n    return renderStatus;\n  };\n}\n\nSphereScissorsTool.toolName = 'SphereScissor';\nexport default SphereScissorsTool;\n","import {\n  getEnabledElement,\n  cache,\n  StackViewport,\n  triggerEvent,\n  eventTarget,\n  utilities as csUtils,\n} from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\nimport { addAnnotation, getAnnotations } from '../../stateManagement';\nimport { isAnnotationLocked } from '../../stateManagement/annotation/annotationLocking';\nimport { Events } from '../../enums';\n\nimport {\n  drawHandles as drawHandlesSvg,\n  drawRect as drawRectSvg,\n} from '../../drawingSvg';\nimport { getViewportIdsWithToolToRender } from '../../utilities/viewportFilters';\nimport { hideElementCursor } from '../../cursors/elementCursor';\nimport triggerAnnotationRenderForViewportIds from '../../utilities/triggerAnnotationRenderForViewportIds';\nimport { isAnnotationVisible } from '../../stateManagement/annotation/annotationVisibility';\nimport {\n  PublicToolProps,\n  ToolProps,\n  EventTypes,\n  SVGDrawingHelper,\n} from '../../types';\nimport { RectangleROIThresholdAnnotation } from '../../types/ToolSpecificAnnotationTypes';\nimport { AnnotationModifiedEventDetail } from '../../types/EventTypes';\nimport RectangleROITool from '../annotation/RectangleROITool';\nimport { StyleSpecifier } from '../../types/AnnotationStyle';\n\n/**\n * This tool is exactly the RectangleROITool but only draws a rectangle on the image,\n * and by using utility functions such as thresholdByRange and thresholdByROIStat it can be used to\n * create a segmentation. This tool, however, does not calculate the statistics\n * as RectangleROITool does.\n */\nclass RectangleROIThresholdTool extends RectangleROITool {\n  static toolName;\n  _throttledCalculateCachedStats: any;\n  editData: {\n    annotation: any;\n    viewportIdsToRender: string[];\n    handleIndex?: number;\n    newAnnotation?: boolean;\n    hasMoved?: boolean;\n  } | null;\n  isDrawing: boolean;\n  isHandleOutsideImage: boolean;\n\n  constructor(\n    toolProps: PublicToolProps = {},\n    defaultToolProps: ToolProps = {\n      supportedInteractionTypes: ['Mouse', 'Touch'],\n      configuration: {\n        shadow: true,\n        preventHandleOutsideImage: false,\n      },\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n  }\n\n  /**\n   * Based on the current position of the mouse and the enabledElement it creates\n   * the edit data for the tool.\n   *\n   * @param evt -  EventTypes.NormalizedMouseEventType\n   * @returns The annotation object.\n   *\n   */\n  addNewAnnotation = (evt: EventTypes.InteractionEventType) => {\n    const eventDetail = evt.detail;\n    const { currentPoints, element } = eventDetail;\n    const worldPos = currentPoints.world;\n\n    const enabledElement = getEnabledElement(element);\n    const { viewport, renderingEngine } = enabledElement;\n\n    this.isDrawing = true;\n\n    const camera = viewport.getCamera();\n    const { viewPlaneNormal, viewUp } = camera;\n\n    const targetId = this.getTargetId(viewport);\n    let referencedImageId, volumeId;\n\n    if (viewport instanceof StackViewport) {\n      referencedImageId = targetId.split('imageId:')[1];\n    } else {\n      volumeId = targetId.split('volumeId:')[1];\n      const imageVolume = cache.getVolume(volumeId);\n      referencedImageId = csUtils.getClosestImageId(\n        imageVolume,\n        worldPos,\n        viewPlaneNormal\n      );\n    }\n\n    const FrameOfReferenceUID = viewport.getFrameOfReferenceUID();\n    // Todo: how not to store enabledElement on the annotation, segmentationModule needs the element to\n    // decide on the active segmentIndex, active segmentationIndex etc.\n    const annotation = {\n      highlighted: true,\n      invalidated: true,\n      metadata: {\n        viewPlaneNormal: <Types.Point3>[...viewPlaneNormal],\n        enabledElement,\n        viewUp: <Types.Point3>[...viewUp],\n        FrameOfReferenceUID,\n        referencedImageId,\n        toolName: this.getToolName(),\n        volumeId,\n      },\n      data: {\n        label: '',\n        handles: {\n          // No need a textBox\n          textBox: {\n            hasMoved: false,\n            worldPosition: null,\n            worldBoundingBox: null,\n          },\n          points: [\n            <Types.Point3>[...worldPos],\n            <Types.Point3>[...worldPos],\n            <Types.Point3>[...worldPos],\n            <Types.Point3>[...worldPos],\n          ],\n          activeHandleIndex: null,\n        },\n        segmentationId: null,\n      },\n    };\n\n    addAnnotation(annotation, element);\n\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    this.editData = {\n      annotation,\n      viewportIdsToRender,\n      handleIndex: 3,\n      newAnnotation: true,\n      hasMoved: false,\n    };\n    this._activateDraw(element);\n\n    hideElementCursor(element);\n\n    evt.preventDefault();\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    return annotation;\n  };\n\n  /**\n   * it is used to draw the RectangleROI Threshold annotation in each\n   * request animation frame.\n   *\n   * @param enabledElement - The Cornerstone's enabledElement.\n   * @param svgDrawingHelper - The svgDrawingHelper providing the context for drawing.\n   */\n  renderAnnotation = (\n    enabledElement: Types.IEnabledElement,\n    svgDrawingHelper: SVGDrawingHelper\n  ): boolean => {\n    let renderStatus = false;\n    const { viewport, renderingEngineId } = enabledElement;\n    const { element } = viewport;\n    let annotations = getAnnotations(this.getToolName(), element);\n\n    if (!annotations?.length) {\n      return renderStatus;\n    }\n\n    annotations = this.filterInteractableAnnotationsForElement(\n      element,\n      annotations\n    );\n\n    if (!annotations?.length) {\n      return renderStatus;\n    }\n\n    const styleSpecifier: StyleSpecifier = {\n      toolGroupId: this.toolGroupId,\n      toolName: this.getToolName(),\n      viewportId: enabledElement.viewport.id,\n    };\n\n    for (let i = 0; i < annotations.length; i++) {\n      const annotation = annotations[i] as RectangleROIThresholdAnnotation;\n      const { annotationUID, data } = annotation;\n      const { points, activeHandleIndex } = data.handles;\n      const canvasCoordinates = points.map((p) => viewport.worldToCanvas(p));\n\n      styleSpecifier.annotationUID = annotationUID;\n\n      const lineWidth = this.getStyle('lineWidth', styleSpecifier, annotation);\n      const lineDash = this.getStyle('lineDash', styleSpecifier, annotation);\n      const color = this.getStyle('color', styleSpecifier, annotation);\n\n      // If rendering engine has been destroyed while rendering\n      if (!viewport.getRenderingEngine()) {\n        console.warn('Rendering Engine has been destroyed');\n        return renderStatus;\n      }\n\n      // Todo: This is not correct way to add the event trigger,\n      // this will trigger on all mouse hover too. Problem is that we don't\n      // have a cached stats mechanism for this tool yet?\n      const eventType = Events.ANNOTATION_MODIFIED;\n\n      const eventDetail: AnnotationModifiedEventDetail = {\n        annotation,\n        viewportId: viewport.id,\n        renderingEngineId,\n      };\n\n      triggerEvent(eventTarget, eventType, eventDetail);\n\n      let activeHandleCanvasCoords;\n\n      if (!isAnnotationVisible(annotationUID)) {\n        continue;\n      }\n\n      if (\n        !isAnnotationLocked(annotation) &&\n        !this.editData &&\n        activeHandleIndex !== null\n      ) {\n        // Not locked or creating and hovering over handle, so render handle.\n        activeHandleCanvasCoords = [canvasCoordinates[activeHandleIndex]];\n      }\n\n      if (activeHandleCanvasCoords) {\n        const handleGroupUID = '0';\n\n        drawHandlesSvg(\n          svgDrawingHelper,\n          annotationUID,\n          handleGroupUID,\n          activeHandleCanvasCoords,\n          {\n            color,\n          }\n        );\n      }\n\n      const rectangleUID = '0';\n      drawRectSvg(\n        svgDrawingHelper,\n        annotationUID,\n        rectangleUID,\n        canvasCoordinates[0],\n        canvasCoordinates[3],\n        {\n          color,\n          lineDash,\n          lineWidth,\n        }\n      );\n\n      renderStatus = true;\n    }\n\n    return renderStatus;\n  };\n}\n\nRectangleROIThresholdTool.toolName = 'RectangleROIThreshold';\nexport default RectangleROIThresholdTool;\n","import {\n  getEnabledElement,\n  cache,\n  StackViewport,\n  metaData,\n  triggerEvent,\n  eventTarget,\n  utilities as csUtils,\n} from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\nimport { vec3 } from 'gl-matrix';\nimport { Events } from '../../enums';\nimport { addAnnotation, getAnnotations } from '../../stateManagement';\nimport { isAnnotationLocked } from '../../stateManagement/annotation/annotationLocking';\nimport {\n  drawHandles as drawHandlesSvg,\n  drawRect as drawRectSvg,\n} from '../../drawingSvg';\nimport { getViewportIdsWithToolToRender } from '../../utilities/viewportFilters';\nimport throttle from '../../utilities/throttle';\nimport { AnnotationModifiedEventDetail } from '../../types/EventTypes';\nimport { isAnnotationVisible } from '../../stateManagement/annotation/annotationVisibility';\nimport { hideElementCursor } from '../../cursors/elementCursor';\nimport triggerAnnotationRenderForViewportIds from '../../utilities/triggerAnnotationRenderForViewportIds';\n\nimport {\n  PublicToolProps,\n  ToolProps,\n  EventTypes,\n  SVGDrawingHelper,\n} from '../../types';\nimport { RectangleROIStartEndThresholdAnnotation } from '../../types/ToolSpecificAnnotationTypes';\nimport RectangleROITool from '../annotation/RectangleROITool';\nimport { StyleSpecifier } from '../../types/AnnotationStyle';\n\nconst { transformWorldToIndex } = csUtils;\n\n/**\n * This tool is similar to the RectangleROIThresholdTool which\n * only draws a rectangle on the image, and by using utility functions\n * such as thresholdByRange and thresholdByROIStat it can be used to\n * create a segmentation. The only difference is that it only acts on the\n * acquisition plane and not the 3D volume, and accepts a start and end\n * slice, and renders a dashed rectangle on the image between the start and end\n * but a solid rectangle on start and end slice. Utility functions should be used\n * to modify the start and end slice.\n * // Todo: right now only the first slice has grabbable handles, need to make\n * // it so that the handles are grabbable on all slices.\n */\nclass RectangleROIStartEndThresholdTool extends RectangleROITool {\n  static toolName;\n  _throttledCalculateCachedStats: any;\n  editData: {\n    annotation: any;\n    viewportIdsToRender: string[];\n    handleIndex?: number;\n    newAnnotation?: boolean;\n    hasMoved?: boolean;\n  } | null;\n  isDrawing: boolean;\n  isHandleOutsideImage: boolean;\n\n  constructor(\n    toolProps: PublicToolProps = {},\n    defaultToolProps: ToolProps = {\n      configuration: {\n        numSlicesToPropagate: 10,\n      },\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n\n    this._throttledCalculateCachedStats = throttle(\n      this._calculateCachedStatsTool,\n      100,\n      { trailing: true }\n    );\n  }\n\n  /**\n   * Based on the current position of the mouse and the enabledElement it creates\n   * the edit data for the tool.\n   *\n   * @param evt -  EventTypes.NormalizedMouseEventType\n   * @returns The annotation object.\n   *\n   */\n  addNewAnnotation = (evt: EventTypes.InteractionEventType) => {\n    const eventDetail = evt.detail;\n    const { currentPoints, element } = eventDetail;\n    const worldPos = currentPoints.world;\n\n    const enabledElement = getEnabledElement(element);\n    const { viewport, renderingEngine } = enabledElement;\n\n    this.isDrawing = true;\n\n    const camera = viewport.getCamera();\n    const { viewPlaneNormal, viewUp } = camera;\n\n    let referencedImageId, imageVolume, volumeId;\n    if (viewport instanceof StackViewport) {\n      throw new Error('Stack Viewport Not implemented');\n    } else {\n      const targetId = this.getTargetId(viewport);\n      volumeId = targetId.split('volumeId:')[1];\n      imageVolume = cache.getVolume(volumeId);\n      referencedImageId = csUtils.getClosestImageId(\n        imageVolume,\n        worldPos,\n        viewPlaneNormal\n      );\n    }\n\n    if (!referencedImageId) {\n      throw new Error('This tool does not work on non-acquisition planes');\n    }\n\n    const startIndex = viewport.getCurrentImageIdIndex();\n    const spacingInNormal = csUtils.getSpacingInNormalDirection(\n      imageVolume,\n      viewPlaneNormal\n    );\n\n    // We cannot simply add numSlicesToPropagate to startIndex because\n    // the order of imageIds can be from top to bottom or bottom to top and\n    // we want to make sure it is always propagated in the direction of the\n    // view and also to make sure we don't go out of bounds.\n    const endIndex = this._getEndSliceIndex(\n      imageVolume,\n      worldPos,\n      spacingInNormal,\n      viewPlaneNormal\n    );\n\n    const FrameOfReferenceUID = viewport.getFrameOfReferenceUID();\n\n    const annotation = {\n      highlighted: true,\n      invalidated: true,\n      metadata: {\n        viewPlaneNormal: <Types.Point3>[...viewPlaneNormal],\n        enabledElement,\n        viewUp: <Types.Point3>[...viewUp],\n        FrameOfReferenceUID,\n        referencedImageId,\n        toolName: this.getToolName(),\n        volumeId,\n        spacingInNormal,\n      },\n      data: {\n        label: '',\n        startSlice: startIndex,\n        endSlice: endIndex,\n        cachedStats: {\n          projectionPoints: [],\n          projectionPointsImageIds: [referencedImageId],\n        },\n        handles: {\n          // No need a textBox\n          textBox: {\n            hasMoved: false,\n            worldPosition: null,\n            worldBoundingBox: null,\n          },\n          points: [\n            <Types.Point3>[...worldPos],\n            <Types.Point3>[...worldPos],\n            <Types.Point3>[...worldPos],\n            <Types.Point3>[...worldPos],\n          ],\n          activeHandleIndex: null,\n        },\n        labelmapUID: null,\n      },\n    };\n\n    // update the projection points in 3D space, since we are projecting\n    // the points to the slice plane, we need to make sure the points are\n    // computed for later export\n    this._computeProjectionPoints(annotation, imageVolume);\n\n    addAnnotation(annotation, element);\n\n    const viewportIdsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName()\n    );\n\n    this.editData = {\n      annotation,\n      viewportIdsToRender,\n      handleIndex: 3,\n      newAnnotation: true,\n      hasMoved: false,\n    };\n    this._activateDraw(element);\n\n    hideElementCursor(element);\n\n    evt.preventDefault();\n\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n\n    return annotation;\n  };\n\n  // Todo: make it work for planes other than acquisition planes\n  _computeProjectionPoints(\n    annotation: RectangleROIStartEndThresholdAnnotation,\n    imageVolume: Types.IImageVolume\n  ): void {\n    const { data, metadata } = annotation;\n    const { viewPlaneNormal, spacingInNormal } = metadata;\n    const { imageData } = imageVolume;\n    const { startSlice, endSlice } = data;\n    const { points } = data.handles;\n\n    const startIJK = transformWorldToIndex(imageData, points[0]);\n\n    if (startIJK[2] !== startSlice) {\n      throw new Error('Start slice does not match');\n    }\n\n    // substitute the end slice index 2 with startIJK index 2\n    const endIJK = vec3.fromValues(startIJK[0], startIJK[1], endSlice);\n\n    const startWorld = vec3.create();\n    imageData.indexToWorldVec3(startIJK, startWorld);\n\n    const endWorld = vec3.create();\n    imageData.indexToWorldVec3(endIJK, endWorld);\n\n    // distance between start and end slice in the world coordinate\n    const distance = vec3.distance(startWorld, endWorld);\n\n    // for each point inside points, navigate in the direction of the viewPlaneNormal\n    // with amount of spacingInNormal, and calculate the next slice until we reach the distance\n    const newProjectionPoints = [];\n    for (let dist = 0; dist < distance; dist += spacingInNormal) {\n      newProjectionPoints.push(\n        points.map((point) => {\n          const newPoint = vec3.create();\n          vec3.scaleAndAdd(newPoint, point, viewPlaneNormal, dist);\n          return Array.from(newPoint);\n        })\n      );\n    }\n\n    data.cachedStats.projectionPoints = newProjectionPoints;\n\n    // Find the imageIds for the projection points\n    const projectionPointsImageIds = [];\n    for (const RectanglePoints of newProjectionPoints) {\n      const imageId = csUtils.getClosestImageId(\n        imageVolume,\n        RectanglePoints[0],\n        viewPlaneNormal\n      );\n      projectionPointsImageIds.push(imageId);\n    }\n\n    data.cachedStats.projectionPointsImageIds = projectionPointsImageIds;\n  }\n\n  _calculateCachedStatsTool(annotation, enabledElement) {\n    const data = annotation.data;\n    const { viewportId, renderingEngineId, viewport } = enabledElement;\n\n    const { cachedStats } = data;\n    const volumeId = this.getTargetId(viewport);\n    const imageVolume = cache.getVolume(volumeId.split('volumeId:')[1]);\n\n    // Todo: this shouldn't be here, this is a performance issue\n    // Since we are extending the RectangleROI class, we need to\n    // bring the logic for handle to some cachedStats calculation\n    this._computeProjectionPoints(annotation, imageVolume);\n\n    annotation.invalidated = false;\n\n    // Dispatching annotation modified\n    const eventType = Events.ANNOTATION_MODIFIED;\n\n    const eventDetail: AnnotationModifiedEventDetail = {\n      annotation,\n      viewportId,\n      renderingEngineId,\n    };\n    triggerEvent(eventTarget, eventType, eventDetail);\n\n    return cachedStats;\n  }\n\n  /**\n   * it is used to draw the rectangleROIStartEnd annotation in each\n   * request animation frame.\n   *\n   * @param enabledElement - The Cornerstone's enabledElement.\n   * @param svgDrawingHelper - The svgDrawingHelper providing the context for drawing.\n   */\n  renderAnnotation = (\n    enabledElement: Types.IEnabledElement,\n    svgDrawingHelper: SVGDrawingHelper\n  ): boolean => {\n    let renderStatus = false;\n    const { viewport } = enabledElement;\n\n    const annotations = getAnnotations(this.getToolName(), viewport.element);\n\n    if (!annotations?.length) {\n      return renderStatus;\n    }\n\n    const sliceIndex = viewport.getCurrentImageIdIndex();\n\n    const styleSpecifier: StyleSpecifier = {\n      toolGroupId: this.toolGroupId,\n      toolName: this.getToolName(),\n      viewportId: enabledElement.viewport.id,\n    };\n\n    for (let i = 0; i < annotations.length; i++) {\n      const annotation = annotations[\n        i\n      ] as RectangleROIStartEndThresholdAnnotation;\n      const { annotationUID, data } = annotation;\n      const { startSlice, endSlice } = data;\n      const { points, activeHandleIndex } = data.handles;\n\n      const canvasCoordinates = points.map((p) => viewport.worldToCanvas(p));\n\n      styleSpecifier.annotationUID = annotationUID;\n\n      const lineWidth = this.getStyle('lineWidth', styleSpecifier, annotation);\n      const lineDash = this.getStyle('lineDash', styleSpecifier, annotation);\n      const color = this.getStyle('color', styleSpecifier, annotation);\n      // range of slices to render based on the start and end slice, like\n      // np.arange\n\n      // if indexIJK is outside the start/end slice, we don't render\n      if (\n        sliceIndex < Math.min(startSlice, endSlice) ||\n        sliceIndex > Math.max(startSlice, endSlice)\n      ) {\n        continue;\n      }\n\n      // WE HAVE TO CACHE STATS BEFORE FETCHING TEXT\n\n      if (annotation.invalidated) {\n        this._throttledCalculateCachedStats(annotation, enabledElement);\n      }\n\n      // if it is inside the start/end slice, but not exactly the first or\n      // last slice, we render the line in dash, but not the handles\n      let firstOrLastSlice = false;\n      if (sliceIndex === startSlice || sliceIndex === endSlice) {\n        firstOrLastSlice = true;\n      }\n\n      // If rendering engine has been destroyed while rendering\n      if (!viewport.getRenderingEngine()) {\n        console.warn('Rendering Engine has been destroyed');\n        return renderStatus;\n      }\n\n      let activeHandleCanvasCoords;\n\n      if (!isAnnotationVisible(annotationUID)) {\n        continue;\n      }\n\n      if (\n        !isAnnotationLocked(annotation) &&\n        !this.editData &&\n        activeHandleIndex !== null &&\n        firstOrLastSlice\n      ) {\n        // Not locked or creating and hovering over handle, so render handle.\n        activeHandleCanvasCoords = [canvasCoordinates[activeHandleIndex]];\n      }\n\n      if (activeHandleCanvasCoords) {\n        const handleGroupUID = '0';\n\n        drawHandlesSvg(\n          svgDrawingHelper,\n          annotationUID,\n          handleGroupUID,\n          activeHandleCanvasCoords,\n          {\n            color,\n          }\n        );\n      }\n\n      let lineDashToUse = lineDash;\n\n      if (!firstOrLastSlice) {\n        lineDashToUse = 2;\n      }\n\n      const rectangleUID = '0';\n      drawRectSvg(\n        svgDrawingHelper,\n        annotationUID,\n        rectangleUID,\n        canvasCoordinates[0],\n        canvasCoordinates[3],\n        {\n          color,\n          lineDash: lineDashToUse,\n          lineWidth,\n        }\n      );\n\n      renderStatus = true;\n    }\n\n    return renderStatus;\n  };\n\n  _getEndSliceIndex(\n    imageVolume: Types.IImageVolume,\n    worldPos: Types.Point3,\n    spacingInNormal: number,\n    viewPlaneNormal: Types.Point3\n  ): number | undefined {\n    const numSlicesToPropagate = this.configuration.numSlicesToPropagate;\n\n    // get end position by moving from worldPos in the direction of viewplaneNormal\n    // with amount of numSlicesToPropagate * spacingInNormal\n    const endPos = vec3.create();\n    vec3.scaleAndAdd(\n      endPos,\n      worldPos,\n      viewPlaneNormal,\n      numSlicesToPropagate * spacingInNormal\n    );\n\n    const halfSpacingInNormalDirection = spacingInNormal / 2;\n    // Loop through imageIds of the imageVolume and find the one that is closest to endPos\n    const { imageIds } = imageVolume;\n    let imageIdIndex;\n    for (let i = 0; i < imageIds.length; i++) {\n      const imageId = imageIds[i];\n\n      const { imagePositionPatient } = metaData.get(\n        'imagePlaneModule',\n        imageId\n      );\n\n      const dir = vec3.create();\n      vec3.sub(dir, endPos, imagePositionPatient);\n\n      const dot = vec3.dot(dir, viewPlaneNormal);\n\n      if (Math.abs(dot) < halfSpacingInNormalDirection) {\n        imageIdIndex = i;\n      }\n    }\n\n    return imageIdIndex;\n  }\n}\n\nRectangleROIStartEndThresholdTool.toolName = 'RectangleROIStartEndThreshold';\nexport default RectangleROIStartEndThresholdTool;\n","import type {\n  FloodFillResult,\n  FloodFillGetter,\n  FloodFillOptions,\n} from '../../types';\nimport { Types } from '@cornerstonejs/core';\n\n/**\n * floodFill.js - Taken from MIT OSS lib - https://github.com/tuzz/n-dimensional-flood-fill\n * Refactored to ES6.\n *\n * @param {function} getter The getter to the elements of your data structure,\n *                          e.g. getter(x,y) for a 2D interprettation of your structure.\n * @param {number[]} seed The seed for your fill. The dimensionality is infered\n *                        by the number of dimensions of the seed.\n * @param {function} [options.onFlood] An optional callback to execute when each pixel is flooded.\n *                             e.g. onFlood(x,y).\n * @param {function} [options.onBoundary] An optional callback to execute whenever a boundary is reached.\n *                                a boundary could be another segmentIndex, or the edge of your\n *                                data structure (i.e. when your getter returns undefined).\n * @param {function} [options.equals] An optional equality method for your datastructure.\n *                            Default is simply value1 = value2.\n * @param {boolean} [options.diagonals] Whether you allow flooding through diagonals. Defaults to false.\n *\n * @returns {Object}\n */\nfunction floodFill(\n  getter: FloodFillGetter,\n  seed: Types.Point2 | Types.Point3,\n  options: FloodFillOptions = {}\n): FloodFillResult {\n  const onFlood = options.onFlood;\n  const onBoundary = options.onBoundary;\n  const equals = options.equals || defaultEquals;\n  const diagonals = options.diagonals || false;\n  const startNode = get(seed);\n  const permutations = prunedPermutations();\n  const stack = [];\n  const flooded = [];\n  const visits = {};\n  const bounds = {};\n\n  stack.push({ currentArgs: seed });\n\n  while (stack.length > 0) {\n    flood(stack.pop());\n  }\n\n  return {\n    flooded,\n    boundaries: boundaries(),\n  };\n\n  function flood(job) {\n    const getArgs = job.currentArgs;\n    const prevArgs = job.previousArgs;\n\n    if (visited(getArgs)) {\n      return;\n    }\n    markAsVisited(getArgs);\n\n    if (member(getArgs)) {\n      markAsFlooded(getArgs);\n      pushAdjacent(getArgs);\n    } else {\n      markAsBoundary(prevArgs);\n    }\n  }\n\n  function visited(key) {\n    return visits[key] === true;\n  }\n\n  function markAsVisited(key) {\n    visits[key] = true;\n  }\n\n  function member(getArgs) {\n    const node = safely(get, [getArgs]);\n\n    return safely(equals, [node, startNode]);\n  }\n\n  function markAsFlooded(getArgs) {\n    flooded.push(getArgs);\n    if (onFlood) {\n      //@ts-ignore\n      onFlood(...getArgs);\n    }\n  }\n\n  function markAsBoundary(prevArgs) {\n    bounds[prevArgs] = prevArgs;\n    if (onBoundary) {\n      //@ts-ignore\n      onBoundary(...prevArgs);\n    }\n  }\n\n  function pushAdjacent(getArgs) {\n    for (let i = 0; i < permutations.length; i += 1) {\n      const perm = permutations[i];\n      const nextArgs = getArgs.slice(0);\n\n      for (let j = 0; j < getArgs.length; j += 1) {\n        nextArgs[j] += perm[j];\n      }\n\n      stack.push({\n        currentArgs: nextArgs,\n        previousArgs: getArgs,\n      });\n    }\n  }\n\n  function get(getArgs) {\n    //@ts-ignore\n    return getter(...getArgs);\n  }\n\n  function safely(f, args) {\n    try {\n      return f(...args);\n    } catch (error) {\n      return;\n    }\n  }\n\n  function prunedPermutations() {\n    const permutations = permute(seed.length);\n\n    return permutations.filter(function (perm) {\n      const count = countNonZeroes(perm);\n\n      return count !== 0 && (count === 1 || diagonals);\n    });\n  }\n\n  function permute(length) {\n    const perms = [];\n\n    const permutation = function (string) {\n      return string.split('').map(function (c) {\n        return parseInt(c, 10) - 1;\n      });\n    };\n\n    for (let i = 0; i < Math.pow(3, length); i += 1) {\n      const string = lpad(i.toString(3), '0', length);\n\n      perms.push(permutation(string));\n    }\n\n    return perms;\n  }\n\n  function boundaries() {\n    const array = [];\n\n    for (const key in bounds) {\n      if (bounds[key] !== undefined) {\n        array.unshift(bounds[key]);\n      }\n    }\n\n    return array;\n  }\n}\n\nfunction defaultEquals(a, b) {\n  return a === b;\n}\n\nfunction countNonZeroes(array) {\n  let count = 0;\n\n  for (let i = 0; i < array.length; i += 1) {\n    if (array[i] !== 0) {\n      count += 1;\n    }\n  }\n\n  return count;\n}\n\nfunction lpad(string, character, length) {\n  const array = new Array(length + 1);\n  const pad = array.join(character);\n\n  return (pad + string).slice(-length);\n}\n\nexport default floodFill;\n","import {\n  cache,\n  getEnabledElement,\n  utilities as csUtils,\n} from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\nimport { BaseTool } from '../base';\nimport { PublicToolProps, ToolProps, EventTypes } from '../../types';\n\nimport { triggerSegmentationDataModified } from '../../stateManagement/segmentation/triggerSegmentationEvents';\nimport {\n  segmentLocking,\n  activeSegmentation,\n  segmentIndex as segmentIndexController,\n} from '../../stateManagement/segmentation';\nimport floodFill from '../../utilities/segmentation/floodFill';\nimport { getSegmentation } from '../../stateManagement/segmentation/segmentationState';\nimport { FloodFillResult, FloodFillGetter } from '../../types';\nimport { LabelmapSegmentationData } from '../../types/LabelmapTypes';\n\nconst { transformWorldToIndex, isEqual } = csUtils;\n\ntype PaintFillToolHelpers = {\n  getScalarDataPositionFromPlane: (x: number, y: number) => number;\n  getLabelValue: (x: number, y: number, z: number) => number;\n  floodFillGetter: FloodFillGetter;\n  inPlaneSeedPoint: Types.Point2;\n  fixedDimensionValue: number;\n};\n\n/**\n * Tool for manipulating segmentation data by filling in regions. It acts on the\n * active Segmentation on the viewport (enabled element) and requires an active\n * segmentation to be already present. By default it will fill a given labelled\n * or empty region with the the activeSegmentIndex label. You can use the\n * SegmentationModule to set the active segmentation and segmentIndex.\n */\nclass PaintFillTool extends BaseTool {\n  static toolName;\n\n  constructor(\n    toolProps: PublicToolProps = {},\n    defaultToolProps: ToolProps = {\n      supportedInteractionTypes: ['Mouse', 'Touch'],\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n  }\n\n  /**\n   * Based on the current position of the mouse and the enabledElement, it\n   * finds the active segmentation info and use it for the current tool.\n   *\n   * @param evt -  EventTypes.NormalizedMouseEventType\n   * @returns The annotation object.\n   *\n   */\n  preMouseDownCallback = (evt: EventTypes.InteractionEventType): boolean => {\n    const eventDetail = evt.detail;\n    const { currentPoints, element } = eventDetail;\n    const worldPos = currentPoints.world;\n\n    const enabledElement = getEnabledElement(element);\n    const { viewport } = enabledElement;\n\n    const camera = viewport.getCamera();\n    const { viewPlaneNormal } = camera;\n    const toolGroupId = this.toolGroupId;\n\n    const activeSegmentationRepresentation =\n      activeSegmentation.getActiveSegmentationRepresentation(toolGroupId);\n    if (!activeSegmentationRepresentation) {\n      throw new Error(\n        'No active segmentation detected, create one before using scissors tool'\n      );\n    }\n\n    const { segmentationId, type } = activeSegmentationRepresentation;\n    const segmentIndex =\n      segmentIndexController.getActiveSegmentIndex(segmentationId);\n    const segmentsLocked: number[] =\n      segmentLocking.getLockedSegments(segmentationId);\n    const { representationData } = getSegmentation(segmentationId);\n\n    const { volumeId } = representationData[type] as LabelmapSegmentationData;\n    const segmentation = cache.getVolume(volumeId);\n    const { dimensions, direction } = segmentation;\n    const scalarData = segmentation.getScalarData();\n\n    const index = transformWorldToIndex(segmentation.imageData, worldPos);\n\n    const fixedDimension = this.getFixedDimension(\n      viewPlaneNormal,\n      direction as number[]\n    );\n\n    if (fixedDimension === undefined) {\n      console.warn('Oblique paint fill not yet supported');\n      return;\n    }\n\n    const {\n      floodFillGetter,\n      getLabelValue,\n      getScalarDataPositionFromPlane,\n      inPlaneSeedPoint,\n      fixedDimensionValue,\n    } = this.generateHelpers(scalarData, dimensions, index, fixedDimension);\n\n    // Check if within volume\n    if (\n      index[0] < 0 ||\n      index[0] >= dimensions[0] ||\n      index[1] < 0 ||\n      index[1] >= dimensions[1] ||\n      index[2] < 0 ||\n      index[2] >= dimensions[2]\n    ) {\n      // Clicked outside segmentation volume, no good way to fill.\n      return;\n    }\n    //@ts-ignore // todo type\n    const clickedLabelValue = getLabelValue(index[0], index[1], index[2]);\n\n    if (segmentsLocked.includes(clickedLabelValue)) {\n      // Label is locked, cannot fill.\n      return;\n    }\n\n    const floodFillResult = floodFill(floodFillGetter, inPlaneSeedPoint);\n\n    const { flooded } = floodFillResult;\n\n    flooded.forEach((index) => {\n      const scalarDataPosition = getScalarDataPositionFromPlane(\n        index[0],\n        index[1]\n      );\n\n      scalarData[scalarDataPosition] = segmentIndex;\n    });\n\n    const framesModified = this.getFramesModified(\n      fixedDimension,\n      fixedDimensionValue,\n      floodFillResult\n    );\n\n    triggerSegmentationDataModified(segmentationId, framesModified);\n\n    return true;\n  };\n\n  private getFramesModified = (\n    fixedDimension: number,\n    fixedDimensionValue: number,\n    floodFillResult: FloodFillResult\n  ): number[] => {\n    const { boundaries } = floodFillResult;\n\n    if (fixedDimension === 2) {\n      return [fixedDimensionValue];\n    }\n\n    // For both the fixedDimensions being 0 and 1, the Z (stack) direction is j,\n    // so we don't need to find min/max i.\n\n    let minJ = Infinity;\n    let maxJ = -Infinity;\n\n    for (let b = 0; b < boundaries.length; b++) {\n      const j = boundaries[b][1];\n\n      if (j < minJ) {\n        minJ = j;\n      }\n      if (j > maxJ) {\n        maxJ = j;\n      }\n    }\n\n    const framesModified = [];\n\n    for (let frame = minJ; frame <= maxJ; frame++) {\n      framesModified.push(frame);\n    }\n\n    return framesModified;\n  };\n\n  private generateHelpers = (\n    scalarData: Float32Array | Uint8Array | Uint16Array | Int16Array,\n    dimensions: Types.Point3,\n    seedIndex3D: Types.Point3,\n    fixedDimension = 2\n  ): PaintFillToolHelpers => {\n    let fixedDimensionValue: number;\n    let inPlaneSeedPoint: Types.Point2;\n\n    switch (fixedDimension) {\n      case 0:\n        fixedDimensionValue = seedIndex3D[0]; // X\n        inPlaneSeedPoint = [seedIndex3D[1], seedIndex3D[2]]; // Y,Z\n        break;\n      case 1:\n        fixedDimensionValue = seedIndex3D[1]; // Y\n        inPlaneSeedPoint = [seedIndex3D[0], seedIndex3D[2]]; // X,Z\n        break;\n      case 2:\n        fixedDimensionValue = seedIndex3D[2]; // Z\n        inPlaneSeedPoint = [seedIndex3D[0], seedIndex3D[1]]; // X, Y\n        break;\n      default:\n        throw new Error(`Invalid fixedDimension: ${fixedDimension}`);\n    }\n\n    const getScalarDataPosition = (x: number, y: number, z: number): number => {\n      return z * dimensions[1] * dimensions[0] + y * dimensions[0] + x;\n    };\n\n    const getLabelValue = (x: number, y: number, z: number): number => {\n      return scalarData[getScalarDataPosition(x, y, z)];\n    };\n\n    const floodFillGetter = this.generateFloodFillGetter(\n      dimensions,\n      fixedDimension,\n      fixedDimensionValue,\n      getLabelValue\n    );\n\n    const getScalarDataPositionFromPlane =\n      this.generateGetScalarDataPositionFromPlane(\n        getScalarDataPosition,\n        fixedDimension,\n        fixedDimensionValue\n      );\n\n    return {\n      getScalarDataPositionFromPlane,\n      getLabelValue,\n      floodFillGetter,\n      inPlaneSeedPoint,\n      fixedDimensionValue,\n    };\n  };\n\n  private getFixedDimension(\n    viewPlaneNormal: Types.Point3,\n    direction: number[]\n  ): number | undefined {\n    const xDirection = direction.slice(0, 3);\n    const yDirection = direction.slice(3, 6);\n    const zDirection = direction.slice(6, 9);\n\n    const absoluteOfViewPlaneNormal = [\n      Math.abs(viewPlaneNormal[0]),\n      Math.abs(viewPlaneNormal[1]),\n      Math.abs(viewPlaneNormal[2]),\n    ];\n\n    const absoluteOfXDirection = [\n      Math.abs(xDirection[0]),\n      Math.abs(xDirection[1]),\n      Math.abs(xDirection[2]),\n    ];\n\n    if (isEqual(absoluteOfViewPlaneNormal, absoluteOfXDirection)) {\n      return 0;\n    }\n\n    const absoluteOfYDirection = [\n      Math.abs(yDirection[0]),\n      Math.abs(yDirection[1]),\n      Math.abs(yDirection[2]),\n    ];\n\n    if (isEqual(absoluteOfViewPlaneNormal, absoluteOfYDirection)) {\n      return 1;\n    }\n\n    const absoluteOfZDirection = [\n      Math.abs(zDirection[0]),\n      Math.abs(zDirection[1]),\n      Math.abs(zDirection[2]),\n    ];\n\n    if (isEqual(absoluteOfViewPlaneNormal, absoluteOfZDirection)) {\n      return 2;\n    }\n  }\n\n  // Define a getter for the fill routine to access the working label map.\n  private generateFloodFillGetter = (\n    dimensions: Types.Point3,\n    fixedDimension: number,\n    fixedDimensionValue: number,\n    getLabelValue: PaintFillToolHelpers['getLabelValue']\n  ): FloodFillGetter => {\n    let floodFillGetter;\n\n    // In each helper we first check if out of bounds, as the flood filler\n    // doesn't know about the dimensions of the data structure that sits on top\n    // of the scalarData. E.g. if cols is 10, (0,1) and (10, 0) would point to\n    // the same position in these getters.\n\n    switch (fixedDimension) {\n      case 0:\n        floodFillGetter = (y, z) => {\n          if (y >= dimensions[1] || y < 0 || z >= dimensions[2] || z < 0) {\n            return;\n          }\n\n          return getLabelValue(fixedDimensionValue, y, z);\n        };\n        break;\n\n      case 1:\n        floodFillGetter = (x, z) => {\n          if (x >= dimensions[0] || x < 0 || z >= dimensions[2] || z < 0) {\n            return;\n          }\n\n          return getLabelValue(x, fixedDimensionValue, z);\n        };\n        break;\n\n      case 2:\n        floodFillGetter = (x, y) => {\n          if (x >= dimensions[0] || x < 0 || y >= dimensions[1] || y < 0) {\n            return;\n          }\n\n          return getLabelValue(x, y, fixedDimensionValue);\n        };\n        break;\n      default:\n        throw new Error(`Invalid fixedDimension: ${fixedDimension}`);\n    }\n\n    return floodFillGetter;\n  };\n\n  private generateGetScalarDataPositionFromPlane = (\n    getScalarDataPosition: (x: number, y: number, z: number) => number,\n    fixedDimension: number,\n    fixedDimensionValue: number\n  ): PaintFillToolHelpers['getScalarDataPositionFromPlane'] => {\n    let getScalarDataPositionFromPlane;\n\n    switch (fixedDimension) {\n      case 0:\n        getScalarDataPositionFromPlane = (y, z) => {\n          return getScalarDataPosition(fixedDimensionValue, y, z);\n        };\n        break;\n      case 1:\n        getScalarDataPositionFromPlane = (x, z) => {\n          return getScalarDataPosition(x, fixedDimensionValue, z);\n        };\n        break;\n      case 2:\n        getScalarDataPositionFromPlane = (x, y) => {\n          return getScalarDataPosition(x, y, fixedDimensionValue);\n        };\n        break;\n      default:\n        throw new Error(`Invalid fixedDimension: ${fixedDimension}`);\n    }\n\n    return getScalarDataPositionFromPlane;\n  };\n}\n\nPaintFillTool.toolName = 'PaintFill';\nexport default PaintFillTool;\n","var Corners = {\n  TOP_LEFT: 'TOP_LEFT',\n  TOP_RIGHT: 'TOP_RIGHT',\n  BOTTOM_LEFT: 'BOTTOM_LEFT',\n  BOTTOM_RIGHT: 'BOTTOM_RIGHT'\n};\nvar Constants = {\n  Corners: Corners\n};\n\nexport { Constants as default };\n","import _toConsumableArray from '@babel/runtime/helpers/toConsumableArray';\nimport _slicedToArray from '@babel/runtime/helpers/slicedToArray';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport macro from '../../macros.js';\nimport vtkRenderer from '../../Rendering/Core/Renderer.js';\nimport Constants from './OrientationMarkerWidget/Constants.js';\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar vtkErrorMacro = macro.vtkErrorMacro;\nvar Corners = Constants.Corners; // ----------------------------------------------------------------------------\n// vtkOrientationMarkerWidget\n// ----------------------------------------------------------------------------\n\nfunction vtkOrientationMarkerWidget(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkOrientationMarkerWidget');\n\n  var superClass = _objectSpread({}, publicAPI); // Private variables\n\n\n  var previousCameraInput = [];\n  var selfRenderer = vtkRenderer.newInstance();\n  var resizeObserver = new ResizeObserver(function (entries) {\n    publicAPI.updateViewport();\n  });\n  var onCameraChangedSub = null;\n  var onCameraModifiedSub = null;\n  var onAnimationSub = null;\n  var onEndAnimationSub = null;\n  var selfSubscription = null;\n\n  function onCameraModified() {\n    // If animating, marker will be updated on Animation event\n    if (!model._interactor.isAnimating()) {\n      publicAPI.updateMarkerOrientation();\n    }\n  }\n\n  model._onParentRendererChanged = function () {\n    return publicAPI.updateViewport();\n  };\n\n  publicAPI.computeViewport = function () {\n    var parentRen = model.parentRenderer || model._interactor.getCurrentRenderer();\n\n    var _parentRen$getViewpor = parentRen.getViewport(),\n        _parentRen$getViewpor2 = _slicedToArray(_parentRen$getViewpor, 4),\n        xMin = _parentRen$getViewpor2[0],\n        yMin = _parentRen$getViewpor2[1],\n        xMax = _parentRen$getViewpor2[2],\n        yMax = _parentRen$getViewpor2[3];\n\n    var view = model._interactor.getView();\n\n    var canvasSize = view.getSize();\n\n    var _view$getViewportSize = view.getViewportSize(parentRen),\n        _view$getViewportSize2 = _slicedToArray(_view$getViewportSize, 2),\n        viewXSize = _view$getViewportSize2[0],\n        viewYSize = _view$getViewportSize2[1];\n\n    var minViewSize = Math.min(viewXSize, viewYSize);\n    var pixelSize = model.viewportSize * minViewSize; // clamp pixel size\n\n    pixelSize = Math.max(Math.min(model.minPixelSize, minViewSize), Math.min(model.maxPixelSize, pixelSize));\n    var xFrac = pixelSize / canvasSize[0];\n    var yFrac = pixelSize / canvasSize[1]; // [left bottom right top]\n\n    switch (model.viewportCorner) {\n      case Corners.TOP_LEFT:\n        return [xMin, yMax - yFrac, xMin + xFrac, yMax];\n\n      case Corners.TOP_RIGHT:\n        return [xMax - xFrac, yMax - yFrac, xMax, yMax];\n\n      case Corners.BOTTOM_LEFT:\n        return [xMin, yMin, xMin + xFrac, yMin + yFrac];\n\n      case Corners.BOTTOM_RIGHT:\n        return [xMax - xFrac, yMin, xMax, yMin + yFrac];\n\n      default:\n        vtkErrorMacro('Invalid widget corner');\n        return null;\n    }\n  };\n\n  publicAPI.updateViewport = function () {\n    if (model.enabled) {\n      selfRenderer.setViewport.apply(selfRenderer, _toConsumableArray(publicAPI.computeViewport()));\n\n      model._interactor.render();\n    }\n  };\n\n  publicAPI.updateMarkerOrientation = function () {\n    var ren = model.parentRenderer || model._interactor.getCurrentRenderer();\n\n    var currentCamera = ren.getActiveCamera();\n\n    if (!currentCamera) {\n      return;\n    }\n\n    var position = currentCamera.getReferenceByName('position');\n    var focalPoint = currentCamera.getReferenceByName('focalPoint');\n    var viewUp = currentCamera.getReferenceByName('viewUp');\n\n    if (previousCameraInput[0] !== position[0] || previousCameraInput[1] !== position[1] || previousCameraInput[2] !== position[2] || previousCameraInput[3] !== focalPoint[0] || previousCameraInput[4] !== focalPoint[1] || previousCameraInput[5] !== focalPoint[2] || previousCameraInput[6] !== viewUp[0] || previousCameraInput[7] !== viewUp[1] || previousCameraInput[8] !== viewUp[2]) {\n      previousCameraInput[0] = position[0];\n      previousCameraInput[1] = position[1];\n      previousCameraInput[2] = position[2];\n      previousCameraInput[3] = focalPoint[0];\n      previousCameraInput[4] = focalPoint[1];\n      previousCameraInput[5] = focalPoint[2];\n      previousCameraInput[6] = viewUp[0];\n      previousCameraInput[7] = viewUp[1];\n      previousCameraInput[8] = viewUp[2];\n      var activeCamera = selfRenderer.getActiveCamera();\n      activeCamera.setPosition(position[0], position[1], position[2]);\n      activeCamera.setFocalPoint(focalPoint[0], focalPoint[1], focalPoint[2]);\n      activeCamera.setViewUp(viewUp[0], viewUp[1], viewUp[2]);\n      selfRenderer.resetCamera();\n    }\n  };\n  /**\n   * Enables/Disables the orientation marker.\n   */\n\n\n  publicAPI.setEnabled = function (enabling) {\n    if (enabling) {\n      if (model.enabled) {\n        return;\n      }\n\n      if (!model.actor) {\n        vtkErrorMacro('Must set actor before enabling orientation marker.');\n        return;\n      }\n\n      if (!model._interactor) {\n        vtkErrorMacro('Must set interactor before enabling orientation marker.');\n        return;\n      }\n\n      var ren = model.parentRenderer || model._interactor.getCurrentRenderer();\n\n      var renderWindow = ren.getRenderWindow();\n      renderWindow.addRenderer(selfRenderer);\n\n      if (renderWindow.getNumberOfLayers() < 2) {\n        renderWindow.setNumberOfLayers(2);\n      } // Highest number is foreground\n\n\n      selfRenderer.setLayer(renderWindow.getNumberOfLayers() - 1);\n      selfRenderer.setInteractive(false);\n      selfRenderer.addViewProp(model.actor);\n      model.actor.setVisibility(true);\n      onCameraChangedSub = ren.onEvent(function (event) {\n        if (event.type === 'ActiveCameraEvent') {\n          if (onCameraModifiedSub) {\n            onCameraModifiedSub.unsubscribe();\n          }\n\n          onCameraModifiedSub = event.camera.onModified(onCameraModified);\n        }\n      });\n      onCameraModifiedSub = ren.getActiveCamera().onModified(onCameraModified);\n      onAnimationSub = model._interactor.onAnimation(publicAPI.updateMarkerOrientation);\n      onEndAnimationSub = model._interactor.onEndAnimation(publicAPI.updateMarkerOrientation);\n      resizeObserver.observe(model._interactor.getView().getCanvas());\n      publicAPI.updateViewport();\n      publicAPI.updateMarkerOrientation();\n      model.enabled = true;\n    } else {\n      var _model$_interactor, _model$_interactor$fi;\n\n      if (!model.enabled) {\n        return;\n      }\n\n      model.enabled = false;\n      resizeObserver.disconnect();\n      onCameraChangedSub.unsubscribe();\n      onCameraChangedSub = null;\n      onCameraModifiedSub.unsubscribe();\n      onCameraModifiedSub = null;\n      onAnimationSub.unsubscribe();\n      onAnimationSub = null;\n      onEndAnimationSub.unsubscribe();\n      onEndAnimationSub = null;\n      model.actor.setVisibility(false);\n      selfRenderer.removeViewProp(model.actor);\n\n      var _renderWindow = (_model$_interactor = model._interactor) === null || _model$_interactor === void 0 ? void 0 : (_model$_interactor$fi = _model$_interactor.findPokedRenderer()) === null || _model$_interactor$fi === void 0 ? void 0 : _model$_interactor$fi.getRenderWindow();\n\n      if (_renderWindow) {\n        _renderWindow.removeRenderer(selfRenderer);\n      }\n    }\n\n    publicAPI.modified();\n  };\n  /**\n   * Sets the viewport corner.\n   */\n\n\n  publicAPI.setViewportCorner = function (corner) {\n    if (corner === model.viewportCorner) {\n      return;\n    }\n\n    model.viewportCorner = corner;\n    publicAPI.updateViewport();\n  };\n  /**\n   * Sets the viewport size.\n   */\n\n\n  publicAPI.setViewportSize = function (sizeFactor) {\n    var viewportSize = Math.min(1, Math.max(0, sizeFactor));\n\n    if (viewportSize === model.viewportSize) {\n      return;\n    }\n\n    model.viewportSize = viewportSize;\n    publicAPI.updateViewport();\n  };\n\n  publicAPI.setActor = function (actor) {\n    var previousState = model.enabled;\n    publicAPI.setEnabled(false);\n    model.actor = actor;\n    publicAPI.setEnabled(previousState);\n  };\n\n  publicAPI.getRenderer = function () {\n    return selfRenderer;\n  };\n\n  publicAPI.delete = function () {\n    superClass.delete();\n\n    if (selfSubscription) {\n      selfSubscription.unsubscribe();\n      selfSubscription = null;\n    }\n\n    if (onCameraChangedSub) {\n      onCameraChangedSub.unsubscribe();\n      onCameraChangedSub = null;\n    }\n\n    if (onCameraModifiedSub) {\n      onCameraModifiedSub.unsubscribe();\n      onCameraModifiedSub = null;\n    }\n\n    if (onAnimationSub) {\n      onAnimationSub.unsubscribe();\n      onAnimationSub = null;\n    }\n\n    if (onEndAnimationSub) {\n      onEndAnimationSub.unsubscribe();\n      onEndAnimationSub = null;\n    }\n\n    resizeObserver.disconnect();\n  }; // --------------------------------------------------------------------------\n  // update viewport whenever we are updated\n\n\n  selfSubscription = publicAPI.onModified(publicAPI.updateViewport);\n} // ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\n\nvar DEFAULT_VALUES = {\n  // actor: null,\n  // _interactor: null,\n  viewportCorner: Constants.Corners.BOTTOM_LEFT,\n  viewportSize: 0.2,\n  minPixelSize: 50,\n  maxPixelSize: 200,\n  parentRenderer: null\n}; // ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  var initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues); // Build VTK API\n\n  macro.obj(publicAPI, model);\n  macro.get(publicAPI, model, ['enabled', 'viewportCorner', 'viewportSize']); // NOTE: setting these while the widget is enabled will\n  // not update the widget.\n\n  macro.setGet(publicAPI, model, ['_interactor', 'minPixelSize', 'maxPixelSize', 'parentRenderer']);\n  macro.get(publicAPI, model, ['actor']);\n  macro.moveToProtected(publicAPI, model, ['interactor']); // Object methods\n\n  vtkOrientationMarkerWidget(publicAPI, model);\n} // ----------------------------------------------------------------------------\n\nvar newInstance = macro.newInstance(extend, 'vtkOrientationMarkerWidget'); // ----------------------------------------------------------------------------\n\nvar vtkOrientationMarkerWidget$1 = _objectSpread({\n  newInstance: newInstance,\n  extend: extend\n}, Constants);\n\nexport { DEFAULT_VALUES, vtkOrientationMarkerWidget$1 as default, extend, newInstance };\n","import _slicedToArray from '@babel/runtime/helpers/slicedToArray';\nimport vtkImageData from '../DataModel/ImageData.js';\nimport vtkDataArray from './DataArray.js';\n\n/**\n * Takes a canvas and converts it to a vtkImageData.\n *\n * Optionally supply a bounding box to get a particular subset of the canvas.\n *\n * @param canvas       The HTML canvas to convert\n * @param boundingBox  A bounding box of type [top, left, width, height]\n */\n\nfunction canvasToImageData(canvas) {\n  var boundingBox = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0, 0, 0];\n\n  var _boundingBox = _slicedToArray(boundingBox, 4),\n      top = _boundingBox[0],\n      left = _boundingBox[1],\n      width = _boundingBox[2],\n      height = _boundingBox[3];\n\n  var ctxt = canvas.getContext('2d');\n  var idata = ctxt.getImageData(top, left, width || canvas.width, height || canvas.height);\n  var imageData = vtkImageData.newInstance({\n    type: 'vtkImageData'\n  });\n  imageData.setOrigin(0, 0, 0);\n  imageData.setSpacing(1, 1, 1);\n  imageData.setExtent(0, (width || canvas.width) - 1, 0, (height || canvas.height) - 1, 0, 0);\n  var scalars = vtkDataArray.newInstance({\n    numberOfComponents: 4,\n    values: new Uint8Array(idata.data.buffer)\n  });\n  scalars.setName('scalars');\n  imageData.getPointData().setScalars(scalars);\n  return imageData;\n}\n/**\n * Converts an Image object to a vtkImageData.\n */\n\n\nfunction imageToImageData(image) {\n  var transform = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    flipX: false,\n    flipY: false,\n    rotate: 0\n  };\n  var canvas = document.createElement('canvas');\n  canvas.width = image.width;\n  canvas.height = image.height;\n  var ctx = canvas.getContext('2d');\n  var flipX = transform.flipX,\n      flipY = transform.flipY,\n      rotate = transform.rotate;\n  ctx.translate(canvas.width / 2, canvas.height / 2);\n  ctx.scale(flipX ? -1 : 1, flipY ? -1 : 1);\n  ctx.rotate(rotate * Math.PI / 180);\n  ctx.drawImage(image, -image.width / 2, -image.height / 2);\n  return canvasToImageData(canvas);\n}\n\nvar ImageHelper = {\n  canvasToImageData: canvasToImageData,\n  imageToImageData: imageToImageData\n};\n\nexport { ImageHelper as default };\n","var STYLES = {\n  default: {\n    defaultStyle: {\n      fontStyle: 'bold',\n      fontFamily: 'Arial',\n      fontColor: 'black',\n      fontSizeScale: function fontSizeScale(res) {\n        return res / 2;\n      },\n      faceColor: 'white',\n      edgeThickness: 0.1,\n      edgeColor: 'black',\n      resolution: 400\n    },\n    xMinusFaceProperty: {\n      text: 'X-',\n      faceColor: 'yellow'\n    },\n    xPlusFaceProperty: {\n      text: 'X+',\n      faceColor: 'yellow'\n    },\n    yMinusFaceProperty: {\n      text: 'Y-',\n      faceColor: 'red'\n    },\n    yPlusFaceProperty: {\n      text: 'Y+',\n      faceColor: 'red'\n    },\n    zMinusFaceProperty: {\n      text: 'Z-',\n      faceColor: '#008000'\n    },\n    zPlusFaceProperty: {\n      text: 'Z+',\n      faceColor: '#008000'\n    }\n  },\n  lps: {\n    xMinusFaceProperty: {\n      text: 'R',\n      faceRotation: -90\n    },\n    xPlusFaceProperty: {\n      text: 'L',\n      faceRotation: 90\n    },\n    yMinusFaceProperty: {\n      text: 'A',\n      faceRotation: 0\n    },\n    yPlusFaceProperty: {\n      text: 'P',\n      faceRotation: 180\n    },\n    zMinusFaceProperty: {\n      text: 'I',\n      faceRotation: 180\n    },\n    zPlusFaceProperty: {\n      text: 'S',\n      faceRotation: 0\n    }\n  }\n};\n\nfunction applyDefinitions(definitions, cubeActor) {\n  cubeActor.set(definitions);\n}\n\nfunction applyPreset(name, cubeActor) {\n  return applyDefinitions(STYLES[name], cubeActor);\n}\n\nfunction registerStylePreset(name, definitions) {\n  STYLES[name] = definitions;\n}\n\nvar AnnotatedCubePresets = {\n  applyDefinitions: applyDefinitions,\n  applyPreset: applyPreset,\n  registerStylePreset: registerStylePreset\n};\n\nexport { AnnotatedCubePresets as default };\n","import _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport macro from '../../macros.js';\nimport vtkActor from './Actor.js';\nimport vtkMapper from './Mapper.js';\nimport vtkTexture from './Texture.js';\nimport vtkCubeSource from '../../Filters/Sources/CubeSource.js';\nimport ImageHelper from '../../Common/Core/ImageHelper.js';\nimport AnnotatedCubePresets from './AnnotatedCubeActor/Presets.js';\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar FACE_TO_INDEX = {\n  xPlus: 0,\n  xMinus: 1,\n  yPlus: 2,\n  yMinus: 3,\n  zPlus: 4,\n  zMinus: 5\n}; // ----------------------------------------------------------------------------\n// vtkAnnotatedCubeActor\n// ----------------------------------------------------------------------------\n\nfunction vtkAnnotatedCubeActor(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkAnnotatedCubeActor'); // Make sure face properties are not references to the default value\n\n  model.xPlusFaceProperty = _objectSpread({}, model.xPlusFaceProperty);\n  model.xMinusFaceProperty = _objectSpread({}, model.xMinusFaceProperty);\n  model.yPlusFaceProperty = _objectSpread({}, model.yPlusFaceProperty);\n  model.yMinusFaceProperty = _objectSpread({}, model.yMinusFaceProperty);\n  model.zPlusFaceProperty = _objectSpread({}, model.zPlusFaceProperty);\n  model.zMinusFaceProperty = _objectSpread({}, model.zMinusFaceProperty); // private variables\n\n  var cubeSource = null;\n  var canvas = document.createElement('canvas');\n  var mapper = vtkMapper.newInstance();\n  var texture = vtkTexture.newInstance();\n  texture.setInterpolate(true); // private methods\n\n  function updateFaceTexture(faceName) {\n    var newProp = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n    if (newProp) {\n      Object.assign(model[\"\".concat(faceName, \"FaceProperty\")], newProp);\n    }\n\n    var prop = _objectSpread(_objectSpread({}, model.defaultStyle), model[\"\".concat(faceName, \"FaceProperty\")]); // set canvas resolution\n\n\n    canvas.width = prop.resolution;\n    canvas.height = prop.resolution;\n    var ctxt = canvas.getContext('2d'); // set background color\n\n    ctxt.fillStyle = prop.faceColor;\n    ctxt.fillRect(0, 0, canvas.width, canvas.height); // draw edge\n\n    if (prop.edgeThickness > 0) {\n      ctxt.strokeStyle = prop.edgeColor;\n      ctxt.lineWidth = prop.edgeThickness * canvas.width;\n      ctxt.strokeRect(0, 0, canvas.width, canvas.height);\n    } // set face rotation\n\n\n    ctxt.save(); // vertical flip\n\n    ctxt.translate(0, canvas.height);\n    ctxt.scale(1, -1);\n    ctxt.translate(canvas.width / 2, canvas.height / 2);\n    ctxt.rotate(-Math.PI * (prop.faceRotation / 180.0)); // set foreground text\n\n    var textSize = prop.fontSizeScale(prop.resolution);\n    ctxt.fillStyle = prop.fontColor;\n    ctxt.textAlign = 'center';\n    ctxt.textBaseline = 'middle';\n    ctxt.font = \"\".concat(prop.fontStyle, \" \").concat(textSize, \"px \\\"\").concat(prop.fontFamily, \"\\\"\");\n    ctxt.fillText(prop.text, 0, 0);\n    ctxt.restore();\n    var vtkImage = ImageHelper.canvasToImageData(canvas);\n    texture.setInputData(vtkImage, FACE_TO_INDEX[faceName]);\n    publicAPI.modified();\n  }\n\n  function updateAllFaceTextures() {\n    cubeSource = vtkCubeSource.newInstance({\n      generate3DTextureCoordinates: true\n    });\n    mapper.setInputConnection(cubeSource.getOutputPort());\n    updateFaceTexture('xPlus');\n    updateFaceTexture('xMinus');\n    updateFaceTexture('yPlus');\n    updateFaceTexture('yMinus');\n    updateFaceTexture('zPlus');\n    updateFaceTexture('zMinus');\n  } // public methods\n\n\n  publicAPI.setDefaultStyle = function (style) {\n    model.defaultStyle = _objectSpread(_objectSpread({}, model.defaultStyle), style);\n    updateAllFaceTextures();\n  };\n\n  publicAPI.setXPlusFaceProperty = function (prop) {\n    return updateFaceTexture('xPlus', prop);\n  };\n\n  publicAPI.setXMinusFaceProperty = function (prop) {\n    return updateFaceTexture('xMinus', prop);\n  };\n\n  publicAPI.setYPlusFaceProperty = function (prop) {\n    return updateFaceTexture('yPlus', prop);\n  };\n\n  publicAPI.setYMinusFaceProperty = function (prop) {\n    return updateFaceTexture('yMinus', prop);\n  };\n\n  publicAPI.setZPlusFaceProperty = function (prop) {\n    return updateFaceTexture('zPlus', prop);\n  };\n\n  publicAPI.setZMinusFaceProperty = function (prop) {\n    return updateFaceTexture('zMinus', prop);\n  }; // constructor\n\n\n  updateAllFaceTextures(); // set mapper\n\n  mapper.setInputConnection(cubeSource.getOutputPort());\n  publicAPI.setMapper(mapper); // set texture\n\n  publicAPI.addTexture(texture);\n} // ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\n\nvar DEFAULT_VALUES = {\n  defaultStyle: {\n    text: '',\n    faceColor: 'white',\n    faceRotation: 0,\n    fontFamily: 'Arial',\n    fontColor: 'black',\n    fontStyle: 'normal',\n    fontSizeScale: function fontSizeScale(resolution) {\n      return resolution / 1.8;\n    },\n    edgeThickness: 0.1,\n    edgeColor: 'black',\n    resolution: 200\n  } // xPlusFaceProperty: null,\n  // xMinusFaceProperty: null,\n  // yPlusFaceProperty: null,\n  // yMinusFaceProperty: null,\n  // zPlusFaceProperty: null,\n  // zMinusFaceProperty: null,\n\n}; // ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  var initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues); // Inheritance\n\n  vtkActor.extend(publicAPI, model, initialValues);\n  macro.get(publicAPI, model, ['defaultStyle', 'xPlusFaceProperty', 'xMinusFaceProperty', 'yPlusFaceProperty', 'yMinusFaceProperty', 'zPlusFaceProperty', 'zMinusFaceProperty']); // Object methods\n\n  vtkAnnotatedCubeActor(publicAPI, model);\n} // ----------------------------------------------------------------------------\n\nvar newInstance = macro.newInstance(extend, 'vtkAnnotatedCubeActor'); // ----------------------------------------------------------------------------\n\nvar vtkAnnotatedCubeActor$1 = {\n  newInstance: newInstance,\n  extend: extend,\n  Presets: AnnotatedCubePresets\n};\n\nexport { DEFAULT_VALUES, vtkAnnotatedCubeActor$1 as default, extend, newInstance };\n","import _toConsumableArray from '@babel/runtime/helpers/toConsumableArray';\nimport macro from '../../macros.js';\nimport vtkPolyData from '../../Common/DataModel/PolyData.js';\nimport vtkMatrixBuilder from '../../Common/Core/MatrixBuilder.js';\n\n// vtkConeSource methods\n// ----------------------------------------------------------------------------\n\nfunction vtkConeSource(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkConeSource');\n\n  function requestData(inData, outData) {\n    var _vtkMatrixBuilder$bui;\n\n    if (model.deleted) {\n      return;\n    }\n\n    var dataset = outData[0];\n    var angle = 2 * Math.PI / model.resolution;\n    var xbot = -model.height / 2.0;\n    var numberOfPoints = model.resolution + 1;\n    var cellArraySize = 4 * model.resolution + 1 + model.resolution; // Points\n\n    var pointIdx = 0;\n    var points = macro.newTypedArray(model.pointType, numberOfPoints * 3); // Cells\n\n    var cellLocation = 0;\n    var polys = new Uint32Array(cellArraySize); // Add summit point\n\n    points[0] = model.height / 2.0;\n    points[1] = 0.0;\n    points[2] = 0.0; // Create bottom cell\n\n    if (model.capping) {\n      polys[cellLocation++] = model.resolution;\n    } // Add all points\n\n\n    for (var i = 0; i < model.resolution; i++) {\n      pointIdx++;\n      points[pointIdx * 3 + 0] = xbot;\n      points[pointIdx * 3 + 1] = model.radius * Math.cos(i * angle);\n      points[pointIdx * 3 + 2] = model.radius * Math.sin(i * angle); // Add points to bottom cell in reverse order\n\n      if (model.capping) {\n        polys[model.resolution - cellLocation++ + 1] = pointIdx;\n      }\n    } // Add all triangle cells\n\n\n    for (var _i = 0; _i < model.resolution; _i++) {\n      polys[cellLocation++] = 3;\n      polys[cellLocation++] = 0;\n      polys[cellLocation++] = _i + 1;\n      polys[cellLocation++] = _i + 2 > model.resolution ? 1 : _i + 2;\n    } // Apply transformation to the points coordinates\n\n\n    (_vtkMatrixBuilder$bui = vtkMatrixBuilder.buildFromRadian()).translate.apply(_vtkMatrixBuilder$bui, _toConsumableArray(model.center)).rotateFromDirections([1, 0, 0], model.direction).apply(points);\n\n    dataset = vtkPolyData.newInstance();\n    dataset.getPoints().setData(points, 3);\n    dataset.getPolys().setData(polys, 1); // Update output\n\n    outData[0] = dataset;\n  } // Expose methods\n\n\n  publicAPI.requestData = requestData;\n} // ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\n\nvar DEFAULT_VALUES = {\n  height: 1.0,\n  radius: 0.5,\n  resolution: 6,\n  center: [0, 0, 0],\n  direction: [1.0, 0.0, 0.0],\n  capping: true,\n  pointType: 'Float64Array'\n}; // ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  var initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues); // Build VTK API\n\n  macro.obj(publicAPI, model);\n  macro.setGet(publicAPI, model, ['height', 'radius', 'resolution', 'capping']);\n  macro.setGetArray(publicAPI, model, ['center', 'direction'], 3);\n  macro.algo(publicAPI, model, 0, 1);\n  vtkConeSource(publicAPI, model);\n} // ----------------------------------------------------------------------------\n\nvar newInstance = macro.newInstance(extend, 'vtkConeSource'); // ----------------------------------------------------------------------------\n\nvar vtkConeSource$1 = {\n  newInstance: newInstance,\n  extend: extend\n};\n\nexport { vtkConeSource$1 as default, extend, newInstance };\n","import _toConsumableArray from '@babel/runtime/helpers/toConsumableArray';\nimport macro from '../../macros.js';\nimport vtkDataArray from '../../Common/Core/DataArray.js';\nimport vtkPolyData from '../../Common/DataModel/PolyData.js';\nimport vtkMatrixBuilder from '../../Common/Core/MatrixBuilder.js';\n\n// vtkCylinderSource methods\n// ----------------------------------------------------------------------------\n\nfunction vtkCylinderSource(publicAPI, model) {\n  // Set our classname\n  model.classHierarchy.push('vtkCylinderSource');\n\n  function requestData(inData, outData) {\n    var _vtkMatrixBuilder$bui, _vtkMatrixBuilder$bui2;\n\n    if (model.deleted) {\n      return;\n    }\n\n    var dataset = outData[0];\n    var angle = 2.0 * Math.PI / model.resolution;\n    var numberOfPoints = 2 * model.resolution;\n    var numberOfPolys = 5 * model.resolution;\n\n    if (model.capping) {\n      numberOfPoints = 4 * model.resolution;\n      numberOfPolys = 7 * model.resolution + 2;\n    } // Points\n\n\n    var points = macro.newTypedArray(model.pointType, numberOfPoints * 3); // Cells\n\n    var cellLocation = 0;\n    var polys = new Uint32Array(numberOfPolys); // Normals\n\n    var normalsData = new Float32Array(numberOfPoints * 3);\n    var normals = vtkDataArray.newInstance({\n      numberOfComponents: 3,\n      values: normalsData,\n      name: 'Normals'\n    }); // Texture coords\n\n    var tcData = new Float32Array(numberOfPoints * 2);\n    var tcoords = vtkDataArray.newInstance({\n      numberOfComponents: 2,\n      values: tcData,\n      name: 'TCoords'\n    }); // Generate points for all sides\n\n    var nbot = [0.0, 0.0, 0.0];\n    var ntop = [0.0, 0.0, 0.0];\n    var xbot = [0.0, 0.0, 0.0];\n    var xtop = [0.0, 0.0, 0.0];\n    var tcbot = [0.0, 0.0];\n    var tctop = [0.0, 0.0];\n    var otherRadius = model.otherRadius == null ? model.radius : model.otherRadius;\n\n    for (var i = 0; i < model.resolution; i++) {\n      // x coordinate\n      nbot[0] = Math.cos(i * angle + model.initAngle);\n      ntop[0] = nbot[0];\n      xbot[0] = model.radius * nbot[0] + model.center[0];\n      xtop[0] = xbot[0];\n      tcbot[0] = Math.abs(2.0 * i / model.resolution - 1.0);\n      tctop[0] = tcbot[0]; // y coordinate\n\n      xbot[1] = 0.5 * model.height + model.center[1];\n      xtop[1] = -0.5 * model.height + model.center[1];\n      tcbot[1] = 0.0;\n      tctop[1] = 1.0; // z coordinate\n\n      nbot[2] = -Math.sin(i * angle + model.initAngle);\n      ntop[2] = nbot[2];\n      xbot[2] = otherRadius * nbot[2] + model.center[2];\n      xtop[2] = xbot[2];\n      var pointIdx = 2 * i;\n\n      for (var j = 0; j < 3; j++) {\n        normalsData[pointIdx * 3 + j] = nbot[j];\n        normalsData[(pointIdx + 1) * 3 + j] = ntop[j];\n        points[pointIdx * 3 + j] = xbot[j];\n        points[(pointIdx + 1) * 3 + j] = xtop[j];\n\n        if (j < 2) {\n          tcData[pointIdx * 2 + j] = tcbot[j];\n          tcData[(pointIdx + 1) * 2 + j] = tctop[j];\n        }\n      }\n    } // Generate polygons for sides\n\n\n    for (var _i = 0; _i < model.resolution; _i++) {\n      polys[cellLocation++] = 4;\n      polys[cellLocation++] = 2 * _i;\n      polys[cellLocation++] = 2 * _i + 1;\n      var pt = (2 * _i + 3) % (2 * model.resolution);\n      polys[cellLocation++] = pt;\n      polys[cellLocation++] = pt - 1;\n    }\n\n    if (model.capping) {\n      // Generate points for top/bottom polygons\n      for (var _i2 = 0; _i2 < model.resolution; _i2++) {\n        // x coordinate\n        xbot[0] = model.radius * Math.cos(_i2 * angle + model.initAngle);\n        xtop[0] = xbot[0];\n        tcbot[0] = xbot[0];\n        tctop[0] = xbot[0];\n        xbot[0] += model.center[0];\n        xtop[0] += model.center[0]; // y coordinate\n\n        nbot[1] = 1.0;\n        ntop[1] = -1.0;\n        xbot[1] = 0.5 * model.height + model.center[1];\n        xtop[1] = -0.5 * model.height + model.center[1]; // z coordinate\n\n        xbot[2] = -otherRadius * Math.sin(_i2 * angle + model.initAngle);\n        xtop[2] = xbot[2];\n        tcbot[1] = xbot[2];\n        tctop[1] = xbot[2];\n        xbot[2] += model.center[2];\n        xtop[2] += model.center[2];\n        var botIdx = 2 * model.resolution + _i2;\n        var topIdx = 3 * model.resolution + model.resolution - _i2 - 1;\n\n        for (var _j = 0; _j < 3; _j++) {\n          normalsData[3 * botIdx + _j] = nbot[_j];\n          normalsData[3 * topIdx + _j] = ntop[_j];\n          points[3 * botIdx + _j] = xbot[_j];\n          points[3 * topIdx + _j] = xtop[_j];\n\n          if (_j < 2) {\n            tcData[2 * botIdx + _j] = tcbot[_j];\n            tcData[2 * topIdx + _j] = tctop[_j];\n          }\n        }\n      } // Generate polygons for top/bottom\n\n\n      polys[cellLocation++] = model.resolution;\n\n      for (var _i3 = 0; _i3 < model.resolution; _i3++) {\n        polys[cellLocation++] = 2 * model.resolution + _i3;\n      }\n\n      polys[cellLocation++] = model.resolution;\n\n      for (var _i4 = 0; _i4 < model.resolution; _i4++) {\n        polys[cellLocation++] = 3 * model.resolution + _i4;\n      }\n    } // Apply transformation to the points coordinates\n\n\n    (_vtkMatrixBuilder$bui = (_vtkMatrixBuilder$bui2 = vtkMatrixBuilder.buildFromRadian()).translate.apply(_vtkMatrixBuilder$bui2, _toConsumableArray(model.center)).rotateFromDirections([0, 1, 0], model.direction)).translate.apply(_vtkMatrixBuilder$bui, _toConsumableArray(model.center.map(function (c) {\n      return c * -1;\n    }))).apply(points);\n\n    dataset = vtkPolyData.newInstance();\n    dataset.getPoints().setData(points, 3);\n    dataset.getPolys().setData(polys, 1);\n    dataset.getPointData().setNormals(normals);\n    dataset.getPointData().setTCoords(tcoords); // Update output\n\n    outData[0] = dataset;\n  } // Expose methods\n\n\n  publicAPI.requestData = requestData;\n} // ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\n\nvar DEFAULT_VALUES = {\n  height: 1.0,\n  initAngle: 0,\n  radius: 1.0,\n  resolution: 6,\n  center: [0, 0, 0],\n  direction: [0.0, 1.0, 0.0],\n  capping: true,\n  pointType: 'Float64Array'\n}; // ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  var initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues); // Build VTK API\n\n  macro.obj(publicAPI, model);\n  macro.setGet(publicAPI, model, ['height', 'initAngle', 'otherRadius', 'radius', 'resolution', 'capping']);\n  macro.setGetArray(publicAPI, model, ['center', 'direction'], 3);\n  macro.algo(publicAPI, model, 0, 1);\n  vtkCylinderSource(publicAPI, model);\n} // ----------------------------------------------------------------------------\n\nvar newInstance = macro.newInstance(extend, 'vtkCylinderSource'); // ----------------------------------------------------------------------------\n\nvar vtkCylinderSource$1 = {\n  newInstance: newInstance,\n  extend: extend\n};\n\nexport { vtkCylinderSource$1 as default, extend, newInstance };\n","import macro from '../../macros.js';\nimport vtkAppendPolyData from '../General/AppendPolyData.js';\nimport vtkConeSource from './ConeSource.js';\nimport vtkCylinderSource from './CylinderSource.js';\nimport vtkMatrixBuilder from '../../Common/Core/MatrixBuilder.js';\n\n// vtkArrowSource methods\n// ----------------------------------------------------------------------------\n\nfunction vtkArrowSource(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkArrowSource');\n\n  function requestData(inData, outData) {\n    if (model.deleted) {\n      return;\n    }\n\n    var cylinder = vtkCylinderSource.newInstance({\n      capping: true\n    });\n    cylinder.setResolution(model.shaftResolution);\n    cylinder.setRadius(model.shaftRadius);\n    cylinder.setHeight(1.0 - model.tipLength);\n    cylinder.setCenter(0, (1.0 - model.tipLength) * 0.5, 0.0);\n    var cylinderPD = cylinder.getOutputData();\n    var cylinderPts = cylinderPD.getPoints().getData();\n    var cylinderNormals = cylinderPD.getPointData().getNormals().getData(); // Apply transformation to the cylinder\n\n    vtkMatrixBuilder.buildFromDegree().rotateZ(-90).apply(cylinderPts).apply(cylinderNormals);\n    var cone = vtkConeSource.newInstance();\n    cone.setResolution(model.tipResolution);\n    cone.setHeight(model.tipLength);\n    cone.setRadius(model.tipRadius);\n    var conePD = cone.getOutputData();\n    var conePts = conePD.getPoints().getData(); // Apply transformation to the cone\n\n    vtkMatrixBuilder.buildFromRadian().translate(1.0 - model.tipLength * 0.5, 0.0, 0.0).apply(conePts);\n    var append = vtkAppendPolyData.newInstance();\n    append.setInputData(cylinderPD);\n    append.addInputData(conePD);\n    var appendPD = append.getOutputData();\n    var appendPts = appendPD.getPoints().getData(); // Center the arrow about [0, 0, 0]\n\n    vtkMatrixBuilder.buildFromRadian().translate(-0.5 + model.tipLength * 0.5, 0.0, 0.0).apply(appendPts);\n\n    if (model.invert) {\n      // Apply transformation to the arrow\n      vtkMatrixBuilder.buildFromRadian().rotateFromDirections([1, 0, 0], model.direction).scale(-1, -1, -1).apply(appendPts); // Update output\n\n      outData[0] = appendPD;\n    } else {\n      // Apply transformation to the arrow\n      vtkMatrixBuilder.buildFromRadian().rotateFromDirections([1, 0, 0], model.direction).scale(1, 1, 1).apply(appendPts); // Update output\n\n      outData[0] = append.getOutputData();\n    }\n  } // Expose methods\n\n\n  publicAPI.requestData = requestData;\n} // ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\n\nvar DEFAULT_VALUES = {\n  tipResolution: 6,\n  tipRadius: 0.1,\n  tipLength: 0.35,\n  shaftResolution: 6,\n  shaftRadius: 0.03,\n  invert: false,\n  direction: [1.0, 0.0, 0.0],\n  pointType: 'Float64Array'\n}; // ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  var initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues); // Build VTK API\n\n  macro.obj(publicAPI, model);\n  macro.setGet(publicAPI, model, ['tipResolution', 'tipRadius', 'tipLength', 'shaftResolution', 'shaftRadius', 'invert']);\n  macro.setGetArray(publicAPI, model, ['direction'], 3);\n  macro.algo(publicAPI, model, 0, 1);\n  vtkArrowSource(publicAPI, model);\n} // ----------------------------------------------------------------------------\n\nvar newInstance = macro.newInstance(extend, 'vtkArrowSource'); // ----------------------------------------------------------------------------\n\nvar vtkArrowSource$1 = {\n  newInstance: newInstance,\n  extend: extend\n};\n\nexport { vtkArrowSource$1 as default, extend, newInstance };\n","import _toConsumableArray from '@babel/runtime/helpers/toConsumableArray';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport macro from '../../macros.js';\nimport vtkMatrixBuilder from '../../Common/Core/MatrixBuilder.js';\nimport vtkDataArray from '../../Common/Core/DataArray.js';\nimport vtkActor from './Actor.js';\nimport vtkMapper from './Mapper.js';\nimport vtkArrowSource from '../../Filters/Sources/ArrowSource.js';\nimport vtkAppendPolyData from '../../Filters/General/AppendPolyData.js';\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction centerDataSet(ds) {\n  var _vtkMatrixBuilder$bui;\n\n  var bounds = ds.getPoints().getBounds();\n  var center = [-(bounds[0] + bounds[1]) * 0.5, -(bounds[2] + bounds[3]) * 0.5, -(bounds[4] + bounds[5]) * 0.5];\n\n  (_vtkMatrixBuilder$bui = vtkMatrixBuilder.buildFromDegree()).translate.apply(_vtkMatrixBuilder$bui, center).apply(ds.getPoints().getData());\n}\n\nfunction shiftDataset(ds, axis) {\n  var _vtkMatrixBuilder$bui2;\n\n  var bounds = ds.getPoints().getBounds();\n  var center = [0, 0, 0];\n  center[axis] = -bounds[axis * 2];\n\n  (_vtkMatrixBuilder$bui2 = vtkMatrixBuilder.buildFromDegree()).translate.apply(_vtkMatrixBuilder$bui2, center).apply(ds.getPoints().getData());\n} // ----------------------------------------------------------------------------\n\n\nfunction addColor(ds, r, g, b) {\n  var size = ds.getPoints().getData().length;\n  var rgbArray = new Uint8Array(size);\n  var offset = 0;\n\n  while (offset < size) {\n    rgbArray[offset++] = r;\n    rgbArray[offset++] = g;\n    rgbArray[offset++] = b;\n  }\n\n  ds.getPointData().setScalars(vtkDataArray.newInstance({\n    name: 'color',\n    numberOfComponents: 3,\n    values: rgbArray\n  }));\n} // ----------------------------------------------------------------------------\n// vtkAxesActor\n// ----------------------------------------------------------------------------\n\n\nfunction vtkAxesActor(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkAxesActor');\n\n  var _mapper = vtkMapper.newInstance();\n\n  publicAPI.setMapper(_mapper);\n\n  publicAPI.update = function () {\n    var xAxis = vtkArrowSource.newInstance(_objectSpread({\n      direction: [1, 0, 0]\n    }, model.config)).getOutputData();\n\n    if (model.config.recenter) {\n      centerDataSet(xAxis);\n    } else {\n      shiftDataset(xAxis, 0);\n    }\n\n    addColor.apply(void 0, [xAxis].concat(_toConsumableArray(model.xAxisColor)));\n    var yAxis = vtkArrowSource.newInstance(_objectSpread({\n      direction: [0, 1, 0]\n    }, model.config)).getOutputData();\n\n    if (model.config.recenter) {\n      centerDataSet(yAxis);\n    } else {\n      shiftDataset(yAxis, 1);\n    }\n\n    addColor.apply(void 0, [yAxis].concat(_toConsumableArray(model.yAxisColor)));\n    var zAxis = vtkArrowSource.newInstance(_objectSpread({\n      direction: [0, 0, 1]\n    }, model.config)).getOutputData();\n\n    if (model.config.recenter) {\n      centerDataSet(zAxis);\n    } else {\n      shiftDataset(zAxis, 2);\n    }\n\n    addColor.apply(void 0, [zAxis].concat(_toConsumableArray(model.zAxisColor)));\n    var source = vtkAppendPolyData.newInstance();\n    source.setInputData(xAxis);\n    source.addInputData(yAxis);\n    source.addInputData(zAxis);\n\n    _mapper.setInputConnection(source.getOutputPort());\n  };\n\n  publicAPI.update();\n\n  var _debouncedUpdate = macro.debounce(publicAPI.update, 0);\n\n  var setConfig = publicAPI.setConfig,\n      setXAxisColor = publicAPI.setXAxisColor,\n      setYAxisColor = publicAPI.setYAxisColor,\n      setZAxisColor = publicAPI.setZAxisColor;\n\n  publicAPI.setConfig = function (c) {\n    if (setConfig(c)) {\n      _debouncedUpdate();\n\n      return true;\n    }\n\n    return false;\n  };\n\n  publicAPI.setXAxisColor = function (c) {\n    if (setXAxisColor(c)) {\n      _debouncedUpdate();\n\n      return true;\n    }\n\n    return false;\n  };\n\n  publicAPI.setYAxisColor = function (c) {\n    if (setYAxisColor(c)) {\n      _debouncedUpdate();\n\n      return true;\n    }\n\n    return false;\n  };\n\n  publicAPI.setZAxisColor = function (c) {\n    if (setZAxisColor(c)) {\n      _debouncedUpdate();\n\n      return true;\n    }\n\n    return false;\n  };\n} // ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\n\nvar DEFAULT_VALUES = {\n  config: {\n    recenter: true,\n    tipResolution: 60,\n    tipRadius: 0.1,\n    tipLength: 0.2,\n    shaftResolution: 60,\n    shaftRadius: 0.03,\n    invert: false\n  },\n  xAxisColor: [255, 0, 0],\n  yAxisColor: [255, 255, 0],\n  zAxisColor: [0, 128, 0]\n}; // ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  var initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues); // Inheritance\n\n  vtkActor.extend(publicAPI, model, initialValues);\n  macro.setGet(publicAPI, model, ['config']);\n  macro.setGetArray(publicAPI, model, ['xAxisColor', 'yAxisColor', 'zAxisColor'], 3, 255); // Object methods\n\n  vtkAxesActor(publicAPI, model);\n} // ----------------------------------------------------------------------------\n\nvar newInstance = macro.newInstance(extend, 'vtkAxesActor'); // ----------------------------------------------------------------------------\n\nvar vtkAxesActor$1 = {\n  newInstance: newInstance,\n  extend: extend\n};\n\nexport { DEFAULT_VALUES, vtkAxesActor$1 as default, extend, newInstance };\n","// DEFLATE is a complex format; to read this code, you should probably check the RFC first:\n// https://tools.ietf.org/html/rfc1951\n// You may also wish to take a look at the guide I made about this program:\n// https://gist.github.com/101arrowz/253f31eb5abc3d9275ab943003ffecad\n// Some of the following code is similar to that of UZIP.js:\n// https://github.com/photopea/UZIP.js\n// However, the vast majority of the codebase has diverged from UZIP.js to increase performance and reduce bundle size.\n// Sometimes 0 will appear where -1 would be more appropriate. This is because using a uint\n// is better for memory in most engines (I *think*).\nvar ch2 = {};\nvar wk = (function (c, id, msg, transfer, cb) {\n    var w = new Worker(ch2[id] || (ch2[id] = URL.createObjectURL(new Blob([\n        c + ';addEventListener(\"error\",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'\n    ], { type: 'text/javascript' }))));\n    w.onmessage = function (e) {\n        var d = e.data, ed = d.$e$;\n        if (ed) {\n            var err = new Error(ed[0]);\n            err['code'] = ed[1];\n            err.stack = ed[2];\n            cb(err, null);\n        }\n        else\n            cb(null, d);\n    };\n    w.postMessage(msg, transfer);\n    return w;\n});\n\n// aliases for shorter compressed code (most minifers don't do this)\nvar u8 = Uint8Array, u16 = Uint16Array, u32 = Uint32Array;\n// fixed length extra bits\nvar fleb = new u8([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, /* unused */ 0, 0, /* impossible */ 0]);\n// fixed distance extra bits\n// see fleb note\nvar fdeb = new u8([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, /* unused */ 0, 0]);\n// code length index map\nvar clim = new u8([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\n// get base, reverse index map from extra bits\nvar freb = function (eb, start) {\n    var b = new u16(31);\n    for (var i = 0; i < 31; ++i) {\n        b[i] = start += 1 << eb[i - 1];\n    }\n    // numbers here are at max 18 bits\n    var r = new u32(b[30]);\n    for (var i = 1; i < 30; ++i) {\n        for (var j = b[i]; j < b[i + 1]; ++j) {\n            r[j] = ((j - b[i]) << 5) | i;\n        }\n    }\n    return [b, r];\n};\nvar _a = freb(fleb, 2), fl = _a[0], revfl = _a[1];\n// we can ignore the fact that the other numbers are wrong; they never happen anyway\nfl[28] = 258, revfl[258] = 28;\nvar _b = freb(fdeb, 0), fd = _b[0], revfd = _b[1];\n// map of value to reverse (assuming 16 bits)\nvar rev = new u16(32768);\nfor (var i = 0; i < 32768; ++i) {\n    // reverse table algorithm from SO\n    var x = ((i & 0xAAAA) >>> 1) | ((i & 0x5555) << 1);\n    x = ((x & 0xCCCC) >>> 2) | ((x & 0x3333) << 2);\n    x = ((x & 0xF0F0) >>> 4) | ((x & 0x0F0F) << 4);\n    rev[i] = (((x & 0xFF00) >>> 8) | ((x & 0x00FF) << 8)) >>> 1;\n}\n// create huffman tree from u8 \"map\": index -> code length for code index\n// mb (max bits) must be at most 15\n// TODO: optimize/split up?\nvar hMap = (function (cd, mb, r) {\n    var s = cd.length;\n    // index\n    var i = 0;\n    // u16 \"map\": index -> # of codes with bit length = index\n    var l = new u16(mb);\n    // length of cd must be 288 (total # of codes)\n    for (; i < s; ++i) {\n        if (cd[i])\n            ++l[cd[i] - 1];\n    }\n    // u16 \"map\": index -> minimum code for bit length = index\n    var le = new u16(mb);\n    for (i = 0; i < mb; ++i) {\n        le[i] = (le[i - 1] + l[i - 1]) << 1;\n    }\n    var co;\n    if (r) {\n        // u16 \"map\": index -> number of actual bits, symbol for code\n        co = new u16(1 << mb);\n        // bits to remove for reverser\n        var rvb = 15 - mb;\n        for (i = 0; i < s; ++i) {\n            // ignore 0 lengths\n            if (cd[i]) {\n                // num encoding both symbol and bits read\n                var sv = (i << 4) | cd[i];\n                // free bits\n                var r_1 = mb - cd[i];\n                // start value\n                var v = le[cd[i] - 1]++ << r_1;\n                // m is end value\n                for (var m = v | ((1 << r_1) - 1); v <= m; ++v) {\n                    // every 16 bit value starting with the code yields the same result\n                    co[rev[v] >>> rvb] = sv;\n                }\n            }\n        }\n    }\n    else {\n        co = new u16(s);\n        for (i = 0; i < s; ++i) {\n            if (cd[i]) {\n                co[i] = rev[le[cd[i] - 1]++] >>> (15 - cd[i]);\n            }\n        }\n    }\n    return co;\n});\n// fixed length tree\nvar flt = new u8(288);\nfor (var i = 0; i < 144; ++i)\n    flt[i] = 8;\nfor (var i = 144; i < 256; ++i)\n    flt[i] = 9;\nfor (var i = 256; i < 280; ++i)\n    flt[i] = 7;\nfor (var i = 280; i < 288; ++i)\n    flt[i] = 8;\n// fixed distance tree\nvar fdt = new u8(32);\nfor (var i = 0; i < 32; ++i)\n    fdt[i] = 5;\n// fixed length map\nvar flm = /*#__PURE__*/ hMap(flt, 9, 0), flrm = /*#__PURE__*/ hMap(flt, 9, 1);\n// fixed distance map\nvar fdm = /*#__PURE__*/ hMap(fdt, 5, 0), fdrm = /*#__PURE__*/ hMap(fdt, 5, 1);\n// find max of array\nvar max = function (a) {\n    var m = a[0];\n    for (var i = 1; i < a.length; ++i) {\n        if (a[i] > m)\n            m = a[i];\n    }\n    return m;\n};\n// read d, starting at bit p and mask with m\nvar bits = function (d, p, m) {\n    var o = (p / 8) | 0;\n    return ((d[o] | (d[o + 1] << 8)) >> (p & 7)) & m;\n};\n// read d, starting at bit p continuing for at least 16 bits\nvar bits16 = function (d, p) {\n    var o = (p / 8) | 0;\n    return ((d[o] | (d[o + 1] << 8) | (d[o + 2] << 16)) >> (p & 7));\n};\n// get end of byte\nvar shft = function (p) { return ((p + 7) / 8) | 0; };\n// typed array slice - allows garbage collector to free original reference,\n// while being more compatible than .slice\nvar slc = function (v, s, e) {\n    if (s == null || s < 0)\n        s = 0;\n    if (e == null || e > v.length)\n        e = v.length;\n    // can't use .constructor in case user-supplied\n    var n = new (v.BYTES_PER_ELEMENT == 2 ? u16 : v.BYTES_PER_ELEMENT == 4 ? u32 : u8)(e - s);\n    n.set(v.subarray(s, e));\n    return n;\n};\n/**\n * Codes for errors generated within this library\n */\nexport var FlateErrorCode = {\n    UnexpectedEOF: 0,\n    InvalidBlockType: 1,\n    InvalidLengthLiteral: 2,\n    InvalidDistance: 3,\n    StreamFinished: 4,\n    NoStreamHandler: 5,\n    InvalidHeader: 6,\n    NoCallback: 7,\n    InvalidUTF8: 8,\n    ExtraFieldTooLong: 9,\n    InvalidDate: 10,\n    FilenameTooLong: 11,\n    StreamFinishing: 12,\n    InvalidZipData: 13,\n    UnknownCompressionMethod: 14\n};\n// error codes\nvar ec = [\n    'unexpected EOF',\n    'invalid block type',\n    'invalid length/literal',\n    'invalid distance',\n    'stream finished',\n    'no stream handler',\n    ,\n    'no callback',\n    'invalid UTF-8 data',\n    'extra field too long',\n    'date not in range 1980-2099',\n    'filename too long',\n    'stream finishing',\n    'invalid zip data'\n    // determined by unknown compression method\n];\n;\nvar err = function (ind, msg, nt) {\n    var e = new Error(msg || ec[ind]);\n    e.code = ind;\n    if (Error.captureStackTrace)\n        Error.captureStackTrace(e, err);\n    if (!nt)\n        throw e;\n    return e;\n};\n// expands raw DEFLATE data\nvar inflt = function (dat, buf, st) {\n    // source length\n    var sl = dat.length;\n    if (!sl || (st && st.f && !st.l))\n        return buf || new u8(0);\n    // have to estimate size\n    var noBuf = !buf || st;\n    // no state\n    var noSt = !st || st.i;\n    if (!st)\n        st = {};\n    // Assumes roughly 33% compression ratio average\n    if (!buf)\n        buf = new u8(sl * 3);\n    // ensure buffer can fit at least l elements\n    var cbuf = function (l) {\n        var bl = buf.length;\n        // need to increase size to fit\n        if (l > bl) {\n            // Double or set to necessary, whichever is greater\n            var nbuf = new u8(Math.max(bl * 2, l));\n            nbuf.set(buf);\n            buf = nbuf;\n        }\n    };\n    //  last chunk         bitpos           bytes\n    var final = st.f || 0, pos = st.p || 0, bt = st.b || 0, lm = st.l, dm = st.d, lbt = st.m, dbt = st.n;\n    // total bits\n    var tbts = sl * 8;\n    do {\n        if (!lm) {\n            // BFINAL - this is only 1 when last chunk is next\n            final = bits(dat, pos, 1);\n            // type: 0 = no compression, 1 = fixed huffman, 2 = dynamic huffman\n            var type = bits(dat, pos + 1, 3);\n            pos += 3;\n            if (!type) {\n                // go to end of byte boundary\n                var s = shft(pos) + 4, l = dat[s - 4] | (dat[s - 3] << 8), t = s + l;\n                if (t > sl) {\n                    if (noSt)\n                        err(0);\n                    break;\n                }\n                // ensure size\n                if (noBuf)\n                    cbuf(bt + l);\n                // Copy over uncompressed data\n                buf.set(dat.subarray(s, t), bt);\n                // Get new bitpos, update byte count\n                st.b = bt += l, st.p = pos = t * 8, st.f = final;\n                continue;\n            }\n            else if (type == 1)\n                lm = flrm, dm = fdrm, lbt = 9, dbt = 5;\n            else if (type == 2) {\n                //  literal                            lengths\n                var hLit = bits(dat, pos, 31) + 257, hcLen = bits(dat, pos + 10, 15) + 4;\n                var tl = hLit + bits(dat, pos + 5, 31) + 1;\n                pos += 14;\n                // length+distance tree\n                var ldt = new u8(tl);\n                // code length tree\n                var clt = new u8(19);\n                for (var i = 0; i < hcLen; ++i) {\n                    // use index map to get real code\n                    clt[clim[i]] = bits(dat, pos + i * 3, 7);\n                }\n                pos += hcLen * 3;\n                // code lengths bits\n                var clb = max(clt), clbmsk = (1 << clb) - 1;\n                // code lengths map\n                var clm = hMap(clt, clb, 1);\n                for (var i = 0; i < tl;) {\n                    var r = clm[bits(dat, pos, clbmsk)];\n                    // bits read\n                    pos += r & 15;\n                    // symbol\n                    var s = r >>> 4;\n                    // code length to copy\n                    if (s < 16) {\n                        ldt[i++] = s;\n                    }\n                    else {\n                        //  copy   count\n                        var c = 0, n = 0;\n                        if (s == 16)\n                            n = 3 + bits(dat, pos, 3), pos += 2, c = ldt[i - 1];\n                        else if (s == 17)\n                            n = 3 + bits(dat, pos, 7), pos += 3;\n                        else if (s == 18)\n                            n = 11 + bits(dat, pos, 127), pos += 7;\n                        while (n--)\n                            ldt[i++] = c;\n                    }\n                }\n                //    length tree                 distance tree\n                var lt = ldt.subarray(0, hLit), dt = ldt.subarray(hLit);\n                // max length bits\n                lbt = max(lt);\n                // max dist bits\n                dbt = max(dt);\n                lm = hMap(lt, lbt, 1);\n                dm = hMap(dt, dbt, 1);\n            }\n            else\n                err(1);\n            if (pos > tbts) {\n                if (noSt)\n                    err(0);\n                break;\n            }\n        }\n        // Make sure the buffer can hold this + the largest possible addition\n        // Maximum chunk size (practically, theoretically infinite) is 2^17;\n        if (noBuf)\n            cbuf(bt + 131072);\n        var lms = (1 << lbt) - 1, dms = (1 << dbt) - 1;\n        var lpos = pos;\n        for (;; lpos = pos) {\n            // bits read, code\n            var c = lm[bits16(dat, pos) & lms], sym = c >>> 4;\n            pos += c & 15;\n            if (pos > tbts) {\n                if (noSt)\n                    err(0);\n                break;\n            }\n            if (!c)\n                err(2);\n            if (sym < 256)\n                buf[bt++] = sym;\n            else if (sym == 256) {\n                lpos = pos, lm = null;\n                break;\n            }\n            else {\n                var add = sym - 254;\n                // no extra bits needed if less\n                if (sym > 264) {\n                    // index\n                    var i = sym - 257, b = fleb[i];\n                    add = bits(dat, pos, (1 << b) - 1) + fl[i];\n                    pos += b;\n                }\n                // dist\n                var d = dm[bits16(dat, pos) & dms], dsym = d >>> 4;\n                if (!d)\n                    err(3);\n                pos += d & 15;\n                var dt = fd[dsym];\n                if (dsym > 3) {\n                    var b = fdeb[dsym];\n                    dt += bits16(dat, pos) & ((1 << b) - 1), pos += b;\n                }\n                if (pos > tbts) {\n                    if (noSt)\n                        err(0);\n                    break;\n                }\n                if (noBuf)\n                    cbuf(bt + 131072);\n                var end = bt + add;\n                for (; bt < end; bt += 4) {\n                    buf[bt] = buf[bt - dt];\n                    buf[bt + 1] = buf[bt + 1 - dt];\n                    buf[bt + 2] = buf[bt + 2 - dt];\n                    buf[bt + 3] = buf[bt + 3 - dt];\n                }\n                bt = end;\n            }\n        }\n        st.l = lm, st.p = lpos, st.b = bt, st.f = final;\n        if (lm)\n            final = 1, st.m = lbt, st.d = dm, st.n = dbt;\n    } while (!final);\n    return bt == buf.length ? buf : slc(buf, 0, bt);\n};\n// starting at p, write the minimum number of bits that can hold v to d\nvar wbits = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) | 0;\n    d[o] |= v;\n    d[o + 1] |= v >>> 8;\n};\n// starting at p, write the minimum number of bits (>8) that can hold v to d\nvar wbits16 = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) | 0;\n    d[o] |= v;\n    d[o + 1] |= v >>> 8;\n    d[o + 2] |= v >>> 16;\n};\n// creates code lengths from a frequency table\nvar hTree = function (d, mb) {\n    // Need extra info to make a tree\n    var t = [];\n    for (var i = 0; i < d.length; ++i) {\n        if (d[i])\n            t.push({ s: i, f: d[i] });\n    }\n    var s = t.length;\n    var t2 = t.slice();\n    if (!s)\n        return [et, 0];\n    if (s == 1) {\n        var v = new u8(t[0].s + 1);\n        v[t[0].s] = 1;\n        return [v, 1];\n    }\n    t.sort(function (a, b) { return a.f - b.f; });\n    // after i2 reaches last ind, will be stopped\n    // freq must be greater than largest possible number of symbols\n    t.push({ s: -1, f: 25001 });\n    var l = t[0], r = t[1], i0 = 0, i1 = 1, i2 = 2;\n    t[0] = { s: -1, f: l.f + r.f, l: l, r: r };\n    // efficient algorithm from UZIP.js\n    // i0 is lookbehind, i2 is lookahead - after processing two low-freq\n    // symbols that combined have high freq, will start processing i2 (high-freq,\n    // non-composite) symbols instead\n    // see https://reddit.com/r/photopea/comments/ikekht/uzipjs_questions/\n    while (i1 != s - 1) {\n        l = t[t[i0].f < t[i2].f ? i0++ : i2++];\n        r = t[i0 != i1 && t[i0].f < t[i2].f ? i0++ : i2++];\n        t[i1++] = { s: -1, f: l.f + r.f, l: l, r: r };\n    }\n    var maxSym = t2[0].s;\n    for (var i = 1; i < s; ++i) {\n        if (t2[i].s > maxSym)\n            maxSym = t2[i].s;\n    }\n    // code lengths\n    var tr = new u16(maxSym + 1);\n    // max bits in tree\n    var mbt = ln(t[i1 - 1], tr, 0);\n    if (mbt > mb) {\n        // more algorithms from UZIP.js\n        // TODO: find out how this code works (debt)\n        //  ind    debt\n        var i = 0, dt = 0;\n        //    left            cost\n        var lft = mbt - mb, cst = 1 << lft;\n        t2.sort(function (a, b) { return tr[b.s] - tr[a.s] || a.f - b.f; });\n        for (; i < s; ++i) {\n            var i2_1 = t2[i].s;\n            if (tr[i2_1] > mb) {\n                dt += cst - (1 << (mbt - tr[i2_1]));\n                tr[i2_1] = mb;\n            }\n            else\n                break;\n        }\n        dt >>>= lft;\n        while (dt > 0) {\n            var i2_2 = t2[i].s;\n            if (tr[i2_2] < mb)\n                dt -= 1 << (mb - tr[i2_2]++ - 1);\n            else\n                ++i;\n        }\n        for (; i >= 0 && dt; --i) {\n            var i2_3 = t2[i].s;\n            if (tr[i2_3] == mb) {\n                --tr[i2_3];\n                ++dt;\n            }\n        }\n        mbt = mb;\n    }\n    return [new u8(tr), mbt];\n};\n// get the max length and assign length codes\nvar ln = function (n, l, d) {\n    return n.s == -1\n        ? Math.max(ln(n.l, l, d + 1), ln(n.r, l, d + 1))\n        : (l[n.s] = d);\n};\n// length codes generation\nvar lc = function (c) {\n    var s = c.length;\n    // Note that the semicolon was intentional\n    while (s && !c[--s])\n        ;\n    var cl = new u16(++s);\n    //  ind      num         streak\n    var cli = 0, cln = c[0], cls = 1;\n    var w = function (v) { cl[cli++] = v; };\n    for (var i = 1; i <= s; ++i) {\n        if (c[i] == cln && i != s)\n            ++cls;\n        else {\n            if (!cln && cls > 2) {\n                for (; cls > 138; cls -= 138)\n                    w(32754);\n                if (cls > 2) {\n                    w(cls > 10 ? ((cls - 11) << 5) | 28690 : ((cls - 3) << 5) | 12305);\n                    cls = 0;\n                }\n            }\n            else if (cls > 3) {\n                w(cln), --cls;\n                for (; cls > 6; cls -= 6)\n                    w(8304);\n                if (cls > 2)\n                    w(((cls - 3) << 5) | 8208), cls = 0;\n            }\n            while (cls--)\n                w(cln);\n            cls = 1;\n            cln = c[i];\n        }\n    }\n    return [cl.subarray(0, cli), s];\n};\n// calculate the length of output from tree, code lengths\nvar clen = function (cf, cl) {\n    var l = 0;\n    for (var i = 0; i < cl.length; ++i)\n        l += cf[i] * cl[i];\n    return l;\n};\n// writes a fixed block\n// returns the new bit pos\nvar wfblk = function (out, pos, dat) {\n    // no need to write 00 as type: TypedArray defaults to 0\n    var s = dat.length;\n    var o = shft(pos + 2);\n    out[o] = s & 255;\n    out[o + 1] = s >>> 8;\n    out[o + 2] = out[o] ^ 255;\n    out[o + 3] = out[o + 1] ^ 255;\n    for (var i = 0; i < s; ++i)\n        out[o + i + 4] = dat[i];\n    return (o + 4 + s) * 8;\n};\n// writes a block\nvar wblk = function (dat, out, final, syms, lf, df, eb, li, bs, bl, p) {\n    wbits(out, p++, final);\n    ++lf[256];\n    var _a = hTree(lf, 15), dlt = _a[0], mlb = _a[1];\n    var _b = hTree(df, 15), ddt = _b[0], mdb = _b[1];\n    var _c = lc(dlt), lclt = _c[0], nlc = _c[1];\n    var _d = lc(ddt), lcdt = _d[0], ndc = _d[1];\n    var lcfreq = new u16(19);\n    for (var i = 0; i < lclt.length; ++i)\n        lcfreq[lclt[i] & 31]++;\n    for (var i = 0; i < lcdt.length; ++i)\n        lcfreq[lcdt[i] & 31]++;\n    var _e = hTree(lcfreq, 7), lct = _e[0], mlcb = _e[1];\n    var nlcc = 19;\n    for (; nlcc > 4 && !lct[clim[nlcc - 1]]; --nlcc)\n        ;\n    var flen = (bl + 5) << 3;\n    var ftlen = clen(lf, flt) + clen(df, fdt) + eb;\n    var dtlen = clen(lf, dlt) + clen(df, ddt) + eb + 14 + 3 * nlcc + clen(lcfreq, lct) + (2 * lcfreq[16] + 3 * lcfreq[17] + 7 * lcfreq[18]);\n    if (flen <= ftlen && flen <= dtlen)\n        return wfblk(out, p, dat.subarray(bs, bs + bl));\n    var lm, ll, dm, dl;\n    wbits(out, p, 1 + (dtlen < ftlen)), p += 2;\n    if (dtlen < ftlen) {\n        lm = hMap(dlt, mlb, 0), ll = dlt, dm = hMap(ddt, mdb, 0), dl = ddt;\n        var llm = hMap(lct, mlcb, 0);\n        wbits(out, p, nlc - 257);\n        wbits(out, p + 5, ndc - 1);\n        wbits(out, p + 10, nlcc - 4);\n        p += 14;\n        for (var i = 0; i < nlcc; ++i)\n            wbits(out, p + 3 * i, lct[clim[i]]);\n        p += 3 * nlcc;\n        var lcts = [lclt, lcdt];\n        for (var it = 0; it < 2; ++it) {\n            var clct = lcts[it];\n            for (var i = 0; i < clct.length; ++i) {\n                var len = clct[i] & 31;\n                wbits(out, p, llm[len]), p += lct[len];\n                if (len > 15)\n                    wbits(out, p, (clct[i] >>> 5) & 127), p += clct[i] >>> 12;\n            }\n        }\n    }\n    else {\n        lm = flm, ll = flt, dm = fdm, dl = fdt;\n    }\n    for (var i = 0; i < li; ++i) {\n        if (syms[i] > 255) {\n            var len = (syms[i] >>> 18) & 31;\n            wbits16(out, p, lm[len + 257]), p += ll[len + 257];\n            if (len > 7)\n                wbits(out, p, (syms[i] >>> 23) & 31), p += fleb[len];\n            var dst = syms[i] & 31;\n            wbits16(out, p, dm[dst]), p += dl[dst];\n            if (dst > 3)\n                wbits16(out, p, (syms[i] >>> 5) & 8191), p += fdeb[dst];\n        }\n        else {\n            wbits16(out, p, lm[syms[i]]), p += ll[syms[i]];\n        }\n    }\n    wbits16(out, p, lm[256]);\n    return p + ll[256];\n};\n// deflate options (nice << 13) | chain\nvar deo = /*#__PURE__*/ new u32([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]);\n// empty\nvar et = /*#__PURE__*/ new u8(0);\n// compresses data into a raw DEFLATE buffer\nvar dflt = function (dat, lvl, plvl, pre, post, lst) {\n    var s = dat.length;\n    var o = new u8(pre + s + 5 * (1 + Math.ceil(s / 7000)) + post);\n    // writing to this writes to the output buffer\n    var w = o.subarray(pre, o.length - post);\n    var pos = 0;\n    if (!lvl || s < 8) {\n        for (var i = 0; i <= s; i += 65535) {\n            // end\n            var e = i + 65535;\n            if (e >= s) {\n                // write final block\n                w[pos >> 3] = lst;\n            }\n            pos = wfblk(w, pos + 1, dat.subarray(i, e));\n        }\n    }\n    else {\n        var opt = deo[lvl - 1];\n        var n = opt >>> 13, c = opt & 8191;\n        var msk_1 = (1 << plvl) - 1;\n        //    prev 2-byte val map    curr 2-byte val map\n        var prev = new u16(32768), head = new u16(msk_1 + 1);\n        var bs1_1 = Math.ceil(plvl / 3), bs2_1 = 2 * bs1_1;\n        var hsh = function (i) { return (dat[i] ^ (dat[i + 1] << bs1_1) ^ (dat[i + 2] << bs2_1)) & msk_1; };\n        // 24576 is an arbitrary number of maximum symbols per block\n        // 424 buffer for last block\n        var syms = new u32(25000);\n        // length/literal freq   distance freq\n        var lf = new u16(288), df = new u16(32);\n        //  l/lcnt  exbits  index  l/lind  waitdx  bitpos\n        var lc_1 = 0, eb = 0, i = 0, li = 0, wi = 0, bs = 0;\n        for (; i < s; ++i) {\n            // hash value\n            // deopt when i > s - 3 - at end, deopt acceptable\n            var hv = hsh(i);\n            // index mod 32768    previous index mod\n            var imod = i & 32767, pimod = head[hv];\n            prev[imod] = pimod;\n            head[hv] = imod;\n            // We always should modify head and prev, but only add symbols if\n            // this data is not yet processed (\"wait\" for wait index)\n            if (wi <= i) {\n                // bytes remaining\n                var rem = s - i;\n                if ((lc_1 > 7000 || li > 24576) && rem > 423) {\n                    pos = wblk(dat, w, 0, syms, lf, df, eb, li, bs, i - bs, pos);\n                    li = lc_1 = eb = 0, bs = i;\n                    for (var j = 0; j < 286; ++j)\n                        lf[j] = 0;\n                    for (var j = 0; j < 30; ++j)\n                        df[j] = 0;\n                }\n                //  len    dist   chain\n                var l = 2, d = 0, ch_1 = c, dif = (imod - pimod) & 32767;\n                if (rem > 2 && hv == hsh(i - dif)) {\n                    var maxn = Math.min(n, rem) - 1;\n                    var maxd = Math.min(32767, i);\n                    // max possible length\n                    // not capped at dif because decompressors implement \"rolling\" index population\n                    var ml = Math.min(258, rem);\n                    while (dif <= maxd && --ch_1 && imod != pimod) {\n                        if (dat[i + l] == dat[i + l - dif]) {\n                            var nl = 0;\n                            for (; nl < ml && dat[i + nl] == dat[i + nl - dif]; ++nl)\n                                ;\n                            if (nl > l) {\n                                l = nl, d = dif;\n                                // break out early when we reach \"nice\" (we are satisfied enough)\n                                if (nl > maxn)\n                                    break;\n                                // now, find the rarest 2-byte sequence within this\n                                // length of literals and search for that instead.\n                                // Much faster than just using the start\n                                var mmd = Math.min(dif, nl - 2);\n                                var md = 0;\n                                for (var j = 0; j < mmd; ++j) {\n                                    var ti = (i - dif + j + 32768) & 32767;\n                                    var pti = prev[ti];\n                                    var cd = (ti - pti + 32768) & 32767;\n                                    if (cd > md)\n                                        md = cd, pimod = ti;\n                                }\n                            }\n                        }\n                        // check the previous match\n                        imod = pimod, pimod = prev[imod];\n                        dif += (imod - pimod + 32768) & 32767;\n                    }\n                }\n                // d will be nonzero only when a match was found\n                if (d) {\n                    // store both dist and len data in one Uint32\n                    // Make sure this is recognized as a len/dist with 28th bit (2^28)\n                    syms[li++] = 268435456 | (revfl[l] << 18) | revfd[d];\n                    var lin = revfl[l] & 31, din = revfd[d] & 31;\n                    eb += fleb[lin] + fdeb[din];\n                    ++lf[257 + lin];\n                    ++df[din];\n                    wi = i + l;\n                    ++lc_1;\n                }\n                else {\n                    syms[li++] = dat[i];\n                    ++lf[dat[i]];\n                }\n            }\n        }\n        pos = wblk(dat, w, lst, syms, lf, df, eb, li, bs, i - bs, pos);\n        // this is the easiest way to avoid needing to maintain state\n        if (!lst && pos & 7)\n            pos = wfblk(w, pos + 1, et);\n    }\n    return slc(o, 0, pre + shft(pos) + post);\n};\n// CRC32 table\nvar crct = /*#__PURE__*/ (function () {\n    var t = new Int32Array(256);\n    for (var i = 0; i < 256; ++i) {\n        var c = i, k = 9;\n        while (--k)\n            c = ((c & 1) && -306674912) ^ (c >>> 1);\n        t[i] = c;\n    }\n    return t;\n})();\n// CRC32\nvar crc = function () {\n    var c = -1;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var cr = c;\n            for (var i = 0; i < d.length; ++i)\n                cr = crct[(cr & 255) ^ d[i]] ^ (cr >>> 8);\n            c = cr;\n        },\n        d: function () { return ~c; }\n    };\n};\n// Alder32\nvar adler = function () {\n    var a = 1, b = 0;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var n = a, m = b;\n            var l = d.length | 0;\n            for (var i = 0; i != l;) {\n                var e = Math.min(i + 2655, l);\n                for (; i < e; ++i)\n                    m += n += d[i];\n                n = (n & 65535) + 15 * (n >> 16), m = (m & 65535) + 15 * (m >> 16);\n            }\n            a = n, b = m;\n        },\n        d: function () {\n            a %= 65521, b %= 65521;\n            return (a & 255) << 24 | (a >>> 8) << 16 | (b & 255) << 8 | (b >>> 8);\n        }\n    };\n};\n;\n// deflate with opts\nvar dopt = function (dat, opt, pre, post, st) {\n    return dflt(dat, opt.level == null ? 6 : opt.level, opt.mem == null ? Math.ceil(Math.max(8, Math.min(13, Math.log(dat.length))) * 1.5) : (12 + opt.mem), pre, post, !st);\n};\n// Walmart object spread\nvar mrg = function (a, b) {\n    var o = {};\n    for (var k in a)\n        o[k] = a[k];\n    for (var k in b)\n        o[k] = b[k];\n    return o;\n};\n// worker clone\n// This is possibly the craziest part of the entire codebase, despite how simple it may seem.\n// The only parameter to this function is a closure that returns an array of variables outside of the function scope.\n// We're going to try to figure out the variable names used in the closure as strings because that is crucial for workerization.\n// We will return an object mapping of true variable name to value (basically, the current scope as a JS object).\n// The reason we can't just use the original variable names is minifiers mangling the toplevel scope.\n// This took me three weeks to figure out how to do.\nvar wcln = function (fn, fnStr, td) {\n    var dt = fn();\n    var st = fn.toString();\n    var ks = st.slice(st.indexOf('[') + 1, st.lastIndexOf(']')).replace(/\\s+/g, '').split(',');\n    for (var i = 0; i < dt.length; ++i) {\n        var v = dt[i], k = ks[i];\n        if (typeof v == 'function') {\n            fnStr += ';' + k + '=';\n            var st_1 = v.toString();\n            if (v.prototype) {\n                // for global objects\n                if (st_1.indexOf('[native code]') != -1) {\n                    var spInd = st_1.indexOf(' ', 8) + 1;\n                    fnStr += st_1.slice(spInd, st_1.indexOf('(', spInd));\n                }\n                else {\n                    fnStr += st_1;\n                    for (var t in v.prototype)\n                        fnStr += ';' + k + '.prototype.' + t + '=' + v.prototype[t].toString();\n                }\n            }\n            else\n                fnStr += st_1;\n        }\n        else\n            td[k] = v;\n    }\n    return [fnStr, td];\n};\nvar ch = [];\n// clone bufs\nvar cbfs = function (v) {\n    var tl = [];\n    for (var k in v) {\n        if (v[k].buffer) {\n            tl.push((v[k] = new v[k].constructor(v[k])).buffer);\n        }\n    }\n    return tl;\n};\n// use a worker to execute code\nvar wrkr = function (fns, init, id, cb) {\n    var _a;\n    if (!ch[id]) {\n        var fnStr = '', td_1 = {}, m = fns.length - 1;\n        for (var i = 0; i < m; ++i)\n            _a = wcln(fns[i], fnStr, td_1), fnStr = _a[0], td_1 = _a[1];\n        ch[id] = wcln(fns[m], fnStr, td_1);\n    }\n    var td = mrg({}, ch[id][1]);\n    return wk(ch[id][0] + ';onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage=' + init.toString() + '}', id, td, cbfs(td), cb);\n};\n// base async inflate fn\nvar bInflt = function () { return [u8, u16, u32, fleb, fdeb, clim, fl, fd, flrm, fdrm, rev, ec, hMap, max, bits, bits16, shft, slc, err, inflt, inflateSync, pbf, gu8]; };\nvar bDflt = function () { return [u8, u16, u32, fleb, fdeb, clim, revfl, revfd, flm, flt, fdm, fdt, rev, deo, et, hMap, wbits, wbits16, hTree, ln, lc, clen, wfblk, wblk, shft, slc, dflt, dopt, deflateSync, pbf]; };\n// gzip extra\nvar gze = function () { return [gzh, gzhl, wbytes, crc, crct]; };\n// gunzip extra\nvar guze = function () { return [gzs, gzl]; };\n// zlib extra\nvar zle = function () { return [zlh, wbytes, adler]; };\n// unzlib extra\nvar zule = function () { return [zlv]; };\n// post buf\nvar pbf = function (msg) { return postMessage(msg, [msg.buffer]); };\n// get u8\nvar gu8 = function (o) { return o && o.size && new u8(o.size); };\n// async helper\nvar cbify = function (dat, opts, fns, init, id, cb) {\n    var w = wrkr(fns, init, id, function (err, dat) {\n        w.terminate();\n        cb(err, dat);\n    });\n    w.postMessage([dat, opts], opts.consume ? [dat.buffer] : []);\n    return function () { w.terminate(); };\n};\n// auto stream\nvar astrm = function (strm) {\n    strm.ondata = function (dat, final) { return postMessage([dat, final], [dat.buffer]); };\n    return function (ev) { return strm.push(ev.data[0], ev.data[1]); };\n};\n// async stream attach\nvar astrmify = function (fns, strm, opts, init, id) {\n    var t;\n    var w = wrkr(fns, init, id, function (err, dat) {\n        if (err)\n            w.terminate(), strm.ondata.call(strm, err);\n        else {\n            if (dat[1])\n                w.terminate();\n            strm.ondata.call(strm, err, dat[0], dat[1]);\n        }\n    });\n    w.postMessage(opts);\n    strm.push = function (d, f) {\n        if (!strm.ondata)\n            err(5);\n        if (t)\n            strm.ondata(err(4, 0, 1), null, !!f);\n        w.postMessage([d, t = f], [d.buffer]);\n    };\n    strm.terminate = function () { w.terminate(); };\n};\n// read 2 bytes\nvar b2 = function (d, b) { return d[b] | (d[b + 1] << 8); };\n// read 4 bytes\nvar b4 = function (d, b) { return (d[b] | (d[b + 1] << 8) | (d[b + 2] << 16) | (d[b + 3] << 24)) >>> 0; };\nvar b8 = function (d, b) { return b4(d, b) + (b4(d, b + 4) * 4294967296); };\n// write bytes\nvar wbytes = function (d, b, v) {\n    for (; v; ++b)\n        d[b] = v, v >>>= 8;\n};\n// gzip header\nvar gzh = function (c, o) {\n    var fn = o.filename;\n    c[0] = 31, c[1] = 139, c[2] = 8, c[8] = o.level < 2 ? 4 : o.level == 9 ? 2 : 0, c[9] = 3; // assume Unix\n    if (o.mtime != 0)\n        wbytes(c, 4, Math.floor(new Date(o.mtime || Date.now()) / 1000));\n    if (fn) {\n        c[3] = 8;\n        for (var i = 0; i <= fn.length; ++i)\n            c[i + 10] = fn.charCodeAt(i);\n    }\n};\n// gzip footer: -8 to -4 = CRC, -4 to -0 is length\n// gzip start\nvar gzs = function (d) {\n    if (d[0] != 31 || d[1] != 139 || d[2] != 8)\n        err(6, 'invalid gzip data');\n    var flg = d[3];\n    var st = 10;\n    if (flg & 4)\n        st += d[10] | (d[11] << 8) + 2;\n    for (var zs = (flg >> 3 & 1) + (flg >> 4 & 1); zs > 0; zs -= !d[st++])\n        ;\n    return st + (flg & 2);\n};\n// gzip length\nvar gzl = function (d) {\n    var l = d.length;\n    return ((d[l - 4] | d[l - 3] << 8 | d[l - 2] << 16) | (d[l - 1] << 24)) >>> 0;\n};\n// gzip header length\nvar gzhl = function (o) { return 10 + ((o.filename && (o.filename.length + 1)) || 0); };\n// zlib header\nvar zlh = function (c, o) {\n    var lv = o.level, fl = lv == 0 ? 0 : lv < 6 ? 1 : lv == 9 ? 3 : 2;\n    c[0] = 120, c[1] = (fl << 6) | (fl ? (32 - 2 * fl) : 1);\n};\n// zlib valid\nvar zlv = function (d) {\n    if ((d[0] & 15) != 8 || (d[0] >>> 4) > 7 || ((d[0] << 8 | d[1]) % 31))\n        err(6, 'invalid zlib data');\n    if (d[1] & 32)\n        err(6, 'invalid zlib data: preset dictionaries not supported');\n};\nfunction AsyncCmpStrm(opts, cb) {\n    if (!cb && typeof opts == 'function')\n        cb = opts, opts = {};\n    this.ondata = cb;\n    return opts;\n}\n// zlib footer: -4 to -0 is Adler32\n/**\n * Streaming DEFLATE compression\n */\nvar Deflate = /*#__PURE__*/ (function () {\n    function Deflate(opts, cb) {\n        if (!cb && typeof opts == 'function')\n            cb = opts, opts = {};\n        this.ondata = cb;\n        this.o = opts || {};\n    }\n    Deflate.prototype.p = function (c, f) {\n        this.ondata(dopt(c, this.o, 0, 0, !f), f);\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Deflate.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        if (this.d)\n            err(4);\n        this.d = final;\n        this.p(chunk, final || false);\n    };\n    return Deflate;\n}());\nexport { Deflate };\n/**\n * Asynchronous streaming DEFLATE compression\n */\nvar AsyncDeflate = /*#__PURE__*/ (function () {\n    function AsyncDeflate(opts, cb) {\n        astrmify([\n            bDflt,\n            function () { return [astrm, Deflate]; }\n        ], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n            var strm = new Deflate(ev.data);\n            onmessage = astrm(strm);\n        }, 6);\n    }\n    return AsyncDeflate;\n}());\nexport { AsyncDeflate };\nexport function deflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bDflt,\n    ], function (ev) { return pbf(deflateSync(ev.data[0], ev.data[1])); }, 0, cb);\n}\n/**\n * Compresses data with DEFLATE without any wrapper\n * @param data The data to compress\n * @param opts The compression options\n * @returns The deflated version of the data\n */\nexport function deflateSync(data, opts) {\n    return dopt(data, opts || {}, 0, 0);\n}\n/**\n * Streaming DEFLATE decompression\n */\nvar Inflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates an inflation stream\n     * @param cb The callback to call whenever data is inflated\n     */\n    function Inflate(cb) {\n        this.s = {};\n        this.p = new u8(0);\n        this.ondata = cb;\n    }\n    Inflate.prototype.e = function (c) {\n        if (!this.ondata)\n            err(5);\n        if (this.d)\n            err(4);\n        var l = this.p.length;\n        var n = new u8(l + c.length);\n        n.set(this.p), n.set(c, l), this.p = n;\n    };\n    Inflate.prototype.c = function (final) {\n        this.d = this.s.i = final || false;\n        var bts = this.s.b;\n        var dt = inflt(this.p, this.o, this.s);\n        this.ondata(slc(dt, bts, this.s.b), this.d);\n        this.o = slc(dt, this.s.b - 32768), this.s.b = this.o.length;\n        this.p = slc(this.p, (this.s.p / 8) | 0), this.s.p &= 7;\n    };\n    /**\n     * Pushes a chunk to be inflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the final chunk\n     */\n    Inflate.prototype.push = function (chunk, final) {\n        this.e(chunk), this.c(final);\n    };\n    return Inflate;\n}());\nexport { Inflate };\n/**\n * Asynchronous streaming DEFLATE decompression\n */\nvar AsyncInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous inflation stream\n     * @param cb The callback to call whenever data is deflated\n     */\n    function AsyncInflate(cb) {\n        this.ondata = cb;\n        astrmify([\n            bInflt,\n            function () { return [astrm, Inflate]; }\n        ], this, 0, function () {\n            var strm = new Inflate();\n            onmessage = astrm(strm);\n        }, 7);\n    }\n    return AsyncInflate;\n}());\nexport { AsyncInflate };\nexport function inflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bInflt\n    ], function (ev) { return pbf(inflateSync(ev.data[0], gu8(ev.data[1]))); }, 1, cb);\n}\n/**\n * Expands DEFLATE data with no wrapper\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nexport function inflateSync(data, out) {\n    return inflt(data, out);\n}\n// before you yell at me for not just using extends, my reason is that TS inheritance is hard to workerize.\n/**\n * Streaming GZIP compression\n */\nvar Gzip = /*#__PURE__*/ (function () {\n    function Gzip(opts, cb) {\n        this.c = crc();\n        this.l = 0;\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be GZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gzip.prototype.push = function (chunk, final) {\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Gzip.prototype.p = function (c, f) {\n        this.c.p(c);\n        this.l += c.length;\n        var raw = dopt(c, this.o, this.v && gzhl(this.o), f && 8, !f);\n        if (this.v)\n            gzh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 8, this.c.d()), wbytes(raw, raw.length - 4, this.l);\n        this.ondata(raw, f);\n    };\n    return Gzip;\n}());\nexport { Gzip };\n/**\n * Asynchronous streaming GZIP compression\n */\nvar AsyncGzip = /*#__PURE__*/ (function () {\n    function AsyncGzip(opts, cb) {\n        astrmify([\n            bDflt,\n            gze,\n            function () { return [astrm, Deflate, Gzip]; }\n        ], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n            var strm = new Gzip(ev.data);\n            onmessage = astrm(strm);\n        }, 8);\n    }\n    return AsyncGzip;\n}());\nexport { AsyncGzip };\nexport function gzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bDflt,\n        gze,\n        function () { return [gzipSync]; }\n    ], function (ev) { return pbf(gzipSync(ev.data[0], ev.data[1])); }, 2, cb);\n}\n/**\n * Compresses data with GZIP\n * @param data The data to compress\n * @param opts The compression options\n * @returns The gzipped version of the data\n */\nexport function gzipSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var c = crc(), l = data.length;\n    c.p(data);\n    var d = dopt(data, opts, gzhl(opts), 8), s = d.length;\n    return gzh(d, opts), wbytes(d, s - 8, c.d()), wbytes(d, s - 4, l), d;\n}\n/**\n * Streaming GZIP decompression\n */\nvar Gunzip = /*#__PURE__*/ (function () {\n    /**\n     * Creates a GUNZIP stream\n     * @param cb The callback to call whenever data is inflated\n     */\n    function Gunzip(cb) {\n        this.v = 1;\n        Inflate.call(this, cb);\n    }\n    /**\n     * Pushes a chunk to be GUNZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gunzip.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        if (this.v) {\n            var s = this.p.length > 3 ? gzs(this.p) : 4;\n            if (s >= this.p.length && !final)\n                return;\n            this.p = this.p.subarray(s), this.v = 0;\n        }\n        if (final) {\n            if (this.p.length < 8)\n                err(6, 'invalid gzip data');\n            this.p = this.p.subarray(0, -8);\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n    };\n    return Gunzip;\n}());\nexport { Gunzip };\n/**\n * Asynchronous streaming GZIP decompression\n */\nvar AsyncGunzip = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous GUNZIP stream\n     * @param cb The callback to call whenever data is deflated\n     */\n    function AsyncGunzip(cb) {\n        this.ondata = cb;\n        astrmify([\n            bInflt,\n            guze,\n            function () { return [astrm, Inflate, Gunzip]; }\n        ], this, 0, function () {\n            var strm = new Gunzip();\n            onmessage = astrm(strm);\n        }, 9);\n    }\n    return AsyncGunzip;\n}());\nexport { AsyncGunzip };\nexport function gunzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bInflt,\n        guze,\n        function () { return [gunzipSync]; }\n    ], function (ev) { return pbf(gunzipSync(ev.data[0])); }, 3, cb);\n}\n/**\n * Expands GZIP data\n * @param data The data to decompress\n * @param out Where to write the data. GZIP already encodes the output size, so providing this doesn't save memory.\n * @returns The decompressed version of the data\n */\nexport function gunzipSync(data, out) {\n    return inflt(data.subarray(gzs(data), -8), out || new u8(gzl(data)));\n}\n/**\n * Streaming Zlib compression\n */\nvar Zlib = /*#__PURE__*/ (function () {\n    function Zlib(opts, cb) {\n        this.c = adler();\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be zlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Zlib.prototype.push = function (chunk, final) {\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Zlib.prototype.p = function (c, f) {\n        this.c.p(c);\n        var raw = dopt(c, this.o, this.v && 2, f && 4, !f);\n        if (this.v)\n            zlh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 4, this.c.d());\n        this.ondata(raw, f);\n    };\n    return Zlib;\n}());\nexport { Zlib };\n/**\n * Asynchronous streaming Zlib compression\n */\nvar AsyncZlib = /*#__PURE__*/ (function () {\n    function AsyncZlib(opts, cb) {\n        astrmify([\n            bDflt,\n            zle,\n            function () { return [astrm, Deflate, Zlib]; }\n        ], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n            var strm = new Zlib(ev.data);\n            onmessage = astrm(strm);\n        }, 10);\n    }\n    return AsyncZlib;\n}());\nexport { AsyncZlib };\nexport function zlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bDflt,\n        zle,\n        function () { return [zlibSync]; }\n    ], function (ev) { return pbf(zlibSync(ev.data[0], ev.data[1])); }, 4, cb);\n}\n/**\n * Compress data with Zlib\n * @param data The data to compress\n * @param opts The compression options\n * @returns The zlib-compressed version of the data\n */\nexport function zlibSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var a = adler();\n    a.p(data);\n    var d = dopt(data, opts, 2, 4);\n    return zlh(d, opts), wbytes(d, d.length - 4, a.d()), d;\n}\n/**\n * Streaming Zlib decompression\n */\nvar Unzlib = /*#__PURE__*/ (function () {\n    /**\n     * Creates a Zlib decompression stream\n     * @param cb The callback to call whenever data is inflated\n     */\n    function Unzlib(cb) {\n        this.v = 1;\n        Inflate.call(this, cb);\n    }\n    /**\n     * Pushes a chunk to be unzlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Unzlib.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        if (this.v) {\n            if (this.p.length < 2 && !final)\n                return;\n            this.p = this.p.subarray(2), this.v = 0;\n        }\n        if (final) {\n            if (this.p.length < 4)\n                err(6, 'invalid zlib data');\n            this.p = this.p.subarray(0, -4);\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n    };\n    return Unzlib;\n}());\nexport { Unzlib };\n/**\n * Asynchronous streaming Zlib decompression\n */\nvar AsyncUnzlib = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous Zlib decompression stream\n     * @param cb The callback to call whenever data is deflated\n     */\n    function AsyncUnzlib(cb) {\n        this.ondata = cb;\n        astrmify([\n            bInflt,\n            zule,\n            function () { return [astrm, Inflate, Unzlib]; }\n        ], this, 0, function () {\n            var strm = new Unzlib();\n            onmessage = astrm(strm);\n        }, 11);\n    }\n    return AsyncUnzlib;\n}());\nexport { AsyncUnzlib };\nexport function unzlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bInflt,\n        zule,\n        function () { return [unzlibSync]; }\n    ], function (ev) { return pbf(unzlibSync(ev.data[0], gu8(ev.data[1]))); }, 5, cb);\n}\n/**\n * Expands Zlib data\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nexport function unzlibSync(data, out) {\n    return inflt((zlv(data), data.subarray(2, -4)), out);\n}\n// Default algorithm for compression (used because having a known output size allows faster decompression)\nexport { gzip as compress, AsyncGzip as AsyncCompress };\n// Default algorithm for compression (used because having a known output size allows faster decompression)\nexport { gzipSync as compressSync, Gzip as Compress };\n/**\n * Streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar Decompress = /*#__PURE__*/ (function () {\n    /**\n     * Creates a decompression stream\n     * @param cb The callback to call whenever data is decompressed\n     */\n    function Decompress(cb) {\n        this.G = Gunzip;\n        this.I = Inflate;\n        this.Z = Unzlib;\n        this.ondata = cb;\n    }\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Decompress.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        if (!this.s) {\n            if (this.p && this.p.length) {\n                var n = new u8(this.p.length + chunk.length);\n                n.set(this.p), n.set(chunk, this.p.length);\n            }\n            else\n                this.p = chunk;\n            if (this.p.length > 2) {\n                var _this_1 = this;\n                var cb = function () { _this_1.ondata.apply(_this_1, arguments); };\n                this.s = (this.p[0] == 31 && this.p[1] == 139 && this.p[2] == 8)\n                    ? new this.G(cb)\n                    : ((this.p[0] & 15) != 8 || (this.p[0] >> 4) > 7 || ((this.p[0] << 8 | this.p[1]) % 31))\n                        ? new this.I(cb)\n                        : new this.Z(cb);\n                this.s.push(this.p, final);\n                this.p = null;\n            }\n        }\n        else\n            this.s.push(chunk, final);\n    };\n    return Decompress;\n}());\nexport { Decompress };\n/**\n * Asynchronous streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar AsyncDecompress = /*#__PURE__*/ (function () {\n    /**\n   * Creates an asynchronous decompression stream\n   * @param cb The callback to call whenever data is decompressed\n   */\n    function AsyncDecompress(cb) {\n        this.G = AsyncGunzip;\n        this.I = AsyncInflate;\n        this.Z = AsyncUnzlib;\n        this.ondata = cb;\n    }\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    AsyncDecompress.prototype.push = function (chunk, final) {\n        Decompress.prototype.push.call(this, chunk, final);\n    };\n    return AsyncDecompress;\n}());\nexport { AsyncDecompress };\nexport function decompress(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzip(data, opts, cb)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflate(data, opts, cb)\n            : unzlib(data, opts, cb);\n}\n/**\n * Expands compressed GZIP, Zlib, or raw DEFLATE data, automatically detecting the format\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nexport function decompressSync(data, out) {\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzipSync(data, out)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflateSync(data, out)\n            : unzlibSync(data, out);\n}\n// flatten a directory structure\nvar fltn = function (d, p, t, o) {\n    for (var k in d) {\n        var val = d[k], n = p + k, op = o;\n        if (Array.isArray(val))\n            op = mrg(o, val[1]), val = val[0];\n        if (val instanceof u8)\n            t[n] = [val, op];\n        else {\n            t[n += '/'] = [new u8(0), op];\n            fltn(val, n, t, o);\n        }\n    }\n};\n// text encoder\nvar te = typeof TextEncoder != 'undefined' && /*#__PURE__*/ new TextEncoder();\n// text decoder\nvar td = typeof TextDecoder != 'undefined' && /*#__PURE__*/ new TextDecoder();\n// text decoder stream\nvar tds = 0;\ntry {\n    td.decode(et, { stream: true });\n    tds = 1;\n}\ncatch (e) { }\n// decode UTF8\nvar dutf8 = function (d) {\n    for (var r = '', i = 0;;) {\n        var c = d[i++];\n        var eb = (c > 127) + (c > 223) + (c > 239);\n        if (i + eb > d.length)\n            return [r, slc(d, i - 1)];\n        if (!eb)\n            r += String.fromCharCode(c);\n        else if (eb == 3) {\n            c = ((c & 15) << 18 | (d[i++] & 63) << 12 | (d[i++] & 63) << 6 | (d[i++] & 63)) - 65536,\n                r += String.fromCharCode(55296 | (c >> 10), 56320 | (c & 1023));\n        }\n        else if (eb & 1)\n            r += String.fromCharCode((c & 31) << 6 | (d[i++] & 63));\n        else\n            r += String.fromCharCode((c & 15) << 12 | (d[i++] & 63) << 6 | (d[i++] & 63));\n    }\n};\n/**\n * Streaming UTF-8 decoding\n */\nvar DecodeUTF8 = /*#__PURE__*/ (function () {\n    /**\n     * Creates a UTF-8 decoding stream\n     * @param cb The callback to call whenever data is decoded\n     */\n    function DecodeUTF8(cb) {\n        this.ondata = cb;\n        if (tds)\n            this.t = new TextDecoder();\n        else\n            this.p = et;\n    }\n    /**\n     * Pushes a chunk to be decoded from UTF-8 binary\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    DecodeUTF8.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        final = !!final;\n        if (this.t) {\n            this.ondata(this.t.decode(chunk, { stream: true }), final);\n            if (final) {\n                if (this.t.decode().length)\n                    err(8);\n                this.t = null;\n            }\n            return;\n        }\n        if (!this.p)\n            err(4);\n        var dat = new u8(this.p.length + chunk.length);\n        dat.set(this.p);\n        dat.set(chunk, this.p.length);\n        var _a = dutf8(dat), ch = _a[0], np = _a[1];\n        if (final) {\n            if (np.length)\n                err(8);\n            this.p = null;\n        }\n        else\n            this.p = np;\n        this.ondata(ch, final);\n    };\n    return DecodeUTF8;\n}());\nexport { DecodeUTF8 };\n/**\n * Streaming UTF-8 encoding\n */\nvar EncodeUTF8 = /*#__PURE__*/ (function () {\n    /**\n     * Creates a UTF-8 decoding stream\n     * @param cb The callback to call whenever data is encoded\n     */\n    function EncodeUTF8(cb) {\n        this.ondata = cb;\n    }\n    /**\n     * Pushes a chunk to be encoded to UTF-8\n     * @param chunk The string data to push\n     * @param final Whether this is the last chunk\n     */\n    EncodeUTF8.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        if (this.d)\n            err(4);\n        this.ondata(strToU8(chunk), this.d = final || false);\n    };\n    return EncodeUTF8;\n}());\nexport { EncodeUTF8 };\n/**\n * Converts a string into a Uint8Array for use with compression/decompression methods\n * @param str The string to encode\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless decoding a binary string.\n * @returns The string encoded in UTF-8/Latin-1 binary\n */\nexport function strToU8(str, latin1) {\n    if (latin1) {\n        var ar_1 = new u8(str.length);\n        for (var i = 0; i < str.length; ++i)\n            ar_1[i] = str.charCodeAt(i);\n        return ar_1;\n    }\n    if (te)\n        return te.encode(str);\n    var l = str.length;\n    var ar = new u8(str.length + (str.length >> 1));\n    var ai = 0;\n    var w = function (v) { ar[ai++] = v; };\n    for (var i = 0; i < l; ++i) {\n        if (ai + 5 > ar.length) {\n            var n = new u8(ai + 8 + ((l - i) << 1));\n            n.set(ar);\n            ar = n;\n        }\n        var c = str.charCodeAt(i);\n        if (c < 128 || latin1)\n            w(c);\n        else if (c < 2048)\n            w(192 | (c >> 6)), w(128 | (c & 63));\n        else if (c > 55295 && c < 57344)\n            c = 65536 + (c & 1023 << 10) | (str.charCodeAt(++i) & 1023),\n                w(240 | (c >> 18)), w(128 | ((c >> 12) & 63)), w(128 | ((c >> 6) & 63)), w(128 | (c & 63));\n        else\n            w(224 | (c >> 12)), w(128 | ((c >> 6) & 63)), w(128 | (c & 63));\n    }\n    return slc(ar, 0, ai);\n}\n/**\n * Converts a Uint8Array to a string\n * @param dat The data to decode to string\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless encoding to binary string.\n * @returns The original UTF-8/Latin-1 string\n */\nexport function strFromU8(dat, latin1) {\n    if (latin1) {\n        var r = '';\n        for (var i = 0; i < dat.length; i += 16384)\n            r += String.fromCharCode.apply(null, dat.subarray(i, i + 16384));\n        return r;\n    }\n    else if (td)\n        return td.decode(dat);\n    else {\n        var _a = dutf8(dat), out = _a[0], ext = _a[1];\n        if (ext.length)\n            err(8);\n        return out;\n    }\n}\n;\n// deflate bit flag\nvar dbf = function (l) { return l == 1 ? 3 : l < 6 ? 2 : l == 9 ? 1 : 0; };\n// skip local zip header\nvar slzh = function (d, b) { return b + 30 + b2(d, b + 26) + b2(d, b + 28); };\n// read zip header\nvar zh = function (d, b, z) {\n    var fnl = b2(d, b + 28), fn = strFromU8(d.subarray(b + 46, b + 46 + fnl), !(b2(d, b + 8) & 2048)), es = b + 46 + fnl, bs = b4(d, b + 20);\n    var _a = z && bs == 4294967295 ? z64e(d, es) : [bs, b4(d, b + 24), b4(d, b + 42)], sc = _a[0], su = _a[1], off = _a[2];\n    return [b2(d, b + 10), sc, su, fn, es + b2(d, b + 30) + b2(d, b + 32), off];\n};\n// read zip64 extra field\nvar z64e = function (d, b) {\n    for (; b2(d, b) != 1; b += 4 + b2(d, b + 2))\n        ;\n    return [b8(d, b + 12), b8(d, b + 4), b8(d, b + 20)];\n};\n// extra field length\nvar exfl = function (ex) {\n    var le = 0;\n    if (ex) {\n        for (var k in ex) {\n            var l = ex[k].length;\n            if (l > 65535)\n                err(9);\n            le += l + 4;\n        }\n    }\n    return le;\n};\n// write zip header\nvar wzh = function (d, b, f, fn, u, c, ce, co) {\n    var fl = fn.length, ex = f.extra, col = co && co.length;\n    var exl = exfl(ex);\n    wbytes(d, b, ce != null ? 0x2014B50 : 0x4034B50), b += 4;\n    if (ce != null)\n        d[b++] = 20, d[b++] = f.os;\n    d[b] = 20, b += 2; // spec compliance? what's that?\n    d[b++] = (f.flag << 1) | (c == null && 8), d[b++] = u && 8;\n    d[b++] = f.compression & 255, d[b++] = f.compression >> 8;\n    var dt = new Date(f.mtime == null ? Date.now() : f.mtime), y = dt.getFullYear() - 1980;\n    if (y < 0 || y > 119)\n        err(10);\n    wbytes(d, b, (y << 25) | ((dt.getMonth() + 1) << 21) | (dt.getDate() << 16) | (dt.getHours() << 11) | (dt.getMinutes() << 5) | (dt.getSeconds() >>> 1)), b += 4;\n    if (c != null) {\n        wbytes(d, b, f.crc);\n        wbytes(d, b + 4, c);\n        wbytes(d, b + 8, f.size);\n    }\n    wbytes(d, b + 12, fl);\n    wbytes(d, b + 14, exl), b += 16;\n    if (ce != null) {\n        wbytes(d, b, col);\n        wbytes(d, b + 6, f.attrs);\n        wbytes(d, b + 10, ce), b += 14;\n    }\n    d.set(fn, b);\n    b += fl;\n    if (exl) {\n        for (var k in ex) {\n            var exf = ex[k], l = exf.length;\n            wbytes(d, b, +k);\n            wbytes(d, b + 2, l);\n            d.set(exf, b + 4), b += 4 + l;\n        }\n    }\n    if (col)\n        d.set(co, b), b += col;\n    return b;\n};\n// write zip footer (end of central directory)\nvar wzf = function (o, b, c, d, e) {\n    wbytes(o, b, 0x6054B50); // skip disk\n    wbytes(o, b + 8, c);\n    wbytes(o, b + 10, c);\n    wbytes(o, b + 12, d);\n    wbytes(o, b + 16, e);\n};\n/**\n * A pass-through stream to keep data uncompressed in a ZIP archive.\n */\nvar ZipPassThrough = /*#__PURE__*/ (function () {\n    /**\n     * Creates a pass-through stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     */\n    function ZipPassThrough(filename) {\n        this.filename = filename;\n        this.c = crc();\n        this.size = 0;\n        this.compression = 0;\n    }\n    /**\n     * Processes a chunk and pushes to the output stream. You can override this\n     * method in a subclass for custom behavior, but by default this passes\n     * the data through. You must call this.ondata(err, chunk, final) at some\n     * point in this method.\n     * @param chunk The chunk to process\n     * @param final Whether this is the last chunk\n     */\n    ZipPassThrough.prototype.process = function (chunk, final) {\n        this.ondata(null, chunk, final);\n    };\n    /**\n     * Pushes a chunk to be added. If you are subclassing this with a custom\n     * compression algorithm, note that you must push data from the source\n     * file only, pre-compression.\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    ZipPassThrough.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        this.c.p(chunk);\n        this.size += chunk.length;\n        if (final)\n            this.crc = this.c.d();\n        this.process(chunk, final || false);\n    };\n    return ZipPassThrough;\n}());\nexport { ZipPassThrough };\n// I don't extend because TypeScript extension adds 1kB of runtime bloat\n/**\n * Streaming DEFLATE compression for ZIP archives. Prefer using AsyncZipDeflate\n * for better performance\n */\nvar ZipDeflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     * @param opts The compression options\n     */\n    function ZipDeflate(filename, opts) {\n        var _this_1 = this;\n        if (!opts)\n            opts = {};\n        ZipPassThrough.call(this, filename);\n        this.d = new Deflate(opts, function (dat, final) {\n            _this_1.ondata(null, dat, final);\n        });\n        this.compression = 8;\n        this.flag = dbf(opts.level);\n    }\n    ZipDeflate.prototype.process = function (chunk, final) {\n        try {\n            this.d.push(chunk, final);\n        }\n        catch (e) {\n            this.ondata(e, null, final);\n        }\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    ZipDeflate.prototype.push = function (chunk, final) {\n        ZipPassThrough.prototype.push.call(this, chunk, final);\n    };\n    return ZipDeflate;\n}());\nexport { ZipDeflate };\n/**\n * Asynchronous streaming DEFLATE compression for ZIP archives\n */\nvar AsyncZipDeflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     * @param opts The compression options\n     */\n    function AsyncZipDeflate(filename, opts) {\n        var _this_1 = this;\n        if (!opts)\n            opts = {};\n        ZipPassThrough.call(this, filename);\n        this.d = new AsyncDeflate(opts, function (err, dat, final) {\n            _this_1.ondata(err, dat, final);\n        });\n        this.compression = 8;\n        this.flag = dbf(opts.level);\n        this.terminate = this.d.terminate;\n    }\n    AsyncZipDeflate.prototype.process = function (chunk, final) {\n        this.d.push(chunk, final);\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    AsyncZipDeflate.prototype.push = function (chunk, final) {\n        ZipPassThrough.prototype.push.call(this, chunk, final);\n    };\n    return AsyncZipDeflate;\n}());\nexport { AsyncZipDeflate };\n// TODO: Better tree shaking\n/**\n * A zippable archive to which files can incrementally be added\n */\nvar Zip = /*#__PURE__*/ (function () {\n    /**\n     * Creates an empty ZIP archive to which files can be added\n     * @param cb The callback to call whenever data for the generated ZIP archive\n     *           is available\n     */\n    function Zip(cb) {\n        this.ondata = cb;\n        this.u = [];\n        this.d = 1;\n    }\n    /**\n     * Adds a file to the ZIP archive\n     * @param file The file stream to add\n     */\n    Zip.prototype.add = function (file) {\n        var _this_1 = this;\n        if (!this.ondata)\n            err(5);\n        // finishing or finished\n        if (this.d & 2)\n            this.ondata(err(4 + (this.d & 1) * 8, 0, 1), null, false);\n        else {\n            var f = strToU8(file.filename), fl_1 = f.length;\n            var com = file.comment, o = com && strToU8(com);\n            var u = fl_1 != file.filename.length || (o && (com.length != o.length));\n            var hl_1 = fl_1 + exfl(file.extra) + 30;\n            if (fl_1 > 65535)\n                this.ondata(err(11, 0, 1), null, false);\n            var header = new u8(hl_1);\n            wzh(header, 0, file, f, u);\n            var chks_1 = [header];\n            var pAll_1 = function () {\n                for (var _i = 0, chks_2 = chks_1; _i < chks_2.length; _i++) {\n                    var chk = chks_2[_i];\n                    _this_1.ondata(null, chk, false);\n                }\n                chks_1 = [];\n            };\n            var tr_1 = this.d;\n            this.d = 0;\n            var ind_1 = this.u.length;\n            var uf_1 = mrg(file, {\n                f: f,\n                u: u,\n                o: o,\n                t: function () {\n                    if (file.terminate)\n                        file.terminate();\n                },\n                r: function () {\n                    pAll_1();\n                    if (tr_1) {\n                        var nxt = _this_1.u[ind_1 + 1];\n                        if (nxt)\n                            nxt.r();\n                        else\n                            _this_1.d = 1;\n                    }\n                    tr_1 = 1;\n                }\n            });\n            var cl_1 = 0;\n            file.ondata = function (err, dat, final) {\n                if (err) {\n                    _this_1.ondata(err, dat, final);\n                    _this_1.terminate();\n                }\n                else {\n                    cl_1 += dat.length;\n                    chks_1.push(dat);\n                    if (final) {\n                        var dd = new u8(16);\n                        wbytes(dd, 0, 0x8074B50);\n                        wbytes(dd, 4, file.crc);\n                        wbytes(dd, 8, cl_1);\n                        wbytes(dd, 12, file.size);\n                        chks_1.push(dd);\n                        uf_1.c = cl_1, uf_1.b = hl_1 + cl_1 + 16, uf_1.crc = file.crc, uf_1.size = file.size;\n                        if (tr_1)\n                            uf_1.r();\n                        tr_1 = 1;\n                    }\n                    else if (tr_1)\n                        pAll_1();\n                }\n            };\n            this.u.push(uf_1);\n        }\n    };\n    /**\n     * Ends the process of adding files and prepares to emit the final chunks.\n     * This *must* be called after adding all desired files for the resulting\n     * ZIP file to work properly.\n     */\n    Zip.prototype.end = function () {\n        var _this_1 = this;\n        if (this.d & 2) {\n            this.ondata(err(4 + (this.d & 1) * 8, 0, 1), null, true);\n            return;\n        }\n        if (this.d)\n            this.e();\n        else\n            this.u.push({\n                r: function () {\n                    if (!(_this_1.d & 1))\n                        return;\n                    _this_1.u.splice(-1, 1);\n                    _this_1.e();\n                },\n                t: function () { }\n            });\n        this.d = 3;\n    };\n    Zip.prototype.e = function () {\n        var bt = 0, l = 0, tl = 0;\n        for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\n            var f = _a[_i];\n            tl += 46 + f.f.length + exfl(f.extra) + (f.o ? f.o.length : 0);\n        }\n        var out = new u8(tl + 22);\n        for (var _b = 0, _c = this.u; _b < _c.length; _b++) {\n            var f = _c[_b];\n            wzh(out, bt, f, f.f, f.u, f.c, l, f.o);\n            bt += 46 + f.f.length + exfl(f.extra) + (f.o ? f.o.length : 0), l += f.b;\n        }\n        wzf(out, bt, this.u.length, tl, l);\n        this.ondata(null, out, true);\n        this.d = 2;\n    };\n    /**\n     * A method to terminate any internal workers used by the stream. Subsequent\n     * calls to add() will fail.\n     */\n    Zip.prototype.terminate = function () {\n        for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\n            var f = _a[_i];\n            f.t();\n        }\n        this.d = 2;\n    };\n    return Zip;\n}());\nexport { Zip };\nexport function zip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    var r = {};\n    fltn(data, '', r, opts);\n    var k = Object.keys(r);\n    var lft = k.length, o = 0, tot = 0;\n    var slft = lft, files = new Array(lft);\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var cbd = function (a, b) {\n        mt(function () { cb(a, b); });\n    };\n    mt(function () { cbd = cb; });\n    var cbf = function () {\n        var out = new u8(tot + 22), oe = o, cdl = tot - o;\n        tot = 0;\n        for (var i = 0; i < slft; ++i) {\n            var f = files[i];\n            try {\n                var l = f.c.length;\n                wzh(out, tot, f, f.f, f.u, l);\n                var badd = 30 + f.f.length + exfl(f.extra);\n                var loc = tot + badd;\n                out.set(f.c, loc);\n                wzh(out, o, f, f.f, f.u, l, tot, f.m), o += 16 + badd + (f.m ? f.m.length : 0), tot = loc + l;\n            }\n            catch (e) {\n                return cbd(e, null);\n            }\n        }\n        wzf(out, o, files.length, cdl, oe);\n        cbd(null, out);\n    };\n    if (!lft)\n        cbf();\n    var _loop_1 = function (i) {\n        var fn = k[i];\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var c = crc(), size = file.length;\n        c.p(file);\n        var f = strToU8(fn), s = f.length;\n        var com = p.comment, m = com && strToU8(com), ms = m && m.length;\n        var exl = exfl(p.extra);\n        var compression = p.level == 0 ? 0 : 8;\n        var cbl = function (e, d) {\n            if (e) {\n                tAll();\n                cbd(e, null);\n            }\n            else {\n                var l = d.length;\n                files[i] = mrg(p, {\n                    size: size,\n                    crc: c.d(),\n                    c: d,\n                    f: f,\n                    m: m,\n                    u: s != fn.length || (m && (com.length != ms)),\n                    compression: compression\n                });\n                o += 30 + s + exl + l;\n                tot += 76 + 2 * (s + exl) + (ms || 0) + l;\n                if (!--lft)\n                    cbf();\n            }\n        };\n        if (s > 65535)\n            cbl(err(11, 0, 1), null);\n        if (!compression)\n            cbl(null, file);\n        else if (size < 160000) {\n            try {\n                cbl(null, deflateSync(file, p));\n            }\n            catch (e) {\n                cbl(e, null);\n            }\n        }\n        else\n            term.push(deflate(file, p, cbl));\n    };\n    // Cannot use lft because it can decrease\n    for (var i = 0; i < slft; ++i) {\n        _loop_1(i);\n    }\n    return tAll;\n}\n/**\n * Synchronously creates a ZIP file. Prefer using `zip` for better performance\n * with more than one file.\n * @param data The directory structure for the ZIP archive\n * @param opts The main options, merged with per-file options\n * @returns The generated ZIP archive\n */\nexport function zipSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var r = {};\n    var files = [];\n    fltn(data, '', r, opts);\n    var o = 0;\n    var tot = 0;\n    for (var fn in r) {\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var compression = p.level == 0 ? 0 : 8;\n        var f = strToU8(fn), s = f.length;\n        var com = p.comment, m = com && strToU8(com), ms = m && m.length;\n        var exl = exfl(p.extra);\n        if (s > 65535)\n            err(11);\n        var d = compression ? deflateSync(file, p) : file, l = d.length;\n        var c = crc();\n        c.p(file);\n        files.push(mrg(p, {\n            size: file.length,\n            crc: c.d(),\n            c: d,\n            f: f,\n            m: m,\n            u: s != fn.length || (m && (com.length != ms)),\n            o: o,\n            compression: compression\n        }));\n        o += 30 + s + exl + l;\n        tot += 76 + 2 * (s + exl) + (ms || 0) + l;\n    }\n    var out = new u8(tot + 22), oe = o, cdl = tot - o;\n    for (var i = 0; i < files.length; ++i) {\n        var f = files[i];\n        wzh(out, f.o, f, f.f, f.u, f.c.length);\n        var badd = 30 + f.f.length + exfl(f.extra);\n        out.set(f.c, f.o + badd);\n        wzh(out, o, f, f.f, f.u, f.c.length, f.o, f.m), o += 16 + badd + (f.m ? f.m.length : 0);\n    }\n    wzf(out, o, files.length, cdl, oe);\n    return out;\n}\n/**\n * Streaming pass-through decompression for ZIP archives\n */\nvar UnzipPassThrough = /*#__PURE__*/ (function () {\n    function UnzipPassThrough() {\n    }\n    UnzipPassThrough.prototype.push = function (data, final) {\n        this.ondata(null, data, final);\n    };\n    UnzipPassThrough.compression = 0;\n    return UnzipPassThrough;\n}());\nexport { UnzipPassThrough };\n/**\n * Streaming DEFLATE decompression for ZIP archives. Prefer AsyncZipInflate for\n * better performance.\n */\nvar UnzipInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE decompression that can be used in ZIP archives\n     */\n    function UnzipInflate() {\n        var _this_1 = this;\n        this.i = new Inflate(function (dat, final) {\n            _this_1.ondata(null, dat, final);\n        });\n    }\n    UnzipInflate.prototype.push = function (data, final) {\n        try {\n            this.i.push(data, final);\n        }\n        catch (e) {\n            this.ondata(e, null, final);\n        }\n    };\n    UnzipInflate.compression = 8;\n    return UnzipInflate;\n}());\nexport { UnzipInflate };\n/**\n * Asynchronous streaming DEFLATE decompression for ZIP archives\n */\nvar AsyncUnzipInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE decompression that can be used in ZIP archives\n     */\n    function AsyncUnzipInflate(_, sz) {\n        var _this_1 = this;\n        if (sz < 320000) {\n            this.i = new Inflate(function (dat, final) {\n                _this_1.ondata(null, dat, final);\n            });\n        }\n        else {\n            this.i = new AsyncInflate(function (err, dat, final) {\n                _this_1.ondata(err, dat, final);\n            });\n            this.terminate = this.i.terminate;\n        }\n    }\n    AsyncUnzipInflate.prototype.push = function (data, final) {\n        if (this.i.terminate)\n            data = slc(data, 0);\n        this.i.push(data, final);\n    };\n    AsyncUnzipInflate.compression = 8;\n    return AsyncUnzipInflate;\n}());\nexport { AsyncUnzipInflate };\n/**\n * A ZIP archive decompression stream that emits files as they are discovered\n */\nvar Unzip = /*#__PURE__*/ (function () {\n    /**\n     * Creates a ZIP decompression stream\n     * @param cb The callback to call whenever a file in the ZIP archive is found\n     */\n    function Unzip(cb) {\n        this.onfile = cb;\n        this.k = [];\n        this.o = {\n            0: UnzipPassThrough\n        };\n        this.p = et;\n    }\n    /**\n     * Pushes a chunk to be unzipped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Unzip.prototype.push = function (chunk, final) {\n        var _this_1 = this;\n        if (!this.onfile)\n            err(5);\n        if (!this.p)\n            err(4);\n        if (this.c > 0) {\n            var len = Math.min(this.c, chunk.length);\n            var toAdd = chunk.subarray(0, len);\n            this.c -= len;\n            if (this.d)\n                this.d.push(toAdd, !this.c);\n            else\n                this.k[0].push(toAdd);\n            chunk = chunk.subarray(len);\n            if (chunk.length)\n                return this.push(chunk, final);\n        }\n        else {\n            var f = 0, i = 0, is = void 0, buf = void 0;\n            if (!this.p.length)\n                buf = chunk;\n            else if (!chunk.length)\n                buf = this.p;\n            else {\n                buf = new u8(this.p.length + chunk.length);\n                buf.set(this.p), buf.set(chunk, this.p.length);\n            }\n            var l = buf.length, oc = this.c, add = oc && this.d;\n            var _loop_2 = function () {\n                var _a;\n                var sig = b4(buf, i);\n                if (sig == 0x4034B50) {\n                    f = 1, is = i;\n                    this_1.d = null;\n                    this_1.c = 0;\n                    var bf = b2(buf, i + 6), cmp_1 = b2(buf, i + 8), u = bf & 2048, dd = bf & 8, fnl = b2(buf, i + 26), es = b2(buf, i + 28);\n                    if (l > i + 30 + fnl + es) {\n                        var chks_3 = [];\n                        this_1.k.unshift(chks_3);\n                        f = 2;\n                        var sc_1 = b4(buf, i + 18), su_1 = b4(buf, i + 22);\n                        var fn_1 = strFromU8(buf.subarray(i + 30, i += 30 + fnl), !u);\n                        if (sc_1 == 4294967295) {\n                            _a = dd ? [-2] : z64e(buf, i), sc_1 = _a[0], su_1 = _a[1];\n                        }\n                        else if (dd)\n                            sc_1 = -1;\n                        i += es;\n                        this_1.c = sc_1;\n                        var d_1;\n                        var file_1 = {\n                            name: fn_1,\n                            compression: cmp_1,\n                            start: function () {\n                                if (!file_1.ondata)\n                                    err(5);\n                                if (!sc_1)\n                                    file_1.ondata(null, et, true);\n                                else {\n                                    var ctr = _this_1.o[cmp_1];\n                                    if (!ctr)\n                                        file_1.ondata(err(14, 'unknown compression type ' + cmp_1, 1), null, false);\n                                    d_1 = sc_1 < 0 ? new ctr(fn_1) : new ctr(fn_1, sc_1, su_1);\n                                    d_1.ondata = function (err, dat, final) { file_1.ondata(err, dat, final); };\n                                    for (var _i = 0, chks_4 = chks_3; _i < chks_4.length; _i++) {\n                                        var dat = chks_4[_i];\n                                        d_1.push(dat, false);\n                                    }\n                                    if (_this_1.k[0] == chks_3 && _this_1.c)\n                                        _this_1.d = d_1;\n                                    else\n                                        d_1.push(et, true);\n                                }\n                            },\n                            terminate: function () {\n                                if (d_1 && d_1.terminate)\n                                    d_1.terminate();\n                            }\n                        };\n                        if (sc_1 >= 0)\n                            file_1.size = sc_1, file_1.originalSize = su_1;\n                        this_1.onfile(file_1);\n                    }\n                    return \"break\";\n                }\n                else if (oc) {\n                    if (sig == 0x8074B50) {\n                        is = i += 12 + (oc == -2 && 8), f = 3, this_1.c = 0;\n                        return \"break\";\n                    }\n                    else if (sig == 0x2014B50) {\n                        is = i -= 4, f = 3, this_1.c = 0;\n                        return \"break\";\n                    }\n                }\n            };\n            var this_1 = this;\n            for (; i < l - 4; ++i) {\n                var state_1 = _loop_2();\n                if (state_1 === \"break\")\n                    break;\n            }\n            this.p = et;\n            if (oc < 0) {\n                var dat = f ? buf.subarray(0, is - 12 - (oc == -2 && 8) - (b4(buf, is - 16) == 0x8074B50 && 4)) : buf.subarray(0, i);\n                if (add)\n                    add.push(dat, !!f);\n                else\n                    this.k[+(f == 2)].push(dat);\n            }\n            if (f & 2)\n                return this.push(buf.subarray(i), final);\n            this.p = buf.subarray(i);\n        }\n        if (final) {\n            if (this.c)\n                err(13);\n            this.p = null;\n        }\n    };\n    /**\n     * Registers a decoder with the stream, allowing for files compressed with\n     * the compression type provided to be expanded correctly\n     * @param decoder The decoder constructor\n     */\n    Unzip.prototype.register = function (decoder) {\n        this.o[decoder.compression] = decoder;\n    };\n    return Unzip;\n}());\nexport { Unzip };\nvar mt = typeof queueMicrotask == 'function' ? queueMicrotask : typeof setTimeout == 'function' ? setTimeout : function (fn) { fn(); };\nexport function unzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var files = {};\n    var cbd = function (a, b) {\n        mt(function () { cb(a, b); });\n    };\n    mt(function () { cbd = cb; });\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558) {\n            cbd(err(13, 0, 1), null);\n            return tAll;\n        }\n    }\n    ;\n    var lft = b2(data, e + 8);\n    if (lft) {\n        var c = lft;\n        var o = b4(data, e + 16);\n        var z = o == 4294967295;\n        if (z) {\n            e = b4(data, e - 12);\n            if (b4(data, e) != 0x6064B50) {\n                cbd(err(13, 0, 1), null);\n                return tAll;\n            }\n            c = lft = b4(data, e + 32);\n            o = b4(data, e + 48);\n        }\n        var fltr = opts && opts.filter;\n        var _loop_3 = function (i) {\n            var _a = zh(data, o, z), c_1 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n            o = no;\n            var cbl = function (e, d) {\n                if (e) {\n                    tAll();\n                    cbd(e, null);\n                }\n                else {\n                    if (d)\n                        files[fn] = d;\n                    if (!--lft)\n                        cbd(null, files);\n                }\n            };\n            if (!fltr || fltr({\n                name: fn,\n                size: sc,\n                originalSize: su,\n                compression: c_1\n            })) {\n                if (!c_1)\n                    cbl(null, slc(data, b, b + sc));\n                else if (c_1 == 8) {\n                    var infl = data.subarray(b, b + sc);\n                    if (sc < 320000) {\n                        try {\n                            cbl(null, inflateSync(infl, new u8(su)));\n                        }\n                        catch (e) {\n                            cbl(e, null);\n                        }\n                    }\n                    else\n                        term.push(inflate(infl, { size: su }, cbl));\n                }\n                else\n                    cbl(err(14, 'unknown compression type ' + c_1, 1), null);\n            }\n            else\n                cbl(null, null);\n        };\n        for (var i = 0; i < c; ++i) {\n            _loop_3(i);\n        }\n    }\n    else\n        cbd(null, {});\n    return tAll;\n}\n/**\n * Synchronously decompresses a ZIP archive. Prefer using `unzip` for better\n * performance with more than one file.\n * @param data The raw compressed ZIP file\n * @param opts The ZIP extraction options\n * @returns The decompressed files\n */\nexport function unzipSync(data, opts) {\n    var files = {};\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558)\n            err(13);\n    }\n    ;\n    var c = b2(data, e + 8);\n    if (!c)\n        return {};\n    var o = b4(data, e + 16);\n    var z = o == 4294967295;\n    if (z) {\n        e = b4(data, e - 12);\n        if (b4(data, e) != 0x6064B50)\n            err(13);\n        c = b4(data, e + 32);\n        o = b4(data, e + 48);\n    }\n    var fltr = opts && opts.filter;\n    for (var i = 0; i < c; ++i) {\n        var _a = zh(data, o, z), c_2 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n        o = no;\n        if (!fltr || fltr({\n            name: fn,\n            size: sc,\n            originalSize: su,\n            compression: c_2\n        })) {\n            if (!c_2)\n                files[fn] = slc(data, b, b + sc);\n            else if (c_2 == 8)\n                files[fn] = inflateSync(data.subarray(b, b + sc), new u8(su));\n            else\n                err(14, 'unknown compression type ' + c_2);\n        }\n    }\n    return files;\n}\n","var TYPE_MAPPING = {};\nfunction has(type) {\n  return !!TYPE_MAPPING[type];\n}\nfunction get() {\n  var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'http';\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return TYPE_MAPPING[type](options);\n}\nfunction registerType(type, fn) {\n  TYPE_MAPPING[type] = fn;\n}\nvar DataAccessHelper = {\n  get: get,\n  has: has,\n  registerType: registerType\n};\n\nexport { DataAccessHelper as default, get, has, registerType };\n","/* eslint-disable no-bitwise */\n// ----------------------------------------------------------------------------\n// Decoding infrastructure\n// ----------------------------------------------------------------------------\nvar REVERSE_LOOKUP = [];\nREVERSE_LOOKUP['-'.charCodeAt(0)] = 62;\nREVERSE_LOOKUP['_'.charCodeAt(0)] = 63;\nvar BASE64_CODE = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\nfor (var i = 0; i < BASE64_CODE.length; i++) {\n  REVERSE_LOOKUP[BASE64_CODE.charCodeAt(i)] = i;\n} // ----------------------------------------------------------------------------\n// Base64 analysis\n// ----------------------------------------------------------------------------\n\n\nfunction isValidChar(c) {\n  return REVERSE_LOOKUP[c.charCodeAt(0)] !== undefined;\n}\n\nfunction extractChunks(b64Str) {\n  var strSize = b64Str.length;\n  var chunks = [];\n  var currentChunk = null;\n\n  for (var _i = 0; _i < strSize; _i++) {\n    if (isValidChar(b64Str[_i])) {\n      if (!currentChunk) {\n        currentChunk = {\n          start: _i,\n          count: 0\n        };\n      }\n\n      currentChunk.count++;\n      currentChunk.end = _i;\n    } else if (b64Str[_i] === '=' && currentChunk) {\n      // End of chunk (found padding char)\n      chunks.push(currentChunk);\n      currentChunk = null;\n    }\n  }\n\n  if (currentChunk) {\n    chunks.push(currentChunk);\n  }\n\n  return chunks;\n}\n\nfunction writeChunk(b64Str, chunk, dstOffset, uint8) {\n  var start = chunk.start,\n      count = chunk.count;\n  var remain = count % 4;\n  var fourCharProcessCount = Math.floor(count / 4);\n  var charIdx = start;\n  var tmp = null;\n  var offset = dstOffset; // Handle 4=>3\n\n  for (var _i2 = 0; _i2 < fourCharProcessCount; _i2++) {\n    while (!isValidChar(b64Str[charIdx])) {\n      charIdx++;\n    }\n\n    tmp = REVERSE_LOOKUP[b64Str.charCodeAt(charIdx++)] << 18;\n\n    while (!isValidChar(b64Str[charIdx])) {\n      charIdx++;\n    }\n\n    tmp |= REVERSE_LOOKUP[b64Str.charCodeAt(charIdx++)] << 12;\n\n    while (!isValidChar(b64Str[charIdx])) {\n      charIdx++;\n    }\n\n    tmp |= REVERSE_LOOKUP[b64Str.charCodeAt(charIdx++)] << 6;\n\n    while (!isValidChar(b64Str[charIdx])) {\n      charIdx++;\n    }\n\n    tmp |= REVERSE_LOOKUP[b64Str.charCodeAt(charIdx++)];\n    uint8[offset++] = tmp >> 16 & 0xff;\n    uint8[offset++] = tmp >> 8 & 0xff;\n    uint8[offset++] = tmp & 0xff;\n  } // Handle remain\n\n\n  switch (remain) {\n    case 3:\n      while (!isValidChar(b64Str[charIdx])) {\n        charIdx++;\n      }\n\n      tmp = REVERSE_LOOKUP[b64Str.charCodeAt(charIdx++)] << 10;\n\n      while (!isValidChar(b64Str[charIdx])) {\n        charIdx++;\n      }\n\n      tmp |= REVERSE_LOOKUP[b64Str.charCodeAt(charIdx++)] << 4;\n\n      while (!isValidChar(b64Str[charIdx])) {\n        charIdx++;\n      }\n\n      tmp |= REVERSE_LOOKUP[b64Str.charCodeAt(charIdx++)] >> 2;\n      uint8[offset++] = tmp >> 8 & 0xff;\n      uint8[offset++] = tmp & 0xff;\n      break;\n\n    case 2:\n      while (!isValidChar(b64Str[charIdx])) {\n        charIdx++;\n      }\n\n      tmp = REVERSE_LOOKUP[b64Str.charCodeAt(charIdx++)] << 2;\n\n      while (!isValidChar(b64Str[charIdx])) {\n        charIdx++;\n      }\n\n      tmp |= REVERSE_LOOKUP[b64Str.charCodeAt(charIdx++)] >> 4;\n      uint8[offset++] = tmp & 0xff;\n      break;\n\n    case 1:\n      throw new Error('BASE64: remain 1 should not happen');\n  }\n\n  return offset;\n}\n\nfunction toArrayBuffer(b64Str) {\n  var chunks = extractChunks(b64Str);\n  var totalEncodedLength = chunks[chunks.length - 1].end + 1;\n  var padding = (4 - totalEncodedLength % 4) % 4; // -length mod 4\n  // Any padding chars in the middle of b64Str is to be interpreted as \\x00,\n  // whereas the terminating padding chars are to be interpreted as literal padding.\n\n  var totalSize = (totalEncodedLength + padding) * 3 / 4 - padding;\n  var arrayBuffer = new ArrayBuffer(totalSize);\n  var view = new Uint8Array(arrayBuffer);\n  var dstOffset = 0;\n\n  for (var _i3 = 0; _i3 < chunks.length; _i3++) {\n    dstOffset += writeChunk(b64Str, chunks[_i3], dstOffset, view);\n    dstOffset += (4 - chunks[_i3].count % 4) % 4;\n  }\n\n  return arrayBuffer;\n}\n\nfunction encodeTriplet(v1, v2, v3) {\n  var triplet = (v1 << 16) + (v2 << 8) + v3;\n  return BASE64_CODE[triplet >> 18] + BASE64_CODE[triplet >> 12 & 0x3f] + BASE64_CODE[triplet >> 6 & 0x3f] + BASE64_CODE[triplet & 0x3f];\n}\n\nfunction fromArrayBuffer(ab) {\n  var uint8 = new Uint8Array(ab);\n  var leftoverLength = ab.byteLength % 3;\n  var maxTripletIndex = ab.byteLength - leftoverLength;\n  var segments = Array(maxTripletIndex / 3);\n\n  for (var _i4 = 0; _i4 < segments.length; _i4++) {\n    var bufOffset = _i4 * 3;\n    segments[_i4] = encodeTriplet(uint8[bufOffset], uint8[bufOffset + 1], uint8[bufOffset + 2]);\n  }\n\n  if (leftoverLength > 0) {\n    var segment = encodeTriplet(uint8[maxTripletIndex], uint8[maxTripletIndex + 1] || 0, uint8[maxTripletIndex + 2] || 0);\n\n    if (leftoverLength === 1) {\n      segments.push(\"\".concat(segment.substr(0, 2), \"==\"));\n    } else if (leftoverLength === 2) {\n      segments.push(\"\".concat(segment.substr(0, 3), \"=\"));\n    }\n  }\n\n  return segments.join('');\n}\nvar Base64 = {\n  toArrayBuffer: toArrayBuffer,\n  fromArrayBuffer: fromArrayBuffer\n};\n\nexport { Base64 as default, fromArrayBuffer, toArrayBuffer };\n","/**\n * Converts a binary buffer in an ArrayBuffer to a string.\n *\n * Note this does not take encoding into consideration, so don't\n * expect proper Unicode or any other encoding.\n */\nfunction arrayBufferToString(arrayBuffer) {\n  var decoder = new TextDecoder('latin1');\n  return decoder.decode(arrayBuffer);\n}\n/**\n * Extracts binary data out of a file ArrayBuffer given a prefix/suffix.\n */\n\n\nfunction extractBinary(arrayBuffer, prefixRegex) {\n  var suffixRegex = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  var str = arrayBufferToString(arrayBuffer);\n  var prefixMatch = prefixRegex.exec(str);\n\n  if (!prefixMatch) {\n    return {\n      text: str\n    };\n  }\n\n  var dataStartIndex = prefixMatch.index + prefixMatch[0].length;\n  var strFirstHalf = str.substring(0, dataStartIndex);\n  var retVal = null;\n  var suffixMatch = suffixRegex ? suffixRegex.exec(str) : null;\n\n  if (suffixMatch) {\n    var strSecondHalf = str.substr(suffixMatch.index);\n    retVal = {\n      text: strFirstHalf + strSecondHalf,\n      binaryBuffer: arrayBuffer.slice(dataStartIndex, suffixMatch.index)\n    };\n  } else {\n    // no suffix, so just take all the data starting from dataStartIndex\n    retVal = {\n      text: strFirstHalf,\n      binaryBuffer: arrayBuffer.slice(dataStartIndex)\n    };\n  }\n\n  return retVal;\n}\n\nvar BinaryHelper = {\n  arrayBufferToString: arrayBufferToString,\n  extractBinary: extractBinary\n};\n\nexport { BinaryHelper as default };\n","function getEndianness() {\n  var a = new ArrayBuffer(4);\n  var b = new Uint8Array(a);\n  var c = new Uint32Array(a);\n  b[0] = 0xa1;\n  b[1] = 0xb2;\n  b[2] = 0xc3;\n  b[3] = 0xd4;\n  if (c[0] === 0xd4c3b2a1) return 'LittleEndian';\n  if (c[0] === 0xa1b2c3d4) return 'BigEndian';\n  return null;\n}\nvar ENDIANNESS = getEndianness();\nfunction swapBytes(buffer, wordSize) {\n  if (wordSize < 2) {\n    return;\n  }\n\n  var bytes = new Int8Array(buffer);\n  var size = bytes.length;\n  var tempBuffer = [];\n\n  for (var i = 0; i < size; i += wordSize) {\n    for (var j = 0; j < wordSize; j++) {\n      tempBuffer.push(bytes[i + j]);\n    }\n\n    for (var _j = 0; _j < wordSize; _j++) {\n      bytes[i + _j] = tempBuffer.pop();\n    }\n  }\n}\nvar Endian = {\n  ENDIANNESS: ENDIANNESS,\n  getEndianness: getEndianness,\n  swapBytes: swapBytes\n};\n\nexport { ENDIANNESS, Endian as default, getEndianness, swapBytes };\n","import _slicedToArray from '@babel/runtime/helpers/slicedToArray';\nimport macro from '../../../macros.js';\nimport Endian from '../../../Common/Core/Endian.js';\nimport { DataTypeByteSize } from '../../../Common/Core/DataArray/Constants.js';\nimport { has, registerType } from '../DataAccessHelper.js';\n\nvar vtkErrorMacro = macro.vtkErrorMacro,\n    vtkDebugMacro = macro.vtkDebugMacro;\n\nvar REJECT_COMPRESSION = function REJECT_COMPRESSION() {\n  vtkErrorMacro('LiteHttpDataAccessHelper does not support compression. Need to register HttpDataAccessHelper instead.');\n  return Promise.reject(new Error('LiteHttpDataAccessHelper does not support compression. Need to register HttpDataAccessHelper instead.'));\n};\n/* eslint-disable prefer-promise-reject-errors */\n\n\nvar requestCount = 0;\n\nfunction openAsyncXHR(method, url) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var xhr = new XMLHttpRequest();\n  xhr.open(method, url, true);\n\n  if (options.headers) {\n    Object.entries(options.headers).forEach(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n          key = _ref2[0],\n          value = _ref2[1];\n\n      return xhr.setRequestHeader(key, value);\n    });\n  }\n\n  if (options.progressCallback) {\n    xhr.addEventListener('progress', options.progressCallback);\n  }\n\n  return xhr;\n}\n\nfunction fetchBinary(url) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return new Promise(function (resolve, reject) {\n    var xhr = openAsyncXHR('GET', url, options);\n\n    xhr.onreadystatechange = function (e) {\n      if (xhr.readyState === 4) {\n        if (xhr.status === 200 || xhr.status === 0) {\n          resolve(xhr.response);\n        } else {\n          reject({\n            xhr: xhr,\n            e: e\n          });\n        }\n      }\n    }; // Make request\n\n\n    xhr.responseType = 'arraybuffer';\n    xhr.send();\n  });\n}\n\nfunction fetchArray(instance, baseURL, array) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n  if (options && options.compression) {\n    return REJECT_COMPRESSION();\n  }\n\n  if (array.ref && !array.ref.pending) {\n    return new Promise(function (resolve, reject) {\n      var url = [baseURL, array.ref.basepath, array.ref.id].join('/');\n      var xhr = openAsyncXHR('GET', url, options);\n\n      xhr.onreadystatechange = function (e) {\n        if (xhr.readyState === 1) {\n          array.ref.pending = true;\n\n          if (++requestCount === 1 && instance !== null && instance !== void 0 && instance.invokeBusy) {\n            instance.invokeBusy(true);\n          }\n        }\n\n        if (xhr.readyState === 4) {\n          array.ref.pending = false;\n\n          if (xhr.status === 200 || xhr.status === 0) {\n            array.buffer = xhr.response;\n\n            if (array.ref.encode === 'JSON') {\n              array.values = JSON.parse(array.buffer);\n            } else {\n              if (Endian.ENDIANNESS !== array.ref.encode && Endian.ENDIANNESS) {\n                // Need to swap bytes\n                vtkDebugMacro(\"Swap bytes of \".concat(array.name));\n                Endian.swapBytes(array.buffer, DataTypeByteSize[array.dataType]);\n              }\n\n              array.values = macro.newTypedArray(array.dataType, array.buffer);\n            }\n\n            if (array.values.length !== array.size) {\n              vtkErrorMacro(\"Error in FetchArray: \".concat(array.name, \", does not have the proper array size. Got \").concat(array.values.length, \", instead of \").concat(array.size));\n            } // Done with the ref and work\n\n\n            delete array.ref;\n\n            if (--requestCount === 0 && instance !== null && instance !== void 0 && instance.invokeBusy) {\n              instance.invokeBusy(false);\n            }\n\n            if (instance !== null && instance !== void 0 && instance.modified) {\n              instance.modified();\n            }\n\n            resolve(array);\n          } else {\n            reject({\n              xhr: xhr,\n              e: e\n            });\n          }\n        }\n      }; // Make request\n\n\n      xhr.responseType = array.dataType !== 'string' ? 'arraybuffer' : 'text';\n      xhr.send();\n    });\n  }\n\n  return Promise.resolve(array);\n} // ----------------------------------------------------------------------------\n\n\nfunction fetchJSON(instance, url) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  if (options && options.compression) {\n    return REJECT_COMPRESSION();\n  }\n\n  return new Promise(function (resolve, reject) {\n    var xhr = openAsyncXHR('GET', url, options);\n\n    xhr.onreadystatechange = function (e) {\n      if (xhr.readyState === 1) {\n        if (++requestCount === 1 && instance !== null && instance !== void 0 && instance.invokeBusy) {\n          instance.invokeBusy(true);\n        }\n      }\n\n      if (xhr.readyState === 4) {\n        if (--requestCount === 0 && instance !== null && instance !== void 0 && instance.invokeBusy) {\n          instance.invokeBusy(false);\n        }\n\n        if (xhr.status === 200 || xhr.status === 0) {\n          resolve(JSON.parse(xhr.responseText));\n        } else {\n          reject({\n            xhr: xhr,\n            e: e\n          });\n        }\n      }\n    }; // Make request\n\n\n    xhr.responseType = 'text';\n    xhr.send();\n  });\n} // ----------------------------------------------------------------------------\n\n\nfunction fetchText(instance, url) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  if (options && options.compression) {\n    return REJECT_COMPRESSION();\n  }\n\n  return new Promise(function (resolve, reject) {\n    var xhr = openAsyncXHR('GET', url, options);\n\n    xhr.onreadystatechange = function (e) {\n      if (xhr.readyState === 1) {\n        if (++requestCount === 1 && instance !== null && instance !== void 0 && instance.invokeBusy) {\n          instance.invokeBusy(true);\n        }\n      }\n\n      if (xhr.readyState === 4) {\n        if (--requestCount === 0 && instance !== null && instance !== void 0 && instance.invokeBusy) {\n          instance.invokeBusy(false);\n        }\n\n        if (xhr.status === 200 || xhr.status === 0) {\n          resolve(xhr.responseText);\n        } else {\n          reject({\n            xhr: xhr,\n            e: e\n          });\n        }\n      }\n    }; // Make request\n\n\n    xhr.responseType = 'text';\n    xhr.send();\n  });\n} // ----------------------------------------------------------------------------\n\n\nfunction fetchImage(instance, url) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  return new Promise(function (resolve, reject) {\n    var img = new Image();\n\n    if (options.crossOrigin) {\n      img.crossOrigin = options.crossOrigin;\n    }\n\n    img.onload = function () {\n      return resolve(img);\n    };\n\n    img.onerror = reject;\n    img.src = url;\n  });\n}\n/* eslint-enable prefer-promise-reject-errors */\n// ----------------------------------------------------------------------------\n\n\nvar LiteHttpDataAccessHelper = {\n  fetchArray: fetchArray,\n  fetchJSON: fetchJSON,\n  fetchText: fetchText,\n  fetchBinary: fetchBinary,\n  // Only for HTTP\n  fetchImage: fetchImage\n}; // The lite version should never override a full feature one...\n\nif (!has('http')) {\n  registerType('http', function (options) {\n    return LiteHttpDataAccessHelper;\n  });\n}\n\nexport { LiteHttpDataAccessHelper as default };\n","import _toConsumableArray from '@babel/runtime/helpers/toConsumableArray';\nimport { create } from 'xmlbuilder2';\nimport { decompressSync } from 'fflate';\nimport DataAccessHelper from '../Core/DataAccessHelper.js';\nimport Base64 from '../../Common/Core/Base64.js';\nimport macro from '../../macros.js';\nimport vtkDataArray from '../../Common/Core/DataArray.js';\nimport BinaryHelper from '../Core/BinaryHelper.js';\nimport '../Core/DataAccessHelper/LiteHttpDataAccessHelper.js';\n\n// import 'vtk.js/Sources/IO/Core/DataAccessHelper/HttpDataAccessHelper'; // HTTP + zip\n// import 'vtk.js/Sources/IO/Core/DataAccessHelper/HtmlDataAccessHelper'; // html + base64 + zip\n// import 'vtk.js/Sources/IO/Core/DataAccessHelper/JSZipDataAccessHelper'; // zip\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\n\nfunction findAllTags(node, tagName) {\n  return _toConsumableArray(node.getElementsByTagName(tagName));\n}\nfunction findFirstTag(node, tagName) {\n  return findAllTags(node, tagName)[0];\n}\n\nfunction parseXML(xmlStr) {\n  // see xmlbuilder2 docs on the object format\n  return create(xmlStr);\n}\n\nfunction extractAppendedData(buffer) {\n  // search for appended data tag\n  var prefixRegex = /^\\s*<AppendedData\\s+encoding=\"raw\">\\s*_/m;\n  var suffixRegex = /\\n\\s*<\\/AppendedData>/m;\n  return BinaryHelper.extractBinary(buffer, prefixRegex, suffixRegex);\n} // ----------------------------------------------------------------------------\n\n\nvar TYPED_ARRAY = {\n  Int8: Int8Array,\n  UInt8: Uint8Array,\n  Int16: Int16Array,\n  UInt16: Uint16Array,\n  Int32: Int32Array,\n  UInt32: Uint32Array,\n  Int64: Int32Array,\n  // Not supported with JavaScript will cause error in binary\n  UInt64: Uint32Array,\n  // Not supported with JavaScript will cause error in binary\n  Float32: Float32Array,\n  Float64: Float64Array\n}; // ----------------------------------------------------------------------------\n\nvar TYPED_ARRAY_BYTES = {\n  Int8: 1,\n  UInt8: 1,\n  Int16: 2,\n  UInt16: 2,\n  Int32: 4,\n  UInt32: 4,\n  Int64: 8,\n  // Not supported with JavaScript will cause error in binary\n  UInt64: 8,\n  // Not supported with JavaScript will cause error in binary\n  Float32: 4,\n  Float64: 8\n}; // ----------------------------------------------------------------------------\n\nfunction integer64to32(array) {\n  var maxIdx = array.length - 1; // Skip last\n\n  return array.filter(function (v, i) {\n    return i < maxIdx && i % 2 === 0;\n  });\n} // ----------------------------------------------------------------------------\n\n\nfunction readerHeader(uint8, headerType) {\n  // We do not handle endianness or if more than 32 bits are needed to encode the data\n  if (headerType === 'UInt64') {\n    var _offset = 8;\n\n    var _uint = new Uint32Array(uint8.buffer, 0, 6);\n\n    var _nbBlocks = _uint[0];\n    var _s = _uint[2];\n    var _s2 = _uint[4];\n    var _resultArray = [_offset, _nbBlocks, _s, _s2];\n    _uint = new Uint32Array(uint8.buffer, 3 * 8, _nbBlocks * 2);\n\n    for (var i = 0; i < _nbBlocks; i++) {\n      _resultArray.push(_uint[i * 2]);\n    }\n\n    return _resultArray;\n  } // UInt32\n\n\n  var uint32 = new Uint32Array(uint8.buffer, 0, 3);\n  var offset = 4;\n  var nbBlocks = uint32[0];\n  var s1 = uint32[1];\n  var s2 = uint32[2];\n  var resultArray = [offset, nbBlocks, s1, s2];\n  uint32 = new Uint32Array(uint8.buffer, 3 * 4, nbBlocks);\n\n  for (var _i = 0; _i < nbBlocks; _i++) {\n    resultArray.push(uint32[_i]);\n  }\n\n  return resultArray;\n} // ----------------------------------------------------------------------------\n\n\nfunction uncompressBlock(compressedUint8, output) {\n  var uncompressedBlock = decompressSync(compressedUint8);\n  output.uint8.set(uncompressedBlock, output.offset);\n  output.offset += uncompressedBlock.length;\n} // ----------------------------------------------------------------------------\n\n\nfunction processDataArray(size, dataArrayElem, compressor, byteOrder, headerType, binaryBuffer) {\n  var dataType = dataArrayElem.getAttribute('type');\n  var name = dataArrayElem.getAttribute('Name');\n  var format = dataArrayElem.getAttribute('format'); // binary, ascii, appended\n\n  var numberOfComponents = Number(dataArrayElem.getAttribute('NumberOfComponents') || '1');\n  var values = null;\n\n  if (format === 'ascii') {\n    values = new TYPED_ARRAY[dataType](size * numberOfComponents);\n    var offset = 0;\n    dataArrayElem.firstChild.nodeValue.split(/[\\\\t \\\\n]+/).forEach(function (token) {\n      if (token.trim().length) {\n        values[offset++] = Number(token);\n      }\n    });\n  } else if (format === 'binary') {\n    var uint8 = new Uint8Array(Base64.toArrayBuffer(dataArrayElem.firstChild.nodeValue.trim()));\n\n    if (compressor === 'vtkZLibDataCompressor') {\n      var buffer = new ArrayBuffer(TYPED_ARRAY_BYTES[dataType] * size * numberOfComponents);\n      values = new TYPED_ARRAY[dataType](buffer);\n      var output = {\n        offset: 0,\n        uint8: new Uint8Array(buffer)\n      }; // ----------------------------------------------------------------------\n      // Layout of the data\n      // header[N, s1, s1, blockSize1, ..., blockSizeN], [padding???], block[compressedData], ..., block[compressedData]\n      // [header] N, s1 and s2 are uint 32 or 64 (defined by header_type=\"UInt64\" attribute on the root node)\n      // [header] s1: uncompress size of each block except the last one\n      // [header] s2: uncompress size of the last blocks\n      // [header] blockSize: size of the block in compressed space that represent to bloc to inflate in zlib. (This also give the offset to the next block)\n      // ----------------------------------------------------------------------\n      // Header reading\n\n      var header = readerHeader(uint8, headerType);\n      var nbBlocks = header[1];\n\n      var _offset2 = uint8.length - (header.reduce(function (a, b) {\n        return a + b;\n      }, 0) - (header[0] + header[1] + header[2] + header[3]));\n\n      for (var i = 0; i < nbBlocks; i++) {\n        var blockSize = header[4 + i];\n        var compressedBlock = new Uint8Array(uint8.buffer, _offset2, blockSize);\n        uncompressBlock(compressedBlock, output);\n        _offset2 += blockSize;\n      } // Handle (u)int64 hoping for no overflow...\n\n\n      if (dataType.indexOf('Int64') !== -1) {\n        values = integer64to32(values);\n      }\n    } else {\n      values = new TYPED_ARRAY[dataType](uint8.buffer, TYPED_ARRAY_BYTES[headerType]); // Skip the count\n      // Handle (u)int64 hoping no overflow...\n\n      if (dataType.indexOf('Int64') !== -1) {\n        values = integer64to32(values);\n      }\n    }\n  } else if (format === 'appended') {\n    var _offset3 = Number(dataArrayElem.getAttribute('offset')); // read header\n    // NOTE: this will incorrectly read the size if headerType is (U)Int64 and\n    // the value requires (U)Int64.\n\n\n    var _header;\n\n    if (_offset3 % TYPED_ARRAY_BYTES[headerType] === 0) {\n      _header = new TYPED_ARRAY[headerType](binaryBuffer, _offset3, 1);\n    } else {\n      _header = new TYPED_ARRAY[headerType](binaryBuffer.slice(_offset3, _offset3 + TYPED_ARRAY_BYTES[headerType]));\n    }\n\n    var arraySize = _header[0] / TYPED_ARRAY_BYTES[dataType]; // if we are dealing with Uint64, we need to get double the values since\n    // TYPED_ARRAY[Uint64] is Uint32.\n\n    if (dataType.indexOf('Int64') !== -1) {\n      arraySize *= 2;\n    }\n\n    _offset3 += TYPED_ARRAY_BYTES[headerType]; // read values\n    // if offset is aligned to dataType, use view. Otherwise, slice due to misalignment.\n\n    if (_offset3 % TYPED_ARRAY_BYTES[dataType] === 0) {\n      values = new TYPED_ARRAY[dataType](binaryBuffer, _offset3, arraySize);\n    } else {\n      values = new TYPED_ARRAY[dataType](binaryBuffer.slice(_offset3, _offset3 + _header[0]));\n    } // remove higher order 32 bits assuming they're not used.\n\n\n    if (dataType.indexOf('Int64') !== -1) {\n      values = integer64to32(values);\n    }\n  } else {\n    console.error('Format not supported', format);\n  }\n\n  return {\n    name: name,\n    values: values,\n    numberOfComponents: numberOfComponents\n  };\n} // ----------------------------------------------------------------------------\n\n\nfunction processCells(size, containerElem, compressor, byteOrder, headerType, binaryBuffer) {\n  var arrayElems = {};\n  var dataArrayElems = containerElem.getElementsByTagName('DataArray');\n\n  for (var elIdx = 0; elIdx < dataArrayElems.length; elIdx++) {\n    var el = dataArrayElems[elIdx];\n    arrayElems[el.getAttribute('Name')] = el;\n  }\n\n  var offsets = processDataArray(size, arrayElems.offsets, compressor, byteOrder, headerType, binaryBuffer).values;\n  var connectivitySize = offsets[offsets.length - 1];\n  var connectivity = processDataArray(connectivitySize, arrayElems.connectivity, compressor, byteOrder, headerType, binaryBuffer).values;\n  var values = new Uint32Array(size + connectivitySize);\n  var writeOffset = 0;\n  var previousOffset = 0;\n  offsets.forEach(function (v) {\n    var cellSize = v - previousOffset;\n    values[writeOffset++] = cellSize;\n\n    for (var i = 0; i < cellSize; i++) {\n      values[writeOffset++] = connectivity[previousOffset + i];\n    } // save previous offset\n\n\n    previousOffset = v;\n  });\n  return values;\n} // ----------------------------------------------------------------------------\n\n\nfunction processFieldData(size, fieldElem, fieldContainer, compressor, byteOrder, headerType, binaryBuffer) {\n  if (fieldElem) {\n    var attributes = ['Scalars', 'Vectors', 'Normals', 'Tensors', 'TCoords'];\n    var nameBinding = {};\n    attributes.forEach(function (attrName) {\n      var arrayName = fieldElem.getAttribute(attrName);\n\n      if (arrayName) {\n        nameBinding[arrayName] = fieldContainer[\"set\".concat(attrName)];\n      }\n    });\n    var dataArrayElems = fieldElem.getElementsByTagName('DataArray');\n    var nbArrays = dataArrayElems.length;\n\n    for (var idx = 0; idx < nbArrays; idx++) {\n      var array = dataArrayElems[idx];\n      var dataArray = vtkDataArray.newInstance(processDataArray(size, array, compressor, byteOrder, headerType, binaryBuffer));\n      var name = dataArray.getName();\n      (nameBinding[name] || fieldContainer.addArray)(dataArray);\n    }\n  }\n} // ----------------------------------------------------------------------------\n\n\nfunction handleFieldDataArrays(fieldDataElem, compressor, byteOrder, headerType, binaryBuffer) {\n  return _toConsumableArray(fieldDataElem.getElementsByTagName('DataArray')).map(function (daElem) {\n    return vtkDataArray.newInstance(processDataArray(Number(daElem.getAttribute('NumberOfTuples')), daElem, compressor, byteOrder, headerType, binaryBuffer));\n  });\n} // ----------------------------------------------------------------------------\n// vtkXMLReader methods\n// ----------------------------------------------------------------------------\n\n\nfunction vtkXMLReader(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkXMLReader'); // Create default dataAccessHelper if not available\n\n  if (!model.dataAccessHelper) {\n    model.dataAccessHelper = DataAccessHelper.get('http');\n  } // Internal method to fetch Array\n\n\n  function fetchData(url) {\n    var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return model.dataAccessHelper.fetchBinary(url, option);\n  } // Set DataSet url\n\n\n  publicAPI.setUrl = function (url) {\n    var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    model.url = url; // Remove the file in the URL\n\n    var path = url.split('/');\n    path.pop();\n    model.baseURL = path.join('/'); // Fetch metadata\n\n    return publicAPI.loadData(option);\n  }; // Fetch the actual data arrays\n\n\n  publicAPI.loadData = function () {\n    var option = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return fetchData(model.url, option).then(publicAPI.parseAsArrayBuffer);\n  };\n\n  publicAPI.parseAsArrayBuffer = function (arrayBuffer) {\n    if (!arrayBuffer) {\n      return false;\n    }\n\n    if (arrayBuffer !== model.rawDataBuffer) {\n      publicAPI.modified();\n    } else {\n      return true;\n    }\n\n    var _extractAppendedData = extractAppendedData(arrayBuffer),\n        content = _extractAppendedData.text,\n        binaryBuffer = _extractAppendedData.binaryBuffer;\n\n    model.rawDataBuffer = arrayBuffer;\n    model.binaryBuffer = binaryBuffer; // Parse data here...\n\n    var doc = parseXML(content);\n    var rootElem = doc.root().node;\n    var type = rootElem.getAttribute('type');\n    var compressor = rootElem.getAttribute('compressor');\n    var byteOrder = rootElem.getAttribute('byte_order'); // default to UInt32. I think version 0.1 vtp/vti files default to UInt32.\n\n    var headerType = rootElem.getAttribute('header_type') || 'UInt32';\n\n    if (compressor && compressor !== 'vtkZLibDataCompressor') {\n      console.error('Invalid compressor', compressor);\n      return false;\n    }\n\n    if (byteOrder && byteOrder !== 'LittleEndian') {\n      console.error('Only LittleEndian encoding is supported');\n      return false;\n    }\n\n    if (type !== model.dataType) {\n      console.error('Invalid data type', type, 'expecting', model.dataType);\n      return false;\n    } // appended format\n\n\n    if (findFirstTag(rootElem, 'AppendedData')) {\n      var appendedDataElem = findFirstTag(rootElem, 'AppendedData');\n      var encoding = appendedDataElem.getAttribute('encoding');\n      var arrayElems = findAllTags(rootElem, 'DataArray');\n      var appendedBuffer = model.binaryBuffer;\n\n      if (encoding === 'base64') {\n        // substr(1) is to remove the '_' prefix\n        appendedBuffer = appendedDataElem.textContent.trim().substr(1);\n      } // get data array chunks\n\n\n      var dataArrays = [];\n\n      for (var i = 0; i < arrayElems.length; ++i) {\n        var offset = Number(arrayElems[i].getAttribute('offset'));\n        var nextOffset = 0;\n\n        if (i === arrayElems.length - 1) {\n          nextOffset = appendedBuffer.length || appendedBuffer.byteLength;\n        } else {\n          nextOffset = Number(arrayElems[i + 1].getAttribute('offset'));\n        }\n\n        if (encoding === 'base64') {\n          dataArrays.push(new Uint8Array(Base64.toArrayBuffer(appendedBuffer.substring(offset, nextOffset))));\n        } else {\n          // encoding === 'raw'\n          // Need to slice the ArrayBuffer so readerHeader() works properly\n          dataArrays.push(new Uint8Array(appendedBuffer.slice(offset, nextOffset)));\n        }\n      }\n\n      if (compressor === 'vtkZLibDataCompressor') {\n        for (var arrayidx = 0; arrayidx < dataArrays.length; ++arrayidx) {\n          var dataArray = dataArrays[arrayidx]; // Header reading\n          // Refer to processDataArray() above for info on header fields\n\n          var header = readerHeader(dataArray, headerType);\n          var nbBlocks = header[1];\n          var compressedOffset = dataArray.length - (header.reduce(function (a, b) {\n            return a + b;\n          }, 0) - (header[0] + header[1] + header[2] + header[3]));\n          var _buffer = null;\n\n          if (nbBlocks > 0) {\n            // If the last block's size is labeled as 0, that means the last block\n            // really has size header[2].\n            if (header[3] === 0) {\n              _buffer = new ArrayBuffer(header[2] * nbBlocks);\n            } else {\n              _buffer = new ArrayBuffer(header[2] * (nbBlocks - 1) + header[3]);\n            }\n          } else {\n            // if there is no blocks, then default to a zero array of size 0.\n            _buffer = new ArrayBuffer(0);\n          } // uncompressed buffer\n\n\n          var uncompressed = new Uint8Array(_buffer);\n          var output = {\n            offset: 0,\n            uint8: uncompressed\n          };\n\n          for (var _i2 = 0; _i2 < nbBlocks; _i2++) {\n            var blockSize = header[4 + _i2];\n            var compressedBlock = new Uint8Array(dataArray.buffer, compressedOffset, blockSize);\n            uncompressBlock(compressedBlock, output);\n            compressedOffset += blockSize;\n          }\n\n          var data = new Uint8Array(uncompressed.length + TYPED_ARRAY_BYTES[headerType]); // set length header\n          // TODO this does not work for lengths that are greater than the max Uint32 value.\n\n          new TYPED_ARRAY[headerType](data.buffer, 0, 1)[0] = uncompressed.length;\n          data.set(uncompressed, TYPED_ARRAY_BYTES[headerType]);\n          dataArrays[arrayidx] = data;\n        }\n      }\n\n      var bufferLength = dataArrays.reduce(function (acc, arr) {\n        return acc + arr.length;\n      }, 0);\n      var buffer = new ArrayBuffer(bufferLength);\n      var view = new Uint8Array(buffer);\n\n      for (var _i3 = 0, _offset4 = 0; _i3 < dataArrays.length; ++_i3) {\n        // set correct offsets\n        arrayElems[_i3].setAttribute('offset', _offset4); // set final buffer data\n\n\n        view.set(dataArrays[_i3], _offset4);\n        _offset4 += dataArrays[_i3].length;\n      }\n\n      model.binaryBuffer = buffer;\n\n      if (!model.binaryBuffer) {\n        console.error('Processing appended data format: requires binaryBuffer to parse');\n        return false;\n      }\n    }\n\n    publicAPI.parseXML(rootElem, type, compressor, byteOrder, headerType);\n    var datasetElem = rootElem.getElementsByTagName(type)[0];\n    var fieldDataElem = datasetElem.getElementsByTagName('FieldData')[0];\n\n    if (fieldDataElem) {\n      var fieldDataArrays = handleFieldDataArrays(fieldDataElem, compressor, byteOrder, headerType, model.binaryBuffer);\n\n      for (var _i4 = 0; _i4 < model.output.length; _i4++) {\n        var fieldData = model.output[_i4].getFieldData();\n\n        for (var j = 0; j < fieldDataArrays.length; j++) {\n          fieldData.addArray(fieldDataArrays[j]);\n        }\n      }\n    }\n\n    return true;\n  };\n\n  publicAPI.requestData = function (inData, outData) {\n    publicAPI.parseAsArrayBuffer(model.rawDataBuffer);\n  };\n} // ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\n\nvar DEFAULT_VALUES = {// baseURL: null,\n  // dataAccessHelper: null,\n  // url: null,\n}; // ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  var initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues); // Build VTK API\n\n  macro.obj(publicAPI, model);\n  macro.get(publicAPI, model, ['url', 'baseURL']);\n  macro.setGet(publicAPI, model, ['dataAccessHelper']);\n  macro.algo(publicAPI, model, 0, 1); // vtkXMLReader methods\n\n  vtkXMLReader(publicAPI, model);\n} // ----------------------------------------------------------------------------\n\nvar vtkXMLReader$1 = {\n  extend: extend,\n  processDataArray: processDataArray,\n  processFieldData: processFieldData,\n  processCells: processCells\n};\n\nexport { vtkXMLReader$1 as default, extend, findAllTags, findFirstTag };\n","import macro from '../../macros.js';\nimport vtkPolyData from '../../Common/DataModel/PolyData.js';\nimport vtkXMLReader from './XMLReader.js';\n\n// Global method\n// ----------------------------------------------------------------------------\n\nfunction handleArray(polydata, cellType, piece, compressor, byteOrder, headerType, binaryBuffer) {\n  var size = Number(piece.getAttribute(\"NumberOf\".concat(cellType)));\n\n  if (size > 0) {\n    var dataArrayElem = piece.getElementsByTagName(cellType)[0].getElementsByTagName('DataArray')[0];\n\n    var _vtkXMLReader$process = vtkXMLReader.processDataArray(size, dataArrayElem, compressor, byteOrder, headerType, binaryBuffer),\n        values = _vtkXMLReader$process.values,\n        numberOfComponents = _vtkXMLReader$process.numberOfComponents;\n\n    polydata[\"get\".concat(cellType)]().setData(values, numberOfComponents);\n  }\n\n  return size;\n} // ----------------------------------------------------------------------------\n\n\nfunction handleCells(polydata, cellType, piece, compressor, byteOrder, headerType, binaryBuffer) {\n  var size = Number(piece.getAttribute(\"NumberOf\".concat(cellType)));\n\n  if (size > 0) {\n    var values = vtkXMLReader.processCells(size, piece.getElementsByTagName(cellType)[0], compressor, byteOrder, headerType, binaryBuffer);\n    polydata[\"get\".concat(cellType)]().setData(values);\n  }\n\n  return size;\n} // ----------------------------------------------------------------------------\n// vtkXMLPolyDataReader methods\n// ----------------------------------------------------------------------------\n\n\nfunction vtkXMLPolyDataReader(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkXMLPolyDataReader');\n\n  publicAPI.parseXML = function (rootElem, type, compressor, byteOrder, headerType) {\n    var datasetElem = rootElem.getElementsByTagName(model.dataType)[0];\n    var pieces = datasetElem.getElementsByTagName('Piece');\n    var nbPieces = pieces.length;\n\n    var _loop = function _loop(outputIndex) {\n      // Create dataset\n      var polydata = vtkPolyData.newInstance();\n      var piece = pieces[outputIndex]; // Points\n\n      var nbPoints = handleArray(polydata, 'Points', piece, compressor, byteOrder, headerType, model.binaryBuffer); // Cells\n\n      var nbCells = 0;\n      ['Verts', 'Lines', 'Strips', 'Polys'].forEach(function (cellType) {\n        nbCells += handleCells(polydata, cellType, piece, compressor, byteOrder, headerType, model.binaryBuffer);\n      }); // Fill data\n\n      vtkXMLReader.processFieldData(nbPoints, piece.getElementsByTagName('PointData')[0], polydata.getPointData(), compressor, byteOrder, headerType, model.binaryBuffer);\n      vtkXMLReader.processFieldData(nbCells, piece.getElementsByTagName('CellData')[0], polydata.getCellData(), compressor, byteOrder, headerType, model.binaryBuffer); // Add new output\n\n      model.output[outputIndex] = polydata;\n    };\n\n    for (var outputIndex = 0; outputIndex < nbPieces; outputIndex++) {\n      _loop(outputIndex);\n    }\n  };\n} // ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\n\nvar DEFAULT_VALUES = {\n  dataType: 'PolyData'\n}; // ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  var initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n  vtkXMLReader.extend(publicAPI, model, initialValues);\n  vtkXMLPolyDataReader(publicAPI, model);\n} // ----------------------------------------------------------------------------\n\nvar newInstance = macro.newInstance(extend, 'vtkXMLPolyDataReader'); // ----------------------------------------------------------------------------\n\nvar vtkXMLPolyDataReader$1 = {\n  newInstance: newInstance,\n  extend: extend\n};\n\nexport { vtkXMLPolyDataReader$1 as default, extend, newInstance };\n","import vtkOrientationMarkerWidget from '@kitware/vtk.js/Interaction/Widgets/OrientationMarkerWidget';\nimport vtkAnnotatedCubeActor from '@kitware/vtk.js/Rendering/Core/AnnotatedCubeActor';\nimport vtkAxesActor from '@kitware/vtk.js/Rendering/Core/AxesActor';\nimport vtkActor from '@kitware/vtk.js/Rendering/Core/Actor';\nimport vtkMapper from '@kitware/vtk.js/Rendering/Core/Mapper';\nimport vtkXMLPolyDataReader from '@kitware/vtk.js/IO/XML/XMLPolyDataReader';\nimport vtkPolyData from '@kitware/vtk.js/Common/DataModel/PolyData';\n\nimport { BaseTool } from './base';\nimport { getRenderingEngines } from '@cornerstonejs/core';\nimport { filterViewportsWithToolEnabled } from '../utilities/viewportFilters';\n\nconst OverlayMarkerType = {\n  ANNOTATED_CUBE: 1,\n  AXES: 2,\n  CUSTOM: 3,\n};\n\n/**\n * The OrientationMarker is a tool that includes an orientation marker in viewports\n * when activated\n */\nclass OrientationMarkerTool extends BaseTool {\n  static toolName;\n  static CUBE = 1;\n  static AXIS = 2;\n  static VTPFILE = 3;\n  orientationMarkers;\n  polyDataURL;\n\n  static OVERLAY_MARKER_TYPES = OverlayMarkerType;\n\n  configuration_invalidated = true;\n\n  constructor(\n    toolProps = {},\n    defaultToolProps = {\n      configuration: {\n        orientationWidget: {\n          enabled: true,\n          viewportCorner: vtkOrientationMarkerWidget.Corners.BOTTOM_RIGHT,\n          viewportSize: 0.15,\n          minPixelSize: 100,\n          maxPixelSize: 300,\n        },\n        overlayMarkerType:\n          OrientationMarkerTool.OVERLAY_MARKER_TYPES.ANNOTATED_CUBE,\n        overlayConfiguration: {\n          [OrientationMarkerTool.OVERLAY_MARKER_TYPES.ANNOTATED_CUBE]: {\n            faceProperties: {\n              xPlus: { text: 'R', faceColor: '#ffff00', faceRotation: 90 },\n              xMinus: { text: 'L', faceColor: '#ffff00', faceRotation: 270 },\n              yPlus: {\n                text: 'P',\n                faceColor: '#00ffff',\n                fontColor: 'white',\n                faceRotation: 180,\n              },\n              yMinus: { text: 'A', faceColor: '#00ffff', fontColor: 'white' },\n              zPlus: { text: 'S' },\n              zMinus: { text: 'I' },\n            },\n            defaultStyle: {\n              fontStyle: 'bold',\n              fontFamily: 'Arial',\n              fontColor: 'black',\n              fontSizeScale: (res) => res / 2,\n              faceColor: '#0000ff',\n              edgeThickness: 0.1,\n              edgeColor: 'black',\n              resolution: 400,\n            },\n          },\n          [OrientationMarkerTool.OVERLAY_MARKER_TYPES.AXES]: {},\n          [OrientationMarkerTool.OVERLAY_MARKER_TYPES.CUSTOM]: {\n            polyDataURL:\n              'https://raw.githubusercontent.com/Slicer/Slicer/80ad0a04dacf134754459557bf2638c63f3d1d1b/Base/Logic/Resources/OrientationMarkers/Human.vtp',\n          },\n        },\n      },\n    }\n  ) {\n    super(toolProps, defaultToolProps);\n    this.orientationMarkers = {};\n    this.configuration_invalidated = true;\n  }\n\n  onSetToolEnabled = (): void => {\n    this.initViewports();\n    this.configuration_invalidated = true;\n  };\n\n  onSetToolActive = (): void => {\n    this.initViewports();\n  };\n\n  onSetToolDisabled = (): void => {\n    this.cleanUpData();\n  };\n\n  private cleanUpData() {\n    const renderingEngines = getRenderingEngines();\n    const renderingEngine = renderingEngines[0];\n    const viewports = renderingEngine.getViewports();\n\n    viewports.forEach((viewport) => {\n      const orientationMarker = this.orientationMarkers[viewport.id];\n      if (!orientationMarker) {\n        return;\n      }\n\n      const { actor, orientationWidget } = orientationMarker;\n      orientationWidget?.setEnabled(false);\n      orientationWidget?.delete();\n      actor?.delete();\n\n      const renderWindow = viewport\n        .getRenderingEngine()\n        .offscreenMultiRenderWindow.getRenderWindow();\n      renderWindow.render();\n      viewport.getRenderingEngine().render();\n\n      delete this.orientationMarkers[viewport.id];\n    });\n  }\n\n  private initViewports() {\n    const renderingEngines = getRenderingEngines();\n    const renderingEngine = renderingEngines[0];\n\n    if (!renderingEngine) {\n      return;\n    }\n\n    let viewports = renderingEngine.getViewports();\n    viewports = filterViewportsWithToolEnabled(viewports, this.getToolName());\n    viewports.forEach((viewport) => this.addAxisActorInViewport(viewport));\n  }\n\n  async addAxisActorInViewport(viewport) {\n    const viewportId = viewport.id;\n    const type = this.configuration.overlayMarkerType;\n\n    const overlayConfiguration = this.configuration.overlayConfiguration[type];\n\n    if (this.orientationMarkers[viewportId]) {\n      const { actor, orientationWidget } = this.orientationMarkers[viewportId];\n      // remove the previous one\n      viewport.getRenderer().removeActor(actor);\n      orientationWidget.setEnabled(false);\n    }\n\n    let actor;\n    if (type === 1) {\n      actor = this.createAnnotationCube(overlayConfiguration);\n    } else if (type === 2) {\n      actor = vtkAxesActor.newInstance();\n    } else if (type === 3) {\n      actor = await this.createCustomActor();\n    }\n\n    const renderer = viewport.getRenderer();\n    const renderWindow = viewport\n      .getRenderingEngine()\n      .offscreenMultiRenderWindow.getRenderWindow();\n\n    const {\n      enabled,\n      viewportCorner,\n      viewportSize,\n      minPixelSize,\n      maxPixelSize,\n    } = this.configuration.orientationWidget;\n\n    const orientationWidget = vtkOrientationMarkerWidget.newInstance({\n      actor,\n      interactor: renderWindow.getInteractor(),\n      parentRenderer: renderer,\n    });\n\n    orientationWidget.setEnabled(enabled);\n    orientationWidget.setViewportCorner(viewportCorner);\n    orientationWidget.setViewportSize(viewportSize);\n    orientationWidget.setMinPixelSize(minPixelSize);\n    orientationWidget.setMaxPixelSize(maxPixelSize);\n\n    orientationWidget.updateMarkerOrientation();\n    this.orientationMarkers[viewportId] = {\n      orientationWidget,\n      actor,\n    };\n    renderWindow.render();\n    viewport.getRenderingEngine().render();\n\n    this.configuration_invalidated = false;\n  }\n\n  private async createCustomActor() {\n    const url =\n      this.configuration.overlayConfiguration[OverlayMarkerType.CUSTOM]\n        .polyDataURL;\n\n    const response = await fetch(url);\n    const arrayBuffer = await response.arrayBuffer();\n    const vtpReader = vtkXMLPolyDataReader.newInstance();\n    vtpReader.parseAsArrayBuffer(arrayBuffer);\n    vtpReader.update();\n\n    const polyData = vtkPolyData.newInstance();\n    polyData.shallowCopy(vtpReader.getOutputData());\n    polyData.getPointData().setActiveScalars('Color');\n    const mapper = vtkMapper.newInstance();\n    mapper.setInputData(polyData);\n    mapper.setColorModeToDirectScalars();\n\n    const actor = vtkActor.newInstance();\n    actor.setMapper(mapper);\n    actor.rotateZ(180);\n    return actor;\n  }\n\n  private createAnnotationCube(overlayConfiguration: any) {\n    const actor = vtkAnnotatedCubeActor.newInstance();\n    actor.setDefaultStyle({ ...overlayConfiguration.defaultStyle });\n    actor.setXPlusFaceProperty({\n      ...overlayConfiguration.faceProperties.xPlus,\n    });\n    actor.setXMinusFaceProperty({\n      ...overlayConfiguration.faceProperties.xMinus,\n    });\n    actor.setYPlusFaceProperty({\n      ...overlayConfiguration.faceProperties.yPlus,\n    });\n    actor.setYMinusFaceProperty({\n      ...overlayConfiguration.faceProperties.yMinus,\n    });\n    actor.setZPlusFaceProperty({\n      ...overlayConfiguration.faceProperties.zPlus,\n    });\n    actor.setZMinusFaceProperty({\n      ...overlayConfiguration.faceProperties.zMinus,\n    });\n    return actor;\n  }\n\n  async createAnnotatedCubeActor() {\n    const axes = vtkAnnotatedCubeActor.newInstance();\n    const { faceProperties, defaultStyle } = this.configuration.annotatedCube;\n\n    axes.setDefaultStyle(defaultStyle);\n\n    Object.keys(faceProperties).forEach((key) => {\n      const methodName = `set${\n        key.charAt(0).toUpperCase() + key.slice(1)\n      }FaceProperty`;\n      axes[methodName](faceProperties[key]);\n    });\n\n    return axes;\n  }\n}\n\nOrientationMarkerTool.toolName = 'OrientationMarker';\nexport default OrientationMarkerTool;\n","import { utilities as csUtils } from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\nimport getBoundingBoxAroundShape from '../boundingBox/getBoundingBoxAroundShape';\nimport extend2DBoundingBoxInViewAxis from '../boundingBox/extend2DBoundingBoxInViewAxis';\n\ntype Options = {\n  numSlicesToProject?: number;\n};\n\nfunction getBoundsIJKFromRectangleAnnotations(\n  annotations,\n  referenceVolume,\n  options = {} as Options\n) {\n  const AllBoundsIJK = [];\n  annotations.forEach((annotation) => {\n    const { data } = annotation;\n    const { points } = data.handles;\n\n    const { imageData, dimensions } = referenceVolume;\n\n    let pointsToUse = points;\n    // If the tool is a 2D tool but has projection points, use them\n    if (data.cachedStats?.projectionPoints) {\n      const { projectionPoints } = data.cachedStats;\n      pointsToUse = [].concat(...projectionPoints); // cannot use flat() because of typescript compiler right now\n    }\n\n    const rectangleCornersIJK = pointsToUse.map(\n      (world) => csUtils.transformWorldToIndex(imageData, world) as Types.Point3\n    );\n    let boundsIJK = getBoundingBoxAroundShape(rectangleCornersIJK, dimensions);\n\n    // If the tool is 2D but it is configured to project to X amount of slices\n    // Don't project the slices if projectionPoints have been used to define the extents\n    if (options.numSlicesToProject && !data.cachedStats?.projectionPoints) {\n      boundsIJK = extend2DBoundingBoxInViewAxis(\n        boundsIJK,\n        options.numSlicesToProject\n      );\n    }\n\n    AllBoundsIJK.push(boundsIJK);\n  });\n\n  if (AllBoundsIJK.length === 1) {\n    return AllBoundsIJK[0];\n  }\n\n  // Get the intersection of all the bounding boxes\n  // This is the bounding box that contains all the ROIs\n  const boundsIJK = AllBoundsIJK.reduce(\n    (accumulator, currentValue) => {\n      return {\n        iMin: Math.min(accumulator.iMin, currentValue.iMin),\n        jMin: Math.min(accumulator.jMin, currentValue.jMin),\n        kMin: Math.min(accumulator.kMin, currentValue.kMin),\n        iMax: Math.max(accumulator.iMax, currentValue.iMax),\n        jMax: Math.max(accumulator.jMax, currentValue.jMax),\n        kMax: Math.max(accumulator.kMax, currentValue.kMax),\n      };\n    },\n    {\n      iMin: Infinity,\n      jMin: Infinity,\n      kMin: Infinity,\n      iMax: -Infinity,\n      jMax: -Infinity,\n      kMax: -Infinity,\n    }\n  );\n\n  return boundsIJK;\n}\n\nexport default getBoundsIJKFromRectangleAnnotations;\n","import type { Types } from '@cornerstonejs/core';\nimport { state } from '../../stateManagement/annotation';\nimport {\n  RectangleROIStartEndThresholdTool,\n  RectangleROIThresholdTool,\n} from '../../tools';\n\nimport thresholdVolumeByRange from './thresholdVolumeByRange';\nimport getBoundsIJKFromRectangleAnnotations from '../rectangleROITool/getBoundsIJKFromRectangleAnnotations';\nimport { ThresholdInformation } from './utilities';\n\nexport type ThresholdOptions = {\n  numSlicesToProject?: number; // number of slices to project before and after current slice\n  overwrite: boolean;\n  overlapType?: number; // type of the voxel overlap\n};\n\nexport type AnnotationForThresholding = {\n  data: {\n    handles: {\n      points: Types.Point3[];\n    };\n    cachedStats?: {\n      projectionPoints?: Types.Point3[][];\n    };\n  };\n};\n\n/**\n * It uses the provided rectangleROI annotations (either RectangleROIThreshold, or\n * RectangleROIStartEndThreshold) to compute an ROI that is the intersection of\n * all the annotations. Then it uses the rectangleROIThreshold utility to threshold\n * the volume.\n * @param annotationUIDs - rectangleROI annotationsUIDs to use for ROI\n * @param segmentationVolume - the segmentation volume\n * @param thresholdVolumeInformation - object array containing the volume data and range threshold values\n * @param options - options for thresholding\n * @returns\n */\nfunction rectangleROIThresholdVolumeByRange(\n  annotationUIDs: string[],\n  segmentationVolume: Types.IImageVolume,\n  thresholdVolumeInformation: ThresholdInformation[],\n  options: ThresholdOptions\n): Types.IImageVolume {\n  const annotations = annotationUIDs.map((annotationUID) => {\n    return state.getAnnotation(annotationUID);\n  });\n\n  _validateAnnotations(annotations);\n\n  let boundsIJK;\n  for (let i = 0; i < thresholdVolumeInformation.length; i++) {\n    // make sure that the boundsIJK are generated by the correct volume\n    const volumeSize =\n      thresholdVolumeInformation[i].volume.getScalarData().length;\n    if (volumeSize === segmentationVolume.getScalarData().length || i === 0) {\n      boundsIJK = getBoundsIJKFromRectangleAnnotations(\n        annotations,\n        thresholdVolumeInformation[i].volume,\n        options\n      );\n    }\n  }\n\n  const outputSegmentationVolume = thresholdVolumeByRange(\n    segmentationVolume,\n    thresholdVolumeInformation,\n    { ...options, boundsIJK }\n  );\n\n  return outputSegmentationVolume;\n}\n\nfunction _validateAnnotations(annotations) {\n  const validToolNames = [\n    RectangleROIThresholdTool.toolName,\n    RectangleROIStartEndThresholdTool.toolName,\n  ];\n\n  for (const annotation of annotations) {\n    const name = annotation.metadata.toolName;\n    if (!validToolNames.includes(name)) {\n      throw new Error(\n        'rectangleROIThresholdVolumeByRange only supports RectangleROIThreshold and RectangleROIStartEndThreshold annotations'\n      );\n    }\n  }\n}\n\nexport default rectangleROIThresholdVolumeByRange;\n","import { Types } from '@cornerstonejs/core';\nimport { volumeLoader, utilities as csUtils } from '@cornerstonejs/core';\n\n/**\n * Given a list of labelmaps (with the possibility of overlapping regions), and\n * a segmentIndex it creates a new labelmap with the same dimensions as the input labelmaps,\n * but merges them into a single labelmap for the segmentIndex. It wipes out\n * all other segment Indices. This is useful for calculating statistics regarding\n * a specific segment when there are overlapping regions between labelmap (e.g. TMTV)\n *\n * @param labelmaps - Array of labelmaps\n * @param segmentIndex - The segment index to merge\n * @returns Merged labelmap\n */\nfunction createMergedLabelmapForIndex(\n  labelmaps: Array<Types.IImageVolume>,\n  segmentIndex = 1,\n  volumeId = 'mergedLabelmap'\n): Types.IImageVolume {\n  labelmaps.forEach(({ direction, dimensions, origin, spacing }) => {\n    if (\n      !csUtils.isEqual(dimensions, labelmaps[0].dimensions) ||\n      !csUtils.isEqual(direction, labelmaps[0].direction) ||\n      !csUtils.isEqual(spacing, labelmaps[0].spacing) ||\n      !csUtils.isEqual(origin, labelmaps[0].origin)\n    ) {\n      throw new Error('labelmaps must have the same size and shape');\n    }\n  });\n\n  const labelmap = labelmaps[0];\n\n  const arrayType = (labelmap.getScalarData() as any).constructor;\n  const outputData = new arrayType(labelmap.getScalarData().length);\n\n  labelmaps.forEach((labelmap) => {\n    const scalarData = labelmap.getScalarData();\n    for (let i = 0; i < scalarData.length; i++) {\n      if (scalarData[i] === segmentIndex) {\n        outputData[i] = segmentIndex;\n      }\n    }\n  });\n\n  const options = {\n    scalarData: outputData,\n    metadata: labelmap.metadata,\n    spacing: labelmap.spacing,\n    origin: labelmap.origin,\n    direction: labelmap.direction,\n    dimensions: labelmap.dimensions,\n  };\n\n  const preventCache = true;\n  // Todo: following should be async\n  const mergedVolume = volumeLoader.createLocalVolume(\n    options,\n    volumeId,\n    preventCache\n  );\n\n  return mergedVolume;\n}\n\nexport default createMergedLabelmapForIndex;\n","import { isValidLabelmapConfig } from '../../tools/displayTools/Labelmap/labelmapConfig';\nimport SegmentationRepresentation from '../../enums/SegmentationRepresentations';\nimport { RepresentationConfig } from '../../types/SegmentationStateTypes';\n\n/**\n * Given a representation type and a configuration, return true if the\n * configuration is valid for that representation type\n * @param representationType - The type of segmentation representation\n * @param config - RepresentationConfig\n * @returns A boolean value.\n */\nexport default function isValidRepresentationConfig(\n  representationType: string,\n  config: RepresentationConfig\n): boolean {\n  switch (representationType) {\n    case SegmentationRepresentation.Labelmap:\n      return isValidLabelmapConfig(config);\n    default:\n      throw new Error(`Unknown representation type: ${representationType}`);\n  }\n}\n","import getDefaultLabelmapConfig from '../../tools/displayTools/Labelmap/labelmapConfig';\nimport SegmentationRepresentation from '../../enums/SegmentationRepresentations';\nimport { Segmentation } from '../../types/SegmentationStateTypes';\n\n/**\n * It returns a configuration object for the given representation type.\n * @param representationType - The type of segmentation representation\n * @returns A representation configuration object.\n */\nexport default function getDefaultRepresentationConfig(\n  segmentation: Segmentation\n) {\n  const { type: representationType } = segmentation;\n  switch (representationType) {\n    case SegmentationRepresentation.Labelmap:\n      return getDefaultLabelmapConfig();\n    default:\n      throw new Error(`Unknown representation type: ${representationType}`);\n  }\n}\n","import { _cloneDeep } from 'lodash.clonedeep';\nimport {\n  getEnabledElementByIds,\n  volumeLoader,\n  VolumeViewport,\n  utilities as csUtils,\n} from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\n\n/**\n * Create a new 3D segmentation volume from the default imageData presented in\n * the first actor of the viewport. It looks at the metadata of the imageData\n * to determine the volume dimensions and spacing if particular options are not provided.\n *\n * @param viewportId - The Id of the viewport from which to derive the volume from.\n * @param renderingEngineId - The Id of the rendering engine the viewport belongs to.\n * @param [segmentationId] - The Id to name the generated segmentation. Autogenerated if not given.\n * @param [options] - LabelmapOptions\n * @returns A promise that resolves to the Id of the new labelmap volume.\n */\nexport default async function createLabelmapVolumeForViewport(input: {\n  viewportId: string;\n  renderingEngineId: string;\n  segmentationId?: string;\n  options?: {\n    volumeId?: string;\n    scalarData?: Float32Array | Uint8Array | Uint16Array | Int16Array;\n    targetBuffer?: {\n      type: 'Float32Array' | 'Uint8Array' | 'Uint16Array' | 'Int8Array';\n    };\n    metadata?: any;\n    dimensions?: Types.Point3;\n    spacing?: Types.Point3;\n    origin?: Types.Point3;\n    direction?: Float32Array;\n  };\n}): Promise<string> {\n  const { viewportId, renderingEngineId, options } = input;\n  let { segmentationId } = input;\n  const enabledElement = getEnabledElementByIds(viewportId, renderingEngineId);\n\n  if (!enabledElement) {\n    throw new Error('element disabled');\n  }\n\n  const { viewport } = enabledElement;\n  if (!(viewport instanceof VolumeViewport)) {\n    throw new Error('Segmentation only supports VolumeViewport');\n  }\n\n  const { uid } = viewport.getDefaultActor();\n\n  if (segmentationId === undefined) {\n    // Name the segmentation volume with the viewport Id\n    segmentationId = `${uid}-based-segmentation-${\n      options?.volumeId ?? csUtils.uuidv4().slice(0, 8)\n    }`;\n  }\n\n  if (options) {\n    // create a new labelmap with its own properties\n    // This allows creation of a higher resolution labelmap vs reference volume\n    const properties = _cloneDeep(options);\n    await volumeLoader.createLocalVolume(properties, segmentationId);\n  } else {\n    // create a labelmap from a reference volume\n    const { uid: volumeId } = viewport.getDefaultActor();\n    await volumeLoader.createAndCacheDerivedVolume(volumeId, {\n      volumeId: segmentationId,\n    });\n  }\n\n  return segmentationId;\n}\n","import { getToolGroup } from '../../store/ToolGroupManager';\nimport BrushTool from '../../tools/segmentation/BrushTool';\nimport triggerAnnotationRenderForViewportIds from '../triggerAnnotationRenderForViewportIds';\nimport { getRenderingEngine } from '@cornerstonejs/core';\nimport getBrushToolInstances from './utilities';\n\n/**\n * Sets the brush size for all brush-based tools in a given tool group.\n * @param toolGroupId - The ID of the tool group to set the brush size for.\n * @param brushSize - The new brush size to set.\n * @param toolName - The name of the specific tool to set the brush size for (optional)\n * If not provided, all brush-based tools in the tool group will be affected.\n */\nexport function setBrushSizeForToolGroup(\n  toolGroupId: string,\n  brushSize: number,\n  toolName?: string\n): void {\n  const toolGroup = getToolGroup(toolGroupId);\n\n  if (toolGroup === undefined) {\n    return;\n  }\n\n  const brushBasedToolInstances = getBrushToolInstances(toolGroupId, toolName);\n\n  brushBasedToolInstances.forEach((tool: BrushTool) => {\n    tool.configuration.brushSize = brushSize;\n\n    // Invalidate the brush being rendered so it can update.\n    tool.invalidateBrushCursor();\n  });\n\n  // Trigger an annotation render for any viewports on the toolgroup\n  const viewportsInfo = toolGroup.getViewportsInfo();\n\n  const viewportsInfoArray = Object.keys(viewportsInfo).map(\n    (key) => viewportsInfo[key]\n  );\n\n  if (!viewportsInfoArray.length) {\n    return;\n  }\n\n  const { renderingEngineId } = viewportsInfoArray[0];\n\n  // Use helper to get array of viewportIds, or we just end up doing this mapping\n  // ourselves here.\n  const viewportIds = toolGroup.getViewportIds();\n\n  const renderingEngine = getRenderingEngine(renderingEngineId);\n\n  triggerAnnotationRenderForViewportIds(renderingEngine, viewportIds);\n}\n\n/**\n * Gets the brush size for the first brush-based tool instance in a given tool group.\n * @param toolGroupId - The ID of the tool group to get the brush size for.\n * @param toolName - The name of the specific tool to get the brush size for (Optional)\n * If not provided, the first brush-based tool instance in the tool group will be used.\n * @returns The brush size of the selected tool instance, or undefined if no brush-based tool instance is found.\n */\nexport function getBrushSizeForToolGroup(\n  toolGroupId: string,\n  toolName?: string\n): void {\n  const toolGroup = getToolGroup(toolGroupId);\n\n  if (toolGroup === undefined) {\n    return;\n  }\n\n  const toolInstances = toolGroup._toolInstances;\n\n  if (!Object.keys(toolInstances).length) {\n    return;\n  }\n\n  const brushBasedToolInstances = getBrushToolInstances(toolGroupId, toolName);\n\n  // one is enough as they share the same brush size\n  const brushToolInstance = brushBasedToolInstances[0];\n\n  if (!brushToolInstance) {\n    return;\n  }\n\n  // TODO -> Assumes the brush sizes are the same and set via these helpers.\n  return brushToolInstance.configuration.brushSize;\n}\n","import type { Types } from '@cornerstonejs/core';\nimport { getToolGroup } from '../../store/ToolGroupManager';\nimport triggerAnnotationRenderForViewportIds from '../triggerAnnotationRenderForViewportIds';\nimport { getRenderingEngine } from '@cornerstonejs/core';\nimport getBrushToolInstances from './utilities';\n\nexport function setBrushThresholdForToolGroup(\n  toolGroupId: string,\n  threshold: Types.Point2\n) {\n  const toolGroup = getToolGroup(toolGroupId);\n\n  if (toolGroup === undefined) {\n    return;\n  }\n\n  const brushBasedToolInstances = getBrushToolInstances(toolGroupId);\n\n  brushBasedToolInstances.forEach((tool) => {\n    tool.configuration.strategySpecificConfiguration.THRESHOLD_INSIDE_CIRCLE.threshold =\n      threshold;\n  });\n\n  // Trigger an annotation render for any viewports on the toolgroup\n  const viewportsInfo = toolGroup.getViewportsInfo();\n\n  if (!viewportsInfo.length) {\n    return;\n  }\n\n  const { renderingEngineId } = viewportsInfo[0];\n\n  // Use helper to get array of viewportIds, or we just end up doing this mapping\n  // ourselves here.\n  const viewportIds = toolGroup.getViewportIds();\n\n  const renderingEngine = getRenderingEngine(renderingEngineId);\n\n  triggerAnnotationRenderForViewportIds(renderingEngine, viewportIds);\n}\n\nexport function getBrushThresholdForToolGroup(toolGroupId: string) {\n  const toolGroup = getToolGroup(toolGroupId);\n\n  if (toolGroup === undefined) {\n    return;\n  }\n\n  const toolInstances = toolGroup._toolInstances;\n\n  if (!Object.keys(toolInstances).length) {\n    return;\n  }\n\n  const brushBasedToolInstances = getBrushToolInstances(toolGroupId);\n  const brushToolInstance = brushBasedToolInstances[0];\n\n  if (!brushToolInstance) {\n    return;\n  }\n\n  // TODO -> Assumes the\n  return brushToolInstance.configuration.strategySpecificConfiguration\n    .THRESHOLD_INSIDE_CIRCLE.threshold;\n}\n","import { Types } from '@cornerstonejs/core';\nimport { pointInShapeCallback } from '../../utilities';\nimport { triggerSegmentationDataModified } from '../../stateManagement/segmentation/triggerSegmentationEvents';\nimport {\n  getVoxelOverlap,\n  processVolumes,\n  ThresholdInformation,\n} from './utilities';\n\n/**\n * It thresholds a segmentation volume based on a set of threshold values with\n * respect to a list of volumes and respective threshold ranges.\n * @param segmentationVolume - the segmentation volume to be modified\n * @param segmentationIndex - the index of the segmentation to modify\n * @param thresholdVolumeInformation - array of objects containing volume data\n * and a range (lower and upper values) to threshold\n * @param overlapType - indicates if the user requires all voxels pass\n * (overlapType = 1) or any voxel pass (overlapType = 0)\n * @returns\n */\nfunction thresholdSegmentationByRange(\n  segmentationVolume: Types.IImageVolume,\n  segmentationIndex: number,\n  thresholdVolumeInformation: ThresholdInformation[],\n  overlapType: number\n): Types.IImageVolume {\n  const scalarData = segmentationVolume.getScalarData();\n\n  // prepare a list of volume information objects for callback functions\n  const { baseVolumeIdx, volumeInfoList } = processVolumes(\n    segmentationVolume,\n    thresholdVolumeInformation\n  );\n\n  /**\n   * This function will test all overlaps between a voxel in base volume\n   * (the reference for segmentation volume creation) and voxels in other\n   * volumes.\n   * If the segmentation volume and the image volume are the same size,\n   * checks if the scalar data at each point is within the threshold values.\n   * If the segmentation volume and the image volume are different sizes,\n   * checks the voxel overlap\n   */\n  volumeInfoList.forEach((volumeInfo) => {\n    const { volumeSize } = volumeInfo;\n\n    if (volumeSize === scalarData.length) {\n      _handleSameSizeVolume(scalarData, segmentationIndex, volumeInfo);\n    } else {\n      _handleDifferentSizeVolume(\n        scalarData,\n        segmentationIndex,\n        volumeInfo,\n        volumeInfoList,\n        baseVolumeIdx,\n        overlapType\n      );\n    }\n  });\n\n  triggerSegmentationDataModified(segmentationVolume.volumeId);\n\n  return segmentationVolume;\n}\n\nfunction _handleDifferentSizeVolume(\n  scalarData: Types.VolumeScalarData,\n  segmentationIndex: number,\n  volumeInfo: any,\n  volumeInfoList: any,\n  baseVolumeIdx: number,\n  overlapType: number\n) {\n  const { imageData, lower, upper, dimensions } = volumeInfo;\n\n  let total, overlaps, range;\n\n  for (let i = 0; i < scalarData.length; i++) {\n    if (scalarData[i] === segmentationIndex) {\n      const overlapBounds = getVoxelOverlap(\n        imageData,\n        dimensions,\n        volumeInfoList[baseVolumeIdx].spacing,\n        volumeInfoList[baseVolumeIdx].imageData.getPoint(i)\n      );\n\n      const callbackOverlap = ({ value }) => {\n        total = total + 1;\n        if (value >= range.lower && value <= range.upper) {\n          overlaps = overlaps + 1;\n        }\n      };\n\n      total = 0;\n      overlaps = 0;\n      range = { lower, upper };\n      let overlapTest = false;\n\n      // check all voxel overlaps\n      pointInShapeCallback(\n        imageData,\n        () => true,\n        callbackOverlap,\n        overlapBounds\n      );\n\n      overlapTest = overlapType === 0 ? overlaps > 0 : overlaps === total;\n      scalarData[i] = overlapTest ? segmentationIndex : 0;\n    }\n  }\n  return { total, range, overlaps };\n}\n\nfunction _handleSameSizeVolume(\n  scalarData: Types.VolumeScalarData,\n  segmentationIndex: number,\n  volumeInfo: any\n) {\n  const { referenceValues, lower, upper } = volumeInfo;\n\n  for (let i = 0; i < scalarData.length; i++) {\n    if (scalarData[i] === segmentationIndex) {\n      const value = referenceValues[i];\n      scalarData[i] = value >= lower && value <= upper ? segmentationIndex : 0;\n    }\n  }\n}\n\nexport default thresholdSegmentationByRange;\n","import { Types } from '@cornerstonejs/core';\n\n/**\n * Returns the orientation of the vector in the patient coordinate system.\n * @public\n *\n * @param vector - Input array\n * @returns The orientation in the patient coordinate system.\n */\nexport default function getOrientationStringLPS(vector: Types.Point3): string {\n  // Thanks to David Clunie\n  // https://sites.google.com/site/dicomnotes/\n\n  let orientation = '';\n  const orientationX = vector[0] < 0 ? 'R' : 'L';\n  const orientationY = vector[1] < 0 ? 'A' : 'P';\n  const orientationZ = vector[2] < 0 ? 'F' : 'H';\n\n  // Should probably make this a function vector3.abs\n  const abs = [Math.abs(vector[0]), Math.abs(vector[1]), Math.abs(vector[2])];\n\n  const MIN = 0.0001;\n\n  for (let i = 0; i < 3; i++) {\n    if (abs[0] > MIN && abs[0] > abs[1] && abs[0] > abs[2]) {\n      orientation += orientationX;\n      abs[0] = 0;\n    } else if (abs[1] > MIN && abs[1] > abs[0] && abs[1] > abs[2]) {\n      orientation += orientationY;\n      abs[1] = 0;\n    } else if (abs[2] > MIN && abs[2] > abs[0] && abs[2] > abs[1]) {\n      orientation += orientationZ;\n      abs[2] = 0;\n    } else if (abs[0] > MIN && abs[1] > MIN && abs[0] === abs[1]) {\n      orientation += orientationX + orientationY;\n      abs[0] = 0;\n      abs[1] = 0;\n    } else if (abs[0] > MIN && abs[2] > MIN && abs[0] === abs[2]) {\n      orientation += orientationX + orientationZ;\n      abs[0] = 0;\n      abs[2] = 0;\n    } else if (abs[1] > MIN && abs[2] > MIN && abs[1] === abs[2]) {\n      orientation += orientationY + orientationZ;\n      abs[1] = 0;\n      abs[2] = 0;\n    } else {\n      break;\n    }\n  }\n\n  return orientation;\n}\n","/**\n * Inverts an orientation string.\n * @public\n *\n * @param orientationString - The orientation.\n * @returns The inverted orientationString.\n */\nexport default function invertOrientationStringLPS(\n  orientationString: string\n): string {\n  let inverted = orientationString.replace('H', 'f');\n\n  inverted = inverted.replace('F', 'h');\n  inverted = inverted.replace('R', 'l');\n  inverted = inverted.replace('L', 'r');\n  inverted = inverted.replace('A', 'p');\n  inverted = inverted.replace('P', 'a');\n  inverted = inverted.toUpperCase();\n\n  return inverted;\n}\n","/**\n * CINE Tool Events\n */\nenum Events {\n  CLIP_STOPPED = 'CORNERSTONE_CINE_TOOL_STOPPED',\n  CLIP_STARTED = 'CORNERSTONE_CINE_TOOL_STARTED',\n}\n\nexport default Events;\n","import { getEnabledElement } from '@cornerstonejs/core';\nimport { CINETypes } from '../../types';\n\nconst state: Record<string, CINETypes.ToolData> = {};\n\nfunction addToolState(element: HTMLDivElement, data: CINETypes.ToolData): void {\n  const enabledElement = getEnabledElement(element);\n  const { viewportId } = enabledElement;\n  state[viewportId] = data;\n}\n\nfunction getToolState(element: HTMLDivElement): CINETypes.ToolData | undefined {\n  const enabledElement = getEnabledElement(element);\n  const { viewportId } = enabledElement;\n  return state[viewportId];\n}\n\nexport { addToolState, getToolState };\n","import { glMatrix, vec3 } from 'gl-matrix';\nimport {\n  utilities as csUtils,\n  getEnabledElement,\n  StackViewport,\n  VolumeViewport,\n  cache,\n  BaseVolumeViewport,\n  Enums,\n} from '@cornerstonejs/core';\n\nimport { Types } from '@cornerstonejs/core';\nimport CINE_EVENTS from './events';\nimport { addToolState, getToolState } from './state';\nimport { CINETypes } from '../../types';\nimport scroll from '../scroll';\n\nconst { ViewportStatus } = Enums;\nconst { triggerEvent } = csUtils;\n\nconst debounced = true;\nconst loop = true;\nconst dynamicVolumesPlayingMap = new Map();\n\n/**\n * Starts playing a clip or adjusts the frame rate of an already playing clip.  framesPerSecond is\n * optional and defaults to 30 if not specified.  A negative framesPerSecond will play the clip in reverse.\n * The element must be a stack of images\n * @param element - HTML Element\n * @param framesPerSecond - Number of frames per second\n */\nfunction playClip(\n  element: HTMLDivElement,\n  playClipOptions: CINETypes.PlayClipOptions\n): void {\n  let playClipTimeouts;\n  let playClipIsTimeVarying;\n\n  if (element === undefined) {\n    throw new Error('playClip: element must not be undefined');\n  }\n\n  const enabledElement = getEnabledElement(element);\n\n  if (!enabledElement) {\n    throw new Error(\n      'playClip: element must be a valid Cornerstone enabled element'\n    );\n  }\n\n  // 4D Cine is enabled by default\n  playClipOptions.dynamicCineEnabled =\n    playClipOptions.dynamicCineEnabled ?? true;\n\n  const { viewport } = enabledElement;\n  const volume = _getVolumeFromViewport(viewport);\n  const playClipContext = _createCinePlayContext(viewport, playClipOptions);\n  let playClipData = getToolState(element);\n\n  const isDynamicCinePlaying =\n    playClipOptions.dynamicCineEnabled && volume?.isDynamicVolume();\n\n  // If user is trying to play CINE for a 4D volume it first needs\n  // to stop CINE that has may be playing for any other viewport.\n  if (isDynamicCinePlaying) {\n    _stopDynamicVolumeCine(element);\n  }\n\n  if (!playClipData) {\n    playClipData = {\n      intervalId: undefined,\n      framesPerSecond: 30,\n      lastFrameTimeStamp: undefined,\n      ignoreFrameTimeVector: false,\n      usingFrameTimeVector: false,\n      frameTimeVector: playClipOptions.frameTimeVector ?? undefined,\n      speed: playClipOptions.frameTimeVectorSpeedMultiplier ?? 1,\n      reverse: playClipOptions.reverse ?? false,\n      loop: playClipOptions.loop ?? true,\n    };\n    addToolState(element, playClipData);\n  } else {\n    // Make sure the specified clip is not running before any property update.\n    // If a 3D CINE was playing it passes isDynamicCinePlaying as FALSE to\n    // prevent stopping a 4D CINE in case it is playing on another viewport.\n    _stopClip(element, isDynamicCinePlaying);\n  }\n\n  playClipData.dynamicCineEnabled = playClipOptions.dynamicCineEnabled;\n\n  // If a framesPerSecond is specified and is valid, update the playClipData now\n  if (\n    playClipOptions.framesPerSecond < 0 ||\n    playClipOptions.framesPerSecond > 0\n  ) {\n    playClipData.framesPerSecond = Number(playClipOptions.framesPerSecond);\n    playClipData.reverse = playClipData.framesPerSecond < 0;\n    // If framesPerSecond is given, frameTimeVector will be ignored...\n    playClipData.ignoreFrameTimeVector = true;\n  }\n\n  // Determine if frame time vector should be used instead of a fixed frame rate...\n  if (\n    playClipData.ignoreFrameTimeVector !== true &&\n    playClipData.frameTimeVector &&\n    playClipData.frameTimeVector.length === playClipContext.numScrollSteps &&\n    playClipContext.frameTimeVectorEnabled\n  ) {\n    const { timeouts, isTimeVarying } = _getPlayClipTimeouts(\n      playClipData.frameTimeVector,\n      playClipData.speed\n    );\n\n    playClipTimeouts = timeouts;\n    playClipIsTimeVarying = isTimeVarying;\n  }\n\n  // This function encapsulates the frame rendering logic...\n  const playClipAction = () => {\n    const { numScrollSteps, currentStepIndex } = playClipContext;\n    let newStepIndex = currentStepIndex + (playClipData.reverse ? -1 : 1);\n    const newStepIndexOutOfRange =\n      newStepIndex < 0 || newStepIndex >= numScrollSteps;\n\n    if (!loop && newStepIndexOutOfRange) {\n      // If a 3D CINE was playing it passes isDynamicCinePlaying as FALSE to\n      // prevent stopping a 4D CINE in case it is playing on another viewport.\n      _stopClip(element, isDynamicCinePlaying);\n\n      const eventDetail = { element };\n\n      triggerEvent(element, CINE_EVENTS.CLIP_STOPPED, eventDetail);\n      return;\n    }\n\n    // Loop around if newStepIndex is out of range\n    if (newStepIndex >= numScrollSteps) {\n      newStepIndex = 0;\n    } else if (newStepIndex < 0) {\n      newStepIndex = numScrollSteps - 1;\n    }\n\n    const delta = newStepIndex - currentStepIndex;\n\n    if (delta) {\n      playClipContext.scroll(delta);\n    }\n  };\n\n  if (isDynamicCinePlaying) {\n    dynamicVolumesPlayingMap.set(volume.volumeId, element);\n  }\n\n  // If playClipTimeouts array is available, not empty and its elements are NOT uniform ...\n  // ... (at least one timeout is different from the others), use alternate setTimeout implementation\n  if (\n    playClipTimeouts &&\n    playClipTimeouts.length > 0 &&\n    playClipIsTimeVarying\n  ) {\n    playClipData.usingFrameTimeVector = true;\n    playClipData.intervalId = window.setTimeout(\n      function playClipTimeoutHandler() {\n        playClipData.intervalId = window.setTimeout(\n          playClipTimeoutHandler,\n          playClipTimeouts[playClipContext.currentStepIndex]\n        );\n        playClipAction();\n      },\n      0\n    );\n  } else {\n    // ... otherwise user setInterval implementation which is much more efficient.\n    playClipData.usingFrameTimeVector = false;\n    playClipData.intervalId = window.setInterval(\n      playClipAction,\n      1000 / Math.abs(playClipData.framesPerSecond)\n    );\n  }\n\n  const eventDetail = {\n    element,\n  };\n\n  triggerEvent(element, CINE_EVENTS.CLIP_STARTED, eventDetail);\n}\n\n/**\n * Stops an already playing clip.\n * @param element - HTML Element\n */\nfunction stopClip(element: HTMLDivElement): void {\n  _stopClip(element, true);\n}\n\nfunction _stopClip(element: HTMLDivElement, stopDynamicCine: boolean): void {\n  const enabledElement = getEnabledElement(element);\n  if (!enabledElement) {\n    return;\n  }\n  const { viewport } = enabledElement;\n  const cineToolData = getToolState(viewport.element);\n\n  if (cineToolData) {\n    _stopClipWithData(cineToolData);\n  }\n\n  if (stopDynamicCine && viewport instanceof BaseVolumeViewport) {\n    _stopDynamicVolumeCine(element);\n  }\n}\n\n/**\n * [private] Stops any CINE playing for the dynamic volume loaded on this viewport\n * @param element - HTML Element\n */\nfunction _stopDynamicVolumeCine(element) {\n  const { viewport } = getEnabledElement(element);\n  const volume = _getVolumeFromViewport(viewport);\n\n  // If the current viewport has a 4D volume loaded it may be playing\n  // if it is also loaded on another viewport and user has started CINE\n  // for that one. This guarantees the other viewport will also be stopped.\n  if (volume?.isDynamicVolume()) {\n    const dynamicCineElement = dynamicVolumesPlayingMap.get(volume.volumeId);\n\n    dynamicVolumesPlayingMap.delete(volume.volumeId);\n\n    if (dynamicCineElement && dynamicCineElement !== element) {\n      stopClip(<HTMLDivElement>dynamicCineElement);\n    }\n  }\n}\n\n/**\n * [private] Turns a Frame Time Vector (0018,1065) array into a normalized array of timeouts. Each element\n * ... of the resulting array represents the amount of time each frame will remain on the screen.\n * @param vector - A Frame Time Vector (0018,1065) as specified in section C.7.6.5.1.2 of DICOM standard.\n * @param speed - A speed factor which will be applied to each element of the resulting array.\n * @returns An array with timeouts for each animation frame.\n */\nfunction _getPlayClipTimeouts(vector: number[], speed: number) {\n  let i;\n  let sample;\n  let delay;\n  let sum = 0;\n  const limit = vector.length;\n  const timeouts = [];\n\n  // Initialize time varying to false\n  let isTimeVarying = false;\n\n  if (typeof speed !== 'number' || speed <= 0) {\n    speed = 1;\n  }\n\n  // First element of a frame time vector must be discarded\n  for (i = 1; i < limit; i++) {\n    // eslint-disable-next-line no-bitwise\n    delay = (Number(vector[i]) / speed) | 0; // Integral part only\n    timeouts.push(delay);\n    if (i === 1) {\n      // Use first item as a sample for comparison\n      sample = delay;\n    } else if (delay !== sample) {\n      isTimeVarying = true;\n    }\n\n    sum += delay;\n  }\n\n  if (timeouts.length > 0) {\n    if (isTimeVarying) {\n      // If it's a time varying vector, make the last item an average...\n      // eslint-disable-next-line no-bitwise\n      delay = (sum / timeouts.length) | 0;\n    } else {\n      delay = timeouts[0];\n    }\n\n    timeouts.push(delay);\n  }\n\n  return { timeouts, isTimeVarying };\n}\n\n/**\n * [private] Performs the heavy lifting of stopping an ongoing animation.\n * @param element - HTML Element\n * @param playClipData - The data from playClip that needs to be stopped.\n */\nfunction _stopClipWithData(playClipData) {\n  const id = playClipData.intervalId;\n\n  if (typeof id !== 'undefined') {\n    playClipData.intervalId = undefined;\n    if (playClipData.usingFrameTimeVector) {\n      clearTimeout(id);\n    } else {\n      clearInterval(id);\n    }\n  }\n}\n\nfunction _getVolumesFromViewport(viewport): Types.IImageVolume[] {\n  return viewport\n    .getActors()\n    .map((actor) => cache.getVolume(actor.uid))\n    .filter((volume) => !!volume);\n}\n\nfunction _getVolumeFromViewport(viewport): Types.IImageVolume {\n  const volumes = _getVolumesFromViewport(viewport);\n  const dynamicVolume = volumes.find((volume) => volume.isDynamicVolume());\n\n  return dynamicVolume ?? volumes[0];\n}\n\nfunction _createStackViewportCinePlayContext(\n  viewport: StackViewport,\n  waitForRendered: number\n): CINETypes.CinePlayContext {\n  const imageIds = viewport.getImageIds();\n\n  return {\n    get numScrollSteps(): number {\n      return imageIds.length;\n    },\n    get currentStepIndex(): number {\n      return viewport.getTargetImageIdIndex();\n    },\n    get frameTimeVectorEnabled(): boolean {\n      // It is always in acquired orientation\n      return true;\n    },\n    waitForRenderedCount: 0,\n    scroll(delta: number): void {\n      if (\n        this.waitForRenderedCount <= waitForRendered &&\n        viewport.viewportStatus !== ViewportStatus.RENDERED\n      ) {\n        this.waitForRenderedCount++;\n        return;\n      }\n      this.waitForRenderedCount = 0;\n      scroll(viewport, { delta, debounceLoading: debounced });\n    },\n  };\n}\n\nfunction _createVolumeViewportCinePlayContext(\n  viewport: VolumeViewport,\n  volume: Types.IImageVolume\n): CINETypes.CinePlayContext {\n  const { volumeId } = volume;\n  const cachedScrollInfo = {\n    viewPlaneNormal: vec3.create(),\n    scrollInfo: null,\n  };\n\n  const getScrollInfo = () => {\n    const camera = viewport.getCamera();\n    const updateCache =\n      !cachedScrollInfo.scrollInfo ||\n      !vec3.equals(camera.viewPlaneNormal, cachedScrollInfo.viewPlaneNormal);\n\n    // Number of steps would change only after rotating the volume so it\n    // caches the result and recomputes only when necessary. Until it is\n    // rotated the current frame is updated locally\n    if (updateCache) {\n      const scrollInfo = csUtils.getVolumeViewportScrollInfo(\n        viewport,\n        volumeId\n      );\n\n      cachedScrollInfo.viewPlaneNormal = camera.viewPlaneNormal;\n      cachedScrollInfo.scrollInfo = scrollInfo;\n    }\n\n    return cachedScrollInfo.scrollInfo;\n  };\n\n  return {\n    get numScrollSteps(): number {\n      return getScrollInfo().numScrollSteps;\n    },\n    get currentStepIndex(): number {\n      return getScrollInfo().currentStepIndex;\n    },\n    get frameTimeVectorEnabled(): boolean {\n      const camera = viewport.getCamera();\n      const volumeViewPlaneNormal = volume.direction\n        .slice(6, 9)\n        .map((x) => -x) as Types.Point3;\n      const dot = vec3.dot(volumeViewPlaneNormal, camera.viewPlaneNormal);\n\n      // Check if the volume is in acquired orientation\n      // it may be flipped or rotated in plane\n      return glMatrix.equals(dot, 1);\n    },\n    scroll(delta: number): void {\n      getScrollInfo().currentStepIndex += delta;\n      scroll(viewport, { delta });\n    },\n  };\n}\n\nfunction _createDynamicVolumeViewportCinePlayContext(\n  volume: Types.IDynamicImageVolume\n): CINETypes.CinePlayContext {\n  return {\n    get numScrollSteps(): number {\n      return volume.numTimePoints;\n    },\n    get currentStepIndex(): number {\n      return volume.timePointIndex;\n    },\n    get frameTimeVectorEnabled(): boolean {\n      // Looping throught time does not uses frameTimeVector\n      return false;\n    },\n    scroll(delta: number): void {\n      // Updating this property (setter) makes it move to the desired time point\n      volume.timePointIndex += delta;\n    },\n  };\n}\n\nfunction _createCinePlayContext(\n  viewport,\n  playClipOptions: CINETypes.PlayClipOptions\n): CINETypes.CinePlayContext {\n  if (viewport instanceof StackViewport) {\n    return _createStackViewportCinePlayContext(\n      viewport,\n      playClipOptions.waitForRendered ?? 30\n    );\n  }\n\n  if (viewport instanceof VolumeViewport) {\n    const volume = _getVolumeFromViewport(viewport);\n\n    if (playClipOptions.dynamicCineEnabled && volume?.isDynamicVolume()) {\n      return _createDynamicVolumeViewportCinePlayContext(\n        <Types.IDynamicImageVolume>volume\n      );\n    }\n\n    return _createVolumeViewportCinePlayContext(viewport, volume);\n  }\n\n  throw new Error('Unknown viewport type');\n}\n\nexport { playClip, stopClip };\n","import { Types } from '@cornerstonejs/core';\nimport { PlanarFreehandROITool } from '../../tools';\nimport { ToolGroupManager } from '../../store';\nimport { PlanarFreehandROIAnnotation } from '../../types/ToolSpecificAnnotationTypes';\nimport interpolateSegmentPoints from './interpolation/interpolateSegmentPoints';\n\nfunction shouldPreventInterpolation(\n  enabledElement: Types.IEnabledElement,\n  annotation: PlanarFreehandROIAnnotation,\n  knotsRatioPercentage: number\n): boolean {\n  if (!annotation?.data?.polyline || knotsRatioPercentage <= 0) {\n    return true;\n  }\n\n  if (!enabledElement.viewport) {\n    return true;\n  }\n\n  const { renderingEngineId, viewportId, FrameOfReferenceUID } = enabledElement;\n  const toolGroup = ToolGroupManager.getToolGroupForViewport(\n    viewportId,\n    renderingEngineId\n  );\n\n  if (annotation.metadata.FrameOfReferenceUID !== FrameOfReferenceUID) {\n    return true;\n  }\n\n  if (!toolGroup) {\n    return true;\n  }\n\n  const toolInstance = toolGroup.getToolInstance(annotation.metadata.toolName);\n\n  // strategy to prevent non PlanarFreehandTool\n  if (!(toolInstance instanceof PlanarFreehandROITool)) {\n    return true;\n  }\n\n  return (\n    toolInstance.isDrawing ||\n    toolInstance.isEditingOpen ||\n    toolInstance.isEditingClosed\n  );\n}\n/**\n * Interpolates a given annotation from a given enabledElement.\n * It mutates annotation param.\n * The param knotsRatioPercentage defines the percentage of points to be considered as knots on the interpolation process.\n * Interpolation will be skipped in case: annotation is not present in enabledElement (or there is no toolGroup associated with it), related tool is being modified.\n */\nexport default function interpolateAnnotation(\n  enabledElement: Types.IEnabledElement,\n  annotation: PlanarFreehandROIAnnotation,\n  knotsRatioPercentage: number\n): boolean {\n  // prevent running while there is any tool annotation being modified\n  if (\n    shouldPreventInterpolation(enabledElement, annotation, knotsRatioPercentage)\n  ) {\n    return false;\n  }\n\n  const { viewport } = enabledElement;\n  // use only 2 dimensions on interpolation (what visually matters),\n  // otherwise a 3d interpolation might have a totally different output as it consider one more dimension.\n  const canvasPoints = annotation.data.polyline.map(viewport.worldToCanvas);\n  const interpolatedCanvasPoints = <Types.Point2[]>(\n    interpolateSegmentPoints(\n      canvasPoints,\n      0,\n      canvasPoints.length,\n      knotsRatioPercentage\n    )\n  );\n\n  if (interpolatedCanvasPoints === canvasPoints) {\n    return false;\n  }\n\n  annotation.data.polyline = interpolatedCanvasPoints.map(\n    viewport.canvasToWorld\n  );\n\n  return true;\n}\n","import interpolateAnnotation from './interpolateAnnotation';\n\nexport default {\n  interpolateAnnotation,\n};\n\nexport { interpolateAnnotation };\n","import { getEnabledElement } from '@cornerstonejs/core';\n\nconst state: Record<number, any> = {};\n\nfunction addToolState(element: HTMLDivElement, data): void {\n  const enabledElement = getEnabledElement(element);\n  const { viewportId } = enabledElement;\n  state[viewportId] = data;\n}\n\nfunction getToolState(element: HTMLDivElement): any {\n  const enabledElement = getEnabledElement(element);\n  const { viewportId } = enabledElement;\n  return state[viewportId];\n}\n\nexport { addToolState, getToolState };\n","import { getEnabledElement, StackViewport, Enums } from '@cornerstonejs/core';\nimport { getToolState } from './state';\n\nexport const requestType = Enums.RequestType.Prefetch;\nexport const priority = 0;\n\nexport function range(lowEnd, highEnd) {\n  // Javascript version of Python's range function\n  // http://stackoverflow.com/questions/3895478/does-javascript-have-a-method-like-range-to-generate-an-array-based-on-suppl\n  lowEnd = Math.round(lowEnd) || 0;\n  highEnd = Math.round(highEnd) || 0;\n\n  const arr = [];\n  let c = highEnd - lowEnd + 1;\n\n  if (c <= 0) {\n    return arr;\n  }\n\n  while (c--) {\n    arr[c] = highEnd--;\n  }\n\n  return arr;\n}\n\nexport function nearestIndex(arr, x) {\n  // Return index of nearest values in array\n  // http://stackoverflow.com/questions/25854212/return-index-of-nearest-values-in-an-array\n  let low = 0;\n  let high = arr.length - 1;\n\n  arr.forEach((v, idx) => {\n    if (v < x) {\n      low = Math.max(idx, low);\n    } else if (v > x) {\n      high = Math.min(idx, high);\n    }\n  });\n\n  return { low, high };\n}\n\nexport function getStackData(element) {\n  const enabledElement = getEnabledElement(element);\n\n  if (!enabledElement) {\n    // Can be not valid if the data is changed part way through prefetch\n    return null;\n  }\n\n  const { viewport } = enabledElement;\n\n  if (!(viewport instanceof StackViewport)) {\n    throw new Error(\n      'stackPrefetch: element must be a StackViewport, VolumeViewport stackPrefetch not yet implemented'\n    );\n  }\n\n  return {\n    currentImageIdIndex: viewport.getCurrentImageIdIndex(),\n    imageIds: viewport.getImageIds(),\n  };\n}\n\nexport function getPromiseRemovedHandler(element) {\n  return function (e) {\n    const eventData = e.detail;\n\n    // When an imagePromise has been pushed out of the cache, re-add its index\n    // It to the indicesToRequest list so that it will be retrieved later if the\n    // CurrentImageIdIndex is changed to an image nearby\n    let stackData;\n\n    try {\n      // It will throw an exception in some cases (eg: thumbnails)\n      stackData = getStackData(element);\n    } catch (error) {\n      return;\n    }\n\n    if (!stackData || !stackData.imageIds || stackData.imageIds.length === 0) {\n      return;\n    }\n\n    const stack = stackData;\n    const imageIdIndex = stack.imageIds.indexOf(eventData.imageId);\n\n    // Make sure the image that was removed is actually in this stack\n    // Before adding it to the indicesToRequest array\n    if (imageIdIndex < 0) {\n      return;\n    }\n\n    const stackPrefetchData = getToolState(element);\n\n    if (\n      !stackPrefetchData ||\n      !stackPrefetchData.data ||\n      !stackPrefetchData.data.length\n    ) {\n      return;\n    }\n\n    stackPrefetchData.indicesToRequest.push(imageIdIndex);\n  };\n}\n\nexport const clearFromImageIds = (stack) => {\n  const imageIdSet = new Set<string>(stack.imageIds);\n  return (requestDetails) =>\n    requestDetails.type !== requestType ||\n    !imageIdSet.has(requestDetails.additionalDetails.imageId);\n};\n","import {\n  getEnabledElement,\n  StackViewport,\n  imageLoader,\n  Enums,\n  eventTarget,\n  imageLoadPoolManager,\n  cache,\n  getConfiguration as getCoreConfiguration,\n} from '@cornerstonejs/core';\nimport { addToolState, getToolState } from './state';\nimport {\n  getStackData,\n  requestType,\n  priority,\n  getPromiseRemovedHandler,\n  nearestIndex,\n  range,\n} from './stackPrefetchUtils';\n\nlet configuration = {\n  maxImagesToPrefetch: Infinity,\n  // Preserving the existing pool should be the default behaviour, as there might\n  // be a volume of the same series already being loaded in the pool, and we don't want\n  // to cancel it middle of the way when the other stack viewport mounts. Worst case scenario\n  // there will be a few extra images in the pool but by the time that their turn comes\n  // we will have already loaded the volume and it will get read from the CACHE,\n  // so who cares\n  preserveExistingPool: true,\n};\n\nlet resetPrefetchTimeout;\nconst resetPrefetchDelay = 10;\n\nfunction prefetch(element) {\n  // Get the stackPrefetch tool data\n  const stackPrefetchData = getToolState(element);\n\n  if (!stackPrefetchData) {\n    return;\n  }\n\n  const stackPrefetch = stackPrefetchData || {};\n  const stack = getStackData(element);\n\n  if (!stack?.imageIds?.length) {\n    console.warn('CornerstoneTools.stackPrefetch: No images in stack.');\n    return;\n  }\n\n  const { currentImageIdIndex } = stack;\n\n  // If all the requests are complete, disable the stackPrefetch tool\n  stackPrefetch.enabled &&= stackPrefetch.indicesToRequest?.length;\n\n  // Make sure the tool is still enabled\n  if (stackPrefetch.enabled === false) {\n    return;\n  }\n\n  // Remove an imageIdIndex from the list of indices to request\n  // This fires when the individual image loading deferred is resolved\n  function removeFromList(imageIdIndex) {\n    const index = stackPrefetch.indicesToRequest.indexOf(imageIdIndex);\n\n    if (index > -1) {\n      // Don't remove last element if imageIdIndex not found\n      stackPrefetch.indicesToRequest.splice(index, 1);\n    }\n  }\n\n  // Remove all already cached images from the\n  // IndicesToRequest array\n  stackPrefetchData.indicesToRequest.sort((a, b) => a - b);\n  const indicesToRequestCopy = stackPrefetch.indicesToRequest.slice();\n\n  indicesToRequestCopy.forEach(function (imageIdIndex) {\n    const imageId = stack.imageIds[imageIdIndex];\n\n    if (!imageId) {\n      return;\n    }\n\n    const distance = Math.abs(currentImageIdIndex - imageIdIndex);\n    // For nearby objects, ensure the last accessed time is updated\n    // by using getImageLoadObject.\n    // For more distant objects, just check if available, but dont\n    // change the access time.\n    // This allows throwing data that hasn't been accessed and is not\n    // nearby.\n    const imageCached =\n      distance < 6\n        ? cache.getImageLoadObject(imageId)\n        : cache.isLoaded(imageId);\n\n    if (imageCached) {\n      // Already in cache\n      removeFromList(imageIdIndex);\n    }\n  });\n\n  // Stop here if there are no images left to request\n  // After those in the cache have been removed\n  if (!stackPrefetch.indicesToRequest.length) {\n    return;\n  }\n\n  // Clear the requestPool of prefetch requests, if needed.\n  if (!configuration.preserveExistingPool) {\n    imageLoadPoolManager.clearRequestStack(requestType);\n  }\n\n  // Identify the nearest imageIdIndex to the currentImageIdIndex\n  const nearest = nearestIndex(\n    stackPrefetch.indicesToRequest,\n    stack.currentImageIdIndex\n  );\n\n  let imageId;\n  let nextImageIdIndex;\n  const preventCache = false;\n\n  function doneCallback(image) {\n    console.log('prefetch done: %s', image.imageId);\n    const imageIdIndex = stack.imageIds.indexOf(image.imageId);\n\n    removeFromList(imageIdIndex);\n  }\n\n  // Prefetch images around the current image (before and after)\n  let lowerIndex = nearest.low;\n  let higherIndex = nearest.high;\n  const imageIdsToPrefetch = [];\n\n  while (\n    lowerIndex >= 0 ||\n    higherIndex < stackPrefetch.indicesToRequest.length\n  ) {\n    const currentIndex = stack.currentImageIdIndex;\n    const shouldSkipLower =\n      currentIndex - stackPrefetch.indicesToRequest[lowerIndex] >\n      configuration.maxImagesToPrefetch;\n    const shouldSkipHigher =\n      stackPrefetch.indicesToRequest[higherIndex] - currentIndex >\n      configuration.maxImagesToPrefetch;\n\n    const shouldLoadLower = !shouldSkipLower && lowerIndex >= 0;\n    const shouldLoadHigher =\n      !shouldSkipHigher && higherIndex < stackPrefetch.indicesToRequest.length;\n\n    if (!shouldLoadHigher && !shouldLoadLower) {\n      break;\n    }\n\n    if (shouldLoadLower) {\n      nextImageIdIndex = stackPrefetch.indicesToRequest[lowerIndex--];\n      imageId = stack.imageIds[nextImageIdIndex];\n      imageIdsToPrefetch.push(imageId);\n    }\n\n    if (shouldLoadHigher) {\n      nextImageIdIndex = stackPrefetch.indicesToRequest[higherIndex++];\n      imageId = stack.imageIds[nextImageIdIndex];\n      imageIdsToPrefetch.push(imageId);\n    }\n  }\n\n  const requestFn = (imageId, options) =>\n    imageLoader.loadAndCacheImage(imageId, options);\n\n  const { useNorm16Texture } = getCoreConfiguration().rendering;\n\n  imageIdsToPrefetch.forEach((imageId) => {\n    // IMPORTANT: Request type should be passed if not the 'interaction'\n    // highest priority will be used for the request type in the imageRetrievalPool\n    const options = {\n      targetBuffer: {\n        type: useNorm16Texture ? undefined : 'Float32Array',\n      },\n      preScale: {\n        enabled: true,\n      },\n      requestType,\n    };\n\n    imageLoadPoolManager.addRequest(\n      requestFn.bind(null, imageId, options),\n      requestType,\n      // Additional details\n      {\n        imageId,\n      },\n      priority\n      // addToBeginning\n    );\n  });\n}\n\nfunction onImageUpdated(e) {\n  // Start prefetching again (after a delay)\n  // When the user has scrolled to a new image\n  clearTimeout(resetPrefetchTimeout);\n  resetPrefetchTimeout = setTimeout(function () {\n    const element = e.target;\n\n    // If playClip is enabled and the user loads a different series in the viewport\n    // An exception will be thrown because the element will not be enabled anymore\n    try {\n      prefetch(element);\n    } catch (error) {\n      return;\n    }\n  }, resetPrefetchDelay);\n}\n\nfunction enable(element) {\n  const stack = getStackData(element);\n\n  if (!stack || !stack.imageIds || stack.imageIds.length === 0) {\n    console.warn('CornerstoneTools.stackPrefetch: No images in stack.');\n    return;\n  }\n\n  // Use the currentImageIdIndex from the stack as the initialImageIdIndex\n  const stackPrefetchData = {\n    indicesToRequest: range(0, stack.imageIds.length - 1),\n    enabled: true,\n    direction: 1,\n  };\n\n  // Remove the currentImageIdIndex from the list to request\n  const indexOfCurrentImage = stackPrefetchData.indicesToRequest.indexOf(\n    stack.currentImageIdIndex\n  );\n\n  stackPrefetchData.indicesToRequest.splice(indexOfCurrentImage, 1);\n\n  addToolState(element, stackPrefetchData);\n\n  prefetch(element);\n\n  element.removeEventListener(Enums.Events.STACK_NEW_IMAGE, onImageUpdated);\n  element.addEventListener(Enums.Events.STACK_NEW_IMAGE, onImageUpdated);\n\n  const promiseRemovedHandler = getPromiseRemovedHandler(element);\n\n  eventTarget.removeEventListener(\n    Enums.Events.IMAGE_CACHE_IMAGE_REMOVED,\n    promiseRemovedHandler\n  );\n  eventTarget.addEventListener(\n    Enums.Events.IMAGE_CACHE_IMAGE_REMOVED,\n    promiseRemovedHandler\n  );\n}\n\nfunction disable(element) {\n  clearTimeout(resetPrefetchTimeout);\n  element.removeEventListener(Enums.Events.STACK_NEW_IMAGE, onImageUpdated);\n\n  const promiseRemovedHandler = getPromiseRemovedHandler(element);\n\n  eventTarget.removeEventListener(\n    Enums.Events.IMAGE_CACHE_IMAGE_REMOVED,\n    promiseRemovedHandler\n  );\n\n  const stackPrefetchData = getToolState(element);\n  // If there is actually something to disable, disable it\n\n  if (stackPrefetchData && stackPrefetchData.indicesToRequest.length) {\n    stackPrefetchData.enabled = false;\n\n    // Clear current prefetch requests from the requestPool\n    imageLoadPoolManager.clearRequestStack(requestType);\n  }\n}\n\nfunction getConfiguration() {\n  return configuration;\n}\n\nfunction setConfiguration(config) {\n  configuration = config;\n}\n\nconst stackPrefetch = { enable, disable, getConfiguration, setConfiguration };\n\nexport default stackPrefetch;\n","import {\n  imageLoader,\n  Enums,\n  eventTarget,\n  imageLoadPoolManager,\n  cache,\n  getConfiguration as getCoreConfiguration,\n} from '@cornerstonejs/core';\nimport { addToolState, getToolState } from './state';\nimport {\n  getStackData,\n  requestType,\n  priority,\n  clearFromImageIds,\n  getPromiseRemovedHandler,\n} from './stackPrefetchUtils';\nimport roundNumber from '../roundNumber';\n\nlet configuration = {\n  maxImagesToPrefetch: Infinity,\n  // Fetch up to 2 image before and after\n  minBefore: 2,\n  maxAfter: 2,\n  // Increment the cache size by 10 images\n  directionExtraImages: 10,\n  preserveExistingPool: false,\n};\n\nlet resetPrefetchTimeout;\n// Starting the prefetch quickly isn't an issue as the main image is already being\n// loaded, so a 5 ms prefetch delay is fine\nconst resetPrefetchDelay = 5;\n\n/**\n * Call this to enable stack context sensitive prefetch.  Should be called\n * before stack data is set in order to start prefetch after load first image.\n * This will add a STACK_NEW_IMAGE to detect when a new image is displayed, and then\n * update the prefetch stack.  The context sensitive prefetch reacts to the\n * initial display, or significant moves, the already loaded images, the\n * cache size and the direction of navigation.  The behaviour is:\n *\n * 1. On navigating to a new image initially, or one that is at a different position:\n *  * Fetch the next/previous 2 images\n * 2. If the user is navigating forward/backward by less than 5 images, then\n *  * Prefetch additional images in the direction of navigation, up to 100\n * 3. If all the images in a given prefetch have completed, then:\n *  * Use the last prefetched image size as an image size for the stack\n *  * Fetch up to 1/4 of the cache size images near the current image\n *\n * This is designed to:\n *   * Get nearby images immediately so that they are available for navigation\n *     * Under the assumption that users might click and view an image, then\n *       navigate to next/previous image to see the exact image they want\n *   * Not interfere with loading other viewports if they are still loading\n *     * Load priority is prefetch, and minimal images are requested initially\n *   * Load an entire series if it will fit in memory\n *     * Allows navigating to other parts of the series and display images immediately\n *   * Have images available for CINE/navigation in one direction even when\n *     there is more image data than will fit in memory.\n *     * Up to 100 images in the direction of travel will be prefetched\n *\n * @param element - to prefetch on\n */\nconst enable = (element): void => {\n  const stack = getStackData(element);\n\n  if (!stack || !stack.imageIds || stack.imageIds.length === 0) {\n    console.warn('CornerstoneTools.stackPrefetch: No images in stack.');\n    return;\n  }\n\n  updateToolState(element);\n\n  prefetch(element);\n\n  element.removeEventListener(Enums.Events.STACK_NEW_IMAGE, onImageUpdated);\n  element.addEventListener(Enums.Events.STACK_NEW_IMAGE, onImageUpdated);\n\n  const promiseRemovedHandler = getPromiseRemovedHandler(element);\n\n  eventTarget.removeEventListener(\n    Enums.Events.IMAGE_CACHE_IMAGE_REMOVED,\n    promiseRemovedHandler\n  );\n  eventTarget.addEventListener(\n    Enums.Events.IMAGE_CACHE_IMAGE_REMOVED,\n    promiseRemovedHandler\n  );\n};\n\nfunction prefetch(element) {\n  const stack = getStackData(element);\n  if (!stack?.imageIds?.length) {\n    console.warn('CornerstoneTools.stackPrefetch: No images in stack.');\n    return;\n  }\n\n  // Get the stackPrefetch tool data\n  const stackPrefetchData = getToolState(element);\n\n  if (!stackPrefetchData) {\n    return;\n  }\n\n  const stackPrefetch = stackPrefetchData || {};\n\n  // If all the requests are complete, disable the stackPrefetch tool\n  stackPrefetch.enabled &&= stackPrefetch.indicesToRequest?.length;\n\n  // Make sure the tool is still enabled\n  if (stackPrefetch.enabled === false) {\n    return;\n  }\n\n  // Remove an imageIdIndex from the list of indices to request\n  // This fires when the individual image loading deferred is resolved\n  function removeFromList(imageIdIndex) {\n    const index = stackPrefetch.indicesToRequest.indexOf(imageIdIndex);\n\n    if (index > -1) {\n      // Don't remove last element if imageIdIndex not found\n      stackPrefetch.indicesToRequest.splice(index, 1);\n    }\n  }\n\n  // Remove all already cached images from the\n  // IndicesToRequest array.\n  const indicesToRequestCopy = stackPrefetch.indicesToRequest.slice();\n  const { currentImageIdIndex } = stack;\n\n  indicesToRequestCopy.forEach((imageIdIndex) => {\n    const imageId = stack.imageIds[imageIdIndex];\n\n    if (!imageId) {\n      return;\n    }\n\n    const distance = Math.abs(currentImageIdIndex - imageIdIndex);\n    // For nearby objects, ensure the last accessed time is updated\n    // by using getImageLoadObject.\n    // For more distant objects, just check if available, but dont\n    // change the access time.\n    // This allows throwing data that hasn't been accessed and is not\n    // nearby.\n    const imageCached =\n      distance < 6\n        ? cache.getImageLoadObject(imageId)\n        : cache.isLoaded(imageId);\n\n    if (imageCached) {\n      // Already in cache\n      removeFromList(imageIdIndex);\n    }\n  });\n\n  // Stop here if there are no images left to request\n  // After those in the cache have been removed\n  if (!stackPrefetch.indicesToRequest.length) {\n    return;\n  }\n\n  // Clear the requestPool of prefetch requests, if needed.\n  if (!configuration.preserveExistingPool) {\n    imageLoadPoolManager.filterRequests(clearFromImageIds(stack));\n  }\n\n  function doneCallback(imageId) {\n    const imageIdIndex = stack.imageIds.indexOf(imageId);\n\n    removeFromList(imageIdIndex);\n    const image = cache.getCachedImageBasedOnImageURI(imageId);\n    const { stats } = stackPrefetch;\n    const decodeTimeInMS = image?.image?.decodeTimeInMS || 0;\n    if (decodeTimeInMS) {\n      stats.imageIds.set(imageId, decodeTimeInMS);\n      stats.decodeTimeInMS += decodeTimeInMS;\n      const loadTimeInMS = image?.image?.loadTimeInMS || 0;\n      stats.loadTimeInMS += loadTimeInMS;\n    }\n\n    if (!stackPrefetch.indicesToRequest.length) {\n      if (image?.sizeInBytes) {\n        const { sizeInBytes } = image;\n        const usage = cache.getMaxCacheSize() / 4 / sizeInBytes;\n        if (!stackPrefetch.cacheFill) {\n          stats.initialTime = Date.now() - stats.start;\n          stats.initialSize = stats.imageIds.size;\n          updateToolState(element, usage);\n          prefetch(element);\n        } else if (stats.imageIds.size) {\n          stats.fillTime = Date.now() - stats.start;\n          const { size } = stats.imageIds;\n          stats.fillSize = size;\n          console.log(\n            'Done cache fill',\n            stats.fillTime,\n            'ms',\n            size,\n            'items',\n            'average total time',\n            roundNumber(stats.fillTime / size),\n            'ms',\n            'average load',\n            roundNumber(stats.loadTimeInMS / size),\n            'ms',\n            'average decode',\n            roundNumber(stats.decodeTimeInMS / size),\n            'ms'\n          );\n        }\n      }\n    }\n  }\n\n  const requestFn = (imageId, options) =>\n    imageLoader\n      .loadAndCacheImage(imageId, options)\n      .then(() => doneCallback(imageId));\n\n  const { useNorm16Texture } = getCoreConfiguration().rendering;\n\n  indicesToRequestCopy.forEach((imageIdIndex) => {\n    const imageId = stack.imageIds[imageIdIndex];\n    // IMPORTANT: Request type should be passed if not the 'interaction'\n    // highest priority will be used for the request type in the imageRetrievalPool\n    const options = {\n      targetBuffer: {\n        type: useNorm16Texture ? undefined : 'Float32Array',\n      },\n      preScale: {\n        enabled: true,\n      },\n      requestType,\n    };\n\n    imageLoadPoolManager.addRequest(\n      requestFn.bind(null, imageId, options),\n      requestType,\n      // Additional details\n      {\n        imageId,\n      },\n      priority\n      // addToBeginning\n    );\n  });\n}\n\nfunction onImageUpdated(e) {\n  // Start prefetching again (after a delay)\n  // When the user has scrolled to a new image\n  clearTimeout(resetPrefetchTimeout);\n  resetPrefetchTimeout = setTimeout(function () {\n    const element = e.target;\n\n    // If playClip is enabled and the user loads a different series in the viewport\n    // An exception will be thrown because the element will not be enabled anymore\n    try {\n      updateToolState(element);\n      prefetch(element);\n    } catch (error) {\n      return;\n    }\n  }, resetPrefetchDelay);\n}\n\n// Not a full signum, but good enough for direction.\nconst signum = (x) => (x < 0 ? -1 : 1);\n\nconst updateToolState = (element, usage?: number) => {\n  const stack = getStackData(element);\n  if (!stack || !stack.imageIds || stack.imageIds.length === 0) {\n    console.warn('CornerstoneTools.stackPrefetch: No images in stack.');\n    return;\n  }\n\n  const { currentImageIdIndex } = stack;\n  let { maxAfter = 2, minBefore = 2 } = configuration;\n  const { directionExtraImages = 10 } = configuration;\n  // Use the currentImageIdIndex from the stack as the initialImageIdIndex\n  const stackPrefetchData = getToolState(element) || {\n    indicesToRequest: [],\n    currentImageIdIndex,\n    stackCount: 0,\n    enabled: true,\n    direction: 1,\n    stats: {\n      start: Date.now(),\n      imageIds: new Map(),\n      decodeTimeInMS: 0,\n      loadTimeInMS: 0,\n      totalBytes: 0,\n    },\n  };\n  const delta = currentImageIdIndex - stackPrefetchData.currentImageIdIndex;\n  stackPrefetchData.direction = signum(delta);\n  stackPrefetchData.currentImageIdIndex = currentImageIdIndex;\n  stackPrefetchData.enabled = true;\n\n  if (stackPrefetchData.stackCount < 100) {\n    stackPrefetchData.stackCount += directionExtraImages;\n  }\n\n  if (Math.abs(delta) > maxAfter || !delta) {\n    // Not incrementing by 1, so stop increasing the data size\n    // TODO - consider reversing the CINE playback\n    stackPrefetchData.stackCount = 0;\n    if (usage) {\n      // The usage of the cache that this stack can use\n      const positionFraction = currentImageIdIndex / stack.imageIds.length;\n      minBefore = Math.ceil(usage * positionFraction);\n      maxAfter = Math.ceil(usage * (1 - positionFraction));\n      stackPrefetchData.cacheFill = true;\n    } else {\n      stackPrefetchData.cacheFill = false;\n    }\n  } else if (delta < 0) {\n    minBefore += stackPrefetchData.stackCount;\n    maxAfter = 0;\n  } else {\n    maxAfter += stackPrefetchData.stackCount;\n    minBefore = 0;\n  }\n\n  const minIndex = Math.max(0, currentImageIdIndex - minBefore);\n\n  const maxIndex = Math.min(\n    stack.imageIds.length - 1,\n    currentImageIdIndex + maxAfter\n  );\n\n  // Order these correctly initially\n  const indicesToRequest = [];\n  for (let i = currentImageIdIndex + 1; i <= maxIndex; i++) {\n    indicesToRequest.push(i);\n  }\n  for (let i = currentImageIdIndex - 1; i >= minIndex; i--) {\n    indicesToRequest.push(i);\n  }\n  stackPrefetchData.indicesToRequest = indicesToRequest;\n\n  addToolState(element, stackPrefetchData);\n};\n\nfunction disable(element) {\n  clearTimeout(resetPrefetchTimeout);\n  element.removeEventListener(Enums.Events.STACK_NEW_IMAGE, onImageUpdated);\n\n  const promiseRemovedHandler = getPromiseRemovedHandler(element);\n\n  eventTarget.removeEventListener(\n    Enums.Events.IMAGE_CACHE_IMAGE_REMOVED,\n    promiseRemovedHandler\n  );\n\n  const stackPrefetchData = getToolState(element);\n  // If there is actually something to disable, disable it\n\n  if (stackPrefetchData && stackPrefetchData.data.length) {\n    stackPrefetchData.enabled = false;\n    // Don't worry about clearing the requests - there aren't that many too be bothersome\n  }\n}\n\nfunction getConfiguration() {\n  return configuration;\n}\n\nfunction setConfiguration(config) {\n  configuration = config;\n}\n\nconst stackContextPrefetch = {\n  enable,\n  disable,\n  getConfiguration,\n  setConfiguration,\n};\n\nexport default stackContextPrefetch;\n","import { utilities, cache, Types } from '@cornerstonejs/core';\nimport { getVoxelOverlap } from '../segmentation/utilities';\nimport pointInShapeCallback from '../pointInShapeCallback';\n\n/**\n * Gets the scalar data for a series of time points for either a single\n * coordinate or a segmentation mask, it will return the an array of scalar\n * data for a single coordinate or an array of arrays for a segmentation.\n *\n * @param dynamicVolume - 4D volume to compute time point data from\n * @param options - frameNumbers: which frames to use as timepoints, if left\n * blank, gets data timepoints over all frames\n * maskVolumeId: segmentationId to get timepoint data of\n * imageCoordinate: world coordinate to get timepoint data of\n * @returns\n */\nfunction getDataInTime(\n  dynamicVolume: Types.IDynamicImageVolume,\n  options: {\n    frameNumbers?;\n    maskVolumeId?;\n    imageCoordinate?;\n  }\n): number[] | number[][] {\n  let dataInTime;\n\n  // if frameNumbers is not provided, all frames are selected\n  const frames = options.frameNumbers || [\n    ...Array(dynamicVolume.numTimePoints).keys(),\n  ];\n\n  // You only need to provide either maskVolumeId OR imageCoordinate.\n  // Throws error if neither maskVolumeId or imageCoordinate is given,\n  // throws error if BOTH maskVolumeId and imageCoordinate is given\n  if (!options.maskVolumeId && !options.imageCoordinate) {\n    throw new Error(\n      'You should provide either maskVolumeId or imageCoordinate'\n    );\n  }\n\n  if (options.maskVolumeId && options.imageCoordinate) {\n    throw new Error('You can only use one of maskVolumeId or imageCoordinate');\n  }\n\n  if (options.maskVolumeId) {\n    const segmentationVolume = cache.getVolume(options.maskVolumeId);\n\n    const dataInTime = _getTimePointDataMask(\n      frames,\n      dynamicVolume,\n      segmentationVolume\n    );\n\n    return dataInTime;\n  }\n\n  if (options.imageCoordinate) {\n    const dataInTime = _getTimePointDataCoordinate(\n      frames,\n      options.imageCoordinate,\n      dynamicVolume\n    );\n\n    return dataInTime;\n  }\n\n  return dataInTime;\n}\n\nfunction _getTimePointDataCoordinate(frames, coordinate, volume) {\n  const { dimensions, imageData } = volume;\n  const index = imageData.worldToIndex(coordinate);\n\n  index[0] = Math.floor(index[0]);\n  index[1] = Math.floor(index[1]);\n  index[2] = Math.floor(index[2]);\n\n  if (!utilities.indexWithinDimensions(index, dimensions)) {\n    throw new Error('outside bounds');\n  }\n\n  // calculate offset for index\n  const yMultiple = dimensions[0];\n  const zMultiple = dimensions[0] * dimensions[1];\n  const allScalarData = volume.getScalarDataArrays();\n  const value = [];\n\n  frames.forEach((frame) => {\n    const activeScalarData = allScalarData[frame];\n    const scalarIndex = index[2] * zMultiple + index[1] * yMultiple + index[0];\n    value.push(activeScalarData[scalarIndex]);\n  });\n\n  return value;\n}\n\nfunction _getTimePointDataMask(frames, dynamicVolume, segmentationVolume) {\n  const { imageData: maskImageData } = segmentationVolume;\n  const segScalarData = segmentationVolume.getScalarData();\n\n  const len = segScalarData.length;\n\n  // Pre-allocate memory for array\n  const nonZeroVoxelIndices = [];\n  nonZeroVoxelIndices.length = len;\n\n  // Get the index of every non-zero voxel in mask\n  let actualLen = 0;\n  for (let i = 0, len = segScalarData.length; i < len; i++) {\n    if (segScalarData[i] !== 0) {\n      nonZeroVoxelIndices[actualLen++] = i;\n    }\n  }\n\n  // Trim the array to actual size\n  nonZeroVoxelIndices.length = actualLen;\n\n  const dynamicVolumeScalarDataArray = dynamicVolume.getScalarDataArrays();\n  const values = [];\n  const isSameVolume =\n    dynamicVolumeScalarDataArray[0].length === len &&\n    JSON.stringify(dynamicVolume.spacing) ===\n      JSON.stringify(segmentationVolume.spacing);\n\n  // if the segmentation mask is the same size as the dynamic volume (one frame)\n  // means we can just return the scalar data for the non-zero voxels\n  if (isSameVolume) {\n    for (let i = 0; i < nonZeroVoxelIndices.length; i++) {\n      const indexValues = [];\n      frames.forEach((frame) => {\n        const activeScalarData = dynamicVolumeScalarDataArray[frame];\n        indexValues.push(activeScalarData[nonZeroVoxelIndices[i]]);\n      });\n      values.push(indexValues);\n    }\n\n    return values;\n  }\n\n  // In case that the segmentation mask is not the same size as the dynamic volume (one frame)\n  // then we need to consider each voxel in the segmentation mask and check if it\n  // overlaps with the other volume, and if so we need to average the values of the\n  // overlapping voxels.\n  const callback = ({ pointLPS: segPointLPS, value: segValue }) => {\n    // see if the value is non-zero\n    if (segValue === 0) {\n      // not interested\n      return;\n    }\n\n    // Then for each non-zero voxel in the segmentation mask, we should\n    // again perform the pointInShapeCallback to run the averaging callback\n    // function to get the average value of the overlapping voxels.\n    const overlapIJKMinMax = getVoxelOverlap(\n      dynamicVolume.imageData,\n      dynamicVolume.dimensions,\n      dynamicVolume.spacing,\n      segPointLPS\n    );\n\n    // count represents the number of voxels of the dynamic volume that represents\n    // one voxel of the segmentation mask\n    let count = 0;\n    const perFrameSum = new Map();\n\n    // Pre-initialize the Map\n    frames.forEach((frame) => perFrameSum.set(frame, 0));\n\n    const averageCallback = ({ index }) => {\n      for (let i = 0; i < frames.length; i++) {\n        const value = dynamicVolumeScalarDataArray[i][index];\n        const frame = frames[i];\n        perFrameSum.set(frame, perFrameSum.get(frame) + value);\n      }\n      count++;\n    };\n\n    pointInShapeCallback(\n      dynamicVolume.imageData,\n      () => true,\n      averageCallback,\n      overlapIJKMinMax\n    );\n\n    // average the values\n    const averageValues = [];\n    perFrameSum.forEach((sum) => {\n      averageValues.push(sum / count);\n    });\n\n    values.push(averageValues);\n  };\n\n  // Since we have the non-zero voxel indices of the segmentation mask,\n  // we theoretically can use them, however, we kind of need to compute the\n  // pointLPS for each of the non-zero voxel indices, which is a bit of a pain.\n  // Todo: consider using the nonZeroVoxelIndices to compute the pointLPS\n  pointInShapeCallback(maskImageData, () => true, callback);\n\n  return values;\n}\n\nexport default getDataInTime;\n","import { Enums, Types } from '@cornerstonejs/core';\n\n/**\n * Gets the scalar data for a series of time frames from a 4D volume, returns an\n * array of scalar data after performing AVERAGE, SUM or SUBTRACT to be used to\n * create a 3D volume\n *\n * @param dynamicVolume4D - volume to compute time frame data from\n * @param operation - operation to perform on time frame data, operations include\n * SUM, AVERAGE, and SUBTRACT (can only be used with 2 time frames provided)\n * @param frameNumbers - an array of frame indices to perform the operation on, if\n * left empty, all frames will be used\n * @returns\n */\nfunction generateImageFromTimeData(\n  dynamicVolume: Types.IDynamicImageVolume,\n  operation: string,\n  frameNumbers?: number[]\n) {\n  // If no time frames provided, use all time frames\n  const frames = frameNumbers || [...Array(dynamicVolume.numTimePoints).keys()];\n  const numFrames = frames.length;\n\n  if (frames.length <= 1) {\n    throw new Error('Please provide two or more time points');\n  }\n\n  // Gets scalar data for all time frames\n  const typedArrays = dynamicVolume.getScalarDataArrays();\n\n  const arrayLength = typedArrays[0].length;\n  const finalArray = new Float32Array(arrayLength);\n\n  if (operation === Enums.DynamicOperatorType.SUM) {\n    for (let i = 0; i < numFrames; i++) {\n      const currentArray = typedArrays[frames[i]];\n      for (let j = 0; j < arrayLength; j++) {\n        finalArray[j] += currentArray[j];\n      }\n    }\n    return finalArray;\n  }\n\n  if (operation === Enums.DynamicOperatorType.SUBTRACT) {\n    if (frames.length > 2) {\n      throw new Error('Please provide only 2 time points for subtraction.');\n    }\n    for (let j = 0; j < arrayLength; j++) {\n      finalArray[j] += typedArrays[frames[0]][j] - typedArrays[frames[1]][j];\n    }\n    return finalArray;\n  }\n\n  if (operation === Enums.DynamicOperatorType.AVERAGE) {\n    for (let i = 0; i < numFrames; i++) {\n      const currentArray = typedArrays[frames[i]];\n      for (let j = 0; j < arrayLength; j++) {\n        finalArray[j] += currentArray[j];\n      }\n    }\n    for (let k = 0; k < arrayLength; k++) {\n      finalArray[k] = finalArray[k] / numFrames;\n    }\n    return finalArray;\n  }\n}\n\nexport default generateImageFromTimeData;\n","import vtkPolyData from '@kitware/vtk.js/Common/DataModel/PolyData';\n\n/**\n * Gets a point from an array of numbers given its index\n * @param points array of number, each point defined by three consecutive numbers\n * @param idx index of the point to retrieve\n * @returns\n */\nexport function getPoint(points, idx) {\n  if (idx < points.length / 3) {\n    return [points[idx * 3], points[idx * 3 + 1], points[idx * 3 + 2]];\n  }\n}\n\n/**\n * Extract contour point sets from the outline of a poly data actor\n * @param polyData - vtk polyData\n * @returns\n */\nexport function getPolyDataPointIndexes(polyData: vtkPolyData) {\n  const linesData = polyData.getLines().getData();\n  let idx = 0;\n  const lineSegments = new Map<number, number[]>();\n\n  // Populate lineSegments map\n  while (idx < linesData.length) {\n    const segmentSize = linesData[idx++];\n    const segment = [];\n    for (let i = 0; i < segmentSize; i++) {\n      segment.push(linesData[idx + i]);\n    }\n    lineSegments.set(segment[0], segment);\n    idx += segmentSize;\n  }\n\n  const contours = [];\n\n  // Function to find an available starting point\n  const findStartingPoint = (map) => {\n    for (const [key, value] of map.entries()) {\n      if (value !== undefined) {\n        return key;\n      }\n    }\n    return -1;\n  };\n\n  // Build contours\n  let startPoint = findStartingPoint(lineSegments);\n  while (startPoint !== -1) {\n    const contour = [startPoint];\n    while (lineSegments.has(startPoint)) {\n      const nextPoint = lineSegments.get(startPoint)[1];\n      if (lineSegments.has(nextPoint)) {\n        contour.push(nextPoint);\n      }\n      lineSegments.delete(startPoint);\n      startPoint = nextPoint;\n    }\n    contours.push(contour);\n    startPoint = findStartingPoint(lineSegments);\n  }\n\n  return contours.length ? contours : undefined;\n}\n\n/**\n * Extract contour points from a poly data object\n * @param polyData - vtk polyData\n * @returns\n */\nexport function getPolyDataPoints(polyData: vtkPolyData) {\n  const contoursIndexes = getPolyDataPointIndexes(polyData);\n  if (!contoursIndexes) {\n    return;\n  }\n\n  const rawPointsData = polyData.getPoints().getData();\n  return contoursIndexes.map((contourIndexes) =>\n    contourIndexes.map((index) => getPoint(rawPointsData, index))\n  );\n}\n","/**\n * Specify the position of the text/ticks.\n * Left/Right are the valid options for a vertical colorbars and Top/Bottom\n * for the horizontal ones.\n */\nexport enum ColorbarRangeTextPosition {\n  Top = 'top',\n  Left = 'left',\n  Bottom = 'bottom',\n  Right = 'right',\n}\n","import type { ColorbarImageRange } from '../types/ColorbarImageRange';\n\nconst isRangeValid = (range: ColorbarImageRange) => {\n  return range && range.upper > range.lower;\n};\n\nexport { isRangeValid as default, isRangeValid };\n","import type { ColorbarSize } from '../types/ColorbarSize';\n\nconst isColorbarSizeValid = (size: ColorbarSize) => {\n  return !!size && size.width > 0 && size.height > 0;\n};\n\nexport { isColorbarSizeValid as default, isColorbarSizeValid };\n","import type { ColorbarImageRange } from '../types/ColorbarImageRange';\n\nconst areColorbarRangesEqual = (\n  a: ColorbarImageRange,\n  b: ColorbarImageRange\n) => {\n  return !!a && !!b && a.lower === b.lower && a.upper === b.upper;\n};\n\nexport { areColorbarRangesEqual as default, areColorbarRangesEqual };\n","import type { ColorbarSize } from '../types/ColorbarSize';\n\nconst areColorbarSizesEqual = (a: ColorbarSize, b: ColorbarSize) => {\n  return !!a && !!b && a.width === b.width && a.height === b.height;\n};\n\nexport { areColorbarSizesEqual as default, areColorbarSizesEqual };\n","import { IColorMapPreset } from '@kitware/vtk.js/Rendering/Core/ColorTransferFunction/ColorMaps';\nimport { utilities } from '@cornerstonejs/core';\nimport interpolateVec3 from '../../math/vec3/interpolateVec3';\nimport { ColorbarCanvasProps } from './types/ColorbarCanvasProps';\nimport type { ColorbarImageRange, ColorbarVOIRange } from './types';\nimport type { ColorbarSize } from './types/ColorbarSize';\nimport {\n  isRangeValid,\n  areColorbarRangesEqual,\n  isColorbarSizeValid,\n  areColorbarSizesEqual,\n} from './common';\n\nconst { clamp } = utilities;\n\n/**\n * Canvas referenced by the color bar where the colormap is rendered. It may\n * show the full image range or only the VOI range.\n */\nclass ColorbarCanvas {\n  private _canvas: HTMLCanvasElement;\n  private _imageRange: ColorbarImageRange;\n  private _voiRange: ColorbarVOIRange;\n  private _colormap: IColorMapPreset;\n  private _showFullImageRange: boolean;\n\n  constructor(props: ColorbarCanvasProps) {\n    ColorbarCanvas.validateProps(props);\n\n    const {\n      colormap,\n      size = { width: 20, height: 100 },\n      imageRange = { lower: 0, upper: 1 },\n      voiRange = { lower: 0, upper: 1 },\n      container,\n      showFullPixelValueRange = false,\n    } = props;\n\n    this._colormap = colormap;\n    this._imageRange = imageRange;\n    this._voiRange = voiRange;\n    this._showFullImageRange = showFullPixelValueRange;\n    this._canvas = this._createRootElement(size);\n\n    if (container) {\n      this.appendTo(container);\n    }\n  }\n\n  public get colormap(): IColorMapPreset {\n    return this._colormap;\n  }\n\n  public set colormap(colormap: IColorMapPreset) {\n    this._colormap = colormap;\n    this.render();\n  }\n\n  public get size(): ColorbarSize {\n    const { width, height } = this._canvas;\n    return { width, height };\n  }\n\n  public set size(size: ColorbarSize) {\n    const { _canvas: canvas } = this;\n\n    if (!isColorbarSizeValid(size) || areColorbarSizesEqual(canvas, size)) {\n      return;\n    }\n\n    this._setCanvasSize(canvas, size);\n    this.render();\n  }\n\n  public get imageRange(): ColorbarImageRange {\n    return { ...this._imageRange };\n  }\n\n  public set imageRange(imageRange: ColorbarImageRange) {\n    if (\n      !isRangeValid(imageRange) ||\n      areColorbarRangesEqual(imageRange, this._imageRange)\n    ) {\n      return;\n    }\n\n    this._imageRange = imageRange;\n    this.render();\n  }\n\n  public get voiRange(): ColorbarVOIRange {\n    return { ...this._voiRange };\n  }\n\n  public set voiRange(voiRange: ColorbarVOIRange) {\n    if (\n      !isRangeValid(voiRange) ||\n      areColorbarRangesEqual(voiRange, this._voiRange)\n    ) {\n      return;\n    }\n\n    this._voiRange = voiRange;\n    this.render();\n  }\n\n  public get showFullImageRange(): boolean {\n    return this._showFullImageRange;\n  }\n\n  public set showFullImageRange(showFullImageRange: boolean) {\n    if (showFullImageRange === this._showFullImageRange) {\n      return;\n    }\n\n    this._showFullImageRange = showFullImageRange;\n    this.render();\n  }\n\n  public appendTo(container: HTMLElement) {\n    container.appendChild(this._canvas);\n    this.render();\n  }\n\n  public dispose() {\n    const { _canvas: canvas } = this;\n    const { parentElement } = canvas;\n\n    parentElement?.removeChild(canvas);\n  }\n\n  private static validateProps(props: ColorbarCanvasProps) {\n    const { size, imageRange, voiRange } = props;\n\n    if (size && !isColorbarSizeValid(size)) {\n      throw new Error('Invalid \"size\"');\n    }\n\n    if (imageRange && !isRangeValid(imageRange)) {\n      throw new Error('Invalid \"imageRange\"');\n    }\n\n    if (voiRange && !isRangeValid(voiRange)) {\n      throw new Error('Invalid \"voiRange\"');\n    }\n  }\n\n  private _setCanvasSize(canvas: HTMLCanvasElement, size: ColorbarSize) {\n    const { width, height } = size;\n\n    canvas.width = width;\n    canvas.height = height;\n\n    Object.assign(canvas.style, {\n      width: `${width}px`,\n      height: `${height}px`,\n    });\n  }\n\n  private _createRootElement(size: ColorbarSize) {\n    const canvas = document.createElement('canvas');\n\n    Object.assign(canvas.style, {\n      position: 'absolute',\n      top: '0',\n      left: '0',\n      pointerEvents: 'none',\n      boxSizing: 'border-box',\n    });\n\n    this._setCanvasSize(canvas, size);\n\n    return canvas;\n  }\n\n  private render(): void {\n    if (!this._canvas.isConnected) {\n      return;\n    }\n\n    const { _colormap: colormap } = this;\n    const { RGBPoints: rgbPoints } = colormap;\n    const colorsCount = rgbPoints.length / 4;\n\n    // Returns a color point from rgbPoints. Each point has position, red,\n    // green and blue components which means each point has an offset equal\n    // to `4 * index`\n    const getColorPoint = (index) => {\n      const offset = 4 * index;\n\n      // It can get out of bounds when `voiRange.upper` is smaller than\n      // `imageRange.upper`. It's also checking if is smaller than zero\n      // for safety only because that should never happens.\n      if (index < 0 || index >= colorsCount) {\n        return;\n      }\n\n      return {\n        index,\n        position: rgbPoints[offset],\n        color: [\n          rgbPoints[offset + 1],\n          rgbPoints[offset + 2],\n          rgbPoints[offset + 3],\n        ],\n      };\n    };\n\n    const { width, height } = this._canvas;\n    const canvasContext = this._canvas.getContext('2d');\n    const isHorizontal = width > height;\n    const maxValue = isHorizontal ? width : height;\n    const { _voiRange: voiRange } = this;\n    const range = this._showFullImageRange ? this._imageRange : { ...voiRange };\n\n    const { windowWidth } = utilities.windowLevel.toWindowLevel(\n      voiRange.lower,\n      voiRange.upper\n    );\n\n    let previousColorPoint = undefined;\n    let currentColorPoint = getColorPoint(0);\n\n    // Starts from `range.lower` incrementing by incRawPixelValue on each iteration\n    const incRawPixelValue = (range.upper - range.lower) / (maxValue - 1);\n    let rawPixelValue = range.lower;\n\n    for (let i = 0; i < maxValue; i++) {\n      const tVoiRange = (rawPixelValue - voiRange.lower) / windowWidth;\n\n      // Find the color in a linear way (O(n) complexity).\n      // currentColorPoint shall move to the next color until tVoiRange is smaller\n      // than or equal to next color position.\n      if (currentColorPoint) {\n        for (let i = currentColorPoint.index; i < colorsCount; i++) {\n          if (tVoiRange <= currentColorPoint.position) {\n            break;\n          }\n\n          previousColorPoint = currentColorPoint;\n          currentColorPoint = getColorPoint(i + 1);\n        }\n      }\n\n      let normColor;\n\n      // For:\n      //   - firstColorPoint = getColorPoint(0)\n      //   - secondColorPoint = getColorPoint(1)\n      //   - lastColorPoint = getColorPoint(colorsCount - 1)\n      // Then\n      //   - previousColorPoint shall be undefined when tVoiRange < firstColorPoint.position\n      //   - currentColorPoint shall be undefined when tVoiRange > lastColorPoint.position\n      //   - previousColorPoint and currentColorPoint will be defined when\n      //     currentColorPoint.position is between secondColorPoint.position and\n      //     lastColorPoint.position.\n      if (!previousColorPoint) {\n        normColor = [...currentColorPoint.color];\n      } else if (!currentColorPoint) {\n        normColor = [...previousColorPoint.color];\n      } else {\n        const tColorRange =\n          (tVoiRange - previousColorPoint.position) /\n          (currentColorPoint.position - previousColorPoint.position);\n\n        normColor = interpolateVec3(\n          previousColorPoint.color,\n          currentColorPoint.color,\n          tColorRange\n        );\n      }\n\n      const color = normColor.map((color) =>\n        clamp(Math.round(color * 255), 0, 255)\n      );\n\n      canvasContext.fillStyle = `rgb(${color[0]}, ${color[1]}, ${color[2]})`;\n\n      if (isHorizontal) {\n        canvasContext.fillRect(i, 0, 1, height);\n      } else {\n        canvasContext.fillRect(0, height - i - 1, width, 1);\n      }\n\n      rawPixelValue += incRawPixelValue;\n    }\n  }\n}\n\nexport { ColorbarCanvas as default, ColorbarCanvas };\n","/**\n * Linear interpolation between two vec3.\n * Can be used, for example, to interpolate between two RGB colors.\n * @param a - First vec3\n * @param b - Second vec3\n * @param t - Time \"t\".\n *   - Vector A is returned for values smaller than or equel to 0.\n *   - Vector B is returned for values greater than or equal to 1.\n *   - An interpolation between vectors A and B is returned otherwise.\n * @returns\n */\nconst interpolateVec3 = (a, b, t) => {\n  return [\n    a[0] * (1 - t) + b[0] * t,\n    a[1] * (1 - t) + b[1] * t,\n    a[2] * (1 - t) + b[2] * t,\n  ];\n};\n\nexport { interpolateVec3 as default, interpolateVec3 };\n","import type {\n  ColorbarImageRange,\n  ColorbarVOIRange,\n  ColorbarSize,\n  ColorbarTicksProps,\n} from './types';\nimport {\n  isColorbarSizeValid,\n  isRangeValid,\n  areColorbarRangesEqual,\n  areColorbarSizesEqual,\n} from './common';\nimport { ColorbarRangeTextPosition } from './enums/ColorbarRangeTextPosition';\n\nconst DEFAULTS = {\n  FONT: '10px Arial',\n  COLOR: 'white',\n  TICK_SIZE: 5,\n  TICK_WIDTH: 1,\n  TICK_LABEL_MARGIN: 3,\n  MAX_NUM_TICKS: 8,\n\n  // Must start with 1 and end with 10\n  TICKS_STEPS: [1, 2.5, 5, 10],\n};\n\nclass ColorbarTicks {\n  private _canvas: HTMLCanvasElement;\n  private _imageRange: ColorbarImageRange;\n  private _voiRange: ColorbarVOIRange;\n  private _color: string;\n  private _tickSize: number;\n  private _tickWidth: number;\n  private _labelMargin: number;\n  private _maxNumTicks: number;\n  private _rangeTextPosition: ColorbarRangeTextPosition;\n  private _showFullPixelValueRange: boolean;\n  private _font: string;\n\n  constructor(props: ColorbarTicksProps) {\n    ColorbarTicks.validateProps(props);\n\n    const {\n      top = 0,\n      left = 0,\n      size = { width: 20, height: 100 },\n      imageRange = { lower: 0, upper: 1 },\n      voiRange = { lower: 0, upper: 1 },\n      ticks: ticksProps,\n      container,\n      showFullPixelValueRange = false,\n    } = props;\n\n    const { style: ticksStyle, position: rangeTextPosition } = ticksProps ?? {};\n\n    this._imageRange = imageRange;\n    this._voiRange = voiRange;\n    this._font = ticksStyle?.font ?? DEFAULTS.FONT;\n    this._color = ticksStyle?.color ?? DEFAULTS.COLOR;\n    this._tickSize = ticksStyle?.tickSize ?? DEFAULTS.TICK_SIZE;\n    this._tickWidth = ticksStyle?.tickWidth ?? DEFAULTS.TICK_WIDTH;\n    this._labelMargin = ticksStyle?.labelMargin ?? DEFAULTS.TICK_LABEL_MARGIN;\n    this._maxNumTicks = ticksStyle?.maxNumTicks ?? DEFAULTS.MAX_NUM_TICKS;\n    this._rangeTextPosition =\n      rangeTextPosition ?? ColorbarRangeTextPosition.Right;\n    this._showFullPixelValueRange = showFullPixelValueRange;\n    this._canvas = this._createCanvasElement(size, top, left);\n\n    if (container) {\n      this.appendTo(container);\n    }\n  }\n\n  public get size(): ColorbarSize {\n    const { width, height } = this._canvas;\n    return { width, height };\n  }\n\n  public set size(size: ColorbarSize) {\n    const { _canvas: canvas } = this;\n\n    if (!isColorbarSizeValid(size) || areColorbarSizesEqual(canvas, size)) {\n      return;\n    }\n\n    this._setCanvasSize(canvas, size);\n    this.render();\n  }\n\n  /**\n   * Canvas top position (pixels)\n   */\n  public get top(): number {\n    return Number.parseInt(this._canvas.style.top);\n  }\n\n  /**\n   * Change the canvas top position (pixels)\n   */\n  public set top(top: number) {\n    const { _canvas: canvas } = this;\n    const currentTop = this.top;\n\n    if (top === currentTop) {\n      return;\n    }\n\n    canvas.style.top = `${top}px`;\n    this.render();\n  }\n\n  /**\n   * Canvas left position (pixels)\n   */\n  public get left(): number {\n    return Number.parseInt(this._canvas.style.left);\n  }\n\n  /**\n   * Change the canvas left position (pixels)\n   */\n  public set left(left: number) {\n    const { _canvas: canvas } = this;\n    const currentLeft = this.left;\n\n    if (left === currentLeft) {\n      return;\n    }\n\n    canvas.style.left = `${left}px`;\n    this.render();\n  }\n\n  /**\n   * Image range\n   */\n  public get imageRange() {\n    return { ...this._imageRange };\n  }\n\n  /**\n   * Set the image range that should goes from minPixelValue to maxPixelValue\n   */\n  public set imageRange(imageRange: ColorbarVOIRange) {\n    if (\n      !isRangeValid(imageRange) ||\n      areColorbarRangesEqual(imageRange, this._imageRange)\n    ) {\n      return;\n    }\n\n    this._imageRange = imageRange;\n    this.render();\n  }\n\n  /**\n   * VOI range\n   * (lower: wc - ww / 2, upper: wc + ww / 2)\n   */\n  public get voiRange() {\n    return { ...this._voiRange };\n  }\n\n  /**\n   * Set the VOI Range\n   * (lower: wc - ww / 2, upper: wc + ww / 2)\n   */\n  public set voiRange(voiRange: ColorbarVOIRange) {\n    if (\n      !isRangeValid(voiRange) ||\n      areColorbarRangesEqual(voiRange, this._voiRange)\n    ) {\n      return;\n    }\n\n    this._voiRange = voiRange;\n    this.render();\n  }\n\n  /**\n   * Tick size (pixels)\n   */\n  public get tickSize(): number {\n    return this._tickSize;\n  }\n\n  /**\n   * Set the tick size\n   */\n  public set tickSize(tickSize: number) {\n    if (tickSize === this._tickSize) {\n      return;\n    }\n\n    this._tickSize = tickSize;\n    this.render();\n  }\n\n  /**\n   * Tick width (pixels)\n   */\n  public get tickWidth(): number {\n    return this._tickWidth;\n  }\n\n  /**\n   * Set the tick width. This width is used as `lineWidth` by CanvasRenderingContext2D.\n   *\n   * https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/lineWidth\n   */\n  public set tickWidth(tickWidth: number) {\n    if (tickWidth === this._tickWidth) {\n      return;\n    }\n\n    this._tickWidth = tickWidth;\n    this.render();\n  }\n\n  /**\n   * Color used for ticks and labels.\n   */\n  public get color(): string {\n    return this._color;\n  }\n\n  /**\n   * Set the color used for ticks and labels. This color is used as `strokeStyle`\n   * and `fillStyle` by CanvasRenderingContext2D.\n   *\n   * https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/fillStyle\n   * https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/strokeStyle\n   */\n  public set color(color: string) {\n    if (color === this._color) {\n      return;\n    }\n\n    this._color = color;\n    this.render();\n  }\n\n  /**\n   * Return `true` when the ticks displayed are in the range from `imageRange.lower`\n   * to `imageRange.upper` or `false` when they are in the range from `voiRange.lower`\n   * to `voiRange.upper`\n   */\n  public get showFullPixelValueRange(): boolean {\n    return this._showFullPixelValueRange;\n  }\n\n  /**\n   * Change which range should be used when rendering the ticks. Set it to `true`\n   * to show from `imageRange.lower` to `imageRange.upper` or `false` show from\n   * `voiRange.lower` to `voiRange.upper`.\n   */\n  public set showFullPixelValueRange(showFullRange: boolean) {\n    if (showFullRange === this._showFullPixelValueRange) {\n      return;\n    }\n\n    this._showFullPixelValueRange = showFullRange;\n    this.render();\n  }\n\n  /**\n   * Ticks visibility\n   */\n  public get visible() {\n    return this._canvas.style.display === 'block';\n  }\n\n  /**\n   * Show/Hide the ticks\n   */\n  public set visible(visible) {\n    if (visible === this.visible) {\n      return;\n    }\n\n    this._canvas.style.display = visible ? 'block' : 'none';\n\n    if (visible) {\n      this.render();\n    }\n  }\n\n  /**\n   * Append the canvas to its parent element\n   * @param container - HTML element where the canvas should be added to\n   */\n  public appendTo(container: HTMLElement) {\n    container.appendChild(this._canvas);\n    this.render();\n  }\n\n  private static validateProps(props: ColorbarTicksProps) {\n    const { size, imageRange, voiRange } = props;\n\n    if (size && !isColorbarSizeValid(size)) {\n      throw new Error('Invalid \"size\"');\n    }\n\n    if (imageRange && !isRangeValid(imageRange)) {\n      throw new Error('Invalid \"imageRange\"');\n    }\n\n    if (voiRange && !isRangeValid(voiRange)) {\n      throw new Error('Invalid \"voiRange\"');\n    }\n  }\n\n  private _setCanvasSize(canvas: HTMLCanvasElement, size: ColorbarSize) {\n    const { width, height } = size;\n\n    canvas.width = width;\n    canvas.height = height;\n\n    Object.assign(canvas.style, {\n      width: `${width}px`,\n      height: `${height}px`,\n    });\n  }\n\n  private _createCanvasElement(\n    size: ColorbarSize,\n    top: number,\n    left: number\n  ): HTMLCanvasElement {\n    const canvas = document.createElement('canvas');\n\n    Object.assign(canvas.style, {\n      display: 'none',\n      position: 'absolute',\n      boxSizing: 'border-box',\n      top: `${top}px`,\n      left: `${left}px`,\n    });\n\n    this._setCanvasSize(canvas, size);\n\n    return canvas;\n  }\n\n  /**\n   * Calculate how many ticks can be displayed on the screen based on the\n   * pre-defined steps (`TICKS_STEPS`) as follow:\n   *   1. Calculate what should be the step (`roughStep`) based on the range and\n   *   the number of desired steps (`maxNumTicks`).\n   *   2. Find a number power of 10 (eg: 0.1, 1, 10, 100, etc.) that can be used\n   *   to multiply `roughStep` and return a number between 1 and 10 which is\n   *   called `roughtStepNormalized`.\n   *   3. Find in the TICKS_STEPS array a number that is bigger than or equal to\n   *   the `roughtStepNormalized` value (`normalizedStep`).\n   *   4. Multiply the `normalizedStep` to move it to the real range.\n   *\n   * @param range - Range with \"lower\" and \"upper\" values\n   */\n  private _getTicks(range) {\n    const { lower, upper } = range;\n    const rangeValue = upper - lower;\n\n    // First approximation based on the max number of ticks\n    const roughStep = rangeValue / (this._maxNumTicks - 1);\n\n    // Normalize rough step to find the normalized one that fits best\n    const stepPower = Math.pow(\n      10,\n      -Math.floor(Math.log10(Math.abs(roughStep)))\n    );\n\n    // Get a number between 1 and 10\n    const roughtStepNormalized = roughStep * stepPower;\n\n    // Find a normalize step that is greater than or equal to `roughtStepNormalized`\n    const normalizedStep = DEFAULTS.TICKS_STEPS.find(\n      (n) => n >= roughtStepNormalized\n    );\n\n    // Move `normalizedStep` to the real range\n    const step = normalizedStep / stepPower;\n\n    // Determine the scale limits based on the chosen step.\n    const scaleMax = Math.ceil(upper / step) * step;\n    const scaleMin = Math.floor(lower / step) * step;\n\n    // Find a possible tick values for the `step` computed\n    const ticksCount = Math.round((scaleMax - scaleMin) / step) + 1;\n    const ticks = [];\n\n    for (let i = 0; i < ticksCount; i++) {\n      ticks.push(scaleMin + i * step);\n    }\n\n    return { scaleMin, scaleMax, step, ticks };\n  }\n\n  private _getLeftTickInfo({ position, labelMeasure }) {\n    const { width } = this._canvas;\n    const labelX =\n      width - this.tickSize - labelMeasure.width - this._labelMargin;\n    const labelPoint = [labelX, position];\n    const tickPoints = {\n      start: [width - this._tickSize, position],\n      end: [width, position],\n    };\n\n    return { labelPoint, tickPoints };\n  }\n\n  private _getRightTickInfo({ position }) {\n    const labelPoint = [this._tickSize + this._labelMargin, position];\n    const tickPoints = {\n      start: [0, position],\n      end: [this._tickSize, position],\n    };\n\n    return { labelPoint, tickPoints };\n  }\n\n  private _getTopTickInfo({ position, labelMeasure }) {\n    throw new Error('Not implemented');\n  }\n\n  private _getBottomTickInfo({ position, labelMeasure }) {\n    throw new Error('Not implemented');\n  }\n\n  private render() {\n    const { _canvas: canvas } = this;\n\n    if (!canvas.isConnected || !this.visible) {\n      return;\n    }\n\n    const { width, height } = canvas;\n    const isHorizontal = width >= height;\n    const maxCanvasPixelValue = isHorizontal ? width : height;\n    const canvasContext = canvas.getContext('2d');\n    const { _voiRange: voiRange } = this;\n    const range = this._showFullPixelValueRange\n      ? this._imageRange\n      : { ...voiRange };\n    const rangeWidth = range.upper - range.lower;\n    const { ticks } = this._getTicks(range);\n\n    canvasContext.clearRect(0, 0, width, height);\n    canvasContext.font = this._font;\n    canvasContext.textBaseline = 'middle';\n    canvasContext.fillStyle = this._color;\n    canvasContext.strokeStyle = this._color;\n    canvasContext.lineWidth = this.tickWidth;\n\n    ticks.forEach((tick) => {\n      let position = Math.round(\n        maxCanvasPixelValue * ((tick - range.lower) / rangeWidth)\n      );\n\n      // Zero at the bottom and max at the top on vertical colorbars\n      if (!isHorizontal) {\n        position = height - position;\n      }\n\n      if (position < 0 || position > maxCanvasPixelValue) {\n        return;\n      }\n\n      const label = tick.toString();\n      const labelMeasure = canvasContext.measureText(label);\n      let tickInfo;\n\n      if (isHorizontal) {\n        if (this._rangeTextPosition === ColorbarRangeTextPosition.Top) {\n          tickInfo = this._getTopTickInfo({ position, labelMeasure });\n        } else {\n          tickInfo = this._getBottomTickInfo({ position, labelMeasure });\n        }\n      } else {\n        if (this._rangeTextPosition === ColorbarRangeTextPosition.Left) {\n          tickInfo = this._getLeftTickInfo({ position, labelMeasure });\n        } else {\n          tickInfo = this._getRightTickInfo({ position });\n        }\n      }\n\n      const { labelPoint, tickPoints } = tickInfo;\n      const { start: tickStart, end: tickEnd } = tickPoints;\n\n      canvasContext.beginPath();\n      canvasContext.moveTo(tickStart[0], tickStart[1]);\n      canvasContext.lineTo(tickEnd[0], tickEnd[1]);\n      canvasContext.fillText(label, labelPoint[0], labelPoint[1]);\n      canvasContext.stroke();\n\n      return position;\n    });\n  }\n}\n\nexport { ColorbarTicks as default, ColorbarTicks };\n","import type { WidgetProps, WidgetSize } from './types';\n\n/**\n * Base class for any widget that can be added to cornerstone. Currently it is\n * responsible only for holding the `rootElement`, contains a method that allows\n * adding it to the DOM and it also listens to container's size changes when the\n * widget is already added to the DOM. `dispose` must be called to destroy the\n * widget because it removes the widget from the DOM and stop listening to\n * container changes.\n *\n * You can apply some styles to widgets using the widget id or the `widget` class.\n *\n * Example:\n *   type ColorPickerProps = WidgetProps & {\n *     selectedColor: string;\n *   }\n *\n *   class ColorPicker extends Widget {\n *     constructor(props: ColorPickerProps) {\n *       super(props);\n *       // [code]\n *     }\n *\n *     public show() {\n *       console.log('Show color picker');\n *     }\n *\n *     protected containerResized() {\n *       console.log('New container size: ', this.containerSize);\n *     }\n *   }\n *\n *   const colorPicker = new ColorPicker({\n *     container: document.body,\n *     selectedColor: '#000';\n *   });\n *\n *   // another way to add the color picker to the DOM\n *   colorPicker.appendTo(document.body)\n *\n *   // Show color picker\n *   colorPicker.show();\n */\nabstract class Widget {\n  private _id: string;\n  private _rootElement: HTMLElement;\n  private _containerSize: WidgetSize;\n  private _containerResizeObserver: ResizeObserver;\n\n  constructor({ id, container }: WidgetProps) {\n    this._id = id;\n    this._containerSize = { width: 0, height: 0 };\n    this._rootElement = this.createRootElement(id);\n    this._containerResizeObserver = new ResizeObserver(\n      this._containerResizeCallback\n    );\n\n    if (container) {\n      this.appendTo(container);\n    }\n  }\n\n  /**\n   * Widget id\n   */\n  public get id() {\n    return this._id;\n  }\n\n  /**\n   * Widget's root element\n   */\n  public get rootElement(): HTMLElement {\n    return this._rootElement;\n  }\n\n  /**\n   * Append the widget to a parent element\n   * @param container - HTML element where the widget should be added to\n   */\n  public appendTo(container: HTMLElement) {\n    const {\n      _rootElement: rootElement,\n      _containerResizeObserver: resizeObserver,\n    } = this;\n    const { parentElement: currentContainer } = rootElement;\n\n    if (!container || container === currentContainer) {\n      return;\n    }\n\n    if (currentContainer) {\n      resizeObserver.unobserve(currentContainer);\n    }\n\n    container.appendChild(rootElement);\n    resizeObserver.observe(container);\n  }\n\n  /**\n   * Removes the widget from the DOM and stop listening to DOM events\n   */\n  public destroy() {\n    const {\n      _rootElement: rootElement,\n      _containerResizeObserver: resizeObserver,\n    } = this;\n    const { parentElement } = rootElement;\n\n    parentElement?.removeChild(rootElement);\n    resizeObserver.disconnect();\n  }\n\n  protected get containerSize(): WidgetSize {\n    // Returns a copy to prevent any external change\n    return { ...this._containerSize };\n  }\n\n  /**\n   * Creates the root element which is a div by default\n   * @param id - Root element id\n   * @returns A new HTML element where all other elements should be added to\n   */\n  protected createRootElement(id: string): HTMLElement {\n    const rootElement = document.createElement('div');\n\n    rootElement.id = id;\n    rootElement.classList.add('widget');\n\n    Object.assign(rootElement.style, {\n      width: '100%',\n      height: '100%',\n    });\n\n    return rootElement;\n  }\n\n  /**\n   * Method called every time widget's container is resize giving the\n   * opportunity to children classes to act when that happens.\n   */\n  protected onContainerResize() {\n    // no-op\n  }\n\n  private _containerResizeCallback = (entries: ResizeObserverEntry[]): void => {\n    let width;\n    let height;\n\n    const { contentRect, contentBoxSize } = entries[0];\n\n    // `contentRect` is better supported than `borderBoxSize` or `contentBoxSize`,\n    // but it is left over from an earlier implementation of the Resize Observer API\n    // and may be deprecated in future versions.\n    // https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserverEntry/contentRect\n    if (contentRect) {\n      width = contentRect.width;\n      height = contentRect.height;\n    } else if (contentBoxSize?.length) {\n      width = contentBoxSize[0].inlineSize;\n      height = contentBoxSize[0].blockSize;\n    }\n\n    this._containerSize = { width, height };\n    this.onContainerResize();\n  };\n}\n\nexport { Widget as default, Widget };\n","import { IColorMapPreset } from '@kitware/vtk.js/Rendering/Core/ColorTransferFunction/ColorMaps';\nimport { vec2 } from 'gl-matrix';\nimport { utilities as csUtils, Types } from '@cornerstonejs/core';\nimport type { ColorbarProps, ColorbarVOIRange } from './types';\nimport { isRangeValid, areColorbarRangesEqual } from './common';\nimport { ColorbarRangeTextPosition } from './enums/ColorbarRangeTextPosition';\nimport { ColorbarCanvas } from './ColorbarCanvas';\nimport { ColorbarTicks } from './ColorbarTicks';\nimport isRangeTextPositionValid from './common/isRangeTextPositionValid';\nimport Widget from '../../../widgets/Widget';\n\nconst DEFAULTS = {\n  MULTIPLIER: 1,\n  RANGE_TEXT_POSITION: ColorbarRangeTextPosition.Right,\n  TICKS_BAR_SIZE: 50,\n};\n\ntype ColorbarPoints = {\n  page: Types.Point2;\n  client: Types.Point2;\n  local: Types.Point2;\n};\n\n/**\n * A base colorbar class that is not associated with any viewport. It is\n * possible to click and drag to change the VOI range, shows the ticks during\n * interaction and it can show full image range or VOI range.\n */\nclass Colorbar extends Widget {\n  private _colormaps: Map<string, IColorMapPreset>;\n  private _activeColormapName: string;\n  private _eventListenersManager: csUtils.eventListener.MultiTargetEventListenerManager;\n  private _canvas: ColorbarCanvas;\n  private _ticksBar: ColorbarTicks;\n  private _rangeTextPosition: ColorbarRangeTextPosition;\n\n  private _isMouseOver = false;\n  private _isInteracting = false;\n\n  constructor(props: ColorbarProps) {\n    super(props);\n\n    this._eventListenersManager =\n      new csUtils.eventListener.MultiTargetEventListenerManager();\n    this._colormaps = Colorbar.getColormapsMap(props);\n    this._activeColormapName = Colorbar.getInitialColormapName(props);\n    this._canvas = this._createCanvas(props);\n    this._ticksBar = this._createTicksBar(props);\n    this._rangeTextPosition =\n      props.ticks?.position ?? DEFAULTS.RANGE_TEXT_POSITION;\n\n    this._canvas.appendTo(this.rootElement);\n    this._ticksBar.appendTo(this.rootElement);\n\n    this._addRootElementEventListeners();\n  }\n\n  /**\n   * Returns the active LUT name\n   */\n  public get activeColormapName() {\n    return this._activeColormapName;\n  }\n\n  /**\n   * Set the current active LUT name and re-renders the color bar\n   */\n  public set activeColormapName(colormapName: string) {\n    if (colormapName === this._activeColormapName) {\n      return;\n    }\n\n    const colormap = this._colormaps.get(colormapName);\n\n    if (!colormap) {\n      console.warn(`Invalid colormap name (${colormapName})`);\n      return;\n    }\n\n    this._activeColormapName = colormapName;\n    this._canvas.colormap = colormap;\n  }\n\n  public get imageRange() {\n    return this._canvas.imageRange;\n  }\n\n  public set imageRange(imageRange: ColorbarVOIRange) {\n    this._canvas.imageRange = imageRange;\n    this._ticksBar.imageRange = imageRange;\n  }\n\n  public get voiRange() {\n    return this._canvas.voiRange;\n  }\n\n  public set voiRange(voiRange: ColorbarVOIRange) {\n    const { voiRange: currentVoiRange } = this._canvas;\n\n    if (\n      !isRangeValid(voiRange) ||\n      areColorbarRangesEqual(voiRange, currentVoiRange)\n    ) {\n      return;\n    }\n\n    this._canvas.voiRange = voiRange;\n    this._ticksBar.voiRange = voiRange;\n    this.onVoiChange(voiRange);\n  }\n\n  public get showFullImageRange() {\n    return this._canvas.showFullImageRange;\n  }\n\n  public set showFullImageRange(value: boolean) {\n    this._canvas.showFullImageRange = value;\n    this._ticksBar.showFullPixelValueRange = value;\n  }\n\n  public destroy() {\n    super.destroy();\n    this._eventListenersManager.reset();\n  }\n\n  protected createRootElement(): HTMLElement {\n    const rootElement = document.createElement('div');\n\n    Object.assign(rootElement.style, {\n      position: 'relative',\n      fontSize: '0',\n      width: '100%',\n      height: '100%',\n    });\n\n    return rootElement;\n  }\n\n  protected onContainerResize() {\n    super.onContainerResize();\n    this.updateTicksBar();\n    this._canvas.size = this.containerSize;\n  }\n\n  protected getVOIMultipliers(): [number, number] {\n    return [DEFAULTS.MULTIPLIER, DEFAULTS.MULTIPLIER];\n  }\n\n  protected onVoiChange(voiRange: ColorbarVOIRange) {\n    // no-op\n  }\n\n  protected showTicks() {\n    this.updateTicksBar();\n    this._ticksBar.visible = true;\n  }\n\n  protected hideTicks() {\n    if (this._isInteracting || this._isMouseOver) {\n      return;\n    }\n\n    this._ticksBar.visible = false;\n  }\n\n  private static getColormapsMap(props: ColorbarProps) {\n    const { colormaps } = props;\n\n    return colormaps.reduce(\n      (items, item) => items.set(item.Name, item),\n      new Map<string, IColorMapPreset>()\n    );\n  }\n\n  private static getInitialColormapName(props: ColorbarProps) {\n    const { activeColormapName, colormaps } = props;\n    const colormapExists =\n      !!activeColormapName &&\n      colormaps.some((cm) => cm.Name === activeColormapName);\n\n    return colormapExists ? activeColormapName : colormaps[0].Name;\n  }\n\n  private _createCanvas(props: ColorbarProps) {\n    const { imageRange, voiRange, showFullPixelValueRange } = props;\n    const colormap = this._colormaps.get(this._activeColormapName);\n\n    return new ColorbarCanvas({\n      colormap,\n      imageRange,\n      voiRange: voiRange,\n      showFullPixelValueRange,\n    });\n  }\n\n  public _createTicksBar(props: ColorbarProps): ColorbarTicks {\n    const ticksProps = props.ticks;\n\n    return new ColorbarTicks({\n      imageRange: props.imageRange,\n      voiRange: props.voiRange,\n      ticks: ticksProps,\n      showFullPixelValueRange: props.showFullPixelValueRange,\n    });\n  }\n\n  private _getPointsFromMouseEvent(evt: MouseEvent): ColorbarPoints {\n    const { rootElement: element } = this;\n    const clientPoint: Types.Point2 = [evt.clientX, evt.clientY];\n    const pagePoint: Types.Point2 = [evt.pageX, evt.pageY];\n    const rect = element.getBoundingClientRect();\n    const localPoints: Types.Point2 = [\n      pagePoint[0] - rect.left - window.pageXOffset,\n      pagePoint[1] - rect.top - window.pageYOffset,\n    ];\n\n    return { client: clientPoint, page: pagePoint, local: localPoints };\n  }\n\n  private updateTicksBar() {\n    const { width: containerWidth, height: containerHeight } =\n      this.containerSize;\n\n    // ResizeObserver have not triggered any event when this happen\n    if (containerWidth === 0 && containerHeight === 0) {\n      return;\n    }\n\n    const { _ticksBar: ticksBar, _rangeTextPosition: rangeTextPosition } = this;\n    const isHorizontal = containerWidth >= containerHeight;\n    const width = isHorizontal ? containerWidth : DEFAULTS.TICKS_BAR_SIZE;\n    const height = isHorizontal ? DEFAULTS.TICKS_BAR_SIZE : containerHeight;\n\n    if (\n      !isRangeTextPositionValid(\n        containerWidth,\n        containerHeight,\n        rangeTextPosition\n      )\n    ) {\n      throw new Error(\n        'Invalid rangeTextPosition value for the current colobar orientation'\n      );\n    }\n\n    let ticksBarTop;\n    let ticksBarLeft;\n\n    ticksBar.size = { width, height };\n\n    if (isHorizontal) {\n      ticksBarLeft = 0;\n      ticksBarTop =\n        rangeTextPosition === ColorbarRangeTextPosition.Top\n          ? -height\n          : containerHeight;\n    } else {\n      ticksBarTop = 0;\n      ticksBarLeft =\n        rangeTextPosition === ColorbarRangeTextPosition.Left\n          ? -width\n          : containerWidth;\n    }\n\n    ticksBar.top = ticksBarTop;\n    ticksBar.left = ticksBarLeft;\n  }\n\n  private _mouseOverCallback = (evt) => {\n    this._isMouseOver = true;\n    this.showTicks();\n    evt.stopPropagation();\n  };\n\n  private _mouseOutCallback = (evt) => {\n    this._isMouseOver = false;\n    this.hideTicks();\n    evt.stopPropagation();\n  };\n\n  private _mouseDownCallback = (evt: MouseEvent) => {\n    this._isInteracting = true;\n    this.showTicks();\n    this._addVOIEventListeners(evt);\n    evt.stopPropagation();\n  };\n\n  private _mouseDragCallback = (evt, initialState) => {\n    const multipliers = this.getVOIMultipliers();\n    const currentPoints = this._getPointsFromMouseEvent(evt);\n    const { points: startPoints, voiRange: startVOIRange } = initialState;\n    const canvasDelta = vec2.sub(\n      vec2.create(),\n      currentPoints.local,\n      startPoints.local\n    );\n\n    const wwDelta = canvasDelta[0] * multipliers[0];\n    const wcDelta = canvasDelta[1] * multipliers[1];\n\n    if (!wwDelta && !wcDelta) {\n      return;\n    }\n\n    const { lower: voiLower, upper: voiUpper } = startVOIRange;\n    let { windowWidth, windowCenter } = csUtils.windowLevel.toWindowLevel(\n      voiLower,\n      voiUpper\n    );\n\n    windowWidth = Math.max(windowWidth + wwDelta, 1);\n    windowCenter += wcDelta;\n\n    const newVoiRange = csUtils.windowLevel.toLowHighRange(\n      windowWidth,\n      windowCenter\n    );\n\n    this.voiRange = newVoiRange;\n    evt.stopPropagation();\n    evt.preventDefault();\n  };\n\n  private _mouseUpCallback = (evt) => {\n    this._isInteracting = false;\n    this.hideTicks();\n    this._removeVOIEventListeners();\n    evt.stopPropagation();\n  };\n\n  private _addRootElementEventListeners() {\n    const { _eventListenersManager: manager } = this;\n    const { rootElement: element } = this;\n\n    manager.addEventListener(element, 'mouseover', this._mouseOverCallback);\n    manager.addEventListener(element, 'mouseout', this._mouseOutCallback);\n    manager.addEventListener(\n      element,\n      'mousedown',\n      this._mouseDownCallback as EventListener\n    );\n  }\n\n  private _addVOIEventListeners(evt: MouseEvent) {\n    const { _eventListenersManager: manager } = this;\n    const points = this._getPointsFromMouseEvent(evt);\n    const voiRange = { ...this._canvas.voiRange };\n    const initialDragState = { points, voiRange };\n\n    this._removeVOIEventListeners();\n\n    manager.addEventListener(document, 'voi.mouseup', this._mouseUpCallback);\n    manager.addEventListener(document, 'voi.mousemove', (evt) =>\n      this._mouseDragCallback(evt, initialDragState)\n    );\n  }\n\n  private _removeVOIEventListeners() {\n    const { _eventListenersManager: manager } = this;\n\n    manager.removeEventListener(document, 'voi.mouseup');\n    manager.removeEventListener(document, 'voi.mousemove');\n  }\n}\n\nexport { Colorbar as default, Colorbar };\n","import { ColorbarRangeTextPosition } from '../enums';\n\nfunction isRangeTextPositionValid(\n  colorbarWidth: number,\n  colorbarHeight: number,\n  rangeTextPosition: ColorbarRangeTextPosition\n) {\n  const isHorizontal = colorbarWidth >= colorbarHeight;\n  const validRangeTextPositions = isHorizontal\n    ? [ColorbarRangeTextPosition.Top, ColorbarRangeTextPosition.Bottom]\n    : [ColorbarRangeTextPosition.Left, ColorbarRangeTextPosition.Right];\n\n  return validRangeTextPositions.includes(rangeTextPosition);\n}\n\nexport { isRangeTextPositionValid as default, isRangeTextPositionValid };\n","import {\n  eventTarget,\n  VolumeViewport,\n  StackViewport,\n  Types,\n  Enums,\n  utilities,\n  getEnabledElement,\n} from '@cornerstonejs/core';\nimport { Colorbar } from './Colorbar';\nimport type { ViewportColorbarProps, ColorbarVOIRange } from './types';\nimport { getVOIMultipliers } from '../../getVOIMultipliers';\n\nconst { Events } = Enums;\nconst defaultImageRange = { lower: -1000, upper: 1000 };\n/**\n * A colorbar associated with a viewport that updates automatically when the\n * viewport VOI changes or when the stack/volume are updated..\n */\nclass ViewportColorbar extends Colorbar {\n  private _element: HTMLDivElement;\n  private _volumeId: string;\n\n  private _hideTicksTime: number;\n  private _hideTicksTimeoutId: number;\n\n  constructor(props: ViewportColorbarProps) {\n    const { element, volumeId } = props;\n    const imageRange = ViewportColorbar._getImageRange(element, volumeId);\n    const voiRange = ViewportColorbar._getVOIRange(element, volumeId);\n\n    super({ ...props, imageRange, voiRange });\n\n    this._element = element;\n    this._volumeId = volumeId;\n\n    this._addCornerstoneEventListener();\n  }\n\n  public get element() {\n    return this._element;\n  }\n\n  public get enabledElement() {\n    return getEnabledElement(this._element);\n  }\n\n  protected getVOIMultipliers(): [number, number] {\n    const { viewport } = this.enabledElement;\n    return getVOIMultipliers(viewport, this._volumeId);\n  }\n\n  protected onVoiChange(voiRange: ColorbarVOIRange) {\n    super.onVoiChange(voiRange);\n\n    const { viewport } = this.enabledElement;\n\n    if (viewport instanceof StackViewport) {\n      viewport.setProperties({\n        voiRange: voiRange,\n      });\n      viewport.render();\n    } else if (viewport instanceof VolumeViewport) {\n      const { _volumeId: volumeId } = this;\n      const viewportsContainingVolumeUID = utilities.getViewportsWithVolumeId(\n        volumeId,\n        viewport.renderingEngineId\n      );\n\n      viewport.setProperties({ voiRange }, volumeId);\n      viewportsContainingVolumeUID.forEach((vp) => vp.render());\n    }\n  }\n\n  private static _getImageRange(element, volumeId?) {\n    const enabledElement = getEnabledElement(element);\n    const { viewport } = enabledElement;\n\n    const actor = volumeId\n      ? viewport.getActor(volumeId)\n      : viewport.getDefaultActor();\n\n    if (!actor) {\n      return defaultImageRange;\n    }\n\n    const imageData = actor.actor.getMapper().getInputData();\n    const imageRange = imageData.getPointData().getScalars().getRange();\n\n    return imageRange[0] === 0 && imageRange[1] === 0\n      ? defaultImageRange\n      : { lower: imageRange[0], upper: imageRange[1] };\n  }\n\n  private static _getVOIRange(element, volumeId) {\n    const enabledElement = getEnabledElement(element);\n    const { viewport } = enabledElement;\n\n    const volumeActor = volumeId\n      ? viewport.getActor(volumeId)\n      : viewport.getDefaultActor();\n\n    if (!volumeActor || !utilities.isImageActor(volumeActor)) {\n      return defaultImageRange;\n    }\n\n    const voiRange = (volumeActor.actor as Types.ImageActor)\n      .getProperty()\n      .getRGBTransferFunction(0)\n      .getRange();\n\n    return voiRange[0] === 0 && voiRange[1] === 0\n      ? defaultImageRange\n      : { lower: voiRange[0], upper: voiRange[1] };\n  }\n\n  private autoHideTicks = () => {\n    // Avoiding calling setTimeout multiple times when manipulating the VOI\n    // via WindowLevel tool for better performance\n    if (this._hideTicksTimeoutId) {\n      return;\n    }\n\n    const timeLeft = this._hideTicksTime - Date.now();\n\n    if (timeLeft <= 0) {\n      this.hideTicks();\n    } else {\n      this._hideTicksTimeoutId = window.setTimeout(() => {\n        // Recursive call until there is no more time left\n        this._hideTicksTimeoutId = 0;\n        this.autoHideTicks();\n      }, timeLeft);\n    }\n  };\n\n  private showAndAutoHideTicks(interval = 1000) {\n    this._hideTicksTime = Date.now() + interval;\n    this.showTicks();\n    this.autoHideTicks();\n  }\n\n  private _stackNewImageCallback = () => {\n    this.imageRange = ViewportColorbar._getImageRange(this._element);\n  };\n\n  private _imageVolumeModifiedCallback = (\n    evt: Types.EventTypes.ImageVolumeModifiedEvent\n  ) => {\n    const { volumeId } = evt.detail.imageVolume;\n\n    if (volumeId !== this._volumeId) {\n      return;\n    }\n\n    const { _element: element } = this;\n    this.imageRange = ViewportColorbar._getImageRange(element, volumeId);\n  };\n\n  private _viewportVOIModifiedCallback = (\n    evt: Types.EventTypes.VoiModifiedEvent\n  ) => {\n    const { viewportId, volumeId, range: voiRange } = evt.detail;\n    const { viewport } = this.enabledElement;\n\n    if (viewportId !== viewport.id || volumeId !== this._volumeId) {\n      return;\n    }\n\n    this.voiRange = voiRange;\n    this.showAndAutoHideTicks();\n  };\n\n  private _addCornerstoneEventListener() {\n    const { _element: element } = this;\n\n    eventTarget.addEventListener(\n      Events.IMAGE_VOLUME_MODIFIED,\n      this._imageVolumeModifiedCallback\n    );\n\n    element.addEventListener(\n      Events.STACK_NEW_IMAGE,\n      this._stackNewImageCallback\n    );\n\n    element.addEventListener(\n      Events.VOI_MODIFIED,\n      this._viewportVOIModifiedCallback as EventListener\n    );\n  }\n}\n\nexport { ViewportColorbar as default, ViewportColorbar };\n","import { Types, utilities as csUtils } from '@cornerstonejs/core';\nimport { isViewportPreScaled } from './viewport';\n\nconst DEFAULT_MULTIPLIER = 4;\n\nfunction getVOIMultipliers(\n  viewport: Types.IStackViewport | Types.IVolumeViewport,\n  volumeId?: string,\n  options?: {\n    fixedPTWindowWidth?: boolean;\n  }\n): [number, number] {\n  const modality = csUtils.getViewportModality(viewport, volumeId);\n\n  if (modality === 'PT') {\n    const { clientWidth, clientHeight } = viewport.element;\n    const ptMultiplier = 5 / Math.max(clientWidth, clientHeight);\n    const isPreScaled = isViewportPreScaled(viewport, volumeId);\n    const { fixedPTWindowWidth = true } = options ?? {};\n\n    // Set the \"X\" multiplier equal to zero in order to do not allow\n    // any change to the window width (0 * cursorDeltaX = 0)\n    const xMultiplier = fixedPTWindowWidth ? 0 : ptMultiplier;\n\n    return isPreScaled\n      ? [xMultiplier, ptMultiplier]\n      : [xMultiplier, DEFAULT_MULTIPLIER];\n  }\n\n  return [DEFAULT_MULTIPLIER, DEFAULT_MULTIPLIER];\n}\n\nexport { getVOIMultipliers as default, getVOIMultipliers };\n","import { getRenderingEngines } from '@cornerstonejs/core';\nimport { triggerAnnotationRenderForViewportIds } from '../../utilities';\n\n/**\n * When an annotation is deselected, trigger an annotation render for all viewports.\n * The reason for this is that, drawing an annotation in a different viewport\n * should deselect all other annotations in other viewports. In order to achieve\n * this, we need to trigger an annotation render for all viewports.\n * Todo: Although this is inefficient, but since annotations are only rendered if necessary,\n * it's probably not going to have a noticeable impact on performance.\n * @param evt - The event object.\n */\nfunction annotationSelectionListener(evt): void {\n  const deselectedAnnotation = evt.detail.removed;\n\n  if (!deselectedAnnotation.length) {\n    return;\n  }\n\n  const renderingEngines = getRenderingEngines();\n\n  renderingEngines.forEach((renderingEngine) => {\n    const viewports = renderingEngine.getViewports();\n    const viewportIds = viewports.map((vp) => vp.id);\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIds);\n  });\n}\n\nexport default annotationSelectionListener;\n","import { getRenderingEngine } from '@cornerstonejs/core';\nimport triggerAnnotationRenderForViewportIds from '../../utilities/triggerAnnotationRenderForViewportIds';\n\n/**\n * This is a callback function that is called when an annotation is modified.\n * Since we are throttling the cachedStats calculation for annotation tools,\n * we need to trigger a final render for the annotation. so that the annotation\n * textBox is updated.\n * Todo: This will trigger all the annotation tools to re-render, although DOM\n * will update those that have changed, but more efficient would be to only\n * update the changed annotation.\n * Todo: A better way is to extract the textBox render logic from the renderAnnotation\n * of all tools and just trigger a render for that (instead of the entire annotation., even if\n * no svg update happens since the attributes for handles are the same)\n */\nfunction annotationModifiedListener(evt): void {\n  const { viewportId, renderingEngineId } = evt.detail;\n  const renderingEngine = getRenderingEngine(renderingEngineId);\n  triggerAnnotationRenderForViewportIds(renderingEngine, [viewportId]);\n}\n\nexport default annotationModifiedListener;\n","import { Enums, Types } from '@cornerstonejs/core';\nimport triggerAnnotationRender from '../utilities/triggerAnnotationRender';\n\n/**\n *  When the image is rendered, check what tools can be rendered for this element.\n *\n * - First we get all tools which are active, passive or enabled on the element.\n * - If any of these tools have a `renderAnnotation` method, then we render them.\n * - Note that these tools don't necessarily have to be instances of  `AnnotationTool`,\n *   Any tool may register a `renderAnnotation` method (e.g. a tool that displays an overlay).\n *\n * @param evt - The normalized IMAGE_RENDERED event.\n */\nconst onImageRendered = function (evt: Types.EventTypes.ImageRenderedEvent) {\n  // TODO: should we do this on camera modified instead of image rendered?\n  // e.g. no need to re-render annotations if only the VOI has changed\n  triggerAnnotationRender(evt.detail.element);\n};\n\nconst enable = function (element: HTMLDivElement): void {\n  element.addEventListener(\n    Enums.Events.IMAGE_RENDERED,\n    onImageRendered as EventListener\n  );\n};\n\nconst disable = function (element: HTMLDivElement): void {\n  element.removeEventListener(\n    Enums.Events.IMAGE_RENDERED,\n    onImageRendered as EventListener\n  );\n};\n\nexport default {\n  enable,\n  disable,\n};\n","import { state, ToolGroupManager } from '../../store';\nimport ToolModes from '../../enums/ToolModes';\n\nconst { Active } = ToolModes;\n\n/**\n * @function customCallbackHandler This is used as a generic event handler for tool events\n * on viewports. It:\n *\n * - Finds an \"active\" tool with:\n *    - A matching `handlerType`\n *    - A matching `customFunction` on its tool instance\n *\n * Then calls that custom function with raised event.\n *\n * @param handlerType - 'Mouse' | 'Touch' | 'MouseWheel'\n * @param customFunction - Function name that's expected to live on implementing\n *   (and event handling) active tool ex. 'doubleClickCallback'\n * @param evt\n */\nexport default function customCallbackHandler(\n  handlerType: string,\n  customFunction: string,\n  evt\n) {\n  if (state.isInteractingWithTool) {\n    return false;\n  }\n\n  const { renderingEngineId, viewportId } = evt.detail;\n  const toolGroup = ToolGroupManager.getToolGroupForViewport(\n    viewportId,\n    renderingEngineId\n  );\n\n  if (!toolGroup) {\n    return false;\n  }\n\n  // TODO: Filter tools by interaction type?\n  /**\n   * Iterate tool group tools until we find a tool that is:\n   * - active\n   * - has the custom callback function\n   *\n   */\n  let activeTool;\n  const toolGroupToolNames = Object.keys(toolGroup.toolOptions);\n\n  for (let j = 0; j < toolGroupToolNames.length; j++) {\n    const toolName = toolGroupToolNames[j];\n    const tool = toolGroup.toolOptions[toolName];\n    // TODO: Should be getter\n    const toolInstance = toolGroup.getToolInstance(toolName);\n\n    if (\n      // TODO: Should be enum?\n      tool.mode === Active &&\n      // TODO: Should be implements interface?\n      // Weird that we need concrete instance. Other options to filter / get callback?\n      typeof toolInstance[customFunction] === 'function'\n    ) {\n      activeTool = toolGroup.getToolInstance(toolName);\n      break;\n    }\n  }\n\n  if (!activeTool) {\n    return;\n  }\n\n  activeTool[customFunction](evt);\n}\n","import customCallbackHandler from '../shared/customCallbackHandler';\n\n/**\n * mouseClick - Event handler for mouse click events. Uses `customCallbackHandler` to fire\n * the `mouseClickCallback` function on active tools.\n */\nconst mouseClick = customCallbackHandler.bind(\n  null,\n  'Mouse',\n  'mouseClickCallback'\n);\n\nexport default mouseClick;\n","import customCallbackHandler from '../shared/customCallbackHandler';\n\n/**\n * @function mouseDoubleClick - Event handler for mouse double click events. Uses `customCallbackHandler` to fire\n * the `doubleClickCallback` function on active tools.\n */\nconst mouseDoubleClick = customCallbackHandler.bind(\n  null,\n  'Mouse',\n  'doubleClickCallback'\n);\n\nexport default mouseDoubleClick;\n","import type { Types } from '@cornerstonejs/core';\n\nimport {\n  ToolAnnotationsPair,\n  ToolsWithMoveableHandles,\n} from '../types/InternalToolTypes';\n\n/**\n * Filters an array of tools, returning only tools with moveable handles at the mouse location that are not locked\n *\n * @param element - The element\n * @param ToolAndAnnotations - The input tool array.\n * @param canvasCoords - The coordinates of the mouse position.\n * @param interactionType - The type of interaction (e.g. 'mouse' or 'touch')\n * @returns The filtered array.\n */\nexport default function filterToolsWithMoveableHandles(\n  element: HTMLDivElement,\n  ToolAndAnnotations: ToolAnnotationsPair[],\n  canvasCoords: Types.Point2,\n  interactionType = 'mouse'\n): ToolsWithMoveableHandles[] {\n  const proximity = interactionType === 'touch' ? 36 : 6;\n  const toolsWithMoveableHandles = [];\n\n  ToolAndAnnotations.forEach(({ tool, annotations }) => {\n    for (const annotation of annotations) {\n      if (annotation.isLocked || !annotation.isVisible) {\n        continue;\n      }\n\n      const handle = tool.getHandleNearImagePoint(\n        element,\n        annotation,\n        canvasCoords,\n        proximity\n      );\n\n      if (handle) {\n        toolsWithMoveableHandles.push({\n          tool,\n          annotation,\n          handle,\n        });\n        break;\n      }\n    }\n  });\n\n  return toolsWithMoveableHandles;\n}\n","import { getAnnotations } from '../stateManagement/annotation/annotationState';\nimport { ToolAnnotationsPair } from '../types/InternalToolTypes';\nimport type AnnotationTool from '../tools/base/AnnotationTool';\nimport BaseTool from '../tools/base/BaseTool';\nimport { getEnabledElement } from '@cornerstonejs/core';\n\n/**\n * Filters an array of tools, returning only tools which have annotation.\n *\n * @param element - The cornerstone3D enabled element.\n * @param tools - The array of tools to check.\n *\n * @returns The array of tools with their found annotations.\n */\nexport default function filterToolsWithAnnotationsForElement(\n  element: HTMLDivElement,\n  tools: AnnotationTool[]\n): ToolAnnotationsPair[] {\n  const result = [];\n  for (let i = 0; i < tools.length; i++) {\n    const tool = tools[i];\n\n    if (!tool) {\n      console.warn('undefined tool in filterToolsWithAnnotationsForElement');\n      continue;\n    }\n\n    let annotations = getAnnotations(\n      (tool.constructor as typeof BaseTool).toolName,\n      element\n    );\n\n    if (!annotations?.length) {\n      continue;\n    }\n\n    if (typeof tool.filterInteractableAnnotationsForElement === 'function') {\n      // If the tool has a annotations filter (e.g. with in-plane-annotations-only filtering), use it.\n      annotations = tool.filterInteractableAnnotationsForElement(\n        element,\n        annotations\n      );\n    }\n\n    if (annotations.length > 0) {\n      result.push({ tool, annotations });\n    }\n  }\n\n  return result;\n}\n","import type { Types } from '@cornerstonejs/core';\n\nimport {\n  ToolAnnotationPair,\n  ToolAnnotationsPair,\n} from '../types/InternalToolTypes';\n\n/**\n * Filters an array of tools with annotations, returning the first annotation\n * for each tool that is moveable and at the mouse location. It results in\n * one annotation per tool.\n *\n *\n * @param element - The HTML element\n * @param ToolAndAnnotations - The input tool array.\n * @param canvasCoords - The coordinates of the mouse position.\n * @param interactionType - The type of interaction that is taking place.\n * @returns The filtered array containing ToolAndAnnotation\n */\nexport default function filterMoveableAnnotationTools(\n  element: HTMLDivElement,\n  ToolAndAnnotations: ToolAnnotationsPair[],\n  canvasCoords: Types.Point2,\n  interactionType = 'mouse'\n): ToolAnnotationPair[] {\n  const proximity = interactionType === 'touch' ? 36 : 6;\n\n  // TODO - This could get pretty expensive pretty quickly. We don't want to fetch the camera\n  // And do world to canvas on each coord.\n\n  // We want to produce a matrix from canvas to world for the viewport and just do a matrix operation on each handle.\n  // This could still be expensive for ROIs, but we probably shouldn't have \"handles\" for them anyway.\n\n  const moveableAnnotationTools = [];\n\n  ToolAndAnnotations.forEach(({ tool, annotations }) => {\n    for (const annotation of annotations) {\n      if (annotation.isLocked || !annotation.isVisible) {\n        continue;\n      }\n\n      const near = tool.isPointNearTool(\n        element,\n        annotation,\n        canvasCoords,\n        proximity,\n        interactionType\n      );\n\n      if (near) {\n        moveableAnnotationTools.push({\n          tool,\n          annotation,\n        });\n        break;\n      }\n    }\n  });\n\n  return moveableAnnotationTools;\n}\n","import { KeyboardBindings as kb } from '../../enums';\n\n/**\n * Gets the mouse modifier key from a mouse event.\n * Supports Shift, Ctrl, Alt, in singly and in combinations of 2\n * Supports Meta singly.\n */\nconst getMouseModifierKey = (evt) => {\n  // The logic is a hard coded key mapping\n  if (evt.shiftKey) {\n    if (evt.ctrlKey) {\n      return kb.ShiftCtrl;\n    }\n    if (evt.altKey) {\n      return kb.ShiftAlt;\n    }\n    if (evt.metaKey) {\n      return kb.ShiftMeta;\n    }\n    return kb.Shift;\n  }\n  if (evt.ctrlKey) {\n    if (evt.altKey) {\n      return kb.CtrlAlt;\n    }\n    if (evt.metaKey) {\n      return kb.CtrlMeta;\n    }\n    return kb.Ctrl;\n  }\n  if (evt.altKey) {\n    return (evt.metaKey && kb.AltMeta) || kb.Alt;\n  }\n  if (evt.metaKey) {\n    return kb.Meta;\n  }\n  return undefined;\n};\n\nexport default getMouseModifierKey;\n","import { ToolGroupManager } from '../../store';\nimport { MouseBindings, ToolModes } from '../../enums';\nimport { keyEventListener } from '../../eventListeners';\nimport { EventTypes } from '../../types';\nimport getMouseModifier from './getMouseModifier';\n\nconst { Active } = ToolModes;\n\n/**\n * Iterate tool group tools until we find a tool that has a \"ToolBinding\"\n * that matches our MouseEvent's `buttons`. It's possible there will be no match\n * (no active tool for that mouse button combination).\n *\n * @param evt - The event dispatcher mouse event.\n *\n * @returns tool\n */\nexport default function getActiveToolForMouseEvent(\n  evt: EventTypes.NormalizedMouseEventType\n) {\n  // Todo: we should refactor this to use getToolsWithModesForMouseEvent instead\n  const { renderingEngineId, viewportId } = evt.detail;\n  const mouseEvent = evt.detail.event;\n\n  // If any keyboard modifier key is also pressed - get the mouse version\n  // first since it handles combinations, while the key event handles non-modifier\n  // keys.\n  const modifierKey =\n    getMouseModifier(mouseEvent) || keyEventListener.getModifierKey();\n\n  const toolGroup = ToolGroupManager.getToolGroupForViewport(\n    viewportId,\n    renderingEngineId\n  );\n\n  if (!toolGroup) {\n    return null;\n  }\n\n  const toolGroupToolNames = Object.keys(toolGroup.toolOptions);\n  const defaultMousePrimary = toolGroup.getDefaultMousePrimary();\n\n  for (let j = 0; j < toolGroupToolNames.length; j++) {\n    const toolName = toolGroupToolNames[j];\n    const toolOptions = toolGroup.toolOptions[toolName];\n\n    // tool has binding that matches the mouse button, if mouseEvent is undefined\n    // it uses the primary button\n    const correctBinding =\n      toolOptions.bindings.length &&\n      toolOptions.bindings.some((binding) => {\n        return (\n          binding.mouseButton ===\n            (mouseEvent ? mouseEvent.buttons : defaultMousePrimary) &&\n          binding.modifierKey === modifierKey\n        );\n      });\n\n    if (toolOptions.mode === Active && correctBinding) {\n      return toolGroup.getToolInstance(toolName);\n    }\n  }\n}\n","import { ToolGroupManager } from '../../store';\nimport { ToolModes } from '../../enums';\nimport { EventTypes } from '../../types';\n\ntype ModesFilter = Array<ToolModes>;\n\n/**\n * Given the normalized mouse event and a filter of modes,\n * find all the tools on the element that are in one of the specified modes.\n * If the evtButton is specified, only tools with a matching binding will be returned.\n * @param evt - The normalized mouseDown event.\n * @param modesFilter - An array of entries from the `ToolModes` enum.\n */\nexport default function getToolsWithModesForMouseEvent(\n  evt: EventTypes.MouseMoveEventType,\n  modesFilter: ModesFilter,\n  evtButton?: any\n) {\n  const { renderingEngineId, viewportId } = evt.detail;\n  const toolGroup = ToolGroupManager.getToolGroupForViewport(\n    viewportId,\n    renderingEngineId\n  );\n\n  if (!toolGroup) {\n    return [];\n  }\n\n  const enabledTools = [];\n\n  const toolGroupToolNames = Object.keys(toolGroup.toolOptions);\n\n  for (let j = 0; j < toolGroupToolNames.length; j++) {\n    const toolName = toolGroupToolNames[j];\n    const tool = toolGroup.toolOptions[toolName];\n\n    // tool has binding that matches the mouse button - we match those with\n    // any modifier keys too since they can be passively interacted with\n    const correctBinding =\n      evtButton != null && // not null or undefined\n      tool.bindings.length &&\n      tool.bindings.some((binding) => binding.mouseButton === evtButton);\n\n    if (\n      modesFilter.includes(tool.mode) &&\n      // Should not filter by event's button\n      // or should, and the tool binding includes the event's button\n      (!evtButton || correctBinding)\n    ) {\n      const toolInstance = toolGroup.getToolInstance(toolName);\n      enabledTools.push(toolInstance);\n    }\n  }\n\n  return enabledTools;\n}\n","import { getEnabledElement } from '@cornerstonejs/core';\nimport { state } from '../../store';\nimport { ToolModes } from '../../enums';\nimport { EventTypes } from '../../types';\n\n// Util\nimport filterToolsWithAnnotationsForElement from '../../store/filterToolsWithAnnotationsForElement';\nimport filterMoveableAnnotationTools from '../../store/filterMoveableAnnotationTools';\nimport getToolsWithActionsForMouseEvent from '../shared/getToolsWithActionsForMouseEvent';\n\nconst { Active, Passive } = ToolModes;\n\n/**\n * Look for active or passive annotations with an action that could handle the\n * event based on the bindings and invoke the first one found.\n *\n * @param evt - The normalized mouseDown event.\n * @returns True if an action has executed or false otherwise\n */\nexport default function mouseDownAnnotationAction(\n  evt: EventTypes.MouseDownEventType\n): boolean {\n  // If a tool has locked the current state it is dealing with an interaction within its own eventLoop.\n  if (state.isInteractingWithTool) {\n    return false;\n  }\n\n  const eventDetail = evt.detail;\n  const { element } = eventDetail;\n  const enabledElement = getEnabledElement(element);\n  const { canvas: canvasCoords } = eventDetail.currentPoints;\n\n  if (!enabledElement) {\n    return false;\n  }\n\n  // Find all tools that might respond to this mouse down\n  const toolsWithActions = getToolsWithActionsForMouseEvent(evt, [\n    Active,\n    Passive,\n  ]);\n\n  const tools = Array.from(toolsWithActions.keys());\n\n  // Filter tools with annotations for this element\n  const annotationToolsWithAnnotations = filterToolsWithAnnotationsForElement(\n    element,\n    tools\n  );\n\n  // Only moveable annotations (unlocked, visible and close to the canvas coordinates) may trigger actions\n  const moveableAnnotationTools = filterMoveableAnnotationTools(\n    element,\n    annotationToolsWithAnnotations,\n    canvasCoords\n  );\n\n  // If there are annotation tools that are interactable, select the first one\n  // that isn't locked. If there's only one annotation tool, select it.\n  if (moveableAnnotationTools.length > 0) {\n    const { tool, annotation } = moveableAnnotationTools[0];\n    const action = toolsWithActions.get(tool);\n    const method =\n      typeof action.method === 'string' ? tool[action.method] : action.method;\n\n    method.call(tool, evt, annotation);\n\n    return true;\n  }\n\n  return false;\n}\n","import { ToolGroupManager } from '../../store';\nimport { ToolModes } from '../../enums';\nimport { ToolAction, EventTypes } from '../../types';\n\nimport { keyEventListener } from '../../eventListeners';\nimport getMouseModifier from './getMouseModifier';\n\ntype ModesFilter = Array<ToolModes>;\n\n/**\n * Given the mouse event and a list of tool modes, find all tool instances\n * with actions that were added to the tool group associated with the viewport\n * that triggered the event.\n *\n * @param evt - mouseDown event triggered by a cornerstone viewport\n * @param toolModes - List of tool modes used to filter the tools registered\n *                    in the viewport's tool group\n */\nexport default function getToolsWithActionsForMouseEvent(\n  evt: EventTypes.MouseMoveEventType,\n  toolModes: ToolModes[]\n): Map<any, ToolAction> {\n  const toolsWithActions = new Map();\n  const { renderingEngineId, viewportId } = evt.detail;\n  const toolGroup = ToolGroupManager.getToolGroupForViewport(\n    viewportId,\n    renderingEngineId\n  );\n\n  if (!toolGroup) {\n    return toolsWithActions;\n  }\n\n  const toolGroupToolNames = Object.keys(toolGroup.toolOptions);\n  const defaultMousePrimary = toolGroup.getDefaultMousePrimary();\n  const mouseEvent = evt.detail.event;\n  const mouseButton = mouseEvent?.buttons ?? defaultMousePrimary;\n  const modifierKey =\n    getMouseModifier(mouseEvent) || keyEventListener.getModifierKey();\n\n  for (let j = 0; j < toolGroupToolNames.length; j++) {\n    const toolName = toolGroupToolNames[j];\n    const tool = toolGroup.getToolInstance(toolName);\n    const actions = tool.configuration?.actions;\n\n    if (!actions?.length || !toolModes.includes(tool.mode)) {\n      continue;\n    }\n\n    const action = actions.find(\n      (action) =>\n        action.bindings.length &&\n        action.bindings.some(\n          (binding) =>\n            binding.mouseButton === mouseButton &&\n            binding.modifierKey === modifierKey\n        )\n    );\n\n    if (action) {\n      toolsWithActions.set(tool, action);\n    }\n  }\n\n  return toolsWithActions;\n}\n","import { state } from '../../store';\nimport { ToolModes } from '../../enums';\nimport { EventTypes } from '../../types';\nimport {\n  ToolAnnotationPair,\n  ToolsWithMoveableHandles,\n} from '../../types/InternalToolTypes';\n\nimport {\n  setAnnotationSelected,\n  isAnnotationSelected,\n} from '../../stateManagement/annotation/annotationSelection';\n\nimport { isAnnotationLocked } from '../../stateManagement/annotation/annotationLocking';\nimport { isAnnotationVisible } from '../../stateManagement/annotation/annotationVisibility';\n\n// Util\nimport filterToolsWithMoveableHandles from '../../store/filterToolsWithMoveableHandles';\nimport filterToolsWithAnnotationsForElement from '../../store/filterToolsWithAnnotationsForElement';\nimport filterMoveableAnnotationTools from '../../store/filterMoveableAnnotationTools';\nimport getActiveToolForMouseEvent from '../shared/getActiveToolForMouseEvent';\nimport getToolsWithModesForMouseEvent from '../shared/getToolsWithModesForMouseEvent';\nimport mouseDownAnnotationAction from './mouseDownAnnotationAction';\n\nconst { Active, Passive } = ToolModes;\n\n/**\n * When the mouse is depressed we check which entities can process these events in the following manner:\n *\n * - First we get the `activeTool` for the mouse button pressed.\n * - If the `activeTool` has a `preMouseDownCallback`, this is called. If the callback returns `true`,\n *   the event does not propagate further.\n * - Next we get all tools which are active or passive (`activeAndPassiveTools`), as annotation. for these tools could\n *   possibly catch and handle these events. We then filter the `activeAndPassiveTools` using `filterToolsWithAnnotationsForElement`, which filters tools with annotations\n *   for this frame of reference. Optionally a tool can employ a further filtering (via a\n *   `filterInteractableAnnotationsForElement` callback) for tools interactable within the current camera view\n *   (e.g. tools that only render when viewed from a certain direction).\n * - Next we check if any handles are interactable for each tool (`filterToolsWithMoveableHandles`). If interactable\n *   handles are found, the first tool/handle found consumes the event and the event does not propagate further.\n * - Next we check any tools are interactable (e.g. moving an entire length annotation rather than one of its handles:\n *   `filterMoveableAnnotationTools`). If interactable tools are found, the first tool found consumes the event and the\n *   event does not propagate further.\n * - If the `activeTool` has `postMouseDownCallback`, this is called.  If the callback returns `true`,\n *   the event does not propagate further.\n * - Finally, look for annotations actions that could handle the event such as showing a dropdown to allow the user\n *   change the magnifying glass zoom factor.\n *\n * If the event is not consumed the event will bubble to the `mouseDownActivate` handler.\n *\n * @param evt - The normalized mouseDown event.\n */\nexport default function mouseDown(evt: EventTypes.MouseDownEventType) {\n  // If a tool has locked the current state it is dealing with an interaction within its own eventLoop.\n  if (state.isInteractingWithTool) {\n    return;\n  }\n\n  const activeTool = getActiveToolForMouseEvent(evt);\n\n  // Check for preMouseDownCallbacks,\n  // If the tool claims it consumed the event, prevent further checks.\n  if (activeTool && typeof activeTool.preMouseDownCallback === 'function') {\n    const consumedEvent = activeTool.preMouseDownCallback(evt);\n\n    if (consumedEvent) {\n      return;\n    }\n  }\n\n  // Find all tools that might respond to this mouse down\n  const isPrimaryClick = evt.detail.event.buttons === 1;\n  const activeToolsWithEventBinding = getToolsWithModesForMouseEvent(\n    evt,\n    [Active],\n    evt.detail.event.buttons\n  );\n  const passiveToolsIfEventWasPrimaryMouseButton = isPrimaryClick\n    ? getToolsWithModesForMouseEvent(evt, [Passive])\n    : undefined;\n  const applicableTools = [\n    ...(activeToolsWithEventBinding || []),\n    ...(passiveToolsIfEventWasPrimaryMouseButton || []),\n  ];\n\n  const eventDetail = evt.detail;\n  const { element } = eventDetail;\n\n  // Filter tools with annotations for this element\n  const annotationToolsWithAnnotations = filterToolsWithAnnotationsForElement(\n    element,\n    applicableTools\n  );\n\n  const canvasCoords = eventDetail.currentPoints.canvas;\n\n  // For the canvas coordinates, find all tools that might respond to this mouse down\n  // on their handles. This filter will call getHandleNearImagePoint for each tool\n  // instance (each annotation)\n  const annotationToolsWithMoveableHandles = filterToolsWithMoveableHandles(\n    element,\n    annotationToolsWithAnnotations,\n    canvasCoords,\n    'mouse'\n  );\n\n  // Preserve existing selections when shift key is pressed\n  const isMultiSelect = !!evt.detail.event.shiftKey;\n\n  // If there are annotation tools whose handle is near the mouse, select the first one\n  // that isn't locked. If there's only one annotation tool, select it.\n  if (annotationToolsWithMoveableHandles.length > 0) {\n    const { tool, annotation, handle } = getAnnotationForSelection(\n      annotationToolsWithMoveableHandles\n    ) as ToolsWithMoveableHandles;\n\n    toggleAnnotationSelection(annotation.annotationUID, isMultiSelect);\n    tool.handleSelectedCallback(evt, annotation, handle, 'Mouse');\n\n    return;\n  }\n\n  // If there were no annotation tools whose handle was near the mouse, try to check\n  // if any of the annotation tools are interactable (e.g. moving an entire length annotation)\n  const moveableAnnotationTools = filterMoveableAnnotationTools(\n    element,\n    annotationToolsWithAnnotations,\n    canvasCoords,\n    'mouse'\n  );\n\n  // If there are annotation tools that are interactable, select the first one\n  // that isn't locked. If there's only one annotation tool, select it.\n  if (moveableAnnotationTools.length > 0) {\n    const { tool, annotation } = getAnnotationForSelection(\n      moveableAnnotationTools\n    );\n\n    toggleAnnotationSelection(annotation.annotationUID, isMultiSelect);\n    tool.toolSelectedCallback(evt, annotation, 'Mouse', canvasCoords);\n\n    return;\n  }\n\n  // Run the postMouseDownCallback for the active tool if it exists\n  if (activeTool && typeof activeTool.postMouseDownCallback === 'function') {\n    const consumedEvent = activeTool.postMouseDownCallback(evt);\n\n    if (consumedEvent) {\n      // If the tool claims it consumed the event, prevent further checks.\n      return;\n    }\n  }\n\n  const actionExecuted = mouseDownAnnotationAction(evt);\n\n  if (actionExecuted) {\n    return;\n  }\n\n  // Don't stop propagation so that mouseDownActivate can handle the event\n}\n\n/**\n * If there are multiple annotation tools, return the first one that isn't locked neither hidden.\n * If there's only one annotation tool, return it\n * @param annotationTools - An array of tools and annotation.\n * @returns The candidate for selection\n */\nfunction getAnnotationForSelection(\n  toolsWithMovableHandles: ToolAnnotationPair[]\n): ToolAnnotationPair {\n  return (\n    (toolsWithMovableHandles.length > 1 &&\n      toolsWithMovableHandles.find(\n        (item) =>\n          !isAnnotationLocked(item.annotation) &&\n          isAnnotationVisible(item.annotation.annotationUID)\n      )) ||\n    toolsWithMovableHandles[0]\n  );\n}\n\n/**\n * If the annotation is selected, deselect it. If it's not selected, select it\n * @param annotationUID - The AnnotationUID that we\n * want to toggle the selection of.\n * @param isMultiSelect - If true, the annotation. will be deselected if it is\n * already selected, or deselected if it is selected.\n */\nfunction toggleAnnotationSelection(\n  annotationUID: string,\n  isMultiSelect = false\n): void {\n  if (isMultiSelect) {\n    if (isAnnotationSelected(annotationUID)) {\n      setAnnotationSelected(annotationUID, false);\n    } else {\n      const preserveSelected = true;\n      setAnnotationSelected(annotationUID, true, preserveSelected);\n    }\n  } else {\n    const preserveSelected = false;\n    setAnnotationSelected(annotationUID, true, preserveSelected);\n  }\n}\n","import { state } from '../../store';\nimport getActiveToolForMouseEvent from '../shared/getActiveToolForMouseEvent';\nimport { setAnnotationSelected } from '../../stateManagement/annotation/annotationSelection';\nimport { EventTypes } from '../../types';\n\n/**\n * If the `mouseDown` handler does not consume an event,\n * activate the creation loop of the active tool, if one is found for the\n * mouse button pressed.\n *\n * @param evt - The normalized mouseDown event.\n */\nexport default function mouseDownActivate(\n  evt: EventTypes.MouseDownActivateEventType\n) {\n  // If a tool has locked the current state it is dealing with an interaction within its own eventLoop.\n  if (state.isInteractingWithTool) {\n    return;\n  }\n\n  const activeTool = getActiveToolForMouseEvent(evt);\n\n  if (!activeTool) {\n    return;\n  }\n\n  if (state.isMultiPartToolActive) {\n    return;\n  }\n\n  if (activeTool.addNewAnnotation) {\n    const annotation = activeTool.addNewAnnotation(evt, 'mouse');\n    setAnnotationSelected(annotation.annotationUID);\n  }\n}\n","import getActiveToolForMouseEvent from '../shared/getActiveToolForMouseEvent';\nimport { state } from '../../store';\nimport { MouseDragEventType } from '../../types/EventTypes';\n\n/**\n * mouseDrag - Event handler for mouse drag events. Fires the `mouseDragCallback`\n * function on active tools.\n *\n * @param evt - The normalized mouseDown event.\n */\nexport default function mouseDrag(evt: MouseDragEventType) {\n  if (state.isInteractingWithTool) {\n    return;\n  }\n\n  const activeTool = getActiveToolForMouseEvent(evt);\n\n  const noFoundToolOrDoesNotHaveMouseDragCallback =\n    !activeTool || typeof activeTool.mouseDragCallback !== 'function';\n  if (noFoundToolOrDoesNotHaveMouseDragCallback) {\n    return;\n  }\n\n  activeTool.mouseDragCallback(evt);\n}\n","// // State\nimport { state } from '../../store';\nimport { ToolModes } from '../../enums';\n\n// // Util\nimport filterToolsWithAnnotationsForElement from '../../store/filterToolsWithAnnotationsForElement';\nimport getToolsWithModesForMouseEvent from '../shared/getToolsWithModesForMouseEvent';\nimport triggerAnnotationRender from '../../utilities/triggerAnnotationRender';\nimport { MouseMoveEventType } from '../../types/EventTypes';\n\nconst { Active, Passive } = ToolModes;\n\n/**\n * mouseMove - On mouse move when not dragging, fire tools `mouseMoveCallback`s.\n * This is mostly used to update the [un]hover state\n * of a tool.\n *\n * @param evt - The normalized mouseDown event.\n */\nexport default function mouseMove(evt: MouseMoveEventType) {\n  // Tool interactions when mouse moved are handled inside each tool.\n  // This function is mostly used to update the [un]hover state\n  if (state.isInteractingWithTool || state.isMultiPartToolActive) {\n    return;\n  }\n\n  const activeAndPassiveTools = getToolsWithModesForMouseEvent(evt, [\n    Active,\n    Passive,\n  ]);\n\n  const eventDetail = evt.detail;\n  const { element } = eventDetail;\n\n  // Annotation tool specific\n  const toolsWithAnnotations = filterToolsWithAnnotationsForElement(\n    element,\n    activeAndPassiveTools\n  );\n\n  const toolsWithoutAnnotations = activeAndPassiveTools.filter((tool) => {\n    const doesNotHaveAnnotations = !toolsWithAnnotations.some(\n      (toolAndAnnotation) =>\n        toolAndAnnotation.tool.getToolName() === tool.getToolName()\n    );\n\n    return doesNotHaveAnnotations;\n  });\n\n  let annotationsNeedToBeRedrawn = false;\n\n  for (const { tool, annotations } of toolsWithAnnotations) {\n    if (typeof tool.mouseMoveCallback === 'function') {\n      annotationsNeedToBeRedrawn =\n        tool.mouseMoveCallback(evt, annotations) || annotationsNeedToBeRedrawn;\n    }\n  }\n\n  // Run mouse move handlers for non-annotation tools\n  toolsWithoutAnnotations.forEach((tool) => {\n    if (typeof tool.mouseMoveCallback === 'function') {\n      tool.mouseMoveCallback(evt);\n    }\n  });\n\n  // Annotation activation status changed, redraw the annotations\n  if (annotationsNeedToBeRedrawn === true) {\n    triggerAnnotationRender(element);\n  }\n}\n","import customCallbackHandler from '../shared/customCallbackHandler';\n\n/**\n * mouseClick - Event handler for mouse up events. Uses `customCallbackHandler` to fire\n * the `mouseUpCallback` function on active tools.\n */\nconst mouseUp = customCallbackHandler.bind(null, 'Mouse', 'mouseUpCallback');\n\nexport default mouseUp;\n","import customCallbackHandler from '../shared/customCallbackHandler';\n\n/**\n * Event handler for mouse wheel events. Uses `customCallbackHandler` to fire\n * the `mouseWheelCallback` function on active tools.\n */\nconst mouseWheel = customCallbackHandler.bind(\n  null,\n  'MouseWheel',\n  'mouseWheelCallback'\n);\n\nexport default mouseWheel;\n","import Events from '../enums/Events';\n\nimport {\n  mouseClick,\n  mouseDown,\n  mouseDownActivate,\n  mouseDoubleClick,\n  mouseDrag,\n  mouseMove,\n  mouseUp,\n  mouseWheel,\n} from './mouseEventHandlers';\n\n/**\n * Enable these listeners are emitted in order, and can be cancelled/prevented from bubbling\n * by any previous event.\n *\n * @param element - The element to add the event listeners to.\n */\nconst enable = function (element: HTMLDivElement): void {\n  element.addEventListener(Events.MOUSE_CLICK, mouseClick as EventListener);\n  element.addEventListener(Events.MOUSE_DOWN, mouseDown as EventListener);\n  element.addEventListener(\n    Events.MOUSE_DOWN_ACTIVATE,\n    mouseDownActivate as EventListener\n  );\n  element.addEventListener(\n    Events.MOUSE_DOUBLE_CLICK,\n    mouseDoubleClick as EventListener\n  );\n  element.addEventListener(Events.MOUSE_DRAG, mouseDrag as EventListener);\n  element.addEventListener(Events.MOUSE_MOVE, mouseMove as EventListener);\n  element.addEventListener(Events.MOUSE_UP, mouseUp as EventListener);\n  element.addEventListener(Events.MOUSE_WHEEL, mouseWheel as EventListener);\n};\n\n/**\n * Disable and Remove the MouseToolEventDispatcher handlers from the element.\n *\n * @param element - HTMLDivElement\n */\nconst disable = function (element: HTMLDivElement) {\n  element.removeEventListener(Events.MOUSE_CLICK, mouseClick as EventListener);\n  element.removeEventListener(Events.MOUSE_DOWN, mouseDown as EventListener);\n  element.removeEventListener(\n    Events.MOUSE_DOWN_ACTIVATE,\n    mouseDownActivate as EventListener\n  );\n  element.removeEventListener(\n    Events.MOUSE_DOUBLE_CLICK,\n    mouseDoubleClick as EventListener\n  );\n  element.removeEventListener(Events.MOUSE_DRAG, mouseDrag as EventListener);\n  element.removeEventListener(Events.MOUSE_MOVE, mouseMove as EventListener);\n  element.removeEventListener(Events.MOUSE_UP, mouseUp as EventListener);\n  element.removeEventListener(Events.MOUSE_WHEEL, mouseWheel as EventListener);\n};\n\nconst mouseToolEventDispatcher = {\n  enable,\n  disable,\n};\n\nexport default mouseToolEventDispatcher;\n","import { ToolGroupManager } from '../../store';\nimport { ToolModes, MouseBindings } from '../../enums';\nimport { keyEventListener } from '../../eventListeners';\nimport { EventTypes } from '../../types';\nimport { getMouseButton } from '../../eventListeners/mouse/mouseDownListener';\n\nconst { Active } = ToolModes;\n\n/**\n * Iterate tool group tools until we find a tool that has a \"ToolBinding\"\n * that matches our Keyboard pressed keys. It's possible there will be no match\n * (no active tool for that mouse button combination).\n *\n * @param evt - The normalized keyboard event.\n *\n * @returns tool\n */\nexport default function getActiveToolForKeyboardEvent(\n  evt: EventTypes.KeyDownEventType\n) {\n  const { renderingEngineId, viewportId } = evt.detail;\n\n  // Get the current mouse button clicked\n  const mouseButton = getMouseButton();\n\n  // If any keyboard modifier key is also pressed\n  const modifierKey = keyEventListener.getModifierKey();\n\n  const toolGroup = ToolGroupManager.getToolGroupForViewport(\n    viewportId,\n    renderingEngineId\n  );\n\n  if (!toolGroup) {\n    return null;\n  }\n\n  const toolGroupToolNames = Object.keys(toolGroup.toolOptions);\n  const defaultMousePrimary = toolGroup.getDefaultMousePrimary();\n\n  for (let j = 0; j < toolGroupToolNames.length; j++) {\n    const toolName = toolGroupToolNames[j];\n    const toolOptions = toolGroup.toolOptions[toolName];\n\n    // tool has binding that matches the mouse button, if mouseEvent is undefined\n    // it uses the primary button\n    const correctBinding =\n      toolOptions.bindings.length &&\n      toolOptions.bindings.some(\n        (binding) =>\n          binding.mouseButton === (mouseButton ?? defaultMousePrimary) &&\n          binding.modifierKey === modifierKey\n      );\n\n    if (toolOptions.mode === Active && correctBinding) {\n      return toolGroup.getToolInstance(toolName);\n    }\n  }\n}\n","import { ToolGroupManager } from '../../store';\nimport getActiveToolForKeyboardEvent from '../shared/getActiveToolForKeyboardEvent';\nimport { KeyDownEventType } from '../../types/EventTypes';\n\n/**\n * KeyDown event listener to handle viewport cursor icon changes\n *\n * @param evt - The KeyboardEvent\n */\nexport default function keyDown(evt: KeyDownEventType): void {\n  // get the active tool given the key and mouse button\n  const activeTool = getActiveToolForKeyboardEvent(evt);\n\n  if (!activeTool) {\n    return;\n  }\n\n  const { renderingEngineId, viewportId } = evt.detail;\n\n  const toolGroup = ToolGroupManager.getToolGroupForViewport(\n    viewportId,\n    renderingEngineId\n  );\n\n  const toolName = activeTool.getToolName();\n  if (Object.keys(toolGroup.toolOptions).includes(toolName)) {\n    toolGroup.setViewportsCursorByToolName(toolName);\n  }\n}\n","import { resetModifierKey } from '../../eventListeners/keyboard/keyDownListener';\nimport { ToolGroupManager } from '../../store';\nimport getActiveToolForKeyboardEvent from '../shared/getActiveToolForKeyboardEvent';\nimport { KeyDownEventType } from '../../types/EventTypes';\n\n/**\n * KeyDown event listener to handle viewport cursor icon changes\n *\n * @param evt - The KeyboardEvent\n */\nexport default function keyUp(evt: KeyDownEventType): void {\n  // get the active tool for the primary mouse button\n  const activeTool = getActiveToolForKeyboardEvent(evt);\n\n  if (!activeTool) {\n    return;\n  }\n\n  const { renderingEngineId, viewportId } = evt.detail;\n\n  const toolGroup = ToolGroupManager.getToolGroupForViewport(\n    viewportId,\n    renderingEngineId\n  );\n\n  // Reset the modifier key\n  resetModifierKey();\n\n  const toolName = activeTool.getToolName();\n  if (Object.keys(toolGroup.toolOptions).includes(toolName)) {\n    toolGroup.setViewportsCursorByToolName(toolName);\n  }\n}\n","import Events from '../enums/Events';\nimport { keyDown, keyUp } from './keyboardEventHandlers';\n\n/**\n * Enable Key down and key up listeners\n *\n * @param element - The HTML element to attach the event listeners to.\n */\nconst enable = function (element: HTMLDivElement) {\n  element.addEventListener(Events.KEY_DOWN, keyDown as EventListener);\n  element.addEventListener(Events.KEY_UP, keyUp as EventListener);\n};\n\n/**\n * Disable Key down and key up listeners\n * @param element - The HTML element to attach the event listeners to.\n */\nconst disable = function (element: HTMLDivElement) {\n  element.removeEventListener(Events.KEY_DOWN, keyDown as EventListener);\n  element.removeEventListener(Events.KEY_UP, keyUp as EventListener);\n};\n\nconst keyboardToolEventDispatcher = {\n  enable,\n  disable,\n};\n\nexport default keyboardToolEventDispatcher;\n","import { Enums, Types } from '@cornerstonejs/core';\nimport { ToolModes } from '../enums';\nimport getToolsWithModesForMouseEvent from './shared/getToolsWithModesForMouseEvent';\n\nconst { Active, Passive, Enabled } = ToolModes;\n\n/**\n * When the camera is modified, check what tools need to react to this.\n *\n * - First we get all tools which are active, passive or enabled on the element.\n * - If any of these tools have a `onCameraModified` method, we call it.\n *\n * @param evt - The normalized camera modified event.\n */\nconst onCameraModified = function (evt: Types.EventTypes.CameraModifiedEvent) {\n  // @ts-ignore\n  const enabledTools = getToolsWithModesForMouseEvent(evt, [\n    Active,\n    Passive,\n    Enabled,\n  ]);\n\n  enabledTools.forEach((tool) => {\n    if (tool.onCameraModified) {\n      tool.onCameraModified(evt);\n    }\n  });\n};\n\nconst enable = function (element) {\n  element.addEventListener(Enums.Events.CAMERA_MODIFIED, onCameraModified);\n};\n\nconst disable = function (element) {\n  element.removeEventListener(Enums.Events.CAMERA_MODIFIED, onCameraModified);\n};\n\nexport default {\n  enable,\n  disable,\n};\n","import { Enums, Types } from '@cornerstonejs/core';\nimport { ToolModes } from '../enums';\nimport getToolsWithModesForMouseEvent from './shared/getToolsWithModesForMouseEvent';\n\nconst { Active, Passive, Enabled } = ToolModes;\n\n/**\n * When image spacing is calibrated modify the annotations for all of its tools\n * to consider the new calibration info.\n *\n * - First we get all tools which are active, passive or enabled on the element.\n * - If any of these tools have a `onImageSpacingCalibrated` method, we call it.\n *\n * @param evt - The normalized image calibration event.\n */\nconst onImageSpacingCalibrated = function (\n  evt: Types.EventTypes.ImageSpacingCalibratedEvent\n) {\n  // @ts-ignore\n  const enabledTools = getToolsWithModesForMouseEvent(evt, [\n    Active,\n    Passive,\n    Enabled,\n  ]);\n\n  enabledTools.forEach((tool) => {\n    if (tool.onImageSpacingCalibrated) {\n      tool.onImageSpacingCalibrated(evt);\n    }\n  });\n};\n\nconst enable = function (element: HTMLDivElement) {\n  element.addEventListener(\n    Enums.Events.IMAGE_SPACING_CALIBRATED,\n    onImageSpacingCalibrated as EventListener\n  );\n};\n\nconst disable = function (element: HTMLDivElement) {\n  element.removeEventListener(\n    Enums.Events.IMAGE_SPACING_CALIBRATED,\n    onImageSpacingCalibrated as EventListener\n  );\n};\n\nexport default {\n  enable,\n  disable,\n};\n","import { ToolGroupManager } from '../../store';\nimport { MouseBindings, ToolModes } from '../../enums';\nimport { EventTypes } from '../../types';\nimport getMouseModifier from './getMouseModifier';\nimport { keyEventListener } from '../../eventListeners';\n\nconst { Active } = ToolModes;\n\n/**\n * Iterate tool group tools until we find a tool that has a \"ToolBinding\"\n * that matches our TouchEvent's `buttons`. It's possible there will be no match\n * (no active tool for that touch button combination).\n *\n * @param evt - The event dispatcher touch event.\n *\n * @returns tool\n */\nexport default function getActiveToolForTouchEvent(\n  evt: EventTypes.NormalizedTouchEventType\n) {\n  // Todo: we should refactor this to use getToolsWithModesForTouchEvent instead\n  const { renderingEngineId, viewportId } = evt.detail;\n  const touchEvent = evt.detail.event;\n\n  const toolGroup = ToolGroupManager.getToolGroupForViewport(\n    viewportId,\n    renderingEngineId\n  );\n\n  if (!toolGroup) {\n    return null;\n  }\n\n  const toolGroupToolNames = Object.keys(toolGroup.toolOptions);\n\n  const numTouchPoints = Object.keys(touchEvent.touches).length;\n\n  // If any keyboard modifier key is also pressed\n  const modifierKey =\n    getMouseModifier(touchEvent) || keyEventListener.getModifierKey();\n  const defaultMousePrimary = toolGroup.getDefaultMousePrimary();\n\n  for (let j = 0; j < toolGroupToolNames.length; j++) {\n    const toolName = toolGroupToolNames[j];\n    const toolOptions = toolGroup.toolOptions[toolName];\n\n    const correctBinding =\n      toolOptions.bindings.length &&\n      /**\n       * TODO: setActiveTool treats MouseBindings.Primary in a special way\n       * which is analgous to numTouchPoints === 1 as the primary interaction\n       * for touch based applications. The ToolGroup set active and get active\n       * logic should be updated to account for numTouchPoints === 1\n       */\n      toolOptions.bindings.some(\n        (binding) =>\n          (binding.numTouchPoints === numTouchPoints ||\n            (numTouchPoints === 1 &&\n              binding.mouseButton === defaultMousePrimary)) &&\n          binding.modifierKey === modifierKey\n      );\n\n    if (toolOptions.mode === Active && correctBinding) {\n      return toolGroup.getToolInstance(toolName);\n    }\n  }\n}\n","import { ToolGroupManager } from '../../store';\nimport { ToolModes } from '../../enums';\nimport { EventTypes } from '../../types';\n\ntype ModesFilter = Array<ToolModes>;\n\n/**\n * Given the normalized touch event and a filter of modes,\n * find all the tools on the element that are in one of the specified modes.\n * If the evtButton is specified, only tools with a matching binding will be returned.\n * @param evt - The normalized touchStart event.\n * @param modesFilter - An array of entries from the `ToolModes` enum.\n */\nexport default function getToolsWithModesForTouchEvent(\n  evt: EventTypes.NormalizedTouchEventType,\n  modesFilter: ModesFilter,\n  numTouchPoints?: number\n) {\n  const { renderingEngineId, viewportId } = evt.detail;\n  const toolGroup = ToolGroupManager.getToolGroupForViewport(\n    viewportId,\n    renderingEngineId\n  );\n\n  if (!toolGroup) {\n    return [];\n  }\n\n  const enabledTools = [];\n\n  const toolGroupToolNames = Object.keys(toolGroup.toolOptions);\n\n  for (let j = 0; j < toolGroupToolNames.length; j++) {\n    const toolName = toolGroupToolNames[j];\n    const tool = toolGroup.toolOptions[toolName];\n\n    const correctBinding =\n      numTouchPoints != null &&\n      tool.bindings.length &&\n      tool.bindings.some(\n        (binding) => binding.numTouchPoints === numTouchPoints\n      );\n\n    if (\n      modesFilter.includes(tool.mode) &&\n      (!numTouchPoints || correctBinding)\n    ) {\n      const toolInstance = toolGroup.getToolInstance(toolName);\n      enabledTools.push(toolInstance);\n    }\n  }\n\n  return enabledTools;\n}\n","import { state } from '../../store';\nimport { ToolModes } from '../../enums';\nimport { EventTypes } from '../../types';\nimport {\n  ToolAnnotationPair,\n  ToolsWithMoveableHandles,\n} from '../../types/InternalToolTypes';\n\nimport {\n  setAnnotationSelected,\n  isAnnotationSelected,\n} from '../../stateManagement/annotation/annotationSelection';\n\nimport { isAnnotationLocked } from '../../stateManagement/annotation/annotationLocking';\nimport { isAnnotationVisible } from '../../stateManagement/annotation/annotationVisibility';\n\n// Util\nimport filterToolsWithMoveableHandles from '../../store/filterToolsWithMoveableHandles';\nimport filterToolsWithAnnotationsForElement from '../../store/filterToolsWithAnnotationsForElement';\nimport filterMoveableAnnotationTools from '../../store/filterMoveableAnnotationTools';\nimport getActiveToolForTouchEvent from '../shared/getActiveToolForTouchEvent';\nimport getToolsWithModesForTouchEvent from '../shared/getToolsWithModesForTouchEvent';\n\nconst { Active, Passive } = ToolModes;\n\n/**\n * touchStart - Event handler for touchStart events. Uses `customCallbackHandler` to fire\n * the `touchStartCallback` function on active tools.\n */\nexport default function touchStart(evt: EventTypes.TouchStartEventType) {\n  if (state.isInteractingWithTool) {\n    return;\n  }\n  const activeTool = getActiveToolForTouchEvent(evt);\n\n  // Check for preTouchStartCallbacks,\n  // If the tool claims it consumed the event, prevent further checks.\n  if (activeTool && typeof activeTool.preTouchStartCallback === 'function') {\n    const consumedEvent = activeTool.preTouchStartCallback(evt);\n\n    if (consumedEvent) {\n      return;\n    }\n  }\n\n  const isPrimaryClick = Object.keys(evt.detail.event.touches).length === 1;\n  const activeToolsWithEventBinding = getToolsWithModesForTouchEvent(\n    evt,\n    [Active],\n    Object.keys(evt.detail.event.touches).length\n  );\n  const passiveToolsIfEventWasPrimaryTouchButton = isPrimaryClick\n    ? getToolsWithModesForTouchEvent(evt, [Passive])\n    : undefined;\n  const applicableTools = [\n    ...(activeToolsWithEventBinding || []),\n    ...(passiveToolsIfEventWasPrimaryTouchButton || []),\n    activeTool,\n  ];\n\n  const eventDetail = evt.detail;\n  const { element } = eventDetail;\n\n  // Filter tools with annotations for this element\n  const annotationToolsWithAnnotations = filterToolsWithAnnotationsForElement(\n    element,\n    applicableTools\n  );\n\n  const canvasCoords = eventDetail.currentPoints.canvas;\n\n  // For the canvas coordinates, find all tools that might respond to this touch start\n  // on their handles. This filter will call getHandleNearImagePoint for each tool\n  // instance (each annotation)\n  const annotationToolsWithMoveableHandles = filterToolsWithMoveableHandles(\n    element,\n    annotationToolsWithAnnotations,\n    canvasCoords,\n    'touch'\n  );\n\n  const isMultiSelect = false;\n\n  // If there are annotation tools whose handle is near the touch, select the first one\n  // that isn't locked. If there's only one annotation tool, select it.\n  if (annotationToolsWithMoveableHandles.length > 0) {\n    const { tool, annotation, handle } = getAnnotationForSelection(\n      annotationToolsWithMoveableHandles\n    ) as ToolsWithMoveableHandles;\n\n    toggleAnnotationSelection(annotation.annotationUID, isMultiSelect);\n    tool.handleSelectedCallback(evt, annotation, handle, 'Touch');\n\n    return;\n  }\n\n  // If there were no annotation tools whose handle was near the touch, try to check\n  // if any of the annotation tools are interactable (e.g. moving an entire length annotation)\n  const moveableAnnotationTools = filterMoveableAnnotationTools(\n    element,\n    annotationToolsWithAnnotations,\n    canvasCoords,\n    'touch'\n  );\n\n  // If there are annotation tools that are interactable, select the first one\n  // that isn't locked. If there's only one annotation tool, select it.\n  if (moveableAnnotationTools.length > 0) {\n    const { tool, annotation } = getAnnotationForSelection(\n      moveableAnnotationTools\n    );\n\n    toggleAnnotationSelection(annotation.annotationUID, isMultiSelect);\n    tool.toolSelectedCallback(evt, annotation, 'Touch');\n\n    return;\n  }\n\n  // Run the postTouchStartCallback for the active tool if it exists\n  if (activeTool && typeof activeTool.postTouchStartCallback === 'function') {\n    const consumedEvent = activeTool.postTouchStartCallback(evt);\n\n    if (consumedEvent) {\n      // If the tool claims it consumed the event, prevent further checks.\n      return;\n    }\n  }\n\n  // Don't stop propagation so that touchStartActivate can handle the event\n}\n\n/**\n * If there are multiple annotation tools, return the first one that isn't locked neither hidden.\n * If there's only one annotation tool, return it\n * @param annotationTools - An array of tools and annotation.\n * @returns The candidate for selection\n */\nfunction getAnnotationForSelection(\n  toolsWithMovableHandles: ToolAnnotationPair[]\n): ToolAnnotationPair {\n  return (\n    (toolsWithMovableHandles.length > 1 &&\n      toolsWithMovableHandles.find(\n        (item) =>\n          !isAnnotationLocked(item.annotation) &&\n          isAnnotationVisible(item.annotation.annotationUID)\n      )) ||\n    toolsWithMovableHandles[0]\n  );\n}\n\n/**\n * If the annotation is selected, deselect it. If it's not selected, select it\n * @param annotationUID - The AnnotationUID that we\n * want to toggle the selection of.\n * @param isMultiSelect - If true, the annotation. will be deselected if it is\n * already selected, or deselected if it is selected.\n */\nfunction toggleAnnotationSelection(\n  annotationUID: string,\n  isMultiSelect = false\n): void {\n  if (isMultiSelect) {\n    if (isAnnotationSelected(annotationUID)) {\n      setAnnotationSelected(annotationUID, false);\n    } else {\n      const preserveSelected = true;\n      setAnnotationSelected(annotationUID, true, preserveSelected);\n    }\n  } else {\n    const preserveSelected = false;\n    setAnnotationSelected(annotationUID, true, preserveSelected);\n  }\n}\n","import { state } from '../../store';\nimport { EventTypes } from '../../types';\nimport { setAnnotationSelected } from '../../stateManagement/annotation/annotationSelection';\n\nimport getActiveToolForTouchEvent from '../shared/getActiveToolForTouchEvent';\n\n/**\n * If the `touchStart` handler does not consume an event,\n * activate the creation loop of the active tool, if one is found for the\n * touch button pressed.\n *\n * @param evt - The normalized touchStart event.\n */\nexport default function touchStartActivate(\n  evt: EventTypes.TouchStartActivateEventType\n) {\n  // If a tool has locked the current state it is dealing with an interaction within its own eventLoop.\n  if (state.isInteractingWithTool) {\n    return;\n  }\n\n  const activeTool = getActiveToolForTouchEvent(evt);\n\n  if (!activeTool) {\n    return;\n  }\n\n  if (state.isMultiPartToolActive) {\n    return;\n  }\n\n  if (activeTool.addNewAnnotation) {\n    const annotation = activeTool.addNewAnnotation(evt, 'touch');\n    setAnnotationSelected(annotation.annotationUID);\n  }\n}\n","import getActiveToolForTouchEvent from '../shared/getActiveToolForTouchEvent';\nimport { state } from '../../store';\nimport { TouchDragEventType } from '../../types/EventTypes';\n\n/**\n * touchDrag - Event handler for touchDrag events. Uses `customCallbackHandler` to fire\n * the `touchDragCallback` function on active tools.\n */\nexport default function touchDrag(evt: TouchDragEventType) {\n  if (state.isInteractingWithTool) {\n    return;\n  }\n\n  const activeTool = getActiveToolForTouchEvent(evt);\n\n  const noFoundToolOrDoesNotHaveTouchDragCallback =\n    !activeTool || typeof activeTool.touchDragCallback !== 'function';\n  if (noFoundToolOrDoesNotHaveTouchDragCallback) {\n    return;\n  }\n\n  activeTool.touchDragCallback(evt);\n}\n","import customCallbackHandler from '../shared/customCallbackHandler';\n\n/**\n * touchEnd - Event handler for touchEnd events. Uses `customCallbackHandler` to fire\n * the `touchEndCallback` function on active tools.\n */\nconst touchEnd = customCallbackHandler.bind(null, 'Touch', 'touchEndCallback');\n\nexport default touchEnd;\n","import customCallbackHandler from '../shared/customCallbackHandler';\n\n/**\n * touchTap - Event handler for touch tap events. Uses `customCallbackHandler` to fire\n * the `touchTapCallback` function on active tools.\n */\nconst touchTap = customCallbackHandler.bind(null, 'Touch', 'touchTapCallback');\n\nexport default touchTap;\n","import customCallbackHandler from '../shared/customCallbackHandler';\n\n/**\n * touchPress - Event handler for touch press events. Uses `customCallbackHandler` to fire\n * the `touchPressCallback` function on active tools.\n */\nconst touchPress = customCallbackHandler.bind(\n  null,\n  'Touch',\n  'touchPressCallback'\n);\n\nexport default touchPress;\n","import Events from '../enums/Events';\n\nimport {\n  touchStart,\n  touchStartActivate,\n  touchDrag,\n  touchEnd,\n  touchTap,\n  touchPress,\n} from './touchEventHandlers';\n\n/**\n * Enable these listeners are emitted in order, and can be cancelled/prevented from bubbling\n * by any previous event.\n *\n * @param element - The element to add the event listeners to.\n */\nconst enable = function (element: HTMLDivElement): void {\n  element.addEventListener(Events.TOUCH_START, touchStart as EventListener);\n  element.addEventListener(\n    Events.TOUCH_START_ACTIVATE,\n    touchStartActivate as EventListener\n  );\n  element.addEventListener(Events.TOUCH_DRAG, touchDrag as EventListener);\n  element.addEventListener(Events.TOUCH_END, touchEnd as EventListener);\n  element.addEventListener(Events.TOUCH_TAP, touchTap as EventListener);\n  element.addEventListener(Events.TOUCH_PRESS, touchPress as EventListener);\n};\n\n/**\n * Disable and Remove the MouseToolEventDispatcher handlers from the element.\n *\n * @param element - HTMLDivElement\n */\nconst disable = function (element: HTMLDivElement) {\n  element.removeEventListener(Events.TOUCH_START, touchStart as EventListener);\n  element.removeEventListener(\n    Events.TOUCH_START_ACTIVATE,\n    touchStartActivate as EventListener\n  );\n  element.removeEventListener(Events.TOUCH_DRAG, touchDrag as EventListener);\n  element.removeEventListener(Events.TOUCH_END, touchEnd as EventListener);\n  element.removeEventListener(Events.TOUCH_PRESS, touchPress as EventListener);\n};\n\nconst touchToolEventDispatcher = {\n  enable,\n  disable,\n};\n\nexport default touchToolEventDispatcher;\n","import { Types } from '@cornerstonejs/core';\nimport {\n  mouseEventListeners,\n  wheelEventListener,\n  touchEventListeners,\n  keyEventListener,\n} from '../eventListeners';\nimport {\n  imageRenderedEventDispatcher,\n  cameraModifiedEventDispatcher,\n  mouseToolEventDispatcher,\n  touchToolEventDispatcher,\n  keyboardToolEventDispatcher,\n  imageSpacingCalibratedEventDispatcher,\n} from '../eventDispatchers';\nimport { state } from './state';\n\nimport { annotationRenderingEngine } from '../utilities/triggerAnnotationRender';\n\n/**\n * When an element is \"enabled\", add event listeners and dispatchers to it\n * so we can use interactions to affect tool behaviors\n *\n * @param evt - The ELEMENT_ENABLED event\n */\nexport default function addEnabledElement(\n  evt: Types.EventTypes.ElementEnabledEvent\n): void {\n  const { element, viewportId } = evt.detail;\n  const svgLayer = _createSvgAnnotationLayer(viewportId);\n\n  // Reset/Create svgNodeCache for element\n  _setSvgNodeCache(element);\n  _appendChild(svgLayer, element);\n\n  // Add this element to the annotation rendering engine\n  annotationRenderingEngine.addViewportElement(viewportId, element);\n\n  // Listeners\n  mouseEventListeners.enable(element);\n  wheelEventListener.enable(element);\n  touchEventListeners.enable(element);\n  keyEventListener.enable(element);\n\n  // Dispatchers: renderer\n  imageRenderedEventDispatcher.enable(element);\n  cameraModifiedEventDispatcher.enable(element);\n  imageSpacingCalibratedEventDispatcher.enable(element);\n  // Dispatchers: interaction\n  mouseToolEventDispatcher.enable(element);\n  keyboardToolEventDispatcher.enable(element);\n  touchToolEventDispatcher.enable(element);\n\n  // labelmap\n  // State\n  state.enabledElements.push(element);\n}\n\n/**\n *\n */\nfunction _createSvgAnnotationLayer(viewportId: string): SVGElement {\n  const svgns = 'http://www.w3.org/2000/svg';\n  const svgLayer = document.createElementNS(svgns, 'svg');\n\n  const svgLayerId = `svg-layer-${viewportId}`;\n  svgLayer.classList.add('svg-layer');\n  svgLayer.setAttribute('id', svgLayerId);\n  svgLayer.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n  svgLayer.style.width = '100%';\n  svgLayer.style.height = '100%';\n  svgLayer.style.pointerEvents = 'none';\n  svgLayer.style.position = 'absolute';\n  // TODO: we should test this on high-res monitors\n  //svgLayer.style.textRendering = 'optimizeSpeed'\n\n  // Single dropshadow config for now\n  const defs = document.createElementNS(svgns, 'defs');\n  const filter = document.createElementNS(svgns, 'filter');\n  const feOffset = document.createElementNS(svgns, 'feOffset');\n  const feColorMatrix = document.createElementNS(svgns, 'feColorMatrix');\n  const feBlend = document.createElementNS(svgns, 'feBlend');\n\n  //\n  filter.setAttribute('id', `shadow-${svgLayerId}`);\n  filter.setAttribute('filterUnits', 'userSpaceOnUse');\n\n  //\n  feOffset.setAttribute('result', 'offOut');\n  feOffset.setAttribute('in', 'SourceGraphic');\n  feOffset.setAttribute('dx', '0.5');\n  feOffset.setAttribute('dy', '0.5');\n\n  //\n  feColorMatrix.setAttribute('result', 'matrixOut');\n  feColorMatrix.setAttribute('in', 'offOut');\n  feColorMatrix.setAttribute('in2', 'matrix');\n  feColorMatrix.setAttribute(\n    'values',\n    '0.2 0 0 0 0 0 0.2 0 0 0 0 0 0.2 0 0 0 0 0 1 0'\n  );\n\n  //\n  feBlend.setAttribute('in', 'SourceGraphic');\n  feBlend.setAttribute('in2', 'matrixOut');\n  feBlend.setAttribute('mode', 'normal');\n\n  filter.appendChild(feOffset);\n  filter.appendChild(feColorMatrix);\n  filter.appendChild(feBlend);\n  defs.appendChild(filter);\n  svgLayer.appendChild(defs);\n\n  return svgLayer;\n}\n\nfunction _setSvgNodeCache(element) {\n  const { viewportUid: viewportId, renderingEngineUid: renderingEngineId } =\n    element.dataset;\n  const elementHash = `${viewportId}:${renderingEngineId}`;\n\n  // Create or reset\n  // TODO: If... Reset, we should blow out any nodes in DOM\n  state.svgNodeCache[elementHash] = {};\n}\n\n/**\n *\n * @param newNode\n * @param referenceNode\n */\nfunction _appendChild(\n  newNode: SVGElement,\n  referenceNode: HTMLDivElement\n): void {\n  referenceNode.querySelector('div.viewport-element').appendChild(newNode);\n}\n","import { state } from '../index';\nimport Synchronizer from './Synchronizer';\n\n/**\n * It returns all synchronizers that are not disabled and have a source viewport\n * with the given rendering engine Id and viewport Id\n * @param renderingEngineId - The Id of the rendering engine\n * @param viewportId - The Id of the viewport\n * @returns An array of synchronizers\n */\nfunction getSynchronizersForViewport(\n  viewportId: string,\n  renderingEngineId: string\n): Array<Synchronizer> {\n  const synchronizersFilteredByIds = [];\n\n  if (!renderingEngineId && !viewportId) {\n    throw new Error(\n      'At least one of renderingEngineId or viewportId should be given'\n    );\n  }\n\n  for (let i = 0; i < state.synchronizers.length; i++) {\n    const synchronizer = state.synchronizers[i];\n    const notDisabled = !synchronizer.isDisabled();\n    const hasSourceViewport = synchronizer.hasSourceViewport(\n      renderingEngineId,\n      viewportId\n    );\n\n    const hasTargetViewport = synchronizer.hasTargetViewport(\n      renderingEngineId,\n      viewportId\n    );\n\n    if (notDisabled && (hasSourceViewport || hasTargetViewport)) {\n      synchronizersFilteredByIds.push(synchronizer);\n    }\n  }\n\n  return synchronizersFilteredByIds;\n}\n\nexport default getSynchronizersForViewport;\n","import { state } from '../index';\nimport { IToolGroup } from '../../types';\n\n/**\n * Given a rendering engine Id and a viewport Id, return the tool group that\n * contains that rendering engine and viewport. Note: A viewport can only be\n * associated with a single tool group. You cannot have a viewport that belongs\n * to multiple tool groups. To achieve so, create a new viewport and a new toolGroup\n * for it. This will not impact memory usage much as the volume textures are\n * shared across all viewports rendering the same image.\n *\n * @param viewportId - The Id of the viewport that the tool is being\n * added to.\n * @param renderingEngineId - The Id of the rendering engine that the\n * tool group is associated with.\n * @returns A tool group.\n */\nfunction getToolGroupForViewport(\n  viewportId: string,\n  renderingEngineId: string\n): IToolGroup | undefined {\n  const toolGroupFilteredByIds = state.toolGroups.filter((tg) =>\n    tg.viewportsInfo.some(\n      (vp) =>\n        vp.renderingEngineId === renderingEngineId &&\n        (!vp.viewportId || vp.viewportId === viewportId)\n    )\n  );\n\n  if (!toolGroupFilteredByIds.length) {\n    return;\n  }\n\n  if (toolGroupFilteredByIds.length > 1) {\n    throw new Error(\n      `Multiple tool groups found for renderingEngineId: ${renderingEngineId} and viewportId: ${viewportId}. You should only\n      have one tool group per viewport in a renderingEngine.`\n    );\n  }\n\n  return toolGroupFilteredByIds[0];\n}\n\nexport default getToolGroupForViewport;\n","import { getEnabledElement, Types } from '@cornerstonejs/core';\nimport {\n  mouseEventListeners,\n  wheelEventListener,\n  touchEventListeners,\n  keyEventListener,\n} from '../eventListeners';\nimport {\n  imageRenderedEventDispatcher,\n  cameraModifiedEventDispatcher,\n  mouseToolEventDispatcher,\n  keyboardToolEventDispatcher,\n  imageSpacingCalibratedEventDispatcher,\n  touchToolEventDispatcher,\n} from '../eventDispatchers';\n// ~~\n\nimport filterToolsWithAnnotationsForElement from './filterToolsWithAnnotationsForElement';\nimport { state } from './state';\nimport getToolsWithModesForElement from '../utilities/getToolsWithModesForElement';\nimport { ToolModes } from '../enums';\nimport { removeAnnotation } from '../stateManagement';\nimport getSynchronizersForViewport from './SynchronizerManager/getSynchronizersForViewport';\nimport getToolGroupForViewport from './ToolGroupManager/getToolGroupForViewport';\nimport { annotationRenderingEngine } from '../utilities/triggerAnnotationRender';\n\nconst VIEWPORT_ELEMENT = 'viewport-element';\n\nfunction removeEnabledElement(\n  elementDisabledEvt: Types.EventTypes.ElementDisabledEvent\n): void {\n  // Is DOM element\n  const { element, viewportId } = elementDisabledEvt.detail;\n\n  _resetSvgNodeCache(element);\n  _removeSvgNode(element);\n\n  // Remove this element from the annotation rendering engine\n  annotationRenderingEngine.removeViewportElement(viewportId, element);\n\n  // Listeners\n  mouseEventListeners.disable(element);\n  wheelEventListener.disable(element);\n  touchEventListeners.disable(element);\n  keyEventListener.disable(element);\n  // labelmap\n\n  // Dispatchers: renderer\n  imageRenderedEventDispatcher.disable(element);\n  cameraModifiedEventDispatcher.disable(element);\n  imageSpacingCalibratedEventDispatcher.disable(element);\n  // Dispatchers: interaction\n  mouseToolEventDispatcher.disable(element);\n  keyboardToolEventDispatcher.disable(element);\n  touchToolEventDispatcher.disable(element);\n\n  // State\n  // @TODO: We used to \"disable\" the tool before removal. Should we preserve the hook that would call on tools?\n  _removeViewportFromSynchronizers(element);\n  _removeViewportFromToolGroup(element);\n\n  // _removeAllToolsForElement(canvas)\n  _removeEnabledElement(element);\n}\n\nconst _removeViewportFromSynchronizers = (element: HTMLDivElement) => {\n  const enabledElement = getEnabledElement(element);\n\n  const synchronizers = getSynchronizersForViewport(\n    enabledElement.viewportId,\n    enabledElement.renderingEngineId\n  );\n  synchronizers.forEach((sync) => {\n    sync.remove(enabledElement);\n  });\n};\n\nconst _removeViewportFromToolGroup = (element: HTMLDivElement) => {\n  const { renderingEngineId, viewportId } = getEnabledElement(element);\n\n  const toolGroup = getToolGroupForViewport(viewportId, renderingEngineId);\n\n  if (toolGroup) {\n    toolGroup.removeViewports(renderingEngineId, viewportId);\n  }\n};\n\nconst _removeAllToolsForElement = function (element) {\n  const tools = getToolsWithModesForElement(element, [\n    ToolModes.Active,\n    ToolModes.Passive,\n  ]);\n\n  const toolsWithData = filterToolsWithAnnotationsForElement(element, tools);\n  toolsWithData.forEach(({ annotations }) => {\n    annotations.forEach((annotation) => {\n      removeAnnotation(annotation.annotationUID);\n    });\n  });\n};\n\nfunction _resetSvgNodeCache(element: HTMLDivElement) {\n  const { viewportUid: viewportId, renderingEngineUid: renderingEngineId } =\n    element.dataset;\n  const elementHash = `${viewportId}:${renderingEngineId}`;\n\n  delete state.svgNodeCache[elementHash];\n}\n\nfunction _removeSvgNode(element: HTMLDivElement) {\n  const internalViewportNode = element.querySelector(`div.${VIEWPORT_ELEMENT}`);\n  const svgLayer = internalViewportNode.querySelector('svg');\n  if (svgLayer) {\n    internalViewportNode.removeChild(svgLayer);\n  }\n}\n\n/**\n * @private\n * @param enabledElement\n */\nconst _removeEnabledElement = function (element: HTMLDivElement) {\n  const foundElementIndex = state.enabledElements.findIndex(\n    (el) => el === element\n  );\n\n  if (foundElementIndex > -1) {\n    state.enabledElements.splice(foundElementIndex, 1);\n  }\n};\n\nexport default removeEnabledElement;\n","import { ToolModes } from '../enums';\nimport getToolsWithModesForElement from '../utilities/getToolsWithModesForElement';\nimport filterToolsWithAnnotationsForElement from './filterToolsWithAnnotationsForElement';\n\n/**\n * Cancel the current active manipulation that is being performed on the provided\n * element. It filters all the active and passive tools for the enabledElement\n * and calls cancel() method for all of them, and returns the tool that has executed its\n * cancellation (returned its annotationUID), since tools that are not being manipulated will\n * short circuit early. Note: not all tools currently implement a cancel method.\n *\n * @param element - canvas element\n * @returns annotationUID that is cancelled\n */\nexport default function cancelActiveManipulations(\n  element: HTMLDivElement\n): string | undefined {\n  const tools = getToolsWithModesForElement(element, [\n    ToolModes.Active,\n    ToolModes.Passive,\n  ]);\n\n  const toolsWithData = filterToolsWithAnnotationsForElement(element, tools);\n  for (const { tool } of toolsWithData) {\n    const annotationUID = tool.cancel(element);\n    if (annotationUID) {\n      return annotationUID;\n    }\n  }\n}\n","import {\n  getRenderingEngine,\n  getEnabledElement,\n  Enums,\n  Types,\n} from '@cornerstonejs/core';\n\nimport { ISynchronizerEventHandler } from '../../types';\n\n/**\n * Synchronizer is a class that listens to a specific event on a specific source\n * targets and fires a specific event on a specific target elements. Use cases\n * include: synchronizing a camera between two viewports, synchronizing a\n * windowLevel between various viewports.\n */\nclass Synchronizer {\n  //\n  private _enabled: boolean;\n  private _eventName: string;\n  private _eventHandler: ISynchronizerEventHandler;\n  private _ignoreFiredEvents: boolean;\n  private _sourceViewports: Array<Types.IViewportId>;\n  private _targetViewports: Array<Types.IViewportId>;\n  private _viewportOptions: Record<string, Record<string, unknown>> = {};\n  private _options: any;\n  public id: string;\n\n  constructor(\n    synchronizerId: string,\n    eventName: string,\n    eventHandler: ISynchronizerEventHandler,\n    options?: any\n  ) {\n    this._enabled = true;\n    this._eventName = eventName;\n    this._eventHandler = eventHandler;\n    this._ignoreFiredEvents = false;\n    this._sourceViewports = [];\n    this._targetViewports = [];\n    this._options = options || {};\n\n    //\n    this.id = synchronizerId;\n  }\n\n  /**\n   * \"Returns true if the synchronizer is disabled.\"\n   * @returns A boolean value.\n   */\n  public isDisabled(): boolean {\n    return !this._enabled || !this._hasSourceElements();\n  }\n\n  /**\n   * Sets the options for the viewport id.  This can be used to\n   * provide configuration on a viewport basis for things like offsets\n   * to the general synchronization, or turn on/off synchronization of certain\n   * attributes.\n   */\n  public setOptions(\n    viewportId: string,\n    options: Record<string, unknown> = {}\n  ): void {\n    this._viewportOptions[viewportId] = options;\n  }\n\n  /** Gets the options for the given viewport id */\n  public getOptions(viewportId: string): Record<string, unknown> | undefined {\n    return this._viewportOptions[viewportId];\n  }\n\n  /**\n   * Add a viewport to the list of targets and sources both.\n   * @param viewportInfo - The viewportId and its renderingEngineId to add to the list of targets and sources.\n   */\n  public add(viewportInfo: Types.IViewportId): void {\n    this.addTarget(viewportInfo);\n    this.addSource(viewportInfo);\n  }\n\n  /**\n   * Add a viewport to the list of sources (source ONLY)\n   * @param viewportInfo - The viewportId and its renderingEngineId to add to the list of targets and sources.\n   */\n  public addSource(viewportInfo: Types.IViewportId): void {\n    if (_containsViewport(this._sourceViewports, viewportInfo)) {\n      return;\n    }\n\n    const { renderingEngineId, viewportId } = viewportInfo;\n\n    const { element } =\n      getRenderingEngine(renderingEngineId).getViewport(viewportId);\n\n    // @ts-ignore\n    element.addEventListener(this._eventName, this._onEvent.bind(this));\n    this._updateDisableHandlers();\n\n    this._sourceViewports.push(viewportInfo);\n  }\n\n  /**\n   * Add a viewport to the list of viewports that will get the eventHandler\n   * executed when the event is fired on the source viewport.\n   * @param viewportInfo - The viewportId and its renderingEngineId to add to the list of targets and sources.\n   */\n  public addTarget(viewportInfo: Types.IViewportId): void {\n    if (_containsViewport(this._targetViewports, viewportInfo)) {\n      return;\n    }\n\n    this._targetViewports.push(viewportInfo);\n    this._updateDisableHandlers();\n  }\n\n  /**\n   * Get the list of source viewports (as {viewportId, renderingEngineId} objects)\n   * @returns An array of {viewportId, renderingEngineId} objects.\n   */\n  public getSourceViewports(): Array<Types.IViewportId> {\n    return this._sourceViewports;\n  }\n\n  /**\n   * Get the list of target viewports (as {viewportId, renderingEngineId} objects)\n   * @returns An array of {viewportId, renderingEngineId} objects.\n   */\n  public getTargetViewports(): Array<Types.IViewportId> {\n    return this._targetViewports;\n  }\n\n  public destroy(): void {\n    this._sourceViewports.forEach((s) => this.removeSource(s));\n    this._targetViewports.forEach((t) => this.removeTarget(t));\n  }\n\n  /**\n   * Remove the viewport from the list of targets and sources\n   * @param viewportInfo - The viewport info including viewportId and renderingEngineId.\n   */\n  public remove(viewportInfo: Types.IViewportId): void {\n    this.removeTarget(viewportInfo);\n    this.removeSource(viewportInfo);\n  }\n\n  /**\n   * Remove the viewport from the list of source viewports\n   * @param viewportInfo - The viewport info including viewportId and renderingEngineId.\n   */\n  public removeSource(viewportInfo: Types.IViewportId): void {\n    const index = _getViewportIndex(this._sourceViewports, viewportInfo);\n\n    if (index === -1) {\n      return;\n    }\n\n    const element = _getViewportElement(viewportInfo);\n\n    this._sourceViewports.splice(index, 1);\n    // @ts-ignore\n    element.removeEventListener(this._eventName, this._eventHandler);\n    this._updateDisableHandlers();\n  }\n\n  /**\n   * Remove the viewport from the list of viewports that are currently targeted by\n   * this handler\n   * @param viewportInfo - The viewport info including viewportId and renderingEngineId.\n   *\n   */\n  public removeTarget(viewportInfo: Types.IViewportId): void {\n    const index = _getViewportIndex(this._targetViewports, viewportInfo);\n\n    if (index === -1) {\n      return;\n    }\n\n    this._targetViewports.splice(index, 1);\n    this._updateDisableHandlers();\n  }\n\n  public hasSourceViewport(\n    renderingEngineId: string,\n    viewportId: string\n  ): boolean {\n    return _containsViewport(this._sourceViewports, {\n      renderingEngineId,\n      viewportId,\n    });\n  }\n\n  public hasTargetViewport(\n    renderingEngineId: string,\n    viewportId: string\n  ): boolean {\n    return _containsViewport(this._targetViewports, {\n      renderingEngineId,\n      viewportId,\n    });\n  }\n\n  private fireEvent(sourceViewport: Types.IViewportId, sourceEvent: any): void {\n    if (this.isDisabled() || this._ignoreFiredEvents) {\n      return;\n    }\n\n    this._ignoreFiredEvents = true;\n    const promises = [];\n    try {\n      for (let i = 0; i < this._targetViewports.length; i++) {\n        const targetViewport = this._targetViewports[i];\n        const targetIsSource =\n          sourceViewport.viewportId === targetViewport.viewportId;\n\n        if (targetIsSource) {\n          continue;\n        }\n        promises.push(\n          this._eventHandler(\n            this,\n            sourceViewport,\n            targetViewport,\n            sourceEvent,\n            this._options\n          )\n        );\n      }\n    } catch (ex) {\n      console.warn(`Synchronizer, for: ${this._eventName}`, ex);\n    } finally {\n      if (promises.length) {\n        Promise.allSettled(promises).then(() => {\n          this._ignoreFiredEvents = false;\n        });\n      } else {\n        this._ignoreFiredEvents = false;\n      }\n    }\n  }\n\n  private _onEvent = (evt: any): void => {\n    if (this._ignoreFiredEvents === true) {\n      return;\n    }\n\n    // If no target viewports, then return immediately, this is useful\n    // when switching between layouts, when previous layout has disabled\n    // its viewports, and the new layout has not yet enabled them.\n    // Right now we don't \"delete\" the synchronizer if all source and targets\n    // are removed, but we may want to do that in the future.\n    if (!this._targetViewports.length) {\n      return;\n    }\n\n    const enabledElement = getEnabledElement(evt.currentTarget);\n\n    if (!enabledElement) {\n      return;\n    }\n\n    const { renderingEngineId, viewportId } = enabledElement;\n\n    // If the viewport has been removed from the synchronizer before the event is\n    // fired, then return immediately.\n    if (!this._sourceViewports.find((s) => s.viewportId === viewportId)) {\n      return;\n    }\n\n    this.fireEvent(\n      {\n        renderingEngineId,\n        viewportId,\n      },\n      evt\n    );\n  };\n\n  private _hasSourceElements(): boolean {\n    return this._sourceViewports.length !== 0;\n  }\n\n  private _updateDisableHandlers(): void {\n    const viewports = _getUniqueViewports(\n      this._sourceViewports,\n      this._targetViewports\n    );\n    const _remove = this.remove;\n    const disableHandler = (elementDisabledEvent) => {\n      _remove(elementDisabledEvent.detail.element);\n    };\n\n    viewports.forEach(function (vUid) {\n      const renderingEngine = getRenderingEngine(\n        vUid.renderingEngineId\n      ).getViewport(vUid.viewportId);\n\n      if (!renderingEngine) {\n        return;\n      }\n\n      const { element } = renderingEngine;\n\n      element.removeEventListener(\n        Enums.Events.ELEMENT_DISABLED,\n        disableHandler\n      );\n      element.addEventListener(Enums.Events.ELEMENT_DISABLED, disableHandler);\n    });\n  }\n}\n\nfunction _getUniqueViewports(\n  vp1: Array<Types.IViewportId>,\n  vp2: Array<Types.IViewportId>\n): Array<Types.IViewportId> {\n  const unique = [];\n\n  const vps = vp1.concat(vp2);\n\n  for (let i = 0; i < vps.length; i++) {\n    const vp = vps[i];\n    if (\n      !unique.some(\n        (u) =>\n          vp.renderingEngineId === u.renderingEngineId &&\n          vp.viewportId === u.viewportId\n      )\n    ) {\n      unique.push(vp);\n    }\n  }\n\n  return unique;\n}\n\nfunction _getViewportIndex(\n  arr: Array<Types.IViewportId>,\n  vp: Types.IViewportId\n): number {\n  return arr.findIndex(\n    (ar) =>\n      vp.renderingEngineId === ar.renderingEngineId &&\n      vp.viewportId === ar.viewportId\n  );\n}\n\nfunction _containsViewport(\n  arr: Array<Types.IViewportId>,\n  vp: Types.IViewportId\n) {\n  return arr.some(\n    (ar) =>\n      ar.renderingEngineId === vp.renderingEngineId &&\n      ar.viewportId === vp.viewportId\n  );\n}\n\nfunction _getViewportElement(vp: Types.IViewportId): HTMLDivElement {\n  const renderingEngine = getRenderingEngine(vp.renderingEngineId);\n  if (!renderingEngine) {\n    throw new Error(`No RenderingEngine for Id: ${vp.renderingEngineId}`);\n  }\n\n  return renderingEngine.getViewport(vp.viewportId).element;\n}\n\nexport default Synchronizer;\n","import { state } from '../index';\nimport Synchronizer from './Synchronizer';\nimport { ISynchronizerEventHandler } from '../../types';\n\n/**\n * Create a new synchronizer instance from Synchronizer class\n * @param synchronizerId - The id of the synchronizer.\n * @param eventName - The name of the event that will be emitted by the\n * synchronizer.\n * @param eventHandler - The event handler that will be\n * called when the event is emitted.\n * @param options - Options for the synchronizer.\n * @returns A reference to the synchronizer.\n */\nfunction createSynchronizer(\n  synchronizerId: string,\n  eventName: string,\n  eventHandler: ISynchronizerEventHandler,\n  options?: any\n): Synchronizer {\n  const synchronizerWithSameIdExists = state.synchronizers.some(\n    (sync) => sync.id === synchronizerId\n  );\n\n  if (synchronizerWithSameIdExists) {\n    throw new Error(`Synchronizer with id '${synchronizerId}' already exists.`);\n  }\n\n  // Create\n  const synchronizer = new Synchronizer(\n    synchronizerId,\n    eventName,\n    eventHandler,\n    options\n  );\n\n  // Update state\n  state.synchronizers.push(synchronizer);\n\n  // Return reference\n  return synchronizer;\n}\n\nexport default createSynchronizer;\n","import { state } from '../index';\n\n/**\n * \"Destroy all synchronizers.\"\n */\nfunction destroy(): void {\n  while (state.synchronizers.length > 0) {\n    const synchronizer = state.synchronizers.pop();\n\n    synchronizer.destroy();\n  }\n}\n\nexport default destroy;\n","import { state } from '../index';\nimport Synchronizer from './Synchronizer';\n\n/**\n * Get the synchronizer with the given id from the state.\n * @param synchronizerId - The id of the synchronizer to be retrieved.\n * @returns A synchronizer object.\n */\nfunction getSynchronizer(synchronizerId: string): Synchronizer | void {\n  return state.synchronizers.find((s) => s.id === synchronizerId);\n}\n\nexport default getSynchronizer;\n","import { state } from '../index';\nimport Synchronizer from './Synchronizer';\n\n/**\n * Return the array of synchronizers\n * @returns An array of synchronizers.\n */\nfunction getAllSynchronizers(): Array<Synchronizer> {\n  return state.synchronizers;\n}\n\nexport default getAllSynchronizers;\n","import { state } from '../index';\n\n// Synchronizers are a bit more tenacious. We need to make sure we remove\n// any attached events\n// We should probably just have a destroySynchronizer call\n// then use getByX to allow versatility in how we can call destroy\n\n/**\n * Destroy a synchronizer by its ID.\n * @param synchronizerId - The id of the synchronizer to destroy.\n */\nfunction destroySynchronizer(synchronizerId: string): void {\n  const synchronizerIndex = state.synchronizers.findIndex(\n    (sync) => sync.id === synchronizerId\n  );\n\n  if (synchronizerIndex > -1) {\n    const synchronizer = state.synchronizers[synchronizerIndex];\n\n    synchronizer.destroy();\n    state.synchronizers.splice(synchronizerIndex, 1);\n  }\n}\n\nexport default destroySynchronizer;\n","import { MouseBindings, ToolModes } from '../../enums';\nimport cloneDeep from 'lodash.clonedeep';\nimport get from 'lodash.get';\nimport {\n  triggerEvent,\n  eventTarget,\n  getRenderingEngine,\n  getRenderingEngines,\n  getEnabledElementByIds,\n  Settings,\n  utilities as csUtils,\n} from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\nimport { Events } from '../../enums';\nimport {\n  ToolActivatedEventDetail,\n  ToolModeChangedEventDetail,\n} from '../../types/EventTypes';\nimport { ToolGroupManager, state } from '../index';\nimport {\n  IToolBinding,\n  IToolClassReference,\n  IToolGroup,\n  SetToolBindingsType,\n  ToolOptionsType,\n  ToolConfiguration,\n} from '../../types';\n\nimport { MouseCursor, SVGMouseCursor } from '../../cursors';\nimport { initElementCursor } from '../../cursors/elementCursor';\n\nconst { Active, Passive, Enabled, Disabled } = ToolModes;\n\n/**\n * ToolGroup class which is a container for tools and their modes and states.\n * In Cornerstone3DTools, you need to create a tool group in order to use the\n * tools. ToolGroup is a way to share tool configuration, state (enabled, disabled, etc.)\n * across a set of viewports. Tools can set to be activated, enabled or disabled\n * in a toolGroup. You should not directly instantiate a ToolGroup. You need to use\n * ToolGroupManager helpers to create a new toolGroup or get a reference to an existing toolGroup.\n *\n * ```js\n * const toolGroup = csTools.ToolGroupManager.createToolGroup('toolGroupId')\n * ```\n */\nexport default class ToolGroup implements IToolGroup {\n  id: string;\n  viewportsInfo = [];\n  toolOptions = {};\n  _toolInstances = {};\n\n  constructor(id: string) {\n    this.id = id;\n  }\n\n  /**\n   * Get the viewport IDs of all the viewports in the current viewport\n   * @returns An array of viewport IDs.\n   */\n  getViewportIds(): string[] {\n    return this.viewportsInfo.map(({ viewportId }) => viewportId);\n  }\n\n  /**\n   * Returns the toolGroup viewports info which is an array of {viewportId, renderingEngineId}\n   */\n  getViewportsInfo(): Array<Types.IViewportId> {\n    return this.viewportsInfo.slice();\n  }\n\n  /**\n   * Get the tool instance for a given tool name in the toolGroup\n   * @param toolName - The name of the tool.\n   * @returns A tool instance.\n   */\n  public getToolInstance(toolInstanceName: string) {\n    const toolInstance = this._toolInstances[toolInstanceName];\n    if (!toolInstance) {\n      console.warn(\n        `'${toolInstanceName}' is not registered with this toolGroup (${this.id}).`\n      );\n      return;\n    }\n\n    return toolInstance;\n  }\n  /**\n   * Add a tool to the tool group with the given tool name and tool configuration.\n   * Note that adding a tool to a tool group will not automatically set the tool\n   * to be active. You must call setToolActive or setToolPassive and other methods\n   * to set the tool to be active or passive or in other states.\n   *\n   * @param toolName - string\n   * @param configuration - Tool configuration objects and a custom statistics calculator if needed\n   */\n  addTool(toolName: string, configuration: ToolConfiguration = {}): void {\n    const toolDefinition = state.tools[toolName];\n    const hasToolName = typeof toolName !== 'undefined' && toolName !== '';\n    const localToolInstance = this.toolOptions[toolName];\n\n    if (!hasToolName) {\n      console.warn(\n        'Tool with configuration did not produce a toolName: ',\n        configuration\n      );\n      return;\n    }\n\n    if (!toolDefinition) {\n      console.warn(\n        `'${toolName}' is not registered with the library. You need to use cornerstoneTools.addTool to register it.`\n      );\n      return;\n    }\n\n    if (localToolInstance) {\n      console.warn(\n        `'${toolName}' is already registered for ToolGroup ${this.id}.`\n      );\n      return;\n    }\n\n    // Should these be renamed higher up, so we don't have to alias?\n    // Wrap in try-catch so 3rd party tools don't explode?\n    const { toolClass: ToolClass } = toolDefinition;\n\n    const toolProps = {\n      name: toolName,\n      toolGroupId: this.id,\n      configuration,\n    };\n\n    const instantiatedTool = new ToolClass(toolProps);\n\n    // API instead of directly exposing schema?\n    // Maybe not here, but feels like a \"must\" for any method outside of the ToolGroup itself\n    this._toolInstances[toolName] = instantiatedTool;\n  }\n\n  public addToolInstance(\n    toolName: string,\n    parentClassName: string,\n    configuration = {}\n  ): void {\n    let ToolClassToUse = state.tools[toolName]\n      ?.toolClass as IToolClassReference;\n\n    if (!ToolClassToUse) {\n      // get parent class constructor\n      const ParentClass = state.tools[parentClassName]\n        .toolClass as IToolClassReference;\n\n      // Todo: could not find a way to make this work with typescript\n      // @ts-ignore\n      class ToolInstance extends ParentClass {}\n      // @ts-ignore\n      ToolInstance.toolName = toolName;\n      // @ts-ignore\n      ToolClassToUse = ToolInstance;\n\n      state.tools[toolName] = {\n        toolClass: ToolInstance as IToolClassReference,\n      };\n    }\n\n    // add the tool to the toolGroup\n    // @ts-ignore\n    this.addTool(ToolClassToUse.toolName, configuration);\n  }\n\n  //   class InstanceTool extends parentClass;\n  // InstanceTool.constructor.toolName = name;\n  // addTool(InstanceTool,configuration)\n  /**\n   * Add a viewport to the ToolGroup. It accepts viewportId and optional\n   * renderingEngineId parameter. If renderingEngineId is not provided,\n   * it checks if cornerstone-core has more than one renderingEngine; If so,\n   * it will throw an error. If cornerstone-core has only one renderingEngine,\n   * it will use that renderingEngine.\n   *\n   * @param viewportId - The unique identifier for the viewport.\n   * @param renderingEngineId - The rendering engine to use.\n   */\n  public addViewport(viewportId: string, renderingEngineId?: string): void {\n    const renderingEngines = getRenderingEngines();\n\n    if (!renderingEngineId && renderingEngines.length > 1) {\n      throw new Error(\n        'You must specify a renderingEngineId when there are multiple rendering engines.'\n      );\n    }\n\n    const renderingEngineUIDToUse = renderingEngineId || renderingEngines[0].id;\n\n    // Don't overwrite if it already exists\n    if (\n      !this.viewportsInfo.some(({ viewportId: vpId }) => vpId === viewportId)\n    ) {\n      this.viewportsInfo.push({\n        viewportId,\n        renderingEngineId: renderingEngineUIDToUse,\n      });\n    }\n\n    // Handle the newly added viewport's mouse cursor\n    const toolName = this.getActivePrimaryMouseButtonTool();\n\n    const runtimeSettings = Settings.getRuntimeSettings();\n    if (runtimeSettings.get('useCursors')) {\n      this.setViewportsCursorByToolName(toolName);\n    }\n  }\n\n  /**\n   * Removes viewport from the toolGroup. If only renderingEngineId is defined\n   * it removes all the viewports with the same renderingEngineId, if viewportId\n   * is also provided, it will remove that specific viewport from the ToolGroup.\n   *\n   * @param renderingEngineId - renderingEngine id\n   * @param viewportId - viewport id\n   */\n  public removeViewports(renderingEngineId: string, viewportId?: string): void {\n    const indices = [];\n\n    this.viewportsInfo.forEach((vpInfo, index) => {\n      let match = false;\n      if (vpInfo.renderingEngineId === renderingEngineId) {\n        match = true;\n\n        if (viewportId && vpInfo.viewportId !== viewportId) {\n          match = false;\n        }\n      }\n      if (match) {\n        indices.push(index);\n      }\n    });\n\n    if (indices.length) {\n      // Note: Traverse the array backwards, such that when we remove items we\n      // do not immediately mess up our loop indicies.\n      for (let i = indices.length - 1; i >= 0; i--) {\n        this.viewportsInfo.splice(indices[i], 1);\n      }\n    }\n  }\n\n  public setActiveStrategy(toolName: string, strategyName: string) {\n    const toolInstance = this._toolInstances[toolName];\n\n    if (toolInstance === undefined) {\n      console.warn(\n        `Tool ${toolName} not added to toolGroup, can't set tool configuration.`\n      );\n\n      return;\n    }\n\n    toolInstance.setActiveStrategy(strategyName);\n  }\n\n  setToolMode(\n    toolName: string,\n    mode: ToolModes,\n    options = {} as SetToolBindingsType\n  ): void {\n    if (!toolName) {\n      console.warn('setToolMode: toolName must be defined');\n      return;\n    }\n\n    if (mode === ToolModes.Active) {\n      this.setToolActive(toolName, options);\n      return;\n    }\n\n    if (mode === ToolModes.Passive) {\n      this.setToolPassive(toolName);\n      return;\n    }\n\n    if (mode === ToolModes.Enabled) {\n      this.setToolEnabled(toolName);\n      return;\n    }\n\n    if (mode === ToolModes.Disabled) {\n      this.setToolDisabled(toolName);\n      return;\n    }\n\n    console.warn('setToolMode: mode must be defined');\n  }\n\n  /**\n   * Set the tool mode on the toolGroup to be Active. This means the tool\n   * can be actively used by the defined bindings (e.g., Mouse primary click)\n   *\n   * - Can be actively used by mouse/touch events mapped to its `ToolBinding`s.\n   * - Can add data if an annotation tool.\n   * - Can be passively interacted by grabbing a tool or its handles.\n   * - Renders data if the tool has a `renderAnnotation` method.\n   *\n   * @param toolName - tool name\n   * @param toolBindingsOptions - tool bindings\n   */\n  public setToolActive(\n    toolName: string,\n    toolBindingsOptions = {} as SetToolBindingsType\n  ): void {\n    const toolInstance = this._toolInstances[toolName];\n\n    if (toolInstance === undefined) {\n      console.warn(\n        `Tool ${toolName} not added to toolGroup, can't set tool mode.`\n      );\n\n      return;\n    }\n\n    if (!toolInstance) {\n      console.warn(\n        `'${toolName}' instance ${toolInstance} is not registered with this toolGroup, can't set tool mode.`\n      );\n      return;\n    }\n\n    const prevBindings: IToolBinding[] = this.toolOptions[toolName]\n      ? this.toolOptions[toolName].bindings\n      : [];\n\n    const newBindings = toolBindingsOptions.bindings\n      ? toolBindingsOptions.bindings\n      : [];\n\n    // combine the new bindings with the previous bindings to avoid duplicates\n    // it allows duplicated mouse buttons as long as they don't have same\n    // modifier keys.\n    const bindingsToUse = [...prevBindings, ...newBindings].reduce(\n      (unique, binding) => {\n        const TouchBinding = binding.numTouchPoints !== undefined;\n        const MouseBinding = binding.mouseButton !== undefined;\n\n        if (\n          !unique.some((obj) => hasSameBinding(obj, binding)) &&\n          (TouchBinding || MouseBinding)\n        ) {\n          unique.push(binding);\n        }\n        return unique;\n      },\n      []\n    );\n\n    // We should not override the bindings if they are already set\n    const toolOptions: ToolOptionsType = {\n      bindings: bindingsToUse,\n      mode: Active,\n    };\n\n    this.toolOptions[toolName] = toolOptions;\n    this._toolInstances[toolName].mode = Active;\n\n    // reset the mouse cursor if tool has left click binding\n    const runtimeSettings = Settings.getRuntimeSettings();\n    const useCursor = runtimeSettings.get('useCursors');\n\n    if (this._hasMousePrimaryButtonBinding(toolBindingsOptions) && useCursor) {\n      this.setViewportsCursorByToolName(toolName);\n    } else {\n      // reset to default cursor only if there is no other tool with primary binding\n      const activeToolIdentifier = this.getActivePrimaryMouseButtonTool();\n      if (!activeToolIdentifier && useCursor) {\n        const cursor = MouseCursor.getDefinedCursor('default');\n        this._setCursorForViewports(cursor);\n      }\n    }\n\n    if (typeof toolInstance.onSetToolActive === 'function') {\n      toolInstance.onSetToolActive();\n    }\n    this._renderViewports();\n\n    const eventDetail: ToolActivatedEventDetail = {\n      toolGroupId: this.id,\n      toolName,\n      toolBindingsOptions,\n    };\n\n    triggerEvent(eventTarget, Events.TOOL_ACTIVATED, eventDetail);\n    this._triggerToolModeChangedEvent(toolName, Active, toolBindingsOptions);\n  }\n\n  /**\n   * Set the tool mode on the toolGroup to be Passive.\n   *\n   * - Can be passively interacted by grabbing a tool or its handles.\n   * - Renders data if the tool has a `renderAnnotation` method.\n   *\n   * @param toolName - tool name\n   */\n  public setToolPassive(toolName: string): void {\n    const toolInstance = this._toolInstances[toolName];\n\n    if (toolInstance === undefined) {\n      console.warn(\n        `Tool ${toolName} not added to toolGroup, can't set tool mode.`\n      );\n\n      return;\n    }\n\n    // We should only remove the primary button bindings and keep\n    // the other ones (Zoom on right click)\n    const prevToolOptions = this.getToolOptions(toolName);\n    const toolOptions = Object.assign(\n      {\n        bindings: prevToolOptions ? prevToolOptions.bindings : [],\n      },\n      prevToolOptions,\n      {\n        mode: Passive,\n      }\n    );\n\n    const defaultMousePrimary = this.getDefaultMousePrimary();\n\n    // Remove the primary button bindings without modifiers, if they exist\n    toolOptions.bindings = toolOptions.bindings.filter(\n      (binding) =>\n        binding.mouseButton !== defaultMousePrimary || binding.modifierKey\n    );\n    // If there are other bindings, set the tool to be active\n    let mode = Passive;\n    if (toolOptions.bindings.length !== 0) {\n      mode = Active;\n      toolOptions.mode = mode;\n    }\n\n    this.toolOptions[toolName] = toolOptions;\n    toolInstance.mode = mode;\n\n    if (typeof toolInstance.onSetToolPassive === 'function') {\n      toolInstance.onSetToolPassive();\n    }\n    this._renderViewports();\n\n    // It would make sense to use `toolInstance.mode` as mode when setting a tool\n    // as passive because it can still be actived in the end but `Passive` must\n    // be used when synchronizing ToolGroups so that other ToolGroups can take the\n    // same action (update tool bindings). Should the event have two different modes\n    // to handle this special case?\n    this._triggerToolModeChangedEvent(toolName, Passive);\n  }\n\n  /**\n   * Set the tool mode on the toolGroup to be Enabled.\n   *\n   * - Renders data if the tool has a `renderAnnotation` method..\n   *\n   * @param toolName - tool name\n   */\n  public setToolEnabled(toolName: string): void {\n    const toolInstance = this._toolInstances[toolName];\n\n    if (toolInstance === undefined) {\n      console.warn(\n        `Tool ${toolName} not added to toolGroup, can't set tool mode.`\n      );\n\n      return;\n    }\n\n    const toolOptions = {\n      bindings: [],\n      mode: Enabled,\n    };\n\n    this.toolOptions[toolName] = toolOptions;\n    toolInstance.mode = Enabled;\n\n    if (typeof toolInstance.onSetToolEnabled === 'function') {\n      toolInstance.onSetToolEnabled();\n    }\n\n    this._renderViewports();\n    this._triggerToolModeChangedEvent(toolName, Enabled);\n  }\n\n  /**\n   * Set the tool mode on the toolGroup to be Disabled.\n   *\n   * - Annotation does not render.\n   *\n   * @param toolName - tool name\n   */\n  public setToolDisabled(toolName: string): void {\n    const toolInstance = this._toolInstances[toolName];\n\n    if (toolInstance === undefined) {\n      console.warn(\n        `Tool ${toolName} not added to toolGroup, can't set tool mode.`\n      );\n\n      return;\n    }\n\n    const toolOptions = {\n      bindings: [],\n      mode: Disabled,\n    };\n\n    this.toolOptions[toolName] = toolOptions;\n    toolInstance.mode = Disabled;\n\n    if (typeof toolInstance.onSetToolDisabled === 'function') {\n      toolInstance.onSetToolDisabled();\n    }\n    this._renderViewports();\n    this._triggerToolModeChangedEvent(toolName, Disabled);\n  }\n\n  /**\n   * Get the options for a given tool\n   * @param toolName - The name of the tool.\n   * @returns the tool options\n   */\n  public getToolOptions(toolName: string): ToolOptionsType {\n    const toolOptionsForTool = this.toolOptions[toolName];\n\n    if (toolOptionsForTool === undefined) {\n      return;\n    }\n\n    return toolOptionsForTool;\n  }\n\n  /**\n   * Find the name of the tool that is Active and has a primary button binding\n   * (Mouse primary click)\n   *\n   * @returns The name of the tool\n   */\n  public getActivePrimaryMouseButtonTool(): string {\n    return Object.keys(this.toolOptions).find((toolName) => {\n      const toolOptions = this.toolOptions[toolName];\n      return (\n        toolOptions.mode === Active &&\n        this._hasMousePrimaryButtonBinding(toolOptions)\n      );\n    });\n  }\n\n  public setViewportsCursorByToolName(\n    toolName: string,\n    strategyName?: string\n  ): void {\n    const cursor = this._getCursor(toolName, strategyName);\n\n    this._setCursorForViewports(cursor);\n  }\n\n  private _getCursor(toolName: string, strategyName?: string): MouseCursor {\n    let cursorName;\n    let cursor;\n\n    if (strategyName) {\n      // Try combinations with strategyName first:\n      // Try with toolName and toolInstanceName first.\n      cursorName = `${toolName}.${strategyName}`;\n\n      cursor = SVGMouseCursor.getDefinedCursor(cursorName, true);\n\n      if (cursor) {\n        return cursor;\n      }\n    }\n\n    // Try with toolName and toolInstanceName first.\n    cursorName = `${toolName}`;\n\n    cursor = SVGMouseCursor.getDefinedCursor(cursorName, true);\n\n    if (cursor) {\n      return cursor;\n    }\n\n    // Try with just toolName.\n    cursorName = toolName;\n\n    cursor = SVGMouseCursor.getDefinedCursor(cursorName, true);\n\n    if (cursor) {\n      return cursor;\n    }\n\n    return MouseCursor.getDefinedCursor('default');\n  }\n\n  _setCursorForViewports(cursor: MouseCursor): void {\n    this.viewportsInfo.forEach(({ renderingEngineId, viewportId }) => {\n      const enabledElement = getEnabledElementByIds(\n        viewportId,\n        renderingEngineId\n      );\n\n      if (!enabledElement) {\n        return;\n      }\n\n      const { viewport } = enabledElement;\n      initElementCursor(viewport.element, cursor);\n    });\n  }\n\n  /**\n   * Set a configuration of a tool by the given toolName.\n   * Use overwrite as true in case you want to overwrite any existing configuration (be careful, depending on config change it might break the annotation flow).\n   */\n  public setToolConfiguration(\n    toolName: string,\n    configuration: ToolConfiguration,\n    overwrite?: boolean\n  ): boolean {\n    if (this._toolInstances[toolName] === undefined) {\n      console.warn(\n        `Tool ${toolName} not present, can't set tool configuration.`\n      );\n      return false;\n    }\n\n    let _configuration;\n\n    if (overwrite) {\n      _configuration = configuration;\n    } else {\n      // We should not deep copy here, it is the job of the application to\n      // deep copy the configuration before passing it to the toolGroup, otherwise\n      // some strange appending behaviour happens for the arrays\n      _configuration = Object.assign(\n        this._toolInstances[toolName].configuration,\n        configuration\n      );\n    }\n\n    this._toolInstances[toolName].configuration = _configuration;\n\n    this._renderViewports();\n\n    return true;\n  }\n\n  /**\n   * Returns the default mouse primary button.\n   *\n   */\n  public getDefaultMousePrimary(): MouseBindings {\n    return MouseBindings.Primary;\n  }\n\n  /**\n   * Get the configuration of tool. It returns only the config for the given path (in case exists).\n   * ConfigurationPath is the the path of the property to get separated by '.'.\n   *\n   * @example\n   * getToolConfiguration('LengthTool', 'firstLevel.secondLevel')\n   * // get from LengthTool instance the configuration value as being LengthToolInstance[configuration][firstLevel][secondLevel]\n   */\n  getToolConfiguration(toolName: string, configurationPath: string): any {\n    if (this._toolInstances[toolName] === undefined) {\n      console.warn(\n        `Tool ${toolName} not present, can't set tool configuration.`\n      );\n      return;\n    }\n\n    const _configuration = get(\n      this._toolInstances[toolName].configuration,\n      configurationPath\n    );\n\n    return cloneDeep(_configuration);\n  }\n\n  /**\n   *\n   * @param newToolGroupId - Id of the new (clone) tool group\n   * @param fnToolFilter - Function to filter which tools from this tool group\n   * should be added to the new (clone) one. Example: only annotations tools\n   * can be filtered and added to the new tool group.\n   * @returns A new tool group that is a clone of this one\n   */\n  public clone(\n    newToolGroupId,\n    fnToolFilter: (toolName: string) => void = null\n  ): IToolGroup {\n    let toolGroup = ToolGroupManager.getToolGroup(newToolGroupId);\n\n    if (toolGroup) {\n      console.warn(`ToolGroup ${newToolGroupId} already exists`);\n      return toolGroup;\n    }\n\n    toolGroup = ToolGroupManager.createToolGroup(newToolGroupId);\n    fnToolFilter = fnToolFilter ?? (() => true);\n\n    Object.keys(this._toolInstances)\n      .filter(fnToolFilter)\n      .forEach((toolName) => {\n        const sourceToolInstance = this._toolInstances[toolName];\n        const sourceToolOptions = this.toolOptions[toolName];\n        const sourceToolMode = sourceToolInstance.mode;\n\n        toolGroup.addTool(toolName);\n\n        (toolGroup as unknown as ToolGroup).setToolMode(\n          toolName,\n          sourceToolMode,\n          {\n            bindings: sourceToolOptions.bindings ?? [],\n          }\n        );\n      });\n\n    return toolGroup;\n  }\n\n  /**\n   * Check if the tool binding is set to be primary mouse button.\n   * @param toolOptions - The options for the tool mode.\n   * @returns A boolean value.\n   */\n  private _hasMousePrimaryButtonBinding(toolOptions) {\n    const defaultMousePrimary = this.getDefaultMousePrimary();\n\n    return toolOptions?.bindings?.some(\n      (binding) =>\n        binding.mouseButton === defaultMousePrimary &&\n        binding.modifierKey === undefined\n    );\n  }\n\n  /**\n   * It re-renders the viewports in the toolGroup\n   */\n  private _renderViewports(): void {\n    this.viewportsInfo.forEach(({ renderingEngineId, viewportId }) => {\n      getRenderingEngine(renderingEngineId).renderViewport(viewportId);\n    });\n  }\n\n  /**\n   * Trigger ToolModeChangedEvent when changing the tool mode\n   * @param toolName - Tool name\n   * @param mode - Tool mode\n   * @param toolBindingsOptions - Binding options used when a tool is activated\n   */\n  private _triggerToolModeChangedEvent(\n    toolName: string,\n    mode: ToolModes,\n    toolBindingsOptions?: SetToolBindingsType\n  ): void {\n    const eventDetail: ToolModeChangedEventDetail = {\n      toolGroupId: this.id,\n      toolName,\n      mode,\n      toolBindingsOptions,\n    };\n\n    triggerEvent(eventTarget, Events.TOOL_MODE_CHANGED, eventDetail);\n  }\n}\n\nfunction hasSameBinding(\n  binding1: IToolBinding,\n  binding2: IToolBinding\n): boolean {\n  if (binding1.mouseButton !== binding2.mouseButton) {\n    return false;\n  }\n\n  return binding1.modifierKey === binding2.modifierKey;\n}\n","import { state } from '../index';\nimport ToolGroup from './ToolGroup';\nimport { IToolGroup } from '../../types';\n\n/**\n * Create a new tool group with the given name. ToolGroups are the new way\n * in Cornerstone3DTools to share tool configuration, state (enabled, disabled, etc.)\n * across a set of viewports.\n *\n * @param toolGroupId - The unique ID of the tool group.\n * @returns A reference to the tool group that was created.\n */\nfunction createToolGroup(toolGroupId: string): IToolGroup | undefined {\n  // Exit early if ID conflict\n  const toolGroupWithIdExists = state.toolGroups.some(\n    (tg) => tg.id === toolGroupId\n  );\n\n  if (toolGroupWithIdExists) {\n    console.warn(`'${toolGroupId}' already exists.`);\n    return;\n  }\n\n  const toolGroup = new ToolGroup(toolGroupId);\n\n  // Update state\n  state.toolGroups.push(toolGroup);\n\n  // Return reference\n  return toolGroup;\n}\n\nexport default createToolGroup;\n","import { state } from '../index';\nimport { removeSegmentationsFromToolGroup } from '../../stateManagement/segmentation';\nimport { segmentationRenderingEngine } from '../../utilities/segmentation/triggerSegmentationRender';\n// ToolGroups function entirely by their \"state\" being queried and leveraged\n// removing a ToolGroup from state is equivalent to killing it\n\n/**\n * Given a tool group Id, destroy the toolGroup. It will also cleanup all segmentations\n * associated with that tool group too\n *\n * @param toolGroupId - The Id of the tool group to be destroyed.\n */\nfunction destroyToolGroup(toolGroupId: string): void {\n  const toolGroupIndex = state.toolGroups.findIndex(\n    (tg) => tg.id === toolGroupId\n  );\n\n  if (toolGroupIndex > -1) {\n    segmentationRenderingEngine.removeToolGroup(toolGroupId);\n    // Todo: this should not happen here)\n    removeSegmentationsFromToolGroup(toolGroupId);\n    state.toolGroups.splice(toolGroupIndex, 1);\n  }\n}\n\nexport default destroyToolGroup;\n","// `BaseManager` or IManager interface for duplicate API between ToolGroup/Synchronizer?\nimport { state as csToolsState } from '../index';\nimport destroyToolGroup from './destroyToolGroup';\n\n// ToolGroups function entirely by their \"state\" being queried and leveraged\n// removing a ToolGroup from state is equivalent to killing it. Calling\n// destroyToolGroup() to make sure the SegmentationDisplayTools\n// have been removed from the toolGroup Viewports. //Todo: this makes more sense\n// to be based on events, but we don't have any toolGroup created/removed events\n\n/**\n * Destroy all tool groups\n */\nfunction destroy(): void {\n  const toolGroups = [...csToolsState.toolGroups];\n\n  for (const toolGroup of toolGroups) {\n    destroyToolGroup(toolGroup.id);\n  }\n\n  csToolsState.toolGroups = [];\n}\n\nexport default destroy;\n","import { state } from '../index';\nimport { IToolGroup } from '../../types';\n\n/**\n * Given a tool group Id, return the tool group\n * @param toolGroupId - The Id of the tool group to be retrieved.\n * @returns The tool group that has the same id as the tool group id that was\n * passed in.\n */\nfunction getToolGroup(toolGroupId: string): IToolGroup | undefined {\n  return state.toolGroups.find((s) => s.id === toolGroupId);\n}\n\nexport default getToolGroup;\n","import { state } from '../index';\nimport { IToolGroup } from '../../types';\n\n/**\n * Return the array of tool groups\n * @returns An array of tool groups.\n */\nfunction getAllToolGroups(): Array<IToolGroup> {\n  return state.toolGroups;\n}\n\nexport default getAllToolGroups;\n","import { state } from '../index';\nimport { IToolGroup } from '../../types';\nimport { ToolModes } from '../../enums';\n\nconst MODES = [ToolModes.Active, ToolModes.Passive, ToolModes.Enabled];\n\n/**\n * Returns the toolGroups that has the given toolName as active, passive\n * or enabled.\n * @param toolName - The name of the tool\n * @returns An array of tool groups.\n */\nfunction getToolGroupsWithToolName(toolName: string): IToolGroup[] | [] {\n  return state.toolGroups.filter(({ toolOptions }) => {\n    const toolGroupToolNames = Object.keys(toolOptions);\n\n    for (let i = 0; i < toolGroupToolNames.length; i++) {\n      if (toolName !== toolGroupToolNames[i]) {\n        continue;\n      }\n\n      /* filter out tools that don't have options */\n      if (!toolOptions[toolName]) {\n        continue;\n      }\n\n      if (MODES.includes(toolOptions[toolName].mode)) {\n        return true;\n      }\n    }\n    return false;\n  });\n}\n\nexport default getToolGroupsWithToolName;\n","import {\n  triggerEvent,\n  eventTarget,\n  utilities as csUtils,\n} from '@cornerstonejs/core';\nimport { Events } from '../../enums';\nimport { defaultFrameOfReferenceSpecificAnnotationManager } from './FrameOfReferenceSpecificAnnotationManager';\nimport { Annotations, Annotation } from '../../types/AnnotationTypes';\nimport { AnnotationRemovedEventDetail } from '../../types/EventTypes';\nimport { AnnotationGroupSelector } from '../../types';\nimport {\n  triggerAnnotationAddedForElement,\n  triggerAnnotationAddedForFOR,\n} from './helpers/state';\n\n// our default annotation manager\nlet defaultManager = defaultFrameOfReferenceSpecificAnnotationManager;\n\n/**\n * It returns the default annotations manager.\n * @returns the singleton default annotations manager.\n */\nfunction getAnnotationManager() {\n  return defaultManager;\n}\n\n/**\n * Set the annotation manager to be used for rendering, adding, removing, etc.\n * @param annotationManager - The annotation manager to be used\n */\nfunction setAnnotationManager(annotationManager) {\n  defaultManager = annotationManager;\n}\n\n// set back to default frameOfReferenceSpecificAnnotationManager\nfunction resetAnnotationManager() {\n  defaultManager = defaultFrameOfReferenceSpecificAnnotationManager;\n}\n\n/**\n * Returns the annotations for a given tool with the provided options that is\n * used to filter annotations based on the annotation manager.\n *\n * In our default implementation, the options are the element and/or the FrameOfReferenceUID.\n * Hence, the getAnnotations function will return the annotations for the given tool\n * that are associated with the FrameOfReferenceUID.\n *\n * @param toolName - The name of the tool.\n * @param annotationGroupSelector - element or FrameOfReferenceUID that is used\n * to group annotations in the annotation manager.\n * @returns The annotations corresponding to the Frame of Reference and the toolName.\n */\nfunction getAnnotations(\n  toolName: string,\n  annotationGroupSelector: AnnotationGroupSelector\n): Annotations {\n  const manager = getAnnotationManager();\n  const groupKey = manager.getGroupKey(annotationGroupSelector);\n  return manager.getAnnotations(groupKey, toolName) as Annotations;\n}\n\n/**\n * Add the annotation to the annotation manager along with the options that is\n * used to filter the annotation manager and the annotation group that\n * the annotation belongs to.\n *\n * As a result, our default implementation will add the annotation to the\n * default manager using the FrameOfReferenceUID as the group key.\n *\n * @param annotation - The annotation that is being added to the annotations manager.\n * @param annotationGroupSelector - element or FrameOfReferenceUID that is used\n * to group annotations in the annotation manager.\n */\nfunction addAnnotation(\n  annotation: Annotation,\n  annotationGroupSelector: AnnotationGroupSelector\n): string {\n  if (annotation.annotationUID === undefined) {\n    annotation.annotationUID = csUtils.uuidv4() as string;\n  }\n\n  const manager = getAnnotationManager();\n  const groupKey = manager.getGroupKey(annotationGroupSelector);\n\n  manager.addAnnotation(annotation, groupKey);\n\n  // if the annotation manager selector is an element, trigger the\n  // annotation added event for that element.\n  if (annotationGroupSelector instanceof HTMLDivElement) {\n    triggerAnnotationAddedForElement(annotation, annotationGroupSelector);\n  } else {\n    // if no element is provided, render all viewports that have the\n    // same frame of reference.\n    // Todo: we should do something else here for other types of annotation managers.\n    triggerAnnotationAddedForFOR(annotation);\n  }\n\n  return annotation.annotationUID;\n}\n\n/**\n * Get the number of annotations for a given tool with the provided options that is\n * used to filter annotations based on the annotation manager.\n *\n * In our default implementation, the options are the element and/or the FrameOfReferenceUID.\n * Hence, the getNumberOfAnnotations function will return the number of annotations for the given tool\n * that are associated with the FrameOfReferenceUID.\n *\n * @param toolName - The name of the tool\n * @param annotationGroupSelector - element or FrameOfReferenceUID that is used\n * to group annotations in the annotation manager.\n *\n */\nfunction getNumberOfAnnotations(\n  toolName: string,\n  annotationGroupSelector: AnnotationGroupSelector\n): number {\n  const manager = getAnnotationManager();\n  const groupKey = manager.getGroupKey(annotationGroupSelector);\n\n  return manager.getNumberOfAnnotations(groupKey, toolName);\n}\n\n/**\n * Remove the annotation by UID of the annotation.\n * @param annotationUID - The unique identifier for the annotation.\n */\nfunction removeAnnotation(annotationUID: string): void {\n  const manager = getAnnotationManager();\n  const annotation = manager.getAnnotation(annotationUID);\n\n  // no need to continue in case there is no annotation.\n  if (!annotation) {\n    return;\n  }\n\n  manager.removeAnnotation(annotationUID);\n\n  // trigger annotation removed\n  const eventType = Events.ANNOTATION_REMOVED;\n\n  const eventDetail: AnnotationRemovedEventDetail = {\n    annotation,\n    annotationManagerUID: manager.uid,\n  };\n\n  triggerEvent(eventTarget, eventType, eventDetail);\n}\n\n/**\n * Get the Annotation object by its UID\n * @param annotationUID - The unique identifier of the annotation.\n */\nfunction getAnnotation(annotationUID: string): Annotation {\n  const manager = getAnnotationManager();\n  const annotation = manager.getAnnotation(annotationUID);\n\n  return annotation;\n}\n\n/**\n * It removes all annotations from the default annotation manager\n */\nfunction removeAllAnnotations(): void {\n  const manager = getAnnotationManager();\n  manager.removeAllAnnotations();\n}\n\nexport {\n  getAnnotations,\n  getNumberOfAnnotations,\n  addAnnotation,\n  getAnnotation,\n  removeAnnotation,\n  removeAllAnnotations,\n  // annotation manager\n  setAnnotationManager,\n  getAnnotationManager,\n  resetAnnotationManager,\n};\n","import {\n  getEnabledElement,\n  triggerEvent,\n  eventTarget,\n  getEnabledElementByIds,\n} from '@cornerstonejs/core';\nimport { Events } from '../../../enums';\nimport { Annotation } from '../../../types/AnnotationTypes';\nimport { getToolGroupsWithToolName } from '../../../store/ToolGroupManager';\nimport { AnnotationAddedEventDetail } from '../../../types/EventTypes';\n\n/**\n * It triggers an event for the element when an annotation is added\n * @param annotation - Annotation - The annotation that was added.\n * @param element - The element that the annotation was added to.\n */\nfunction triggerAnnotationAddedForElement(\n  annotation: Annotation,\n  element: HTMLDivElement\n) {\n  const enabledElement = getEnabledElement(element);\n  const { renderingEngine, viewportId } = enabledElement;\n\n  const eventType = Events.ANNOTATION_ADDED;\n\n  const eventDetail: AnnotationAddedEventDetail = {\n    annotation,\n    viewportId,\n    renderingEngineId: renderingEngine.id,\n  };\n\n  triggerEvent(eventTarget, eventType, eventDetail);\n}\n\n/**\n * If the annotation has a FrameOfReferenceUID, it triggers the ANNOTATION_ADDED\n * event for all the viewports that has the same FrameOfReferenceUID.\n * @param annotation -  Annotation - The annotation that was added\n */\nfunction triggerAnnotationAddedForFOR(annotation: Annotation) {\n  const { toolName } = annotation.metadata;\n\n  const toolGroups = getToolGroupsWithToolName(toolName);\n\n  if (!toolGroups.length) {\n    return;\n  }\n\n  // Find the viewports in the toolGroups who has the same FrameOfReferenceUID\n  const viewportsToRender = [];\n\n  toolGroups.forEach((toolGroup) => {\n    toolGroup.viewportsInfo.forEach((viewportInfo) => {\n      const { renderingEngineId, viewportId } = viewportInfo;\n      const { FrameOfReferenceUID } = getEnabledElementByIds(\n        viewportId,\n        renderingEngineId\n      );\n\n      if (annotation.metadata.FrameOfReferenceUID === FrameOfReferenceUID) {\n        viewportsToRender.push(viewportInfo);\n      }\n    });\n  });\n\n  if (!viewportsToRender.length) {\n    return;\n  }\n\n  const eventType = Events.ANNOTATION_ADDED;\n\n  viewportsToRender.forEach(({ renderingEngineId, viewportId }) => {\n    const eventDetail: AnnotationAddedEventDetail = {\n      annotation,\n      viewportId,\n      renderingEngineId,\n    };\n\n    triggerEvent(eventTarget, eventType, eventDetail);\n  });\n}\n\nexport { triggerAnnotationAddedForElement, triggerAnnotationAddedForFOR };\n","import { eventTarget, Enums } from '@cornerstonejs/core';\nimport { getAnnotationManager } from './stateManagement/annotation/annotationState';\nimport { getDefaultSegmentationStateManager } from './stateManagement/segmentation/segmentationState';\nimport { Events as TOOLS_EVENTS } from './enums';\nimport { addEnabledElement, removeEnabledElement } from './store';\nimport { resetCornerstoneToolsState } from './store/state';\nimport {\n  annotationSelectionListener,\n  segmentationDataModifiedEventListener,\n  segmentationRepresentationModifiedEventListener,\n  segmentationRepresentationRemovedEventListener,\n  segmentationModifiedListener,\n  annotationModifiedListener,\n} from './eventListeners';\n\nimport * as ToolGroupManager from './store/ToolGroupManager';\n\nlet csToolsInitialized = false;\n\n/**\n * Initialize the cornerstoneTools package. It will add event listeners for mouse\n * and keyboard events.\n * @param defaultConfiguration - A configuration object that will be used to\n * initialize the tool.\n */\nexport function init(defaultConfiguration = {}): void {\n  if (csToolsInitialized) {\n    return;\n  }\n\n  _addCornerstoneEventListeners();\n  _addCornerstoneToolsEventListeners();\n\n  csToolsInitialized = true;\n}\n\n/**\n * It destroys and cleanup state for cornerstone3DTools. It removes all the tools\n * that were added to the tool groups and restore states. It also removes all\n * event listeners.\n */\nexport function destroy(): void {\n  _removeCornerstoneEventListeners();\n  _removeCornerstoneToolsEventListeners();\n\n  // Important: destroy ToolGroups first, in order for cleanup to work correctly for the\n  // added tools.\n  ToolGroupManager.destroy();\n\n  // Remove all tools\n  resetCornerstoneToolsState();\n\n  // remove all annotation.\n  const annotationManager = getAnnotationManager();\n  const segmentationStateManager = getDefaultSegmentationStateManager();\n\n  annotationManager.restoreAnnotations({});\n  segmentationStateManager.resetState();\n  csToolsInitialized = false;\n}\n\n/**\n * Wires up event listeners for the Cornerstone#ElementDisabled and\n * Cornerstone#ElementEnabled events.\n *\n * @internal\n */\nfunction _addCornerstoneEventListeners(): void {\n  // Clear any listeners that may already be set\n  _removeCornerstoneEventListeners();\n\n  const elementEnabledEvent = Enums.Events.ELEMENT_ENABLED;\n  const elementDisabledEvent = Enums.Events.ELEMENT_DISABLED;\n\n  eventTarget.addEventListener(elementEnabledEvent, addEnabledElement);\n  eventTarget.addEventListener(elementDisabledEvent, removeEnabledElement);\n}\n\n/**\n * Removes event listeners for the Cornerstone#ElementDisabled and\n * Cornerstone#ElementEnabled events.\n *\n */\nfunction _removeCornerstoneEventListeners(): void {\n  const elementEnabledEvent = Enums.Events.ELEMENT_ENABLED;\n  const elementDisabledEvent = Enums.Events.ELEMENT_DISABLED;\n\n  eventTarget.removeEventListener(elementEnabledEvent, addEnabledElement);\n  eventTarget.removeEventListener(elementDisabledEvent, removeEnabledElement);\n}\n\n/**\n * It adds an event listener to the event target (the cornerstoneTools object) for\n * the annotation selected and annotation modified events.\n */\nfunction _addCornerstoneToolsEventListeners() {\n  // Clear any listeners that may already be set\n  _removeCornerstoneToolsEventListeners();\n\n  /**\n   * Annotation\n   */\n  eventTarget.addEventListener(\n    TOOLS_EVENTS.ANNOTATION_MODIFIED,\n    annotationModifiedListener\n  );\n\n  eventTarget.addEventListener(\n    TOOLS_EVENTS.ANNOTATION_SELECTION_CHANGE,\n    annotationSelectionListener\n  );\n\n  eventTarget.addEventListener(\n    TOOLS_EVENTS.ANNOTATION_SELECTION_CHANGE,\n    annotationSelectionListener\n  );\n\n  /**\n   * Segmentation\n   */\n  eventTarget.addEventListener(\n    TOOLS_EVENTS.SEGMENTATION_MODIFIED,\n    segmentationModifiedListener\n  );\n\n  eventTarget.addEventListener(\n    TOOLS_EVENTS.SEGMENTATION_DATA_MODIFIED,\n    segmentationDataModifiedEventListener\n  );\n  eventTarget.addEventListener(\n    TOOLS_EVENTS.SEGMENTATION_REPRESENTATION_MODIFIED,\n    segmentationRepresentationModifiedEventListener\n  );\n\n  eventTarget.addEventListener(\n    TOOLS_EVENTS.SEGMENTATION_REPRESENTATION_REMOVED,\n    segmentationRepresentationRemovedEventListener\n  );\n}\n\n/**\n * Remove the event listener for the the annotation selected and annotation modified events.\n */\nfunction _removeCornerstoneToolsEventListeners() {\n  /**\n   * Annotation\n   */\n  eventTarget.removeEventListener(\n    TOOLS_EVENTS.ANNOTATION_MODIFIED,\n    annotationModifiedListener\n  );\n\n  eventTarget.removeEventListener(\n    TOOLS_EVENTS.ANNOTATION_SELECTION_CHANGE,\n    annotationSelectionListener\n  );\n\n  eventTarget.removeEventListener(\n    TOOLS_EVENTS.ANNOTATION_SELECTION_CHANGE,\n    annotationSelectionListener\n  );\n\n  /**\n   * Segmentation\n   */\n\n  eventTarget.removeEventListener(\n    TOOLS_EVENTS.SEGMENTATION_MODIFIED,\n    segmentationModifiedListener\n  );\n\n  eventTarget.removeEventListener(\n    TOOLS_EVENTS.SEGMENTATION_DATA_MODIFIED,\n    segmentationDataModifiedEventListener\n  );\n  eventTarget.removeEventListener(\n    TOOLS_EVENTS.SEGMENTATION_REPRESENTATION_MODIFIED,\n    segmentationRepresentationModifiedEventListener\n  );\n\n  eventTarget.removeEventListener(\n    TOOLS_EVENTS.SEGMENTATION_REPRESENTATION_REMOVED,\n    segmentationRepresentationRemovedEventListener\n  );\n}\n\nexport default init;\n","import { getRenderingEngine, Types } from '@cornerstonejs/core';\nimport { Synchronizer } from '../../store';\n\n/**\n * Synchronizer callback to synchronize the camera by updating all camera\n * values.  See also zoomPanSyncCallback\n *\n * @param synchronizerInstance - The Instance of the Synchronizer\n * @param sourceViewport - The list of IDs defining the source viewport.\n * @param targetViewport - The list of IDs defining the target viewport, never\n *   the same as sourceViewport.\n * @param cameraModifiedEvent - The CAMERA_MODIFIED event.\n */\nexport default function cameraSyncCallback(\n  synchronizerInstance: Synchronizer,\n  sourceViewport: Types.IViewportId,\n  targetViewport: Types.IViewportId,\n  cameraModifiedEvent: CustomEvent\n): void {\n  const { camera } = cameraModifiedEvent.detail;\n\n  const renderingEngine = getRenderingEngine(targetViewport.renderingEngineId);\n  if (!renderingEngine) {\n    throw new Error(\n      `No RenderingEngine for Id: ${targetViewport.renderingEngineId}`\n    );\n  }\n\n  const tViewport = renderingEngine.getViewport(targetViewport.viewportId);\n\n  tViewport.setCamera(camera);\n  tViewport.render();\n}\n","import { createSynchronizer } from '../../store/SynchronizerManager';\nimport { Enums } from '@cornerstonejs/core';\nimport cameraSyncCallback from '../callbacks/cameraSyncCallback';\nimport Synchronizer from '../../store/SynchronizerManager/Synchronizer';\n\nconst { CAMERA_MODIFIED } = Enums.Events;\n\n/**\n * A helper that creates a new `Synchronizer` which listens to the `CAMERA_MODIFIED`\n * rendering event and calls the `cameraSyncCallback`.\n *\n * @param synchronizerName - The name of the synchronizer.\n * @returns A new `Synchronizer` instance.\n */\nexport default function createCameraPositionSynchronizer(\n  synchronizerName: string\n): Synchronizer {\n  const cameraPositionSynchronizer = createSynchronizer(\n    synchronizerName,\n    CAMERA_MODIFIED,\n    cameraSyncCallback\n  );\n\n  return cameraPositionSynchronizer;\n}\n","import {\n  BaseVolumeViewport,\n  getRenderingEngine,\n  StackViewport,\n  Types,\n} from '@cornerstonejs/core';\n\n/**\n * Synchronizer callback to synchronize the voi of volumeActors of identical volumes\n * in different viewports.\n *\n * @param synchronizerInstance - The Instance of the Synchronizer\n * @param sourceViewport - The list of IDs defining the source viewport.\n * @param targetViewport - The list of IDs defining the target viewport.\n * @param voiModifiedEvent - The VOI_MODIFIED event.\n * @param options - Options for the synchronizer.\n */\nexport default function voiSyncCallback(\n  synchronizerInstance,\n  sourceViewport: Types.IViewportId,\n  targetViewport: Types.IViewportId,\n  voiModifiedEvent: Types.EventTypes.VoiModifiedEvent,\n  options?: any\n): void {\n  const eventDetail = voiModifiedEvent.detail;\n  const { volumeId, range, invertStateChanged, invert } = eventDetail;\n\n  const renderingEngine = getRenderingEngine(targetViewport.renderingEngineId);\n  if (!renderingEngine) {\n    throw new Error(\n      `Rendering Engine does not exist: ${targetViewport.renderingEngineId}`\n    );\n  }\n\n  const tViewport = renderingEngine.getViewport(targetViewport.viewportId);\n  const tProperties:\n    | Types.VolumeViewportProperties\n    | Types.StackViewportProperties = {\n    voiRange: range,\n  };\n\n  if (options?.syncInvertState && invertStateChanged) {\n    tProperties.invert = invert;\n  }\n\n  if (tViewport instanceof BaseVolumeViewport) {\n    tViewport.setProperties(tProperties, volumeId);\n  } else if (tViewport instanceof StackViewport) {\n    tViewport.setProperties(tProperties);\n  } else {\n    throw new Error('Viewport type not supported.');\n  }\n\n  tViewport.render();\n}\n","import { createSynchronizer } from '../../store/SynchronizerManager';\nimport { Enums } from '@cornerstonejs/core';\nimport voiSyncCallback from '../callbacks/voiSyncCallback';\nimport Synchronizer from '../../store/SynchronizerManager/Synchronizer';\n\ntype VOISynchronizerOptions = {\n  syncInvertState: boolean;\n};\n\n/**\n * A helper that creates a new `Synchronizer`\n * which listens to the `VOI_MODIFIED` rendering event and calls the `voiSyncCallback`.\n *\n * @param synchronizerName - The name of the synchronizer.\n * @param options - The options for the synchronizer. By default the voi\n * synchronizer will also sync the invert state of the volume, but this can be\n * disabled by setting `syncInvertState` to false.\n *\n * @returns A new `Synchronizer` instance.\n */\nexport default function createVOISynchronizer(\n  synchronizerName: string,\n  options = { syncInvertState: true } as VOISynchronizerOptions\n): Synchronizer {\n  const VOISynchronizer = createSynchronizer(\n    synchronizerName,\n    Enums.Events.VOI_MODIFIED,\n    voiSyncCallback,\n    options\n  );\n\n  return VOISynchronizer;\n}\n","import { getRenderingEngine, Types } from '@cornerstonejs/core';\nimport { Synchronizer } from '../../store';\n\n/**\n * Synchronizer callback to synchronize the camera. Synchronization\n *\n * targetViewport.options.syncZoom set to false to not sync the zoom\n * targetViewport.options.syncPan set to false to not sync the pan\n\n * @param synchronizerInstance - The Instance of the Synchronizer\n * @param sourceViewport - The list of IDs defining the source viewport.\n * @param targetViewport - The list of IDs defining the target viewport, different\n *   from sourceViewport\n */\nexport default function zoomPanSyncCallback(\n  synchronizerInstance: Synchronizer,\n  sourceViewport: Types.IViewportId,\n  targetViewport: Types.IViewportId\n): void {\n  const renderingEngine = getRenderingEngine(targetViewport.renderingEngineId);\n  if (!renderingEngine) {\n    throw new Error(\n      `No RenderingEngine for Id: ${targetViewport.renderingEngineId}`\n    );\n  }\n\n  const options = synchronizerInstance.getOptions(targetViewport.viewportId);\n\n  const tViewport = renderingEngine.getViewport(targetViewport.viewportId);\n  const sViewport = renderingEngine.getViewport(sourceViewport.viewportId);\n\n  if (options?.syncZoom !== false) {\n    const srcZoom = sViewport.getZoom();\n    // Do the zoom first, as the pan is relative to the zoom level\n    tViewport.setZoom(srcZoom);\n  }\n  if (options?.syncPan !== false) {\n    const srcPan = sViewport.getPan();\n    tViewport.setPan(srcPan);\n  }\n\n  tViewport.render();\n}\n","import { createSynchronizer } from '../../store/SynchronizerManager';\nimport { Enums } from '@cornerstonejs/core';\nimport zoomPanSyncCallback from '../callbacks/zoomPanSyncCallback';\nimport Synchronizer from '../../store/SynchronizerManager/Synchronizer';\n\nconst { CAMERA_MODIFIED } = Enums.Events;\n\n/**\n * A helper that creates a new `Synchronizer` which listens to the `CAMERA_MODIFIED`\n * rendering event and calls the `cameraSyncCallback`.\n *\n * @param synchronizerName - The name of the synchronizer.\n * @returns A new `Synchronizer` instance.\n */\nexport default function createZoomPanSynchronizer(\n  synchronizerName: string\n): Synchronizer {\n  const zoomPanSynchronizer = createSynchronizer(\n    synchronizerName,\n    CAMERA_MODIFIED,\n    zoomPanSyncCallback\n  );\n\n  return zoomPanSynchronizer;\n}\n","import { vec3, mat4 } from 'gl-matrix';\nimport {\n  getRenderingEngine,\n  Types,\n  metaData,\n  utilities,\n} from '@cornerstonejs/core';\nimport { Synchronizer } from '../../store';\nimport { jumpToSlice } from '../../utilities';\nimport areViewportsCoplanar from './areViewportsCoplanar ';\n\nconst getSpatialRegistration = (targetId, sourceId) =>\n  utilities.spatialRegistrationMetadataProvider.get(\n    'spatialRegistrationModule',\n    [targetId, sourceId]\n  );\n\n/**\n * Synchronizer callback to synchronize the source viewport image to the\n * target viewports closest image in its stack.\n *\n * This synchronizer does a setup (which can already be predefined as required)\n * to register the target and soruce viewports.  The registration will default\n * to the identity registration if the same FOR is present in both viewports,\n * unless the option `useInitialPosition` is set in the target viewport.\n *\n * The consuming apps using Cornerstone3D (OHIF, etc) MAY provide such data in\n * the registrationMetadataProvider to override the data here. This can be done\n * by various methods 1) Using spatialRegistrationModule inside dicom 2) assuming\n * the user has actually manually scrolled the target viewport to the correct\n * slice before initiating the synchronization 3) using some other method\n *\n * @param synchronizerInstance - The Instance of the Synchronizer\n * @param sourceViewport - The list of IDs defining the source viewport.\n * @param targetViewport - The list of IDs defining the target viewport, never\n *   the same as sourceViewport.\n * @param cameraModifiedEvent - The CAMERA_MODIFIED event.\n */\nexport default async function stackImageSyncCallback(\n  synchronizerInstance: Synchronizer,\n  sourceViewport: Types.IViewportId,\n  targetViewport: Types.IViewportId\n): Promise<void> {\n  const renderingEngine = getRenderingEngine(targetViewport.renderingEngineId);\n  if (!renderingEngine) {\n    throw new Error(\n      `No RenderingEngine for Id: ${targetViewport.renderingEngineId}`\n    );\n  }\n\n  const sViewport = renderingEngine.getViewport(\n    sourceViewport.viewportId\n  ) as Types.IStackViewport;\n\n  const options = synchronizerInstance.getOptions(targetViewport.viewportId);\n\n  if (options?.disabled) {\n    return;\n  }\n\n  const tViewport = renderingEngine.getViewport(\n    targetViewport.viewportId\n  ) as Types.IStackViewport;\n\n  const imageId1 = sViewport.getCurrentImageId();\n  const imagePlaneModule1 = metaData.get('imagePlaneModule', imageId1);\n  const sourceImagePositionPatient = imagePlaneModule1.imagePositionPatient;\n\n  const targetImageIds = tViewport.getImageIds();\n\n  if (!areViewportsCoplanar(sViewport, tViewport)) {\n    return;\n  }\n\n  // if the frame of reference is different we need to use the registrationMetadataProvider\n  // and add that to the imagePositionPatient of the source viewport to get the\n  // imagePositionPatient of the target viewport's closest image in its stack\n  let registrationMatrixMat4 = getSpatialRegistration(\n    targetViewport.viewportId,\n    sourceViewport.viewportId\n  );\n\n  if (!registrationMatrixMat4) {\n    const frameOfReferenceUID1 = sViewport.getFrameOfReferenceUID();\n    const frameOfReferenceUID2 = tViewport.getFrameOfReferenceUID();\n    if (\n      frameOfReferenceUID1 === frameOfReferenceUID2 &&\n      options?.useInitialPosition !== false\n    ) {\n      registrationMatrixMat4 = mat4.identity(mat4.create());\n    } else {\n      utilities.calculateViewportsSpatialRegistration(sViewport, tViewport);\n      registrationMatrixMat4 = getSpatialRegistration(\n        targetViewport.viewportId,\n        sourceViewport.viewportId\n      );\n    }\n    if (!registrationMatrixMat4) {\n      return;\n    }\n  }\n\n  // apply the registration matrix to the source viewport's imagePositionPatient\n  // to get the target viewport's imagePositionPatient\n  const targetImagePositionPatientWithRegistrationMatrix = vec3.transformMat4(\n    vec3.create(),\n    sourceImagePositionPatient,\n    registrationMatrixMat4\n  );\n\n  // find the closest image in the target viewport's stack to the\n  // targetImagePositionPatientWithRegistrationMatrix\n  const closestImageIdIndex2 = _getClosestImageIdIndex(\n    targetImagePositionPatientWithRegistrationMatrix,\n    targetImageIds\n  );\n\n  if (\n    closestImageIdIndex2.index !== -1 &&\n    tViewport.getCurrentImageIdIndex() !== closestImageIdIndex2.index\n  ) {\n    await jumpToSlice(tViewport.element, {\n      imageIndex: closestImageIdIndex2.index,\n    });\n  }\n}\n\nfunction _getClosestImageIdIndex(targetPoint, imageIds) {\n  // todo: this does not assume orientation yet, but that can be added later\n  // todo: handle multiframe images\n  return imageIds.reduce(\n    (closestImageIdIndex, imageId, index) => {\n      const { imagePositionPatient } = metaData.get(\n        'imagePlaneModule',\n        imageId\n      );\n      const distance = vec3.distance(imagePositionPatient, targetPoint);\n\n      if (distance < closestImageIdIndex.distance) {\n        return {\n          distance,\n          index,\n        };\n      }\n      return closestImageIdIndex;\n    },\n    {\n      distance: Infinity,\n      index: -1,\n    }\n  );\n}\n","import { vec3 } from 'gl-matrix';\nimport { Types } from '@cornerstonejs/core';\n\nexport default function areViewportsCoplanar(\n  viewport1: Types.IStackViewport,\n  viewport2: Types.IStackViewport\n): boolean {\n  const { viewPlaneNormal: viewPlaneNormal1 } = viewport1.getCamera();\n  const { viewPlaneNormal: viewPlaneNormal2 } = viewport2.getCamera();\n  const dotProducts = vec3.dot(viewPlaneNormal1, viewPlaneNormal2);\n  return Math.abs(dotProducts) > 0.9;\n}\n","import { createSynchronizer } from '../../store/SynchronizerManager';\nimport { Enums } from '@cornerstonejs/core';\nimport stackImageSyncCallback from '../callbacks/stackImageSyncCallback';\nimport Synchronizer from '../../store/SynchronizerManager/Synchronizer';\n\nconst { STACK_NEW_IMAGE } = Enums.Events;\n\n/**\n * A helper that creates a new `Synchronizer` which listens to the `STACK_NEW_IMAGE`\n * rendering event and calls the `stackImageSyncCallback`.\n *\n * @param synchronizerName - The name of the synchronizer.\n * @returns A new `Synchronizer` instance.\n */\nexport default function createStackImageSynchronizer(\n  synchronizerName: string\n): Synchronizer {\n  const stackImageSynchronizer = createSynchronizer(\n    synchronizerName,\n    STACK_NEW_IMAGE,\n    stackImageSyncCallback\n  );\n\n  return stackImageSynchronizer;\n}\n","import { vec3, vec2 } from 'gl-matrix';\n\nimport {\n  getEnabledElement,\n  triggerEvent,\n  eventTarget,\n  utilities as csUtils,\n  cache,\n} from '@cornerstonejs/core';\nimport type { Types } from '@cornerstonejs/core';\nimport { AnnotationTool } from '../base';\n\nimport throttle from '../../utilities/throttle';\nimport {\n  addAnnotation,\n  getAnnotations,\n  removeAnnotation,\n} from '../../stateManagement';\nimport {\n  drawHandles as drawHandlesSvg,\n  drawRedactionRect as drawRedactionRectSvg,\n} from '../../drawingSvg';\nimport { state } from '../../store';\nimport { Events } from '../../enums';\nimport { getViewportIdsWithToolToRender } from '../../utilities/viewportFilters';\nimport * as rectangle from '../../utilities/math/rectangle';\nimport {\n  resetElementCursor,\n  hideElementCursor,\n} from '../../cursors/elementCursor';\nimport triggerAnnotationRenderForViewportIds from '../../utilities/triggerAnnotationRenderForViewportIds';\n\nimport { EventTypes, SVGDrawingHelper } from '../../types';\nimport { StyleSpecifier } from '../../types/AnnotationStyle';\nimport getWorldWidthAndHeightFromTwoPoints from '../../utilities/planar/getWorldWidthAndHeightFromTwoPoints';\nimport { VideoRedactionAnnotation } from '../../types/ToolSpecificAnnotationTypes';\n\nclass VideoRedactionTool extends AnnotationTool {\n  _throttledCalculateCachedStats: any;\n  editData: {\n    annotation: any;\n    viewportUIDsToRender: string[];\n    handleIndex?: number;\n    newAnnotation?: boolean;\n    hasMoved?: boolean;\n  } | null;\n  _configuration: any;\n  isDrawing: boolean;\n  isHandleOutsideImage: boolean;\n\n  constructor(toolConfiguration = {}) {\n    super(toolConfiguration, {\n      supportedInteractionTypes: ['Mouse', 'Touch'],\n      configuration: { shadow: true, preventHandleOutsideImage: false },\n    });\n\n    this._throttledCalculateCachedStats = throttle(\n      this._calculateCachedStats,\n      100,\n      { trailing: true }\n    );\n  }\n\n  addNewAnnotation = (\n    evt: EventTypes.InteractionEventType\n  ): VideoRedactionAnnotation => {\n    const eventData = evt.detail;\n    const { currentPoints, element } = eventData;\n    const worldPos = currentPoints.world;\n\n    const enabledElement = getEnabledElement(element);\n    const { viewport, renderingEngine } = enabledElement;\n\n    this.isDrawing = true;\n\n    const annotation = {\n      metadata: {\n        // We probably just want a different type of data here, hacking this\n        // together for now.\n        viewPlaneNormal: <Types.Point3>[0, 0, 1],\n        viewUp: <Types.Point3>[0, 1, 0],\n        FrameOfReferenceUID: viewport.getFrameOfReferenceUID(),\n        referencedImageId: viewport.getFrameOfReferenceUID(),\n        toolName: this.getToolName(),\n      },\n      data: {\n        invalidated: true,\n        handles: {\n          points: [\n            <Types.Point3>[...worldPos],\n            <Types.Point3>[...worldPos],\n            <Types.Point3>[...worldPos],\n            <Types.Point3>[...worldPos],\n          ],\n          activeHandleIndex: null,\n        },\n        cachedStats: {},\n        active: true,\n      },\n    };\n\n    addAnnotation(annotation, element);\n\n    const viewportUIDsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName(),\n      false\n    );\n\n    this.editData = {\n      annotation,\n      viewportUIDsToRender,\n      handleIndex: 3,\n      newAnnotation: true,\n      hasMoved: false,\n    };\n    this._activateDraw(element);\n\n    hideElementCursor(element);\n\n    evt.preventDefault();\n\n    triggerAnnotationRenderForViewportIds(\n      renderingEngine,\n      viewportUIDsToRender\n    );\n\n    return annotation;\n  };\n\n  getHandleNearImagePoint = (element, annotation, canvasCoords, proximity) => {\n    const enabledElement = getEnabledElement(element);\n    const { viewport } = enabledElement;\n\n    const { data } = annotation;\n    const { points } = data.handles;\n\n    for (let i = 0; i < points.length; i++) {\n      const point = points[i];\n      const toolDataCanvasCoordinate = viewport.worldToCanvas(point);\n\n      const near =\n        vec2.distance(canvasCoords, <vec2>toolDataCanvasCoordinate) < proximity;\n\n      if (near === true) {\n        data.handles.activeHandleIndex = i;\n        return point;\n      }\n    }\n\n    data.handles.activeHandleIndex = null;\n  };\n\n  isPointNearTool = (element, annotation, canvasCoords, proximity) => {\n    const enabledElement = getEnabledElement(element);\n    const { viewport } = enabledElement;\n\n    const { data } = annotation;\n    const { points } = data.handles;\n\n    const canvasPoint1 = viewport.worldToCanvas(points[0]);\n    const canvasPoint2 = viewport.worldToCanvas(points[3]);\n\n    const rect = this._getRectangleImageCoordinates([\n      canvasPoint1,\n      canvasPoint2,\n    ]);\n\n    const point = [canvasCoords[0], canvasCoords[1]] as Types.Point2;\n    const { left, top, width, height } = rect;\n\n    const distanceToPoint = rectangle.distanceToPoint(\n      [left, top, width, height],\n      point\n    );\n\n    if (distanceToPoint <= proximity) {\n      return true;\n    }\n  };\n\n  toolSelectedCallback = (evt, annotation, interactionType = 'mouse') => {\n    const eventData = evt.detail;\n    const { element } = eventData;\n\n    const { data } = annotation;\n\n    data.active = true;\n\n    const viewportUIDsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName(),\n      false\n    );\n\n    this.editData = {\n      annotation,\n      viewportUIDsToRender,\n    };\n\n    this._activateModify(element);\n\n    hideElementCursor(element);\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    triggerAnnotationRenderForViewportIds(\n      renderingEngine,\n      viewportUIDsToRender\n    );\n\n    evt.preventDefault();\n  };\n\n  handleSelectedCallback = (\n    evt,\n    annotation,\n    handle,\n    interactionType = 'mouse'\n  ) => {\n    const eventData = evt.detail;\n    const { element } = eventData;\n    const { data } = annotation;\n\n    data.active = true;\n\n    let movingTextBox = false;\n    let handleIndex;\n\n    if (handle.worldPosition) {\n      movingTextBox = true;\n    } else {\n      handleIndex = data.handles.points.findIndex((p) => p === handle);\n    }\n\n    // Find viewports to render on drag.\n    const viewportUIDsToRender = getViewportIdsWithToolToRender(\n      element,\n      this.getToolName(),\n      false\n    );\n\n    this.editData = {\n      annotation,\n      viewportUIDsToRender,\n      handleIndex,\n    };\n    this._activateModify(element);\n\n    hideElementCursor(element);\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    triggerAnnotationRenderForViewportIds(\n      renderingEngine,\n      viewportUIDsToRender\n    );\n\n    evt.preventDefault();\n  };\n\n  _mouseUpCallback = (evt) => {\n    const eventData = evt.detail;\n    const { element } = eventData;\n\n    const { annotation, viewportUIDsToRender, newAnnotation, hasMoved } =\n      this.editData;\n    const { data } = annotation;\n\n    if (newAnnotation && !hasMoved) {\n      return;\n    }\n\n    data.active = false;\n    data.handles.activeHandleIndex = null;\n\n    this._deactivateModify(element);\n    this._deactivateDraw(element);\n\n    resetElementCursor(element);\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    this.editData = null;\n    this.isDrawing = false;\n\n    if (\n      this.isHandleOutsideImage &&\n      this.configuration.preventHandleOutsideImage\n    ) {\n      removeAnnotation(annotation.annotationUID);\n    }\n\n    triggerAnnotationRenderForViewportIds(\n      renderingEngine,\n      viewportUIDsToRender\n    );\n  };\n\n  _mouseDragCallback = (evt) => {\n    this.isDrawing = true;\n\n    const eventData = evt.detail;\n    const { element } = eventData;\n\n    const { annotation, viewportUIDsToRender, handleIndex } = this.editData;\n    const { data } = annotation;\n\n    if (handleIndex === undefined) {\n      // Moving tool, so move all points by the world points delta\n      const { deltaPoints } = eventData;\n      const worldPosDelta = deltaPoints.world;\n\n      const { points } = data.handles;\n\n      points.forEach((point) => {\n        point[0] += worldPosDelta[0];\n        point[1] += worldPosDelta[1];\n        point[2] += worldPosDelta[2];\n      });\n      data.invalidated = true;\n    } else {\n      // Moving handle.\n      const { currentPoints } = eventData;\n      const enabledElement = getEnabledElement(element);\n      const { worldToCanvas, canvasToWorld } = enabledElement.viewport;\n      const worldPos = currentPoints.world;\n\n      const { points } = data.handles;\n\n      // Move this handle.\n      points[handleIndex] = [...worldPos];\n\n      let bottomLeftCanvas;\n      let bottomRightCanvas;\n      let topLeftCanvas;\n      let topRightCanvas;\n\n      let bottomLeftWorld;\n      let bottomRightWorld;\n      let topLeftWorld;\n      let topRightWorld;\n\n      switch (handleIndex) {\n        case 0:\n        case 3:\n          // Moving bottomLeft or topRight\n\n          bottomLeftCanvas = worldToCanvas(points[0]);\n          topRightCanvas = worldToCanvas(points[3]);\n\n          bottomRightCanvas = [topRightCanvas[0], bottomLeftCanvas[1]];\n          topLeftCanvas = [bottomLeftCanvas[0], topRightCanvas[1]];\n\n          bottomRightWorld = canvasToWorld(bottomRightCanvas);\n          topLeftWorld = canvasToWorld(topLeftCanvas);\n\n          points[1] = bottomRightWorld;\n          points[2] = topLeftWorld;\n\n          break;\n        case 1:\n        case 2:\n          // Moving bottomRight or topLeft\n          bottomRightCanvas = worldToCanvas(points[1]);\n          topLeftCanvas = worldToCanvas(points[2]);\n\n          bottomLeftCanvas = <Types.Point2>[\n            topLeftCanvas[0],\n            bottomRightCanvas[1],\n          ];\n          topRightCanvas = <Types.Point2>[\n            bottomRightCanvas[0],\n            topLeftCanvas[1],\n          ];\n\n          bottomLeftWorld = canvasToWorld(bottomLeftCanvas);\n          topRightWorld = canvasToWorld(topRightCanvas);\n\n          points[0] = bottomLeftWorld;\n          points[3] = topRightWorld;\n\n          break;\n      }\n      data.invalidated = true;\n    }\n\n    this.editData.hasMoved = true;\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    triggerAnnotationRenderForViewportIds(\n      renderingEngine,\n      viewportUIDsToRender\n    );\n  };\n\n  cancel(element) {\n    // If it is mid-draw or mid-modify\n    if (!this.isDrawing) {\n      return;\n    }\n    this.isDrawing = false;\n    this._deactivateDraw(element);\n    this._deactivateModify(element);\n    resetElementCursor(element);\n\n    const { annotation, viewportUIDsToRender } = this.editData;\n\n    const { data } = annotation;\n\n    data.active = false;\n    data.handles.activeHandleIndex = null;\n\n    const enabledElement = getEnabledElement(element);\n    const { renderingEngine } = enabledElement;\n\n    triggerAnnotationRenderForViewportIds(\n      renderingEngine,\n      viewportUIDsToRender\n    );\n\n    this.editData = null;\n    return annotation.metadata.annotationUID;\n  }\n  /**\n   * Add event handlers for the modify event loop, and prevent default event prapogation.\n   */\n  _activateDraw = (element) => {\n    state.isInteractingWithTool = true;\n\n    element.addEventListener(Events.MOUSE_UP, this._mouseUpCallback);\n    element.addEventListener(Events.MOUSE_DRAG, this._mouseDragCallback);\n    element.addEventListener(Events.MOUSE_MOVE, this._mouseDragCallback);\n    element.addEventListener(Events.MOUSE_CLICK, this._mouseUpCallback);\n\n    element.addEventListener(Events.TOUCH_END, this._mouseUpCallback);\n    element.addEventListener(Events.TOUCH_DRAG, this._mouseDragCallback);\n  };\n\n  /**\n   * Add event handlers for the modify event loop, and prevent default event prapogation.\n   */\n  _deactivateDraw = (element) => {\n    state.isInteractingWithTool = false;\n\n    element.removeEventListener(Events.MOUSE_UP, this._mouseUpCallback);\n    element.removeEventListener(Events.MOUSE_DRAG, this._mouseDragCallback);\n    element.removeEventListener(Events.MOUSE_MOVE, this._mouseDragCallback);\n    element.removeEventListener(Events.MOUSE_CLICK, this._mouseUpCallback);\n\n    element.removeEventListener(Events.TOUCH_END, this._mouseUpCallback);\n    element.removeEventListener(Events.TOUCH_DRAG, this._mouseDragCallback);\n  };\n\n  /**\n   * Add event handlers for the modify event loop, and prevent default event prapogation.\n   */\n  _activateModify = (element) => {\n    state.isInteractingWithTool = true;\n\n    element.addEventListener(Events.MOUSE_UP, this._mouseUpCallback);\n    element.addEventListener(Events.MOUSE_DRAG, this._mouseDragCallback);\n    element.addEventListener(Events.MOUSE_CLICK, this._mouseUpCallback);\n\n    element.addEventListener(Events.TOUCH_END, this._mouseUpCallback);\n    element.addEventListener(Events.TOUCH_DRAG, this._mouseDragCallback);\n  };\n\n  /**\n   * Remove event handlers for the modify event loop, and enable default event propagation.\n   */\n  _deactivateModify = (element) => {\n    state.isInteractingWithTool = false;\n\n    element.removeEventListener(Events.MOUSE_UP, this._mouseUpCallback);\n    element.removeEventListener(Events.MOUSE_DRAG, this._mouseDragCallback);\n    element.removeEventListener(Events.MOUSE_CLICK, this._mouseUpCallback);\n\n    element.removeEventListener(Events.TOUCH_END, this._mouseUpCallback);\n    element.removeEventListener(Events.TOUCH_DRAG, this._mouseDragCallback);\n  };\n\n  renderAnnotation = (\n    enabledElement: Types.IEnabledElement,\n    svgDrawingHelper: SVGDrawingHelper\n  ): boolean => {\n    const renderStatus = false;\n    const { viewport } = enabledElement;\n    const { element } = viewport;\n\n    let annotations = getAnnotations(this.getToolName(), element);\n\n    if (!annotations?.length) {\n      return renderStatus;\n    }\n\n    annotations = this.filterInteractableAnnotationsForElement(\n      element,\n      annotations\n    );\n\n    if (!annotations?.length) {\n      return renderStatus;\n    }\n\n    const targetId = this.getTargetId(viewport);\n    const renderingEngine = viewport.getRenderingEngine();\n\n    const styleSpecifier: StyleSpecifier = {\n      toolGroupId: this.toolGroupId,\n      toolName: this.getToolName(),\n      viewportId: enabledElement.viewport.id,\n    };\n\n    for (let i = 0; i < annotations.length; i++) {\n      const annotation = annotations[i];\n      const { annotationUID } = annotation;\n      const toolMetadata = annotation.metadata;\n\n      const data = annotation.data;\n      const { points, activeHandleIndex } = data.handles;\n      const canvasCoordinates = points.map((p) => viewport.worldToCanvas(p));\n\n      const lineWidth = this.getStyle('lineWidth', styleSpecifier, annotation);\n      const lineDash = this.getStyle('lineDash', styleSpecifier, annotation);\n      const color = this.getStyle('color', styleSpecifier, annotation);\n      // If rendering engine has been destroyed while rendering\n      if (!viewport.getRenderingEngine()) {\n        console.warn('Rendering Engine has been destroyed');\n        return;\n      }\n\n      let activeHandleCanvasCoords;\n\n      if (\n        // !isToolDataLocked(toolData) &&\n        !this.editData &&\n        activeHandleIndex !== null\n      ) {\n        // Not locked or creating and hovering over handle, so render handle.\n        activeHandleCanvasCoords = [canvasCoordinates[activeHandleIndex]];\n      }\n\n      if (activeHandleCanvasCoords) {\n        const handleGroupUID = '0';\n\n        drawHandlesSvg(\n          svgDrawingHelper,\n          annotationUID,\n          handleGroupUID,\n          activeHandleCanvasCoords,\n          {\n            color,\n          }\n        );\n      }\n\n      const rectangleUID = '0';\n      drawRedactionRectSvg(\n        svgDrawingHelper,\n        annotationUID,\n        rectangleUID,\n        canvasCoordinates[0],\n        canvasCoordinates[3],\n        {\n          color: 'black',\n          lineDash,\n          lineWidth,\n        }\n      );\n    }\n  };\n\n  _getRectangleImageCoordinates = (\n    points: Array<Types.Point2>\n  ): {\n    left: number;\n    top: number;\n    width: number;\n    height: number;\n  } => {\n    const [point0, point1] = points;\n\n    return {\n      left: Math.min(point0[0], point1[0]),\n      top: Math.min(point0[1], point1[1]),\n      width: Math.abs(point0[0] - point1[0]),\n      height: Math.abs(point0[1] - point1[1]),\n    };\n  };\n\n  _getImageVolumeFromTargetUID(targetUID, renderingEngine) {\n    let imageVolume, viewport;\n    if (targetUID.startsWith('stackTarget')) {\n      const coloneIndex = targetUID.indexOf(':');\n      const viewportUID = targetUID.substring(coloneIndex + 1);\n      const viewport = renderingEngine.getViewport(viewportUID);\n      imageVolume = viewport.getImageData();\n    } else {\n      imageVolume = cache.getVolume(targetUID);\n    }\n\n    return { imageVolume, viewport };\n  }\n\n  /**\n   * _calculateCachedStats - For each volume in the frame of reference that a\n   * tool instance in particular viewport defines as its target volume, find the\n   * volume coordinates (i,j,k) being probed by the two corners. One of i,j or k\n   * will be constant across the two points. In the other two directions iterate\n   * over the voxels and calculate the first and second-order statistics.\n   *\n   * @param {object} data - The toolData tool-specific data.\n   * @param {Array<number>} viewPlaneNormal The normal vector of the camera.\n   * @param {Array<number>} viewUp The viewUp vector of the camera.\n   */\n  _calculateCachedStats = (\n    annotation,\n    viewPlaneNormal,\n    viewUp,\n    renderingEngine,\n    enabledElement\n  ) => {\n    const { data } = annotation;\n    const { viewportUID, renderingEngineUID, sceneUID } = enabledElement;\n\n    const worldPos1 = data.handles.points[0];\n    const worldPos2 = data.handles.points[3];\n    const { cachedStats } = data;\n\n    const targetUIDs = Object.keys(cachedStats);\n\n    for (let i = 0; i < targetUIDs.length; i++) {\n      const targetUID = targetUIDs[i];\n\n      const { imageVolume } = this._getImageVolumeFromTargetUID(\n        targetUID,\n        renderingEngine\n      );\n\n      const {\n        dimensions,\n        scalarData,\n        vtkImageData: imageData,\n        metadata,\n      } = imageVolume;\n      const worldPos1Index = vec3.fromValues(0, 0, 0);\n      const worldPos2Index = vec3.fromValues(0, 0, 0);\n\n      imageData.worldToIndexVec3(worldPos1, worldPos1Index);\n\n      worldPos1Index[0] = Math.floor(worldPos1Index[0]);\n      worldPos1Index[1] = Math.floor(worldPos1Index[1]);\n      worldPos1Index[2] = Math.floor(worldPos1Index[2]);\n\n      imageData.worldToIndexVec3(worldPos2, worldPos2Index);\n\n      worldPos2Index[0] = Math.floor(worldPos2Index[0]);\n      worldPos2Index[1] = Math.floor(worldPos2Index[1]);\n      worldPos2Index[2] = Math.floor(worldPos2Index[2]);\n\n      // Check if one of the indexes are inside the volume, this then gives us\n      // Some area to do stats over.\n\n      if (this._isInsideVolume(worldPos1Index, worldPos2Index, dimensions)) {\n        this.isHandleOutsideImage = false;\n\n        // Calculate index bounds to iterate over\n\n        const iMin = Math.min(worldPos1Index[0], worldPos2Index[0]);\n        const iMax = Math.max(worldPos1Index[0], worldPos2Index[0]);\n\n        const jMin = Math.min(worldPos1Index[1], worldPos2Index[1]);\n        const jMax = Math.max(worldPos1Index[1], worldPos2Index[1]);\n\n        const kMin = Math.min(worldPos1Index[2], worldPos2Index[2]);\n        const kMax = Math.max(worldPos1Index[2], worldPos2Index[2]);\n\n        const { worldWidth, worldHeight } = getWorldWidthAndHeightFromTwoPoints(\n          viewPlaneNormal,\n          viewUp,\n          worldPos1,\n          worldPos2\n        );\n\n        const area = worldWidth * worldHeight;\n\n        let count = 0;\n        let mean = 0;\n        let stdDev = 0;\n\n        const yMultiple = dimensions[0];\n        const zMultiple = dimensions[0] * dimensions[1];\n\n        // This is a triple loop, but one of these 3 values will be constant\n        // In the planar view.\n        for (let k = kMin; k <= kMax; k++) {\n          for (let j = jMin; j <= jMax; j++) {\n            for (let i = iMin; i <= iMax; i++) {\n              const value = scalarData[k * zMultiple + j * yMultiple + i];\n\n              count++;\n              mean += value;\n            }\n          }\n        }\n\n        mean /= count;\n\n        for (let k = kMin; k <= kMax; k++) {\n          for (let j = jMin; j <= jMax; j++) {\n            for (let i = iMin; i <= iMax; i++) {\n              const value = scalarData[k * zMultiple + j * yMultiple + i];\n\n              const valueMinusMean = value - mean;\n\n              stdDev += valueMinusMean * valueMinusMean;\n            }\n          }\n        }\n\n        stdDev /= count;\n        stdDev = Math.sqrt(stdDev);\n\n        cachedStats[targetUID] = {\n          Modality: metadata.Modality,\n          area,\n          mean,\n          stdDev,\n        };\n      } else {\n        this.isHandleOutsideImage = true;\n        cachedStats[targetUID] = {\n          Modality: metadata.Modality,\n        };\n      }\n    }\n\n    data.invalidated = false;\n\n    // Dispatching measurement modified\n    const eventType = Events.ANNOTATION_MODIFIED;\n\n    const eventDetail = {\n      annotation,\n      viewportUID,\n      renderingEngineUID,\n      sceneUID: sceneUID,\n    };\n    triggerEvent(eventTarget, eventType, eventDetail);\n\n    return cachedStats;\n  };\n\n  _isInsideVolume = (index1, index2, dimensions) => {\n    return (\n      csUtils.indexWithinDimensions(index1, dimensions) &&\n      csUtils.indexWithinDimensions(index2, dimensions)\n    );\n  };\n\n  _getTargetStackUID(viewport) {\n    return `stackTarget:${viewport.uid}`;\n  }\n\n  _getTargetVolumeUID = (scene) => {\n    if (this.configuration.volumeUID) {\n      return this.configuration.volumeUID;\n    }\n\n    const volumeActors = scene.getVolumeActors();\n\n    if (!volumeActors && !volumeActors.length) {\n      // No stack to scroll through\n      return;\n    }\n\n    return volumeActors[0].uid;\n  };\n}\n\nVideoRedactionTool.toolName = 'VideoRedaction';\nexport default VideoRedactionTool;\n","import _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\n\nvar EdgeLocator = /*#__PURE__*/function () {\n  function EdgeLocator() {\n    var oriented = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n    _classCallCheck(this, EdgeLocator);\n\n    this.oriented = oriented;\n    this.edgeMap = new Map();\n  }\n\n  _createClass(EdgeLocator, [{\n    key: \"initialize\",\n    value: function initialize() {\n      this.edgeMap.clear();\n    }\n  }, {\n    key: \"computeEdgeKey\",\n    value: function computeEdgeKey(pointId0, pointId1) {\n      return this.oriented || pointId0 < pointId1 ? // Cantor pairing function:\n      0.5 * (pointId0 * pointId1) * (pointId0 * pointId1 + 1) + pointId1 : 0.5 * (pointId1 * pointId0) * (pointId1 * pointId0 + 1) + pointId0;\n    }\n  }, {\n    key: \"insertUniqueEdge\",\n    value: function insertUniqueEdge(pointId0, pointId1, newEdgeValue) {\n      // Generate a unique key\n      var key = this.computeEdgeKey(pointId0, pointId1);\n      var node = this.edgeMap.get(key);\n\n      if (!node) {\n        // Didn't find key, so add a new edge entry\n        node = {\n          key: key,\n          edgeId: this.edgeMap.size,\n          value: newEdgeValue\n        };\n        this.edgeMap.set(key, node);\n      }\n\n      return node;\n    }\n  }, {\n    key: \"insertEdge\",\n    value: function insertEdge(pointId0, pointId1, newEdgeValue) {\n      // Generate a unique key\n      var key = this.computeEdgeKey(pointId0, pointId1);\n      var node = {\n        key: key,\n        edgeId: this.edgeMap.size,\n        value: newEdgeValue\n      };\n      this.edgeMap.set(key, node);\n      return node;\n    }\n  }, {\n    key: \"isInsertedEdge\",\n    value: function isInsertedEdge(pointId0, pointId1) {\n      var key = this.computeEdgeKey(pointId0, pointId1);\n      return this.edgeMap.get(key);\n    }\n  }], [{\n    key: \"getEdgePointIds\",\n    value: function getEdgePointIds(node) {\n      var n = 0.5 * (-1 + Math.sqrt(8 * node.key + 1));\n      var pointId0 = node.key - 0.5 * (n + 1) * n;\n      var pointId1 = n - pointId0;\n      return [pointId0, pointId1];\n    }\n  }]);\n\n  return EdgeLocator;\n}();\n\nfunction newInstance() {\n  var initialValues = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return new EdgeLocator(initialValues.oriented);\n}\n\nvar vtkEdgeLocator = {\n  newInstance: newInstance\n};\n\nexport { vtkEdgeLocator as default };\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    symbolTag = '[object Symbol]';\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/,\n    reLeadingDot = /^\\./,\n    rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    splice = arrayProto.splice;\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = isKey(path, object) ? [path] : castPath(path);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value) {\n  return isArray(value) ? value : stringToPath(value);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoize(function(string) {\n  string = toString(string);\n\n  var result = [];\n  if (reLeadingDot.test(string)) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, string) {\n    result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result);\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Assign cache to `_.memoize`.\nmemoize.Cache = MapCache;\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.xmlbuilder2=t():e.xmlbuilder2=t()}(this,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=184)}([function(e,t,r){\"use strict\";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,\"__esModule\",{value:!0}),n(r(240)),n(r(251)),n(r(175)),n(r(107)),n(r(29)),n(r(73)),n(r(106)),n(r(30)),n(r(252)),n(r(52)),n(r(97)),n(r(253)),n(r(37)),n(r(51)),n(r(173)),n(r(176)),n(r(172)),n(r(108)),n(r(254)),n(r(255)),n(r(256)),n(r(72)),n(r(177)),n(r(105)),n(r(17)),n(r(257)),n(r(12)),n(r(174))},function(e,t,r){\"use strict\";var n=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")};Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(212);t.FixedSizeSet=i.FixedSizeSet;var o=r(213);t.ObjectCache=o.ObjectCache;var a=r(214);t.CompareCache=a.CompareCache;var s=r(215);t.Lazy=s.Lazy;var u=r(216);function l(e,t,r){if(m(e))e.forEach((function(e,n){return t.call(r,n,e)}));else for(var n in e)e.hasOwnProperty(n)&&t.call(r,n,e[n])}function c(e){var t,r;if(h(e))return e;if(f(e)){var i=[];try{for(var o=n(e),a=o.next();!a.done;a=o.next()){var s=a.value;i.push(c(s))}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i}if(p(e)){i={};for(var u in e)if(e.hasOwnProperty(u)){var l=e[u];i[u]=c(l)}return i}return e}function h(e){return!!e&&\"[object Function]\"===Object.prototype.toString.call(e)}function p(e){var t=typeof e;return!!e&&(\"function\"===t||\"object\"===t)}function f(e){return Array.isArray(e)}function d(e){return e instanceof Set}function m(e){return e instanceof Map}function y(e){if(p(e)){var t=Object.getPrototypeOf(e),r=t.constructor;return t&&r&&\"function\"==typeof r&&r instanceof r&&Function.prototype.toString.call(r)===Function.prototype.toString.call(Object)}return!1}t.StringWalker=u.StringWalker,t.applyMixin=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];Object.getOwnPropertyNames(t.prototype).forEach((function(n){if(\"constructor\"!==n){if(-1!==r.indexOf(n)){var i=Object.getOwnPropertyDescriptor(e.prototype,n);i&&Object.defineProperty(e.prototype,\"_\"+n,i)}var o=Object.getOwnPropertyDescriptor(t.prototype,n);o&&Object.defineProperty(e.prototype,n,o)}}))},t.applyDefaults=function e(t,r,n){void 0===n&&(n=!1);var i=c(t||{});return l(r,(function(t,r){y(r)?i[t]=e(i[t],r,n):(n||void 0===i[t])&&(i[t]=r)})),i},t.forEachArray=function(e,t,r){e.forEach(t,r)},t.forEachObject=l,t.arrayLength=function(e){return d(e)?e.size:e.length},t.objectLength=function(e){return m(e)?e.size:Object.keys(e).length},t.getObjectValue=function(e,t){return m(e)?e.get(t):e[t]},t.removeObjectValue=function(e,t){m(e)?e.delete(t):delete e[t]},t.clone=c,t.isBoolean=function(e){return\"boolean\"==typeof e},t.isNumber=function(e){return\"number\"==typeof e},t.isString=function(e){return\"string\"==typeof e},t.isFunction=h,t.isObject=p,t.isArray=f,t.isSet=d,t.isMap=m,t.isEmpty=function(e){if(f(e))return!e.length;if(d(e))return!e.size;if(m(e))return!e.size;if(p(e)){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}return!1},t.isPlainObject=y,t.isIterable=function(e){return e&&\"function\"==typeof e[Symbol.iterator]},t.getValue=function(e){return h(e.valueOf)?e.valueOf():e},t.utf8Encode=function(e){for(var t=new Uint8Array(4*e.length),r=0,n=0;n<e.length;n++){var i=e.charCodeAt(n);if(i<128)t[r++]=i;else{if(i<2048)t[r++]=i>>6|192;else{if(i>55295&&i<56320){if(++n>=e.length)throw new Error(\"Incomplete surrogate pair.\");var o=e.charCodeAt(n);if(o<56320||o>57343)throw new Error(\"Invalid surrogate character.\");i=65536+((1023&i)<<10)+(1023&o),t[r++]=i>>18|240,t[r++]=i>>12&63|128}else t[r++]=i>>12|224;t[r++]=i>>6&63|128}t[r++]=63&i|128}}return t.subarray(0,r)},t.utf8Decode=function(e){for(var t=\"\",r=0;r<e.length;){var n=e[r++];if(n>127)if(n>191&&n<224){if(r>=e.length)throw new Error(\"Incomplete 2-byte sequence.\");n=(31&n)<<6|63&e[r++]}else if(n>223&&n<240){if(r+1>=e.length)throw new Error(\"Incomplete 3-byte sequence.\");n=(15&n)<<12|(63&e[r++])<<6|63&e[r++]}else{if(!(n>239&&n<248))throw new Error(\"Unknown multi-byte start.\");if(r+2>=e.length)throw new Error(\"Incomplete 4-byte sequence.\");n=(7&n)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++]}if(n<=65535)t+=String.fromCharCode(n);else{if(!(n<=1114111))throw new Error(\"Code point exceeds UTF-16 limit.\");n-=65536,t+=String.fromCharCode(n>>10|55296),t+=String.fromCharCode(1023&n|56320)}}return t}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){e[e.Before=0]=\"Before\",e[e.Equal=1]=\"Equal\",e[e.After=2]=\"After\"}(t.BoundaryPosition||(t.BoundaryPosition={})),function(e){e[e.None=0]=\"None\",e[e.Capturing=1]=\"Capturing\",e[e.AtTarget=2]=\"AtTarget\",e[e.Bubbling=3]=\"Bubbling\"}(t.EventPhase||(t.EventPhase={})),function(e){e[e.Element=1]=\"Element\",e[e.Attribute=2]=\"Attribute\",e[e.Text=3]=\"Text\",e[e.CData=4]=\"CData\",e[e.EntityReference=5]=\"EntityReference\",e[e.Entity=6]=\"Entity\",e[e.ProcessingInstruction=7]=\"ProcessingInstruction\",e[e.Comment=8]=\"Comment\",e[e.Document=9]=\"Document\",e[e.DocumentType=10]=\"DocumentType\",e[e.DocumentFragment=11]=\"DocumentFragment\",e[e.Notation=12]=\"Notation\"}(t.NodeType||(t.NodeType={})),function(e){e[e.Disconnected=1]=\"Disconnected\",e[e.Preceding=2]=\"Preceding\",e[e.Following=4]=\"Following\",e[e.Contains=8]=\"Contains\",e[e.ContainedBy=16]=\"ContainedBy\",e[e.ImplementationSpecific=32]=\"ImplementationSpecific\"}(t.Position||(t.Position={})),function(e){e[e.Accept=1]=\"Accept\",e[e.Reject=2]=\"Reject\",e[e.Skip=3]=\"Skip\"}(t.FilterResult||(t.FilterResult={})),function(e){e[e.All=4294967295]=\"All\",e[e.Element=1]=\"Element\",e[e.Attribute=2]=\"Attribute\",e[e.Text=4]=\"Text\",e[e.CDataSection=8]=\"CDataSection\",e[e.EntityReference=16]=\"EntityReference\",e[e.Entity=32]=\"Entity\",e[e.ProcessingInstruction=64]=\"ProcessingInstruction\",e[e.Comment=128]=\"Comment\",e[e.Document=256]=\"Document\",e[e.DocumentType=512]=\"DocumentType\",e[e.DocumentFragment=1024]=\"DocumentFragment\",e[e.Notation=2048]=\"Notation\"}(t.WhatToShow||(t.WhatToShow={})),function(e){e[e.StartToStart=0]=\"StartToStart\",e[e.StartToEnd=1]=\"StartToEnd\",e[e.EndToEnd=2]=\"EndToEnd\",e[e.EndToStart=3]=\"EndToStart\"}(t.HowToCompare||(t.HowToCompare={}))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(241);t.Cast=n.Cast;var i=r(150);t.Guard=i.Guard;var o=r(242);t.EmptySet=o.EmptySet},function(e,t,r){var n=r(11),i=r(55).f,o=r(21),a=r(25),s=r(80),u=r(119),l=r(123);e.exports=function(e,t){var r,c,h,p,f,d=e.target,m=e.global,y=e.stat;if(r=m?n:y?n[d]||s(d,{}):(n[d]||{}).prototype)for(c in t){if(p=t[c],h=e.noTargetGet?(f=i(r,c))&&f.value:r[c],!l(m?c:d+(y?\".\":\"#\")+c,e.forced)&&void 0!==h){if(typeof p==typeof h)continue;u(p,h)}(e.sham||h&&h.sham)&&o(p,\"sham\",!0),a(r,c,p,e)}}},function(e,t,r){var n=r(11),i=r(81),o=r(14),a=r(58),s=r(86),u=r(124),l=i(\"wks\"),c=n.Symbol,h=u?c:c&&c.withoutSetter||a;e.exports=function(e){return o(l,e)||(s&&o(c,e)?l[e]=c[e]:l[e]=h(\"Symbol.\"+e)),l[e]}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(1),i=r(29),o=function(){function e(){this._features={mutationObservers:!0,customElements:!0,slots:!0,steps:!0},this._window=null,this._compareCache=new n.CompareCache,this._rangeList=new n.FixedSizeSet}return e.prototype.setFeatures=function(e){if(void 0===e&&(e=!0),n.isObject(e))for(var t in e)this._features[t]=e[t]||!1;else for(var t in this._features)this._features[t]=e},Object.defineProperty(e.prototype,\"features\",{get:function(){return this._features},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"window\",{get:function(){return null===this._window&&(this._window=i.create_window()),this._window},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"compareCache\",{get:function(){return this._compareCache},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"rangeList\",{get:function(){return this._rangeList},enumerable:!0,configurable:!0}),Object.defineProperty(e,\"instance\",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e}();t.dom=o.instance},function(e,t,r){\"use strict\";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,\"__esModule\",{value:!0});var i=n(r(228));t.base64=i;var o=n(r(146));t.byte=o;var a=n(r(147));t.byteSequence=a;var s=n(r(96));t.codePoint=s;var u=n(r(232));t.json=u;var l=n(r(233));t.list=l;var c=n(r(234));t.map=c;var h=n(r(235));t.namespace=h;var p=n(r(236));t.queue=p;var f=n(r(237));t.set=f;var d=n(r(238));t.stack=d;var m=n(r(239));t.string=m},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,r){\"use strict\";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=function(e){function t(t,r){void 0===r&&(r=\"\");var n=e.call(this,r)||this;return n.name=t,n}return i(t,e),t}(Error);t.DOMException=o;var a=function(e){function t(t){return void 0===t&&(t=\"\"),e.call(this,\"DOMStringSizeError\",t)||this}return i(t,e),t}(o);t.DOMStringSizeError=a;var s=function(e){function t(t){return void 0===t&&(t=\"\"),e.call(this,\"WrongDocumentError\",\"The object is in the wrong document. \"+t)||this}return i(t,e),t}(o);t.WrongDocumentError=s;var u=function(e){function t(t){return void 0===t&&(t=\"\"),e.call(this,\"NoDataAllowedError\",t)||this}return i(t,e),t}(o);t.NoDataAllowedError=u;var l=function(e){function t(t){return void 0===t&&(t=\"\"),e.call(this,\"NoModificationAllowedError\",\"The object can not be modified. \"+t)||this}return i(t,e),t}(o);t.NoModificationAllowedError=l;var c=function(e){function t(t){return void 0===t&&(t=\"\"),e.call(this,\"NotSupportedError\",\"The operation is not supported. \"+t)||this}return i(t,e),t}(o);t.NotSupportedError=c;var h=function(e){function t(t){return void 0===t&&(t=\"\"),e.call(this,\"InUseAttributeError\",t)||this}return i(t,e),t}(o);t.InUseAttributeError=h;var p=function(e){function t(t){return void 0===t&&(t=\"\"),e.call(this,\"InvalidStateError\",\"The object is in an invalid state. \"+t)||this}return i(t,e),t}(o);t.InvalidStateError=p;var f=function(e){function t(t){return void 0===t&&(t=\"\"),e.call(this,\"InvalidModificationError\",\"The object can not be modified in this way. \"+t)||this}return i(t,e),t}(o);t.InvalidModificationError=f;var d=function(e){function t(t){return void 0===t&&(t=\"\"),e.call(this,\"NamespaceError\",\"The operation is not allowed by Namespaces in XML. [XMLNS] \"+t)||this}return i(t,e),t}(o);t.NamespaceError=d;var m=function(e){function t(t){return void 0===t&&(t=\"\"),e.call(this,\"InvalidAccessError\",\"The object does not support the operation or argument. \"+t)||this}return i(t,e),t}(o);t.InvalidAccessError=m;var y=function(e){function t(t){return void 0===t&&(t=\"\"),e.call(this,\"ValidationError\",t)||this}return i(t,e),t}(o);t.ValidationError=y;var v=function(e){function t(t){return void 0===t&&(t=\"\"),e.call(this,\"TypeMismatchError\",t)||this}return i(t,e),t}(o);t.TypeMismatchError=v;var _=function(e){function t(t){return void 0===t&&(t=\"\"),e.call(this,\"SecurityError\",\"The operation is insecure. \"+t)||this}return i(t,e),t}(o);t.SecurityError=_;var g=function(e){function t(t){return void 0===t&&(t=\"\"),e.call(this,\"NetworkError\",\"A network error occurred. \"+t)||this}return i(t,e),t}(o);t.NetworkError=g;var b=function(e){function t(t){return void 0===t&&(t=\"\"),e.call(this,\"AbortError\",\"The operation was aborted. \"+t)||this}return i(t,e),t}(o);t.AbortError=b;var x=function(e){function t(t){return void 0===t&&(t=\"\"),e.call(this,\"URLMismatchError\",\"The given URL does not match another URL. \"+t)||this}return i(t,e),t}(o);t.URLMismatchError=x;var w=function(e){function t(t){return void 0===t&&(t=\"\"),e.call(this,\"QuotaExceededError\",\"The quota has been exceeded. \"+t)||this}return i(t,e),t}(o);t.QuotaExceededError=w;var E=function(e){function t(t){return void 0===t&&(t=\"\"),e.call(this,\"TimeoutError\",\"The operation timed out. \"+t)||this}return i(t,e),t}(o);t.TimeoutError=E;var D=function(e){function t(t){return void 0===t&&(t=\"\"),e.call(this,\"InvalidNodeTypeError\",\"The supplied node is incorrect or has an incorrect ancestor for this operation. \"+t)||this}return i(t,e),t}(o);t.InvalidNodeTypeError=D;var S=function(e){function t(t){return void 0===t&&(t=\"\"),e.call(this,\"DataCloneError\",\"The object can not be cloned. \"+t)||this}return i(t,e),t}(o);t.DataCloneError=S;var C=function(e){function t(t){return void 0===t&&(t=\"\"),e.call(this,\"NotImplementedError\",\"The DOM method is not implemented by this module. \"+t)||this}return i(t,e),t}(o);t.NotImplementedError=C;var A=function(e){function t(t){return void 0===t&&(t=\"\"),e.call(this,\"HierarchyRequestError\",\"The operation would yield an incorrect node tree. \"+t)||this}return i(t,e),t}(o);t.HierarchyRequestError=A;var N=function(e){function t(t){return void 0===t&&(t=\"\"),e.call(this,\"NotFoundError\",\"The object can not be found here. \"+t)||this}return i(t,e),t}(o);t.NotFoundError=N;var T=function(e){function t(t){return void 0===t&&(t=\"\"),e.call(this,\"IndexSizeError\",\"The index is not in the allowed range. \"+t)||this}return i(t,e),t}(o);t.IndexSizeError=T;var O=function(e){function t(t){return void 0===t&&(t=\"\"),e.call(this,\"SyntaxError\",\"The string did not match the expected pattern. \"+t)||this}return i(t,e),t}(o);t.SyntaxError=O;var F=function(e){function t(t){return void 0===t&&(t=\"\"),e.call(this,\"InvalidCharacterError\",\"The string contains invalid characters. \"+t)||this}return i(t,e),t}(o);t.InvalidCharacterError=F},function(e,t,r){\"use strict\";var n=r(53),i=[\"kind\",\"resolve\",\"construct\",\"instanceOf\",\"predicate\",\"represent\",\"defaultStyle\",\"styleAliases\"],o=[\"scalar\",\"sequence\",\"mapping\"];e.exports=function(e,t){var r,a;if(t=t||{},Object.keys(t).forEach((function(t){if(-1===i.indexOf(t))throw new n('Unknown option \"'+t+'\" is met in definition of \"'+e+'\" YAML type.')})),this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.defaultStyle=t.defaultStyle||null,this.styleAliases=(r=t.styleAliases||null,a={},null!==r&&Object.keys(r).forEach((function(e){r[e].forEach((function(t){a[String(t)]=e}))})),a),-1===o.indexOf(this.kind))throw new n('Unknown kind \"'+this.kind+'\" is specified for \"'+e+'\" YAML type.')}},function(e,t,r){(function(t){var r=function(e){return e&&e.Math==Math&&e};e.exports=r(\"object\"==typeof globalThis&&globalThis)||r(\"object\"==typeof window&&window)||r(\"object\"==typeof self&&self)||r(\"object\"==typeof t&&t)||Function(\"return this\")()}).call(this,r(78))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.idl_defineConst=function(e,t,r){Object.defineProperty(e,t,{writable:!1,enumerable:!0,configurable:!1,value:r})}},function(e,t){e.exports=function(e){return\"object\"==typeof e?null!==e:\"function\"==typeof e}},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){var n=r(16),i=r(115),o=r(18),a=r(56),s=Object.defineProperty;t.f=n?s:function(e,t,r){if(o(e),t=a(t,!0),o(r),i)try{return s(e,t,r)}catch(e){}if(\"get\"in r||\"set\"in r)throw TypeError(\"Accessors not supported\");return\"value\"in r&&(e[t]=r.value),e}},function(e,t,r){var n=r(8);e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,t,r){\"use strict\";var n=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")};Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(3),o=r(2);function a(e,t,r){if(void 0===r&&(r=!1),r&&i.Guard.isElementNode(t)&&i.Guard.isShadowRoot(t.shadowRoot)&&t.shadowRoot._firstChild)return t.shadowRoot._firstChild;if(t._firstChild)return t._firstChild;if(t===e)return null;if(t._nextSibling)return t._nextSibling;for(var n=t._parent;n&&n!==e;){if(n._nextSibling)return n._nextSibling;n=n._parent}return null}function s(){var e;return(e={})[Symbol.iterator]=function(){return{next:function(){return{done:!0,value:null}}}},e}function u(e,t,r,n){void 0===t&&(t=!1),void 0===r&&(r=!1);for(var i=t?e:a(e,e,r);i&&n&&!n(i);)i=a(e,i,r);return i}function l(e,t,r,n,i){void 0===r&&(r=!1),void 0===n&&(n=!1);for(var o=a(e,t,n);o&&i&&!i(o);)o=a(e,o,n);return o}function c(e,t,r,n){var i;return void 0===t&&(t=!1),void 0===r&&(r=!1),t||0!==e._children.size?((i={})[Symbol.iterator]=function(){var i=t?e:a(e,e,r);return{next:function(){for(;i&&n&&!n(i);)i=a(e,i,r);if(null===i)return{done:!0,value:null};var t={done:!1,value:i};return i=a(e,i,r),t}}},i):s()}function h(e,t,r){void 0===t&&(t=!1);for(var n=t?e:e._parent;n&&r&&!r(n);)n=n._parent;return n}function p(e,t,r,n){void 0===r&&(r=!1);for(var i=t._parent;i&&n&&!n(i);)i=i._parent;return i}function f(e){return i.Guard.isDocumentTypeNode(e)?0:i.Guard.isCharacterDataNode(e)?e._data.length:e._children.size}function d(e,t){if(void 0===t&&(t=!1),t){var r=d(e,!1);return i.Guard.isShadowRoot(r)?d(r._host,!0):r}return e._parent?d(e._parent):e}function m(e,t,r,n){void 0===r&&(r=!1),void 0===n&&(n=!1);for(var o=r?e:n&&i.Guard.isShadowRoot(e)?e._host:e._parent;null!==o;){if(o===t)return!0;o=n&&i.Guard.isShadowRoot(o)?o._host:o._parent}return!1}function y(e){for(var t=d(e),r=0,n=u(t);null!==n;){if(r++,n===e)return r;n=l(t,n)}return-1}t.tree_getFirstDescendantNode=u,t.tree_getNextDescendantNode=l,t.tree_getDescendantNodes=c,t.tree_getDescendantElements=function(e,t,r,n){var o;return void 0===t&&(t=!1),void 0===r&&(r=!1),t||0!==e._children.size?((o={})[Symbol.iterator]=function(){var o=c(e,t,r,(function(e){return i.Guard.isElementNode(e)}))[Symbol.iterator](),a=o.next().value;return{next:function(){for(;a&&n&&!n(a);)a=o.next().value;if(null===a)return{done:!0,value:null};var e={done:!1,value:a};return a=o.next().value,e}}},o):s()},t.tree_getSiblingNodes=function(e,t,r){var n;return void 0===t&&(t=!1),e._parent&&0!==e._parent._children.size?((n={})[Symbol.iterator]=function(){var n=e._parent?e._parent._firstChild:null;return{next:function(){for(;n&&(r&&!r(n)||!t&&n===e);)n=n._nextSibling;if(null===n)return{done:!0,value:null};var i={done:!1,value:n};return n=n._nextSibling,i}}},n):s()},t.tree_getFirstAncestorNode=h,t.tree_getNextAncestorNode=p,t.tree_getAncestorNodes=function(e,t,r){var n;return void 0===t&&(t=!1),t||e._parent?((n={})[Symbol.iterator]=function(){var n=h(e,t,r);return{next:function(){if(null===n)return{done:!0,value:null};var e={done:!1,value:n};return n=p(0,n,t,r),e}}},n):s()},t.tree_getCommonAncestor=function(e,t){if(e===t)return e._parent;for(var r=[],n=[],i=h(e,!0);null!==i;)r.push(i),i=p(0,i,!0);for(var o=h(t,!0);null!==o;)n.push(o),o=p(0,o,!0);for(var a=r.length,s=n.length,u=null,l=Math.min(a,s);l>0;l--){var c=r[--a];if(c!==n[--s])break;u=c}return u},t.tree_getFollowingNode=function(e,t){if(t._firstChild)return t._firstChild;if(t._nextSibling)return t._nextSibling;for(;;){var r=t._parent;if(null===r||r===e)return null;if(r._nextSibling)return r._nextSibling;t=r}},t.tree_getPrecedingNode=function(e,t){return t===e?null:t._previousSibling?(t=t._previousSibling)._lastChild?t._lastChild:t:t._parent},t.tree_isConstrained=function e(t){var r,i,a,s,u,l;switch(t._nodeType){case o.NodeType.Document:var c=!1,h=!1;try{for(var p=n(t._children),f=p.next();!f.done;f=p.next()){switch(f.value._nodeType){case o.NodeType.ProcessingInstruction:case o.NodeType.Comment:break;case o.NodeType.DocumentType:if(c||h)return!1;c=!0;break;case o.NodeType.Element:if(h)return!1;h=!0;break;default:return!1}}}catch(e){r={error:e}}finally{try{f&&!f.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}break;case o.NodeType.DocumentFragment:case o.NodeType.Element:try{for(var d=n(t._children),m=d.next();!m.done;m=d.next()){switch(m.value._nodeType){case o.NodeType.Element:case o.NodeType.Text:case o.NodeType.ProcessingInstruction:case o.NodeType.CData:case o.NodeType.Comment:break;default:return!1}}}catch(e){a={error:e}}finally{try{m&&!m.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}break;case o.NodeType.DocumentType:case o.NodeType.Text:case o.NodeType.ProcessingInstruction:case o.NodeType.CData:case o.NodeType.Comment:return!t.hasChildNodes()}try{for(var y=n(t._children),v=y.next();!v.done;v=y.next()){if(!e(v.value))return!1}}catch(e){u={error:e}}finally{try{v&&!v.done&&(l=y.return)&&l.call(y)}finally{if(u)throw u.error}}return!0},t.tree_nodeLength=f,t.tree_isEmpty=function(e){return 0===f(e)},t.tree_rootNode=d,t.tree_isDescendantOf=function(e,t,r,n){void 0===r&&(r=!1),void 0===n&&(n=!1);for(var i=u(e,r,n);null!==i;){if(i===t)return!0;i=l(e,i,r,n)}return!1},t.tree_isAncestorOf=m,t.tree_isHostIncludingAncestorOf=function e(t,r,n){if(void 0===n&&(n=!1),m(t,r,n))return!0;var o=d(t);return!(!i.Guard.isDocumentFragmentNode(o)||null===o._host||!e(o._host,r,n))},t.tree_isSiblingOf=function(e,t,r){return void 0===r&&(r=!1),e!==t?null!==e._parent&&e._parent===t._parent:!!r},t.tree_isPreceding=function(e,t){var r=y(e),n=y(t);return-1!==r&&-1!==n&&(d(e)===d(t)&&n<r)},t.tree_isFollowing=function(e,t){var r=y(e),n=y(t);return-1!==r&&-1!==n&&(d(e)===d(t)&&n>r)},t.tree_isParentOf=function(e,t){return e._parent===t},t.tree_isChildOf=function(e,t){return t._parent===e},t.tree_previousSibling=function(e){return e._previousSibling},t.tree_nextSibling=function(e){return e._nextSibling},t.tree_firstChild=function(e){return e._firstChild},t.tree_lastChild=function(e){return e._lastChild},t.tree_treePosition=y,t.tree_index=function(e){for(var t=0;null!==e._previousSibling;)t++,e=e._previousSibling;return t},t.tree_retarget=function(e,t){for(;;){if(!e||!i.Guard.isNode(e))return e;var r=d(e);if(!i.Guard.isShadowRoot(r))return e;if(t&&i.Guard.isNode(t)&&m(r,t,!0,!0))return e;e=r.host}}},function(e,t,r){var n=r(13);e.exports=function(e){if(!n(e))throw TypeError(String(e)+\" is not an object\");return e}},function(e,t,r){\"use strict\";var n=r(24),i=r(130),o=r(49),a=r(43),s=r(88),u=a.set,l=a.getterFor(\"Array Iterator\");e.exports=s(Array,\"Array\",(function(e,t){u(this,{type:\"Array Iterator\",target:n(e),index:0,kind:t})}),(function(){var e=l(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):\"keys\"==r?{value:n,done:!1}:\"values\"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),\"values\"),o.Arguments=o.Array,i(\"keys\"),i(\"values\"),i(\"entries\")},function(e,t,r){var n=r(90),i=r(25),o=r(202);n||i(Object.prototype,\"toString\",o,{unsafe:!0})},function(e,t,r){var n=r(16),i=r(15),o=r(40);e.exports=n?function(e,t,r){return i.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){\"use strict\";var n=r(137).charAt,i=r(43),o=r(88),a=i.set,s=i.getterFor(\"String Iterator\");o(String,\"String\",(function(e){a(this,{type:\"String Iterator\",string:String(e),index:0})}),(function(){var e,t=s(this),r=t.string,i=t.index;return i>=r.length?{value:void 0,done:!0}:(e=n(r,i),t.index+=e.length,{value:e,done:!1})}))},function(e,t,r){var n=r(11),i=r(203),o=r(19),a=r(21),s=r(5),u=s(\"iterator\"),l=s(\"toStringTag\"),c=o.values;for(var h in i){var p=n[h],f=p&&p.prototype;if(f){if(f[u]!==c)try{a(f,u,c)}catch(e){f[u]=c}if(f[l]||a(f,l,h),i[h])for(var d in o)if(f[d]!==o[d])try{a(f,d,o[d])}catch(e){f[d]=o[d]}}}},function(e,t,r){var n=r(41),i=r(35);e.exports=function(e){return n(i(e))}},function(e,t,r){var n=r(11),i=r(21),o=r(14),a=r(80),s=r(117),u=r(43),l=u.get,c=u.enforce,h=String(String).split(\"String\");(e.exports=function(e,t,r,s){var u=!!s&&!!s.unsafe,l=!!s&&!!s.enumerable,p=!!s&&!!s.noTargetGet;\"function\"==typeof r&&(\"string\"!=typeof t||o(r,\"name\")||i(r,\"name\",t),c(r).source=h.join(\"string\"==typeof t?t:\"\")),e!==n?(u?!p&&e[t]&&(l=!0):delete e[t],l?e[t]=r:i(e,t,r)):l?e[t]=r:a(t,r)})(Function.prototype,\"toString\",(function(){return\"function\"==typeof this&&l(this).source||s(this)}))},function(e,t,r){var n=r(47),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},function(e,t,r){var n=r(35);e.exports=function(e){return Object(n(e))}},function(e,t,r){var n=r(16),i=r(8),o=r(14),a=Object.defineProperty,s={},u=function(e){throw e};e.exports=function(e,t){if(o(s,e))return s[e];t||(t={});var r=[][e],l=!!o(t,\"ACCESSORS\")&&t.ACCESSORS,c=o(t,0)?t[0]:u,h=o(t,1)?t[1]:void 0;return s[e]=!!r&&!i((function(){if(l&&!n)return!0;var e={length:-1};l?a(e,1,{enumerable:!0,get:u}):e[1]=1,r.call(e,c,h)}))}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(148),i=r(149),o=r(151),a=r(98),s=r(153),u=r(154),l=r(155),c=r(99),h=r(100),p=r(156),f=r(157),d=r(101),m=r(158),y=r(159),v=r(160),_=r(161),g=r(162),b=r(163),x=r(164),w=r(165),E=r(166),D=r(167),S=r(168),C=r(169),A=r(170);t.create_domImplementation=function(e){return n.DOMImplementationImpl._create(e)},t.create_window=function(){return i.WindowImpl._create()},t.create_xmlDocument=function(){return new o.XMLDocumentImpl},t.create_document=function(){return new a.DocumentImpl},t.create_abortController=function(){return new s.AbortControllerImpl},t.create_abortSignal=function(){return u.AbortSignalImpl._create()},t.create_documentType=function(e,t,r,n){return l.DocumentTypeImpl._create(e,t,r,n)},t.create_element=function(e,t,r,n){return c.ElementImpl._create(e,t,r,n)},t.create_htmlElement=function(e,t,r,n){return c.ElementImpl._create(e,t,r,n)},t.create_htmlUnknownElement=function(e,t,r,n){return c.ElementImpl._create(e,t,r,n)},t.create_documentFragment=function(e){return h.DocumentFragmentImpl._create(e)},t.create_shadowRoot=function(e,t){return p.ShadowRootImpl._create(e,t)},t.create_attr=function(e,t){return f.AttrImpl._create(e,t)},t.create_text=function(e,t){return d.TextImpl._create(e,t)},t.create_cdataSection=function(e,t){return m.CDATASectionImpl._create(e,t)},t.create_comment=function(e,t){return y.CommentImpl._create(e,t)},t.create_processingInstruction=function(e,t,r){return v.ProcessingInstructionImpl._create(e,t,r)},t.create_htmlCollection=function(e,t){return void 0===t&&(t=function(){return!0}),_.HTMLCollectionImpl._create(e,t)},t.create_nodeList=function(e){return g.NodeListImpl._create(e)},t.create_nodeListStatic=function(e,t){return b.NodeListStaticImpl._create(e,t)},t.create_namedNodeMap=function(e){return x.NamedNodeMapImpl._create(e)},t.create_range=function(e,t){return w.RangeImpl._create(e,t)},t.create_nodeIterator=function(e,t,r){return E.NodeIteratorImpl._create(e,t,r)},t.create_treeWalker=function(e,t){return D.TreeWalkerImpl._create(e,t)},t.create_nodeFilter=function(){return S.NodeFilterImpl._create()},t.create_mutationRecord=function(e,t,r,n,i,o,a,s,u){return C.MutationRecordImpl._create(e,t,r,n,i,o,a,s,u)},t.create_domTokenList=function(e,t){return A.DOMTokenListImpl._create(e,t)}},function(e,t,r){\"use strict\";var n=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")};Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(6),o=r(17),a=r(3),s=r(72),u=new Map;function l(e,t){if(t!==e._root&&o.tree_isAncestorOf(e._reference,t,!0)){if(e._pointerBeforeReference)for(;;){var r=o.tree_getFollowingNode(e._root,t);if(null!==r&&o.tree_isDescendantOf(e._root,r,!0)&&!o.tree_isDescendantOf(t,r,!0))return void(e._reference=r);if(null===r)return void(e._pointerBeforeReference=!1)}if(null===t._previousSibling)null!==t._parent&&(e._reference=t._parent);else{for(var n=t._previousSibling,i=o.tree_getFirstDescendantNode(t._previousSibling,!0,!1);null!==i;)null!==i&&(n=i),i=o.tree_getNextDescendantNode(t._previousSibling,i,!0,!1);e._reference=n}}}function c(e,t,r,n,i){if(a.Guard.isSlot(e)&&\"name\"===t&&null===i){if(n===r)return;if(null===n&&\"\"===r)return;if(\"\"===n&&null===r)return;e._name=null===n||\"\"===n?\"\":n,s.shadowTree_assignSlotablesForATree(o.tree_rootNode(e))}}function h(e,t,r,n,i){if(a.Guard.isSlotable(e)&&\"slot\"===t&&null===i){if(n===r)return;if(null===n&&\"\"===r)return;if(\"\"===n&&null===r)return;e._name=null===n||\"\"===n?\"\":n,s.shadowTree_isAssigned(e)&&s.shadowTree_assignSlotables(e._assignedSlot),s.shadowTree_assignASlot(e)}}function p(e,t,r,n){\"id\"===t&&null===n&&(e._uniqueIdentifier=r||void 0)}t.dom_runRemovingSteps=function(e,t){},t.dom_runCloningSteps=function(e,t,r,n){},t.dom_runAdoptingSteps=function(e,t){},t.dom_runAttributeChangeSteps=function(e,t,r,o,a){var s,u;i.dom.features.slots&&(h.call(e,e,t,r,o,a),c.call(e,e,t,r,o,a)),p.call(e,e,t,o,a);try{for(var l=n(e._attributeChangeSteps),f=l.next();!f.done;f=l.next()){f.value.call(e,e,t,r,o,a)}}catch(e){s={error:e}}finally{try{f&&!f.done&&(u=l.return)&&u.call(l)}finally{if(s)throw s.error}}},t.dom_runInsertionSteps=function(e){},t.dom_runNodeIteratorPreRemovingSteps=function(e,t){l.call(e,e,t)},t.dom_hasSupportedTokens=function(e){return u.has(e)},t.dom_getSupportedTokens=function(e){return u.get(e)||new Set},t.dom_runEventConstructingSteps=function(e){},t.dom_runChildTextContentChangeSteps=function(e){}},function(e,t,r){\"use strict\";var n=r(4),i=r(11),o=r(46),a=r(44),s=r(16),u=r(86),l=r(124),c=r(8),h=r(14),p=r(59),f=r(13),d=r(18),m=r(27),y=r(24),v=r(56),_=r(40),g=r(60),b=r(61),x=r(82),w=r(190),E=r(85),D=r(55),S=r(15),C=r(79),A=r(21),N=r(25),T=r(81),O=r(57),F=r(45),k=r(58),P=r(5),I=r(125),L=r(126),M=r(62),B=r(43),j=r(36).forEach,R=O(\"hidden\"),z=P(\"toPrimitive\"),U=B.set,G=B.getterFor(\"Symbol\"),X=Object.prototype,q=i.Symbol,W=o(\"JSON\",\"stringify\"),H=D.f,J=S.f,Y=w.f,V=C.f,K=T(\"symbols\"),$=T(\"op-symbols\"),Q=T(\"string-to-symbol-registry\"),Z=T(\"symbol-to-string-registry\"),ee=T(\"wks\"),te=i.QObject,re=!te||!te.prototype||!te.prototype.findChild,ne=s&&c((function(){return 7!=g(J({},\"a\",{get:function(){return J(this,\"a\",{value:7}).a}})).a}))?function(e,t,r){var n=H(X,t);n&&delete X[t],J(e,t,r),n&&e!==X&&J(X,t,n)}:J,ie=function(e,t){var r=K[e]=g(q.prototype);return U(r,{type:\"Symbol\",tag:e,description:t}),s||(r.description=t),r},oe=l?function(e){return\"symbol\"==typeof e}:function(e){return Object(e)instanceof q},ae=function(e,t,r){e===X&&ae($,t,r),d(e);var n=v(t,!0);return d(r),h(K,n)?(r.enumerable?(h(e,R)&&e[R][n]&&(e[R][n]=!1),r=g(r,{enumerable:_(0,!1)})):(h(e,R)||J(e,R,_(1,{})),e[R][n]=!0),ne(e,n,r)):J(e,n,r)},se=function(e,t){d(e);var r=y(t),n=b(r).concat(he(r));return j(n,(function(t){s&&!ue.call(r,t)||ae(e,t,r[t])})),e},ue=function(e){var t=v(e,!0),r=V.call(this,t);return!(this===X&&h(K,t)&&!h($,t))&&(!(r||!h(this,t)||!h(K,t)||h(this,R)&&this[R][t])||r)},le=function(e,t){var r=y(e),n=v(t,!0);if(r!==X||!h(K,n)||h($,n)){var i=H(r,n);return!i||!h(K,n)||h(r,R)&&r[R][n]||(i.enumerable=!0),i}},ce=function(e){var t=Y(y(e)),r=[];return j(t,(function(e){h(K,e)||h(F,e)||r.push(e)})),r},he=function(e){var t=e===X,r=Y(t?$:y(e)),n=[];return j(r,(function(e){!h(K,e)||t&&!h(X,e)||n.push(K[e])})),n};(u||(N((q=function(){if(this instanceof q)throw TypeError(\"Symbol is not a constructor\");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=k(e),r=function(e){this===X&&r.call($,e),h(this,R)&&h(this[R],t)&&(this[R][t]=!1),ne(this,t,_(1,e))};return s&&re&&ne(X,t,{configurable:!0,set:r}),ie(t,e)}).prototype,\"toString\",(function(){return G(this).tag})),N(q,\"withoutSetter\",(function(e){return ie(k(e),e)})),C.f=ue,S.f=ae,D.f=le,x.f=w.f=ce,E.f=he,I.f=function(e){return ie(P(e),e)},s&&(J(q.prototype,\"description\",{configurable:!0,get:function(){return G(this).description}}),a||N(X,\"propertyIsEnumerable\",ue,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:q}),j(b(ee),(function(e){L(e)})),n({target:\"Symbol\",stat:!0,forced:!u},{for:function(e){var t=String(e);if(h(Q,t))return Q[t];var r=q(t);return Q[t]=r,Z[r]=t,r},keyFor:function(e){if(!oe(e))throw TypeError(e+\" is not a symbol\");if(h(Z,e))return Z[e]},useSetter:function(){re=!0},useSimple:function(){re=!1}}),n({target:\"Object\",stat:!0,forced:!u,sham:!s},{create:function(e,t){return void 0===t?g(e):se(g(e),t)},defineProperty:ae,defineProperties:se,getOwnPropertyDescriptor:le}),n({target:\"Object\",stat:!0,forced:!u},{getOwnPropertyNames:ce,getOwnPropertySymbols:he}),n({target:\"Object\",stat:!0,forced:c((function(){E.f(1)}))},{getOwnPropertySymbols:function(e){return E.f(m(e))}}),W)&&n({target:\"JSON\",stat:!0,forced:!u||c((function(){var e=q();return\"[null]\"!=W([e])||\"{}\"!=W({a:e})||\"{}\"!=W(Object(e))}))},{stringify:function(e,t,r){for(var n,i=[e],o=1;arguments.length>o;)i.push(arguments[o++]);if(n=t,(f(t)||void 0!==e)&&!oe(e))return p(t)||(t=function(e,t){if(\"function\"==typeof n&&(t=n.call(this,e,t)),!oe(t))return t}),i[1]=t,W.apply(null,i)}});q.prototype[z]||A(q.prototype,z,q.prototype.valueOf),M(q,\"Symbol\"),F[R]=!0},function(e,t,r){\"use strict\";var n=r(4),i=r(16),o=r(11),a=r(14),s=r(13),u=r(15).f,l=r(119),c=o.Symbol;if(i&&\"function\"==typeof c&&(!(\"description\"in c.prototype)||void 0!==c().description)){var h={},p=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof p?new c(e):void 0===e?c():c(e);return\"\"===e&&(h[t]=!0),t};l(p,c);var f=p.prototype=c.prototype;f.constructor=p;var d=f.toString,m=\"Symbol(test)\"==String(c(\"test\")),y=/^Symbol\\((.*)\\)[^)]+$/;u(f,\"description\",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=d.call(e);if(a(h,e))return\"\";var r=m?t.slice(7,-1):t.replace(y,\"$1\");return\"\"===r?void 0:r}}),n({global:!0,forced:!0},{Symbol:p})}},function(e,t,r){r(126)(\"iterator\")},function(e,t,r){\"use strict\";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")};Object.defineProperty(t,\"__esModule\",{value:!0});var a=r(6),s=r(2),u=r(70),l=r(3),c=r(9),h=r(0),p=r(152),f=r(12),d=function(e){function t(){var t=e.call(this)||this;return t._parent=null,t._firstChild=null,t._lastChild=null,t._previousSibling=null,t._nextSibling=null,t}return i(t,e),Object.defineProperty(t.prototype,\"_childNodes\",{get:function(){return this.__childNodes||(this.__childNodes=h.create_nodeList(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"_nodeDocument\",{get:function(){return this._nodeDocumentOverride||a.dom.window._associatedDocument},set:function(e){this._nodeDocumentOverride=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"_registeredObserverList\",{get:function(){return this.__registeredObserverList||(this.__registeredObserverList=[])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"nodeType\",{get:function(){return this._nodeType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"nodeName\",{get:function(){return l.Guard.isElementNode(this)?this._htmlUppercasedQualifiedName:l.Guard.isAttrNode(this)?this._qualifiedName:l.Guard.isExclusiveTextNode(this)?\"#text\":l.Guard.isCDATASectionNode(this)?\"#cdata-section\":l.Guard.isProcessingInstructionNode(this)?this._target:l.Guard.isCommentNode(this)?\"#comment\":l.Guard.isDocumentNode(this)?\"#document\":l.Guard.isDocumentTypeNode(this)?this._name:l.Guard.isDocumentFragmentNode(this)?\"#document-fragment\":\"\"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"baseURI\",{get:function(){return p.urlSerializer(this._nodeDocument._URL)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"isConnected\",{get:function(){return l.Guard.isElementNode(this)&&h.shadowTree_isConnected(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"ownerDocument\",{get:function(){return this._nodeType===s.NodeType.Document?null:this._nodeDocument},enumerable:!0,configurable:!0}),t.prototype.getRootNode=function(e){return h.tree_rootNode(this,!!e&&e.composed)},Object.defineProperty(t.prototype,\"parentNode\",{get:function(){return this._nodeType===s.NodeType.Attribute?null:this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"parentElement\",{get:function(){return this._parent&&l.Guard.isElementNode(this._parent)?this._parent:null},enumerable:!0,configurable:!0}),t.prototype.hasChildNodes=function(){return null!==this._firstChild},Object.defineProperty(t.prototype,\"childNodes\",{get:function(){return this._childNodes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"firstChild\",{get:function(){return this._firstChild},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"lastChild\",{get:function(){return this._lastChild},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"previousSibling\",{get:function(){return this._previousSibling},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"nextSibling\",{get:function(){return this._nextSibling},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"nodeValue\",{get:function(){return l.Guard.isAttrNode(this)?this._value:l.Guard.isCharacterDataNode(this)?this._data:null},set:function(e){null===e&&(e=\"\"),l.Guard.isAttrNode(this)?h.attr_setAnExistingAttributeValue(this,e):l.Guard.isCharacterDataNode(this)&&h.characterData_replaceData(this,0,this._data.length,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"textContent\",{get:function(){return l.Guard.isDocumentFragmentNode(this)||l.Guard.isElementNode(this)?h.text_descendantTextContent(this):l.Guard.isAttrNode(this)?this._value:l.Guard.isCharacterDataNode(this)?this._data:null},set:function(e){null===e&&(e=\"\"),l.Guard.isDocumentFragmentNode(this)||l.Guard.isElementNode(this)?h.node_stringReplaceAll(e,this):l.Guard.isAttrNode(this)?h.attr_setAnExistingAttributeValue(this,e):l.Guard.isCharacterDataNode(this)&&h.characterData_replaceData(this,0,h.tree_nodeLength(this),e)},enumerable:!0,configurable:!0}),t.prototype.normalize=function(){for(var e,t,r,n,i=[],s=h.tree_getFirstDescendantNode(this,!1,!1,(function(e){return l.Guard.isExclusiveTextNode(e)}));null!==s;)i.push(s),s=h.tree_getNextDescendantNode(this,s,!1,!1,(function(e){return l.Guard.isExclusiveTextNode(e)}));for(var u=0;u<i.length;u++){var c=i[u];if(null!==c._parent){var p=h.tree_nodeLength(c);if(0!==p){var f=[],d=\"\";try{for(var m=(e=void 0,o(h.text_contiguousExclusiveTextNodes(c))),y=m.next();!y.done;y=m.next()){var v=y.value;f.push(v),d+=v._data}}catch(t){e={error:t}}finally{try{y&&!y.done&&(t=m.return)&&t.call(m)}finally{if(e)throw e.error}}if(h.characterData_replaceData(c,p,0,d),0!==a.dom.rangeList.size)for(var _=c._nextSibling;null!==_&&l.Guard.isExclusiveTextNode(_);){var g=_,b=h.tree_index(g);try{for(var x=(r=void 0,o(a.dom.rangeList)),w=x.next();!w.done;w=x.next()){var E=w.value;E._start[0]===g&&(E._start[0]=c,E._start[1]+=p),E._end[0]===g&&(E._end[0]=c,E._end[1]+=p),E._start[0]===g._parent&&E._start[1]===b&&(E._start[0]=c,E._start[1]=p),E._end[0]===g._parent&&E._end[1]===b&&(E._end[0]=c,E._end[1]=p)}}catch(e){r={error:e}}finally{try{w&&!w.done&&(n=x.return)&&n.call(x)}finally{if(r)throw r.error}}p+=h.tree_nodeLength(_),_=_._nextSibling}for(var D=0;D<f.length;D++){null!==(v=f[D])._parent&&h.mutation_remove(v,v._parent)}}else h.mutation_remove(c,c._parent)}}},t.prototype.cloneNode=function(e){if(void 0===e&&(e=!1),l.Guard.isShadowRoot(this))throw new c.NotSupportedError;return h.node_clone(this,null,e)},t.prototype.isEqualNode=function(e){return void 0===e&&(e=null),null!==e&&h.node_equals(this,e)},t.prototype.isSameNode=function(e){return void 0===e&&(e=null),this===e},t.prototype.compareDocumentPosition=function(e){if(e===this)return 0;var t=e,r=this,n=null,i=null;if(l.Guard.isAttrNode(t)&&(t=(n=t)._element),l.Guard.isAttrNode(r)&&(r=(i=r)._element,n&&t&&t===r))for(var o=0;o<r._attributeList.length;o++){var u=r._attributeList[o];if(h.node_equals(u,n))return s.Position.ImplementationSpecific|s.Position.Preceding;if(h.node_equals(u,i))return s.Position.ImplementationSpecific|s.Position.Following}return null===t||null===r||h.tree_rootNode(t)!==h.tree_rootNode(r)?s.Position.Disconnected|s.Position.ImplementationSpecific|(a.dom.compareCache.check(this,e)?s.Position.Preceding:s.Position.Following):!n&&h.tree_isAncestorOf(r,t)||i&&t===r?s.Position.Contains|s.Position.Preceding:!i&&h.tree_isDescendantOf(r,t)||n&&t===r?s.Position.ContainedBy|s.Position.Following:h.tree_isPreceding(r,t)?s.Position.Preceding:s.Position.Following},t.prototype.contains=function(e){return null!==e&&h.tree_isDescendantOf(this,e,!0)},t.prototype.lookupPrefix=function(e){return e?l.Guard.isElementNode(this)?h.node_locateANamespacePrefix(this,e):l.Guard.isDocumentNode(this)?null===this.documentElement?null:h.node_locateANamespacePrefix(this.documentElement,e):l.Guard.isDocumentTypeNode(this)||l.Guard.isDocumentFragmentNode(this)?null:l.Guard.isAttrNode(this)?null===this._element?null:h.node_locateANamespacePrefix(this._element,e):null!==this._parent&&l.Guard.isElementNode(this._parent)?h.node_locateANamespacePrefix(this._parent,e):null:null},t.prototype.lookupNamespaceURI=function(e){return h.node_locateANamespace(this,e||null)},t.prototype.isDefaultNamespace=function(e){return e||(e=null),h.node_locateANamespace(this,null)===e},t.prototype.insertBefore=function(e,t){return h.mutation_preInsert(e,this,t)},t.prototype.appendChild=function(e){return h.mutation_append(e,this)},t.prototype.replaceChild=function(e,t){return h.mutation_replace(t,e,this)},t.prototype.removeChild=function(e){return h.mutation_preRemove(e,this)},t.prototype._getTheParent=function(e){return l.Guard.isSlotable(this)&&h.shadowTree_isAssigned(this)?this._assignedSlot:this._parent},t.ELEMENT_NODE=1,t.ATTRIBUTE_NODE=2,t.TEXT_NODE=3,t.CDATA_SECTION_NODE=4,t.ENTITY_REFERENCE_NODE=5,t.ENTITY_NODE=6,t.PROCESSING_INSTRUCTION_NODE=7,t.COMMENT_NODE=8,t.DOCUMENT_NODE=9,t.DOCUMENT_TYPE_NODE=10,t.DOCUMENT_FRAGMENT_NODE=11,t.NOTATION_NODE=12,t.DOCUMENT_POSITION_DISCONNECTED=1,t.DOCUMENT_POSITION_PRECEDING=2,t.DOCUMENT_POSITION_FOLLOWING=4,t.DOCUMENT_POSITION_CONTAINS=8,t.DOCUMENT_POSITION_CONTAINED_BY=16,t.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32,t}(u.EventTargetImpl);t.NodeImpl=d,d.prototype._children=new l.EmptySet,f.idl_defineConst(d.prototype,\"ELEMENT_NODE\",1),f.idl_defineConst(d.prototype,\"ATTRIBUTE_NODE\",2),f.idl_defineConst(d.prototype,\"TEXT_NODE\",3),f.idl_defineConst(d.prototype,\"CDATA_SECTION_NODE\",4),f.idl_defineConst(d.prototype,\"ENTITY_REFERENCE_NODE\",5),f.idl_defineConst(d.prototype,\"ENTITY_NODE\",6),f.idl_defineConst(d.prototype,\"PROCESSING_INSTRUCTION_NODE\",7),f.idl_defineConst(d.prototype,\"COMMENT_NODE\",8),f.idl_defineConst(d.prototype,\"DOCUMENT_NODE\",9),f.idl_defineConst(d.prototype,\"DOCUMENT_TYPE_NODE\",10),f.idl_defineConst(d.prototype,\"DOCUMENT_FRAGMENT_NODE\",11),f.idl_defineConst(d.prototype,\"NOTATION_NODE\",12),f.idl_defineConst(d.prototype,\"DOCUMENT_POSITION_DISCONNECTED\",1),f.idl_defineConst(d.prototype,\"DOCUMENT_POSITION_PRECEDING\",2),f.idl_defineConst(d.prototype,\"DOCUMENT_POSITION_FOLLOWING\",4),f.idl_defineConst(d.prototype,\"DOCUMENT_POSITION_CONTAINS\",8),f.idl_defineConst(d.prototype,\"DOCUMENT_POSITION_CONTAINED_BY\",16),f.idl_defineConst(d.prototype,\"DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC\",32)},function(e,t){e.exports=function(e){if(null==e)throw TypeError(\"Can't call method on \"+e);return e}},function(e,t,r){var n=r(87),i=r(41),o=r(27),a=r(26),s=r(128),u=[].push,l=function(e){var t=1==e,r=2==e,l=3==e,c=4==e,h=6==e,p=5==e||h;return function(f,d,m,y){for(var v,_,g=o(f),b=i(g),x=n(d,m,3),w=a(b.length),E=0,D=y||s,S=t?D(f,w):r?D(f,0):void 0;w>E;E++)if((p||E in b)&&(_=x(v=b[E],E,g),e))if(t)S[E]=_;else if(_)switch(e){case 3:return!0;case 5:return v;case 6:return E;case 2:u.call(S,v)}else if(c)return!1;return h?-1:l||c?c:S}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},function(e,t,r){\"use strict\";var n=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},i=this&&this.__read||function(e,t){var r=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(t,\"__esModule\",{value:!0});var a=r(6),s=r(9),u=r(2),l=r(3),c=r(1),h=r(7),p=r(73),f=r(17),d=r(172),m=r(72),y=r(51),v=r(30),_=r(106);function g(e,t,r){var i,o,a,l,c,h,p,d,m=t._nodeType,y=e._nodeType,v=r?r._nodeType:null;if(m!==u.NodeType.Document&&m!==u.NodeType.DocumentFragment&&m!==u.NodeType.Element)throw new s.HierarchyRequestError(\"Only document, document fragment and element nodes can contain child nodes. Parent node is \"+t.nodeName+\".\");if(f.tree_isHostIncludingAncestorOf(t,e,!0))throw new s.HierarchyRequestError(\"The node to be inserted cannot be an inclusive ancestor of parent node. Node is \"+e.nodeName+\", parent node is \"+t.nodeName+\".\");if(null!==r&&r._parent!==t)throw new s.NotFoundError(\"The reference child node cannot be found under parent node. Child node is \"+r.nodeName+\", parent node is \"+t.nodeName+\".\");if(y!==u.NodeType.DocumentFragment&&y!==u.NodeType.DocumentType&&y!==u.NodeType.Element&&y!==u.NodeType.Text&&y!==u.NodeType.ProcessingInstruction&&y!==u.NodeType.CData&&y!==u.NodeType.Comment)throw new s.HierarchyRequestError(\"Only document fragment, document type, element, text, processing instruction, cdata section or comment nodes can be inserted. Node is \"+e.nodeName+\".\");if(y===u.NodeType.Text&&m===u.NodeType.Document)throw new s.HierarchyRequestError(\"Cannot insert a text node as a child of a document node. Node is \"+e.nodeName+\".\");if(y===u.NodeType.DocumentType&&m!==u.NodeType.Document)throw new s.HierarchyRequestError(\"A document type node can only be inserted under a document node. Parent node is \"+t.nodeName+\".\");if(m===u.NodeType.Document)if(y===u.NodeType.DocumentFragment){var _=0;try{for(var g=n(e._children),b=g.next();!b.done;b=g.next()){var x=b.value;if(x._nodeType===u.NodeType.Element)_++;else if(x._nodeType===u.NodeType.Text)throw new s.HierarchyRequestError(\"Cannot insert text a node as a child of a document node. Node is \"+x.nodeName+\".\")}}catch(e){i={error:e}}finally{try{b&&!b.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}if(_>1)throw new s.HierarchyRequestError(\"A document node can only have one document element node. Document fragment to be inserted has \"+_+\" element nodes.\");if(1===_){try{for(var w=n(t._children),E=w.next();!E.done;E=w.next()){if(E.value._nodeType===u.NodeType.Element)throw new s.HierarchyRequestError(\"The document node already has a document element node.\")}}catch(e){a={error:e}}finally{try{E&&!E.done&&(l=w.return)&&l.call(w)}finally{if(a)throw a.error}}if(r){if(v===u.NodeType.DocumentType)throw new s.HierarchyRequestError(\"Cannot insert an element node before a document type node.\");for(var D=r._nextSibling;D;){if(D._nodeType===u.NodeType.DocumentType)throw new s.HierarchyRequestError(\"Cannot insert an element node before a document type node.\");D=D._nextSibling}}}}else if(y===u.NodeType.Element){try{for(var S=n(t._children),C=S.next();!C.done;C=S.next()){if(C.value._nodeType===u.NodeType.Element)throw new s.HierarchyRequestError(\"Document already has a document element node. Node is \"+e.nodeName+\".\")}}catch(e){c={error:e}}finally{try{C&&!C.done&&(h=S.return)&&h.call(S)}finally{if(c)throw c.error}}if(r){if(v===u.NodeType.DocumentType)throw new s.HierarchyRequestError(\"Cannot insert an element node before a document type node. Node is \"+e.nodeName+\".\");for(D=r._nextSibling;D;){if(D._nodeType===u.NodeType.DocumentType)throw new s.HierarchyRequestError(\"Cannot insert an element node before a document type node. Node is \"+e.nodeName+\".\");D=D._nextSibling}}}else if(y===u.NodeType.DocumentType){try{for(var A=n(t._children),N=A.next();!N.done;N=A.next()){if(N.value._nodeType===u.NodeType.DocumentType)throw new s.HierarchyRequestError(\"Document already has a document type node. Node is \"+e.nodeName+\".\")}}catch(e){p={error:e}}finally{try{N&&!N.done&&(d=A.return)&&d.call(A)}finally{if(p)throw p.error}}if(r)for(var T=r._previousSibling;T;){if(T._nodeType===u.NodeType.Element)throw new s.HierarchyRequestError(\"Cannot insert a document type node before an element node. Node is \"+e.nodeName+\".\");T=T._previousSibling}else for(T=t._firstChild;T;){if(T._nodeType===u.NodeType.Element)throw new s.HierarchyRequestError(\"Cannot insert a document type node before an element node. Node is \"+e.nodeName+\".\");T=T._nextSibling}}}function b(e,t,r){g(e,t,r);var n=r;return n===e&&(n=e._nextSibling),_.document_adopt(e,t._nodeDocument),x(e,t,n),e}function x(e,t,r,i){var s,d;if(null!==r||e._nodeType===u.NodeType.DocumentFragment){var _=e._nodeType===u.NodeType.DocumentFragment?e._children.size:1;if(null!==r&&0!==a.dom.rangeList.size){var g=f.tree_index(r);try{for(var b=n(a.dom.rangeList),x=b.next();!x.done;x=b.next()){var E=x.value;E._start[0]===t&&E._start[1]>g&&(E._start[1]+=_),E._end[0]===t&&E._end[1]>g&&(E._end[1]+=_)}}catch(e){s={error:e}}finally{try{x&&!x.done&&(d=b.return)&&d.call(b)}finally{if(s)throw s.error}}}var D=e._nodeType===u.NodeType.DocumentFragment?new(Array.bind.apply(Array,o([void 0],e._children))):[e];if(e._nodeType===u.NodeType.DocumentFragment)for(;e._firstChild;)w(e._firstChild,e,!0);a.dom.features.mutationObservers&&e._nodeType===u.NodeType.DocumentFragment&&y.observer_queueTreeMutationRecord(e,[],D,null,null);for(var S=r?r._previousSibling:t._lastChild,C=null===r?-1:f.tree_index(r),A=0;A<D.length;A++){var N=D[A];if(l.Guard.isElementNode(N)&&(l.Guard.isDocumentNode(t)&&(t._documentElement=N),N._nodeDocument._hasNamespaces||null===N._namespace&&null===N._namespacePrefix||(N._nodeDocument._hasNamespaces=!0)),N._parent=t,null===r?h.set.append(t._children,N):(h.set.insert(t._children,N,C),C++),null===t._firstChild)N._previousSibling=null,N._nextSibling=null,t._firstChild=N,t._lastChild=N;else{var T=r?r._previousSibling:t._lastChild,O=r||null;N._previousSibling=T,N._nextSibling=O,T&&(T._nextSibling=N),O&&(O._previousSibling=N),T||(t._firstChild=N),O||(t._lastChild=N)}a.dom.features.slots&&null!==t._shadowRoot&&l.Guard.isSlotable(N)&&m.shadowTree_assignASlot(N),a.dom.features.steps&&l.Guard.isTextNode(N)&&v.dom_runChildTextContentChangeSteps(t),a.dom.features.slots&&l.Guard.isShadowRoot(f.tree_rootNode(t))&&l.Guard.isSlot(t)&&c.isEmpty(t._assignedNodes)&&m.shadowTree_signalASlotChange(t),a.dom.features.slots&&m.shadowTree_assignSlotablesForATree(f.tree_rootNode(N));for(var F=f.tree_getFirstDescendantNode(N,!0,!0);null!==F;)a.dom.features.steps&&v.dom_runInsertionSteps(F),a.dom.features.customElements&&l.Guard.isElementNode(F)&&m.shadowTree_isConnected(F)&&(l.Guard.isCustomElementNode(F)?p.customElement_enqueueACustomElementCallbackReaction(F,\"connectedCallback\",[]):p.customElement_tryToUpgrade(F)),F=f.tree_getNextDescendantNode(N,F,!0,!0)}a.dom.features.mutationObservers&&(i||y.observer_queueTreeMutationRecord(t,D,[],S,r))}else!function(e,t,r){var n=t._lastChild;l.Guard.isElementNode(e)&&(l.Guard.isDocumentNode(t)&&(t._documentElement=e),e._nodeDocument._hasNamespaces||null===e._namespace&&null===e._namespacePrefix||(e._nodeDocument._hasNamespaces=!0));if(e._parent=t,t._children.add(e),null===t._firstChild)e._previousSibling=null,e._nextSibling=null,t._firstChild=e,t._lastChild=e;else{var i=t._lastChild;e._previousSibling=i,e._nextSibling=null,i&&(i._nextSibling=e),i||(t._firstChild=e),t._lastChild=e}a.dom.features.slots&&null!==t._shadowRoot&&l.Guard.isSlotable(e)&&m.shadowTree_assignASlot(e);a.dom.features.steps&&l.Guard.isTextNode(e)&&v.dom_runChildTextContentChangeSteps(t);a.dom.features.slots&&l.Guard.isShadowRoot(f.tree_rootNode(t))&&l.Guard.isSlot(t)&&c.isEmpty(t._assignedNodes)&&m.shadowTree_signalASlotChange(t);a.dom.features.slots&&m.shadowTree_assignSlotablesForATree(f.tree_rootNode(e));a.dom.features.steps&&v.dom_runInsertionSteps(e);a.dom.features.customElements&&l.Guard.isElementNode(e)&&m.shadowTree_isConnected(e)&&(l.Guard.isCustomElementNode(e)?p.customElement_enqueueACustomElementCallbackReaction(e,\"connectedCallback\",[]):p.customElement_tryToUpgrade(e));a.dom.features.mutationObservers&&(r||y.observer_queueTreeMutationRecord(t,[e],[],n,null))}(e,t,i)}function w(e,t,r){var i,o,s,u,h,_,g,b;if(0!==a.dom.rangeList.size){var x=f.tree_index(e);try{for(var w=n(a.dom.rangeList),E=w.next();!E.done;E=w.next()){var D=E.value;f.tree_isDescendantOf(e,D._start[0],!0)&&(D._start=[t,x]),f.tree_isDescendantOf(e,D._end[0],!0)&&(D._end=[t,x]),D._start[0]===t&&D._start[1]>x&&D._start[1]--,D._end[0]===t&&D._end[1]>x&&D._end[1]--}}catch(e){i={error:e}}finally{try{E&&!E.done&&(o=w.return)&&o.call(w)}finally{if(i)throw i.error}}try{for(var S=n(a.dom.rangeList),C=S.next();!C.done;C=S.next()){(D=C.value)._start[0]===t&&D._start[1]>x&&(D._start[1]-=1),D._end[0]===t&&D._end[1]>x&&(D._end[1]-=1)}}catch(e){s={error:e}}finally{try{C&&!C.done&&(u=S.return)&&u.call(S)}finally{if(s)throw s.error}}}if(a.dom.features.steps)try{for(var A=n(d.nodeIterator_iteratorList()),N=A.next();!N.done;N=A.next()){var T=N.value;T._root._nodeDocument===e._nodeDocument&&v.dom_runNodeIteratorPreRemovingSteps(T,e)}}catch(e){h={error:e}}finally{try{N&&!N.done&&(_=A.return)&&_.call(A)}finally{if(h)throw h.error}}var O=e._previousSibling,F=e._nextSibling;l.Guard.isDocumentNode(t)&&l.Guard.isElementNode(e)&&(t._documentElement=null),e._parent=null,t._children.delete(e);var k=e._previousSibling,P=e._nextSibling;(e._previousSibling=null,e._nextSibling=null,k&&(k._nextSibling=P),P&&(P._previousSibling=k),k||(t._firstChild=P),P||(t._lastChild=k),a.dom.features.slots&&l.Guard.isSlotable(e)&&null!==e._assignedSlot&&m.shadowTree_isAssigned(e)&&m.shadowTree_assignSlotables(e._assignedSlot),a.dom.features.slots&&l.Guard.isShadowRoot(f.tree_rootNode(t))&&l.Guard.isSlot(t)&&c.isEmpty(t._assignedNodes)&&m.shadowTree_signalASlotChange(t),a.dom.features.slots)&&(null!==f.tree_getFirstDescendantNode(e,!0,!1,(function(e){return l.Guard.isSlot(e)}))&&(m.shadowTree_assignSlotablesForATree(f.tree_rootNode(t)),m.shadowTree_assignSlotablesForATree(e)));a.dom.features.steps&&v.dom_runRemovingSteps(e,t),a.dom.features.customElements&&l.Guard.isCustomElementNode(e)&&p.customElement_enqueueACustomElementCallbackReaction(e,\"disconnectedCallback\",[]);for(var I=f.tree_getFirstDescendantNode(e,!1,!0);null!==I;)a.dom.features.steps&&v.dom_runRemovingSteps(I,e),a.dom.features.customElements&&l.Guard.isCustomElementNode(I)&&p.customElement_enqueueACustomElementCallbackReaction(I,\"disconnectedCallback\",[]),I=f.tree_getNextDescendantNode(e,I,!1,!0);if(a.dom.features.mutationObservers)for(var L=f.tree_getFirstAncestorNode(t,!0);null!==L;){try{for(var M=(g=void 0,n(L._registeredObserverList)),B=M.next();!B.done;B=M.next()){var j=B.value;j.options.subtree&&e._registeredObserverList.push({observer:j.observer,options:j.options,source:j})}}catch(e){g={error:e}}finally{try{B&&!B.done&&(b=M.return)&&b.call(M)}finally{if(g)throw g.error}}L=f.tree_getNextAncestorNode(t,L,!0)}a.dom.features.mutationObservers&&(r||y.observer_queueTreeMutationRecord(t,[],[e],O,F)),a.dom.features.steps&&l.Guard.isTextNode(e)&&v.dom_runChildTextContentChangeSteps(t)}t.mutation_ensurePreInsertionValidity=g,t.mutation_preInsert=b,t.mutation_insert=x,t.mutation_append=function(e,t){return b(e,t,null)},t.mutation_replace=function(e,t,r){var i,o,l,c,h,p,d,m;if(r._nodeType!==u.NodeType.Document&&r._nodeType!==u.NodeType.DocumentFragment&&r._nodeType!==u.NodeType.Element)throw new s.HierarchyRequestError(\"Only document, document fragment and element nodes can contain child nodes. Parent node is \"+r.nodeName+\".\");if(f.tree_isHostIncludingAncestorOf(r,t,!0))throw new s.HierarchyRequestError(\"The node to be inserted cannot be an ancestor of parent node. Node is \"+t.nodeName+\", parent node is \"+r.nodeName+\".\");if(e._parent!==r)throw new s.NotFoundError(\"The reference child node cannot be found under parent node. Child node is \"+e.nodeName+\", parent node is \"+r.nodeName+\".\");if(t._nodeType!==u.NodeType.DocumentFragment&&t._nodeType!==u.NodeType.DocumentType&&t._nodeType!==u.NodeType.Element&&t._nodeType!==u.NodeType.Text&&t._nodeType!==u.NodeType.ProcessingInstruction&&t._nodeType!==u.NodeType.CData&&t._nodeType!==u.NodeType.Comment)throw new s.HierarchyRequestError(\"Only document fragment, document type, element, text, processing instruction, cdata section or comment nodes can be inserted. Node is \"+t.nodeName+\".\");if(t._nodeType===u.NodeType.Text&&r._nodeType===u.NodeType.Document)throw new s.HierarchyRequestError(\"Cannot insert a text node as a child of a document node. Node is \"+t.nodeName+\".\");if(t._nodeType===u.NodeType.DocumentType&&r._nodeType!==u.NodeType.Document)throw new s.HierarchyRequestError(\"A document type node can only be inserted under a document node. Parent node is \"+r.nodeName+\".\");if(r._nodeType===u.NodeType.Document)if(t._nodeType===u.NodeType.DocumentFragment){var v=0;try{for(var g=n(t._children),b=g.next();!b.done;b=g.next()){var E=b.value;if(E._nodeType===u.NodeType.Element)v++;else if(E._nodeType===u.NodeType.Text)throw new s.HierarchyRequestError(\"Cannot insert text a node as a child of a document node. Node is \"+E.nodeName+\".\")}}catch(e){i={error:e}}finally{try{b&&!b.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}if(v>1)throw new s.HierarchyRequestError(\"A document node can only have one document element node. Document fragment to be inserted has \"+v+\" element nodes.\");if(1===v){try{for(var D=n(r._children),S=D.next();!S.done;S=D.next()){if((F=S.value)._nodeType===u.NodeType.Element&&F!==e)throw new s.HierarchyRequestError(\"The document node already has a document element node.\")}}catch(e){l={error:e}}finally{try{S&&!S.done&&(c=D.return)&&c.call(D)}finally{if(l)throw l.error}}for(var C=e._nextSibling;C;){if(C._nodeType===u.NodeType.DocumentType)throw new s.HierarchyRequestError(\"Cannot insert an element node before a document type node.\");C=C._nextSibling}}}else if(t._nodeType===u.NodeType.Element){try{for(var A=n(r._children),N=A.next();!N.done;N=A.next()){if((F=N.value)._nodeType===u.NodeType.Element&&F!==e)throw new s.HierarchyRequestError(\"Document already has a document element node. Node is \"+t.nodeName+\".\")}}catch(e){h={error:e}}finally{try{N&&!N.done&&(p=A.return)&&p.call(A)}finally{if(h)throw h.error}}for(C=e._nextSibling;C;){if(C._nodeType===u.NodeType.DocumentType)throw new s.HierarchyRequestError(\"Cannot insert an element node before a document type node. Node is \"+t.nodeName+\".\");C=C._nextSibling}}else if(t._nodeType===u.NodeType.DocumentType){try{for(var T=n(r._children),O=T.next();!O.done;O=T.next()){var F;if((F=O.value)._nodeType===u.NodeType.DocumentType&&F!==e)throw new s.HierarchyRequestError(\"Document already has a document type node. Node is \"+t.nodeName+\".\")}}catch(e){d={error:e}}finally{try{O&&!O.done&&(m=T.return)&&m.call(T)}finally{if(d)throw d.error}}for(var k=e._previousSibling;k;){if(k._nodeType===u.NodeType.Element)throw new s.HierarchyRequestError(\"Cannot insert a document type node before an element node. Node is \"+t.nodeName+\".\");k=k._previousSibling}}var P=e._nextSibling;P===t&&(P=t._nextSibling);var I=e._previousSibling;_.document_adopt(t,r._nodeDocument);var L=[];null!==e._parent&&(L.push(e),w(e,e._parent,!0));var M=[];return t._nodeType===u.NodeType.DocumentFragment?M=Array.from(t._children):M.push(t),x(t,r,P,!0),a.dom.features.mutationObservers&&y.observer_queueTreeMutationRecord(r,M,L,I,P),e},t.mutation_replaceAll=function(e,t){var r,i;null!==e&&_.document_adopt(e,t._nodeDocument);var o=Array.from(t._children),s=[];e&&e._nodeType===u.NodeType.DocumentFragment?s=Array.from(e._children):null!==e&&s.push(e);try{for(var l=n(o),c=l.next();!c.done;c=l.next()){w(c.value,t,!0)}}catch(e){r={error:e}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}null!==e&&x(e,t,null,!0),a.dom.features.mutationObservers&&y.observer_queueTreeMutationRecord(t,s,o,null,null)},t.mutation_preRemove=function(e,t){if(e._parent!==t)throw new s.NotFoundError(\"The child node cannot be found under parent node. Child node is \"+e.nodeName+\", parent node is \"+t.nodeName+\".\");return w(e,t),e},t.mutation_remove=w},function(e,t,r){\"use strict\";function n(e){return null==e}e.exports.isNothing=n,e.exports.isObject=function(e){return\"object\"==typeof e&&null!==e},e.exports.toArray=function(e){return Array.isArray(e)?e:n(e)?[]:[e]},e.exports.repeat=function(e,t){var r,n=\"\";for(r=0;r<t;r+=1)n+=e;return n},e.exports.isNegativeZero=function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},e.exports.extend=function(e,t){var r,n,i,o;if(t)for(r=0,n=(o=Object.keys(t)).length;r<n;r+=1)e[i=o[r]]=t[i];return e}},function(e,t,r){\"use strict\";var n=r(38),i=r(53),o=r(10);function a(e,t,r){var n=[];return e.include.forEach((function(e){r=a(e,t,r)})),e[t].forEach((function(e){r.forEach((function(t,r){t.tag===e.tag&&t.kind===e.kind&&n.push(r)})),r.push(e)})),r.filter((function(e,t){return-1===n.indexOf(t)}))}function s(e){this.include=e.include||[],this.implicit=e.implicit||[],this.explicit=e.explicit||[],this.implicit.forEach((function(e){if(e.loadKind&&\"scalar\"!==e.loadKind)throw new i(\"There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.\")})),this.compiledImplicit=a(this,\"implicit\",[]),this.compiledExplicit=a(this,\"explicit\",[]),this.compiledTypeMap=function(){var e,t,r={scalar:{},sequence:{},mapping:{},fallback:{}};function n(e){r[e.kind][e.tag]=r.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(n);return r}(this.compiledImplicit,this.compiledExplicit)}s.DEFAULT=null,s.create=function(){var e,t;switch(arguments.length){case 1:e=s.DEFAULT,t=arguments[0];break;case 2:e=arguments[0],t=arguments[1];break;default:throw new i(\"Wrong number of arguments for Schema.create function\")}if(e=n.toArray(e),t=n.toArray(t),!e.every((function(e){return e instanceof s})))throw new i(\"Specified list of super schemas (or a single Schema object) contains a non-Schema object.\");if(!t.every((function(e){return e instanceof o})))throw new i(\"Specified list of YAML types (or a single Type object) contains a non-Type object.\");return new s({include:e,explicit:t})},e.exports=s},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,r){var n=r(8),i=r(42),o=\"\".split;e.exports=n((function(){return!Object(\"z\").propertyIsEnumerable(0)}))?function(e){return\"String\"==i(e)?o.call(e,\"\"):Object(e)}:Object},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t,r){var n,i,o,a=r(186),s=r(11),u=r(13),l=r(21),c=r(14),h=r(57),p=r(45),f=s.WeakMap;if(a){var d=new f,m=d.get,y=d.has,v=d.set;n=function(e,t){return v.call(d,e,t),t},i=function(e){return m.call(d,e)||{}},o=function(e){return y.call(d,e)}}else{var _=h(\"state\");p[_]=!0,n=function(e,t){return l(e,_,t),t},i=function(e){return c(e,_)?e[_]:{}},o=function(e){return c(e,_)}}e.exports={set:n,get:i,has:o,enforce:function(e){return o(e)?i(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!u(t)||(r=i(t)).type!==e)throw TypeError(\"Incompatible receiver, \"+e+\" required\");return r}}}},function(e,t){e.exports=!1},function(e,t){e.exports={}},function(e,t,r){var n=r(120),i=r(11),o=function(e){return\"function\"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?o(n[e])||o(i[e]):n[e]&&n[e][t]||i[e]&&i[e][t]}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){\"use strict\";var n=r(8);e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){throw 1},1)}))}},function(e,t){e.exports={}},function(e,t,r){\"use strict\";r(31),r(32),r(33),r(220),r(64),r(19),r(65),r(20),r(68),r(66),r(92),r(144),r(22),r(94),r(23);var n=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},i=this&&this.__read||function(e,t){var r=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(t,\"__esModule\",{value:!0});var a=r(2),s=r(69),u=r(95),l=r(7),c=r(0),h=function(){function e(e){this.level=0,this._builderOptions=e}return e.prototype.declaration=function(e,t,r){},e.prototype.docType=function(e,t,r){},e.prototype.comment=function(e){},e.prototype.text=function(e){},e.prototype.instruction=function(e,t){},e.prototype.cdata=function(e){},e.prototype.openTagBegin=function(e){},e.prototype.openTagEnd=function(e,t,r){},e.prototype.closeTag=function(e){},e.prototype.attributes=function(e){var t,r;try{for(var i=n(e),o=i.next();!o.done;o=i.next()){var a=o.value;this.attribute(null===a[1]?a[2]:a[1]+\":\"+a[2],a[3])}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.attribute=function(e,t){},e.prototype.beginElement=function(e){},e.prototype.endElement=function(e){},e.prototype.serializeNode=function(e,t){var r=void 0!==e._nodeDocument&&e._nodeDocument._hasNamespaces;if(this.level=0,this.currentNode=e,r){var n=new u.NamespacePrefixMap;n.set(\"xml\",l.namespace.XML);this._serializeNodeNS(e,null,n,{value:1},t)}else this._serializeNode(e,t)},e.prototype._serializeNodeNS=function(e,t,r,n,i){switch(this.currentNode=e,e.nodeType){case a.NodeType.Element:this._serializeElementNS(e,t,r,n,i);break;case a.NodeType.Document:this._serializeDocumentNS(e,t,r,n,i);break;case a.NodeType.Comment:this._serializeComment(e,i);break;case a.NodeType.Text:this._serializeText(e,i);break;case a.NodeType.DocumentFragment:this._serializeDocumentFragmentNS(e,t,r,n,i);break;case a.NodeType.DocumentType:this._serializeDocumentType(e,i);break;case a.NodeType.ProcessingInstruction:this._serializeProcessingInstruction(e,i);break;case a.NodeType.CData:this._serializeCData(e,i);break;default:throw new Error(\"Unknown node type: \"+e.nodeType)}},e.prototype._serializeNode=function(e,t){switch(this.currentNode=e,e.nodeType){case a.NodeType.Element:this._serializeElement(e,t);break;case a.NodeType.Document:this._serializeDocument(e,t);break;case a.NodeType.Comment:this._serializeComment(e,t);break;case a.NodeType.Text:this._serializeText(e,t);break;case a.NodeType.DocumentFragment:this._serializeDocumentFragment(e,t);break;case a.NodeType.DocumentType:this._serializeDocumentType(e,t);break;case a.NodeType.ProcessingInstruction:this._serializeProcessingInstruction(e,t);break;case a.NodeType.CData:this._serializeCData(e,t);break;default:throw new Error(\"Unknown node type: \"+e.nodeType)}},e.prototype._serializeElementNS=function(t,r,i,a,s){var u,h,p=[];if(s&&(-1!==t.localName.indexOf(\":\")||!c.xml_isName(t.localName)))throw new Error(\"Node local name contains invalid characters (well-formed required).\");var f=\"\",d=!1,m=!1,y=i.copy(),v={},_=this._recordNamespaceInformation(t,y,v),g=r,b=t.namespaceURI;if(g===b)null!==_&&(m=!0),f=b===l.namespace.XML?\"xml:\"+t.localName:t.localName,this.beginElement(f),this.openTagBegin(f);else{var x=t.prefix,w=null;if(null===x&&b===_||(w=y.get(x,b)),\"xmlns\"===x){if(s)throw new Error(\"An element cannot have the 'xmlns' prefix (well-formed required).\");w=x}null!==w?(f=w+\":\"+t.localName,null!==_&&_!==l.namespace.XML&&(g=_||null),this.beginElement(f),this.openTagBegin(f)):null!==x?(x in v&&(x=this._generatePrefix(b,y,a)),y.set(x,b),f+=x+\":\"+t.localName,this.beginElement(f),this.openTagBegin(f),p.push([null,\"xmlns\",x,this._serializeAttributeValue(b,s)]),null!==_&&(g=_||null)):null===_||null!==_&&_!==b?(m=!0,f+=t.localName,g=b,this.beginElement(f),this.openTagBegin(f),p.push([null,null,\"xmlns\",this._serializeAttributeValue(b,s)])):(f+=t.localName,g=b,this.beginElement(f),this.openTagBegin(f))}p.push.apply(p,o(this._serializeAttributesNS(t,y,a,v,m,s))),this.attributes(p);var E=b===l.namespace.HTML;if(E&&0===t.childNodes.length&&e._VoidElementNames.has(t.localName)?(this.openTagEnd(f,!0,!0),this.endElement(f),d=!0):E||0!==t.childNodes.length?this.openTagEnd(f,!1,!1):(this.openTagEnd(f,!0,!1),this.endElement(f),d=!0),!d){if(E&&\"template\"===t.localName);else try{for(var D=n(t.childNodes),S=D.next();!S.done;S=D.next()){var C=S.value;this.level++,this._serializeNodeNS(C,g,y,a,s),this.level--}}catch(e){u={error:e}}finally{try{S&&!S.done&&(h=D.return)&&h.call(D)}finally{if(u)throw u.error}}this.closeTag(f),this.endElement(f)}},e.prototype._serializeElement=function(e,t){var r,i;if(t&&(-1!==e.localName.indexOf(\":\")||!c.xml_isName(e.localName)))throw new Error(\"Node local name contains invalid characters (well-formed required).\");var o=!1,a=e.localName;this.beginElement(a),this.openTagBegin(a);var s=this._serializeAttributes(e,t);if(this.attributes(s),e.hasChildNodes()?this.openTagEnd(a,!1,!1):(this.openTagEnd(a,!0,!1),this.endElement(a),o=!0),!o){try{for(var u=n(e._children),l=u.next();!l.done;l=u.next()){var h=l.value;this.level++,this._serializeNode(h,t),this.level--}}catch(e){r={error:e}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}this.closeTag(a),this.endElement(a)}},e.prototype._serializeDocumentNS=function(e,t,r,i,o){var a,s;if(o&&null===e.documentElement)throw new Error(\"Missing document element (well-formed required).\");try{for(var u=n(e.childNodes),l=u.next();!l.done;l=u.next()){var c=l.value;this._serializeNodeNS(c,t,r,i,o)}}catch(e){a={error:e}}finally{try{l&&!l.done&&(s=u.return)&&s.call(u)}finally{if(a)throw a.error}}},e.prototype._serializeDocument=function(e,t){var r,i;if(t&&null===e.documentElement)throw new Error(\"Missing document element (well-formed required).\");try{for(var o=n(e._children),a=o.next();!a.done;a=o.next()){var s=a.value;this._serializeNode(s,t)}}catch(e){r={error:e}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}},e.prototype._serializeComment=function(e,t){if(t&&(!c.xml_isLegalChar(e.data)||-1!==e.data.indexOf(\"--\")||e.data.endsWith(\"-\")))throw new Error(\"Comment data contains invalid characters (well-formed required).\");this.comment(e.data)},e.prototype._serializeText=function(e,t){if(t&&!c.xml_isLegalChar(e.data))throw new Error(\"Text data contains invalid characters (well-formed required).\");var r=e.data.replace(/(?!&([^&;]*);)&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\");this.text(r)},e.prototype._serializeDocumentFragmentNS=function(e,t,r,i,o){var a,s;try{for(var u=n(e.childNodes),l=u.next();!l.done;l=u.next()){var c=l.value;this._serializeNodeNS(c,t,r,i,o)}}catch(e){a={error:e}}finally{try{l&&!l.done&&(s=u.return)&&s.call(u)}finally{if(a)throw a.error}}},e.prototype._serializeDocumentFragment=function(e,t){var r,i;try{for(var o=n(e._children),a=o.next();!a.done;a=o.next()){var s=a.value;this._serializeNode(s,t)}}catch(e){r={error:e}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}},e.prototype._serializeDocumentType=function(e,t){if(t&&!c.xml_isPubidChar(e.publicId))throw new Error(\"DocType public identifier does not match PubidChar construct (well-formed required).\");if(t&&(!c.xml_isLegalChar(e.systemId)||-1!==e.systemId.indexOf('\"')&&-1!==e.systemId.indexOf(\"'\")))throw new Error(\"DocType system identifier contains invalid characters (well-formed required).\");this.docType(e.name,e.publicId,e.systemId)},e.prototype._serializeProcessingInstruction=function(e,t){if(t&&(-1!==e.target.indexOf(\":\")||/^xml$/i.test(e.target)))throw new Error(\"Processing instruction target contains invalid characters (well-formed required).\");if(t&&(!c.xml_isLegalChar(e.data)||-1!==e.data.indexOf(\"?>\")))throw new Error(\"Processing instruction data contains invalid characters (well-formed required).\");this.instruction(e.target,e.data)},e.prototype._serializeCData=function(e,t){if(t&&-1!==e.data.indexOf(\"]]>\"))throw new Error(\"CDATA contains invalid characters (well-formed required).\");this.cdata(e.data)},e.prototype._serializeAttributesNS=function(e,t,r,i,o,a){var u,h,p=[],f=a?new s.LocalNameSet:void 0;try{for(var d=n(e.attributes),m=d.next();!m.done;m=d.next()){var y=m.value;if(a||o||null!==y.namespaceURI){if(a&&f&&f.has(y.namespaceURI,y.localName))throw new Error(\"Element contains duplicate attributes (well-formed required).\");a&&f&&f.set(y.namespaceURI,y.localName);var v=y.namespaceURI,_=null;if(null!==v)if(_=t.get(y.prefix,v),v===l.namespace.XMLNS){if(y.value===l.namespace.XML||null===y.prefix&&o||null!==y.prefix&&(!(y.localName in i)||i[y.localName]!==y.value)&&t.has(y.localName,y.value))continue;if(a&&y.value===l.namespace.XMLNS)throw new Error(\"XMLNS namespace is reserved (well-formed required).\");if(a&&\"\"===y.value)throw new Error(\"Namespace prefix declarations cannot be used to undeclare a namespace (well-formed required).\");\"xmlns\"===y.prefix&&(_=\"xmlns\")}else null===_&&(_=null===y.prefix||t.hasPrefix(y.prefix)&&!t.has(y.prefix,v)?this._generatePrefix(v,t,r):y.prefix,p.push([null,\"xmlns\",_,this._serializeAttributeValue(v,a)]));if(null!==_&&_,a&&(-1!==y.localName.indexOf(\":\")||!c.xml_isName(y.localName)||\"xmlns\"===y.localName&&null===v))throw new Error(\"Attribute local name contains invalid characters (well-formed required).\");p.push([v,_,y.localName,this._serializeAttributeValue(y.value,a)])}else p.push([null,null,y.localName,this._serializeAttributeValue(y.value,a)])}}catch(e){u={error:e}}finally{try{m&&!m.done&&(h=d.return)&&h.call(d)}finally{if(u)throw u.error}}return p},e.prototype._serializeAttributes=function(e,t){var r,i,o=[],a=t?{}:void 0;try{for(var s=n(e.attributes),u=s.next();!u.done;u=s.next()){var l=u.value;if(t){if(t&&a&&l.localName in a)throw new Error(\"Element contains duplicate attributes (well-formed required).\");if(t&&a&&(a[l.localName]=!0),t&&(-1!==l.localName.indexOf(\":\")||!c.xml_isName(l.localName)))throw new Error(\"Attribute local name contains invalid characters (well-formed required).\");o.push([null,null,l.localName,this._serializeAttributeValue(l.value,t)])}else o.push([null,null,l.localName,this._serializeAttributeValue(l.value,t)])}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return o},e.prototype._recordNamespaceInformation=function(e,t,r){var i,o,a=null;try{for(var s=n(e.attributes),u=s.next();!u.done;u=s.next()){var c=u.value,h=c.namespaceURI,p=c.prefix;if(h===l.namespace.XMLNS){if(null===p){a=c.value;continue}var f=c.localName,d=c.value;if(d===l.namespace.XML)continue;if(\"\"===d&&(d=null),t.has(f,d))continue;t.set(f,d),r[f]=d||\"\"}}}catch(e){i={error:e}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}return a},e.prototype._generatePrefix=function(e,t,r){var n=\"ns\"+r.value.toString();return r.value++,t.set(n,e),n},e.prototype._serializeAttributeValue=function(e,t){if(t&&null!==e&&!c.xml_isLegalChar(e))throw new Error(\"Invalid characters in attribute value.\");return null===e?\"\":e.replace(/(?!&([^&;]*);)&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/\"/g,\"&quot;\")},e._VoidElementNames=new Set([\"area\",\"base\",\"basefont\",\"bgsound\",\"br\",\"col\",\"embed\",\"frame\",\"hr\",\"img\",\"input\",\"keygen\",\"link\",\"menuitem\",\"meta\",\"param\",\"source\",\"track\",\"wbr\"]),e}();t.BaseWriter=h},function(e,t,r){\"use strict\";var n=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},i=this&&this.__read||function(e,t){var r=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(6),a=r(3),s=r(7),u=r(29),l=r(17),c=r(97);function h(){var e=o.dom.window;e._mutationObserverMicrotaskQueued||(e._mutationObserverMicrotaskQueued=!0,Promise.resolve().then((function(){p()})))}function p(){var e,t,r,i,u=o.dom.window;u._mutationObserverMicrotaskQueued=!1;var l=s.set.clone(u._mutationObservers),h=s.set.clone(u._signalSlots);s.set.empty(u._signalSlots);var p=function(e){var t=s.list.clone(e._recordQueue);s.list.empty(e._recordQueue);for(var r=0;r<e._nodeList.length;r++){var n=e._nodeList[r];s.list.remove(n._registeredObserverList,(function(t){return a.Guard.isTransientRegisteredObserver(t)&&t.observer===e}))}if(!s.list.isEmpty(t))try{e._callback.call(e,t,e)}catch(e){}};try{for(var f=n(l),d=f.next();!d.done;d=f.next()){p(d.value)}}catch(t){e={error:t}}finally{try{d&&!d.done&&(t=f.return)&&t.call(f)}finally{if(e)throw e.error}}if(o.dom.features.slots)try{for(var m=n(h),y=m.next();!y.done;y=m.next()){var v=y.value;c.event_fireAnEvent(\"slotchange\",v,void 0,{bubbles:!0})}}catch(e){r={error:e}}finally{try{y&&!y.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}}function f(e,t,r,o,a,s,c,p,f){for(var d,m,y=new Map,v=l.tree_getFirstAncestorNode(t,!0);null!==v;){for(var _=0;_<v._registeredObserverList.length;_++){var g=v._registeredObserverList[_],b=g.options;if((v===t||b.subtree)&&((\"attributes\"!==e||b.attributes)&&(\"attributes\"!==e||!b.attributeFilter||b.attributeFilter.indexOf(r||\"\")&&null===o)&&(\"characterData\"!==e||b.characterData)&&(\"childList\"!==e||b.childList))){var x=g.observer;y.has(x)||y.set(x,null),(\"attributes\"===e&&b.attributeOldValue||\"characterData\"===e&&b.characterDataOldValue)&&y.set(x,a)}}v=l.tree_getNextAncestorNode(t,v,!0)}try{for(var w=n(y),E=w.next();!E.done;E=w.next()){var D=i(E.value,2),S=D[0],C=D[1],A=u.create_mutationRecord(e,t,u.create_nodeListStatic(t,s),u.create_nodeListStatic(t,c),p,f,r,o,C);S._recordQueue.push(A)}}catch(e){d={error:e}}finally{try{E&&!E.done&&(m=w.return)&&m.call(w)}finally{if(d)throw d.error}}h()}t.observer_queueAMutationObserverMicrotask=h,t.observer_notifyMutationObservers=p,t.observer_queueMutationRecord=f,t.observer_queueTreeMutationRecord=function(e,t,r,n,i){f(\"childList\",e,null,null,null,t,r,n,i)},t.observer_queueAttributeMutationRecord=function(e,t,r,n){f(\"attributes\",e,t,r,n,[],[],null,null)}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(6),i=r(7),o=r(3),a=r(9),s=r(29),u=r(73),l=r(51),c=r(30),h=r(37),p=r(106);function f(e,t,r){n.dom.features.mutationObservers&&l.observer_queueAttributeMutationRecord(t,e._localName,e._namespace,e._value),n.dom.features.customElements&&o.Guard.isCustomElementNode(t)&&u.customElement_enqueueACustomElementCallbackReaction(t,\"attributeChangedCallback\",[e._localName,e._value,r,e._namespace]),n.dom.features.steps&&c.dom_runAttributeChangeSteps(t,e._localName,e._value,r,e._namespace),e._value=r}function d(e,t){n.dom.features.mutationObservers&&l.observer_queueAttributeMutationRecord(t,e._localName,e._namespace,null),n.dom.features.customElements&&o.Guard.isCustomElementNode(t)&&u.customElement_enqueueACustomElementCallbackReaction(t,\"attributeChangedCallback\",[e._localName,null,e._value,e._namespace]),n.dom.features.steps&&c.dom_runAttributeChangeSteps(t,e._localName,null,e._value,e._namespace),t._attributeList._asArray().push(e),e._element=t,t._nodeDocument._hasNamespaces||null===e._namespace&&null===e._namespacePrefix&&\"xmlns\"!==e._localName||(t._nodeDocument._hasNamespaces=!0)}function m(e,t){n.dom.features.mutationObservers&&l.observer_queueAttributeMutationRecord(t,e._localName,e._namespace,e._value),n.dom.features.customElements&&o.Guard.isCustomElementNode(t)&&u.customElement_enqueueACustomElementCallbackReaction(t,\"attributeChangedCallback\",[e._localName,e._value,null,e._namespace]),n.dom.features.steps&&c.dom_runAttributeChangeSteps(t,e._localName,e._value,null,e._namespace);var r=t._attributeList._asArray().indexOf(e);t._attributeList._asArray().splice(r,1),e._element=null}function y(e,t,r){n.dom.features.mutationObservers&&l.observer_queueAttributeMutationRecord(r,e._localName,e._namespace,e._value),n.dom.features.customElements&&o.Guard.isCustomElementNode(r)&&u.customElement_enqueueACustomElementCallbackReaction(r,\"attributeChangedCallback\",[e._localName,e._value,t._value,e._namespace]),n.dom.features.steps&&c.dom_runAttributeChangeSteps(r,e._localName,e._value,t._value,e._namespace);var i=r._attributeList._asArray().indexOf(e);-1!==i&&(r._attributeList._asArray()[i]=t),e._element=null,t._element=r,r._nodeDocument._hasNamespaces||null===t._namespace&&null===t._namespacePrefix&&\"xmlns\"!==t._localName||(r._nodeDocument._hasNamespaces=!0)}function v(e,t){return t._namespace===i.namespace.HTML&&\"html\"===t._nodeDocument._type&&(e=e.toLowerCase()),t._attributeList._asArray().find((function(t){return t._qualifiedName===e}))||null}function _(e,t,r){var n=e||null;return r._attributeList._asArray().find((function(e){return e._namespace===n&&e._localName===t}))||null}t.element_has=function(e,t){return-1!==t._attributeList._asArray().indexOf(e)},t.element_change=f,t.element_append=d,t.element_remove=m,t.element_replace=y,t.element_getAnAttributeByName=v,t.element_getAnAttributeByNamespaceAndLocalName=_,t.element_getAnAttributeValue=function(e,t,r){void 0===r&&(r=\"\");var n=_(r,t,e);return null===n?\"\":n._value},t.element_setAnAttribute=function(e,t){if(null!==e._element&&e._element!==t)throw new a.InUseAttributeError(\"This attribute already exists in the document: \"+e._qualifiedName+\" as a child of \"+e._element._qualifiedName+\".\");var r=_(e._namespace||\"\",e._localName,t);return r===e?e:(null!==r?y(r,e,t):d(e,t),r)},t.element_setAnAttributeValue=function(e,t,r,n,i){void 0===n&&(n=null),void 0===i&&(i=null);var o=_(i||\"\",t,e);if(null===o){var a=s.create_attr(e._nodeDocument,t);return a._namespace=i,a._namespacePrefix=n,a._value=r,void d(a,e)}f(o,e,r)},t.element_removeAnAttributeByName=function(e,t){var r=v(e,t);return null!==r&&m(r,t),r},t.element_removeAnAttributeByNamespaceAndLocalName=function(e,t,r){var n=_(e,t,r);return null!==n&&m(n,r),n},t.element_createAnElement=function(e,t,r,o,l,c){void 0===o&&(o=null),void 0===l&&(l=null),void 0===c&&(c=!1);var h=null;if(!n.dom.features.customElements)return(h=s.create_element(e,t,r,o))._customElementState=\"uncustomized\",h._customElementDefinition=null,h._is=l,h;var f=u.customElement_lookUpACustomElementDefinition(e,r,t,l);if(null!==f&&f.name!==f.localName)(h=new(p.document_elementInterface(t,i.namespace.HTML)))._localName=t,h._namespace=i.namespace.HTML,h._namespacePrefix=o,h._customElementState=\"undefined\",h._customElementDefinition=null,h._is=l,h._nodeDocument=e,c?u.customElement_upgrade(f,h):u.customElement_enqueueACustomElementUpgradeReaction(h,f);else if(null!==f)if(c)try{var d=new(0,f.constructor);if(console.assert(void 0!==d._customElementState),console.assert(void 0!==d._customElementDefinition),console.assert(d._namespace===i.namespace.HTML),0!==d._attributeList.length)throw new a.NotSupportedError(\"Custom element already has attributes.\");if(0!==d._children.size)throw new a.NotSupportedError(\"Custom element already has child nodes.\");if(null!==d._parent)throw new a.NotSupportedError(\"Custom element already has a parent node.\");if(d._nodeDocument!==e)throw new a.NotSupportedError(\"Custom element is already in a document.\");if(d._localName!==t)throw new a.NotSupportedError(\"Custom element has a different local name.\");d._namespacePrefix=o,d._is=null}catch(r){(h=s.create_htmlUnknownElement(e,t,i.namespace.HTML,o))._customElementState=\"failed\",h._customElementDefinition=null,h._is=null}else(h=s.create_htmlElement(e,t,i.namespace.HTML,o))._customElementState=\"undefined\",h._customElementDefinition=null,h._is=null,u.customElement_enqueueACustomElementUpgradeReaction(h,f);else{(h=new(p.document_elementInterface(t,r)))._localName=t,h._namespace=r,h._namespacePrefix=o,h._customElementState=\"uncustomized\",h._customElementDefinition=null,h._is=l,h._nodeDocument=e,r!==i.namespace.HTML||null===l&&!u.customElement_isValidCustomElementName(t)||(h._customElementState=\"undefined\")}if(null===h)throw new Error(\"Unable to create element.\");return h},t.element_insertAdjacent=function(e,t,r){switch(t.toLowerCase()){case\"beforebegin\":return null===e._parent?null:h.mutation_preInsert(r,e._parent,e);case\"afterbegin\":return h.mutation_preInsert(r,e,e._firstChild);case\"beforeend\":return h.mutation_preInsert(r,e,null);case\"afterend\":return null===e._parent?null:h.mutation_preInsert(r,e._parent,e._nextSibling);default:throw new a.SyntaxError('Invalid \\'where\\' argument. \"beforebegin\", \"afterbegin\", \"beforeend\" or \"afterend\" expected')}}},function(e,t,r){\"use strict\";function n(e,t){Error.call(this),this.name=\"YAMLException\",this.reason=e,this.mark=t,this.message=(this.reason||\"(unknown reason)\")+(this.mark?\" \"+this.mark.toString():\"\"),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||\"\"}n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n.prototype.toString=function(e){var t=this.name+\": \";return t+=this.reason||\"(unknown reason)\",!e&&this.mark&&(t+=\" \"+this.mark.toString()),t},e.exports=n},function(e,t,r){\"use strict\";var n=r(39);e.exports=new n({include:[r(181)],implicit:[r(293),r(294)],explicit:[r(295),r(296),r(297),r(298)]})},function(e,t,r){var n=r(16),i=r(79),o=r(40),a=r(24),s=r(56),u=r(14),l=r(115),c=Object.getOwnPropertyDescriptor;t.f=n?c:function(e,t){if(e=a(e),t=s(t,!0),l)try{return c(e,t)}catch(e){}if(u(e,t))return o(!i.f.call(e,t),e[t])}},function(e,t,r){var n=r(13);e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&\"function\"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if(\"function\"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&\"function\"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError(\"Can't convert object to primitive value\")}},function(e,t,r){var n=r(81),i=r(58),o=n(\"keys\");e.exports=function(e){return o[e]||(o[e]=i(e))}},function(e,t){var r=0,n=Math.random();e.exports=function(e){return\"Symbol(\"+String(void 0===e?\"\":e)+\")_\"+(++r+n).toString(36)}},function(e,t,r){var n=r(42);e.exports=Array.isArray||function(e){return\"Array\"==n(e)}},function(e,t,r){var n,i=r(18),o=r(188),a=r(84),s=r(45),u=r(189),l=r(116),c=r(57),h=c(\"IE_PROTO\"),p=function(){},f=function(e){return\"<script>\"+e+\"<\\/script>\"},d=function(){try{n=document.domain&&new ActiveXObject(\"htmlfile\")}catch(e){}var e,t;d=n?function(e){e.write(f(\"\")),e.close();var t=e.parentWindow.Object;return e=null,t}(n):((t=l(\"iframe\")).style.display=\"none\",u.appendChild(t),t.src=String(\"javascript:\"),(e=t.contentWindow.document).open(),e.write(f(\"document.F=Object\")),e.close(),e.F);for(var r=a.length;r--;)delete d.prototype[a[r]];return d()};s[h]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(p.prototype=i(e),r=new p,p.prototype=null,r[h]=e):r=d(),void 0===t?r:o(r,t)}},function(e,t,r){var n=r(121),i=r(84);e.exports=Object.keys||function(e){return n(e,i)}},function(e,t,r){var n=r(15).f,i=r(14),o=r(5)(\"toStringTag\");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},function(e,t,r){var n=r(8),i=r(5),o=r(129),a=i(\"species\");e.exports=function(e){return o>=51||!n((function(){var t=[];return(t.constructor={})[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},function(e,t,r){\"use strict\";var n=r(4),i=r(122).indexOf,o=r(48),a=r(28),s=[].indexOf,u=!!s&&1/[1].indexOf(1,-0)<0,l=o(\"indexOf\"),c=a(\"indexOf\",{ACCESSORS:!0,1:0});n({target:\"Array\",proto:!0,forced:u||!l||!c},{indexOf:function(e){return u?s.apply(this,arguments)||0:i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,r){var n=r(16),i=r(15).f,o=Function.prototype,a=o.toString,s=/^\\s*function ([^ (]*)/;n&&!(\"name\"in o)&&i(o,\"name\",{configurable:!0,get:function(){try{return a.call(this).match(s)[1]}catch(e){return\"\"}}})},function(e,t,r){\"use strict\";var n=r(25),i=r(18),o=r(8),a=r(136),s=RegExp.prototype,u=s.toString,l=o((function(){return\"/a/b\"!=u.call({source:\"a\",flags:\"b\"})})),c=\"toString\"!=u.name;(l||c)&&n(RegExp.prototype,\"toString\",(function(){var e=i(this),t=String(e.source),r=e.flags;return\"/\"+t+\"/\"+String(void 0===r&&e instanceof RegExp&&!(\"flags\"in s)?a.call(e):r)}),{unsafe:!0})},function(e,t,r){\"use strict\";r(31),r(32),r(33),r(19),r(138),r(20),r(66),r(22),r(23);var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")};Object.defineProperty(t,\"__esModule\",{value:!0});var a=r(1),s=r(2),u=function(e){function t(t,r){var n=e.call(this,t)||this;return n._writerOptions=a.applyDefaults(r,{format:\"object\",wellFormed:!1,group:!1,verbose:!1}),n}return i(t,e),t.prototype.serialize=function(e){return this._currentList=[],this._currentIndex=0,this._listRegister=[this._currentList],this.serializeNode(e,this._writerOptions.wellFormed),this._process(this._currentList,this._writerOptions)},t.prototype._process=function(e,t){var r,n,i,o,u,l,c;if(0===e.length)return{};for(var h={},p=!1,f=0,d=0,m=0,y=0,v=0;v<e.length;v++){var _=e[v];switch(I=Object.keys(_)[0]){case\"@\":continue;case\"#\":f++;break;case\"!\":d++;break;case\"?\":m++;break;case\"$\":y++;break;default:h[I]?p=!0:h[I]=!0}}var g=this._getAttrKey(),b=this._getNodeKey(s.NodeType.Text),x=this._getNodeKey(s.NodeType.Comment),w=this._getNodeKey(s.NodeType.ProcessingInstruction),E=this._getNodeKey(s.NodeType.CData);if(1===f&&1===e.length&&a.isString(e[0][\"#\"]))return e[0][\"#\"];if(p){var D={};for(v=0;v<e.length;v++){_=e[v];if(\"@\"===(I=Object.keys(_)[0])){var S=_[\"@\"];1===(L=Object.keys(S)).length?D[g+L[0]]=S[L[0]]:D[g]=_[\"@\"]}}var C=[];for(v=0;v<e.length;v++){_=e[v];switch(I=Object.keys(_)[0]){case\"@\":break;case\"#\":C.push(((r={})[b]=_[\"#\"],r));break;case\"!\":C.push(((n={})[x]=_[\"!\"],n));break;case\"?\":C.push(((i={})[w]=_[\"?\"],i));break;case\"$\":C.push(((o={})[E]=_.$,o));break;default:if(0!==(B=_)[I].length&&a.isArray(B[I][0])){for(var A=[],N=B[I],T=0;T<N.length;T++)A.push(this._process(N[T],t));C.push(((u={})[I]=A,u))}else t.verbose?C.push(((l={})[I]=[this._process(B[I],t)],l)):C.push(((c={})[I]=this._process(B[I],t),c))}}return D[b]=C,D}var O=1,F=1,k=1,P=1;for(D={},v=0;v<e.length;v++){var I;_=e[v];switch(I=Object.keys(_)[0]){case\"@\":S=_[\"@\"];var L=Object.keys(S);if(t.group&&1!==L.length)D[g]=S;else for(var M in S)D[g+M]=S[M];break;case\"#\":O=this._processSpecItem(_[\"#\"],D,t.group,b,f,O);break;case\"!\":F=this._processSpecItem(_[\"!\"],D,t.group,x,d,F);break;case\"?\":k=this._processSpecItem(_[\"?\"],D,t.group,w,m,k);break;case\"$\":P=this._processSpecItem(_.$,D,t.group,E,y,P);break;default:var B;if(0!==(B=_)[I].length&&a.isArray(B[I][0])){A=[],N=B[I];for(var j=0;j<N.length;j++)A.push(this._process(N[j],t));D[I]=A}else t.verbose?D[I]=[this._process(B[I],t)]:D[I]=this._process(B[I],t)}}return D},t.prototype._processSpecItem=function(e,t,r,n,i,s){var u,l;if(!r&&a.isArray(e)&&i+e.length>2)try{for(var c=o(e),h=c.next();!h.done;h=c.next()){var p=h.value;t[n+(s++).toString()]=p}}catch(e){u={error:e}}finally{try{h&&!h.done&&(l=c.return)&&l.call(c)}finally{if(u)throw u.error}}else t[i>1?n+(s++).toString():n]=e;return s},t.prototype.beginElement=function(e){var t,r,n=[];if(0===this._currentList.length)this._currentList.push(((t={})[e]=n,t));else{var i=this._currentList[this._currentList.length-1];if(this._isElementNode(i,e))if(0!==i[e].length&&a.isArray(i[e][0]))i[e].push(n);else i[e]=[i[e],n];else this._currentList.push(((r={})[e]=n,r))}this._currentIndex++,this._listRegister.length>this._currentIndex?this._listRegister[this._currentIndex]=n:this._listRegister.push(n),this._currentList=n},t.prototype.endElement=function(){this._currentList=this._listRegister[--this._currentIndex]},t.prototype.attribute=function(e,t){var r,n;if(0===this._currentList.length)this._currentList.push({\"@\":(r={},r[e]=t,r)});else{var i=this._currentList[this._currentList.length-1];this._isAttrNode(i)?i[\"@\"][e]=t:this._currentList.push({\"@\":(n={},n[e]=t,n)})}},t.prototype.comment=function(e){if(0===this._currentList.length)this._currentList.push({\"!\":e});else{var t=this._currentList[this._currentList.length-1];this._isCommentNode(t)?a.isArray(t[\"!\"])?t[\"!\"].push(e):t[\"!\"]=[t[\"!\"],e]:this._currentList.push({\"!\":e})}},t.prototype.text=function(e){if(0===this._currentList.length)this._currentList.push({\"#\":e});else{var t=this._currentList[this._currentList.length-1];this._isTextNode(t)?a.isArray(t[\"#\"])?t[\"#\"].push(e):t[\"#\"]=[t[\"#\"],e]:this._currentList.push({\"#\":e})}},t.prototype.instruction=function(e,t){var r=\"\"===t?e:e+\" \"+t;if(0===this._currentList.length)this._currentList.push({\"?\":r});else{var n=this._currentList[this._currentList.length-1];this._isInstructionNode(n)?a.isArray(n[\"?\"])?n[\"?\"].push(r):n[\"?\"]=[n[\"?\"],r]:this._currentList.push({\"?\":r})}},t.prototype.cdata=function(e){if(0===this._currentList.length)this._currentList.push({$:e});else{var t=this._currentList[this._currentList.length-1];this._isCDATANode(t)?a.isArray(t.$)?t.$.push(e):t.$=[t.$,e]:this._currentList.push({$:e})}},t.prototype._isAttrNode=function(e){return\"@\"in e},t.prototype._isTextNode=function(e){return\"#\"in e},t.prototype._isCommentNode=function(e){return\"!\"in e},t.prototype._isInstructionNode=function(e){return\"?\"in e},t.prototype._isCDATANode=function(e){return\"$\"in e},t.prototype._isElementNode=function(e,t){return t in e},t.prototype._getAttrKey=function(){return this._builderOptions.convert.att},t.prototype._getNodeKey=function(e){switch(e){case s.NodeType.Comment:return this._builderOptions.convert.comment;case s.NodeType.Text:return this._builderOptions.convert.text;case s.NodeType.ProcessingInstruction:return this._builderOptions.convert.ins;case s.NodeType.CData:return this._builderOptions.convert.cdata;default:throw new Error(\"Invalid node type.\")}},t}(r(50).BaseWriter);t.ObjectWriter=u},function(e,t,r){\"use strict\";var n=r(4),i=r(93);n({target:\"RegExp\",proto:!0,forced:/./.exec!==i},{exec:i})},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(){this._items={},this._nullItems={}}return e.prototype.set=function(e,t){null===e?this._nullItems[t]=!0:(this._items[e]||(this._items[e]={}),this._items[e][t]=!0)},e.prototype.has=function(e,t){return null===e?!0===this._nullItems[t]:!!this._items[e]&&!0===this._items[e][t]},e}();t.LocalNameSet=n},function(e,t,r){\"use strict\";var n=this&&this.__read||function(e,t){var r=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(9),o=r(3),a=r(0),s=function(){function e(){}return Object.defineProperty(e.prototype,\"_eventListenerList\",{get:function(){return this.__eventListenerList||(this.__eventListenerList=[])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"_eventHandlerMap\",{get:function(){return this.__eventHandlerMap||(this.__eventHandlerMap={})},enumerable:!0,configurable:!0}),e.prototype.addEventListener=function(e,t,r){void 0===r&&(r={passive:!1,once:!1,capture:!1});var i,s=n(a.eventTarget_flattenMore(r),3),u=s[0],l=s[1],c=s[2];t&&(i=o.Guard.isEventListener(t)?t:{handleEvent:t},a.eventTarget_addEventListener(this,{type:e,callback:i,capture:u,passive:l,once:c,removed:!1}))},e.prototype.removeEventListener=function(e,t,r){void 0===r&&(r={capture:!1});var n=a.eventTarget_flatten(r);if(t)for(var i=0;i<this._eventListenerList.length;i++){var s=this._eventListenerList[i];if(s.type===e&&s.capture===n){if(o.Guard.isEventListener(t)&&s.callback===t){a.eventTarget_removeEventListener(this,s,i);break}if(t&&s.callback.handleEvent===t){a.eventTarget_removeEventListener(this,s,i);break}}}},e.prototype.dispatchEvent=function(e){if(e._dispatchFlag||!e._initializedFlag)throw new i.InvalidStateError;return e._isTrusted=!1,a.event_dispatch(e,this)},e.prototype._getTheParent=function(e){return null},e}();t.EventTargetImpl=s},function(e,t,r){\"use strict\";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(34),a=r(0),s=function(e){function t(t){var r=e.call(this)||this;return r._data=t,r}return i(t,e),Object.defineProperty(t.prototype,\"data\",{get:function(){return this._data},set:function(e){a.characterData_replaceData(this,0,this._data.length,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"length\",{get:function(){return this._data.length},enumerable:!0,configurable:!0}),t.prototype.substringData=function(e,t){return a.characterData_substringData(this,e,t)},t.prototype.appendData=function(e){return a.characterData_replaceData(this,this._data.length,0,e)},t.prototype.insertData=function(e,t){a.characterData_replaceData(this,e,0,t)},t.prototype.deleteData=function(e,t){a.characterData_replaceData(this,e,t,\"\")},t.prototype.replaceData=function(e,t,r){a.characterData_replaceData(this,e,t,r)},Object.defineProperty(t.prototype,\"previousElementSibling\",{get:function(){throw new Error(\"Mixin: NonDocumentTypeChildNode not implemented.\")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"nextElementSibling\",{get:function(){throw new Error(\"Mixin: NonDocumentTypeChildNode not implemented.\")},enumerable:!0,configurable:!0}),t.prototype.before=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw new Error(\"Mixin: ChildNode not implemented.\")},t.prototype.after=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw new Error(\"Mixin: ChildNode not implemented.\")},t.prototype.replaceWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw new Error(\"Mixin: ChildNode not implemented.\")},t.prototype.remove=function(){throw new Error(\"Mixin: ChildNode not implemented.\")},t}(o.NodeImpl);t.CharacterDataImpl=s},function(e,t,r){\"use strict\";var n=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},i=this&&this.__read||function(e,t){var r=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(t,\"__esModule\",{value:!0});var a=r(6),s=r(3),u=r(1),l=r(17),c=r(51);function h(e){a.dom.window._signalSlots.add(e),c.observer_queueAMutationObserverMicrotask()}function p(e,t){void 0===t&&(t=!1);var r=s.Cast.asNode(e)._parent;if(null===r)return null;var n=r._shadowRoot||null;if(null===n)return null;if(t&&\"open\"!==n._mode)return null;for(var i=l.tree_getFirstDescendantNode(n,!1,!0,(function(e){return s.Guard.isSlot(e)}));null!==i;){if(i._name===e._name)return i;i=l.tree_getNextDescendantNode(n,i,!1,!0,(function(e){return s.Guard.isSlot(e)}))}return null}function f(e){var t,r,i=[],o=l.tree_rootNode(e);if(!s.Guard.isShadowRoot(o))return i;var a=o._host;try{for(var u=n(a._children),c=u.next();!c.done;c=u.next()){var h=c.value;if(s.Guard.isSlotable(h))p(h)===e&&i.push(h)}}catch(e){t={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}return i}function d(e){var t,r,i=f(e);if(i.length===e._assignedNodes.length){for(var o=!0,a=0;a<i.length;a++)if(i[a]!==e._assignedNodes[a]){o=!1;break}o||h(e)}e._assignedNodes=i;try{for(var s=n(i),u=s.next();!u.done;u=s.next()){u.value._assignedSlot=e}}catch(e){t={error:e}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}}t.shadowTree_signalASlotChange=h,t.shadowTree_isConnected=function(e){return s.Guard.isDocumentNode(l.tree_rootNode(e,!0))},t.shadowTree_isAssigned=function(e){return null!==e._assignedSlot},t.shadowTree_findASlot=p,t.shadowTree_findSlotables=f,t.shadowTree_findFlattenedSlotables=function e(t){var r,i,a,c,h=[],p=l.tree_rootNode(t);if(!s.Guard.isShadowRoot(p))return h;var d=f(t);if(u.isEmpty(d))try{for(var m=n(t._children),y=m.next();!y.done;y=m.next()){var v=y.value;s.Guard.isSlotable(v)&&d.push(v)}}catch(e){r={error:e}}finally{try{y&&!y.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}try{for(var _=n(d),g=_.next();!g.done;g=_.next()){var b=g.value;if(s.Guard.isSlot(b)&&s.Guard.isShadowRoot(l.tree_rootNode(b))){var x=e(b);h.push.apply(h,o(x))}else h.push(b)}}catch(e){a={error:e}}finally{try{g&&!g.done&&(c=_.return)&&c.call(_)}finally{if(a)throw a.error}}return h},t.shadowTree_assignSlotables=d,t.shadowTree_assignSlotablesForATree=function(e){for(var t=l.tree_getFirstDescendantNode(e,!0,!1,(function(e){return s.Guard.isSlot(e)}));null!==t;)d(t),t=l.tree_getNextDescendantNode(e,t,!0,!1,(function(e){return s.Guard.isSlot(e)}))},t.shadowTree_assignASlot=function(e){var t=p(e);null!==t&&d(t)}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=/[a-z]([\\0-\\t\\x2D\\._a-z\\xB7\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u037D\\u037F-\\u1FFF\\u200C\\u200D\\u203F\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])*-([\\0-\\t\\x2D\\._a-z\\xB7\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u037D\\u037F-\\u1FFF\\u200C\\u200D\\u203F\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])*/,i=new Set([\"annotation-xml\",\"color-profile\",\"font-face\",\"font-face-src\",\"font-face-uri\",\"font-face-format\",\"font-face-name\",\"missing-glyph\"]),o=new Set([\"article\",\"aside\",\"blockquote\",\"body\",\"div\",\"footer\",\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\",\"header\",\"main\",\"nav\",\"p\",\"section\",\"span\"]),a=new Set([\"area\",\"base\",\"basefont\",\"bgsound\",\"br\",\"col\",\"embed\",\"frame\",\"hr\",\"img\",\"input\",\"keygen\",\"link\",\"menuitem\",\"meta\",\"param\",\"source\",\"track\",\"wbr\"]),s=new Set([\"article\",\"aside\",\"blockquote\",\"body\",\"div\",\"footer\",\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\",\"header\",\"main\",\"nav\",\"p\",\"section\",\"span\"]);t.customElement_isValidCustomElementName=function(e){return!!n.test(e)&&!i.has(e)},t.customElement_isValidElementName=function(e){return o.has(e)},t.customElement_isVoidElementName=function(e){return a.has(e)},t.customElement_isValidShadowHostName=function(e){return s.has(e)},t.customElement_enqueueACustomElementUpgradeReaction=function(e,t){},t.customElement_enqueueACustomElementCallbackReaction=function(e,t,r){},t.customElement_upgrade=function(e,t){},t.customElement_tryToUpgrade=function(e){},t.customElement_lookUpACustomElementDefinition=function(e,t,r,n){return null}},function(e,t,r){r(4)({target:\"String\",proto:!0},{repeat:r(259)})},function(e,t,r){\"use strict\";r(278),r(68),r(179),r(94),Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(109),i=function(){function e(e){this._builderOptions=e,e.parser&&Object.assign(this,e.parser)}return e.prototype._docType=function(e,t,r,n){return e.dtd({name:t,pubID:r,sysID:n})},e.prototype._comment=function(e,t){return e.com(t)},e.prototype._text=function(e,t){return e.txt(t)},e.prototype._instruction=function(e,t,r){return e.ins(t,r)},e.prototype._cdata=function(e,t){return e.dat(t)},e.prototype._element=function(e,t,r){return void 0===t?e.ele(r):e.ele(t,r)},e.prototype._attribute=function(e,t,r,n){return void 0===t?e.att(r,n):e.att(t,r,n)},e.prototype._sanitize=function(e){return n.sanitizeInput(e,this._builderOptions.invalidCharReplacement)},e.prototype._decodeText=function(t){return null==t?t:t.replace(/&(quot|amp|apos|lt|gt);/g,(function(t,r){return e._entityTable[r]})).replace(/&#(?:x([a-fA-F0-9]+)|([0-9]+));/g,(function(e,t,r){return String.fromCodePoint(parseInt(t||r,t?16:10))}))},e.prototype._decodeAttributeValue=function(e){return this._decodeText(e)},e.prototype.parse=function(e,t){return this._parse(e,t)},e.prototype.docType=function(e,t,r,n){return this._docType(e,t,r,n)},e.prototype.comment=function(e,t){return this._comment(e,t)},e.prototype.text=function(e,t){return this._text(e,t)},e.prototype.instruction=function(e,t,r){return this._instruction(e,t,r)},e.prototype.cdata=function(e,t){return this._cdata(e,t)},e.prototype.element=function(e,t,r){return this._element(e,t,r)},e.prototype.attribute=function(e,t,r,n){return this._attribute(e,t,r,n)},e.prototype.sanitize=function(e){return this._sanitize(e)},e._entityTable={lt:\"<\",gt:\">\",amp:\"&\",quot:'\"',apos:\"'\"},e}();t.BaseReader=i},function(e,t,r){\"use strict\";var n=r(39);e.exports=n.DEFAULT=new n({include:[r(54)],explicit:[r(299),r(300),r(301)]})},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(185);t.XMLBuilderImpl=n.XMLBuilderImpl;var i=r(304);t.XMLBuilderCBImpl=i.XMLBuilderCBImpl;var o=r(183);t.builder=o.builder,t.create=o.create,t.fragment=o.fragment,t.convert=o.convert;var a=r(309);t.createCB=a.createCB,t.fragmentCB=a.fragmentCB},function(e,t){var r;r=function(){return this}();try{r=r||new Function(\"return this\")()}catch(e){\"object\"==typeof window&&(r=window)}e.exports=r},function(e,t,r){\"use strict\";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!n.call({1:2},1);t.f=o?function(e){var t=i(this,e);return!!t&&t.enumerable}:n},function(e,t,r){var n=r(11),i=r(21);e.exports=function(e,t){try{i(n,e,t)}catch(r){n[e]=t}return t}},function(e,t,r){var n=r(44),i=r(118);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})(\"versions\",[]).push({version:\"3.6.5\",mode:n?\"pure\":\"global\",copyright:\" 2020 Denis Pushkarev (zloirock.ru)\"})},function(e,t,r){var n=r(121),i=r(84).concat(\"length\",\"prototype\");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},function(e,t,r){var n=r(47),i=Math.max,o=Math.min;e.exports=function(e,t){var r=n(e);return r<0?i(r+t,0):o(r,t)}},function(e,t){e.exports=[\"constructor\",\"hasOwnProperty\",\"isPrototypeOf\",\"propertyIsEnumerable\",\"toLocaleString\",\"toString\",\"valueOf\"]},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){var n=r(8);e.exports=!!Object.getOwnPropertySymbols&&!n((function(){return!String(Symbol())}))},function(e,t,r){var n=r(127);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,r){\"use strict\";var n=r(4),i=r(195),o=r(132),a=r(133),s=r(62),u=r(21),l=r(25),c=r(5),h=r(44),p=r(49),f=r(131),d=f.IteratorPrototype,m=f.BUGGY_SAFARI_ITERATORS,y=c(\"iterator\"),v=function(){return this};e.exports=function(e,t,r,c,f,_,g){i(r,t,c);var b,x,w,E=function(e){if(e===f&&N)return N;if(!m&&e in C)return C[e];switch(e){case\"keys\":case\"values\":case\"entries\":return function(){return new r(this,e)}}return function(){return new r(this)}},D=t+\" Iterator\",S=!1,C=e.prototype,A=C[y]||C[\"@@iterator\"]||f&&C[f],N=!m&&A||E(f),T=\"Array\"==t&&C.entries||A;if(T&&(b=o(T.call(new e)),d!==Object.prototype&&b.next&&(h||o(b)===d||(a?a(b,d):\"function\"!=typeof b[y]&&u(b,y,v)),s(b,D,!0,!0),h&&(p[D]=v))),\"values\"==f&&A&&\"values\"!==A.name&&(S=!0,N=function(){return A.call(this)}),h&&!g||C[y]===N||u(C,y,N),p[t]=N,f)if(x={values:E(\"values\"),keys:_?N:E(\"keys\"),entries:E(\"entries\")},g)for(w in x)(m||S||!(w in C))&&l(C,w,x[w]);else n({target:t,proto:!0,forced:m||S},x);return x}},function(e,t,r){\"use strict\";var n=r(4),i=r(13),o=r(59),a=r(83),s=r(26),u=r(24),l=r(134),c=r(5),h=r(63),p=r(28),f=h(\"slice\"),d=p(\"slice\",{ACCESSORS:!0,0:0,1:2}),m=c(\"species\"),y=[].slice,v=Math.max;n({target:\"Array\",proto:!0,forced:!f||!d},{slice:function(e,t){var r,n,c,h=u(this),p=s(h.length),f=a(e,p),d=a(void 0===t?p:t,p);if(o(h)&&(\"function\"!=typeof(r=h.constructor)||r!==Array&&!o(r.prototype)?i(r)&&null===(r=r[m])&&(r=void 0):r=void 0,r===Array||void 0===r))return y.call(h,f,d);for(n=new(void 0===r?Array:r)(v(d-f,0)),c=0;f<d;f++,c++)f in h&&l(n,c,h[f]);return n.length=c,n}})},function(e,t,r){var n={};n[r(5)(\"toStringTag\")]=\"z\",e.exports=\"[object z]\"===String(n)},function(e,t,r){\"use strict\";r(19),r(138),r(20),r(92),r(22),r(23),Object.defineProperty(t,\"__esModule\",{value:!0}),t.DefaultBuilderOptions={version:\"1.0\",encoding:void 0,standalone:void 0,keepNullNodes:!1,keepNullAttributes:!1,ignoreConverters:!1,convert:{att:\"@\",ins:\"?\",text:\"#\",cdata:\"$\",comment:\"!\"},defaultNamespace:{ele:void 0,att:void 0},namespaceAlias:{html:\"http://www.w3.org/1999/xhtml\",xml:\"http://www.w3.org/XML/1998/namespace\",xmlns:\"http://www.w3.org/2000/xmlns/\",mathml:\"http://www.w3.org/1998/Math/MathML\",svg:\"http://www.w3.org/2000/svg\",xlink:\"http://www.w3.org/1999/xlink\"},invalidCharReplacement:void 0,parser:void 0},t.XMLBuilderOptionKeys=new Set(Object.keys(t.DefaultBuilderOptions)),t.DefaultXMLBuilderCBOptions={format:\"xml\",wellFormed:!1,prettyPrint:!1,indent:\"  \",newline:\"\\n\",offset:0,width:0,allowEmptyTags:!1,spaceBeforeSlash:!1,keepNullNodes:!1,keepNullAttributes:!1,ignoreConverters:!1,convert:{att:\"@\",ins:\"?\",text:\"#\",cdata:\"$\",comment:\"!\"},defaultNamespace:{ele:void 0,att:void 0},namespaceAlias:{html:\"http://www.w3.org/1999/xhtml\",xml:\"http://www.w3.org/XML/1998/namespace\",xmlns:\"http://www.w3.org/2000/xmlns/\",mathml:\"http://www.w3.org/1998/Math/MathML\",svg:\"http://www.w3.org/2000/svg\",xlink:\"http://www.w3.org/1999/xlink\"}}},function(e,t,r){\"use strict\";var n=r(139),i=r(143);e.exports=n(\"Set\",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)},function(e,t,r){\"use strict\";var n,i,o=r(136),a=r(221),s=RegExp.prototype.exec,u=String.prototype.replace,l=s,c=(n=/a/,i=/b*/g,s.call(n,\"a\"),s.call(i,\"a\"),0!==n.lastIndex||0!==i.lastIndex),h=a.UNSUPPORTED_Y||a.BROKEN_CARET,p=void 0!==/()??/.exec(\"\")[1];(c||p||h)&&(l=function(e){var t,r,n,i,a=this,l=h&&a.sticky,f=o.call(a),d=a.source,m=0,y=e;return l&&(-1===(f=f.replace(\"y\",\"\")).indexOf(\"g\")&&(f+=\"g\"),y=String(e).slice(a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&\"\\n\"!==e[a.lastIndex-1])&&(d=\"(?: \"+d+\")\",y=\" \"+y,m++),r=new RegExp(\"^(?:\"+d+\")\",f)),p&&(r=new RegExp(\"^\"+d+\"$(?!\\\\s)\",f)),c&&(t=a.lastIndex),n=s.call(l?r:a,y),l?n?(n.input=n.input.slice(m),n[0]=n[0].slice(m),n.index=a.lastIndex,a.lastIndex+=n[0].length):a.lastIndex=0:c&&n&&(a.lastIndex=a.global?n.index+n[0].length:t),p&&n&&n.length>1&&u.call(n[0],r,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(n[i]=void 0)})),n}),e.exports=l},function(e,t,r){\"use strict\";var n=r(225),i=r(18),o=r(27),a=r(26),s=r(47),u=r(35),l=r(226),c=r(227),h=Math.max,p=Math.min,f=Math.floor,d=/\\$([$&'`]|\\d\\d?|<[^>]*>)/g,m=/\\$([$&'`]|\\d\\d?)/g;n(\"replace\",2,(function(e,t,r,n){var y=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,v=n.REPLACE_KEEPS_$0,_=y?\"$\":\"$0\";return[function(r,n){var i=u(this),o=null==r?void 0:r[e];return void 0!==o?o.call(r,i,n):t.call(String(i),r,n)},function(e,n){if(!y&&v||\"string\"==typeof n&&-1===n.indexOf(_)){var o=r(t,e,this,n);if(o.done)return o.value}var u=i(e),f=String(this),d=\"function\"==typeof n;d||(n=String(n));var m=u.global;if(m){var b=u.unicode;u.lastIndex=0}for(var x=[];;){var w=c(u,f);if(null===w)break;if(x.push(w),!m)break;\"\"===String(w[0])&&(u.lastIndex=l(f,a(u.lastIndex),b))}for(var E,D=\"\",S=0,C=0;C<x.length;C++){w=x[C];for(var A=String(w[0]),N=h(p(s(w.index),f.length),0),T=[],O=1;O<w.length;O++)T.push(void 0===(E=w[O])?E:String(E));var F=w.groups;if(d){var k=[A].concat(T,N,f);void 0!==F&&k.push(F);var P=String(n.apply(void 0,k))}else P=g(A,f,N,T,F,n);N>=S&&(D+=f.slice(S,N)+P,S=N+A.length)}return D+f.slice(S)}];function g(e,r,n,i,a,s){var u=n+e.length,l=i.length,c=m;return void 0!==a&&(a=o(a),c=d),t.call(s,c,(function(t,o){var s;switch(o.charAt(0)){case\"$\":return\"$\";case\"&\":return e;case\"`\":return r.slice(0,n);case\"'\":return r.slice(u);case\"<\":s=a[o.slice(1,-1)];break;default:var c=+o;if(0===c)return t;if(c>l){var h=f(c/10);return 0===h?t:h<=l?void 0===i[h-1]?o.charAt(1):i[h-1]+o.charAt(1):t}s=i[c-1]}return void 0===s?\"\":s}))}}))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(){this._items={},this._nullItems=[]}return e.prototype.copy=function(){var t=new e;for(var r in this._items)t._items[r]=this._items[r].slice(0);return t._nullItems=this._nullItems.slice(0),t},e.prototype.get=function(e,t){var r=null===t?this._nullItems:this._items[t]||null;if(null===r)return null;for(var n=null,i=0;i<r.length;i++)if((n=r[i])===e)return n;return n},e.prototype.has=function(e,t){var r=null===t?this._nullItems:this._items[t]||null;return null!==r&&-1!==r.indexOf(e)},e.prototype.hasPrefix=function(e){if(-1!==this._nullItems.indexOf(e))return!0;for(var t in this._items)if(-1!==this._items[t].indexOf(e))return!0;return!1},e.prototype.set=function(e,t){var r=null===t?this._nullItems:this._items[t]||null;null!==t&&null===r?this._items[t]=[e]:r.push(e)},e}();t.NamespacePrefixMap=n},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.Surrogate=/[\\uD800-\\uDFFF]/,t.ScalarValue=/[\\uD800-\\uDFFF]/,t.NonCharacter=/[\\uFDD0-\\uFDEF\\uFFFE\\uFFFF]|[\\uD83F\\uD87F\\uD8BF\\uD8FF\\uD93F\\uD97F\\uD9BF\\uD9FF\\uDA3F\\uDA7F\\uDABF\\uDAFF\\uDB3F\\uDB7F\\uDBBF\\uDBFF][\\uDFFE\\uDFFF]/,t.ASCIICodePoint=/[\\u0000-\\u007F]/,t.ASCIITabOrNewLine=/[\\t\\n\\r]/,t.ASCIIWhiteSpace=/[\\t\\n\\f\\r ]/,t.C0Control=/[\\u0000-\\u001F]/,t.C0ControlOrSpace=/[\\u0000-\\u001F ]/,t.Control=/[\\u0000-\\u001F\\u007F-\\u009F]/,t.ASCIIDigit=/[0-9]/,t.ASCIIUpperHexDigit=/[0-9A-F]/,t.ASCIILowerHexDigit=/[0-9a-f]/,t.ASCIIHexDigit=/[0-9A-Fa-f]/,t.ASCIIUpperAlpha=/[A-Z]/,t.ASCIILowerAlpha=/[a-z]/,t.ASCIIAlpha=/[A-Za-z]/,t.ASCIIAlphanumeric=/[0-9A-Za-z]/},function(e,t,r){\"use strict\";var n=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},i=this&&this.__read||function(e,t){var r=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(t,\"__esModule\",{value:!0});var a=r(6),s=r(2),u=r(3),l=r(171),c=r(104),h=r(9),p=r(17),f=r(72),d=r(30);function m(e,t){void 0===t&&(t=void 0),void 0===t&&(t=null);var r=y(e,t,new Date,{});return r._isTrusted=!0,r}function y(e,t,r,n){var i=new e(\"\");return i._initializedFlag=!0,i._timeStamp=r.getTime(),Object.assign(i,n),a.dom.features.steps&&d.dom_runEventConstructingSteps(i),i}function v(e,t,r,i){var o,a,l,c;void 0===r&&(r=!1),void 0===i&&(i={value:!1});var h=!1;e._dispatchFlag=!0;var d=t;if(r){var m=t._associatedDocument;u.Guard.isDocumentNode(m)&&(d=m)}var y=null,v=p.tree_retarget(e._relatedTarget,t);if(t!==v||t===e._relatedTarget){var b=[];try{for(var x=n(e._touchTargetList),w=x.next();!w.done;w=x.next()){var E=w.value;b.push(p.tree_retarget(E,t))}}catch(e){o={error:e}}finally{try{w&&!w.done&&(a=x.return)&&a.call(x)}finally{if(o)throw o.error}}_(e,t,d,v,b,!1);var D=u.Guard.isMouseEvent(e)&&\"click\"===e._type;D&&void 0!==t._activationBehavior&&(y=t);for(var S=u.Guard.isSlotable(t)&&f.shadowTree_isAssigned(t)?t:null,C=!1,A=t._getTheParent(e);null!==A&&u.Guard.isNode(A);){if(null!==S){if(!u.Guard.isSlot(A))throw new Error(\"Parent node of a slotable should be a slot.\");S=null;var N=p.tree_rootNode(A,!0);u.Guard.isShadowRoot(N)&&\"closed\"===N._mode&&(C=!0)}u.Guard.isSlotable(A)&&f.shadowTree_isAssigned(A)&&(S=A),v=p.tree_retarget(e._relatedTarget,A),b=[];try{for(var T=(l=void 0,n(e._touchTargetList)),O=T.next();!O.done;O=T.next()){E=O.value;b.push(p.tree_retarget(E,A))}}catch(e){l={error:e}}finally{try{O&&!O.done&&(c=T.return)&&c.call(T)}finally{if(l)throw l.error}}u.Guard.isWindow(A)||u.Guard.isNode(A)&&u.Guard.isNode(t)&&p.tree_isAncestorOf(p.tree_rootNode(t,!0),A,!0,!0)?(D&&e._bubbles&&null===y&&A._activationBehavior&&(y=A),_(e,A,null,v,b,C)):A===v?A=null:(t=A,D&&null===y&&t._activationBehavior&&(y=t),_(e,A,t,v,b,C)),null!==A&&(A=A._getTheParent(e)),C=!1}for(var F=null,k=e._path,P=k.length-1;P>=0;P--){if(null!==(L=k[P]).shadowAdjustedTarget){F=L;break}}if(null!==F)if(u.Guard.isNode(F.shadowAdjustedTarget)&&u.Guard.isShadowRoot(p.tree_rootNode(F.shadowAdjustedTarget,!0)))h=!0;else if(u.Guard.isNode(F.relatedTarget)&&u.Guard.isShadowRoot(p.tree_rootNode(F.relatedTarget,!0)))h=!0;else for(var I=0;I<F.touchTargetList.length;I++){var L=F.touchTargetList[I];if(u.Guard.isNode(L)&&u.Guard.isShadowRoot(p.tree_rootNode(L,!0))){h=!0;break}}null!==y&&void 0!==y._legacyPreActivationBehavior&&y._legacyPreActivationBehavior(e);for(P=k.length-1;P>=0;P--){null!==(L=k[P]).shadowAdjustedTarget?e._eventPhase=s.EventPhase.AtTarget:e._eventPhase=s.EventPhase.Capturing,g(L,e,\"capturing\",i)}for(P=0;P<k.length;P++){if(null!==(L=k[P]).shadowAdjustedTarget)e._eventPhase=s.EventPhase.AtTarget;else{if(!e._bubbles)continue;e._eventPhase=s.EventPhase.Bubbling}g(L,e,\"bubbling\",i)}}return e._eventPhase=s.EventPhase.None,e._currentTarget=null,e._path=[],e._dispatchFlag=!1,e._stopPropagationFlag=!1,e._stopImmediatePropagationFlag=!1,h&&(e._target=null,e._relatedTarget=null,e._touchTargetList=[]),null!==y&&(e._canceledFlag||void 0===y._activationBehavior?void 0!==y._legacyCanceledActivationBehavior&&y._legacyCanceledActivationBehavior(e):y._activationBehavior(e)),!e._canceledFlag}function _(e,t,r,n,i,o){var a=!1;u.Guard.isNode(t)&&u.Guard.isShadowRoot(p.tree_rootNode(t))&&(a=!0);var s=!1;u.Guard.isShadowRoot(t)&&\"closed\"===t._mode&&(s=!0),e._path.push({invocationTarget:t,invocationTargetInShadowTree:a,shadowAdjustedTarget:r,relatedTarget:n,touchTargetList:i,rootOfClosedTree:s,slotInClosedTree:o})}function g(e,t,r,n){void 0===n&&(n={value:!1});for(var i=t._path,a=-1,s=0;s<i.length;s++)if(i[s]===e){a=s;break}if(-1!==a){var u=i[a];(null!==u.shadowAdjustedTarget||a>0&&null!==(u=i[a-1]).shadowAdjustedTarget)&&(t._target=u.shadowAdjustedTarget)}if(t._relatedTarget=e.relatedTarget,t._touchTargetList=e.touchTargetList,!t._stopPropagationFlag){t._currentTarget=e.invocationTarget;var l=t._currentTarget._eventListenerList,c=new(Array.bind.apply(Array,o([void 0],l)));if(!b(t,c,r,e,n)&&t._isTrusted){var h=t._type;\"animationend\"===h?t._type=\"webkitAnimationEnd\":\"animationiteration\"===h?t._type=\"webkitAnimationIteration\":\"animationstart\"===h?t._type=\"webkitAnimationStart\":\"transitionend\"===h&&(t._type=\"webkitTransitionEnd\"),b(t,c,r,e,n),t._type=h}}}function b(e,t,r,n,i){void 0===i&&(i={value:!1});for(var o=!1,a=0;a<t.length;a++){var s=t[a];if(!s.removed){if(e._type!==s.type)continue;if(o=!0,\"capturing\"===r&&!s.capture)continue;if(\"bubbling\"===r&&s.capture)continue;if(s.once&&null!==e._currentTarget){for(var l=e._currentTarget,c=-1,h=0;h<l._eventListenerList.length;h++)if(l._eventListenerList[h]===s){c=h;break}-1!==c&&l._eventListenerList.splice(c,1)}var p=void 0,f=void 0;u.Guard.isWindow(p)&&(f=p._currentEvent,!1===n.invocationTargetInShadowTree&&(p._currentEvent=e)),s.passive&&(e._inPassiveListenerFlag=!0);try{s.callback.handleEvent.call(e._currentTarget,e)}catch(e){i.value=!0}if(s.passive&&(e._inPassiveListenerFlag=!1),u.Guard.isWindow(p)&&(p._currentEvent=f),e._stopImmediatePropagationFlag)return o}}return o}function x(e,t){return null}function w(e,t){return null}function E(e,t){}function D(e,t){}t.event_setTheCanceledFlag=function(e){e._cancelable&&!e._inPassiveListenerFlag&&(e._canceledFlag=!0)},t.event_initialize=function(e,t,r,n){e._initializedFlag=!0,e._stopPropagationFlag=!1,e._stopImmediatePropagationFlag=!1,e._canceledFlag=!1,e._isTrusted=!1,e._target=null,e._type=t,e._bubbles=r,e._cancelable=n},t.event_createAnEvent=m,t.event_innerEventCreationSteps=y,t.event_dispatch=v,t.event_appendToAnEventPath=_,t.event_invoke=g,t.event_innerInvoke=b,t.event_fireAnEvent=function(e,t,r,n,i){void 0===r&&(r=c.EventImpl);var o=m(r);if(o._type=e,n)for(var a in n){o[a]=n[a]}return v(o,t,i)},t.event_createLegacyEvent=function(e){var t=null;switch(e.toLowerCase()){case\"beforeunloadevent\":case\"compositionevent\":break;case\"customevent\":t=l.CustomEventImpl;break;case\"devicemotionevent\":case\"deviceorientationevent\":case\"dragevent\":break;case\"event\":case\"events\":t=c.EventImpl}if(null===t)throw new h.NotSupportedError(\"Event constructor not found for interface \"+e+\".\");var r=new t(\"\");return r._type=\"\",r._timeStamp=(new Date).getTime(),r._isTrusted=!1,r._initializedFlag=!1,r},t.event_getterEventHandlerIDLAttribute=function(e,t){return null},t.event_setterEventHandlerIDLAttribute=function(e,t,r){},t.event_determineTheTargetOfAnEventHandler=x,t.event_getTheCurrentValueOfAnEventHandler=w,t.event_activateAnEventHandler=E,t.event_deactivateAnEventHandler=D},function(e,t,r){\"use strict\";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},a=this&&this.__read||function(e,t){var r=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(t,\"__esModule\",{value:!0});var s=r(6),u=r(2),l=r(9),c=r(34),h=r(3),p=r(1),f=r(7),d=r(152),m=r(0),y=r(12),v=function(e){function t(){var t=e.call(this)||this;return t._children=new Set,t._encoding={name:\"UTF-8\",labels:[\"unicode-1-1-utf-8\",\"utf-8\",\"utf8\"]},t._contentType=\"application/xml\",t._URL={scheme:\"about\",username:\"\",password:\"\",host:null,port:null,path:[\"blank\"],query:null,fragment:null,_cannotBeABaseURLFlag:!0,_blobURLEntry:null},t._origin=null,t._type=\"xml\",t._mode=\"no-quirks\",t._documentElement=null,t._hasNamespaces=!1,t._nodeDocumentOverwrite=null,t}return i(t,e),Object.defineProperty(t.prototype,\"_nodeDocument\",{get:function(){return this._nodeDocumentOverwrite||this},set:function(e){this._nodeDocumentOverwrite=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"implementation\",{get:function(){return this._implementation||(this._implementation=m.create_domImplementation(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"URL\",{get:function(){return d.urlSerializer(this._URL)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"documentURI\",{get:function(){return this.URL},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"origin\",{get:function(){return\"null\"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"compatMode\",{get:function(){return\"quirks\"===this._mode?\"BackCompat\":\"CSS1Compat\"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"characterSet\",{get:function(){return this._encoding.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"charset\",{get:function(){return this._encoding.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"inputEncoding\",{get:function(){return this._encoding.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"contentType\",{get:function(){return this._contentType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"doctype\",{get:function(){var e,t;try{for(var r=o(this._children),n=r.next();!n.done;n=r.next()){var i=n.value;if(h.Guard.isDocumentTypeNode(i))return i}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"documentElement\",{get:function(){return this._documentElement},enumerable:!0,configurable:!0}),t.prototype.getElementsByTagName=function(e){return m.node_listOfElementsWithQualifiedName(e,this)},t.prototype.getElementsByTagNameNS=function(e,t){return m.node_listOfElementsWithNamespace(e,t,this)},t.prototype.getElementsByClassName=function(e){return m.node_listOfElementsWithClassNames(e,this)},t.prototype.createElement=function(e,t){if(!m.xml_isName(e))throw new l.InvalidCharacterError;\"html\"===this._type&&(e=e.toLowerCase());var r=null;void 0!==t&&(r=p.isString(t)?t:t.is);var n=\"html\"===this._type||\"application/xhtml+xml\"===this._contentType?f.namespace.HTML:null;return m.element_createAnElement(this,e,n,null,r,!0)},t.prototype.createElementNS=function(e,t,r){return m.document_internalCreateElementNS(this,e,t,r)},t.prototype.createDocumentFragment=function(){return m.create_documentFragment(this)},t.prototype.createTextNode=function(e){return m.create_text(this,e)},t.prototype.createCDATASection=function(e){if(\"html\"===this._type)throw new l.NotSupportedError;if(-1!==e.indexOf(\"]]>\"))throw new l.InvalidCharacterError;return m.create_cdataSection(this,e)},t.prototype.createComment=function(e){return m.create_comment(this,e)},t.prototype.createProcessingInstruction=function(e,t){if(!m.xml_isName(e))throw new l.InvalidCharacterError;if(-1!==t.indexOf(\"?>\"))throw new l.InvalidCharacterError;return m.create_processingInstruction(this,e,t)},t.prototype.importNode=function(e,t){if(void 0===t&&(t=!1),h.Guard.isDocumentNode(e)||h.Guard.isShadowRoot(e))throw new l.NotSupportedError;return m.node_clone(e,this,t)},t.prototype.adoptNode=function(e){if(h.Guard.isDocumentNode(e))throw new l.NotSupportedError;if(h.Guard.isShadowRoot(e))throw new l.HierarchyRequestError;return m.document_adopt(e,this),e},t.prototype.createAttribute=function(e){if(!m.xml_isName(e))throw new l.InvalidCharacterError;return\"html\"===this._type&&(e=e.toLowerCase()),m.create_attr(this,e)},t.prototype.createAttributeNS=function(e,t){var r=a(m.namespace_validateAndExtract(e,t),3),n=r[0],i=r[1],o=r[2],s=m.create_attr(this,o);return s._namespace=n,s._namespacePrefix=i,s},t.prototype.createEvent=function(e){return m.event_createLegacyEvent(e)},t.prototype.createRange=function(){var e=m.create_range();return e._start=[this,0],e._end=[this,0],e},t.prototype.createNodeIterator=function(e,t,r){void 0===t&&(t=u.WhatToShow.All),void 0===r&&(r=null);var n=m.create_nodeIterator(e,e,!0);return n._whatToShow=t,n._iteratorCollection=m.create_nodeList(e),p.isFunction(r)?(n._filter=m.create_nodeFilter(),n._filter.acceptNode=r):n._filter=r,n},t.prototype.createTreeWalker=function(e,t,r){void 0===t&&(t=u.WhatToShow.All),void 0===r&&(r=null);var n=m.create_treeWalker(e,e);return n._whatToShow=t,p.isFunction(r)?(n._filter=m.create_nodeFilter(),n._filter.acceptNode=r):n._filter=r,n},t.prototype._getTheParent=function(e){return\"load\"===e._type?null:s.dom.window},t.prototype.getElementById=function(e){throw new Error(\"Mixin: NonElementParentNode not implemented.\")},Object.defineProperty(t.prototype,\"children\",{get:function(){throw new Error(\"Mixin: ParentNode not implemented.\")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"firstElementChild\",{get:function(){throw new Error(\"Mixin: ParentNode not implemented.\")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"lastElementChild\",{get:function(){throw new Error(\"Mixin: ParentNode not implemented.\")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"childElementCount\",{get:function(){throw new Error(\"Mixin: ParentNode not implemented.\")},enumerable:!0,configurable:!0}),t.prototype.prepend=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw new Error(\"Mixin: ParentNode not implemented.\")},t.prototype.append=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw new Error(\"Mixin: ParentNode not implemented.\")},t.prototype.querySelector=function(e){throw new Error(\"Mixin: ParentNode not implemented.\")},t.prototype.querySelectorAll=function(e){throw new Error(\"Mixin: ParentNode not implemented.\")},t}(c.NodeImpl);t.DocumentImpl=v,y.idl_defineConst(v.prototype,\"_nodeType\",u.NodeType.Document)},function(e,t,r){\"use strict\";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},a=this&&this.__read||function(e,t){var r=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(t,\"__esModule\",{value:!0});var s=r(2),u=r(34),l=r(9),c=r(7),h=r(0),p=r(12),f=function(e){function t(){var t=e.call(this)||this;return t._children=new Set,t._namespace=null,t._namespacePrefix=null,t._localName=\"\",t._customElementState=\"undefined\",t._customElementDefinition=null,t._is=null,t._shadowRoot=null,t._attributeList=h.create_namedNodeMap(t),t._attributeChangeSteps=[],t._name=\"\",t._assignedSlot=null,t}return i(t,e),Object.defineProperty(t.prototype,\"namespaceURI\",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"prefix\",{get:function(){return this._namespacePrefix},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"localName\",{get:function(){return this._localName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"tagName\",{get:function(){return this._htmlUppercasedQualifiedName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"id\",{get:function(){return h.element_getAnAttributeValue(this,\"id\")},set:function(e){h.element_setAnAttributeValue(this,\"id\",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"className\",{get:function(){return h.element_getAnAttributeValue(this,\"class\")},set:function(e){h.element_setAnAttributeValue(this,\"class\",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"classList\",{get:function(){var e=h.element_getAnAttributeByName(\"class\",this);return null===e&&(e=h.create_attr(this._nodeDocument,\"class\")),h.create_domTokenList(this,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"slot\",{get:function(){return h.element_getAnAttributeValue(this,\"slot\")},set:function(e){h.element_setAnAttributeValue(this,\"slot\",e)},enumerable:!0,configurable:!0}),t.prototype.hasAttributes=function(){return 0!==this._attributeList.length},Object.defineProperty(t.prototype,\"attributes\",{get:function(){return this._attributeList},enumerable:!0,configurable:!0}),t.prototype.getAttributeNames=function(){var e,t,r=[];try{for(var n=o(this._attributeList),i=n.next();!i.done;i=n.next()){var a=i.value;r.push(a._qualifiedName)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r},t.prototype.getAttribute=function(e){var t=h.element_getAnAttributeByName(e,this);return t?t._value:null},t.prototype.getAttributeNS=function(e,t){var r=h.element_getAnAttributeByNamespaceAndLocalName(e,t,this);return r?r._value:null},t.prototype.setAttribute=function(e,t){if(!h.xml_isName(e))throw new l.InvalidCharacterError;this._namespace===c.namespace.HTML&&\"html\"===this._nodeDocument._type&&(e=e.toLowerCase());for(var r=null,n=0;n<this._attributeList.length;n++){var i=this._attributeList[n];if(i._qualifiedName===e){r=i;break}}if(null===r)return(r=h.create_attr(this._nodeDocument,e))._value=t,void h.element_append(r,this);h.element_change(r,this,t)},t.prototype.setAttributeNS=function(e,t,r){var n=a(h.namespace_validateAndExtract(e,t),3),i=n[0],o=n[1],s=n[2];h.element_setAnAttributeValue(this,s,r,o,i)},t.prototype.removeAttribute=function(e){h.element_removeAnAttributeByName(e,this)},t.prototype.removeAttributeNS=function(e,t){h.element_removeAnAttributeByNamespaceAndLocalName(e,t,this)},t.prototype.hasAttribute=function(e){this._namespace===c.namespace.HTML&&\"html\"===this._nodeDocument._type&&(e=e.toLowerCase());for(var t=0;t<this._attributeList.length;t++){if(this._attributeList[t]._qualifiedName===e)return!0}return!1},t.prototype.toggleAttribute=function(e,t){if(!h.xml_isName(e))throw new l.InvalidCharacterError;this._namespace===c.namespace.HTML&&\"html\"===this._nodeDocument._type&&(e=e.toLowerCase());for(var r=null,n=0;n<this._attributeList.length;n++){var i=this._attributeList[n];if(i._qualifiedName===e){r=i;break}}return null===r?(void 0===t||!0===t)&&((r=h.create_attr(this._nodeDocument,e))._value=\"\",h.element_append(r,this),!0):void 0!==t&&!1!==t||(h.element_removeAnAttributeByName(e,this),!1)},t.prototype.hasAttributeNS=function(e,t){for(var r=e||null,n=0;n<this._attributeList.length;n++){var i=this._attributeList[n];if(i._namespace===r&&i._localName===t)return!0}return!1},t.prototype.getAttributeNode=function(e){return h.element_getAnAttributeByName(e,this)},t.prototype.getAttributeNodeNS=function(e,t){return h.element_getAnAttributeByNamespaceAndLocalName(e,t,this)},t.prototype.setAttributeNode=function(e){return h.element_setAnAttribute(e,this)},t.prototype.setAttributeNodeNS=function(e){return h.element_setAnAttribute(e,this)},t.prototype.removeAttributeNode=function(e){for(var t=!1,r=0;r<this._attributeList.length;r++){if(this._attributeList[r]===e){t=!0;break}}if(!t)throw new l.NotFoundError;return h.element_remove(e,this),e},t.prototype.attachShadow=function(e){if(this._namespace!==c.namespace.HTML)throw new l.NotSupportedError;if(!h.customElement_isValidCustomElementName(this._localName)&&!h.customElement_isValidShadowHostName(this._localName))throw new l.NotSupportedError;if(h.customElement_isValidCustomElementName(this._localName)||null!==this._is){var t=h.customElement_lookUpACustomElementDefinition(this._nodeDocument,this._namespace,this._localName,this._is);if(null!==t&&!0===t.disableShadow)throw new l.NotSupportedError}if(null!==this._shadowRoot)throw new l.NotSupportedError;var r=h.create_shadowRoot(this._nodeDocument,this);return r._mode=e.mode,this._shadowRoot=r,r},Object.defineProperty(t.prototype,\"shadowRoot\",{get:function(){var e=this._shadowRoot;return null===e||\"closed\"===e.mode?null:e},enumerable:!0,configurable:!0}),t.prototype.closest=function(e){throw new l.NotImplementedError},t.prototype.matches=function(e){throw new l.NotImplementedError},t.prototype.webkitMatchesSelector=function(e){return this.matches(e)},t.prototype.getElementsByTagName=function(e){return h.node_listOfElementsWithQualifiedName(e,this)},t.prototype.getElementsByTagNameNS=function(e,t){return h.node_listOfElementsWithNamespace(e,t,this)},t.prototype.getElementsByClassName=function(e){return h.node_listOfElementsWithClassNames(e,this)},t.prototype.insertAdjacentElement=function(e,t){return h.element_insertAdjacent(this,e,t)},t.prototype.insertAdjacentText=function(e,t){var r=h.create_text(this._nodeDocument,t);h.element_insertAdjacent(this,e,r)},Object.defineProperty(t.prototype,\"_qualifiedName\",{get:function(){return this._namespacePrefix?this._namespacePrefix+\":\"+this._localName:this._localName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"_htmlUppercasedQualifiedName\",{get:function(){var e=this._qualifiedName;return this._namespace===c.namespace.HTML&&\"html\"===this._nodeDocument._type&&(e=e.toUpperCase()),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"children\",{get:function(){throw new Error(\"Mixin: ParentNode not implemented.\")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"firstElementChild\",{get:function(){throw new Error(\"Mixin: ParentNode not implemented.\")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"lastElementChild\",{get:function(){throw new Error(\"Mixin: ParentNode not implemented.\")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"childElementCount\",{get:function(){throw new Error(\"Mixin: ParentNode not implemented.\")},enumerable:!0,configurable:!0}),t.prototype.prepend=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw new Error(\"Mixin: ParentNode not implemented.\")},t.prototype.append=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw new Error(\"Mixin: ParentNode not implemented.\")},t.prototype.querySelector=function(e){throw new Error(\"Mixin: ParentNode not implemented.\")},t.prototype.querySelectorAll=function(e){throw new Error(\"Mixin: ParentNode not implemented.\")},Object.defineProperty(t.prototype,\"previousElementSibling\",{get:function(){throw new Error(\"Mixin: NonDocumentTypeChildNode not implemented.\")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"nextElementSibling\",{get:function(){throw new Error(\"Mixin: NonDocumentTypeChildNode not implemented.\")},enumerable:!0,configurable:!0}),t.prototype.before=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw new Error(\"Mixin: ChildNode not implemented.\")},t.prototype.after=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw new Error(\"Mixin: ChildNode not implemented.\")},t.prototype.replaceWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw new Error(\"Mixin: ChildNode not implemented.\")},t.prototype.remove=function(){throw new Error(\"Mixin: ChildNode not implemented.\")},Object.defineProperty(t.prototype,\"assignedSlot\",{get:function(){throw new Error(\"Mixin: Slotable not implemented.\")},enumerable:!0,configurable:!0}),t._create=function(e,r,n,i){void 0===n&&(n=null),void 0===i&&(i=null);var o=new t;return o._localName=r,o._namespace=n,o._namespacePrefix=i,o._nodeDocument=e,o},t}(u.NodeImpl);t.ElementImpl=f,p.idl_defineConst(f.prototype,\"_nodeType\",s.NodeType.Element)},function(e,t,r){\"use strict\";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(2),a=r(34),s=r(12),u=function(e){function t(t){void 0===t&&(t=null);var r=e.call(this)||this;return r._children=new Set,r._host=t,r}return i(t,e),t.prototype.getElementById=function(e){throw new Error(\"Mixin: NonElementParentNode not implemented.\")},Object.defineProperty(t.prototype,\"children\",{get:function(){throw new Error(\"Mixin: ParentNode not implemented.\")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"firstElementChild\",{get:function(){throw new Error(\"Mixin: ParentNode not implemented.\")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"lastElementChild\",{get:function(){throw new Error(\"Mixin: ParentNode not implemented.\")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"childElementCount\",{get:function(){throw new Error(\"Mixin: ParentNode not implemented.\")},enumerable:!0,configurable:!0}),t.prototype.prepend=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw new Error(\"Mixin: ParentNode not implemented.\")},t.prototype.append=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw new Error(\"Mixin: ParentNode not implemented.\")},t.prototype.querySelector=function(e){throw new Error(\"Mixin: ParentNode not implemented.\")},t.prototype.querySelectorAll=function(e){throw new Error(\"Mixin: ParentNode not implemented.\")},t._create=function(e,r){void 0===r&&(r=null);var n=new t(r);return n._nodeDocument=e,n},t}(a.NodeImpl);t.DocumentFragmentImpl=u,s.idl_defineConst(u.prototype,\"_nodeType\",o.NodeType.DocumentFragment)},function(e,t,r){\"use strict\";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")};Object.defineProperty(t,\"__esModule\",{value:!0});var a=r(2),s=r(71),u=r(0),l=r(12),c=function(e){function t(t){void 0===t&&(t=\"\");var r=e.call(this,t)||this;return r._name=\"\",r._assignedSlot=null,r}return i(t,e),Object.defineProperty(t.prototype,\"wholeText\",{get:function(){var e,t,r=\"\";try{for(var n=o(u.text_contiguousTextNodes(this,!0)),i=n.next();!i.done;i=n.next()){r+=i.value._data}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r},enumerable:!0,configurable:!0}),t.prototype.splitText=function(e){return u.text_split(this,e)},Object.defineProperty(t.prototype,\"assignedSlot\",{get:function(){throw new Error(\"Mixin: Slotable not implemented.\")},enumerable:!0,configurable:!0}),t._create=function(e,r){void 0===r&&(r=\"\");var n=new t(r);return n._nodeDocument=e,n},t}(s.CharacterDataImpl);t.TextImpl=c,l.idl_defineConst(c.prototype,\"_nodeType\",a.NodeType.Text)},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(){}return Object.defineProperty(e.prototype,\"_startNode\",{get:function(){return this._start[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"_startOffset\",{get:function(){return this._start[1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"_endNode\",{get:function(){return this._end[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"_endOffset\",{get:function(){return this._end[1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"_collapsed\",{get:function(){return this._start[0]===this._end[0]&&this._start[1]===this._end[1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"startContainer\",{get:function(){return this._startNode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"startOffset\",{get:function(){return this._startOffset},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"endContainer\",{get:function(){return this._endNode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"endOffset\",{get:function(){return this._endOffset},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"collapsed\",{get:function(){return this._collapsed},enumerable:!0,configurable:!0}),e}();t.AbstractRangeImpl=n},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(2),i=function(){function e(e){this._activeFlag=!1,this._root=e,this._whatToShow=n.WhatToShow.All,this._filter=null}return Object.defineProperty(e.prototype,\"root\",{get:function(){return this._root},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"whatToShow\",{get:function(){return this._whatToShow},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"filter\",{get:function(){return this._filter},enumerable:!0,configurable:!0}),e}();t.TraverserImpl=i},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(2),i=r(0),o=r(12),a=function(){function e(e,t){this._target=null,this._relatedTarget=null,this._touchTargetList=[],this._path=[],this._currentTarget=null,this._eventPhase=n.EventPhase.None,this._stopPropagationFlag=!1,this._stopImmediatePropagationFlag=!1,this._canceledFlag=!1,this._inPassiveListenerFlag=!1,this._composedFlag=!1,this._initializedFlag=!1,this._dispatchFlag=!1,this._isTrusted=!1,this._bubbles=!1,this._cancelable=!1,this._type=e,t&&(this._bubbles=t.bubbles||!1,this._cancelable=t.cancelable||!1,this._composedFlag=t.composed||!1),this._initializedFlag=!0,this._timeStamp=(new Date).getTime()}return Object.defineProperty(e.prototype,\"type\",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"target\",{get:function(){return this._target},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"srcElement\",{get:function(){return this._target},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"currentTarget\",{get:function(){return this._currentTarget},enumerable:!0,configurable:!0}),e.prototype.composedPath=function(){var e=[],t=this._path;if(0===t.length)return e;var r=this._currentTarget;if(null===r)throw new Error(\"Event currentTarget is null.\");e.push(r);for(var n=0,i=0,o=t.length-1;o>=0;){if(t[o].rootOfClosedTree&&i++,t[o].invocationTarget===r){n=o;break}t[o].slotInClosedTree&&i--,o--}var a=i,s=i;for(o=n-1;o>=0;)t[o].rootOfClosedTree&&a++,a<=s&&e.unshift(t[o].invocationTarget),t[o].slotInClosedTree&&--a<s&&(s=a),o--;for(a=i,s=i,o=n+1;o<t.length;)t[o].slotInClosedTree&&a++,a<=s&&e.push(t[o].invocationTarget),t[o].rootOfClosedTree&&--a<s&&(s=a),o++;return e},Object.defineProperty(e.prototype,\"eventPhase\",{get:function(){return this._eventPhase},enumerable:!0,configurable:!0}),e.prototype.stopPropagation=function(){this._stopPropagationFlag=!0},Object.defineProperty(e.prototype,\"cancelBubble\",{get:function(){return this._stopPropagationFlag},set:function(e){e&&this.stopPropagation()},enumerable:!0,configurable:!0}),e.prototype.stopImmediatePropagation=function(){this._stopPropagationFlag=!0,this._stopImmediatePropagationFlag=!0},Object.defineProperty(e.prototype,\"bubbles\",{get:function(){return this._bubbles},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"cancelable\",{get:function(){return this._cancelable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"returnValue\",{get:function(){return!this._canceledFlag},set:function(e){e||i.event_setTheCanceledFlag(this)},enumerable:!0,configurable:!0}),e.prototype.preventDefault=function(){i.event_setTheCanceledFlag(this)},Object.defineProperty(e.prototype,\"defaultPrevented\",{get:function(){return this._canceledFlag},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"composed\",{get:function(){return this._composedFlag},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"isTrusted\",{get:function(){return this._isTrusted},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"timeStamp\",{get:function(){return this._timeStamp},enumerable:!0,configurable:!0}),e.prototype.initEvent=function(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!1),this._dispatchFlag||i.event_initialize(this,e,t,r)},e.NONE=0,e.CAPTURING_PHASE=1,e.AT_TARGET=2,e.BUBBLING_PHASE=3,e}();t.EventImpl=a,o.idl_defineConst(a.prototype,\"NONE\",0),o.idl_defineConst(a.prototype,\"CAPTURING_PHASE\",1),o.idl_defineConst(a.prototype,\"AT_TARGET\",2),o.idl_defineConst(a.prototype,\"BUBBLING_PHASE\",3)},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(2),i=r(9);t.traversal_filter=function(e,t){if(e._activeFlag)throw new i.InvalidStateError;var r=1<<t._nodeType-1;if(0==(e.whatToShow&r))return n.FilterResult.Skip;if(!e.filter)return n.FilterResult.Accept;e._activeFlag=!0;var o=n.FilterResult.Reject;try{o=e.filter.acceptNode(t)}catch(t){throw e._activeFlag=!1,t}return e._activeFlag=!1,o}},function(e,t,r){\"use strict\";var n=this&&this.__read||function(e,t){var r=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")};Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(6),a=r(3),s=r(1),u=r(99),l=r(73),c=r(17),h=r(173),p=r(30),f=r(52),d=r(37);t.document_elementInterface=function(e,t){return u.ElementImpl},t.document_internalCreateElementNS=function(e,t,r,i){var o=n(h.namespace_validateAndExtract(t,r),3),a=o[0],u=o[1],l=o[2],c=null;return void 0!==i&&(c=s.isString(i)?i:i.is),f.element_createAnElement(e,l,a,u,c,!0)},t.document_adopt=function(e,t){var r,n;if(e._nodeDocument!==t||null!==e._parent){var s=e._nodeDocument;if(e._parent&&d.mutation_remove(e,e._parent),t!==s)for(var u=c.tree_getFirstDescendantNode(e,!0,!0);null!==u;){if(u._nodeDocument=t,a.Guard.isElementNode(u))try{for(var h=(r=void 0,i(u._attributeList._asArray())),f=h.next();!f.done;f=h.next()){f.value._nodeDocument=t}}catch(e){r={error:e}}finally{try{f&&!f.done&&(n=h.return)&&n.call(h)}finally{if(r)throw r.error}}o.dom.features.customElements&&a.Guard.isElementNode(u)&&\"custom\"===u._customElementState&&l.customElement_enqueueACustomElementCallbackReaction(u,\"adoptedCallback\",[s,t]),o.dom.features.steps&&p.dom_runAdoptingSteps(u,s),u=c.tree_getNextDescendantNode(e,u,!0,!0)}}}},function(e,t,r){\"use strict\";var n=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")};Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(6),o=r(3),a=r(9),s=r(17),u=r(51),l=r(30);t.characterData_replaceData=function(e,t,r,c){var h,p,f=s.tree_nodeLength(e);if(t>f)throw new a.IndexSizeError(\"Offset exceeds character data length. Offset: \"+t+\", Length: \"+f+\", Node is \"+e.nodeName+\".\");t+r>f&&(r=f-t),i.dom.features.mutationObservers&&u.observer_queueMutationRecord(\"characterData\",e,null,null,e._data,[],[],null,null);var d=e._data.substring(0,t)+c+e._data.substring(t+r);e._data=d;try{for(var m=n(i.dom.rangeList),y=m.next();!y.done;y=m.next()){var v=y.value;v._start[0]===e&&v._start[1]>t&&v._start[1]<=t+r&&(v._start[1]=t),v._end[0]===e&&v._end[1]>t&&v._end[1]<=t+r&&(v._end[1]=t),v._start[0]===e&&v._start[1]>t+r&&(v._start[1]+=c.length-r),v._end[0]===e&&v._end[1]>t+r&&(v._end[1]+=c.length-r)}}catch(e){h={error:e}}finally{try{y&&!y.done&&(p=m.return)&&p.call(m)}finally{if(h)throw h.error}}i.dom.features.steps&&o.Guard.isTextNode(e)&&null!==e._parent&&l.dom_runChildTextContentChangeSteps(e._parent)},t.characterData_substringData=function(e,t,r){var n=s.tree_nodeLength(e);if(t>n)throw new a.IndexSizeError(\"Offset exceeds character data length. Offset: \"+t+\", Length: \"+n+\", Node is \"+e.nodeName+\".\");return t+r>n?e._data.substr(t):e._data.substr(t,r)}},function(e,t,r){\"use strict\";var n=this&&this.__read||function(e,t){var r=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e},o=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")};Object.defineProperty(t,\"__esModule\",{value:!0});var a=r(7);function s(e){var t=a.string.splitAStringOnASCIIWhitespace(e);return new Set(t)}function u(e){return i(e).join(\" \")}t.orderedSet_parse=s,t.orderedSet_serialize=u,t.orderedSet_sanitize=function(e){return u(s(e))},t.orderedSet_contains=function(e,t,r){var n,i,a,s;try{for(var u=o(t),l=u.next();!l.done;l=u.next()){var c=l.value,h=!1;try{for(var p=(a=void 0,o(e)),f=p.next();!f.done;f=p.next()){var d=f.value;if(r){if(d===c){h=!0;break}}else if(d.toUpperCase()===c.toUpperCase()){h=!0;break}}}catch(e){a={error:e}}finally{try{f&&!f.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}if(!h)return!1}}catch(e){n={error:e}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}return!0}},function(e,t,r){\"use strict\";r(179),Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(262),i=r(110),o=r(1);i.dom.setFeatures(!1),t.createDocument=function(){var e=(new n.DOMImplementation).createDocument(null,\"root\",null);return e.documentElement&&e.removeChild(e.documentElement),e},t.sanitizeInput=function(e,t){if(null==e)return e;if(void 0===t)return e+\"\";var r=\"\";e+=\"\";for(var n=0;n<e.length;n++){var i=e.charCodeAt(n);if(9===i||10===i||13===i||i>=32&&i<=55295||i>=57344&&i<=65533)r+=e.charAt(n);else if(i>=55296&&i<=56319&&n<e.length-1){var a=e.charCodeAt(n+1);a>=56320&&a<=57343?(i=1024*(i-55296)+a-56320+65536,r+=String.fromCodePoint(i),n++):r+=o.isString(t)?t:t(e.charAt(n),n,e)}else r+=o.isString(t)?t:t(e.charAt(n),n,e)}return r}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(1),i=r(153);t.AbortController=i.AbortControllerImpl;var o=r(154);t.AbortSignal=o.AbortSignalImpl;var a=r(102);t.AbstractRange=a.AbstractRangeImpl;var s=r(157);t.Attr=s.AttrImpl;var u=r(158);t.CDATASection=u.CDATASectionImpl;var l=r(71);t.CharacterData=l.CharacterDataImpl;var c=r(263),h=r(159);t.Comment=h.CommentImpl;var p=r(171);t.CustomEvent=p.CustomEventImpl;var f=r(100);t.DocumentFragment=f.DocumentFragmentImpl;var d=r(98);t.Document=d.DocumentImpl;var m=r(264),y=r(155);t.DocumentType=y.DocumentTypeImpl;var v=r(6);t.dom=v.dom;var _=r(148);t.DOMImplementation=_.DOMImplementationImpl;var g=r(170);t.DOMTokenList=g.DOMTokenListImpl;var b=r(99);t.Element=b.ElementImpl;var x=r(104);t.Event=x.EventImpl;var w=r(70);t.EventTarget=w.EventTargetImpl;var E=r(161);t.HTMLCollection=E.HTMLCollectionImpl;var D=r(265);t.MutationObserver=D.MutationObserverImpl;var S=r(169);t.MutationRecord=S.MutationRecordImpl;var C=r(164);t.NamedNodeMap=C.NamedNodeMapImpl;var A=r(168);t.NodeFilter=A.NodeFilterImpl;var N=r(34);t.Node=N.NodeImpl;var T=r(166);t.NodeIterator=T.NodeIteratorImpl;var O=r(162);t.NodeList=O.NodeListImpl;var F=r(163);t.NodeListStatic=F.NodeListStaticImpl;var k=r(266),P=r(267),I=r(268),L=r(160);t.ProcessingInstruction=L.ProcessingInstructionImpl;var M=r(165);t.Range=M.RangeImpl;var B=r(156);t.ShadowRoot=B.ShadowRootImpl;var j=r(269),R=r(270);t.StaticRange=R.StaticRangeImpl;var z=r(101);t.Text=z.TextImpl;var U=r(103);t.Traverser=U.TraverserImpl;var G=r(167);t.TreeWalker=G.TreeWalkerImpl;var X=r(149);t.Window=X.WindowImpl;var q=r(151);t.XMLDocument=q.XMLDocumentImpl,n.applyMixin(b.ElementImpl,c.ChildNodeImpl),n.applyMixin(l.CharacterDataImpl,c.ChildNodeImpl),n.applyMixin(y.DocumentTypeImpl,c.ChildNodeImpl),n.applyMixin(d.DocumentImpl,m.DocumentOrShadowRootImpl),n.applyMixin(B.ShadowRootImpl,m.DocumentOrShadowRootImpl),n.applyMixin(b.ElementImpl,k.NonDocumentTypeChildNodeImpl),n.applyMixin(l.CharacterDataImpl,k.NonDocumentTypeChildNodeImpl),n.applyMixin(d.DocumentImpl,P.NonElementParentNodeImpl),n.applyMixin(f.DocumentFragmentImpl,P.NonElementParentNodeImpl),n.applyMixin(d.DocumentImpl,I.ParentNodeImpl),n.applyMixin(f.DocumentFragmentImpl,I.ParentNodeImpl),n.applyMixin(b.ElementImpl,I.ParentNodeImpl),n.applyMixin(z.TextImpl,j.SlotableImpl),n.applyMixin(b.ElementImpl,j.SlotableImpl)},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){e[e.EOF=0]=\"EOF\",e[e.Declaration=1]=\"Declaration\",e[e.DocType=2]=\"DocType\",e[e.Element=3]=\"Element\",e[e.Text=4]=\"Text\",e[e.CDATA=5]=\"CDATA\",e[e.PI=6]=\"PI\",e[e.Comment=7]=\"Comment\",e[e.ClosingTag=8]=\"ClosingTag\"}(t.TokenType||(t.TokenType={}))},function(e,t,r){\"use strict\";r(64),r(20),r(66);var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(1),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype._parse=function(e,t){var r=this,n=this._builderOptions,i=null;return o.isFunction(t)?i=this.parse(e,t.apply(this)):o.isArray(t)||o.isSet(t)?o.forEachArray(t,(function(t){return i=r.parse(e,t)}),this):o.isMap(t)||o.isObject(t)?o.forEachObject(t,(function(t,a){if(o.isFunction(a)&&(a=a.apply(r)),n.ignoreConverters||0!==t.indexOf(n.convert.att))if(n.ignoreConverters||0!==t.indexOf(n.convert.text))if(n.ignoreConverters||0!==t.indexOf(n.convert.cdata))if(n.ignoreConverters||0!==t.indexOf(n.convert.comment))if(n.ignoreConverters||0!==t.indexOf(n.convert.ins))if((o.isArray(a)||o.isSet(a))&&o.isEmpty(a));else if((o.isMap(a)||o.isObject(a))&&o.isEmpty(a))i=r.element(e,void 0,r.sanitize(t))||i;else if(n.keepNullNodes||null!=a)if(o.isArray(a)||o.isSet(a))o.forEachArray(a,(function(n){var o={};o[t]=n,i=r.parse(e,o)}),r);else if(o.isMap(a)||o.isObject(a)){(s=r.element(e,void 0,r.sanitize(t)))&&(i=s,r.parse(s,a))}else if(null!=a&&\"\"!==a){var s;(s=r.element(e,void 0,r.sanitize(t)))&&(i=s,r.text(s,r._decodeText(r.sanitize(a))))}else i=r.element(e,void 0,r.sanitize(t))||i;else;else if(o.isString(a)){var u=a.indexOf(\" \"),l=-1===u?a:a.substr(0,u),c=-1===u?\"\":a.substr(u+1);i=r.instruction(e,r.sanitize(l),r.sanitize(c))||i}else o.isArray(a)||o.isSet(a)?o.forEachArray(a,(function(t){var n=t.indexOf(\" \"),o=-1===n?t:t.substr(0,n),a=-1===n?\"\":t.substr(n+1);i=r.instruction(e,r.sanitize(o),r.sanitize(a))||i}),r):o.forEachObject(a,(function(t,n){return i=r.instruction(e,r.sanitize(t),r.sanitize(n))||i}),r);else o.isArray(a)||o.isSet(a)?o.forEachArray(a,(function(t){return i=r.comment(e,r.sanitize(t))||i}),r):i=r.comment(e,r.sanitize(a))||i;else o.isArray(a)||o.isSet(a)?o.forEachArray(a,(function(t){return i=r.cdata(e,r.sanitize(t))||i}),r):i=r.cdata(e,r.sanitize(a))||i;else i=o.isMap(a)||o.isObject(a)?r.parse(e,a):r.text(e,r._decodeText(r.sanitize(a)))||i;else if(t===n.convert.att){if(o.isArray(a)||o.isSet(a))throw new Error(\"Invalid attribute: \"+a.toString()+\". \"+e._debugInfo());o.forEachObject(a,(function(t,n){i=r.attribute(e,void 0,r.sanitize(t),r._decodeAttributeValue(r.sanitize(n)))||i}))}else i=r.attribute(e,void 0,r.sanitize(t.substr(n.convert.att.length)),r._decodeAttributeValue(r.sanitize(a)))||i}),this):(n.keepNullNodes||null!=t)&&(i=this.text(e,this._decodeText(this.sanitize(t)))||i),i||e},t}(r(75).BaseReader);t.ObjectReader=a},function(e,t,r){\"use strict\";var n=r(39);e.exports=new n({explicit:[r(286),r(287),r(288)]})},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(e){this.level=0,this._builderOptions=e,this._writerOptions=e};t.BaseCBWriter=n},function(e,t,r){var n=r(16),i=r(8),o=r(116);e.exports=!n&&!i((function(){return 7!=Object.defineProperty(o(\"div\"),\"a\",{get:function(){return 7}}).a}))},function(e,t,r){var n=r(11),i=r(13),o=n.document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},function(e,t,r){var n=r(118),i=Function.toString;\"function\"!=typeof n.inspectSource&&(n.inspectSource=function(e){return i.call(e)}),e.exports=n.inspectSource},function(e,t,r){var n=r(11),i=r(80),o=n[\"__core-js_shared__\"]||i(\"__core-js_shared__\",{});e.exports=o},function(e,t,r){var n=r(14),i=r(187),o=r(55),a=r(15);e.exports=function(e,t){for(var r=i(t),s=a.f,u=o.f,l=0;l<r.length;l++){var c=r[l];n(e,c)||s(e,c,u(t,c))}}},function(e,t,r){var n=r(11);e.exports=n},function(e,t,r){var n=r(14),i=r(24),o=r(122).indexOf,a=r(45);e.exports=function(e,t){var r,s=i(e),u=0,l=[];for(r in s)!n(a,r)&&n(s,r)&&l.push(r);for(;t.length>u;)n(s,r=t[u++])&&(~o(l,r)||l.push(r));return l}},function(e,t,r){var n=r(24),i=r(26),o=r(83),a=function(e){return function(t,r,a){var s,u=n(t),l=i(u.length),c=o(a,l);if(e&&r!=r){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===r)return e||c||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},function(e,t,r){var n=r(8),i=/#|\\.prototype\\./,o=function(e,t){var r=s[a(e)];return r==l||r!=u&&(\"function\"==typeof t?n(t):!!t)},a=o.normalize=function(e){return String(e).replace(i,\".\").toLowerCase()},s=o.data={},u=o.NATIVE=\"N\",l=o.POLYFILL=\"P\";e.exports=o},function(e,t,r){var n=r(86);e.exports=n&&!Symbol.sham&&\"symbol\"==typeof Symbol.iterator},function(e,t,r){var n=r(5);t.f=n},function(e,t,r){var n=r(120),i=r(14),o=r(125),a=r(15).f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});i(t,e)||a(t,e,{value:o.f(e)})}},function(e,t){e.exports=function(e){if(\"function\"!=typeof e)throw TypeError(String(e)+\" is not a function\");return e}},function(e,t,r){var n=r(13),i=r(59),o=r(5)(\"species\");e.exports=function(e,t){var r;return i(e)&&(\"function\"!=typeof(r=e.constructor)||r!==Array&&!i(r.prototype)?n(r)&&null===(r=r[o])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===t?0:t)}},function(e,t,r){var n,i,o=r(11),a=r(193),s=o.process,u=s&&s.versions,l=u&&u.v8;l?i=(n=l.split(\".\"))[0]+n[1]:a&&(!(n=a.match(/Edge\\/(\\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\\/(\\d+)/))&&(i=n[1]),e.exports=i&&+i},function(e,t,r){var n=r(5),i=r(60),o=r(15),a=n(\"unscopables\"),s=Array.prototype;null==s[a]&&o.f(s,a,{configurable:!0,value:i(null)}),e.exports=function(e){s[a][e]=!0}},function(e,t,r){\"use strict\";var n,i,o,a=r(132),s=r(21),u=r(14),l=r(5),c=r(44),h=l(\"iterator\"),p=!1;[].keys&&(\"next\"in(o=[].keys())?(i=a(a(o)))!==Object.prototype&&(n=i):p=!0),null==n&&(n={}),c||u(n,h)||s(n,h,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:p}},function(e,t,r){var n=r(14),i=r(27),o=r(57),a=r(196),s=o(\"IE_PROTO\"),u=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=i(e),n(e,s)?e[s]:\"function\"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?u:null}},function(e,t,r){var n=r(18),i=r(197);e.exports=Object.setPrototypeOf||(\"__proto__\"in{}?function(){var e,t=!1,r={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,\"__proto__\").set).call(r,[]),t=r instanceof Array}catch(e){}return function(r,o){return n(r),i(o),t?e.call(r,o):r.__proto__=o,r}}():void 0)},function(e,t,r){\"use strict\";var n=r(56),i=r(15),o=r(40);e.exports=function(e,t,r){var a=n(t);a in e?i.f(e,a,o(0,r)):e[a]=r}},function(e,t,r){var n=r(90),i=r(42),o=r(5)(\"toStringTag\"),a=\"Arguments\"==i(function(){return arguments}());e.exports=n?i:function(e){var t,r,n;return void 0===e?\"Undefined\":null===e?\"Null\":\"string\"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?r:a?i(t):\"Object\"==(n=i(t))&&\"function\"==typeof t.callee?\"Arguments\":n}},function(e,t,r){\"use strict\";var n=r(18);e.exports=function(){var e=n(this),t=\"\";return e.global&&(t+=\"g\"),e.ignoreCase&&(t+=\"i\"),e.multiline&&(t+=\"m\"),e.dotAll&&(t+=\"s\"),e.unicode&&(t+=\"u\"),e.sticky&&(t+=\"y\"),t}},function(e,t,r){var n=r(47),i=r(35),o=function(e){return function(t,r){var o,a,s=String(i(t)),u=n(r),l=s.length;return u<0||u>=l?e?\"\":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}};e.exports={codeAt:o(!1),charAt:o(!0)}},function(e,t,r){var n=r(4),i=r(27),o=r(61);n({target:\"Object\",stat:!0,forced:r(8)((function(){o(1)}))},{keys:function(e){return o(i(e))}})},function(e,t,r){\"use strict\";var n=r(4),i=r(11),o=r(123),a=r(25),s=r(140),u=r(141),l=r(142),c=r(13),h=r(8),p=r(208),f=r(62),d=r(209);e.exports=function(e,t,r){var m=-1!==e.indexOf(\"Map\"),y=-1!==e.indexOf(\"Weak\"),v=m?\"set\":\"add\",_=i[e],g=_&&_.prototype,b=_,x={},w=function(e){var t=g[e];a(g,e,\"add\"==e?function(e){return t.call(this,0===e?0:e),this}:\"delete\"==e?function(e){return!(y&&!c(e))&&t.call(this,0===e?0:e)}:\"get\"==e?function(e){return y&&!c(e)?void 0:t.call(this,0===e?0:e)}:\"has\"==e?function(e){return!(y&&!c(e))&&t.call(this,0===e?0:e)}:function(e,r){return t.call(this,0===e?0:e,r),this})};if(o(e,\"function\"!=typeof _||!(y||g.forEach&&!h((function(){(new _).entries().next()})))))b=r.getConstructor(t,e,m,v),s.REQUIRED=!0;else if(o(e,!0)){var E=new b,D=E[v](y?{}:-0,1)!=E,S=h((function(){E.has(1)})),C=p((function(e){new _(e)})),A=!y&&h((function(){for(var e=new _,t=5;t--;)e[v](t,t);return!e.has(-0)}));C||((b=t((function(t,r){l(t,b,e);var n=d(new _,t,b);return null!=r&&u(r,n[v],n,m),n}))).prototype=g,g.constructor=b),(S||A)&&(w(\"delete\"),w(\"has\"),m&&w(\"get\")),(A||D)&&w(v),y&&g.clear&&delete g.clear}return x[e]=b,n({global:!0,forced:b!=_},x),f(b,e),y||r.setStrong(b,e,m),b}},function(e,t,r){var n=r(45),i=r(13),o=r(14),a=r(15).f,s=r(58),u=r(204),l=s(\"meta\"),c=0,h=Object.isExtensible||function(){return!0},p=function(e){a(e,l,{value:{objectID:\"O\"+ ++c,weakData:{}}})},f=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!i(e))return\"symbol\"==typeof e?e:(\"string\"==typeof e?\"S\":\"P\")+e;if(!o(e,l)){if(!h(e))return\"F\";if(!t)return\"E\";p(e)}return e[l].objectID},getWeakData:function(e,t){if(!o(e,l)){if(!h(e))return!0;if(!t)return!1;p(e)}return e[l].weakData},onFreeze:function(e){return u&&f.REQUIRED&&h(e)&&!o(e,l)&&p(e),e}};n[l]=!0},function(e,t,r){var n=r(18),i=r(205),o=r(26),a=r(87),s=r(206),u=r(207),l=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,t,r,c,h){var p,f,d,m,y,v,_,g=a(t,r,c?2:1);if(h)p=e;else{if(\"function\"!=typeof(f=s(e)))throw TypeError(\"Target is not iterable\");if(i(f)){for(d=0,m=o(e.length);m>d;d++)if((y=c?g(n(_=e[d])[0],_[1]):g(e[d]))&&y instanceof l)return y;return new l(!1)}p=f.call(e)}for(v=p.next;!(_=v.call(p)).done;)if(\"object\"==typeof(y=u(p,g,_.value,c))&&y&&y instanceof l)return y;return new l(!1)}).stop=function(e){return new l(!0,e)}},function(e,t){e.exports=function(e,t,r){if(!(e instanceof t))throw TypeError(\"Incorrect \"+(r?r+\" \":\"\")+\"invocation\");return e}},function(e,t,r){\"use strict\";var n=r(15).f,i=r(60),o=r(210),a=r(87),s=r(142),u=r(141),l=r(88),c=r(211),h=r(16),p=r(140).fastKey,f=r(43),d=f.set,m=f.getterFor;e.exports={getConstructor:function(e,t,r,l){var c=e((function(e,n){s(e,c,t),d(e,{type:t,index:i(null),first:void 0,last:void 0,size:0}),h||(e.size=0),null!=n&&u(n,e[l],e,r)})),f=m(t),y=function(e,t,r){var n,i,o=f(e),a=v(e,t);return a?a.value=r:(o.last=a={index:i=p(t,!0),key:t,value:r,previous:n=o.last,next:void 0,removed:!1},o.first||(o.first=a),n&&(n.next=a),h?o.size++:e.size++,\"F\"!==i&&(o.index[i]=a)),e},v=function(e,t){var r,n=f(e),i=p(t);if(\"F\"!==i)return n.index[i];for(r=n.first;r;r=r.next)if(r.key==t)return r};return o(c.prototype,{clear:function(){for(var e=f(this),t=e.index,r=e.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete t[r.index],r=r.next;e.first=e.last=void 0,h?e.size=0:this.size=0},delete:function(e){var t=f(this),r=v(this,e);if(r){var n=r.next,i=r.previous;delete t.index[r.index],r.removed=!0,i&&(i.next=n),n&&(n.previous=i),t.first==r&&(t.first=n),t.last==r&&(t.last=i),h?t.size--:this.size--}return!!r},forEach:function(e){for(var t,r=f(this),n=a(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:r.first;)for(n(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!v(this,e)}}),o(c.prototype,r?{get:function(e){var t=v(this,e);return t&&t.value},set:function(e,t){return y(this,0===e?0:e,t)}}:{add:function(e){return y(this,e=0===e?0:e,e)}}),h&&n(c.prototype,\"size\",{get:function(){return f(this).size}}),c},setStrong:function(e,t,r){var n=t+\" Iterator\",i=m(t),o=m(n);l(e,t,(function(e,t){d(this,{type:n,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,r=e.last;r&&r.removed;)r=r.previous;return e.target&&(e.last=r=r?r.next:e.state.first)?\"keys\"==t?{value:r.key,done:!1}:\"values\"==t?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),r?\"entries\":\"values\",!r,!0),c(t)}}},function(e,t,r){\"use strict\";var n,i=r(4),o=r(55).f,a=r(26),s=r(222),u=r(35),l=r(224),c=r(44),h=\"\".endsWith,p=Math.min,f=l(\"endsWith\");i({target:\"String\",proto:!0,forced:!!(c||f||(n=o(String.prototype,\"endsWith\"),!n||n.writable))&&!f},{endsWith:function(e){var t=String(u(this));s(e);var r=arguments.length>1?arguments[1]:void 0,n=a(t.length),i=void 0===r?n:p(a(r),n),o=String(e);return h?h.call(t,o,i):t.slice(i-o.length,i)===o}})},function(e,t,r){\"use strict\";(function(e){\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\nvar n=r(229),i=r(230),o=r(231);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError(\"Invalid typed array length\");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,r);if(\"number\"==typeof e){if(\"string\"==typeof t)throw new Error(\"If encoding is specified then the first argument must be a string\");return h(this,e)}return l(this,e,t,r)}function l(e,t,r,n){if(\"number\"==typeof t)throw new TypeError('\"value\" argument must not be a number');return\"undefined\"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError(\"'offset' is out of bounds\");if(t.byteLength<r+(n||0))throw new RangeError(\"'length' is out of bounds\");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=p(e,t);return e}(e,t,r,n):\"string\"==typeof t?function(e,t,r){\"string\"==typeof r&&\"\"!==r||(r=\"utf8\");if(!u.isEncoding(r))throw new TypeError('\"encoding\" must be a valid string encoding');var n=0|d(t,r),i=(e=s(e,n)).write(t,r);i!==n&&(e=e.slice(0,i));return e}(e,t,r):function(e,t){if(u.isBuffer(t)){var r=0|f(t.length);return 0===(e=s(e,r)).length||t.copy(e,0,0,r),e}if(t){if(\"undefined\"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||\"length\"in t)return\"number\"!=typeof t.length||(n=t.length)!=n?s(e,0):p(e,t);if(\"Buffer\"===t.type&&o(t.data))return p(e,t.data)}var n;throw new TypeError(\"First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.\")}(e,t)}function c(e){if(\"number\"!=typeof e)throw new TypeError('\"size\" argument must be a number');if(e<0)throw new RangeError('\"size\" argument must not be negative')}function h(e,t){if(c(t),e=s(e,t<0?0:0|f(t)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function p(e,t){var r=t.length<0?0:0|f(t.length);e=s(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function f(e){if(e>=a())throw new RangeError(\"Attempt to allocate Buffer larger than maximum size: 0x\"+a().toString(16)+\" bytes\");return 0|e}function d(e,t){if(u.isBuffer(e))return e.length;if(\"undefined\"!=typeof ArrayBuffer&&\"function\"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;\"string\"!=typeof e&&(e=\"\"+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case\"ascii\":case\"latin1\":case\"binary\":return r;case\"utf8\":case\"utf-8\":case void 0:return z(e).length;case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return 2*r;case\"hex\":return r>>>1;case\"base64\":return U(e).length;default:if(n)return z(e).length;t=(\"\"+t).toLowerCase(),n=!0}}function m(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return\"\";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return\"\";if((r>>>=0)<=(t>>>=0))return\"\";for(e||(e=\"utf8\");;)switch(e){case\"hex\":return T(this,t,r);case\"utf8\":case\"utf-8\":return C(this,t,r);case\"ascii\":return A(this,t,r);case\"latin1\":case\"binary\":return N(this,t,r);case\"base64\":return S(this,t,r);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return O(this,t,r);default:if(n)throw new TypeError(\"Unknown encoding: \"+e);e=(e+\"\").toLowerCase(),n=!0}}function y(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function v(e,t,r,n,i){if(0===e.length)return-1;if(\"string\"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if(\"string\"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:_(e,t,r,n,i);if(\"number\"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&\"function\"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):_(e,[t],r,n,i);throw new TypeError(\"val must be string, number or Buffer\")}function _(e,t,r,n,i){var o,a=1,s=e.length,u=t.length;if(void 0!==n&&(\"ucs2\"===(n=String(n).toLowerCase())||\"ucs-2\"===n||\"utf16le\"===n||\"utf-16le\"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,r/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var c=-1;for(o=r;o<s;o++)if(l(e,o)===l(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(r+u>s&&(r=s-u),o=r;o>=0;o--){for(var h=!0,p=0;p<u;p++)if(l(e,o+p)!==l(t,p)){h=!1;break}if(h)return o}return-1}function g(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new TypeError(\"Invalid hex string\");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s}return a}function b(e,t,r,n){return G(z(t,e.length-r),e,r,n)}function x(e,t,r,n){return G(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function w(e,t,r,n){return x(e,t,r,n)}function E(e,t,r,n){return G(U(t),e,r,n)}function D(e,t,r,n){return G(function(e,t){for(var r,n,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function S(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function C(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,a,s,u,l=e[i],c=null,h=l>239?4:l>223?3:l>191?2:1;if(i+h<=r)switch(h){case 1:l<128&&(c=l);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&l)<<6|63&o)>127&&(c=u);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(u=(15&l)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,h=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=h}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var r=\"\",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&\"function\"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,r){return l(null,e,t,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,\"undefined\"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,r){return function(e,t,r,n){return c(t),t<=0?s(e,t):void 0!==r?\"string\"==typeof n?s(e,t).fill(r,n):s(e,t).fill(r):s(e,t)}(null,e,t,r)},u.allocUnsafe=function(e){return h(null,e)},u.allocUnsafeSlow=function(e){return h(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError(\"Arguments must be Buffers\");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case\"hex\":case\"utf8\":case\"utf-8\":case\"ascii\":case\"latin1\":case\"binary\":case\"base64\":case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return!0;default:return!1}},u.concat=function(e,t){if(!o(e))throw new TypeError('\"list\" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=u.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var a=e[r];if(!u.isBuffer(a))throw new TypeError('\"list\" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError(\"Buffer size must be a multiple of 16-bits\");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError(\"Buffer size must be a multiple of 32-bits\");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError(\"Buffer size must be a multiple of 64-bits\");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?\"\":0===arguments.length?C(this,0,e):m.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError(\"Argument must be a Buffer\");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e=\"\",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString(\"hex\",0,r).match(/.{2}/g).join(\" \"),this.length>r&&(e+=\" ... \")),\"<Buffer \"+e+\">\"},u.prototype.compare=function(e,t,r,n,i){if(!u.isBuffer(e))throw new TypeError(\"Argument must be a Buffer\");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError(\"out of range index\");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),s=Math.min(o,a),l=this.slice(n,i),c=e.slice(t,r),h=0;h<s;++h)if(l[h]!==c[h]){o=l[h],a=c[h];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return v(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return v(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n=\"utf8\",r=this.length,t=0;else if(void 0===r&&\"string\"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error(\"Buffer.write(string, encoding, offset[, length]) is no longer supported\");t|=0,isFinite(r)?(r|=0,void 0===n&&(n=\"utf8\")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError(\"Attempt to write outside buffer bounds\");n||(n=\"utf8\");for(var o=!1;;)switch(n){case\"hex\":return g(this,e,t,r);case\"utf8\":case\"utf-8\":return b(this,e,t,r);case\"ascii\":return x(this,e,t,r);case\"latin1\":case\"binary\":return w(this,e,t,r);case\"base64\":return E(this,e,t,r);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return D(this,e,t,r);default:if(o)throw new TypeError(\"Unknown encoding: \"+n);n=(\"\"+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:\"Buffer\",data:Array.prototype.slice.call(this._arr||this,0)}};function A(e,t,r){var n=\"\";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function N(e,t,r){var n=\"\";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function T(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i=\"\",o=t;o<r;++o)i+=R(e[o]);return i}function O(e,t,r){for(var n=e.slice(t,r),i=\"\",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function F(e,t,r){if(e%1!=0||e<0)throw new RangeError(\"offset is not uint\");if(e+t>r)throw new RangeError(\"Trying to access beyond buffer length\")}function k(e,t,r,n,i,o){if(!u.isBuffer(e))throw new TypeError('\"buffer\" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('\"value\" argument is out of bounds');if(r+n>e.length)throw new RangeError(\"Index out of range\")}function P(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function I(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function L(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError(\"Index out of range\");if(r<0)throw new RangeError(\"Index out of range\")}function M(e,t,r,n,o){return o||L(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function B(e,t,r,n,o){return o||L(e,0,r,8),i.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;r=new u(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},u.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||F(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},u.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||F(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUInt8=function(e,t){return t||F(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||F(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||F(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||F(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||F(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||F(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||F(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return t||F(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||F(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){t||F(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return t||F(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||F(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||F(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||F(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||F(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||F(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||k(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},u.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||k(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},u.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):I(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):I(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);k(this,e,t,r,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);k(this,e,t,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):I(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):I(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,r){return M(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return M(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return B(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return B(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError(\"targetStart out of bounds\");if(r<0||r>=this.length)throw new RangeError(\"sourceStart out of bounds\");if(n<0)throw new RangeError(\"sourceEnd out of bounds\");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;i>=0;--i)e[i+t]=this[i+r];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},u.prototype.fill=function(e,t,r,n){if(\"string\"==typeof e){if(\"string\"==typeof t?(n=t,t=0,r=this.length):\"string\"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&\"string\"!=typeof n)throw new TypeError(\"encoding must be a string\");if(\"string\"==typeof n&&!u.isEncoding(n))throw new TypeError(\"Unknown encoding: \"+n)}else\"number\"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError(\"Out of range index\");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),\"number\"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var a=u.isBuffer(e)?e:z(new u(e,n).toString()),s=a.length;for(o=0;o<r-t;++o)this[o+t]=a[o%s]}return this};var j=/[^+\\/0-9A-Za-z-_]/g;function R(e){return e<16?\"0\"+e.toString(16):e.toString(16)}function z(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error(\"Invalid code point\");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function U(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\\s+|\\s+$/g,\"\")}(e).replace(j,\"\")).length<2)return\"\";for(;e.length%4!=0;)e+=\"=\";return e}(e))}function G(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}}).call(this,r(78))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.isASCIIByte=function(e){return e>=0&&e<=127}},function(e,t,r){\"use strict\";var n=this&&this.__read||function(e,t){var r=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e};Object.defineProperty(t,\"__esModule\",{value:!0}),t.length=function(e){return e.length},t.byteLowercase=function(e){for(var t=0;t<e.length;t++){var r=e[t];r>=65&&r<=90&&(e[t]=r+32)}},t.byteUppercase=function(e){for(var t=0;t<e.length;t++){var r=e[t];r>=97&&r<=122&&(e[t]=r-32)}},t.byteCaseInsensitiveMatch=function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var n=e[r],i=t[r];if(n>=65&&n<=90&&(n+=32),i>=65&&i<=90&&(i+=32),n!==i)return!1}return!0},t.startsWith=function(e,t){for(var r=0;;){if(r>=e.length)return!1;if(r>=t.length)return!0;if(e[r]!==t[r])return!1;r++}},t.byteLessThan=function(e,t){for(var r=0;;){if(r>=e.length)return!1;if(r>=t.length)return!0;var n=e[r],i=t[r];if(n<i)return!0;if(n>i)return!1;r++}},t.isomorphicDecode=function(e){return String.fromCodePoint.apply(String,i(e))}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(6),i=r(7),o=r(0),a=r(12),s=function(){function e(e){this._associatedDocument=e||n.dom.window.document}return e.prototype.createDocumentType=function(e,t,r){return o.namespace_validate(e),o.create_documentType(this._associatedDocument,e,t,r)},e.prototype.createDocument=function(e,t,r){void 0===r&&(r=null);var n=o.create_xmlDocument(),a=null;return t&&(a=o.document_internalCreateElementNS(n,e,t)),r&&n.appendChild(r),a&&n.appendChild(a),n._origin=this._associatedDocument._origin,e===i.namespace.HTML?n._contentType=\"application/xhtml+xml\":e===i.namespace.SVG?n._contentType=\"image/svg+xml\":n._contentType=\"application/xml\",n},e.prototype.createHTMLDocument=function(e){var t=o.create_document();t._type=\"html\",t._contentType=\"text/html\",t.appendChild(o.create_documentType(t,\"html\",\"\",\"\"));var r=o.element_createAnElement(t,\"html\",i.namespace.HTML);t.appendChild(r);var n=o.element_createAnElement(t,\"head\",i.namespace.HTML);if(r.appendChild(n),void 0!==e){var a=o.element_createAnElement(t,\"title\",i.namespace.HTML);n.appendChild(a);var s=o.create_text(t,e);a.appendChild(s)}var u=o.element_createAnElement(t,\"body\",i.namespace.HTML);return r.appendChild(u),t._origin=this._associatedDocument._origin,t},e.prototype.hasFeature=function(){return!0},e._create=function(t){return new e(t)},e}();t.DOMImplementationImpl=s,a.idl_defineConst(s.prototype,\"_ID\",\"@oozcitak/dom\")},function(e,t,r){\"use strict\";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(70),a=r(1),s=r(0),u=function(e){function t(){var t=e.call(this)||this;return t._signalSlots=new Set,t._mutationObserverMicrotaskQueued=!1,t._mutationObservers=new Set,t._iteratorList=new a.FixedSizeSet,t._associatedDocument=s.create_document(),t}return i(t,e),Object.defineProperty(t.prototype,\"document\",{get:function(){return this._associatedDocument},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"event\",{get:function(){return this._currentEvent},enumerable:!0,configurable:!0}),t._create=function(){return new t},t}(o.EventTargetImpl);t.WindowImpl=u},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(2),i=function(){function e(){}return e.isNode=function(e){return!!e&&void 0!==e._nodeType},e.isDocumentNode=function(t){return e.isNode(t)&&t._nodeType===n.NodeType.Document},e.isDocumentTypeNode=function(t){return e.isNode(t)&&t._nodeType===n.NodeType.DocumentType},e.isDocumentFragmentNode=function(t){return e.isNode(t)&&t._nodeType===n.NodeType.DocumentFragment},e.isAttrNode=function(t){return e.isNode(t)&&t._nodeType===n.NodeType.Attribute},e.isCharacterDataNode=function(t){if(!e.isNode(t))return!1;var r=t._nodeType;return r===n.NodeType.Text||r===n.NodeType.ProcessingInstruction||r===n.NodeType.Comment||r===n.NodeType.CData},e.isTextNode=function(t){return e.isNode(t)&&(t._nodeType===n.NodeType.Text||t._nodeType===n.NodeType.CData)},e.isExclusiveTextNode=function(t){return e.isNode(t)&&t._nodeType===n.NodeType.Text},e.isCDATASectionNode=function(t){return e.isNode(t)&&t._nodeType===n.NodeType.CData},e.isCommentNode=function(t){return e.isNode(t)&&t._nodeType===n.NodeType.Comment},e.isProcessingInstructionNode=function(t){return e.isNode(t)&&t._nodeType===n.NodeType.ProcessingInstruction},e.isElementNode=function(t){return e.isNode(t)&&t._nodeType===n.NodeType.Element},e.isCustomElementNode=function(t){return e.isElementNode(t)&&\"custom\"===t._customElementState},e.isShadowRoot=function(e){return!!e&&void 0!==e.host},e.isMouseEvent=function(e){return!!e&&void 0!==e.screenX&&null!=e.screenY},e.isSlotable=function(t){return!!t&&void 0!==t._name&&void 0!==t._assignedSlot&&(e.isTextNode(t)||e.isElementNode(t))},e.isSlot=function(t){return!!t&&void 0!==t._name&&void 0!==t._assignedNodes&&e.isElementNode(t)},e.isWindow=function(e){return!!e&&void 0!==e.navigator},e.isEventListener=function(e){return!!e&&void 0!==e.handleEvent},e.isRegisteredObserver=function(e){return!!e&&void 0!==e.observer&&void 0!==e.options},e.isTransientRegisteredObserver=function(t){return!!t&&void 0!==t.source&&e.isRegisteredObserver(t)},e}();t.Guard=i},function(e,t,r){\"use strict\";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=function(e){function t(){return e.call(this)||this}return i(t,e),t}(r(98).DocumentImpl);t.XMLDocumentImpl=o},function(e,t,r){\"use strict\";var n=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},i=this&&this.__read||function(e,t){var r=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(t,\"__esModule\",{value:!0});var o,a=r(1),s=r(243),u=r(7),l=r(244),c={ftp:21,file:null,http:80,https:443,ws:80,wss:443},h=/[\\0-\\x1F\\x7F-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/,p=/[ \"<>`]|[\\0-\\x1F\\x7F-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/,f=/[ \"<>`#?{}]|[\\0-\\x1F\\x7F-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/,d=/[ \"<>`#?{}/:;=@\\[\\]\\\\\\^\\|]|[\\0-\\x1F\\x7F-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/,m=/[0-9A-Za-z!\\$&-\\/:;=\\?@_~\\xA0-\\uD7FF\\uE000-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uD83E\\uD840-\\uD87E\\uD880-\\uD8BE\\uD8C0-\\uD8FE\\uD900-\\uD93E\\uD940-\\uD97E\\uD980-\\uD9BE\\uD9C0-\\uD9FE\\uDA00-\\uDA3E\\uDA40-\\uDA7E\\uDA80-\\uDABE\\uDAC0-\\uDAFE\\uDB00-\\uDB3E\\uDB40-\\uDB7E\\uDB80-\\uDBBE\\uDBC0-\\uDBFE][\\uDC00-\\uDFFF]|[\\uD83F\\uD87F\\uD8BF\\uD8FF\\uD93F\\uD97F\\uD9BF\\uD9FF\\uDA3F\\uDA7F\\uDABF\\uDAFF\\uDB3F\\uDB7F\\uDBBF\\uDBFF][\\uDC00-\\uDFFD]/,y=/[\\0\\t\\f\\r #%/:?@\\[\\\\\\]]/;function v(e){void 0!==o&&o.call(null,\"Validation Error: \"+e)}function _(){return{scheme:\"\",username:\"\",password:\"\",host:null,port:null,path:[],query:null,fragment:null,_cannotBeABaseURLFlag:!1,_blobURLEntry:null}}function g(e){return e in c}function b(e){return g(e.scheme)}function x(e){return c[e]||null}function w(e){return\"\"!==e.username||\"\"!==e.password}function E(e,t){var r,i;void 0===t&&(t=!1);var o=e.scheme+\":\";if(null!==e.host?(o+=\"//\",w(e)&&(o+=e.username,\"\"!==e.password&&(o+=\":\"+e.password),o+=\"@\"),o+=D(e.host),null!==e.port&&(o+=\":\"+e.port)):null===e.host&&\"file\"===e.scheme&&(o+=\"//\"),e._cannotBeABaseURLFlag)o+=e.path[0];else try{for(var a=n(e.path),s=a.next();!s.done;s=a.next()){o+=\"/\"+s.value}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return null!==e.query&&(o+=\"?\"+e.query),t||null===e.fragment||(o+=\"#\"+e.fragment),o}function D(e){return a.isNumber(e)?S(e):a.isArray(e)?\"[\"+C(e)+\"]\":e}function S(e){for(var t=\"\",r=e,n=1;n<=4;n++)t=(r%256).toString()+t,4!==n&&(t=\".\"+t),r=Math.floor(r/256);return t}function C(e){for(var t=\"\",r=null,n=-1,i=0,o=0,a=0;a<8;a++)if(0===e[a]){i=1;for(var s=a+1;s<8&&0===e[s];s++)i++;i>o&&(o=i,n=a)}o>1&&(r=n);for(var u=!1,l=0;l<8;l++)u&&0===e[l]||(u&&(u=!1),r!==l?(t+=e[l].toString(16),7!==l&&(t+=\":\")):(t+=0===l?\"::\":\":\",u=!0));return t}function A(e,t,r,i,o){var l,c,y,_;if(void 0===i){i={scheme:\"\",username:\"\",password:\"\",host:null,port:null,path:[],query:null,fragment:null,_cannotBeABaseURLFlag:!1,_blobURLEntry:null};var E=/^[\\u0000-\\u001F\\u0020]+/,D=/[\\u0000-\\u001F\\u0020]+$/;(E.test(e)||D.test(e))&&v(\"Input string contains leading or trailing control characters or space.\"),e=(e=e.replace(E,\"\")).replace(D,\"\")}var S=/[\\u0009\\u000A\\u000D]/g;S.test(e)&&v(\"Input string contains tab or newline characters.\"),e=e.replace(S,\"\");var C=void 0===o?s.ParserState.SchemeStart:o;void 0===t&&(t=null);for(var A=void 0===r||\"replacement\"===r||\"UTF-16BE\"===r||\"UTF-16LE\"===r?\"UTF-8\":r,L=\"\",M=!1,B=!1,j=!1,R=new a.StringWalker(e);;){switch(C){case s.ParserState.SchemeStart:if(u.codePoint.ASCIIAlpha.test(R.c()))L+=R.c().toLowerCase(),C=s.ParserState.Scheme;else{if(void 0!==o)return v(\"Invalid scheme start character.\"),null;C=s.ParserState.NoScheme,R.pointer--}break;case s.ParserState.Scheme:if(u.codePoint.ASCIIAlphanumeric.test(R.c())||\"+\"===R.c()||\"-\"===R.c()||\".\"===R.c())L+=R.c().toLowerCase();else{if(\":\"!==R.c()){if(void 0===o){L=\"\",C=s.ParserState.NoScheme,R.pointer=0;continue}return v(\"Invalid input string.\"),null}if(void 0!==o){if(g(i.scheme)&&!g(L))return i;if(!g(i.scheme)&&g(L))return i;if((w(i)||null!==i.port)&&\"file\"===L)return i;if(\"file\"===i.scheme&&(\"\"===i.host||null===i.host))return i}if(i.scheme=L,void 0!==o)return i.port===x(i.scheme)&&(i.port=null),i;L=\"\",\"file\"===i.scheme?(R.remaining().startsWith(\"//\")||v(\"Invalid file URL scheme, '//' expected.\"),C=s.ParserState.File):b(i)&&null!==t&&t.scheme===i.scheme?C=s.ParserState.SpecialRelativeOrAuthority:b(i)?C=s.ParserState.SpecialAuthoritySlashes:R.remaining().startsWith(\"/\")?(C=s.ParserState.PathOrAuthority,R.pointer++):(i._cannotBeABaseURLFlag=!0,i.path.push(\"\"),C=s.ParserState.CannotBeABaseURLPath)}break;case s.ParserState.NoScheme:if(null===t||t._cannotBeABaseURLFlag&&\"#\"!==R.c())return v(\"Invalid input string.\"),null;t._cannotBeABaseURLFlag&&\"#\"===R.c()?(i.scheme=t.scheme,i.path=u.list.clone(t.path),i.query=t.query,i.fragment=\"\",i._cannotBeABaseURLFlag=!0,C=s.ParserState.Fragment):\"file\"!==t.scheme?(C=s.ParserState.Relative,R.pointer--):(C=s.ParserState.File,R.pointer--);break;case s.ParserState.SpecialRelativeOrAuthority:\"/\"===R.c()&&R.remaining().startsWith(\"/\")?(C=s.ParserState.SpecialAuthorityIgnoreSlashes,R.pointer++):(v(\"Invalid input string.\"),C=s.ParserState.Relative,R.pointer--);break;case s.ParserState.PathOrAuthority:\"/\"===R.c()?C=s.ParserState.Authority:(C=s.ParserState.Path,R.pointer--);break;case s.ParserState.Relative:if(null===t)throw new Error(\"Invalid parser state. Base URL is null.\");switch(i.scheme=t.scheme,R.c()){case\"\":i.username=t.username,i.password=t.password,i.host=t.host,i.port=t.port,i.path=u.list.clone(t.path),i.query=t.query;break;case\"/\":C=s.ParserState.RelativeSlash;break;case\"?\":i.username=t.username,i.password=t.password,i.host=t.host,i.port=t.port,i.path=u.list.clone(t.path),i.query=\"\",C=s.ParserState.Query;break;case\"#\":i.username=t.username,i.password=t.password,i.host=t.host,i.port=t.port,i.path=u.list.clone(t.path),i.query=t.query,i.fragment=\"\",C=s.ParserState.Fragment;break;default:b(i)&&\"\\\\\"===R.c()?(v(\"Invalid input string.\"),C=s.ParserState.RelativeSlash):(i.username=t.username,i.password=t.password,i.host=t.host,i.port=t.port,i.path=u.list.clone(t.path),0!==i.path.length&&i.path.splice(i.path.length-1,1),C=s.ParserState.Path,R.pointer--)}break;case s.ParserState.RelativeSlash:if(!b(i)||\"/\"!==R.c()&&\"\\\\\"!==R.c())if(\"/\"===R.c())C=s.ParserState.Authority;else{if(null===t)throw new Error(\"Invalid parser state. Base URL is null.\");i.username=t.username,i.password=t.password,i.host=t.host,i.port=t.port,C=s.ParserState.Path,R.pointer--}else\"\\\\\"===R.c()&&v(\"Invalid input string.\"),C=s.ParserState.SpecialAuthorityIgnoreSlashes;break;case s.ParserState.SpecialAuthoritySlashes:\"/\"===R.c()&&R.remaining().startsWith(\"/\")?(C=s.ParserState.SpecialAuthorityIgnoreSlashes,R.pointer++):(v(\"Expected '//'.\"),C=s.ParserState.SpecialAuthorityIgnoreSlashes,R.pointer--);break;case s.ParserState.SpecialAuthorityIgnoreSlashes:\"/\"!==R.c()&&\"\\\\\"!==R.c()?(C=s.ParserState.Authority,R.pointer--):v(\"Unexpected '/' or '\\\\'.\");break;case s.ParserState.Authority:if(\"@\"===R.c()){v(\"Unexpected '@'.\"),M&&(L=\"%40\"+L),M=!0;try{for(var U=(l=void 0,n(L)),G=U.next();!G.done;G=U.next()){var q=G.value;if(\":\"!==q||j){var W=X(q,d);j?i.password+=W:i.username+=W}else j=!0}}catch(e){l={error:e}}finally{try{G&&!G.done&&(c=U.return)&&c.call(U)}finally{if(l)throw l.error}}L=\"\"}else if(\"\"===R.c()||\"/\"===R.c()||\"?\"===R.c()||\"#\"===R.c()||b(i)&&\"\\\\\"===R.c()){if(M&&\"\"===L)return v(\"Invalid input string.\"),null;R.pointer-=L.length+1,L=\"\",C=s.ParserState.Host}else L+=R.c();break;case s.ParserState.Host:case s.ParserState.Hostname:if(void 0!==o&&\"file\"===i.scheme)R.pointer--,C=s.ParserState.FileHost;else if(\":\"!==R.c()||B)if(\"\"===R.c()||\"/\"===R.c()||\"?\"===R.c()||\"#\"===R.c()||b(i)&&\"\\\\\"===R.c()){if(R.pointer--,b(i)&&\"\"===L)return v(\"Invalid input string.\"),null;if(void 0!==o&&\"\"===L&&(w(i)||null!==i.port))return v(\"Invalid input string.\"),i;if(null===(J=I(L,!b(i))))return null;if(i.host=J,L=\"\",C=s.ParserState.PathStart,void 0!==o)return i}else\"[\"===R.c()&&(B=!0),\"]\"===R.c()&&(B=!1),L+=R.c();else{if(\"\"===L)return v(\"Invalid input string.\"),null;if(null===(J=I(L,!b(i))))return null;if(i.host=J,L=\"\",C=s.ParserState.Port,o===s.ParserState.Hostname)return i}break;case s.ParserState.Port:if(u.codePoint.ASCIIDigit.test(R.c()))L+=R.c();else{if(!(\"\"===R.c()||\"/\"===R.c()||\"?\"===R.c()||\"#\"===R.c()||b(i)&&\"\\\\\"===R.c()||o))return v(\"Invalid input string.\"),null;if(\"\"!==L&&\"\"!==L){var H=parseInt(L,10);if(H>Math.pow(2,16)-1)return v(\"Invalid port number.\"),null;i.port=H===x(i.scheme)?null:H,L=\"\"}if(void 0!==o)return i;C=s.ParserState.PathStart,R.pointer--}break;case s.ParserState.File:if(i.scheme=\"file\",\"/\"===R.c()||\"\\\\\"===R.c())\"\\\\\"===R.c()&&v(\"Invalid input string.\"),C=s.ParserState.FileSlash;else if(null!==t&&\"file\"===t.scheme)switch(R.c()){case\"\":i.host=t.host,i.path=u.list.clone(t.path),i.query=t.query;break;case\"?\":i.host=t.host,i.path=u.list.clone(t.path),i.query=\"\",C=s.ParserState.Query;break;case\"#\":i.host=t.host,i.path=u.list.clone(t.path),i.query=t.query,i.fragment=\"\",C=s.ParserState.Fragment;break;default:P(R.substring())?v(\"Unexpected windows drive letter in input string.\"):(i.host=t.host,i.path=u.list.clone(t.path),O(i)),C=s.ParserState.Path,R.pointer--}else C=s.ParserState.Path,R.pointer--;break;case s.ParserState.FileSlash:\"/\"===R.c()||\"\\\\\"===R.c()?(\"\\\\\"===R.c()&&v(\"Invalid input string.\"),C=s.ParserState.FileHost):(null===t||\"file\"!==t.scheme||P(R.substring())||(F(t.path[0])?i.path.push(t.path[0]):i.host=t.host),C=s.ParserState.Path,R.pointer--);break;case s.ParserState.FileHost:if(\"\"===R.c()||\"/\"===R.c()||\"\\\\\"===R.c()||\"?\"===R.c()||\"#\"===R.c())if(R.pointer--,void 0===o&&k(L))v(\"Unexpected windows drive letter in input string.\"),C=s.ParserState.Path;else if(\"\"===L){if(i.host=\"\",void 0!==o)return i;C=s.ParserState.PathStart}else{var J;if(null===(J=I(L,!b(i))))return null;if(\"localhost\"===J&&(J=\"\"),i.host=J,void 0!==o)return i;L=\"\",C=s.ParserState.PathStart}else L+=R.c();break;case s.ParserState.PathStart:b(i)?(\"\\\\\"===R.c()&&v(\"Invalid input string.\"),C=s.ParserState.Path,\"/\"!==R.c()&&\"\\\\\"!==R.c()&&R.pointer--):void 0===o&&\"?\"===R.c()?(i.query=\"\",C=s.ParserState.Query):void 0===o&&\"#\"===R.c()?(i.fragment=\"\",C=s.ParserState.Fragment):\"\"!==R.c()&&(C=s.ParserState.Path,\"/\"!==R.c()&&R.pointer--);break;case s.ParserState.Path:if(\"\"===R.c()||\"/\"===R.c()||b(i)&&\"\\\\\"===R.c()||void 0===o&&(\"?\"===R.c()||\"#\"===R.c())){if(b(i)&&\"\\\\\"===R.c()&&v(\"Invalid input string.\"),T(L))O(i),\"/\"===R.c()||b(i)&&\"\\\\\"===R.c()||i.path.push(\"\");else if(!N(L)||\"/\"===R.c()||b(i)&&\"\\\\\"===R.c()){if(!N(L)){if(\"file\"===i.scheme&&0===i.path.length&&k(L)){null!==i.host&&\"\"!==i.host&&(v(\"Invalid input string.\"),i.host=\"\");var Y=Array.from(L);L=Y.slice(0,1)+\":\"+Y.slice(2)}i.path.push(L)}}else i.path.push(\"\");if(L=\"\",\"file\"===i.scheme&&(\"\"===R.c()||\"?\"===R.c()||\"#\"===R.c()))for(;i.path.length>1&&\"\"===i.path[0];)v(\"Invalid input string.\"),i.path.splice(0,1);\"?\"===R.c()&&(i.query=\"\",C=s.ParserState.Query),\"#\"===R.c()&&(i.fragment=\"\",C=s.ParserState.Fragment)}else m.test(R.c())||\"%\"===R.c()||v(\"Character is not a URL code point or a percent encoded character.\"),\"%\"!==R.c()||/^[0-9a-fA-F][0-9a-fA-F]/.test(R.remaining())||v(\"Percent encoded character must be followed by two hex digits.\"),L+=X(R.c(),f);break;case s.ParserState.CannotBeABaseURLPath:\"?\"===R.c()?(i.query=\"\",C=s.ParserState.Query):\"#\"===R.c()?(i.fragment=\"\",C=s.ParserState.Fragment):(\"\"===R.c()||m.test(R.c())||\"%\"===R.c()||v(\"Character is not a URL code point or a percent encoded character.\"),\"%\"!==R.c()||/^[0-9a-fA-F][0-9a-fA-F]/.test(R.remaining())||v(\"Percent encoded character must be followed by two hex digits.\"),\"\"!==R.c()&&(i.path[0]+=X(R.c(),h)));break;case s.ParserState.Query:if(\"UTF-8\"===A||b(i)&&\"ws\"!==i.scheme&&\"wss\"!==i.scheme||(A=\"UTF-8\"),void 0===o&&\"#\"===R.c())i.fragment=\"\",C=s.ParserState.Fragment;else if(\"\"!==R.c()){if(m.test(R.c())||\"%\"===R.c()||v(\"Character is not a URL code point or a percent encoded character.\"),\"%\"!==R.c()||/^[0-9a-fA-F][0-9a-fA-F]/.test(R.remaining())||v(\"Percent encoded character must be followed by two hex digits.\"),\"UTF-8\"!==A.toUpperCase())throw new Error(\"Only UTF-8 encoding is supported.\");var V=a.utf8Encode(R.c());if(V.length>=3&&38===V[0]&&35===V[1]&&59===V[V.length-1])V=V.subarray(2,V.length-1),i.query+=\"%26%23\"+u.byteSequence.isomorphicDecode(V)+\"%3B\";else try{for(var K=(y=void 0,n(V)),$=K.next();!$.done;$=K.next()){var Q=$.value;Q<33||Q>126||34===Q||35===Q||60===Q||62===Q||39===Q&&b(i)?i.query+=z(Q):i.query+=String.fromCharCode(Q)}}catch(e){y={error:e}}finally{try{$&&!$.done&&(_=K.return)&&_.call(K)}finally{if(y)throw y.error}}}break;case s.ParserState.Fragment:\"\"===R.c()||(\"\\0\"===R.c()?v(\"NULL character in input string.\"):(m.test(R.c())||\"%\"===R.c()||v(\"Unexpected character in fragment string.\"),\"%\"!==R.c()||/^[A-Za-z0-9][A-Za-z0-9]/.test(R.remaining())||v(\"Unexpected character in fragment string.\"),i.fragment+=X(R.c(),p)))}if(R.eof)break;R.pointer++}return i}function N(e){return\".\"===e||\"%2e\"===e.toLowerCase()}function T(e){var t=e.toLowerCase();return\"..\"===t||\".%2e\"===t||\"%2e.\"===t||\"%2e%2e\"===t}function O(e){var t=e.path;0!==t.length&&(\"file\"===e.scheme&&1===t.length&&F(t[0])||e.path.splice(e.path.length-1,1))}function F(e){return e.length>=2&&u.codePoint.ASCIIAlpha.test(e[0])&&\":\"===e[1]}function k(e){return e.length>=2&&u.codePoint.ASCIIAlpha.test(e[0])&&(\":\"===e[1]||\"|\"===e[1])}function P(e){return e.length>=2&&k(e)&&(2===e.length||\"/\"===e[2]||\"\\\\\"===e[2]||\"?\"===e[2]||\"#\"===e[2])}function I(e,t){if(void 0===t&&(t=!1),e.startsWith(\"[\"))return e.endsWith(\"]\")?B(e.substring(1,e.length-1)):(v(\"Expected ']' after '['.\"),null);if(t)return j(e);var r=H(a.utf8Decode(G(e)));if(null===r)return v(\"Invalid domain.\"),null;if(y.test(r))return v(\"Invalid domain.\"),null;var n=M(r);return null===n||a.isNumber(n)?n:r}function L(e,t){void 0===t&&(t={value:!1});var r=10;return e.startsWith(\"0x\")||e.startsWith(\"0X\")?(t.value=!0,e=e.substr(2),r=16):e.length>=2&&\"0\"===e[0]&&(t.value=!0,e=e.substr(1),r=8),\"\"===e?0:(10===r?/^[0-9]+$/:16===r?/^[0-9A-Fa-f]+$/:/^[0-7]+$/).test(e)?parseInt(e,r):null}function M(e){var t,r,i,o,a={value:!1},s=e.split(\".\");if(\"\"===s[s.length-1]&&(a.value=!0,s.length>1&&s.pop()),s.length>4)return e;var u=[];try{for(var l=n(s),c=l.next();!c.done;c=l.next()){var h=c.value;if(\"\"===h)return e;if(null===(_=L(h,a)))return e;u.push(_)}}catch(e){t={error:e}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}a.value&&v(\"Invalid IP v4 address.\");for(var p=0;p<u.length;p++){if(u[p]>255&&(v(\"Invalid IP v4 address.\"),p<u.length-1))return null}if(u[u.length-1]>=Math.pow(256,5-u.length))return v(\"Invalid IP v4 address.\"),null;var f=u[u.length-1];u.pop();var d=0;try{for(var m=n(u),y=m.next();!y.done;y=m.next()){var _;f+=(_=y.value)*Math.pow(256,3-d),d++}}catch(e){i={error:e}}finally{try{y&&!y.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}return f}function B(e){var t,r=[0,0,0,0,0,0,0,0],n=0,o=null,s=new a.StringWalker(e);if(\":\"===s.c()){if(!s.remaining().startsWith(\":\"))return v(\"Invalid IP v6 address.\"),null;s.pointer+=2,o=n+=1}for(;\"\"!==s.c();){if(8===n)return v(\"Invalid IP v6 address.\"),null;if(\":\"!==s.c()){for(var l=0,c=0;c<4&&u.codePoint.ASCIIHexDigit.test(s.c());)l=16*l+parseInt(s.c(),16),s.pointer++,c++;if(\".\"===s.c()){if(0===c)return v(\"Invalid IP v6 address.\"),null;if(s.pointer-=c,n>6)return v(\"Invalid IP v6 address.\"),null;for(var h=0;\"\"!==s.c();){var p=null;if(h>0){if(!(\".\"===s.c()&&h<4))return v(\"Invalid IP v6 address.\"),null;s.pointer++}if(!u.codePoint.ASCIIDigit.test(s.c()))return v(\"Invalid IP v6 address.\"),null;for(;u.codePoint.ASCIIDigit.test(s.c());){var f=parseInt(s.c(),10);if(null===p)p=f;else{if(0===p)return v(\"Invalid IP v6 address.\"),null;p=10*p+f}if(p>255)return v(\"Invalid IP v6 address.\"),null;s.pointer++}if(null===p)return v(\"Invalid IP v6 address.\"),null;r[n]=256*r[n]+p,2!==++h&&4!==h||n++}if(4!==h)return v(\"Invalid IP v6 address.\"),null;break}if(\":\"===s.c()){if(s.pointer++,\"\"===s.c())return v(\"Invalid IP v6 address.\"),null}else if(\"\"!==s.c())return v(\"Invalid IP v6 address.\"),null;r[n]=l,n++}else{if(null!==o)return v(\"Invalid IP v6 address.\"),null;s.pointer++,o=++n}}if(null!==o){var d=n-o;for(n=7;0!==n&&d>0;)t=i([r[o+d-1],r[n]],2),r[n]=t[0],r[o+d-1]=t[1],n--,d--}else if(null===o&&8!==n)return v(\"Invalid IP v6 address.\"),null;return r}function j(e){var t,r;if(/[\\x00\\t\\f\\r #/:?@\\[\\\\\\]]/.test(e))return v(\"Invalid host string.\"),null;var i=\"\";try{for(var o=n(e),a=o.next();!a.done;a=o.next()){i+=X(a.value,h)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i}function R(e){return null}function z(e){return\"%\"+(\"00\"+e.toString(16).toUpperCase()).slice(-2)}function U(e){for(var t=function(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102},r=new Uint8Array(e.length),n=0,i=0;i<e.length;i++){var o=e[i];if(37!==o)r[n]=o,n++;else if(37===o&&i>=e.length-2)r[n]=o,n++;else if(37!==o||t(e[i+1])&&t(e[i+2])){var s=parseInt(a.utf8Decode(Uint8Array.of(e[i+1],e[i+2])),16);r[n]=s,n++,i+=2}else r[n]=o,n++}return r.subarray(0,n)}function G(e){return U(a.utf8Encode(e))}function X(e,t){var r,i;if(!t.test(e))return e;var o=a.utf8Encode(e),s=\"\";try{for(var u=n(o),l=u.next();!l.done;l=u.next()){s+=z(l.value)}}catch(e){r={error:e}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return s}function q(e){var t,r,i,o,s=[],u=[];try{for(var l=n(e),c=l.next();!c.done;c=l.next()){var h=c.value;38===h?(s.push(Uint8Array.from(u)),u=[]):u.push(h)}}catch(e){t={error:e}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}0!==u.length&&s.push(Uint8Array.from(u));var p=[];try{for(var f=n(s),d=f.next();!d.done;d=f.next()){var m=d.value;if(0!==m.length){for(var y=m.indexOf(61),v=-1!==y?m.slice(0,y):m,_=-1!==y?m.slice(y+1):new Uint8Array,g=0;g<v.length;g++)43===v[g]&&(v[g]=32);for(g=0;g<_.length;g++)43===_[g]&&(_[g]=32);var b=a.utf8Decode(v),x=a.utf8Decode(_);p.push([b,x])}}}catch(e){i={error:e}}finally{try{d&&!d.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}return p}function W(e){var t,r,i=\"\";try{for(var o=n(e),a=o.next();!a.done;a=o.next()){var s=a.value;i+=32===s?\"+\":42===s||45===s||46===s||s>=48&&s<=57||s>=65&&s<=90||95===s||s>=97&&s<=122?String.fromCodePoint(s):z(s)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i}function H(e,t){void 0===t&&(t=!1);var r=l.domainToASCII(e);return\"\"===r?(v(\"Invalid domain name.\"),null):r}t.setValidationErrorCallback=function(e){o=e},t.newURL=_,t.isSpecialScheme=g,t.isSpecial=b,t.defaultPort=x,t.includesCredentials=w,t.cannotHaveAUsernamePasswordPort=function(e){return null===e.host||\"\"===e.host||e._cannotBeABaseURLFlag||\"file\"===e.scheme},t.urlSerializer=E,t.hostSerializer=D,t.iPv4Serializer=S,t.iPv6Serializer=C,t.urlParser=function(e,t,r){var n=A(e,t,r);return null===n?null:(\"blob\"!==n.scheme||(n._blobURLEntry=null),n)},t.basicURLParser=A,t.setTheUsername=function(e,t){var r,i,o=\"\";try{for(var a=n(t),s=a.next();!s.done;s=a.next()){o+=X(s.value,d)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}e.username=o},t.setThePassword=function(e,t){var r,i,o=\"\";try{for(var a=n(t),s=a.next();!s.done;s=a.next()){o+=X(s.value,d)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}e.password=o},t.isSingleDotPathSegment=N,t.isDoubleDotPathSegment=T,t.shorten=O,t.isNormalizedWindowsDriveLetter=F,t.isWindowsDriveLetter=k,t.startsWithAWindowsDriveLetter=P,t.hostParser=I,t.iPv4NumberParser=L,t.iPv4Parser=M,t.iPv6Parser=B,t.opaqueHostParser=j,t.resolveABlobURL=R,t.percentEncode=z,t.percentDecode=U,t.stringPercentDecode=G,t.utf8PercentEncode=X,t.hostEquals=function(e,t){return e===t},t.urlEquals=function(e,t,r){return void 0===r&&(r=!1),E(e,r)===E(t,r)},t.urlEncodedStringParser=function(e){return q(a.utf8Encode(e))},t.urlEncodedParser=q,t.urlEncodedByteSerializer=W,t.urlEncodedSerializer=function(e,t){var r,i;if(\"UTF-8\"!==(void 0===t||\"replacement\"===t||\"UTF-16BE\"===t||\"UTF-16LE\"===t?\"UTF-8\":t).toUpperCase())throw new Error(\"Only UTF-8 encoding is supported.\");var o=\"\";try{for(var s=n(e),u=s.next();!u.done;u=s.next()){var l=u.value,c=W(a.utf8Encode(l[0])),h=l[1];h=W(a.utf8Encode(h)),\"\"!==o&&(o+=\"&\"),o+=c+\"=\"+h}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return o},t.origin=function e(t){switch(t.scheme){case\"blob\":t._blobURLEntry;var r=A(t.path[0]);return null===r?s.OpaqueOrigin:e(r);case\"ftp\":case\"http\":case\"https\":case\"ws\":case\"wss\":return[t.scheme,null===t.host?\"\":t.host,t.port,null];case\"file\":default:return s.OpaqueOrigin}},t.domainToASCII=H,t.domainToUnicode=function(e,t){void 0===t&&(t=!1);var r=l.domainToUnicode(e);return\"\"===r&&v(\"Invalid domain name.\"),r},t.asciiSerializationOfAnOrigin=function(e){if(\"\"===e[0]&&\"\"===e[1]&&null===e[2]&&null===e[3])return\"null\";var t=e[0]+\"://\"+D(e[1]);return null!==e[2]&&(t+=\":\"+e[2].toString()),t}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(0),i=function(){function e(){this._signal=n.create_abortSignal()}return Object.defineProperty(e.prototype,\"signal\",{get:function(){return this._signal},enumerable:!0,configurable:!0}),e.prototype.abort=function(){n.abort_signalAbort(this._signal)},e}();t.AbortControllerImpl=i},function(e,t,r){\"use strict\";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(70),a=r(0),s=function(e){function t(){var t=e.call(this)||this;return t._abortedFlag=!1,t._abortAlgorithms=new Set,t}return i(t,e),Object.defineProperty(t.prototype,\"aborted\",{get:function(){return this._abortedFlag},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"onabort\",{get:function(){return a.event_getterEventHandlerIDLAttribute(this,\"onabort\")},set:function(e){a.event_setterEventHandlerIDLAttribute(this,\"onabort\",e)},enumerable:!0,configurable:!0}),t._create=function(){return new t},t}(o.EventTargetImpl);t.AbortSignalImpl=s},function(e,t,r){\"use strict\";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(2),a=r(34),s=r(12),u=function(e){function t(t,r,n){var i=e.call(this)||this;return i._name=\"\",i._publicId=\"\",i._systemId=\"\",i._name=t,i._publicId=r,i._systemId=n,i}return i(t,e),Object.defineProperty(t.prototype,\"name\",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"publicId\",{get:function(){return this._publicId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"systemId\",{get:function(){return this._systemId},enumerable:!0,configurable:!0}),t.prototype.before=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw new Error(\"Mixin: ChildNode not implemented.\")},t.prototype.after=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw new Error(\"Mixin: ChildNode not implemented.\")},t.prototype.replaceWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw new Error(\"Mixin: ChildNode not implemented.\")},t.prototype.remove=function(){throw new Error(\"Mixin: ChildNode not implemented.\")},t._create=function(e,r,n,i){void 0===n&&(n=\"\"),void 0===i&&(i=\"\");var o=new t(r,n,i);return o._nodeDocument=e,o},t}(a.NodeImpl);t.DocumentTypeImpl=u,s.idl_defineConst(u.prototype,\"_nodeType\",o.NodeType.DocumentType)},function(e,t,r){\"use strict\";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(100),a=r(1),s=r(0),u=function(e){function t(t,r){var n=e.call(this)||this;return n._host=t,n._mode=r,n}return i(t,e),Object.defineProperty(t.prototype,\"mode\",{get:function(){return this._mode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"host\",{get:function(){return this._host},enumerable:!0,configurable:!0}),t.prototype._getTheParent=function(e){return e._composedFlag||a.isEmpty(e._path)||s.tree_rootNode(e._path[0].invocationTarget)!==this?this._host:null},t._create=function(e,r){return new t(r,\"closed\")},t}(o.DocumentFragmentImpl);t.ShadowRootImpl=u},function(e,t,r){\"use strict\";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(2),a=r(34),s=r(0),u=r(12),l=function(e){function t(t){var r=e.call(this)||this;return r._namespace=null,r._namespacePrefix=null,r._element=null,r._value=\"\",r._localName=t,r}return i(t,e),Object.defineProperty(t.prototype,\"ownerElement\",{get:function(){return this._element},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"namespaceURI\",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"prefix\",{get:function(){return this._namespacePrefix},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"localName\",{get:function(){return this._localName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"name\",{get:function(){return this._qualifiedName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"value\",{get:function(){return this._value},set:function(e){s.attr_setAnExistingAttributeValue(this,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"_qualifiedName\",{get:function(){return null!==this._namespacePrefix?this._namespacePrefix+\":\"+this._localName:this._localName},enumerable:!0,configurable:!0}),t._create=function(e,r){var n=new t(r);return n._nodeDocument=e,n},t}(a.NodeImpl);t.AttrImpl=l,u.idl_defineConst(l.prototype,\"_nodeType\",o.NodeType.Attribute),u.idl_defineConst(l.prototype,\"specified\",!0)},function(e,t,r){\"use strict\";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(101),a=r(2),s=r(12),u=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t._create=function(e,r){void 0===r&&(r=\"\");var n=new t(r);return n._nodeDocument=e,n},t}(o.TextImpl);t.CDATASectionImpl=u,s.idl_defineConst(u.prototype,\"_nodeType\",a.NodeType.CData)},function(e,t,r){\"use strict\";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(2),a=r(71),s=r(12),u=function(e){function t(t){return void 0===t&&(t=\"\"),e.call(this,t)||this}return i(t,e),t._create=function(e,r){void 0===r&&(r=\"\");var n=new t(r);return n._nodeDocument=e,n},t}(a.CharacterDataImpl);t.CommentImpl=u,s.idl_defineConst(u.prototype,\"_nodeType\",o.NodeType.Comment)},function(e,t,r){\"use strict\";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(2),a=r(71),s=r(12),u=function(e){function t(t,r){var n=e.call(this,r)||this;return n._target=t,n}return i(t,e),Object.defineProperty(t.prototype,\"target\",{get:function(){return this._target},enumerable:!0,configurable:!0}),t._create=function(e,r,n){var i=new t(r,n);return i._nodeDocument=e,i},t}(a.CharacterDataImpl);t.ProcessingInstructionImpl=u,s.idl_defineConst(u.prototype,\"_nodeType\",o.NodeType.ProcessingInstruction)},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(7),i=r(0),o=r(3),a=r(1),s=function(){function e(e,t){return this._live=!0,this._root=e,this._filter=t,new Proxy(this,this)}return Object.defineProperty(e.prototype,\"length\",{get:function(){for(var e=this,t=0,r=i.tree_getFirstDescendantNode(this._root,!1,!1,(function(t){return o.Guard.isElementNode(t)&&e._filter(t)}));null!==r;)t++,r=i.tree_getNextDescendantNode(this._root,r,!1,!1,(function(t){return o.Guard.isElementNode(t)&&e._filter(t)}));return t},enumerable:!0,configurable:!0}),e.prototype.item=function(e){for(var t=this,r=0,n=i.tree_getFirstDescendantNode(this._root,!1,!1,(function(e){return o.Guard.isElementNode(e)&&t._filter(e)}));null!==n;){if(r===e)return n;r++,n=i.tree_getNextDescendantNode(this._root,n,!1,!1,(function(e){return o.Guard.isElementNode(e)&&t._filter(e)}))}return null},e.prototype.namedItem=function(e){var t=this;if(\"\"===e)return null;for(var r=i.tree_getFirstDescendantNode(this._root,!1,!1,(function(e){return o.Guard.isElementNode(e)&&t._filter(e)}));null!=r;){if(r._uniqueIdentifier===e)return r;if(r._namespace===n.namespace.HTML)for(var a=0;a<r._attributeList.length;a++){var s=r._attributeList[a];if(\"name\"===s._localName&&null===s._namespace&&null===s._namespacePrefix&&s._value===e)return r}r=i.tree_getNextDescendantNode(this._root,r,!1,!1,(function(e){return o.Guard.isElementNode(e)&&t._filter(e)}))}return null},e.prototype[Symbol.iterator]=function(){var e=this._root,t=this._filter,r=i.tree_getFirstDescendantNode(e,!1,!1,(function(e){return o.Guard.isElementNode(e)&&t(e)}));return{next:function(){if(null===r)return{done:!0,value:null};var n={done:!1,value:r};return r=i.tree_getNextDescendantNode(e,r,!1,!1,(function(e){return o.Guard.isElementNode(e)&&t(e)})),n}}},e.prototype.get=function(t,r,n){if(!a.isString(r)||-1!==e.reservedNames.indexOf(r))return Reflect.get(t,r,n);var i=Number(r);return isNaN(i)?t.namedItem(r)||void 0:t.item(i)||void 0},e.prototype.set=function(t,r,n,o){if(!a.isString(r)||-1!==e.reservedNames.indexOf(r))return Reflect.set(t,r,n,o);var s=Number(r),u=isNaN(s)?t.namedItem(r)||void 0:t.item(s)||void 0;return!(!u||!u._parent)&&(i.mutation_replace(u,n,u._parent),!0)},e._create=function(t,r){return void 0===r&&(r=function(){return!0}),new e(t,r)},e.reservedNames=[\"_root\",\"_live\",\"_filter\",\"length\",\"item\",\"namedItem\",\"get\",\"set\"],e}();t.HTMLCollectionImpl=s},function(e,t,r){\"use strict\";var n=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")};Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(6),o=r(1),a=r(0),s=function(){function e(e){return this._live=!0,this._filter=null,this._length=0,this._root=e,new Proxy(this,this)}return Object.defineProperty(e.prototype,\"length\",{get:function(){return this._root._children.size},enumerable:!0,configurable:!0}),e.prototype.item=function(e){if(e<0||e>this.length-1)return null;if(e<this.length/2){for(var t=0,r=this._root._firstChild;null!==r&&t!==e;)r=r._nextSibling,t++;return r}for(t=this.length-1,r=this._root._lastChild;null!==r&&t!==e;)r=r._previousSibling,t--;return r},e.prototype.keys=function(){var e;return(e={})[Symbol.iterator]=function(){var e=0;return{next:function(){return e===this.length?{done:!0,value:null}:{done:!1,value:e++}}.bind(this)}}.bind(this),e},e.prototype.values=function(){var e;return(e={})[Symbol.iterator]=function(){var e=this[Symbol.iterator]();return{next:function(){return e.next()}}}.bind(this),e},e.prototype.entries=function(){var e;return(e={})[Symbol.iterator]=function(){var e=this[Symbol.iterator](),t=0;return{next:function(){var r=e.next();return r.done?{done:!0,value:null}:{done:!1,value:[t++,r.value]}}}}.bind(this),e},e.prototype[Symbol.iterator]=function(){return this._root._children[Symbol.iterator]()},e.prototype.forEach=function(e,t){var r,o;void 0===t&&(t=i.dom.window);var a=0;try{for(var s=n(this._root._children),u=s.next();!u.done;u=s.next()){var l=u.value;e.call(t,l,a++,this)}}catch(e){r={error:e}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}},e.prototype.get=function(e,t,r){if(!o.isString(t))return Reflect.get(e,t,r);var n=Number(t);return isNaN(n)?Reflect.get(e,t,r):e.item(n)||void 0},e.prototype.set=function(e,t,r,n){if(!o.isString(t))return Reflect.set(e,t,r,n);var i=Number(t);if(isNaN(i))return Reflect.set(e,t,r,n);var s=e.item(i)||void 0;return!!s&&(!!s._parent&&(a.mutation_replace(s,r,s._parent),!0))},e._create=function(t){return new e(t)},e}();t.NodeListImpl=s},function(e,t,r){\"use strict\";var n=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")};Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(6),o=r(1),a=function(){function e(e){return this._live=!1,this._items=[],this._length=0,this._root=e,this._items=[],this._filter=function(e){return!0},new Proxy(this,this)}return Object.defineProperty(e.prototype,\"length\",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),e.prototype.item=function(e){return e<0||e>this.length-1?null:this._items[e]},e.prototype.keys=function(){var e;return(e={})[Symbol.iterator]=function(){var e=0;return{next:function(){return e===this.length?{done:!0,value:null}:{done:!1,value:e++}}.bind(this)}}.bind(this),e},e.prototype.values=function(){var e;return(e={})[Symbol.iterator]=function(){var e=this[Symbol.iterator]();return{next:function(){return e.next()}}}.bind(this),e},e.prototype.entries=function(){var e;return(e={})[Symbol.iterator]=function(){var e=this[Symbol.iterator](),t=0;return{next:function(){var r=e.next();return r.done?{done:!0,value:null}:{done:!1,value:[t++,r.value]}}}}.bind(this),e},e.prototype[Symbol.iterator]=function(){var e=this._items[Symbol.iterator]();return{next:function(){return e.next()}}},e.prototype.forEach=function(e,t){var r,o;void 0===t&&(t=i.dom.window);var a=0;try{for(var s=n(this._items),u=s.next();!u.done;u=s.next()){var l=u.value;e.call(t,l,a++,this)}}catch(e){r={error:e}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}},e.prototype.get=function(e,t,r){if(!o.isString(t))return Reflect.get(e,t,r);var n=Number(t);return isNaN(n)?Reflect.get(e,t,r):e._items[n]||void 0},e.prototype.set=function(e,t,r,n){if(!o.isString(t))return Reflect.set(e,t,r,n);var i=Number(t);return isNaN(i)?Reflect.set(e,t,r,n):i>=0&&i<e._items.length&&(e._items[i]=r,!0)},e._create=function(t,r){var n=new e(t);return n._items=r,n},e}();t.NodeListStaticImpl=a},function(e,t,r){\"use strict\";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(9),a=r(0),s=function(e){function t(r){var n=e.call(this)||this;return n._element=r,Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t.prototype._asArray=function(){return this},t.prototype.item=function(e){return this[e]||null},t.prototype.getNamedItem=function(e){return a.element_getAnAttributeByName(e,this._element)},t.prototype.getNamedItemNS=function(e,t){return a.element_getAnAttributeByNamespaceAndLocalName(e||\"\",t,this._element)},t.prototype.setNamedItem=function(e){return a.element_setAnAttribute(e,this._element)},t.prototype.setNamedItemNS=function(e){return a.element_setAnAttribute(e,this._element)},t.prototype.removeNamedItem=function(e){var t=a.element_removeAnAttributeByName(e,this._element);if(null===t)throw new o.NotFoundError;return t},t.prototype.removeNamedItemNS=function(e,t){var r=a.element_removeAnAttributeByNamespaceAndLocalName(e||\"\",t,this._element);if(null===r)throw new o.NotFoundError;return r},t._create=function(e){return new t(e)},t}(Array);t.NamedNodeMapImpl=s},function(e,t,r){\"use strict\";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")};Object.defineProperty(t,\"__esModule\",{value:!0});var a=r(6),s=r(2),u=r(102),l=r(9),c=r(0),h=r(12),p=r(3),f=function(e){function t(){var t=e.call(this)||this,r=a.dom.window._associatedDocument;return t._start=[r,0],t._end=[r,0],a.dom.rangeList.add(t),t}return i(t,e),Object.defineProperty(t.prototype,\"commonAncestorContainer\",{get:function(){for(var e=this._start[0];!c.tree_isAncestorOf(this._end[0],e,!0);){if(null===e._parent)throw new Error(\"Parent node  is null.\");e=e._parent}return e},enumerable:!0,configurable:!0}),t.prototype.setStart=function(e,t){c.range_setTheStart(this,e,t)},t.prototype.setEnd=function(e,t){c.range_setTheEnd(this,e,t)},t.prototype.setStartBefore=function(e){var t=e._parent;if(null===t)throw new l.InvalidNodeTypeError;c.range_setTheStart(this,t,c.tree_index(e))},t.prototype.setStartAfter=function(e){var t=e._parent;if(null===t)throw new l.InvalidNodeTypeError;c.range_setTheStart(this,t,c.tree_index(e)+1)},t.prototype.setEndBefore=function(e){var t=e._parent;if(null===t)throw new l.InvalidNodeTypeError;c.range_setTheEnd(this,t,c.tree_index(e))},t.prototype.setEndAfter=function(e){var t=e._parent;if(null===t)throw new l.InvalidNodeTypeError;c.range_setTheEnd(this,t,c.tree_index(e)+1)},t.prototype.collapse=function(e){e?this._end=this._start:this._start=this._end},t.prototype.selectNode=function(e){c.range_select(e,this)},t.prototype.selectNodeContents=function(e){if(p.Guard.isDocumentTypeNode(e))throw new l.InvalidNodeTypeError;var t=c.tree_nodeLength(e);this._start=[e,0],this._end=[e,t]},t.prototype.compareBoundaryPoints=function(e,t){if(e!==s.HowToCompare.StartToStart&&e!==s.HowToCompare.StartToEnd&&e!==s.HowToCompare.EndToEnd&&e!==s.HowToCompare.EndToStart)throw new l.NotSupportedError;if(c.range_root(this)!==c.range_root(t))throw new l.WrongDocumentError;var r,n;switch(e){case s.HowToCompare.StartToStart:r=this._start,n=t._start;break;case s.HowToCompare.StartToEnd:r=this._end,n=t._start;break;case s.HowToCompare.EndToEnd:r=this._end,n=t._end;break;case s.HowToCompare.EndToStart:r=this._start,n=t._end;break;default:throw new l.NotSupportedError}var i=c.boundaryPoint_position(r,n);return i===s.BoundaryPosition.Before?-1:i===s.BoundaryPosition.After?1:0},t.prototype.deleteContents=function(){var e,t,r,n;if(!c.range_collapsed(this)){var i=this._startNode,a=this._startOffset,s=this._endNode,u=this._endOffset;if(i===s&&p.Guard.isCharacterDataNode(i))c.characterData_replaceData(i,a,u-a,\"\");else{var l,h,f=[];try{for(var d=o(c.range_getContainedNodes(this)),m=d.next();!m.done;m=d.next()){var y=(b=m.value)._parent;null!==y&&c.range_isContained(y,this)||f.push(b)}}catch(t){e={error:t}}finally{try{m&&!m.done&&(t=d.return)&&t.call(d)}finally{if(e)throw e.error}}if(c.tree_isAncestorOf(s,i,!0))l=i,h=a;else{for(var v=i;null!==v._parent&&!c.tree_isAncestorOf(s,v._parent,!0);)v=v._parent;if(null===v._parent)throw new Error(\"Parent node is null.\");l=v._parent,h=c.tree_index(v)+1}p.Guard.isCharacterDataNode(i)&&c.characterData_replaceData(i,a,c.tree_nodeLength(i)-a,\"\");try{for(var _=o(f),g=_.next();!g.done;g=_.next()){var b;(b=g.value)._parent&&c.mutation_remove(b,b._parent)}}catch(e){r={error:e}}finally{try{g&&!g.done&&(n=_.return)&&n.call(_)}finally{if(r)throw r.error}}p.Guard.isCharacterDataNode(s)&&c.characterData_replaceData(s,0,u,\"\"),this._start=[l,h],this._end=[l,h]}}},t.prototype.extractContents=function(){return c.range_extract(this)},t.prototype.cloneContents=function(){return c.range_cloneTheContents(this)},t.prototype.insertNode=function(e){return c.range_insert(e,this)},t.prototype.surroundContents=function(e){var t,r;try{for(var n=o(c.range_getPartiallyContainedNodes(this)),i=n.next();!i.done;i=n.next()){var a=i.value;if(!p.Guard.isTextNode(a))throw new l.InvalidStateError}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}if(p.Guard.isDocumentNode(e)||p.Guard.isDocumentTypeNode(e)||p.Guard.isDocumentFragmentNode(e))throw new l.InvalidNodeTypeError;var s=c.range_extract(this);0!==e._children.size&&c.mutation_replaceAll(null,e),c.range_insert(e,this),c.mutation_append(s,e),c.range_select(e,this)},t.prototype.cloneRange=function(){return c.create_range(this._start,this._end)},t.prototype.detach=function(){a.dom.rangeList.delete(this)},t.prototype.isPointInRange=function(e,t){if(c.tree_rootNode(e)!==c.range_root(this))return!1;if(p.Guard.isDocumentTypeNode(e))throw new l.InvalidNodeTypeError;if(t>c.tree_nodeLength(e))throw new l.IndexSizeError;var r=[e,t];return c.boundaryPoint_position(r,this._start)!==s.BoundaryPosition.Before&&c.boundaryPoint_position(r,this._end)!==s.BoundaryPosition.After},t.prototype.comparePoint=function(e,t){if(c.tree_rootNode(e)!==c.range_root(this))throw new l.WrongDocumentError;if(p.Guard.isDocumentTypeNode(e))throw new l.InvalidNodeTypeError;if(t>c.tree_nodeLength(e))throw new l.IndexSizeError;var r=[e,t];return c.boundaryPoint_position(r,this._start)===s.BoundaryPosition.Before?-1:c.boundaryPoint_position(r,this._end)===s.BoundaryPosition.After?1:0},t.prototype.intersectsNode=function(e){if(c.tree_rootNode(e)!==c.range_root(this))return!1;var t=e._parent;if(null===t)return!0;var r=c.tree_index(e);return c.boundaryPoint_position([t,r],this._end)===s.BoundaryPosition.Before&&c.boundaryPoint_position([t,r+1],this._start)===s.BoundaryPosition.After},t.prototype.toString=function(){var e,t,r=\"\";if(this._startNode===this._endNode&&p.Guard.isTextNode(this._startNode))return this._startNode._data.substring(this._startOffset,this._endOffset);p.Guard.isTextNode(this._startNode)&&(r+=this._startNode._data.substring(this._startOffset));try{for(var n=o(c.range_getContainedNodes(this)),i=n.next();!i.done;i=n.next()){var a=i.value;p.Guard.isTextNode(a)&&(r+=a._data)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return p.Guard.isTextNode(this._endNode)&&(r+=this._endNode._data.substring(0,this._endOffset)),r},t._create=function(e,r){var n=new t;return e&&(n._start=e),r&&(n._end=r),n},t.START_TO_START=0,t.START_TO_END=1,t.END_TO_END=2,t.END_TO_START=3,t}(u.AbstractRangeImpl);t.RangeImpl=f,h.idl_defineConst(f.prototype,\"START_TO_START\",0),h.idl_defineConst(f.prototype,\"START_TO_END\",1),h.idl_defineConst(f.prototype,\"END_TO_END\",2),h.idl_defineConst(f.prototype,\"END_TO_START\",3)},function(e,t,r){\"use strict\";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(103),a=r(0),s=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i._iteratorCollection=void 0,i._reference=r,i._pointerBeforeReference=n,a.nodeIterator_iteratorList().add(i),i}return i(t,e),Object.defineProperty(t.prototype,\"referenceNode\",{get:function(){return this._reference},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"pointerBeforeReferenceNode\",{get:function(){return this._pointerBeforeReference},enumerable:!0,configurable:!0}),t.prototype.nextNode=function(){return a.nodeIterator_traverse(this,!0)},t.prototype.previousNode=function(){return a.nodeIterator_traverse(this,!1)},t.prototype.detach=function(){a.nodeIterator_iteratorList().delete(this)},t._create=function(e,r,n){return new t(e,r,n)},t}(o.TraverserImpl);t.NodeIteratorImpl=s},function(e,t,r){\"use strict\";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(2),a=r(103),s=r(0),u=function(e){function t(t,r){var n=e.call(this,t)||this;return n._current=r,n}return i(t,e),Object.defineProperty(t.prototype,\"currentNode\",{get:function(){return this._current},set:function(e){this._current=e},enumerable:!0,configurable:!0}),t.prototype.parentNode=function(){for(var e=this._current;null!==e&&e!==this._root;)if(null!==(e=e._parent)&&s.traversal_filter(this,e)===o.FilterResult.Accept)return this._current=e,e;return null},t.prototype.firstChild=function(){return s.treeWalker_traverseChildren(this,!0)},t.prototype.lastChild=function(){return s.treeWalker_traverseChildren(this,!1)},t.prototype.nextSibling=function(){return s.treeWalker_traverseSiblings(this,!0)},t.prototype.previousNode=function(){for(var e=this._current;e!==this._root;){for(var t=e._previousSibling;t;){e=t;for(var r=s.traversal_filter(this,e);r!==o.FilterResult.Reject&&e._lastChild;)e=e._lastChild,r=s.traversal_filter(this,e);if(r===o.FilterResult.Accept)return this._current=e,e;t=e._previousSibling}if(e===this._root||null===e._parent)return null;if(e=e._parent,s.traversal_filter(this,e)===o.FilterResult.Accept)return this._current=e,e}return null},t.prototype.previousSibling=function(){return s.treeWalker_traverseSiblings(this,!1)},t.prototype.nextNode=function(){for(var e=this._current,t=o.FilterResult.Accept;;){for(;t!==o.FilterResult.Reject&&e._firstChild;)if(e=e._firstChild,(t=s.traversal_filter(this,e))===o.FilterResult.Accept)return this._current=e,e;for(var r=null,n=e;null!==n;){if(n===this._root)return null;if(null!==(r=n._nextSibling)){e=r;break}n=n._parent}if((t=s.traversal_filter(this,e))===o.FilterResult.Accept)return this._current=e,e}},t._create=function(e,r){return new t(e,r)},t}(a.TraverserImpl);t.TreeWalkerImpl=u},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(2),i=r(12),o=function(){function e(){}return e.prototype.acceptNode=function(e){return n.FilterResult.Accept},e._create=function(){return new e},e.FILTER_ACCEPT=1,e.FILTER_REJECT=2,e.FILTER_SKIP=3,e.SHOW_ALL=4294967295,e.SHOW_ELEMENT=1,e.SHOW_ATTRIBUTE=2,e.SHOW_TEXT=4,e.SHOW_CDATA_SECTION=8,e.SHOW_ENTITY_REFERENCE=16,e.SHOW_ENTITY=32,e.SHOW_PROCESSING_INSTRUCTION=64,e.SHOW_COMMENT=128,e.SHOW_DOCUMENT=256,e.SHOW_DOCUMENT_TYPE=512,e.SHOW_DOCUMENT_FRAGMENT=1024,e.SHOW_NOTATION=2048,e}();t.NodeFilterImpl=o,i.idl_defineConst(o.prototype,\"FILTER_ACCEPT\",1),i.idl_defineConst(o.prototype,\"FILTER_REJECT\",2),i.idl_defineConst(o.prototype,\"FILTER_SKIP\",3),i.idl_defineConst(o.prototype,\"SHOW_ALL\",4294967295),i.idl_defineConst(o.prototype,\"SHOW_ELEMENT\",1),i.idl_defineConst(o.prototype,\"SHOW_ATTRIBUTE\",2),i.idl_defineConst(o.prototype,\"SHOW_TEXT\",4),i.idl_defineConst(o.prototype,\"SHOW_CDATA_SECTION\",8),i.idl_defineConst(o.prototype,\"SHOW_ENTITY_REFERENCE\",16),i.idl_defineConst(o.prototype,\"SHOW_ENTITY\",32),i.idl_defineConst(o.prototype,\"SHOW_PROCESSING_INSTRUCTION\",64),i.idl_defineConst(o.prototype,\"SHOW_COMMENT\",128),i.idl_defineConst(o.prototype,\"SHOW_DOCUMENT\",256),i.idl_defineConst(o.prototype,\"SHOW_DOCUMENT_TYPE\",512),i.idl_defineConst(o.prototype,\"SHOW_DOCUMENT_FRAGMENT\",1024),i.idl_defineConst(o.prototype,\"SHOW_NOTATION\",2048)},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e,t,r,n,i,o,a,s,u){this._type=e,this._target=t,this._addedNodes=r,this._removedNodes=n,this._previousSibling=i,this._nextSibling=o,this._attributeName=a,this._attributeNamespace=s,this._oldValue=u}return Object.defineProperty(e.prototype,\"type\",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"target\",{get:function(){return this._target},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"addedNodes\",{get:function(){return this._addedNodes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"removedNodes\",{get:function(){return this._removedNodes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"previousSibling\",{get:function(){return this._previousSibling},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"nextSibling\",{get:function(){return this._nextSibling},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"attributeName\",{get:function(){return this._attributeName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"attributeNamespace\",{get:function(){return this._attributeNamespace},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"oldValue\",{get:function(){return this._oldValue},enumerable:!0,configurable:!0}),e._create=function(t,r,n,i,o,a,s,u,l){return new e(t,r,n,i,o,a,s,u,l)},e}();t.MutationRecordImpl=n},function(e,t,r){\"use strict\";var n=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")};Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(6),o=r(9),a=r(7),s=r(0),u=function(){function e(e,t){this._element=e,this._attribute=t,this._tokenSet=new Set;var r=t._localName,n=s.element_getAnAttributeValue(e,r),o=this;this._element._attributeChangeSteps.push((function(e,t,r,n,i){t===o._attribute._localName&&null===i&&(n?o._tokenSet=s.orderedSet_parse(n):o._tokenSet.clear())})),i.dom.features.steps&&s.dom_runAttributeChangeSteps(e,r,n,n,null)}return Object.defineProperty(e.prototype,\"length\",{get:function(){return this._tokenSet.size},enumerable:!0,configurable:!0}),e.prototype.item=function(e){var t,r,i=0;try{for(var o=n(this._tokenSet),a=o.next();!a.done;a=o.next()){var s=a.value;if(i===e)return s;i++}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return null},e.prototype.contains=function(e){return this._tokenSet.has(e)},e.prototype.add=function(){for(var e,t,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];try{for(var u=n(r),l=u.next();!l.done;l=u.next()){var c=l.value;if(\"\"===c)throw new o.SyntaxError(\"Cannot add an empty token.\");if(a.codePoint.ASCIIWhiteSpace.test(c))throw new o.InvalidCharacterError(\"Token cannot contain whitespace.\");this._tokenSet.add(c)}}catch(t){e={error:t}}finally{try{l&&!l.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}s.tokenList_updateSteps(this)},e.prototype.remove=function(){for(var e,t,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];try{for(var u=n(r),l=u.next();!l.done;l=u.next()){var c=l.value;if(\"\"===c)throw new o.SyntaxError(\"Cannot remove an empty token.\");if(a.codePoint.ASCIIWhiteSpace.test(c))throw new o.InvalidCharacterError(\"Token cannot contain whitespace.\");this._tokenSet.delete(c)}}catch(t){e={error:t}}finally{try{l&&!l.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}s.tokenList_updateSteps(this)},e.prototype.toggle=function(e,t){if(void 0===t&&(t=void 0),\"\"===e)throw new o.SyntaxError(\"Cannot toggle an empty token.\");if(a.codePoint.ASCIIWhiteSpace.test(e))throw new o.InvalidCharacterError(\"Token cannot contain whitespace.\");return this._tokenSet.has(e)?void 0!==t&&!1!==t||(this._tokenSet.delete(e),s.tokenList_updateSteps(this),!1):(void 0===t||!0===t)&&(this._tokenSet.add(e),s.tokenList_updateSteps(this),!0)},e.prototype.replace=function(e,t){if(\"\"===e||\"\"===t)throw new o.SyntaxError(\"Cannot replace an empty token.\");if(a.codePoint.ASCIIWhiteSpace.test(e)||a.codePoint.ASCIIWhiteSpace.test(t))throw new o.InvalidCharacterError(\"Token cannot contain whitespace.\");return!!this._tokenSet.has(e)&&(a.set.replace(this._tokenSet,e,t),s.tokenList_updateSteps(this),!0)},e.prototype.supports=function(e){return s.tokenList_validationSteps(this,e)},Object.defineProperty(e.prototype,\"value\",{get:function(){return s.tokenList_serializeSteps(this)},set:function(e){s.element_setAnAttributeValue(this._element,this._attribute._localName,e)},enumerable:!0,configurable:!0}),e.prototype[Symbol.iterator]=function(){var e=this._tokenSet[Symbol.iterator]();return{next:function(){return e.next()}}},e._create=function(t,r){return new e(t,r)},e}();t.DOMTokenListImpl=u},function(e,t,r){\"use strict\";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(104),a=r(0),s=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n._detail=null,n._detail=r&&r.detail||null,n}return i(t,e),Object.defineProperty(t.prototype,\"detail\",{get:function(){return this._detail},enumerable:!0,configurable:!0}),t.prototype.initCustomEvent=function(e,t,r,n){void 0===t&&(t=!1),void 0===r&&(r=!1),void 0===n&&(n=null),this._dispatchFlag||(a.event_initialize(this,e,t,r),this._detail=n)},t}(o.EventImpl);t.CustomEventImpl=s},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(6),i=r(2),o=r(105),a=r(17);t.nodeIterator_traverse=function(e,t){for(var r=e._reference,n=e._pointerBeforeReference;;){if(t)if(n)n=!1;else{var s=a.tree_getFollowingNode(e._root,r);if(!s)return null;r=s}else if(n){var u=a.tree_getPrecedingNode(e.root,r);if(!u)return null;r=u}else n=!0;if(o.traversal_filter(e,r)===i.FilterResult.Accept)break}return e._reference=r,e._pointerBeforeReference=n,r},t.nodeIterator_iteratorList=function(){return n.dom.window._iteratorList}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(9),i=r(7),o=r(174);function a(e){if(!o.xml_isName(e))throw new n.InvalidCharacterError(\"Invalid XML name: \"+e);if(!o.xml_isQName(e))throw new n.InvalidCharacterError(\"Invalid XML qualified name: \"+e+\".\")}t.namespace_validate=a,t.namespace_validateAndExtract=function(e,t){e||(e=null),a(t);var r=t.split(\":\"),o=2===r.length?r[0]:null,s=2===r.length?r[1]:t;if(o&&null===e)throw new n.NamespaceError(\"Qualified name includes a prefix but the namespace is null.\");if(\"xml\"===o&&e!==i.namespace.XML)throw new n.NamespaceError('Qualified name includes the \"xml\" prefix but the namespace is not the XML namespace.');if(e!==i.namespace.XMLNS&&(\"xmlns\"===o||\"xmlns\"===t))throw new n.NamespaceError('Qualified name includes the \"xmlns\" prefix but the namespace is not the XMLNS namespace.');if(e===i.namespace.XMLNS&&\"xmlns\"!==o&&\"xmlns\"!==t)throw new n.NamespaceError('Qualified name does not include the \"xmlns\" prefix but the namespace is the XMLNS namespace.');return[e,o,s]},t.namespace_extractQName=function(e){a(e);var t=e.split(\":\");return[2===t.length?t[0]:null,2===t.length?t[1]:e]}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.xml_isName=function(e){for(var t=0;t<e.length;t++){var r=e.charCodeAt(t);if(!(r>=97&&r<=122||r>=65&&r<=90||58===r||95===r||r>=192&&r<=214||r>=216&&r<=246||r>=248&&r<=767||r>=880&&r<=893||r>=895&&r<=8191||r>=8204&&r<=8205||r>=8304&&r<=8591||r>=11264&&r<=12271||r>=12289&&r<=55295||r>=63744&&r<=64975||r>=65008&&r<=65533)&&(0===t||!(45===r||46===r||r>=48&&r<=57||183===r||r>=768&&r<=879||r>=8255&&r<=8256))){if(r>=55296&&r<=56319&&t<e.length-1){var n=e.charCodeAt(t+1);if(n>=56320&&n<=57343&&(t++,(r=1024*(r-55296)+n-56320+65536)>=65536&&r<=983039))continue}return!1}}return!0},t.xml_isQName=function(e){for(var t=!1,r=0;r<e.length;r++){var n=e.charCodeAt(r);if(!(n>=97&&n<=122||n>=65&&n<=90||95===n||n>=192&&n<=214||n>=216&&n<=246||n>=248&&n<=767||n>=880&&n<=893||n>=895&&n<=8191||n>=8204&&n<=8205||n>=8304&&n<=8591||n>=11264&&n<=12271||n>=12289&&n<=55295||n>=63744&&n<=64975||n>=65008&&n<=65533)&&(0===r||!(45===n||46===n||n>=48&&n<=57||183===n||n>=768&&n<=879||n>=8255&&n<=8256))){if(0===r||58!==n){if(n>=55296&&n<=56319&&r<e.length-1){var i=e.charCodeAt(r+1);if(i>=56320&&i<=57343&&(r++,(n=1024*(n-55296)+i-56320+65536)>=65536&&n<=983039))continue}return!1}if(t)return!1;if(r===e.length-1)return!1;t=!0}}return!0},t.xml_isLegalChar=function(e){for(var t=0;t<e.length;t++){var r=e.charCodeAt(t);if(!(9===r||10===r||13===r||r>=32&&r<=55295||r>=57344&&r<=65533)){if(r>=55296&&r<=56319&&t<e.length-1){var n=e.charCodeAt(t+1);if(n>=56320&&n<=57343&&(t++,(r=1024*(r-55296)+n-56320+65536)>=65536&&r<=1114111))continue}return!1}}return!0},t.xml_isPubidChar=function(e){for(var t=0;t<e.length;t++){var r=e.charCodeAt(t);if(!(r>=97&&r<=122||r>=65&&r<=90||r>=39&&r<=59||32===r||13===r||10===r||r>=35&&r<=37||33===r||61===r||63===r||64===r||95===r))return!1}return!0}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(2),i=r(17);t.boundaryPoint_position=function e(t,r){var o=t[0],a=t[1],s=r[0],u=r[1];if(console.assert(i.tree_rootNode(o)===i.tree_rootNode(s),\"Boundary points must share the same root node.\"),o===s)return a===u?n.BoundaryPosition.Equal:a<u?n.BoundaryPosition.Before:n.BoundaryPosition.After;if(i.tree_isFollowing(s,o)){var l=e([s,u],[o,a]);if(l===n.BoundaryPosition.Before)return n.BoundaryPosition.After;if(l===n.BoundaryPosition.After)return n.BoundaryPosition.Before}if(i.tree_isAncestorOf(s,o)){for(var c=s;!i.tree_isChildOf(o,c);)null!==c._parent&&(c=c._parent);if(i.tree_index(c)<a)return n.BoundaryPosition.After}return n.BoundaryPosition.Before}},function(e,t,r){\"use strict\";var n=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")};Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(6),o=r(3),a=r(7),s=r(29),u=r(108),l=r(30),c=r(37),h=r(52);t.node_stringReplaceAll=function(e,t){var r=null;\"\"!==e&&(r=s.create_text(t._nodeDocument,e)),c.mutation_replaceAll(r,t)},t.node_clone=function e(t,r,a){var u,p,f,d,m;if(void 0===r&&(r=null),void 0===a&&(a=!1),null===r&&(r=t._nodeDocument),o.Guard.isElementNode(t)){m=h.element_createAnElement(r,t._localName,t._namespace,t._namespacePrefix,t._is,!1);try{for(var y=n(t._attributeList),v=y.next();!v.done;v=y.next()){var _=e(v.value,r);h.element_append(_,m)}}catch(e){u={error:e}}finally{try{v&&!v.done&&(p=y.return)&&p.call(y)}finally{if(u)throw u.error}}}else if(o.Guard.isDocumentNode(t)){var g=s.create_document();g._encoding=t._encoding,g._contentType=t._contentType,g._URL=t._URL,g._origin=t._origin,g._type=t._type,g._mode=t._mode,m=g}else if(o.Guard.isDocumentTypeNode(t)){m=s.create_documentType(r,t._name,t._publicId,t._systemId)}else if(o.Guard.isAttrNode(t)){var b=s.create_attr(r,t.localName);b._namespace=t._namespace,b._namespacePrefix=t._namespacePrefix,b._value=t._value,m=b}else m=o.Guard.isExclusiveTextNode(t)?s.create_text(r,t._data):o.Guard.isCDATASectionNode(t)?s.create_cdataSection(r,t._data):o.Guard.isCommentNode(t)?s.create_comment(r,t._data):o.Guard.isProcessingInstructionNode(t)?s.create_processingInstruction(r,t._target,t._data):o.Guard.isDocumentFragmentNode(t)?s.create_documentFragment(r):Object.create(t);if(o.Guard.isDocumentNode(m)?(m._nodeDocument=m,r=m):m._nodeDocument=r,i.dom.features.steps&&l.dom_runCloningSteps(m,t,r,a),a)try{for(var x=n(t._children),w=x.next();!w.done;w=x.next()){var E=e(w.value,r,!0);c.mutation_append(E,m)}}catch(e){f={error:e}}finally{try{w&&!w.done&&(d=x.return)&&d.call(x)}finally{if(f)throw f.error}}return m},t.node_equals=function e(t,r){var i,a,s,u;if(t._nodeType!==r._nodeType)return!1;if(o.Guard.isDocumentTypeNode(t)&&o.Guard.isDocumentTypeNode(r)){if(t._name!==r._name||t._publicId!==r._publicId||t._systemId!==r._systemId)return!1}else if(o.Guard.isElementNode(t)&&o.Guard.isElementNode(r)){if(t._namespace!==r._namespace||t._namespacePrefix!==r._namespacePrefix||t._localName!==r._localName||t._attributeList.length!==r._attributeList.length)return!1}else if(o.Guard.isAttrNode(t)&&o.Guard.isAttrNode(r)){if(t._namespace!==r._namespace||t._localName!==r._localName||t._value!==r._value)return!1}else if(o.Guard.isProcessingInstructionNode(t)&&o.Guard.isProcessingInstructionNode(r)){if(t._target!==r._target||t._data!==r._data)return!1}else if(o.Guard.isCharacterDataNode(t)&&o.Guard.isCharacterDataNode(r)&&t._data!==r._data)return!1;if(o.Guard.isElementNode(t)&&o.Guard.isElementNode(r)){var l={};try{for(var c=n(t._attributeList),h=c.next();!h.done;h=c.next()){l[(d=h.value)._localName]=d}}catch(e){i={error:e}}finally{try{h&&!h.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}try{for(var p=n(r._attributeList),f=p.next();!f.done;f=p.next()){var d,m=f.value;if(!(d=l[m._localName]))return!1;if(!e(d,m))return!1}}catch(e){s={error:e}}finally{try{f&&!f.done&&(u=p.return)&&u.call(p)}finally{if(s)throw s.error}}}if(t._children.size!==r._children.size)return!1;for(var y=t._children[Symbol.iterator](),v=r._children[Symbol.iterator](),_=y.next(),g=v.next();!_.done&&!g.done;){if(!e(_.value,g.value))return!1;_=y.next(),g=v.next()}return!0},t.node_listOfElementsWithQualifiedName=function(e,t){return\"*\"===e?s.create_htmlCollection(t):\"html\"===t._nodeDocument._type?s.create_htmlCollection(t,(function(t){return t._namespace===a.namespace.HTML&&t._qualifiedName===e.toLowerCase()||t._namespace!==a.namespace.HTML&&t._qualifiedName===e})):s.create_htmlCollection(t,(function(t){return t._qualifiedName===e}))},t.node_listOfElementsWithNamespace=function(e,t,r){return\"\"===e&&(e=null),\"*\"===e&&\"*\"===t?s.create_htmlCollection(r):\"*\"===e?s.create_htmlCollection(r,(function(e){return e._localName===t})):\"*\"===t?s.create_htmlCollection(r,(function(t){return t._namespace===e})):s.create_htmlCollection(r,(function(r){return r._localName===t&&r._namespace===e}))},t.node_listOfElementsWithClassNames=function(e,t){var r=u.orderedSet_parse(e);if(0===r.size)return s.create_htmlCollection(t,(function(){return!1}));var n=\"quirks\"!==t._nodeDocument._mode;return s.create_htmlCollection(t,(function(e){var t=e.classList;return u.orderedSet_contains(t._tokenSet,r,n)}))},t.node_locateANamespacePrefix=function e(t,r){if(t._namespace===r&&null!==t._namespacePrefix)return t._namespacePrefix;for(var n=0;n<t._attributeList.length;n++){var i=t._attributeList[n];if(\"xmlns\"===i._namespacePrefix&&i._value===r)return i._localName}return t._parent&&o.Guard.isElementNode(t._parent)?e(t._parent,r):null},t.node_locateANamespace=function e(t,r){if(o.Guard.isElementNode(t)){if(null!==t._namespace&&t._namespacePrefix===r)return t._namespace;for(var n=0;n<t._attributeList.length;n++){var i=t._attributeList[n];if(i._namespace===a.namespace.XMLNS&&\"xmlns\"===i._namespacePrefix&&i._localName===r)return i._value||null;if(null===r&&i._namespace===a.namespace.XMLNS&&null===i._namespacePrefix&&\"xmlns\"===i._localName)return i._value||null}return null===t.parentElement?null:e(t.parentElement,r)}return o.Guard.isDocumentNode(t)?null===t.documentElement?null:e(t.documentElement,r):o.Guard.isDocumentTypeNode(t)||o.Guard.isDocumentFragmentNode(t)?null:o.Guard.isAttrNode(t)?null===t._element?null:e(t._element,r):t._parent&&o.Guard.isElementNode(t._parent)?e(t._parent,r):null}},function(e,t,r){\"use strict\";var n=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")};Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(6),o=r(3),a=r(9),s=r(29),u=r(17),l=r(107),c=r(37);t.text_contiguousTextNodes=function(e,t){var r;return void 0===t&&(t=!1),(r={})[Symbol.iterator]=function(){for(var r=e;r&&o.Guard.isTextNode(r._previousSibling);)r=r._previousSibling;return{next:function(){if(r&&!t&&r===e&&(r=o.Guard.isTextNode(r._nextSibling)?r._nextSibling:null),null===r)return{done:!0,value:null};var n={done:!1,value:r};return r=o.Guard.isTextNode(r._nextSibling)?r._nextSibling:null,n}}},r},t.text_contiguousExclusiveTextNodes=function(e,t){var r;return void 0===t&&(t=!1),(r={})[Symbol.iterator]=function(){for(var r=e;r&&o.Guard.isExclusiveTextNode(r._previousSibling);)r=r._previousSibling;return{next:function(){if(r&&!t&&r===e&&(r=o.Guard.isExclusiveTextNode(r._nextSibling)?r._nextSibling:null),null===r)return{done:!0,value:null};var n={done:!1,value:r};return r=o.Guard.isExclusiveTextNode(r._nextSibling)?r._nextSibling:null,n}}},r},t.text_descendantTextContent=function(e){for(var t=\"\",r=u.tree_getFirstDescendantNode(e,!1,!1,(function(e){return o.Guard.isTextNode(e)}));null!==r;)t+=r._data,r=u.tree_getNextDescendantNode(e,r,!1,!1,(function(e){return o.Guard.isTextNode(e)}));return t},t.text_split=function(e,t){var r,o,h=e._data.length;if(t>h)throw new a.IndexSizeError;var p=h-t,f=l.characterData_substringData(e,t,p),d=s.create_text(e._nodeDocument,f),m=e._parent;if(null!==m){c.mutation_insert(d,m,e._nextSibling);try{for(var y=n(i.dom.rangeList),v=y.next();!v.done;v=y.next()){var _=v.value;_._start[0]===e&&_._start[1]>t&&(_._start[0]=d,_._start[1]-=t),_._end[0]===e&&_._end[1]>t&&(_._end[0]=d,_._end[1]-=t);var g=u.tree_index(e);_._start[0]===m&&_._start[1]===g+1&&_._start[1]++,_._end[0]===m&&_._end[1]===g+1&&_._end[1]++}}catch(e){r={error:e}}finally{try{v&&!v.done&&(o=y.return)&&o.call(y)}finally{if(r)throw r.error}}}return l.characterData_replaceData(e,t,p,\"\"),d}},function(e,t,r){\"use strict\";var n=r(4),i=r(41),o=r(24),a=r(48),s=[].join,u=i!=Object,l=a(\"join\",\",\");n({target:\"Array\",proto:!0,forced:u||!l},{join:function(e){return s.call(o(this),void 0===e?\",\":e)}})},function(e,t,r){var n=r(4),i=r(83),o=String.fromCharCode,a=String.fromCodePoint;n({target:\"String\",stat:!0,forced:!!a&&1!=a.length},{fromCodePoint:function(e){for(var t,r=[],n=arguments.length,a=0;n>a;){if(t=+arguments[a++],i(t,1114111)!==t)throw RangeError(t+\" is not a valid code point\");r.push(t<65536?o(t):o(55296+((t-=65536)>>10),t%1024+56320))}return r.join(\"\")}})},function(e,t,r){\"use strict\";var n=this&&this.__read||function(e,t){var r=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(111),o=function(){function e(e,t){this._options={skipWhitespaceOnlyText:!1},this.err={line:-1,col:-1,index:-1,str:\"\"},this._str=e,this._index=0,this._length=e.length,t&&(this._options.skipWhitespaceOnlyText=t.skipWhitespaceOnlyText||!1)}return e.prototype.nextToken=function(){if(this.eof())return{type:i.TokenType.EOF};var t=this.skipIfStartsWith(\"<\")?this.openBracket():this.text();return this._options.skipWhitespaceOnlyText&&t.type===i.TokenType.Text&&e.isWhiteSpaceToken(t)&&(t=this.nextToken()),t},e.prototype.openBracket=function(){return this.skipIfStartsWith(\"?\")?this.skipIfStartsWith(\"xml\")?e.isSpace(this._str[this._index])?this.declaration():(this.seek(-3),this.pi()):this.pi():this.skipIfStartsWith(\"!\")?this.skipIfStartsWith(\"--\")?this.comment():this.skipIfStartsWith(\"[CDATA[\")?this.cdata():this.skipIfStartsWith(\"DOCTYPE\")?this.doctype():void this.throwError(\"Invalid '!' in opening tag.\"):this.skipIfStartsWith(\"/\")?this.closeTag():this.openTag()},e.prototype.declaration=function(){for(var e=\"\",t=\"\",r=\"\";!this.eof();){if(this.skipSpace(),this.skipIfStartsWith(\"?>\"))return{type:i.TokenType.Declaration,version:e,encoding:t,standalone:r};var o=n(this.attribute(),2),a=o[0],s=o[1];\"version\"===a?e=s:\"encoding\"===a?t=s:\"standalone\"===a?r=s:this.throwError(\"Invalid attribute name: \"+a)}this.throwError(\"Missing declaration end symbol `?>`\")},e.prototype.doctype=function(){var e=\"\",t=\"\";this.skipSpace();var r=this.takeUntil2(\"[\",\">\",!0);return this.skipSpace(),this.skipIfStartsWith(\"PUBLIC\")?(e=this.quotedString(),t=this.quotedString()):this.skipIfStartsWith(\"SYSTEM\")&&(t=this.quotedString()),this.skipSpace(),this.skipIfStartsWith(\"[\")&&(this.skipUntil(\"]\"),this.skipIfStartsWith(\"]\")||this.throwError(\"Missing end bracket of DTD internal subset\")),this.skipSpace(),this.skipIfStartsWith(\">\")||this.throwError(\"Missing doctype end symbol `>`\"),{type:i.TokenType.DocType,name:r,pubId:e,sysId:t}},e.prototype.pi=function(){var e=this.takeUntilStartsWith(\"?>\",!0);if(this.eof()&&this.throwError(\"Missing processing instruction end symbol `?>`\"),this.skipSpace(),this.skipIfStartsWith(\"?>\"))return{type:i.TokenType.PI,target:e,data:\"\"};var t=this.takeUntilStartsWith(\"?>\");return this.eof()&&this.throwError(\"Missing processing instruction end symbol `?>`\"),this.seek(2),{type:i.TokenType.PI,target:e,data:t}},e.prototype.text=function(){var e=this.takeUntil(\"<\");return{type:i.TokenType.Text,data:e}},e.prototype.comment=function(){var e=this.takeUntilStartsWith(\"--\\x3e\");return this.eof()&&this.throwError(\"Missing comment end symbol `--\\x3e`\"),this.seek(3),{type:i.TokenType.Comment,data:e}},e.prototype.cdata=function(){var e=this.takeUntilStartsWith(\"]]>\");return this.eof()&&this.throwError(\"Missing CDATA end symbol `]>`\"),this.seek(3),{type:i.TokenType.CDATA,data:e}},e.prototype.openTag=function(){this.skipSpace();var e=this.takeUntil2(\">\",\"/\",!0);if(this.skipSpace(),this.skipIfStartsWith(\">\"))return{type:i.TokenType.Element,name:e,attributes:[],selfClosing:!1};if(this.skipIfStartsWith(\"/>\"))return{type:i.TokenType.Element,name:e,attributes:[],selfClosing:!0};for(var t=[];!this.eof();){if(this.skipSpace(),this.skipIfStartsWith(\">\"))return{type:i.TokenType.Element,name:e,attributes:t,selfClosing:!1};if(this.skipIfStartsWith(\"/>\"))return{type:i.TokenType.Element,name:e,attributes:t,selfClosing:!0};var r=this.attribute();t.push(r)}this.throwError(\"Missing opening element tag end symbol `>`\")},e.prototype.closeTag=function(){this.skipSpace();var e=this.takeUntil(\">\",!0);return this.skipSpace(),this.skipIfStartsWith(\">\")||this.throwError(\"Missing closing element tag end symbol `>`\"),{type:i.TokenType.ClosingTag,name:e}},e.prototype.attribute=function(){this.skipSpace();var e=this.takeUntil(\"=\",!0);return this.skipSpace(),this.skipIfStartsWith(\"=\")||this.throwError(\"Missing equals sign before attribute value\"),[e,this.quotedString()]},e.prototype.quotedString=function(){this.skipSpace();var t=this.take(1);e.isQuote(t)||this.throwError(\"Missing start quote character before quoted value\");var r=this.takeUntil(t);return this.skipIfStartsWith(t)||this.throwError(\"Missing end quote character after quoted value\"),r},e.prototype.eof=function(){return this._index>=this._length},e.prototype.skipIfStartsWith=function(e){var t=e.length;if(1===t)return this._str[this._index]===e&&(this._index++,!0);for(var r=0;r<t;r++)if(this._str[this._index+r]!==e[r])return!1;return this._index+=t,!0},e.prototype.seek=function(e){this._index+=e,this._index<0&&(this._index=0),this._index>this._length&&(this._index=this._length)},e.prototype.skipSpace=function(){for(;!this.eof()&&e.isSpace(this._str[this._index]);)this._index++},e.prototype.take=function(e){if(1===e)return this._str[this._index++];var t=this._index;return this.seek(e),this._str.slice(t,this._index)},e.prototype.takeUntil=function(t,r){void 0===r&&(r=!1);for(var n=this._index;this._index<this._length;){var i=this._str[this._index];if(i===t||r&&e.isSpace(i))break;this._index++}return this._str.slice(n,this._index)},e.prototype.takeUntil2=function(t,r,n){void 0===n&&(n=!1);for(var i=this._index;this._index<this._length;){var o=this._str[this._index];if(o===t||o===r||n&&e.isSpace(o))break;this._index++}return this._str.slice(i,this._index)},e.prototype.takeUntilStartsWith=function(t,r){void 0===r&&(r=!1);for(var n=this._index,i=t.length;this._index<this._length;){for(var o=!0,a=0;a<i;a++){var s=this._str[this._index+a],u=t[a];if(r&&e.isSpace(s))return this._str.slice(n,this._index);if(s!==u){this._index++,o=!1;break}}if(o)return this._str.slice(n,this._index)}return this._index=this._length,this._str.slice(n)},e.prototype.skipUntil=function(e){for(;this._index<this._length;){if(this._str[this._index]===e)break;this._index++}},e.isWhiteSpaceToken=function(e){for(var t=e.data,r=0;r<t.length;r++){var n=t[r];if(\" \"!==n&&\"\\n\"!==n&&\"\\r\"!==n&&\"\\t\"!==n&&\"\\f\"!==n)return!1}return!0},e.isSpace=function(e){return\" \"===e||\"\\n\"===e||\"\\r\"===e||\"\\t\"===e},e.isQuote=function(e){return'\"'===e||\"'\"===e},e.prototype.throwError=function(e){for(var t=/\\r\\n|\\r|\\n/g,r=null,n=0,i=0,o=this._str.length;null!==(r=t.exec(this._str))&&null!==r;)if(n++,r.index<this._index&&(i=t.lastIndex),r.index>this._index){o=r.index;break}throw this.err={line:n,col:this._index-i,index:this._index,str:this._str.substring(i,o)},new Error(e+\"\\nIndex: \"+this.err.index+\"\\nLn: \"+this.err.line+\", Col: \"+this.err.col+\"\\nInput: \"+this.err.str)},e.prototype[Symbol.iterator]=function(){return this._index=0,{next:function(){var e=this.nextToken();return e.type===i.TokenType.EOF?{done:!0,value:null}:{done:!1,value:e}}.bind(this)}},e}();t.XMLStringLexer=o},function(e,t,r){\"use strict\";var n=r(39);e.exports=new n({include:[r(182)]})},function(e,t,r){\"use strict\";var n=r(39);e.exports=new n({include:[r(113)],implicit:[r(289),r(290),r(291),r(292)]})},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(91),i=r(1),o=r(3),a=r(77),s=r(109);function u(e,t){var r=c(void 0===e||l(e)?e:n.DefaultBuilderOptions),i=l(e)?t:e,o=s.createDocument();h(o,r);var u=new a.XMLBuilderImpl(o);return void 0!==i&&u.ele(i),u}function l(e){if(!i.isPlainObject(e))return!1;for(var t in e)if(e.hasOwnProperty(t)&&!n.XMLBuilderOptionKeys.has(t))return!1;return!0}function c(e){void 0===e&&(e={});var t=i.applyDefaults(e,n.DefaultBuilderOptions);if(0===t.convert.att.length||0===t.convert.ins.length||0===t.convert.text.length||0===t.convert.cdata.length||0===t.convert.comment.length)throw new Error(\"JS object converter strings cannot be zero length.\");return t}function h(e,t,r){var n=e;n._xmlBuilderOptions=t,n._isFragment=r}t.builder=function(e,t){var r=c(l(e)?e:n.DefaultBuilderOptions),s=o.Guard.isNode(e)||i.isArray(e)?e:t;if(void 0===s)throw new Error(\"Invalid arguments.\");if(i.isArray(s)){for(var u=[],h=0;h<s.length;h++){var p=new a.XMLBuilderImpl(s[h]);p.set(r),u.push(p)}return u}var f=new a.XMLBuilderImpl(s);return f.set(r),f},t.create=u,t.fragment=function(e,t){var r=c(void 0===e||l(e)?e:n.DefaultBuilderOptions),i=l(e)?t:e,o=s.createDocument();h(o,r,!0);var u=new a.XMLBuilderImpl(o.createDocumentFragment());return void 0!==i&&u.ele(i),u},t.convert=function(e,t,r){var i,o,a;return l(e)&&void 0!==t?(i=e,o=t,a=r):(i=n.DefaultBuilderOptions,o=e,a=t||void 0),u(i,o).end(a)}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(77);t.builder=n.builder,t.create=n.create,t.fragment=n.fragment,t.convert=n.convert,t.createCB=n.createCB,t.fragmentCB=n.fragmentCB},function(e,t,r){\"use strict\";r(31),r(32),r(33),r(191),r(192),r(194),r(64),r(19),r(198),r(199),r(89),r(201),r(65),r(20),r(66),r(22),r(23);var n=this&&this.__read||function(e,t){var r=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")};Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(91),a=r(1),s=r(217),u=r(2),l=r(3),c=r(0),h=r(109),p=r(7),f=r(276),d=function(){function e(e){this._domNode=e}return Object.defineProperty(e.prototype,\"node\",{get:function(){return this._domNode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"options\",{get:function(){return this._options},enumerable:!0,configurable:!0}),e.prototype.set=function(e){return this._options=a.applyDefaults(a.applyDefaults(this._options,e,!0),o.DefaultBuilderOptions),this},e.prototype.ele=function(t,r,i){var o,s,u,l,p,d;if(a.isObject(t))return new f.ObjectReader(this._options).parse(this,t);if(null!==t&&/^\\s*</.test(t))return new f.XMLReader(this._options).parse(this,t);if(null!==t&&/^\\s*[\\{\\[]/.test(t))return new f.JSONReader(this._options).parse(this,t);if(null!==t&&/^(\\s*|(#.*)|(%.*))*---/.test(t))return new f.YAMLReader(this._options).parse(this,t);if((null===t||a.isString(t))&&a.isString(r))l=(o=n([t,r,i],3))[0],p=o[1],d=o[2];else{if(null===t)throw new Error(\"Element name cannot be null. \"+this._debugInfo());l=(s=n([void 0,t,a.isObject(r)?r:void 0],3))[0],p=s[1],d=s[2]}if(d&&(d=a.getValue(d)),l=(u=n(this._extractNamespace(h.sanitizeInput(l,this._options.invalidCharReplacement),h.sanitizeInput(p,this._options.invalidCharReplacement),!0),2))[0],p=u[1],void 0===l){var m=n(c.namespace_extractQName(p),1)[0];l=this.node.lookupNamespaceURI(m)}var y=null!=l?this._doc.createElementNS(l,p):this._doc.createElement(p);this.node.appendChild(y);var v=new e(y),_=this._doc.doctype;if(y===this._doc.documentElement&&null!==_){var g=this._doc.implementation.createDocumentType(this._doc.documentElement.tagName,_.publicId,_.systemId);this._doc.replaceChild(g,_)}return d&&!a.isEmpty(d)&&v.att(d),v},e.prototype.remove=function(){var e=this.up();return e.node.removeChild(this.node),e},e.prototype.att=function(e,t,r){var i,o,s,u,f,d,m=this;if(a.isMap(e)||a.isObject(e))return a.forEachObject(e,(function(e,t){return m.att(e,t)}),this),this;if(null!=e&&(e=a.getValue(e+\"\")),null!=t&&(t=a.getValue(t+\"\")),null!=r&&(r=a.getValue(r+\"\")),null!==e&&!a.isString(e)||!a.isString(t)||null!==r&&!a.isString(r)){if(!a.isString(e)||null!=t&&!a.isString(t))throw new Error(\"Attribute name and value not specified. \"+this._debugInfo());u=(o=n([void 0,e,t],3))[0],f=o[1],d=o[2]}else u=(i=n([e,t,r],3))[0],f=i[1],d=i[2];if(this._options.keepNullAttributes&&null==d)d=\"\";else if(null==d)return this;if(!l.Guard.isElementNode(this.node))throw new Error(\"An attribute can only be assigned to an element node.\");var y=this.node;u=(s=n(this._extractNamespace(u,f,!1),2))[0],f=s[1],f=h.sanitizeInput(f,this._options.invalidCharReplacement),u=h.sanitizeInput(u,this._options.invalidCharReplacement),d=h.sanitizeInput(d,this._options.invalidCharReplacement);var v=n(c.namespace_extractQName(f),2),_=v[0],g=v[1],b=n(c.namespace_extractQName(y.prefix?y.prefix+\":\"+y.localName:y.localName),1)[0],x=null;return\"xmlns\"===_?(u=p.namespace.XMLNS,null===y.namespaceURI&&b===g&&(x=d)):null===_&&\"xmlns\"===g&&null===b&&(u=p.namespace.XMLNS,x=d),null!==x&&(this._updateNamespace(x),y=this.node),void 0!==u?y.setAttributeNS(u,f,d):y.setAttribute(f,d),this},e.prototype.removeAtt=function(e,t){var r,n,i=this;if(!l.Guard.isElementNode(this.node))throw new Error(\"An attribute can only be removed from an element node.\");if(e=a.getValue(e),void 0!==t&&(t=a.getValue(t)),null!==e&&void 0===t)n=e;else{if(null!==e&&!a.isString(e)||void 0===t)throw new Error(\"Attribute namespace must be a string. \"+this._debugInfo());r=e,n=t}return a.isArray(n)||a.isSet(n)?a.forEachArray(n,(function(e){return void 0===r?i.removeAtt(e):i.removeAtt(r,e)}),this):void 0!==r?(n=h.sanitizeInput(n,this._options.invalidCharReplacement),r=h.sanitizeInput(r,this._options.invalidCharReplacement),this.node.removeAttributeNS(r,n)):(n=h.sanitizeInput(n,this._options.invalidCharReplacement),this.node.removeAttribute(n)),this},e.prototype.txt=function(e){if(null==e){if(!this._options.keepNullNodes)return this;e=\"\"}var t=this._doc.createTextNode(h.sanitizeInput(e,this._options.invalidCharReplacement));return this.node.appendChild(t),this},e.prototype.com=function(e){if(null==e){if(!this._options.keepNullNodes)return this;e=\"\"}var t=this._doc.createComment(h.sanitizeInput(e,this._options.invalidCharReplacement));return this.node.appendChild(t),this},e.prototype.dat=function(e){if(null==e){if(!this._options.keepNullNodes)return this;e=\"\"}var t=this._doc.createCDATASection(h.sanitizeInput(e,this._options.invalidCharReplacement));return this.node.appendChild(t),this},e.prototype.ins=function(e,t){var r=this;if(void 0===t&&(t=\"\"),null==t){if(!this._options.keepNullNodes)return this;t=\"\"}if(a.isArray(e)||a.isSet(e))a.forEachArray(e,(function(e){var t=(e+=\"\").indexOf(\" \"),n=-1===t?e:e.substr(0,t),i=-1===t?\"\":e.substr(t+1);r.ins(n,i)}),this);else if(a.isMap(e)||a.isObject(e))a.forEachObject(e,(function(e,t){return r.ins(e,t)}),this);else{var n=this._doc.createProcessingInstruction(h.sanitizeInput(e,this._options.invalidCharReplacement),h.sanitizeInput(t,this._options.invalidCharReplacement));this.node.appendChild(n)}return this},e.prototype.dec=function(e){return this._options.version=e.version||\"1.0\",this._options.encoding=e.encoding,this._options.standalone=e.standalone,this},e.prototype.dtd=function(e){var t=h.sanitizeInput(e&&e.name||(this._doc.documentElement?this._doc.documentElement.tagName:\"ROOT\"),this._options.invalidCharReplacement),r=h.sanitizeInput(e&&e.pubID||\"\",this._options.invalidCharReplacement),n=h.sanitizeInput(e&&e.sysID||\"\",this._options.invalidCharReplacement);if(null!==this._doc.documentElement&&t!==this._doc.documentElement.tagName)throw new Error(\"DocType name does not match document element name.\");var i=this._doc.implementation.createDocumentType(t,r,n);return null!==this._doc.doctype?this._doc.replaceChild(i,this._doc.doctype):this._doc.insertBefore(i,this._doc.documentElement),this},e.prototype.import=function(t){var r,o,a=this._domNode,s=this._doc,u=t.node;if(l.Guard.isDocumentNode(u)){var h=u.documentElement;if(null===h)throw new Error(\"Imported document has no document element node. \"+this._debugInfo());var p=s.importNode(h,!0);a.appendChild(p);var f=n(c.namespace_extractQName(p.prefix?p.prefix+\":\"+p.localName:p.localName),1)[0],d=a.lookupNamespaceURI(f);new e(p)._updateNamespace(d)}else if(l.Guard.isDocumentFragmentNode(u))try{for(var m=i(u.childNodes),y=m.next();!y.done;y=m.next()){var v=y.value;p=s.importNode(v,!0);if(a.appendChild(p),l.Guard.isElementNode(p)){f=n(c.namespace_extractQName(p.prefix?p.prefix+\":\"+p.localName:p.localName),1)[0],d=a.lookupNamespaceURI(f);new e(p)._updateNamespace(d)}}}catch(e){r={error:e}}finally{try{y&&!y.done&&(o=m.return)&&o.call(m)}finally{if(r)throw r.error}}else{p=s.importNode(u,!0);if(a.appendChild(p),l.Guard.isElementNode(p)){f=n(c.namespace_extractQName(p.prefix?p.prefix+\":\"+p.localName:p.localName),1)[0],d=a.lookupNamespaceURI(f);new e(p)._updateNamespace(d)}}return this},e.prototype.doc=function(){if(this._doc._isFragment){for(var t=this.node;t&&t.nodeType!==u.NodeType.DocumentFragment;)t=t.parentNode;if(null===t)throw new Error(\"Node has no parent node while searching for document fragment ancestor. \"+this._debugInfo());return new e(t)}return new e(this._doc)},e.prototype.root=function(){var t=this._doc.documentElement;if(!t)throw new Error(\"Document root element is null. \"+this._debugInfo());return new e(t)},e.prototype.up=function(){var t=this._domNode.parentNode;if(!t)throw new Error(\"Parent node is null. \"+this._debugInfo());return new e(t)},e.prototype.prev=function(){var t=this._domNode.previousSibling;if(!t)throw new Error(\"Previous sibling node is null. \"+this._debugInfo());return new e(t)},e.prototype.next=function(){var t=this._domNode.nextSibling;if(!t)throw new Error(\"Next sibling node is null. \"+this._debugInfo());return new e(t)},e.prototype.first=function(){var t=this._domNode.firstChild;if(!t)throw new Error(\"First child node is null. \"+this._debugInfo());return new e(t)},e.prototype.last=function(){var t=this._domNode.lastChild;if(!t)throw new Error(\"Last child node is null. \"+this._debugInfo());return new e(t)},e.prototype.each=function(t,r,n,i){void 0===r&&(r=!1),void 0===n&&(n=!1);for(var o=this._getFirstDescendantNode(this._domNode,r,n);o[0];){var a=this._getNextDescendantNode(this._domNode,o[0],n,o[1],o[2]);t.call(i,new e(o[0]),o[1],o[2]),o=a}return this},e.prototype.map=function(e,t,r,n){void 0===t&&(t=!1),void 0===r&&(r=!1);var i=[];return this.each((function(t,r,o){return i.push(e.call(n,t,r,o))}),t,r),i},e.prototype.reduce=function(e,t,r,n,i){void 0===r&&(r=!1),void 0===n&&(n=!1);var o=t;return this.each((function(t,r,n){return o=e.call(i,o,t,r,n)}),r,n),o},e.prototype.find=function(t,r,n,i){void 0===r&&(r=!1),void 0===n&&(n=!1);for(var o=this._getFirstDescendantNode(this._domNode,r,n);o[0];){var a=new e(o[0]);if(t.call(i,a,o[1],o[2]))return a;o=this._getNextDescendantNode(this._domNode,o[0],n,o[1],o[2])}},e.prototype.filter=function(e,t,r,n){void 0===t&&(t=!1),void 0===r&&(r=!1);var i=[];return this.each((function(t,r,o){e.call(n,t,r,o)&&i.push(t)}),t,r),i},e.prototype.every=function(t,r,n,i){void 0===r&&(r=!1),void 0===n&&(n=!1);for(var o=this._getFirstDescendantNode(this._domNode,r,n);o[0];){var a=new e(o[0]);if(!t.call(i,a,o[1],o[2]))return!1;o=this._getNextDescendantNode(this._domNode,o[0],n,o[1],o[2])}return!0},e.prototype.some=function(t,r,n,i){void 0===r&&(r=!1),void 0===n&&(n=!1);for(var o=this._getFirstDescendantNode(this._domNode,r,n);o[0];){var a=new e(o[0]);if(t.call(i,a,o[1],o[2]))return!0;o=this._getNextDescendantNode(this._domNode,o[0],n,o[1],o[2])}return!1},e.prototype.toArray=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var r=[];return this.each((function(e){return r.push(e)}),e,t),r},e.prototype.toString=function(e){return void 0===(e=e||{}).format&&(e.format=\"xml\"),this._serialize(e)},e.prototype.toObject=function(e){return void 0===(e=e||{}).format&&(e.format=\"object\"),this._serialize(e)},e.prototype.end=function(e){return void 0===(e=e||{}).format&&(e.format=\"xml\"),this.doc()._serialize(e)},e.prototype._getFirstDescendantNode=function(e,t,r){return t?[this._domNode,0,0]:r?this._getNextDescendantNode(e,e,r,0,0):[this._domNode.firstChild,0,1]},e.prototype._getNextDescendantNode=function(e,t,r,n,i){if(!r)return e===t?[t.firstChild,0,i+1]:[t.nextSibling,n+1,i];if(t.firstChild)return[t.firstChild,0,i+1];if(t===e)return[null,-1,-1];if(t.nextSibling)return[t.nextSibling,n+1,i];for(var o=t.parentNode;o&&o!==e;){if(o.nextSibling)return[o.nextSibling,c.tree_index(o.nextSibling),i-1];o=o.parentNode,i--}return[null,-1,-1]},e.prototype._serialize=function(e){if(\"xml\"===e.format)return new s.XMLWriter(this._options,e).serialize(this.node);if(\"map\"===e.format)return new s.MapWriter(this._options,e).serialize(this.node);if(\"object\"===e.format)return new s.ObjectWriter(this._options,e).serialize(this.node);if(\"json\"===e.format)return new s.JSONWriter(this._options,e).serialize(this.node);if(\"yaml\"===e.format)return new s.YAMLWriter(this._options,e).serialize(this.node);throw new Error(\"Invalid writer format: \"+e.format+\". \"+this._debugInfo())},e.prototype._extractNamespace=function(e,t,r){var n=t.indexOf(\"@\");if(n>0&&(void 0===e&&(e=t.slice(n+1)),t=t.slice(0,n)),void 0===e)e=r?this._options.defaultNamespace.ele:this._options.defaultNamespace.att;else if(null!==e&&\"@\"===e[0]){var i=e.slice(1);if(void 0===(e=this._options.namespaceAlias[i]))throw new Error(\"Namespace alias `\"+i+\"` is not defined. \"+this._debugInfo())}return[e,t]},e.prototype._updateNamespace=function(t){var r,o,a,s,u=this._domNode;if(l.Guard.isElementNode(u)&&null!==t&&u.namespaceURI!==t){var h=n(c.namespace_extractQName(u.prefix?u.prefix+\":\"+u.localName:u.localName),2),p=h[0],f=h[1],d=c.create_element(this._doc,f,t,p);try{for(var m=i(u.attributes),y=m.next();!y.done;y=m.next()){var v=y.value,_=v.prefix?v.prefix+\":\"+v.localName:v.localName,g=n(c.namespace_extractQName(_),1)[0],b=v.namespaceURI;null===b&&null!==g&&(b=u.lookupNamespaceURI(g)),null===b?d.setAttribute(_,v.value):d.setAttributeNS(b,_,v.value)}}catch(e){r={error:e}}finally{try{y&&!y.done&&(o=m.return)&&o.call(m)}finally{if(r)throw r.error}}var x=u.parentNode;if(null===x)throw new Error(\"Parent node is null.\"+this._debugInfo());x.replaceChild(d,u),this._domNode=d;try{for(var w=i(u.childNodes),E=w.next();!E.done;E=w.next()){var D=E.value.cloneNode(!0);if(d.appendChild(D),l.Guard.isElementNode(D)){var S=n(c.namespace_extractQName(D.prefix?D.prefix+\":\"+D.localName:D.localName),1)[0],C=d.lookupNamespaceURI(S);new e(D)._updateNamespace(C)}}}catch(e){a={error:e}}finally{try{E&&!E.done&&(s=w.return)&&s.call(w)}finally{if(a)throw a.error}}}},Object.defineProperty(e.prototype,\"_doc\",{get:function(){var e=this.node;if(l.Guard.isDocumentNode(e))return e;var t=e.ownerDocument;if(!t)throw new Error(\"Owner document is null. \"+this._debugInfo());return t},enumerable:!0,configurable:!0}),e.prototype._debugInfo=function(e){var t=this.node,r=t.parentNode;e=e||t.nodeName;var n=r?r.nodeName:\"\";return n?\"node: <\"+e+\">, parent: <\"+n+\">\":\"node: <\"+e+\">\"},Object.defineProperty(e.prototype,\"_options\",{get:function(){var e=this._doc;if(void 0===e._xmlBuilderOptions)throw new Error(\"Builder options is not set.\");return e._xmlBuilderOptions},set:function(e){this._doc._xmlBuilderOptions=e},enumerable:!0,configurable:!0}),e}();t.XMLBuilderImpl=d},function(e,t,r){var n=r(11),i=r(117),o=n.WeakMap;e.exports=\"function\"==typeof o&&/native code/.test(i(o))},function(e,t,r){var n=r(46),i=r(82),o=r(85),a=r(18);e.exports=n(\"Reflect\",\"ownKeys\")||function(e){var t=i.f(a(e)),r=o.f;return r?t.concat(r(e)):t}},function(e,t,r){var n=r(16),i=r(15),o=r(18),a=r(61);e.exports=n?Object.defineProperties:function(e,t){o(e);for(var r,n=a(t),s=n.length,u=0;s>u;)i.f(e,r=n[u++],t[r]);return e}},function(e,t,r){var n=r(46);e.exports=n(\"document\",\"documentElement\")},function(e,t,r){var n=r(24),i=r(82).f,o={}.toString,a=\"object\"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&\"[object Window]\"==o.call(e)?function(e){try{return i(e)}catch(e){return a.slice()}}(e):i(n(e))}},function(e,t,r){\"use strict\";var n=r(4),i=r(36).every,o=r(48),a=r(28),s=o(\"every\"),u=a(\"every\");n({target:\"Array\",proto:!0,forced:!s||!u},{every:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,r){\"use strict\";var n=r(4),i=r(36).filter,o=r(63),a=r(28),s=o(\"filter\"),u=a(\"filter\");n({target:\"Array\",proto:!0,forced:!s||!u},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,r){var n=r(46);e.exports=n(\"navigator\",\"userAgent\")||\"\"},function(e,t,r){\"use strict\";var n=r(4),i=r(36).find,o=r(130),a=r(28),s=!0,u=a(\"find\");\"find\"in[]&&Array(1).find((function(){s=!1})),n({target:\"Array\",proto:!0,forced:s||!u},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o(\"find\")},function(e,t,r){\"use strict\";var n=r(131).IteratorPrototype,i=r(60),o=r(40),a=r(62),s=r(49),u=function(){return this};e.exports=function(e,t,r){var l=t+\" Iterator\";return e.prototype=i(n,{next:o(1,r)}),a(e,l,!1,!0),s[l]=u,e}},function(e,t,r){var n=r(8);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,t,r){var n=r(13);e.exports=function(e){if(!n(e)&&null!==e)throw TypeError(\"Can't set \"+String(e)+\" as a prototype\");return e}},function(e,t,r){\"use strict\";var n=r(4),i=r(36).map,o=r(63),a=r(28),s=o(\"map\"),u=a(\"map\");n({target:\"Array\",proto:!0,forced:!s||!u},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,r){\"use strict\";var n=r(4),i=r(200).left,o=r(48),a=r(28),s=o(\"reduce\"),u=a(\"reduce\",{1:0});n({target:\"Array\",proto:!0,forced:!s||!u},{reduce:function(e){return i(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(e,t,r){var n=r(127),i=r(27),o=r(41),a=r(26),s=function(e){return function(t,r,s,u){n(r);var l=i(t),c=o(l),h=a(l.length),p=e?h-1:0,f=e?-1:1;if(s<2)for(;;){if(p in c){u=c[p],p+=f;break}if(p+=f,e?p<0:h<=p)throw TypeError(\"Reduce of empty array with no initial value\")}for(;e?p>=0:h>p;p+=f)p in c&&(u=r(u,c[p],p,l));return u}};e.exports={left:s(!1),right:s(!0)}},function(e,t,r){\"use strict\";var n=r(4),i=r(36).some,o=r(48),a=r(28),s=o(\"some\"),u=a(\"some\");n({target:\"Array\",proto:!0,forced:!s||!u},{some:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,r){\"use strict\";var n=r(90),i=r(135);e.exports=n?{}.toString:function(){return\"[object \"+i(this)+\"]\"}},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,r){var n=r(8);e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(e,t,r){var n=r(5),i=r(49),o=n(\"iterator\"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||a[o]===e)}},function(e,t,r){var n=r(135),i=r(49),o=r(5)(\"iterator\");e.exports=function(e){if(null!=e)return e[o]||e[\"@@iterator\"]||i[n(e)]}},function(e,t,r){var n=r(18);e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){var o=e.return;throw void 0!==o&&n(o.call(e)),t}}},function(e,t,r){var n=r(5)(\"iterator\"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[n]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var o={};o[n]=function(){return{next:function(){return{done:r=!0}}}},e(o)}catch(e){}return r}},function(e,t,r){var n=r(13),i=r(133);e.exports=function(e,t,r){var o,a;return i&&\"function\"==typeof(o=t.constructor)&&o!==r&&n(a=o.prototype)&&a!==r.prototype&&i(e,a),e}},function(e,t,r){var n=r(25);e.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},function(e,t,r){\"use strict\";var n=r(46),i=r(15),o=r(5),a=r(16),s=o(\"species\");e.exports=function(e){var t=n(e),r=i.f;a&&t&&!t[s]&&r(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,r){\"use strict\";var n=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},i=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")};Object.defineProperty(t,\"__esModule\",{value:!0});var o=function(){function e(e){void 0===e&&(e=1e3),this._items=new Set,this._limit=e}return e.prototype.add=function(e){if(this._items.add(e),this._items.size>this._limit){var t=this._items.values().next();t.done||this._items.delete(t.value)}return this},e.prototype.delete=function(e){return this._items.delete(e)},e.prototype.has=function(e){return this._items.has(e)},e.prototype.clear=function(){this._items.clear()},Object.defineProperty(e.prototype,\"size\",{get:function(){return this._items.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e,t){var r=this;this._items.forEach((function(n){return e.call(t,n,n,r)}))},e.prototype.keys=function(){return n(this,(function(e){switch(e.label){case 0:return[5,i(this._items.keys())];case 1:return e.sent(),[2]}}))},e.prototype.values=function(){return n(this,(function(e){switch(e.label){case 0:return[5,i(this._items.values())];case 1:return e.sent(),[2]}}))},e.prototype.entries=function(){return n(this,(function(e){switch(e.label){case 0:return[5,i(this._items.entries())];case 1:return e.sent(),[2]}}))},e.prototype[Symbol.iterator]=function(){return n(this,(function(e){switch(e.label){case 0:return[5,i(this._items)];case 1:return e.sent(),[2]}}))},Object.defineProperty(e.prototype,Symbol.toStringTag,{get:function(){return\"FixedSizeSet\"},enumerable:!0,configurable:!0}),e}();t.FixedSizeSet=o},function(e,t,r){\"use strict\";var n=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},i=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")};Object.defineProperty(t,\"__esModule\",{value:!0});var o=function(){function e(e){void 0===e&&(e=1e3),this._items=new Map,this._limit=e}return e.prototype.get=function(e){return this._items.get(e)},e.prototype.set=function(e,t){if(this._items.set(e,t),this._items.size>this._limit){var r=this._items.keys().next();r.done||this._items.delete(r.value)}},e.prototype.delete=function(e){return this._items.delete(e)},e.prototype.has=function(e){return this._items.has(e)},e.prototype.clear=function(){this._items.clear()},Object.defineProperty(e.prototype,\"size\",{get:function(){return this._items.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e,t){this._items.forEach((function(r,n){return e.call(t,n,r)}))},e.prototype.keys=function(){return n(this,(function(e){switch(e.label){case 0:return[5,i(this._items.keys())];case 1:return e.sent(),[2]}}))},e.prototype.values=function(){return n(this,(function(e){switch(e.label){case 0:return[5,i(this._items.values())];case 1:return e.sent(),[2]}}))},e.prototype.entries=function(){return n(this,(function(e){switch(e.label){case 0:return[5,i(this._items.entries())];case 1:return e.sent(),[2]}}))},e.prototype[Symbol.iterator]=function(){return n(this,(function(e){switch(e.label){case 0:return[5,i(this._items)];case 1:return e.sent(),[2]}}))},Object.defineProperty(e.prototype,Symbol.toStringTag,{get:function(){return\"ObjectCache\"},enumerable:!0,configurable:!0}),e}();t.ObjectCache=o},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e){void 0===e&&(e=1e3),this._items=new Map,this._limit=e}return e.prototype.check=function(e,t){if(this._items.get(e)===t)return!0;if(this._items.get(t)===e)return!1;var r=Math.random()<.5;if(r?this._items.set(e,t):this._items.set(t,e),this._items.size>this._limit){var n=this._items.keys().next();n.done||this._items.delete(n.value)}return r},e}();t.CompareCache=n},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e){this._initialized=!1,this._value=void 0,this._initFunc=e}return Object.defineProperty(e.prototype,\"value\",{get:function(){return this._initialized||(this._value=this._initFunc(),this._initialized=!0),this._value},enumerable:!0,configurable:!0}),e}();t.Lazy=n},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e){this._pointer=0,this._chars=Array.from(e),this._length=this._chars.length}return Object.defineProperty(e.prototype,\"eof\",{get:function(){return this._pointer>=this._length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"length\",{get:function(){return this._length},enumerable:!0,configurable:!0}),e.prototype.codePoint=function(){if(void 0===this._codePoint)if(this.eof)this._codePoint=-1;else{var e=this._chars[this._pointer].codePointAt(0);this._codePoint=void 0!==e?e:-1}return this._codePoint},e.prototype.c=function(){return void 0===this._c&&(this._c=this.eof?\"\":this._chars[this._pointer]),this._c},e.prototype.remaining=function(){return void 0===this._remaining&&(this._remaining=this.eof?\"\":this._chars.slice(this._pointer+1).join(\"\")),this._remaining},e.prototype.substring=function(){return void 0===this._substring&&(this._substring=this.eof?\"\":this._chars.slice(this._pointer).join(\"\")),this._substring},Object.defineProperty(e.prototype,\"pointer\",{get:function(){return this._pointer},set:function(e){e!==this._pointer&&(this._pointer=e,this._codePoint=void 0,this._c=void 0,this._remaining=void 0,this._substring=void 0)},enumerable:!0,configurable:!0}),e}();t.StringWalker=n},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(218);t.MapWriter=n.MapWriter;var i=r(258);t.XMLWriter=i.XMLWriter;var o=r(67);t.ObjectWriter=o.ObjectWriter;var a=r(260);t.JSONWriter=a.JSONWriter;var s=r(261);t.YAMLWriter=s.YAMLWriter},function(e,t,r){\"use strict\";r(19),r(219),r(20),r(22),r(23);var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(1),a=r(67),s=function(e){function t(t,r){var n=e.call(this,t)||this;return n._writerOptions=o.applyDefaults(r,{format:\"map\",wellFormed:!1,group:!1,verbose:!1}),n}return i(t,e),t.prototype.serialize=function(e){var t=o.applyDefaults(this._writerOptions,{format:\"object\",wellFormed:!1,verbose:!1}),r=new a.ObjectWriter(this._builderOptions,t).serialize(e);return this._convertObject(r)},t.prototype._convertObject=function(e){if(o.isArray(e)){for(var t=0;t<e.length;t++)e[t]=this._convertObject(e[t]);return e}if(o.isObject(e)){var r=new Map;for(var n in e)r.set(n,this._convertObject(e[n]));return r}return e},t}(r(50).BaseWriter);t.MapWriter=s},function(e,t,r){\"use strict\";var n=r(139),i=r(143);e.exports=n(\"Map\",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)},function(e,t,r){\"use strict\";var n=r(4),i=r(8),o=r(59),a=r(13),s=r(27),u=r(26),l=r(134),c=r(128),h=r(63),p=r(5),f=r(129),d=p(\"isConcatSpreadable\"),m=f>=51||!i((function(){var e=[];return e[d]=!1,e.concat()[0]!==e})),y=h(\"concat\"),v=function(e){if(!a(e))return!1;var t=e[d];return void 0!==t?!!t:o(e)};n({target:\"Array\",proto:!0,forced:!m||!y},{concat:function(e){var t,r,n,i,o,a=s(this),h=c(a,0),p=0;for(t=-1,n=arguments.length;t<n;t++)if(v(o=-1===t?a:arguments[t])){if(p+(i=u(o.length))>9007199254740991)throw TypeError(\"Maximum allowed index exceeded\");for(r=0;r<i;r++,p++)r in o&&l(h,p,o[r])}else{if(p>=9007199254740991)throw TypeError(\"Maximum allowed index exceeded\");l(h,p++,o)}return h.length=p,h}})},function(e,t,r){\"use strict\";var n=r(8);function i(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=n((function(){var e=i(\"a\",\"y\");return e.lastIndex=2,null!=e.exec(\"abcd\")})),t.BROKEN_CARET=n((function(){var e=i(\"^r\",\"gy\");return e.lastIndex=2,null!=e.exec(\"str\")}))},function(e,t,r){var n=r(223);e.exports=function(e){if(n(e))throw TypeError(\"The method doesn't accept regular expressions\");return e}},function(e,t,r){var n=r(13),i=r(42),o=r(5)(\"match\");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[o])?!!t:\"RegExp\"==i(e))}},function(e,t,r){var n=r(5)(\"match\");e.exports=function(e){var t=/./;try{\"/./\"[e](t)}catch(r){try{return t[n]=!1,\"/./\"[e](t)}catch(e){}}return!1}},function(e,t,r){\"use strict\";r(68);var n=r(25),i=r(8),o=r(5),a=r(93),s=r(21),u=o(\"species\"),l=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:\"7\"},e},\"7\"!==\"\".replace(e,\"$<a>\")})),c=\"$0\"===\"a\".replace(/./,\"$0\"),h=o(\"replace\"),p=!!/./[h]&&\"\"===/./[h](\"a\",\"$0\"),f=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r=\"ab\".split(e);return 2!==r.length||\"a\"!==r[0]||\"b\"!==r[1]}));e.exports=function(e,t,r,h){var d=o(e),m=!i((function(){var t={};return t[d]=function(){return 7},7!=\"\"[e](t)})),y=m&&!i((function(){var t=!1,r=/a/;return\"split\"===e&&((r={}).constructor={},r.constructor[u]=function(){return r},r.flags=\"\",r[d]=/./[d]),r.exec=function(){return t=!0,null},r[d](\"\"),!t}));if(!m||!y||\"replace\"===e&&(!l||!c||p)||\"split\"===e&&!f){var v=/./[d],_=r(d,\"\"[e],(function(e,t,r,n,i){return t.exec===a?m&&!i?{done:!0,value:v.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}}),{REPLACE_KEEPS_$0:c,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:p}),g=_[0],b=_[1];n(String.prototype,e,g),n(RegExp.prototype,d,2==t?function(e,t){return b.call(e,this,t)}:function(e){return b.call(e,this)})}h&&s(RegExp.prototype[d],\"sham\",!0)}},function(e,t,r){\"use strict\";var n=r(137).charAt;e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},function(e,t,r){var n=r(42),i=r(93);e.exports=function(e,t){var r=e.exec;if(\"function\"==typeof r){var o=r.call(e,t);if(\"object\"!=typeof o)throw TypeError(\"RegExp exec method returned something other than an Object or null\");return o}if(\"RegExp\"!==n(e))throw TypeError(\"RegExp#exec called on incompatible receiver\");return i.call(e,t)}},function(e,t,r){\"use strict\";(function(e){Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(96);t.forgivingBase64Encode=function(t){return e.from(t).toString(\"base64\")},t.forgivingBase64Decode=function(t){return\"\"===t?\"\":((t=t.replace(n.ASCIIWhiteSpace,\"\")).length%4==0&&(t.endsWith(\"==\")?t=t.substr(0,t.length-2):t.endsWith(\"=\")&&(t=t.substr(0,t.length-1))),t.length%4==1?null:/[0-9A-Za-z+/]/.test(t)?e.from(t,\"base64\").toString(\"utf8\"):null)}}).call(this,r(145).Buffer)},function(e,t,r){\"use strict\";t.byteLength=function(e){var t=l(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,n=l(e),a=n[0],s=n[1],u=new o(function(e,t,r){return 3*(t+r)/4-r}(0,a,s)),c=0,h=s>0?a-4:a;for(r=0;r<h;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;2===s&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,u[c++]=255&t);1===s&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t);return u},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],a=0,s=r-i;a<s;a+=16383)o.push(c(e,a,a+16383>s?s:a+16383));1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+\"==\")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+\"=\"));return o.join(\"\")};for(var n=[],i=[],o=\"undefined\"!=typeof Uint8Array?Uint8Array:Array,a=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",s=0,u=a.length;s<u;++s)n[s]=a[s],i[a.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw new Error(\"Invalid string. Length must be a multiple of 4\");var r=e.indexOf(\"=\");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,r){for(var i,o,a=[],s=t;s<r;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join(\"\")}i[\"-\".charCodeAt(0)]=62,i[\"_\".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,l=u>>1,c=-7,h=r?i-1:0,p=r?-1:1,f=e[t+h];for(h+=p,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+e[t+h],h+=p,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+e[t+h],h+=p,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,n),o-=l}return(f?-1:1)*a*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,h=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,d=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+h>=1?p/u:p*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(t*u-1)*Math.pow(2,i),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;e[r+f]=255&s,f+=d,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[r+f]=255&a,f+=d,a/=256,l-=8);e[r+f-d]|=128*m}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return\"[object Array]\"==r.call(e)}},function(e,t,r){\"use strict\";var n=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")};Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(1);function o(e){var t,r;if(null===e||i.isString(e)||i.isNumber(e))return e;if(i.isArray(e)){var a=new Array;try{for(var s=n(e),u=s.next();!u.done;u=s.next()){var l=u.value;a.push(o(l))}}catch(e){t={error:e}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return a}if(i.isObject(e)){a=new Map;for(var c in e)if(e.hasOwnProperty(c)){var h=e[c];a.set(c,o(h))}return a}return e}t.parseJSONFromBytes=function(e){var t=i.utf8Decode(e);return JSON.parse.call(void 0,t)},t.serializeJSONToBytes=function(e){var t=JSON.stringify.call(void 0,e);return i.utf8Encode(t)},t.parseJSONIntoInfraValues=function(e){return o(JSON.parse.call(void 0,e))},t.convertAJSONDerivedJavaScriptValueToAnInfraValue=o},function(e,t,r){\"use strict\";var n=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},i=this&&this.__read||function(e,t){var r=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e},a=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")};Object.defineProperty(t,\"__esModule\",{value:!0});var s=r(1);t.append=function(e,t){e.push(t)},t.extend=function(e,t){e.push.apply(e,o(t))},t.prepend=function(e,t){e.unshift(t)},t.replace=function(e,t,r){var n,i,o=0;try{for(var u=a(e),l=u.next();!l.done;l=u.next()){var c=l.value;if(s.isFunction(t))t.call(null,c)&&(e[o]=r);else if(c===t)return void(e[o]=r);o++}}catch(e){n={error:e}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}},t.insert=function(e,t,r){e.splice(r,0,t)},t.remove=function(e,t){for(var r=e.length;r--;){var n=e[r];if(s.isFunction(t))t.call(null,n)&&e.splice(r,1);else if(n===t)return void e.splice(r,1)}},t.empty=function(e){e.length=0},t.contains=function(e,t){var r,n;try{for(var i=a(e),o=i.next();!o.done;o=i.next()){var u=o.value;if(s.isFunction(t)){if(t.call(null,u))return!0}else if(u===t)return!0}}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return!1},t.size=function(e,t){var r,n;if(void 0===t)return e.length;var i=0;try{for(var o=a(e),s=o.next();!s.done;s=o.next()){var u=s.value;t.call(null,u)&&i++}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i},t.isEmpty=function(e){return 0===e.length},t.forEach=function(e,t){var r,i,o,s,u,l;return n(this,(function(n){switch(n.label){case 0:return void 0!==t?[3,2]:[5,a(e)];case 1:return n.sent(),[3,9];case 2:n.trys.push([2,7,8,9]),r=a(e),i=r.next(),n.label=3;case 3:return i.done?[3,6]:(o=i.value,t.call(null,o)?[4,o]:[3,5]);case 4:n.sent(),n.label=5;case 5:return i=r.next(),[3,3];case 6:return[3,9];case 7:return s=n.sent(),u={error:s},[3,9];case 8:try{i&&!i.done&&(l=r.return)&&l.call(r)}finally{if(u)throw u.error}return[7];case 9:return[2]}}))},t.clone=function(e){return new(Array.bind.apply(Array,o([void 0],e)))},t.sortInAscendingOrder=function(e,t){return e.sort((function(e,r){return t.call(null,e,r)?-1:1}))},t.sortInDescendingOrder=function(e,t){return e.sort((function(e,r){return t.call(null,e,r)?1:-1}))}},function(e,t,r){\"use strict\";var n=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},i=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},o=this&&this.__read||function(e,t){var r=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e};Object.defineProperty(t,\"__esModule\",{value:!0});var s=r(1);t.get=function(e,t){return e.get(t)},t.set=function(e,t,r){e.set(t,r)},t.remove=function(e,t){var r,n,o,a;if(s.isFunction(t)){var u=[];try{for(var l=i(e),c=l.next();!c.done;c=l.next()){var h=c.value;t.call(null,h)&&u.push(h[0])}}catch(e){r={error:e}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}try{for(var p=i(u),f=p.next();!f.done;f=p.next()){var d=f.value;e.delete(d)}}catch(e){o={error:e}}finally{try{f&&!f.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}}else e.delete(t)},t.contains=function(e,t){var r,n;if(s.isFunction(t)){try{for(var o=i(e),a=o.next();!a.done;a=o.next()){var u=a.value;if(t.call(null,u))return!0}}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!1}return e.has(t)},t.keys=function(e){return new Set(e.keys())},t.values=function(e){return a(e.values())},t.size=function(e,t){var r,n;if(void 0===t)return e.size;var o=0;try{for(var a=i(e),s=a.next();!s.done;s=a.next()){var u=s.value;t.call(null,u)&&o++}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o},t.isEmpty=function(e){return 0===e.size},t.forEach=function(e,t){var r,o,a,s,u,l;return n(this,(function(n){switch(n.label){case 0:return void 0!==t?[3,2]:[5,i(e)];case 1:return n.sent(),[3,9];case 2:n.trys.push([2,7,8,9]),r=i(e),o=r.next(),n.label=3;case 3:return o.done?[3,6]:(a=o.value,t.call(null,a)?[4,a]:[3,5]);case 4:n.sent(),n.label=5;case 5:return o=r.next(),[3,3];case 6:return[3,9];case 7:return s=n.sent(),u={error:s},[3,9];case 8:try{o&&!o.done&&(l=r.return)&&l.call(r)}finally{if(u)throw u.error}return[7];case 9:return[2]}}))},t.clone=function(e){return new Map(e)},t.sortInAscendingOrder=function(e,t){var r=new(Array.bind.apply(Array,a([void 0],e)));return r.sort((function(e,r){return t.call(null,e,r)?-1:1})),new Map(r)},t.sortInDescendingOrder=function(e,t){var r=new(Array.bind.apply(Array,a([void 0],e)));return r.sort((function(e,r){return t.call(null,e,r)?1:-1})),new Map(r)}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.HTML=\"http://www.w3.org/1999/xhtml\",t.XML=\"http://www.w3.org/XML/1998/namespace\",t.XMLNS=\"http://www.w3.org/2000/xmlns/\",t.MathML=\"http://www.w3.org/1998/Math/MathML\",t.SVG=\"http://www.w3.org/2000/svg\",t.XLink=\"http://www.w3.org/1999/xlink\"},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.enqueue=function(e,t){e.push(t)},t.dequeue=function(e){return e.shift()||null}},function(e,t,r){\"use strict\";var n=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},i=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},o=this&&this.__read||function(e,t){var r=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e};Object.defineProperty(t,\"__esModule\",{value:!0});var s=r(1);function u(e,t){var r,n;try{for(var o=i(e),a=o.next();!a.done;a=o.next()){var s=a.value;if(!t.has(s))return!1}}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!0}t.append=function(e,t){e.add(t)},t.extend=function(e,t){t.forEach(e.add,e)},t.prepend=function(e,t){var r=new Set(e);e.clear(),e.add(t),r.forEach(e.add,e)},t.replace=function(e,t,r){var n,o,a=new Set;try{for(var u=i(e),l=u.next();!l.done;l=u.next()){var c=l.value;s.isFunction(t)?t.call(null,c)?a.add(r):a.add(c):c===t?a.add(r):a.add(c)}}catch(e){n={error:e}}finally{try{l&&!l.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}e.clear(),a.forEach(e.add,e)},t.insert=function(e,t,r){var n,o,a=new Set,s=0;try{for(var u=i(e),l=u.next();!l.done;l=u.next()){var c=l.value;s===r&&a.add(t),a.add(c),s++}}catch(e){n={error:e}}finally{try{l&&!l.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}e.clear(),a.forEach(e.add,e)},t.remove=function(e,t){var r,n,o,a;if(s.isFunction(t)){var u=[];try{for(var l=i(e),c=l.next();!c.done;c=l.next()){var h=c.value;t.call(null,h)&&u.push(h)}}catch(e){r={error:e}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}try{for(var p=i(u),f=p.next();!f.done;f=p.next()){var d=f.value;e.delete(d)}}catch(e){o={error:e}}finally{try{f&&!f.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}}else e.delete(t)},t.empty=function(e){e.clear()},t.contains=function(e,t){var r,n;if(!s.isFunction(t))return e.has(t);try{for(var o=i(e),a=o.next();!a.done;a=o.next()){var u=a.value;if(t.call(null,u))return!0}}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!1},t.size=function(e,t){var r,n;if(void 0===t)return e.size;var o=0;try{for(var a=i(e),s=a.next();!s.done;s=a.next()){var u=s.value;t.call(null,u)&&o++}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o},t.isEmpty=function(e){return 0===e.size},t.forEach=function(e,t){var r,o,a,s,u,l;return n(this,(function(n){switch(n.label){case 0:return void 0!==t?[3,2]:[5,i(e)];case 1:return n.sent(),[3,9];case 2:n.trys.push([2,7,8,9]),r=i(e),o=r.next(),n.label=3;case 3:return o.done?[3,6]:(a=o.value,t.call(null,a)?[4,a]:[3,5]);case 4:n.sent(),n.label=5;case 5:return o=r.next(),[3,3];case 6:return[3,9];case 7:return s=n.sent(),u={error:s},[3,9];case 8:try{o&&!o.done&&(l=r.return)&&l.call(r)}finally{if(u)throw u.error}return[7];case 9:return[2]}}))},t.clone=function(e){return new Set(e)},t.sortInAscendingOrder=function(e,t){var r=new(Array.bind.apply(Array,a([void 0],e)));return r.sort((function(e,r){return t.call(null,e,r)?-1:1})),new Set(r)},t.sortInDescendingOrder=function(e,t){var r=new(Array.bind.apply(Array,a([void 0],e)));return r.sort((function(e,r){return t.call(null,e,r)?1:-1})),new Set(r)},t.isSubsetOf=u,t.isSupersetOf=function(e,t){return u(t,e)},t.intersection=function(e,t){var r,n,o=new Set;try{for(var a=i(e),s=a.next();!s.done;s=a.next()){var u=s.value;t.has(u)&&o.add(u)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o},t.union=function(e,t){var r=new Set(e);return t.forEach(r.add,r),r},t.range=function(e,t){for(var r=new Set,n=e;n<=t;n++)r.add(n);return r}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.push=function(e,t){e.push(t)},t.pop=function(e){return e.pop()||null}},function(e,t,r){\"use strict\";var n=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")};Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(96),o=r(147),a=r(146),s=r(1);function u(e,t){for(var r=0;;){var n=r<e.length?e.charCodeAt(r):null,i=r<t.length?t.charCodeAt(r):null;if(null===n)return!0;if(n!==i)return!1;r++}}function l(e){var t,r,i=Array.from(e),o=new Uint8Array(i.length),a=0;try{for(var s=n(e),u=s.next();!u.done;u=s.next()){var l=u.value.codePointAt(0);console.assert(void 0!==l&&l<=255,\"isomorphicEncode requires string bytes to be less than or equal to 0x00FF.\"),void 0!==l&&l<=255&&(o[a++]=l)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return o}function c(e){return/^[\\u0000-\\u007F]*$/.test(e)}function h(e){var t,r,i=\"\";try{for(var o=n(e),a=o.next();!a.done;a=o.next()){var s=a.value,u=s.codePointAt(0);i+=void 0!==u&&u>=65&&u<=90?String.fromCodePoint(u+32):s}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i}function p(e){return e.replace(/^[\\t\\n\\f\\r ]+/,\"\").replace(/[\\t\\n\\f\\r ]+$/,\"\")}function f(e,t,r){if(!s.isArray(t))return f(e,Array.from(t),r);for(var n=\"\";r.position<t.length&&e.call(null,t[r.position]);)n+=t[r.position],r.position++;return n}function d(e,t){f((function(e){return i.ASCIIWhiteSpace.test(e)}),e,t)}t.isCodeUnitPrefix=u,t.isCodeUnitLessThan=function(e,t){if(u(t,e))return!1;if(u(e,t))return!0;for(var r=0;r<Math.min(e.length,t.length);r++){var n=e.charCodeAt(r),i=t.charCodeAt(r);if(n!==i)return n<i}return!1},t.isomorphicEncode=l,t.isASCIIString=c,t.asciiLowercase=h,t.asciiUppercase=function(e){var t,r,i=\"\";try{for(var o=n(e),a=o.next();!a.done;a=o.next()){var s=a.value,u=s.codePointAt(0);i+=void 0!==u&&u>=97&&u<=122?String.fromCodePoint(u-32):s}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},t.asciiCaseInsensitiveMatch=function(e,t){return h(e)===h(t)},t.asciiEncode=function(e){return console.assert(c(e),\"asciiEncode requires an ASCII string.\"),l(e)},t.asciiDecode=function(e){var t,r;try{for(var i=n(e),s=i.next();!s.done;s=i.next()){var u=s.value;console.assert(a.isASCIIByte(u),\"asciiDecode requires an ASCII byte sequence.\")}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return o.isomorphicDecode(e)},t.stripNewlines=function(e){return e.replace(/[\\n\\r]/g,\"\")},t.normalizeNewlines=function(e){return e.replace(/\\r\\n/g,\"\\n\").replace(/\\r/g,\"\\n\")},t.stripLeadingAndTrailingASCIIWhitespace=p,t.stripAndCollapseASCIIWhitespace=function(e){return p(e.replace(/[\\t\\n\\f\\r ]{2,}/g,\" \"))},t.collectASequenceOfCodePoints=f,t.skipASCIIWhitespace=d,t.strictlySplit=function e(t,r){if(!s.isArray(t))return e(Array.from(t),r);var n={position:0},i=[],o=f((function(e){return r!==e}),t,n);for(i.push(o);n.position<t.length;)console.assert(t[n.position]===r,\"strictlySplit found no delimiter in input string.\"),n.position++,o=f((function(e){return r!==e}),t,n),i.push(o);return i},t.splitAStringOnASCIIWhitespace=function e(t){if(!s.isArray(t))return e(Array.from(t));var r={position:0},n=[];for(d(t,r);r.position<t.length;){var o=f((function(e){return!i.ASCIIWhiteSpace.test(e)}),t,r);n.push(o),d(t,r)}return n},t.splitAStringOnCommas=function e(t){if(!s.isArray(t))return e(Array.from(t));for(var r={position:0},n=[];r.position<t.length;){var i=f((function(e){return\",\"!==e}),t,r);n.push(p(i)),r.position<t.length&&(console.assert(\",\"===t[r.position],\"splitAStringOnCommas found no delimiter in input string.\"),r.position++)}return n},t.concatenate=function(e,t){return void 0===t&&(t=\"\"),0===e.length?\"\":e.join(t)}},function(e,t,r){\"use strict\";var n=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")};Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(97);t.abort_add=function(e,t){t._abortedFlag||t._abortAlgorithms.add(e)},t.abort_remove=function(e,t){t._abortAlgorithms.delete(e)},t.abort_signalAbort=function(e){var t,r;if(!e._abortedFlag){e._abortedFlag=!0;try{for(var o=n(e._abortAlgorithms),a=o.next();!a.done;a=o.next()){a.value.call(e)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}e._abortAlgorithms.clear(),i.event_fireAnEvent(\"abort\",e)}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(150),i=function(){function e(){}return e.asNode=function(e){if(n.Guard.isNode(e))return e;throw new Error(\"Invalid object. Node expected.\")},e}();t.Cast=i},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(){}return Object.defineProperty(e.prototype,\"size\",{get:function(){return 0},enumerable:!0,configurable:!0}),e.prototype.add=function(e){throw new Error(\"Cannot add to an empty set.\")},e.prototype.clear=function(){},e.prototype.delete=function(e){return!1},e.prototype.forEach=function(e,t){},e.prototype.has=function(e){return!1},e.prototype[Symbol.iterator]=function(){return new i},e.prototype.entries=function(){return new i},e.prototype.keys=function(){return new i},e.prototype.values=function(){return new i},Object.defineProperty(e.prototype,Symbol.toStringTag,{get:function(){return\"EmptySet\"},enumerable:!0,configurable:!0}),e}();t.EmptySet=n;var i=function(){function e(){}return e.prototype[Symbol.iterator]=function(){return this},e.prototype.next=function(){return{done:!0,value:null}},e}()},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){e[e.SchemeStart=0]=\"SchemeStart\",e[e.Scheme=1]=\"Scheme\",e[e.NoScheme=2]=\"NoScheme\",e[e.SpecialRelativeOrAuthority=3]=\"SpecialRelativeOrAuthority\",e[e.PathOrAuthority=4]=\"PathOrAuthority\",e[e.Relative=5]=\"Relative\",e[e.RelativeSlash=6]=\"RelativeSlash\",e[e.SpecialAuthoritySlashes=7]=\"SpecialAuthoritySlashes\",e[e.SpecialAuthorityIgnoreSlashes=8]=\"SpecialAuthorityIgnoreSlashes\",e[e.Authority=9]=\"Authority\",e[e.Host=10]=\"Host\",e[e.Hostname=11]=\"Hostname\",e[e.Port=12]=\"Port\",e[e.File=13]=\"File\",e[e.FileSlash=14]=\"FileSlash\",e[e.FileHost=15]=\"FileHost\",e[e.PathStart=16]=\"PathStart\",e[e.Path=17]=\"Path\",e[e.CannotBeABaseURLPath=18]=\"CannotBeABaseURLPath\",e[e.Query=19]=\"Query\",e[e.Fragment=20]=\"Fragment\"}(t.ParserState||(t.ParserState={})),t.OpaqueOrigin=[\"\",\"\",null,null]},function(e,t,r){\"use strict\";var n=r(245),i=r(247);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=g,t.resolve=function(e,t){return g(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?g(e,!1,!0).resolveObject(t):t},t.format=function(e){i.isString(e)&&(e=g(e));return e instanceof o?e.format():o.prototype.format.call(e)},t.Url=o;var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,u=/^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,l=[\"{\",\"}\",\"|\",\"\\\\\",\"^\",\"`\"].concat([\"<\",\">\",'\"',\"`\",\" \",\"\\r\",\"\\n\",\"\\t\"]),c=[\"'\"].concat(l),h=[\"%\",\"/\",\"?\",\";\",\"#\"].concat(c),p=[\"/\",\"?\",\"#\"],f=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,\"javascript:\":!0},y={javascript:!0,\"javascript:\":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,\"http:\":!0,\"https:\":!0,\"ftp:\":!0,\"gopher:\":!0,\"file:\":!0},_=r(248);function g(e,t,r){if(e&&i.isObject(e)&&e instanceof o)return e;var n=new o;return n.parse(e,t,r),n}o.prototype.parse=function(e,t,r){if(!i.isString(e))throw new TypeError(\"Parameter 'url' must be a string, not \"+typeof e);var o=e.indexOf(\"?\"),s=-1!==o&&o<e.indexOf(\"#\")?\"?\":\"#\",l=e.split(s);l[0]=l[0].replace(/\\\\/g,\"/\");var g=e=l.join(s);if(g=g.trim(),!r&&1===e.split(\"#\").length){var b=u.exec(g);if(b)return this.path=g,this.href=g,this.pathname=b[1],b[2]?(this.search=b[2],this.query=t?_.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search=\"\",this.query={}),this}var x=a.exec(g);if(x){var w=(x=x[0]).toLowerCase();this.protocol=w,g=g.substr(x.length)}if(r||x||g.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)){var E=\"//\"===g.substr(0,2);!E||x&&y[x]||(g=g.substr(2),this.slashes=!0)}if(!y[x]&&(E||x&&!v[x])){for(var D,S,C=-1,A=0;A<p.length;A++){-1!==(N=g.indexOf(p[A]))&&(-1===C||N<C)&&(C=N)}-1!==(S=-1===C?g.lastIndexOf(\"@\"):g.lastIndexOf(\"@\",C))&&(D=g.slice(0,S),g=g.slice(S+1),this.auth=decodeURIComponent(D)),C=-1;for(A=0;A<h.length;A++){var N;-1!==(N=g.indexOf(h[A]))&&(-1===C||N<C)&&(C=N)}-1===C&&(C=g.length),this.host=g.slice(0,C),g=g.slice(C),this.parseHost(),this.hostname=this.hostname||\"\";var T=\"[\"===this.hostname[0]&&\"]\"===this.hostname[this.hostname.length-1];if(!T)for(var O=this.hostname.split(/\\./),F=(A=0,O.length);A<F;A++){var k=O[A];if(k&&!k.match(f)){for(var P=\"\",I=0,L=k.length;I<L;I++)k.charCodeAt(I)>127?P+=\"x\":P+=k[I];if(!P.match(f)){var M=O.slice(0,A),B=O.slice(A+1),j=k.match(d);j&&(M.push(j[1]),B.unshift(j[2])),B.length&&(g=\"/\"+B.join(\".\")+g),this.hostname=M.join(\".\");break}}}this.hostname.length>255?this.hostname=\"\":this.hostname=this.hostname.toLowerCase(),T||(this.hostname=n.toASCII(this.hostname));var R=this.port?\":\"+this.port:\"\",z=this.hostname||\"\";this.host=z+R,this.href+=this.host,T&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),\"/\"!==g[0]&&(g=\"/\"+g))}if(!m[w])for(A=0,F=c.length;A<F;A++){var U=c[A];if(-1!==g.indexOf(U)){var G=encodeURIComponent(U);G===U&&(G=escape(U)),g=g.split(U).join(G)}}var X=g.indexOf(\"#\");-1!==X&&(this.hash=g.substr(X),g=g.slice(0,X));var q=g.indexOf(\"?\");if(-1!==q?(this.search=g.substr(q),this.query=g.substr(q+1),t&&(this.query=_.parse(this.query)),g=g.slice(0,q)):t&&(this.search=\"\",this.query={}),g&&(this.pathname=g),v[w]&&this.hostname&&!this.pathname&&(this.pathname=\"/\"),this.pathname||this.search){R=this.pathname||\"\";var W=this.search||\"\";this.path=R+W}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||\"\";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,\":\"),e+=\"@\");var t=this.protocol||\"\",r=this.pathname||\"\",n=this.hash||\"\",o=!1,a=\"\";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(\":\")?this.hostname:\"[\"+this.hostname+\"]\"),this.port&&(o+=\":\"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=_.stringify(this.query));var s=this.search||a&&\"?\"+a||\"\";return t&&\":\"!==t.substr(-1)&&(t+=\":\"),this.slashes||(!t||v[t])&&!1!==o?(o=\"//\"+(o||\"\"),r&&\"/\"!==r.charAt(0)&&(r=\"/\"+r)):o||(o=\"\"),n&&\"#\"!==n.charAt(0)&&(n=\"#\"+n),s&&\"?\"!==s.charAt(0)&&(s=\"?\"+s),t+o+(r=r.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace(\"#\",\"%23\"))+n},o.prototype.resolve=function(e){return this.resolveObject(g(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(i.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var r=new o,n=Object.keys(this),a=0;a<n.length;a++){var s=n[a];r[s]=this[s]}if(r.hash=e.hash,\"\"===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),l=0;l<u.length;l++){var c=u[l];\"protocol\"!==c&&(r[c]=e[c])}return v[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname=\"/\"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!v[e.protocol]){for(var h=Object.keys(e),p=0;p<h.length;p++){var f=h[p];r[f]=e[f]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||y[e.protocol])r.pathname=e.pathname;else{for(var d=(e.pathname||\"\").split(\"/\");d.length&&!(e.host=d.shift()););e.host||(e.host=\"\"),e.hostname||(e.hostname=\"\"),\"\"!==d[0]&&d.unshift(\"\"),d.length<2&&d.unshift(\"\"),r.pathname=d.join(\"/\")}if(r.search=e.search,r.query=e.query,r.host=e.host||\"\",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var m=r.pathname||\"\",_=r.search||\"\";r.path=m+_}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var g=r.pathname&&\"/\"===r.pathname.charAt(0),b=e.host||e.pathname&&\"/\"===e.pathname.charAt(0),x=b||g||r.host&&e.pathname,w=x,E=r.pathname&&r.pathname.split(\"/\")||[],D=(d=e.pathname&&e.pathname.split(\"/\")||[],r.protocol&&!v[r.protocol]);if(D&&(r.hostname=\"\",r.port=null,r.host&&(\"\"===E[0]?E[0]=r.host:E.unshift(r.host)),r.host=\"\",e.protocol&&(e.hostname=null,e.port=null,e.host&&(\"\"===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),x=x&&(\"\"===d[0]||\"\"===E[0])),b)r.host=e.host||\"\"===e.host?e.host:r.host,r.hostname=e.hostname||\"\"===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,E=d;else if(d.length)E||(E=[]),E.pop(),E=E.concat(d),r.search=e.search,r.query=e.query;else if(!i.isNullOrUndefined(e.search)){if(D)r.hostname=r.host=E.shift(),(T=!!(r.host&&r.host.indexOf(\"@\")>0)&&r.host.split(\"@\"))&&(r.auth=T.shift(),r.host=r.hostname=T.shift());return r.search=e.search,r.query=e.query,i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:\"\")+(r.search?r.search:\"\")),r.href=r.format(),r}if(!E.length)return r.pathname=null,r.search?r.path=\"/\"+r.search:r.path=null,r.href=r.format(),r;for(var S=E.slice(-1)[0],C=(r.host||e.host||E.length>1)&&(\".\"===S||\"..\"===S)||\"\"===S,A=0,N=E.length;N>=0;N--)\".\"===(S=E[N])?E.splice(N,1):\"..\"===S?(E.splice(N,1),A++):A&&(E.splice(N,1),A--);if(!x&&!w)for(;A--;A)E.unshift(\"..\");!x||\"\"===E[0]||E[0]&&\"/\"===E[0].charAt(0)||E.unshift(\"\"),C&&\"/\"!==E.join(\"/\").substr(-1)&&E.push(\"\");var T,O=\"\"===E[0]||E[0]&&\"/\"===E[0].charAt(0);D&&(r.hostname=r.host=O?\"\":E.length?E.shift():\"\",(T=!!(r.host&&r.host.indexOf(\"@\")>0)&&r.host.split(\"@\"))&&(r.auth=T.shift(),r.host=r.hostname=T.shift()));return(x=x||r.host&&E.length)&&!O&&E.unshift(\"\"),E.length?r.pathname=E.join(\"/\"):(r.pathname=null,r.path=null),i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:\"\")+(r.search?r.search:\"\")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},o.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(\":\"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,r){(function(e,n){var i;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){t&&t.nodeType,e&&e.nodeType;var a=\"object\"==typeof n&&n;a.global!==a&&a.window!==a&&a.self;var s,u=2147483647,l=/^xn--/,c=/[^\\x20-\\x7E]/,h=/[\\x2E\\u3002\\uFF0E\\uFF61]/g,p={overflow:\"Overflow: input needs wider integers to process\",\"not-basic\":\"Illegal input >= 0x80 (not a basic code point)\",\"invalid-input\":\"Invalid input\"},f=Math.floor,d=String.fromCharCode;function m(e){throw new RangeError(p[e])}function y(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function v(e,t){var r=e.split(\"@\"),n=\"\";return r.length>1&&(n=r[0]+\"@\",e=r[1]),n+y((e=e.replace(h,\".\")).split(\".\"),t).join(\".\")}function _(e){for(var t,r,n=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}function g(e){return y(e,(function(e){var t=\"\";return e>65535&&(t+=d((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=d(e)})).join(\"\")}function b(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function x(e,t,r){var n=0;for(e=r?f(e/700):e>>1,e+=f(e/t);e>455;n+=36)e=f(e/35);return f(n+36*e/(e+38))}function w(e){var t,r,n,i,o,a,s,l,c,h,p,d=[],y=e.length,v=0,_=128,b=72;for((r=e.lastIndexOf(\"-\"))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&m(\"not-basic\"),d.push(e.charCodeAt(n));for(i=r>0?r+1:0;i<y;){for(o=v,a=1,s=36;i>=y&&m(\"invalid-input\"),((l=(p=e.charCodeAt(i++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:36)>=36||l>f((u-v)/a))&&m(\"overflow\"),v+=l*a,!(l<(c=s<=b?1:s>=b+26?26:s-b));s+=36)a>f(u/(h=36-c))&&m(\"overflow\"),a*=h;b=x(v-o,t=d.length+1,0==o),f(v/t)>u-_&&m(\"overflow\"),_+=f(v/t),v%=t,d.splice(v++,0,_)}return g(d)}function E(e){var t,r,n,i,o,a,s,l,c,h,p,y,v,g,w,E=[];for(y=(e=_(e)).length,t=128,r=0,o=72,a=0;a<y;++a)(p=e[a])<128&&E.push(d(p));for(n=i=E.length,i&&E.push(\"-\");n<y;){for(s=u,a=0;a<y;++a)(p=e[a])>=t&&p<s&&(s=p);for(s-t>f((u-r)/(v=n+1))&&m(\"overflow\"),r+=(s-t)*v,t=s,a=0;a<y;++a)if((p=e[a])<t&&++r>u&&m(\"overflow\"),p==t){for(l=r,c=36;!(l<(h=c<=o?1:c>=o+26?26:c-o));c+=36)w=l-h,g=36-h,E.push(d(b(h+w%g,0))),l=f(w/g);E.push(d(b(l,0))),o=x(r,v,n==i),r=0,++n}++r,++t}return E.join(\"\")}s={version:\"1.4.1\",ucs2:{decode:_,encode:g},decode:w,encode:E,toASCII:function(e){return v(e,(function(e){return c.test(e)?\"xn--\"+E(e):e}))},toUnicode:function(e){return v(e,(function(e){return l.test(e)?w(e.slice(4).toLowerCase()):e}))}},void 0===(i=function(){return s}.call(t,r,t,e))||(e.exports=i)}()}).call(this,r(246)(e),r(78))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,\"loaded\",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,\"id\",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){\"use strict\";e.exports={isString:function(e){return\"string\"==typeof e},isObject:function(e){return\"object\"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,r){\"use strict\";t.decode=t.parse=r(249),t.encode=t.stringify=r(250)},function(e,t,r){\"use strict\";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,o){t=t||\"&\",r=r||\"=\";var a={};if(\"string\"!=typeof e||0===e.length)return a;var s=/\\+/g;e=e.split(t);var u=1e3;o&&\"number\"==typeof o.maxKeys&&(u=o.maxKeys);var l=e.length;u>0&&l>u&&(l=u);for(var c=0;c<l;++c){var h,p,f,d,m=e[c].replace(s,\"%20\"),y=m.indexOf(r);y>=0?(h=m.substr(0,y),p=m.substr(y+1)):(h=m,p=\"\"),f=decodeURIComponent(h),d=decodeURIComponent(p),n(a,f)?i(a[f])?a[f].push(d):a[f]=[a[f],d]:a[f]=d}return a};var i=Array.isArray||function(e){return\"[object Array]\"===Object.prototype.toString.call(e)}},function(e,t,r){\"use strict\";var n=function(e){switch(typeof e){case\"string\":return e;case\"boolean\":return e?\"true\":\"false\";case\"number\":return isFinite(e)?e:\"\";default:return\"\"}};e.exports=function(e,t,r,s){return t=t||\"&\",r=r||\"=\",null===e&&(e=void 0),\"object\"==typeof e?o(a(e),(function(a){var s=encodeURIComponent(n(a))+r;return i(e[a])?o(e[a],(function(e){return s+encodeURIComponent(n(e))})).join(t):s+encodeURIComponent(n(e[a]))})).join(t):s?encodeURIComponent(n(s))+r+encodeURIComponent(n(e)):\"\"};var i=Array.isArray||function(e){return\"[object Array]\"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var a=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(52);t.attr_setAnExistingAttributeValue=function(e,t){null===e._element?e._value=t:n.element_change(e,e._element,t)}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(108),i=r(30),o=r(52);t.tokenList_validationSteps=function(e,t){if(!i.dom_hasSupportedTokens(e._attribute._localName))throw new TypeError(\"There are no supported tokens defined for attribute name: '\"+e._attribute._localName+\"'.\");return i.dom_getSupportedTokens(e._attribute._localName).has(t.toLowerCase())},t.tokenList_updateSteps=function(e){(e._element.hasAttribute(e._attribute._localName)||0!==e._tokenSet.size)&&o.element_setAnAttributeValue(e._element,e._attribute._localName,n.orderedSet_serialize(e._tokenSet))},t.tokenList_serializeSteps=function(e){return o.element_getAnAttributeValue(e._element,e._attribute._localName)}},function(e,t,r){\"use strict\";var n=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")};Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(1);function o(e){return i.isBoolean(e)?e:e.capture||!1}t.eventTarget_flatten=o,t.eventTarget_flattenMore=function(e){var t=o(e),r=!1,n=!1;return i.isBoolean(e)||(r=e.once||!1,n=e.passive||!1),[t,n,r]},t.eventTarget_addEventListener=function(e,t){if(null!==t.callback){for(var r=0;r<e._eventListenerList.length;r++){var n=e._eventListenerList[r];if(n.type===t.type&&n.callback.handleEvent===t.callback.handleEvent&&n.capture===t.capture)return}e._eventListenerList.push(t)}},t.eventTarget_removeEventListener=function(e,t,r){t.removed=!0,e._eventListenerList.splice(r,1)},t.eventTarget_removeAllEventListeners=function(e){var t,r;try{for(var i=n(e._eventListenerList),o=i.next();!o.done;o=i.next()){o.value.removed=!0}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}e._eventListenerList.length=0}},function(e,t,r){\"use strict\";var n=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")};Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(1),o=r(29);t.parentNode_convertNodesIntoANode=function(e,t){for(var r,a,s=null,u=0;u<e.length;u++){var l=e[u];if(i.isString(l)){var c=o.create_text(t,l);e[u]=c}}if(1===e.length)s=e[0];else{var h=s=o.create_documentFragment(t);try{for(var p=n(e),f=p.next();!f.done;f=p.next()){l=f.value;h.appendChild(l)}}catch(e){r={error:e}}finally{try{f&&!f.done&&(a=p.return)&&a.call(p)}finally{if(r)throw r.error}}}return s}},function(e,t,r){\"use strict\";var n=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},i=this&&this.__read||function(e,t){var r=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(t,\"__esModule\",{value:!0});var a=r(2),s=r(9),u=r(3),l=r(29),c=r(17),h=r(175),p=r(107),f=r(176),d=r(37),m=r(177);function y(e){return e._startNode===e._endNode&&e._startOffset===e._endOffset}function v(e){return c.tree_rootNode(e._startNode)}function _(e,t){return c.tree_rootNode(e)===v(t)&&h.boundaryPoint_position([e,0],t._start)===a.BoundaryPosition.After&&h.boundaryPoint_position([e,c.tree_nodeLength(e)],t._end)===a.BoundaryPosition.Before}function g(e,t){var r=c.tree_isAncestorOf(t._startNode,e,!0),n=c.tree_isAncestorOf(t._endNode,e,!0);return r&&!n||!r&&n}function b(e){var t,r,i,a,h,m,v=l.create_documentFragment(e._startNode._nodeDocument);if(y(e))return v;var x=e._startNode,w=e._startOffset,E=e._endNode,D=e._endOffset;if(x===E&&u.Guard.isCharacterDataNode(x))return(R=f.node_clone(x))._data=p.characterData_substringData(x,w,D-w),d.mutation_append(R,v),p.characterData_replaceData(x,w,D-w,\"\"),v;for(var S=x;!c.tree_isAncestorOf(E,S,!0);){if(null===S._parent)throw new Error(\"Parent node  is null.\");S=S._parent}var C=null;if(!c.tree_isAncestorOf(E,x,!0))try{for(var A=n(S._children),N=A.next();!N.done;N=A.next()){if(g(k=N.value,e)){C=k;break}}}catch(e){t={error:e}}finally{try{N&&!N.done&&(r=A.return)&&r.call(A)}finally{if(t)throw t.error}}var T=null;if(!c.tree_isAncestorOf(x,E,!0))for(var O=o(S._children),F=O.length-1;F>0;F--){var k;if(g(k=O[F],e)){T=k;break}}var P,I,L=[];try{for(var M=n(S._children),B=M.next();!B.done;B=M.next()){if(_(X=B.value,e)){if(u.Guard.isDocumentTypeNode(X))throw new s.HierarchyRequestError;L.push(X)}}}catch(e){i={error:e}}finally{try{B&&!B.done&&(a=M.return)&&a.call(M)}finally{if(i)throw i.error}}if(c.tree_isAncestorOf(E,x,!0))P=x,I=w;else{for(var j=x;null!==j._parent&&!c.tree_isAncestorOf(E,j._parent);)j=j._parent;if(null===j._parent)throw new Error(\"Parent node is null.\");P=j._parent,I=1+c.tree_index(j)}if(u.Guard.isCharacterDataNode(C))(R=f.node_clone(x))._data=p.characterData_substringData(x,w,c.tree_nodeLength(x)-w),d.mutation_append(R,v),p.characterData_replaceData(x,w,c.tree_nodeLength(x)-w,\"\");else if(null!==C){var R=f.node_clone(C);d.mutation_append(R,v);var z=b(l.create_range([x,w],[C,c.tree_nodeLength(C)]));d.mutation_append(z,R)}try{for(var U=n(L),G=U.next();!G.done;G=U.next()){var X=G.value;d.mutation_append(X,v)}}catch(e){h={error:e}}finally{try{G&&!G.done&&(m=U.return)&&m.call(U)}finally{if(h)throw h.error}}if(u.Guard.isCharacterDataNode(T))(R=f.node_clone(E))._data=p.characterData_substringData(E,0,D),d.mutation_append(R,v),p.characterData_replaceData(E,0,D,\"\");else if(null!==T){R=f.node_clone(T);d.mutation_append(R,v);z=b(l.create_range([T,0],[E,D]));d.mutation_append(z,R)}return e._start=[P,I],e._end=[P,I],v}t.range_collapsed=y,t.range_root=v,t.range_isContained=_,t.range_isPartiallyContained=g,t.range_setTheStart=function(e,t,r){if(u.Guard.isDocumentTypeNode(t))throw new s.InvalidNodeTypeError;if(r>c.tree_nodeLength(t))throw new s.IndexSizeError;var n=[t,r];v(e)===c.tree_rootNode(t)&&h.boundaryPoint_position(n,e._end)!==a.BoundaryPosition.After||(e._end=n),e._start=n},t.range_setTheEnd=function(e,t,r){if(u.Guard.isDocumentTypeNode(t))throw new s.InvalidNodeTypeError;if(r>c.tree_nodeLength(t))throw new s.IndexSizeError;var n=[t,r];v(e)===c.tree_rootNode(t)&&h.boundaryPoint_position(n,e._start)!==a.BoundaryPosition.Before||(e._start=n),e._end=n},t.range_select=function(e,t){var r=e._parent;if(null===r)throw new s.InvalidNodeTypeError;var n=c.tree_index(e);t._start=[r,n],t._end=[r,n+1]},t.range_extract=b,t.range_cloneTheContents=function e(t){var r,i,a,h,m,v,x=l.create_documentFragment(t._startNode._nodeDocument);if(y(t))return x;var w=t._startNode,E=t._startOffset,D=t._endNode,S=t._endOffset;w===D&&u.Guard.isCharacterDataNode(w)&&((B=f.node_clone(w))._data=p.characterData_substringData(w,E,S-E),d.mutation_append(B,x));for(var C=w;!c.tree_isAncestorOf(D,C,!0);){if(null===C._parent)throw new Error(\"Parent node  is null.\");C=C._parent}var A=null;if(!c.tree_isAncestorOf(D,w,!0))try{for(var N=n(C._children),T=N.next();!T.done;T=N.next()){if(g(P=T.value,t)){A=P;break}}}catch(e){r={error:e}}finally{try{T&&!T.done&&(i=N.return)&&i.call(N)}finally{if(r)throw r.error}}var O=null;if(!c.tree_isAncestorOf(w,D,!0))for(var F=o(C._children),k=F.length-1;k>0;k--){var P;if(g(P=F[k],t)){O=P;break}}var I=[];try{for(var L=n(C._children),M=L.next();!M.done;M=L.next()){if(_(U=M.value,t)){if(u.Guard.isDocumentTypeNode(U))throw new s.HierarchyRequestError;I.push(U)}}}catch(e){a={error:e}}finally{try{M&&!M.done&&(h=L.return)&&h.call(L)}finally{if(a)throw a.error}}if(u.Guard.isCharacterDataNode(A))(B=f.node_clone(w))._data=p.characterData_substringData(w,E,c.tree_nodeLength(w)-E),d.mutation_append(B,x);else if(null!==A){var B=f.node_clone(A);d.mutation_append(B,x);var j=e(l.create_range([w,E],[A,c.tree_nodeLength(A)]));d.mutation_append(j,B)}try{for(var R=n(I),z=R.next();!z.done;z=R.next()){var U=z.value,B=f.node_clone(U);d.mutation_append(B,x)}}catch(e){m={error:e}}finally{try{z&&!z.done&&(v=R.return)&&v.call(R)}finally{if(m)throw m.error}}if(u.Guard.isCharacterDataNode(O))(B=f.node_clone(D))._data=p.characterData_substringData(D,0,S),d.mutation_append(B,x);else if(null!==O){B=f.node_clone(O);x.append(B);j=b(l.create_range([O,0],[D,S]));d.mutation_append(j,B)}return x},t.range_insert=function(e,t){var r,i;if(u.Guard.isProcessingInstructionNode(t._startNode)||u.Guard.isCommentNode(t._startNode)||u.Guard.isTextNode(t._startNode)&&null===t._startNode._parent||t._startNode===e)throw new s.HierarchyRequestError;var o,a=null;if(u.Guard.isTextNode(t._startNode))a=t._startNode;else{var l=0;try{for(var h=n(t._startNode._children),p=h.next();!p.done;p=h.next()){var f=p.value;if(l===t._startOffset){a=f;break}l++}}catch(e){r={error:e}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}}if(null===a)o=t._startNode;else{if(null===a._parent)throw new Error(\"Parent node is null.\");o=a._parent}d.mutation_ensurePreInsertionValidity(e,o,a),u.Guard.isTextNode(t._startNode)&&(a=m.text_split(t._startNode,t._startOffset)),e===a&&(a=e._nextSibling),null!==e._parent&&d.mutation_remove(e,e._parent);var v=null===a?c.tree_nodeLength(o):c.tree_index(a);u.Guard.isDocumentFragmentNode(e)?v+=c.tree_nodeLength(e):v++,d.mutation_preInsert(e,o,a),y(t)&&(t._end=[o,v])},t.range_getContainedNodes=function(e){var t;return(t={})[Symbol.iterator]=function(){var t=e.commonAncestorContainer,r=c.tree_getFirstDescendantNode(t);return{next:function(){for(;r&&!_(r,e);)r=c.tree_getNextDescendantNode(t,r);if(null===r)return{done:!0,value:null};var n={done:!1,value:r};return r=c.tree_getNextDescendantNode(t,r),n}}},t},t.range_getPartiallyContainedNodes=function(e){var t;return(t={})[Symbol.iterator]=function(){var t=e.commonAncestorContainer,r=c.tree_getFirstDescendantNode(t);return{next:function(){for(;r&&!g(r,e);)r=c.tree_getNextDescendantNode(t,r);if(null===r)return{done:!0,value:null};var n={done:!1,value:r};return r=c.tree_getNextDescendantNode(t,r),n}}},t}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(9);t.selectors_scopeMatchASelectorsString=function(e,t){throw new n.NotSupportedError}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(2),i=r(105);t.treeWalker_traverseChildren=function(e,t){for(var r=t?e._current._firstChild:e._current._lastChild;null!==r;){var o=i.traversal_filter(e,r);if(o===n.FilterResult.Accept)return e._current=r,r;if(o===n.FilterResult.Skip){var a=t?r._firstChild:r._lastChild;if(null!==a){r=a;continue}}for(;null!==r;){var s=t?r._nextSibling:r._previousSibling;if(null!==s){r=s;break}var u=r._parent;if(null===u||u===e._root||u===e._current)return null;r=u}}return null},t.treeWalker_traverseSiblings=function(e,t){var r=e._current;if(r===e._root)return null;for(;;){for(var o=t?r._nextSibling:r._previousSibling;null!==o;){r=o;var a=i.traversal_filter(e,r);if(a===n.FilterResult.Accept)return e._current=r,r;o=t?r._firstChild:r._lastChild,a!==n.FilterResult.Reject&&null!==o||(o=t?r._nextSibling:r._previousSibling)}if(null===(r=r._parent)||r===e._root)return null;if(i.traversal_filter(e,r)===n.FilterResult.Accept)return null}}},function(e,t,r){\"use strict\";r(89),r(74);var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(1),a=r(2),s=r(50),u=r(3),l=function(e){function t(t,r){var n=e.call(this,t)||this;return n._indentation={},n._lengthToLastNewline=0,n._writerOptions=o.applyDefaults(r,{wellFormed:!1,headless:!1,prettyPrint:!1,indent:\"  \",newline:\"\\n\",offset:0,width:0,allowEmptyTags:!1,indentTextOnlyNodes:!1,spaceBeforeSlash:!1}),n}return i(t,e),t.prototype.serialize=function(e){return this._refs={suppressPretty:!1,emptyNode:!1,markup:\"\"},e.nodeType!==a.NodeType.Document||this._writerOptions.headless||this.declaration(this._builderOptions.version,this._builderOptions.encoding,this._builderOptions.standalone),this.serializeNode(e,this._writerOptions.wellFormed),this._writerOptions.prettyPrint&&this._refs.markup.slice(-this._writerOptions.newline.length)===this._writerOptions.newline&&(this._refs.markup=this._refs.markup.slice(0,-this._writerOptions.newline.length)),this._refs.markup},t.prototype.declaration=function(e,t,r){this._beginLine(),this._refs.markup+='<?xml version=\"'+e+'\"',void 0!==t&&(this._refs.markup+=' encoding=\"'+t+'\"'),void 0!==r&&(this._refs.markup+=' standalone=\"'+(r?\"yes\":\"no\")+'\"'),this._refs.markup+=\"?>\",this._endLine()},t.prototype.docType=function(e,t,r){this._beginLine(),this._refs.markup+=t&&r?\"<!DOCTYPE \"+e+' PUBLIC \"'+t+'\" \"'+r+'\">':t?\"<!DOCTYPE \"+e+' PUBLIC \"'+t+'\">':r?\"<!DOCTYPE \"+e+' SYSTEM \"'+r+'\">':\"<!DOCTYPE \"+e+\">\",this._endLine()},t.prototype.openTagBegin=function(e){this._beginLine(),this._refs.markup+=\"<\"+e},t.prototype.openTagEnd=function(e,t,r){if(this._refs.suppressPretty=!1,this._refs.emptyNode=!1,this._writerOptions.prettyPrint&&!t&&!r){for(var n=!0,i=!0,o=this.currentNode.firstChild,a=0,s=0;o;){if(u.Guard.isExclusiveTextNode(o))s++;else{if(!u.Guard.isCDATASectionNode(o)){n=!1,i=!1;break}a++}\"\"!==o.data&&(i=!1),o=o.nextSibling}this._refs.suppressPretty=!this._writerOptions.indentTextOnlyNodes&&n&&(a<=1&&0===s||0===a),this._refs.emptyNode=i}(r||t||this._refs.emptyNode)&&this._writerOptions.allowEmptyTags?this._refs.markup+=\"></\"+e+\">\":this._refs.markup+=r?\" />\":t||this._refs.emptyNode?this._writerOptions.spaceBeforeSlash?\" />\":\"/>\":\">\",this._endLine()},t.prototype.closeTag=function(e){this._refs.emptyNode||(this._beginLine(),this._refs.markup+=\"</\"+e+\">\"),this._refs.suppressPretty=!1,this._refs.emptyNode=!1,this._endLine()},t.prototype.attribute=function(e,t){var r=e+'=\"'+t+'\"';this._writerOptions.prettyPrint&&this._writerOptions.width>0&&this._refs.markup.length-this._lengthToLastNewline+1+r.length>this._writerOptions.width?(this._endLine(),this._beginLine(),this._refs.markup+=this._indent(1)+r):this._refs.markup+=\" \"+r},t.prototype.text=function(e){\"\"!==e&&(this._beginLine(),this._refs.markup+=e,this._endLine())},t.prototype.cdata=function(e){\"\"!==e&&(this._beginLine(),this._refs.markup+=\"<![CDATA[\"+e+\"]]>\",this._endLine())},t.prototype.comment=function(e){this._beginLine(),this._refs.markup+=\"\\x3c!--\"+e+\"--\\x3e\",this._endLine()},t.prototype.instruction=function(e,t){this._beginLine(),this._refs.markup+=\"<?\"+(\"\"===t?e:e+\" \"+t)+\"?>\",this._endLine()},t.prototype._beginLine=function(){this._writerOptions.prettyPrint&&!this._refs.suppressPretty&&(this._refs.markup+=this._indent(this._writerOptions.offset+this.level))},t.prototype._endLine=function(){this._writerOptions.prettyPrint&&!this._refs.suppressPretty&&(this._refs.markup+=this._writerOptions.newline,this._lengthToLastNewline=this._refs.markup.length)},t.prototype._indent=function(e){if(e<=0)return\"\";if(void 0!==this._indentation[e])return this._indentation[e];var t=this._writerOptions.indent.repeat(e);return this._indentation[e]=t,t},t}(s.BaseWriter);t.XMLWriter=l},function(e,t,r){\"use strict\";var n=r(47),i=r(35);e.exports=\"\".repeat||function(e){var t=String(i(this)),r=\"\",o=n(e);if(o<0||o==1/0)throw RangeError(\"Wrong number of repetitions\");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(r+=t);return r}},function(e,t,r){\"use strict\";r(31),r(32),r(33),r(19),r(178),r(20),r(22),r(23);var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")};Object.defineProperty(t,\"__esModule\",{value:!0});var a=r(67),s=r(1),u=function(e){function t(t,r){var n=e.call(this,t)||this;return n._writerOptions=s.applyDefaults(r,{wellFormed:!1,prettyPrint:!1,indent:\"  \",newline:\"\\n\",offset:0,group:!1,verbose:!1}),n}return i(t,e),t.prototype.serialize=function(e){var t=s.applyDefaults(this._writerOptions,{format:\"object\",wellFormed:!1}),r=new a.ObjectWriter(this._builderOptions,t).serialize(e);return this._beginLine(this._writerOptions,0)+this._convertObject(r,this._writerOptions)},t.prototype._convertObject=function(e,t,r){var n,i,a=this;void 0===r&&(r=0);var u=\"\",l=this._isLeafNode(e);if(s.isArray(e)){u+=\"[\";var c=e.length,h=0;try{for(var p=o(e),f=p.next();!f.done;f=p.next()){var d=f.value;u+=this._endLine(t,r+1)+this._beginLine(t,r+1)+this._convertObject(d,t,r+1),h<c-1&&(u+=\",\"),h++}}catch(e){n={error:e}}finally{try{f&&!f.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}u+=this._endLine(t,r)+this._beginLine(t,r),u+=\"]\"}else if(s.isObject(e)){u+=\"{\";var m=s.objectLength(e),y=0;s.forEachObject(e,(function(e,n){l&&t.prettyPrint?u+=\" \":u+=a._endLine(t,r+1)+a._beginLine(t,r+1),u+=a._key(e),t.prettyPrint&&(u+=\" \"),u+=a._convertObject(n,t,r+1),y<m-1&&(u+=\",\"),y++}),this),l&&t.prettyPrint?u+=\" \":u+=this._endLine(t,r)+this._beginLine(t,r),u+=\"}\"}else u+=this._val(e);return u},t.prototype._beginLine=function(e,t){if(!e.prettyPrint)return\"\";var r=e.offset+t+1;return r>0?new Array(r).join(e.indent):\"\"},t.prototype._endLine=function(e,t){return e.prettyPrint?e.newline:\"\"},t.prototype._key=function(e){return'\"'+e+'\":'},t.prototype._val=function(e){return JSON.stringify(e)},t.prototype._isLeafNode=function(e){return this._descendantCount(e)<=1},t.prototype._descendantCount=function(e,t){var r=this;return void 0===t&&(t=0),s.isArray(e)?s.forEachArray(e,(function(e){return t+=r._descendantCount(e,t)}),this):s.isObject(e)?s.forEachObject(e,(function(e,n){return t+=r._descendantCount(n,t)}),this):t++,t},t}(r(50).BaseWriter);t.JSONWriter=u},function(e,t,r){\"use strict\";r(31),r(32),r(33),r(19),r(178),r(89),r(20),r(22),r(23);var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")};Object.defineProperty(t,\"__esModule\",{value:!0});var a=r(67),s=r(1),u=function(e){function t(t,r){var n=e.call(this,t)||this;if(n._writerOptions=s.applyDefaults(r,{wellFormed:!1,indent:\"  \",newline:\"\\n\",offset:0,group:!1,verbose:!1}),n._writerOptions.indent.length<2)throw new Error(\"YAML indententation string must be at least two characters long.\");if(n._writerOptions.offset<0)throw new Error(\"YAML offset should be zero or a positive number.\");return n}return i(t,e),t.prototype.serialize=function(e){var t=s.applyDefaults(this._writerOptions,{format:\"object\",wellFormed:!1}),r=new a.ObjectWriter(this._builderOptions,t).serialize(e),n=this._beginLine(this._writerOptions,0)+\"---\"+this._endLine(this._writerOptions)+this._convertObject(r,this._writerOptions,0);return n.slice(-this._writerOptions.newline.length)===this._writerOptions.newline&&(n=n.slice(0,-this._writerOptions.newline.length)),n},t.prototype._convertObject=function(e,t,r,n){var i,a,u=this;void 0===n&&(n=!1);var l=\"\";if(s.isArray(e))try{for(var c=o(e),h=c.next();!h.done;h=c.next()){var p=h.value;l+=this._beginLine(t,r,!0),s.isObject(p)?s.isEmpty(p)?l+='\"\"'+this._endLine(t):l+=this._convertObject(p,t,r,!0):l+=this._val(p)+this._endLine(t)}}catch(e){i={error:e}}finally{try{h&&!h.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}else s.forEachObject(e,(function(e,i){n?(l+=u._key(e),n=!1):l+=u._beginLine(t,r)+u._key(e),s.isObject(i)?s.isEmpty(i)?l+=' \"\"'+u._endLine(t):l+=u._endLine(t)+u._convertObject(i,t,r+1):l+=\" \"+u._val(i)+u._endLine(t)}),this);return l},t.prototype._beginLine=function(e,t,r){void 0===r&&(r=!1);var n=e.offset+t+1,i=new Array(n).join(e.indent);return r?i.substr(0,i.length-2)+\"-\"+i.substr(-1,1):i},t.prototype._endLine=function(e){return e.newline},t.prototype._key=function(e){return'\"'+e+'\":'},t.prototype._val=function(e){return JSON.stringify(e)},t}(r(50).BaseWriter);t.YAMLWriter=u},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),r(110).dom.setFeatures(!0);var n=r(110);t.DOMImplementation=n.DOMImplementation;var i=r(271);t.DOMParser=i.DOMParser;var o=r(274);t.XMLSerializer=o.XMLSerializer},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(3),i=r(0),o=function(){function e(){}return e.prototype.before=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=n.Cast.asNode(this),o=r._parent;if(null!==o){for(var a=r._previousSibling,s=!0;s&&a;){s=!1;for(var u=0;u<e.length;u++){var l=e[u];if(l===a){a=a._previousSibling,s=!0;break}}}var c=i.parentNode_convertNodesIntoANode(e,r._nodeDocument);a=null===a?o._firstChild:a._nextSibling,i.mutation_preInsert(c,o,a)}},e.prototype.after=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=n.Cast.asNode(this),o=r._parent;if(o){for(var a=r._nextSibling,s=!0;s&&a;){s=!1;for(var u=0;u<e.length;u++){var l=e[u];if(l===a){a=a._nextSibling,s=!0;break}}}var c=i.parentNode_convertNodesIntoANode(e,r._nodeDocument);i.mutation_preInsert(c,o,a)}},e.prototype.replaceWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=n.Cast.asNode(this),o=r._parent;if(o){for(var a=r._nextSibling,s=!0;s&&a;){s=!1;for(var u=0;u<e.length;u++){var l=e[u];if(l===a){a=a._nextSibling,s=!0;break}}}var c=i.parentNode_convertNodesIntoANode(e,r._nodeDocument);r._parent===o?i.mutation_replace(r,c,o):i.mutation_preInsert(c,o,a)}},e.prototype.remove=function(){var e=n.Cast.asNode(this),t=e._parent;t&&i.mutation_remove(e,t)},e}();t.ChildNodeImpl=o},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){};t.DocumentOrShadowRootImpl=n},function(e,t,r){\"use strict\";var n=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")};Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(6),o=r(3),a=r(7),s=function(){function e(e){this._nodeList=[],this._recordQueue=[],this._callback=e;var t=i.dom.window;a.set.append(t._mutationObservers,this)}return e.prototype.observe=function(e,t){var r,i;if(void 0===(t=t||{childList:!1,subtree:!1}).attributeOldValue&&void 0===t.attributeFilter||void 0!==t.attributes||(t.attributes=!0),void 0!==t.characterDataOldValue&&void 0===t.characterData&&(t.characterData=!0),!t.childList&&!t.attributes&&!t.characterData)throw new TypeError;if(t.attributeOldValue&&!t.attributes)throw new TypeError;if(void 0!==t.attributeFilter&&!t.attributes)throw new TypeError;if(t.characterDataOldValue&&!t.characterData)throw new TypeError;var s=!1,u=t,l=function(e){var t,r;if(e.observer===c){s=!0;try{for(var i=(t=void 0,n(c._nodeList)),l=i.next();!l.done;l=i.next()){var h=l.value;a.list.remove(h._registeredObserverList,(function(t){return o.Guard.isTransientRegisteredObserver(t)&&t.source===e}))}}catch(e){t={error:e}}finally{try{l&&!l.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}e.options=u}},c=this;try{for(var h=n(e._registeredObserverList),p=h.next();!p.done;p=h.next()){l(p.value)}}catch(e){r={error:e}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}s||(e._registeredObserverList.push({observer:this,options:t}),this._nodeList.push(e))},e.prototype.disconnect=function(){var e,t,r=this;try{for(var i=n(this._nodeList),o=i.next();!o.done;o=i.next()){var s=o.value;a.list.remove(s._registeredObserverList,(function(e){return e.observer===r}))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}this._recordQueue=[]},e.prototype.takeRecords=function(){var e=this._recordQueue;return this._recordQueue=[],e},e}();t.MutationObserverImpl=s},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(3),i=function(){function e(){}return Object.defineProperty(e.prototype,\"previousElementSibling\",{get:function(){for(var e=n.Cast.asNode(this)._previousSibling;e;){if(n.Guard.isElementNode(e))return e;e=e._previousSibling}return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"nextElementSibling\",{get:function(){for(var e=n.Cast.asNode(this)._nextSibling;e;){if(n.Guard.isElementNode(e))return e;e=e._nextSibling}return null},enumerable:!0,configurable:!0}),e}();t.NonDocumentTypeChildNodeImpl=i},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(3),i=r(0),o=function(){function e(){}return e.prototype.getElementById=function(e){for(var t=i.tree_getFirstDescendantNode(n.Cast.asNode(this),!1,!1,(function(e){return n.Guard.isElementNode(e)}));null!==t;){if(t._uniqueIdentifier===e)return t;t=i.tree_getNextDescendantNode(n.Cast.asNode(this),t,!1,!1,(function(e){return n.Guard.isElementNode(e)}))}return null},e}();t.NonElementParentNodeImpl=o},function(e,t,r){\"use strict\";var n=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")};Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(3),o=r(0),a=function(){function e(){}return Object.defineProperty(e.prototype,\"children\",{get:function(){return o.create_htmlCollection(i.Cast.asNode(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"firstElementChild\",{get:function(){for(var e=i.Cast.asNode(this)._firstChild;e;){if(i.Guard.isElementNode(e))return e;e=e._nextSibling}return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"lastElementChild\",{get:function(){for(var e=i.Cast.asNode(this)._lastChild;e;){if(i.Guard.isElementNode(e))return e;e=e._previousSibling}return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"childElementCount\",{get:function(){var e,t,r=0;try{for(var o=n(i.Cast.asNode(this)._children),a=o.next();!a.done;a=o.next()){var s=a.value;i.Guard.isElementNode(s)&&r++}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r},enumerable:!0,configurable:!0}),e.prototype.prepend=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=i.Cast.asNode(this),n=o.parentNode_convertNodesIntoANode(e,r._nodeDocument);o.mutation_preInsert(n,r,r._firstChild)},e.prototype.append=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=i.Cast.asNode(this),n=o.parentNode_convertNodesIntoANode(e,r._nodeDocument);o.mutation_append(n,r)},e.prototype.querySelector=function(e){var t=i.Cast.asNode(this),r=o.selectors_scopeMatchASelectorsString(e,t);return 0===r.length?null:r[0]},e.prototype.querySelectorAll=function(e){var t=i.Cast.asNode(this),r=o.selectors_scopeMatchASelectorsString(e,t);return o.create_nodeListStatic(t,r)},e}();t.ParentNodeImpl=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(0),i=function(){function e(){}return Object.defineProperty(e.prototype,\"_name\",{get:function(){return this.__name||\"\"},set:function(e){this.__name=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"_assignedSlot\",{get:function(){return this.__assignedSlot||null},set:function(e){this.__assignedSlot=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"assignedSlot\",{get:function(){return n.shadowTree_findASlot(this,!0)},enumerable:!0,configurable:!0}),e}();t.SlotableImpl=i},function(e,t,r){\"use strict\";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(102),a=r(9),s=r(3),u=function(e){function t(t){var r=e.call(this)||this;if(s.Guard.isDocumentTypeNode(t.startContainer)||s.Guard.isAttrNode(t.startContainer)||s.Guard.isDocumentTypeNode(t.endContainer)||s.Guard.isAttrNode(t.endContainer))throw new a.InvalidNodeTypeError;return r._start=[t.startContainer,t.startOffset],r._end=[t.endContainer,t.endOffset],r}return i(t,e),t}(o.AbstractRangeImpl);t.StaticRangeImpl=u},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(272);t.DOMParser=n.DOMParserImpl},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(0),i=r(273),o=function(){function e(){}return e.prototype.parseFromString=function(e,t){if(\"text/html\"===t)throw new Error(\"HTML parser not implemented.\");try{return(r=(new i.XMLParserImpl).parse(e))._contentType=t,r}catch(e){var r,o=\"http://www.mozilla.org/newlayout/xml/parsererror.xml\",a=(r=n.create_xmlDocument()).createElementNS(o,\"parsererror\"),s=r.createElementNS(o,\"error\");return s.setAttribute(\"message\",e.message),a.appendChild(s),r.appendChild(a),r}},e}();t.DOMParserImpl=o},function(e,t,r){\"use strict\";var n=this&&this.__read||function(e,t){var r=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")};Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(180),a=r(111),s=r(7),u=r(0),l=r(69),c=function(){function e(){}return e.prototype.parse=function(e){for(var t,r,c,h,p=new o.XMLStringLexer(e,{skipWhitespaceOnlyText:!0}),f=u.create_document(),d=f,m=p.nextToken();m.type!==a.TokenType.EOF;){switch(m.type){case a.TokenType.Declaration:var y=m;if(\"1.0\"!==y.version)throw new Error(\"Invalid xml version: \"+y.version);break;case a.TokenType.DocType:var v=m;if(!u.xml_isPubidChar(v.pubId))throw new Error(\"DocType public identifier does not match PubidChar construct.\");if(!u.xml_isLegalChar(v.sysId)||-1!==v.sysId.indexOf('\"')&&-1!==v.sysId.indexOf(\"'\"))throw new Error(\"DocType system identifier contains invalid characters.\");d.appendChild(f.implementation.createDocumentType(v.name,v.pubId,v.sysId));break;case a.TokenType.CDATA:var _=m;if(!u.xml_isLegalChar(_.data)||-1!==_.data.indexOf(\"]]>\"))throw new Error(\"CDATA contains invalid characters.\");d.appendChild(f.createCDATASection(_.data));break;case a.TokenType.Comment:var g=m;if(!u.xml_isLegalChar(g.data)||-1!==g.data.indexOf(\"--\")||g.data.endsWith(\"-\"))throw new Error(\"Comment data contains invalid characters.\");d.appendChild(f.createComment(g.data));break;case a.TokenType.PI:var b=m;if(-1!==b.target.indexOf(\":\")||/^xml$/i.test(b.target))throw new Error(\"Processing instruction target contains invalid characters.\");if(!u.xml_isLegalChar(b.data)||-1!==b.data.indexOf(\"?>\"))throw new Error(\"Processing instruction data contains invalid characters.\");d.appendChild(f.createProcessingInstruction(b.target,b.data));break;case a.TokenType.Text:var x=m;if(!u.xml_isLegalChar(x.data))throw new Error(\"Text data contains invalid characters.\");d.appendChild(f.createTextNode(this._decodeText(x.data)));break;case a.TokenType.Element:var w=m,E=n(u.namespace_extractQName(w.name),2),D=E[0],S=E[1];if(-1!==S.indexOf(\":\")||!u.xml_isName(S))throw new Error(\"Node local name contains invalid characters.\");if(\"xmlns\"===D)throw new Error(\"An element cannot have the 'xmlns' prefix.\");var C=d.lookupNamespaceURI(D),A={};try{for(var N=(t=void 0,i(w.attributes)),T=N.next();!T.done;T=N.next()){var O=n(T.value,2),F=O[0],k=O[1];if(\"xmlns\"===F)C=k;else{var P=n(u.namespace_extractQName(F),2),I=P[0],L=P[1];\"xmlns\"===I&&(L===D&&(C=k),A[L]=k)}}}catch(e){t={error:e}}finally{try{T&&!T.done&&(r=N.return)&&r.call(N)}finally{if(t)throw t.error}}var M=null!==C?f.createElementNS(C,w.name):f.createElement(w.name);d.appendChild(M);var B=new l.LocalNameSet;try{for(var j=(c=void 0,i(w.attributes)),R=j.next();!R.done;R=j.next()){var z=n(R.value,2),U=(F=z[0],k=z[1],n(u.namespace_extractQName(F),2)),G=(I=U[0],L=U[1],null);if(\"xmlns\"===I||null===I&&\"xmlns\"===L?G=s.namespace.XMLNS:null!==(G=M.lookupNamespaceURI(I))&&M.isDefaultNamespace(G)?G=null:null===G&&null!==I&&(G=A[I]||null),B.has(G,L))throw new Error(\"Element contains duplicate attributes.\");if(B.set(G,L),G===s.namespace.XMLNS&&k===s.namespace.XMLNS)throw new Error(\"XMLNS namespace is reserved.\");if(-1!==L.indexOf(\":\")||!u.xml_isName(L))throw new Error(\"Attribute local name contains invalid characters.\");if(\"xmlns\"===I&&\"\"===k)throw new Error(\"Empty XML namespace is not allowed.\");null!==G?M.setAttributeNS(G,F,this._decodeAttributeValue(k)):M.setAttribute(F,this._decodeAttributeValue(k))}}catch(e){c={error:e}}finally{try{R&&!R.done&&(h=j.return)&&h.call(j)}finally{if(c)throw c.error}}w.selfClosing||(d=M);break;case a.TokenType.ClosingTag:if(m.name!==d.nodeName)throw new Error(\"Closing tag name does not match opening tag name.\");d._parent&&(d=d._parent)}m=p.nextToken()}return f},e.prototype._decodeText=function(e){return null==e?e:e.replace(/&lt;/g,\"<\").replace(/&gt;/g,\">\").replace(/&amp;/g,\"&\")},e.prototype._decodeAttributeValue=function(e){return null==e?e:e.replace(/&lt;/g,\"<\").replace(/&gt;/g,\">\").replace(/&amp;/g,\"&\")},e}();t.XMLParserImpl=c},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(275);t.XMLSerializer=n.XMLSerializerImpl},function(e,t,r){\"use strict\";var n=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")};Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(2),o=r(69),a=r(95),s=r(9),u=r(7),l=r(0),c=function(){function e(){}return e.prototype.serializeToString=function(e){return this._xmlSerialization(e,!1)},e.prototype._xmlSerialization=function(e,t){if(void 0===e._nodeDocument||e._nodeDocument._hasNamespaces){var r=new a.NamespacePrefixMap;r.set(\"xml\",u.namespace.XML);try{return this._serializeNodeNS(e,null,r,{value:1},t)}catch(e){throw new s.InvalidStateError}}else try{return this._serializeNode(e,t)}catch(e){throw new s.InvalidStateError}},e.prototype._serializeNodeNS=function(e,t,r,n,o){switch(e.nodeType){case i.NodeType.Element:return this._serializeElementNS(e,t,r,n,o);case i.NodeType.Document:return this._serializeDocumentNS(e,t,r,n,o);case i.NodeType.Comment:return this._serializeComment(e,o);case i.NodeType.Text:return this._serializeText(e,o);case i.NodeType.DocumentFragment:return this._serializeDocumentFragmentNS(e,t,r,n,o);case i.NodeType.DocumentType:return this._serializeDocumentType(e,o);case i.NodeType.ProcessingInstruction:return this._serializeProcessingInstruction(e,o);case i.NodeType.CData:return this._serializeCData(e,o);default:throw new Error(\"Unknown node type: \"+e.nodeType)}},e.prototype._serializeNode=function(e,t){switch(e.nodeType){case i.NodeType.Element:return this._serializeElement(e,t);case i.NodeType.Document:return this._serializeDocument(e,t);case i.NodeType.Comment:return this._serializeComment(e,t);case i.NodeType.Text:return this._serializeText(e,t);case i.NodeType.DocumentFragment:return this._serializeDocumentFragment(e,t);case i.NodeType.DocumentType:return this._serializeDocumentType(e,t);case i.NodeType.ProcessingInstruction:return this._serializeProcessingInstruction(e,t);case i.NodeType.CData:return this._serializeCData(e,t);default:throw new Error(\"Unknown node type: \"+e.nodeType)}},e.prototype._serializeElementNS=function(t,r,i,o,a){var s,c;if(a&&(-1!==t.localName.indexOf(\":\")||!l.xml_isName(t.localName)))throw new Error(\"Node local name contains invalid characters (well-formed required).\");var h=\"<\",p=\"\",f=!1,d=!1,m=i.copy(),y={},v=this._recordNamespaceInformation(t,m,y),_=r,g=t.namespaceURI;if(_===g)null!==v&&(d=!0),h+=p=g===u.namespace.XML?\"xml:\"+t.localName:t.localName;else{var b=t.prefix,x=null;if(null===b&&g===v||(x=m.get(b,g)),\"xmlns\"===b){if(a)throw new Error(\"An element cannot have the 'xmlns' prefix (well-formed required).\");x=b}null!==x?(p=x+\":\"+t.localName,null!==v&&v!==u.namespace.XML&&(_=v||null),h+=p):null!==b?(b in y&&(b=this._generatePrefix(g,m,o)),m.set(b,g),h+=p+=b+\":\"+t.localName,h+=\" xmlns:\"+b+'=\"'+this._serializeAttributeValue(g,a)+'\"',null!==v&&(_=v||null)):null===v||null!==v&&v!==g?(d=!0,_=g,h+=p+=t.localName,h+=' xmlns=\"'+this._serializeAttributeValue(g,a)+'\"'):(_=g,h+=p+=t.localName)}h+=this._serializeAttributesNS(t,m,o,y,d,a);var w=g===u.namespace.HTML;if(w&&0===t.childNodes.length&&e._VoidElementNames.has(t.localName)?(h+=\" /\",f=!0):w||0!==t.childNodes.length||(h+=\"/\",f=!0),h+=\">\",f)return h;if(w&&\"template\"===t.localName);else try{for(var E=n(t._children||t.childNodes),D=E.next();!D.done;D=E.next()){var S=D.value;h+=this._serializeNodeNS(S,_,m,o,a)}}catch(e){s={error:e}}finally{try{D&&!D.done&&(c=E.return)&&c.call(E)}finally{if(s)throw s.error}}return h+=\"</\"+p+\">\"},e.prototype._serializeDocumentNS=function(e,t,r,i,o){var a,s;if(o&&null===e.documentElement)throw new Error(\"Missing document element (well-formed required).\");var u=\"\";try{for(var l=n(e._children||e.childNodes),c=l.next();!c.done;c=l.next()){var h=c.value;u+=this._serializeNodeNS(h,t,r,i,o)}}catch(e){a={error:e}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}return u},e.prototype._serializeComment=function(e,t){if(t&&(!l.xml_isLegalChar(e.data)||-1!==e.data.indexOf(\"--\")||e.data.endsWith(\"-\")))throw new Error(\"Comment data contains invalid characters (well-formed required).\");return\"\\x3c!--\"+e.data+\"--\\x3e\"},e.prototype._serializeText=function(e,t){if(t&&!l.xml_isLegalChar(e.data))throw new Error(\"Text data contains invalid characters (well-formed required).\");for(var r=\"\",n=0;n<e.data.length;n++){var i=e.data[n];r+=\"&\"===i?\"&amp;\":\"<\"===i?\"&lt;\":\">\"===i?\"&gt;\":i}return r},e.prototype._serializeDocumentFragmentNS=function(e,t,r,i,o){var a,s,u=\"\";try{for(var l=n(e._children||e.childNodes),c=l.next();!c.done;c=l.next()){var h=c.value;u+=this._serializeNodeNS(h,t,r,i,o)}}catch(e){a={error:e}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}return u},e.prototype._serializeDocumentType=function(e,t){if(t&&!l.xml_isPubidChar(e.publicId))throw new Error(\"DocType public identifier does not match PubidChar construct (well-formed required).\");if(t&&(!l.xml_isLegalChar(e.systemId)||-1!==e.systemId.indexOf('\"')&&-1!==e.systemId.indexOf(\"'\")))throw new Error(\"DocType system identifier contains invalid characters (well-formed required).\");return e.publicId&&e.systemId?\"<!DOCTYPE \"+e.name+' PUBLIC \"'+e.publicId+'\" \"'+e.systemId+'\">':e.publicId?\"<!DOCTYPE \"+e.name+' PUBLIC \"'+e.publicId+'\">':e.systemId?\"<!DOCTYPE \"+e.name+' SYSTEM \"'+e.systemId+'\">':\"<!DOCTYPE \"+e.name+\">\"},e.prototype._serializeProcessingInstruction=function(e,t){if(t&&(-1!==e.target.indexOf(\":\")||/^xml$/i.test(e.target)))throw new Error(\"Processing instruction target contains invalid characters (well-formed required).\");if(t&&(!l.xml_isLegalChar(e.data)||-1!==e.data.indexOf(\"?>\")))throw new Error(\"Processing instruction data contains invalid characters (well-formed required).\");return\"<?\"+(\"\"===e.data?e.target:e.target+\" \"+e.data)+\"?>\"},e.prototype._serializeCData=function(e,t){if(t&&-1!==e.data.indexOf(\"]]>\"))throw new Error(\"CDATA contains invalid characters (well-formed required).\");return\"<![CDATA[\"+e.data+\"]]>\"},e.prototype._serializeAttributesNS=function(e,t,r,i,a,s){var c,h,p=\"\",f=s?new o.LocalNameSet:void 0;try{for(var d=n(e.attributes),m=d.next();!m.done;m=d.next()){var y=m.value;if(a||s||null!==y.namespaceURI){if(s&&f&&f.has(y.namespaceURI,y.localName))throw new Error(\"Element contains duplicate attributes (well-formed required).\");s&&f&&f.set(y.namespaceURI,y.localName);var v=y.namespaceURI,_=null;if(null!==v)if(_=t.get(y.prefix,v),v===u.namespace.XMLNS){if(y.value===u.namespace.XML||null===y.prefix&&a||null!==y.prefix&&(!(y.localName in i)||i[y.localName]!==y.value)&&t.has(y.localName,y.value))continue;if(s&&y.value===u.namespace.XMLNS)throw new Error(\"XMLNS namespace is reserved (well-formed required).\");if(s&&\"\"===y.value)throw new Error(\"Namespace prefix declarations cannot be used to undeclare a namespace (well-formed required).\");\"xmlns\"===y.prefix&&(_=\"xmlns\")}else null===_&&(p+=\" xmlns:\"+(_=null===y.prefix||t.hasPrefix(y.prefix)&&!t.has(y.prefix,v)?this._generatePrefix(v,t,r):y.prefix)+'=\"'+this._serializeAttributeValue(v,s)+'\"');if(p+=\" \",null!==_&&(p+=_+\":\"),s&&(-1!==y.localName.indexOf(\":\")||!l.xml_isName(y.localName)||\"xmlns\"===y.localName&&null===v))throw new Error(\"Attribute local name contains invalid characters (well-formed required).\");p+=y.localName+'=\"'+this._serializeAttributeValue(y.value,s)+'\"'}else p+=\" \"+y.localName+'=\"'+this._serializeAttributeValue(y.value,s)+'\"'}}catch(e){c={error:e}}finally{try{m&&!m.done&&(h=d.return)&&h.call(d)}finally{if(c)throw c.error}}return p},e.prototype._recordNamespaceInformation=function(e,t,r){var i,o,a=null;try{for(var s=n(e.attributes),l=s.next();!l.done;l=s.next()){var c=l.value,h=c.namespaceURI,p=c.prefix;if(h===u.namespace.XMLNS){if(null===p){a=c.value;continue}var f=c.localName,d=c.value;if(d===u.namespace.XML)continue;if(\"\"===d&&(d=null),t.has(f,d))continue;t.set(f,d),r[f]=d||\"\"}}}catch(e){i={error:e}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}return a},e.prototype._generatePrefix=function(e,t,r){var n=\"ns\"+r.value;return r.value++,t.set(n,e),n},e.prototype._serializeAttributeValue=function(e,t){if(t&&null!==e&&!l.xml_isLegalChar(e))throw new Error(\"Invalid characters in attribute value.\");if(null===e)return\"\";for(var r=\"\",n=0;n<e.length;n++){var i=e[n];r+='\"'===i?\"&quot;\":\"&\"===i?\"&amp;\":\"<\"===i?\"&lt;\":\">\"===i?\"&gt;\":i}return r},e.prototype._serializeElement=function(e,t){var r,i;if(t&&(-1!==e.localName.indexOf(\":\")||!l.xml_isName(e.localName)))throw new Error(\"Node local name contains invalid characters (well-formed required).\");var o=!1,a=e.localName,s=\"<\"+a;if(s+=this._serializeAttributes(e,t),0===e._children.size&&(s+=\"/\",o=!0),s+=\">\",o)return s;try{for(var u=n(e._children),c=u.next();!c.done;c=u.next()){var h=c.value;s+=this._serializeNode(h,t)}}catch(e){r={error:e}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return s+=\"</\"+a+\">\"},e.prototype._serializeDocument=function(e,t){var r,i;if(t&&null===e.documentElement)throw new Error(\"Missing document element (well-formed required).\");var o=\"\";try{for(var a=n(e._children),s=a.next();!s.done;s=a.next()){var u=s.value;o+=this._serializeNode(u,t)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o},e.prototype._serializeDocumentFragment=function(e,t){var r,i,o=\"\";try{for(var a=n(e._children),s=a.next();!s.done;s=a.next()){var u=s.value;o+=this._serializeNode(u,t)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o},e.prototype._serializeAttributes=function(e,t){var r,i,o=\"\",a=t?{}:void 0;try{for(var s=n(e.attributes),u=s.next();!u.done;u=s.next()){var c=u.value;if(t&&a&&c.localName in a)throw new Error(\"Element contains duplicate attributes (well-formed required).\");if(t&&a&&(a[c.localName]=!0),t&&(-1!==c.localName.indexOf(\":\")||!l.xml_isName(c.localName)))throw new Error(\"Attribute local name contains invalid characters (well-formed required).\");o+=\" \"+c.localName+'=\"'+this._serializeAttributeValue(c.value,t)+'\"'}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return o},e._VoidElementNames=new Set([\"area\",\"base\",\"basefont\",\"bgsound\",\"br\",\"col\",\"embed\",\"frame\",\"hr\",\"img\",\"input\",\"keygen\",\"link\",\"menuitem\",\"meta\",\"param\",\"source\",\"track\",\"wbr\"]),e}();t.XMLSerializerImpl=c},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(277);t.XMLReader=n.XMLReader;var i=r(112);t.ObjectReader=i.ObjectReader;var o=r(280);t.JSONReader=o.JSONReader;var a=r(281);t.YAMLReader=a.YAMLReader},function(e,t,r){\"use strict\";r(31),r(32),r(33),r(19),r(65),r(20),r(22),r(23);var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__read||function(e,t){var r=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},a=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")};Object.defineProperty(t,\"__esModule\",{value:!0});var s=r(180),u=r(111),l=r(7),c=r(0),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype._parse=function(e,t){for(var r,n,i,h,p=new s.XMLStringLexer(t,{skipWhitespaceOnlyText:!0}),f=e,d=e,m=p.nextToken();m.type!==u.TokenType.EOF;){switch(m.type){case u.TokenType.Declaration:var y=m,v=this.sanitize(y.version);if(\"1.0\"!==v)throw new Error(\"Invalid xml version: \"+v);var _={version:v};y.encoding&&(_.encoding=this.sanitize(y.encoding)),y.standalone&&(_.standalone=\"yes\"===this.sanitize(y.standalone)),d.set(_);break;case u.TokenType.DocType:var g=m;d=this.docType(d,this.sanitize(g.name),this.sanitize(g.pubId),this.sanitize(g.sysId))||d;break;case u.TokenType.CDATA:var b=m;d=this.cdata(d,this.sanitize(b.data))||d;break;case u.TokenType.Comment:var x=m;d=this.comment(d,this.sanitize(x.data))||d;break;case u.TokenType.PI:var w=m;d=this.instruction(d,this.sanitize(w.target),this.sanitize(w.data))||d;break;case u.TokenType.Text:var E=m;d=this.text(d,this._decodeText(this.sanitize(E.data)))||d;break;case u.TokenType.Element:var D=m,S=this.sanitize(D.name),C=o(c.namespace_extractQName(S),1)[0],A=d.node.lookupNamespaceURI(C),N={};try{for(var T=(r=void 0,a(D.attributes)),O=T.next();!O.done;O=T.next()){var F=o(O.value,2),k=F[0],P=F[1];if(k=this.sanitize(k),P=this.sanitize(P),\"xmlns\"===k)A=P;else{var I=o(c.namespace_extractQName(k),2),L=I[0],M=I[1];\"xmlns\"===L&&(M===C&&(A=P),N[M]=P)}}}catch(e){r={error:e}}finally{try{O&&!O.done&&(n=T.return)&&n.call(T)}finally{if(r)throw r.error}}var B=null!==A?this.element(d,A,S):this.element(d,void 0,S);if(void 0===B)break;d.node===e.node&&(f=B);try{for(var j=(i=void 0,a(D.attributes)),R=j.next();!R.done;R=j.next()){var z=o(R.value,2);k=z[0],P=z[1];k=this.sanitize(k),P=this.sanitize(P);var U=o(c.namespace_extractQName(k),2),G=(L=U[0],M=U[1],null);\"xmlns\"===L||null===L&&\"xmlns\"===M?G=l.namespace.XMLNS:null!==(G=B.node.lookupNamespaceURI(L))&&B.node.isDefaultNamespace(G)?G=null:null===G&&null!==L&&(G=N[L]||null),null!==G?this.attribute(B,G,k,this._decodeAttributeValue(P)):this.attribute(B,void 0,k,this._decodeAttributeValue(P))}}catch(e){i={error:e}}finally{try{R&&!R.done&&(h=j.return)&&h.call(j)}finally{if(i)throw i.error}}D.selfClosing||(d=B);break;case u.TokenType.ClosingTag:d.node.parentNode&&(d=d.up())}m=p.nextToken()}return f},t}(r(75).BaseReader);t.XMLReader=h},function(e,t,r){var n=r(4),i=r(279);n({target:\"Object\",stat:!0,forced:Object.assign!==i},{assign:i})},function(e,t,r){\"use strict\";var n=r(16),i=r(8),o=r(61),a=r(85),s=r(79),u=r(27),l=r(41),c=Object.assign,h=Object.defineProperty;e.exports=!c||i((function(){if(n&&1!==c({b:1},c(h({},\"a\",{enumerable:!0,get:function(){h(this,\"b\",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol();return e[r]=7,\"abcdefghijklmnopqrst\".split(\"\").forEach((function(e){t[e]=e})),7!=c({},e)[r]||\"abcdefghijklmnopqrst\"!=o(c({},t)).join(\"\")}))?function(e,t){for(var r=u(e),i=arguments.length,c=1,h=a.f,p=s.f;i>c;)for(var f,d=l(arguments[c++]),m=h?o(d).concat(h(d)):o(d),y=m.length,v=0;y>v;)f=m[v++],n&&!p.call(d,f)||(r[f]=d[f]);return r}:c},function(e,t,r){\"use strict\";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(112),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype._parse=function(e,t){return new o.ObjectReader(this._builderOptions).parse(e,JSON.parse(t))},t}(r(75).BaseReader);t.JSONReader=a},function(e,t,r){\"use strict\";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(112),a=r(75),s=r(282),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype._parse=function(e,t){var r=s.safeLoad(t);if(void 0===r)throw new Error(\"Unable to parse YAML document.\");return new o.ObjectReader(this._builderOptions).parse(e,r)},t}(a.BaseReader);t.YAMLReader=u},function(e,t,r){\"use strict\";var n=r(283);e.exports=n},function(e,t,r){\"use strict\";var n=r(284),i=r(303);function o(e){return function(){throw new Error(\"Function \"+e+\" is deprecated and cannot be used.\")}}e.exports.Type=r(10),e.exports.Schema=r(39),e.exports.FAILSAFE_SCHEMA=r(113),e.exports.JSON_SCHEMA=r(182),e.exports.CORE_SCHEMA=r(181),e.exports.DEFAULT_SAFE_SCHEMA=r(54),e.exports.DEFAULT_FULL_SCHEMA=r(76),e.exports.load=n.load,e.exports.loadAll=n.loadAll,e.exports.safeLoad=n.safeLoad,e.exports.safeLoadAll=n.safeLoadAll,e.exports.dump=i.dump,e.exports.safeDump=i.safeDump,e.exports.YAMLException=r(53),e.exports.MINIMAL_SCHEMA=r(113),e.exports.SAFE_SCHEMA=r(54),e.exports.DEFAULT_SCHEMA=r(76),e.exports.scan=o(\"scan\"),e.exports.parse=o(\"parse\"),e.exports.compose=o(\"compose\"),e.exports.addConstructor=o(\"addConstructor\")},function(e,t,r){\"use strict\";var n=r(38),i=r(53),o=r(285),a=r(54),s=r(76),u=Object.prototype.hasOwnProperty,l=/[\\x00-\\x08\\x0B\\x0C\\x0E-\\x1F\\x7F-\\x84\\x86-\\x9F\\uFFFE\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/,c=/[\\x85\\u2028\\u2029]/,h=/[,\\[\\]\\{\\}]/,p=/^(?:!|!!|![a-z\\-]+!)$/i,f=/^(?:!|[^,\\[\\]\\{\\}])(?:%[0-9a-f]{2}|[0-9a-z\\-#;\\/\\?:@&=\\+\\$,_\\.!~\\*'\\(\\)\\[\\]])*$/i;function d(e){return Object.prototype.toString.call(e)}function m(e){return 10===e||13===e}function y(e){return 9===e||32===e}function v(e){return 9===e||32===e||10===e||13===e}function _(e){return 44===e||91===e||93===e||123===e||125===e}function g(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function b(e){return 48===e?\"\\0\":97===e?\"\u0007\":98===e?\"\\b\":116===e||9===e?\"\\t\":110===e?\"\\n\":118===e?\"\\v\":102===e?\"\\f\":114===e?\"\\r\":101===e?\"\u001b\":32===e?\" \":34===e?'\"':47===e?\"/\":92===e?\"\\\\\":78===e?\"\":95===e?\"\":76===e?\"\\u2028\":80===e?\"\\u2029\":\"\"}function x(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var w=new Array(256),E=new Array(256),D=0;D<256;D++)w[D]=b(D)?1:0,E[D]=b(D);function S(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||s,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function C(e,t){return new i(t,new o(e.filename,e.input,e.position,e.line,e.position-e.lineStart))}function A(e,t){throw C(e,t)}function N(e,t){e.onWarning&&e.onWarning.call(null,C(e,t))}var T={YAML:function(e,t,r){var n,i,o;null!==e.version&&A(e,\"duplication of %YAML directive\"),1!==r.length&&A(e,\"YAML directive accepts exactly one argument\"),null===(n=/^([0-9]+)\\.([0-9]+)$/.exec(r[0]))&&A(e,\"ill-formed argument of the YAML directive\"),i=parseInt(n[1],10),o=parseInt(n[2],10),1!==i&&A(e,\"unacceptable YAML version of the document\"),e.version=r[0],e.checkLineBreaks=o<2,1!==o&&2!==o&&N(e,\"unsupported YAML version of the document\")},TAG:function(e,t,r){var n,i;2!==r.length&&A(e,\"TAG directive accepts exactly two arguments\"),n=r[0],i=r[1],p.test(n)||A(e,\"ill-formed tag handle (first argument) of the TAG directive\"),u.call(e.tagMap,n)&&A(e,'there is a previously declared suffix for \"'+n+'\" tag handle'),f.test(i)||A(e,\"ill-formed tag prefix (second argument) of the TAG directive\"),e.tagMap[n]=i}};function O(e,t,r,n){var i,o,a,s;if(t<r){if(s=e.input.slice(t,r),n)for(i=0,o=s.length;i<o;i+=1)9===(a=s.charCodeAt(i))||32<=a&&a<=1114111||A(e,\"expected valid JSON character\");else l.test(s)&&A(e,\"the stream contains non-printable characters\");e.result+=s}}function F(e,t,r,i){var o,a,s,l;for(n.isObject(r)||A(e,\"cannot merge mappings; the provided source object is unacceptable\"),s=0,l=(o=Object.keys(r)).length;s<l;s+=1)a=o[s],u.call(t,a)||(t[a]=r[a],i[a]=!0)}function k(e,t,r,n,i,o,a,s){var l,c;if(Array.isArray(i))for(l=0,c=(i=Array.prototype.slice.call(i)).length;l<c;l+=1)Array.isArray(i[l])&&A(e,\"nested arrays are not supported inside keys\"),\"object\"==typeof i&&\"[object Object]\"===d(i[l])&&(i[l]=\"[object Object]\");if(\"object\"==typeof i&&\"[object Object]\"===d(i)&&(i=\"[object Object]\"),i=String(i),null===t&&(t={}),\"tag:yaml.org,2002:merge\"===n)if(Array.isArray(o))for(l=0,c=o.length;l<c;l+=1)F(e,t,o[l],r);else F(e,t,o,r);else e.json||u.call(r,i)||!u.call(t,i)||(e.line=a||e.line,e.position=s||e.position,A(e,\"duplicated mapping key\")),t[i]=o,delete r[i];return t}function P(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):A(e,\"a line break is expected\"),e.line+=1,e.lineStart=e.position}function I(e,t,r){for(var n=0,i=e.input.charCodeAt(e.position);0!==i;){for(;y(i);)i=e.input.charCodeAt(++e.position);if(t&&35===i)do{i=e.input.charCodeAt(++e.position)}while(10!==i&&13!==i&&0!==i);if(!m(i))break;for(P(e),i=e.input.charCodeAt(e.position),n++,e.lineIndent=0;32===i;)e.lineIndent++,i=e.input.charCodeAt(++e.position)}return-1!==r&&0!==n&&e.lineIndent<r&&N(e,\"deficient indentation\"),n}function L(e){var t,r=e.position;return!(45!==(t=e.input.charCodeAt(r))&&46!==t||t!==e.input.charCodeAt(r+1)||t!==e.input.charCodeAt(r+2)||(r+=3,0!==(t=e.input.charCodeAt(r))&&!v(t)))}function M(e,t){1===t?e.result+=\" \":t>1&&(e.result+=n.repeat(\"\\n\",t-1))}function B(e,t){var r,n,i=e.tag,o=e.anchor,a=[],s=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=a),n=e.input.charCodeAt(e.position);0!==n&&45===n&&v(e.input.charCodeAt(e.position+1));)if(s=!0,e.position++,I(e,!0,-1)&&e.lineIndent<=t)a.push(null),n=e.input.charCodeAt(e.position);else if(r=e.line,z(e,t,3,!1,!0),a.push(e.result),I(e,!0,-1),n=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&0!==n)A(e,\"bad indentation of a sequence entry\");else if(e.lineIndent<t)break;return!!s&&(e.tag=i,e.anchor=o,e.kind=\"sequence\",e.result=a,!0)}function j(e){var t,r,n,i,o=!1,a=!1;if(33!==(i=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&A(e,\"duplication of a tag property\"),60===(i=e.input.charCodeAt(++e.position))?(o=!0,i=e.input.charCodeAt(++e.position)):33===i?(a=!0,r=\"!!\",i=e.input.charCodeAt(++e.position)):r=\"!\",t=e.position,o){do{i=e.input.charCodeAt(++e.position)}while(0!==i&&62!==i);e.position<e.length?(n=e.input.slice(t,e.position),i=e.input.charCodeAt(++e.position)):A(e,\"unexpected end of the stream within a verbatim tag\")}else{for(;0!==i&&!v(i);)33===i&&(a?A(e,\"tag suffix cannot contain exclamation marks\"):(r=e.input.slice(t-1,e.position+1),p.test(r)||A(e,\"named tag handle cannot contain such characters\"),a=!0,t=e.position+1)),i=e.input.charCodeAt(++e.position);n=e.input.slice(t,e.position),h.test(n)&&A(e,\"tag suffix cannot contain flow indicator characters\")}return n&&!f.test(n)&&A(e,\"tag name cannot contain such characters: \"+n),o?e.tag=n:u.call(e.tagMap,r)?e.tag=e.tagMap[r]+n:\"!\"===r?e.tag=\"!\"+n:\"!!\"===r?e.tag=\"tag:yaml.org,2002:\"+n:A(e,'undeclared tag handle \"'+r+'\"'),!0}function R(e){var t,r;if(38!==(r=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&A(e,\"duplication of an anchor property\"),r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!v(r)&&!_(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&A(e,\"name of an anchor node must contain at least one character\"),e.anchor=e.input.slice(t,e.position),!0}function z(e,t,r,i,o){var a,s,l,c,h,p,f,d,b=1,D=!1,S=!1;if(null!==e.listener&&e.listener(\"open\",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,a=s=l=4===r||3===r,i&&I(e,!0,-1)&&(D=!0,e.lineIndent>t?b=1:e.lineIndent===t?b=0:e.lineIndent<t&&(b=-1)),1===b)for(;j(e)||R(e);)I(e,!0,-1)?(D=!0,l=a,e.lineIndent>t?b=1:e.lineIndent===t?b=0:e.lineIndent<t&&(b=-1)):l=!1;if(l&&(l=D||o),1!==b&&4!==r||(f=1===r||2===r?t:t+1,d=e.position-e.lineStart,1===b?l&&(B(e,d)||function(e,t,r){var n,i,o,a,s,u=e.tag,l=e.anchor,c={},h={},p=null,f=null,d=null,m=!1,_=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=c),s=e.input.charCodeAt(e.position);0!==s;){if(n=e.input.charCodeAt(e.position+1),o=e.line,a=e.position,63!==s&&58!==s||!v(n)){if(!z(e,r,2,!1,!0))break;if(e.line===o){for(s=e.input.charCodeAt(e.position);y(s);)s=e.input.charCodeAt(++e.position);if(58===s)v(s=e.input.charCodeAt(++e.position))||A(e,\"a whitespace character is expected after the key-value separator within a block mapping\"),m&&(k(e,c,h,p,f,null),p=f=d=null),_=!0,m=!1,i=!1,p=e.tag,f=e.result;else{if(!_)return e.tag=u,e.anchor=l,!0;A(e,\"can not read an implicit mapping pair; a colon is missed\")}}else{if(!_)return e.tag=u,e.anchor=l,!0;A(e,\"can not read a block mapping entry; a multiline key may not be an implicit key\")}}else 63===s?(m&&(k(e,c,h,p,f,null),p=f=d=null),_=!0,m=!0,i=!0):m?(m=!1,i=!0):A(e,\"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line\"),e.position+=1,s=n;if((e.line===o||e.lineIndent>t)&&(z(e,t,4,!0,i)&&(m?f=e.result:d=e.result),m||(k(e,c,h,p,f,d,o,a),p=f=d=null),I(e,!0,-1),s=e.input.charCodeAt(e.position)),e.lineIndent>t&&0!==s)A(e,\"bad indentation of a mapping entry\");else if(e.lineIndent<t)break}return m&&k(e,c,h,p,f,null),_&&(e.tag=u,e.anchor=l,e.kind=\"mapping\",e.result=c),_}(e,d,f))||function(e,t){var r,n,i,o,a,s,u,l,c,h,p=!0,f=e.tag,d=e.anchor,m={};if(91===(h=e.input.charCodeAt(e.position)))i=93,s=!1,n=[];else{if(123!==h)return!1;i=125,s=!0,n={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=n),h=e.input.charCodeAt(++e.position);0!==h;){if(I(e,!0,t),(h=e.input.charCodeAt(e.position))===i)return e.position++,e.tag=f,e.anchor=d,e.kind=s?\"mapping\":\"sequence\",e.result=n,!0;p||A(e,\"missed comma between flow collection entries\"),c=null,o=a=!1,63===h&&v(e.input.charCodeAt(e.position+1))&&(o=a=!0,e.position++,I(e,!0,t)),r=e.line,z(e,t,1,!1,!0),l=e.tag,u=e.result,I(e,!0,t),h=e.input.charCodeAt(e.position),!a&&e.line!==r||58!==h||(o=!0,h=e.input.charCodeAt(++e.position),I(e,!0,t),z(e,t,1,!1,!0),c=e.result),s?k(e,n,m,l,u,c):o?n.push(k(e,null,m,l,u,c)):n.push(u),I(e,!0,t),44===(h=e.input.charCodeAt(e.position))?(p=!0,h=e.input.charCodeAt(++e.position)):p=!1}A(e,\"unexpected end of the stream within a flow collection\")}(e,f)?S=!0:(s&&function(e,t){var r,i,o,a,s,u=1,l=!1,c=!1,h=t,p=0,f=!1;if(124===(a=e.input.charCodeAt(e.position)))i=!1;else{if(62!==a)return!1;i=!0}for(e.kind=\"scalar\",e.result=\"\";0!==a;)if(43===(a=e.input.charCodeAt(++e.position))||45===a)1===u?u=43===a?3:2:A(e,\"repeat of a chomping mode identifier\");else{if(!((o=48<=(s=a)&&s<=57?s-48:-1)>=0))break;0===o?A(e,\"bad explicit indentation width of a block scalar; it cannot be less than one\"):c?A(e,\"repeat of an indentation width identifier\"):(h=t+o-1,c=!0)}if(y(a)){do{a=e.input.charCodeAt(++e.position)}while(y(a));if(35===a)do{a=e.input.charCodeAt(++e.position)}while(!m(a)&&0!==a)}for(;0!==a;){for(P(e),e.lineIndent=0,a=e.input.charCodeAt(e.position);(!c||e.lineIndent<h)&&32===a;)e.lineIndent++,a=e.input.charCodeAt(++e.position);if(!c&&e.lineIndent>h&&(h=e.lineIndent),m(a))p++;else{if(e.lineIndent<h){3===u?e.result+=n.repeat(\"\\n\",l?1+p:p):1===u&&l&&(e.result+=\"\\n\");break}for(i?y(a)?(f=!0,e.result+=n.repeat(\"\\n\",l?1+p:p)):f?(f=!1,e.result+=n.repeat(\"\\n\",p+1)):0===p?l&&(e.result+=\" \"):e.result+=n.repeat(\"\\n\",p):e.result+=n.repeat(\"\\n\",l?1+p:p),l=!0,c=!0,p=0,r=e.position;!m(a)&&0!==a;)a=e.input.charCodeAt(++e.position);O(e,r,e.position,!1)}}return!0}(e,f)||function(e,t){var r,n,i;if(39!==(r=e.input.charCodeAt(e.position)))return!1;for(e.kind=\"scalar\",e.result=\"\",e.position++,n=i=e.position;0!==(r=e.input.charCodeAt(e.position));)if(39===r){if(O(e,n,e.position,!0),39!==(r=e.input.charCodeAt(++e.position)))return!0;n=e.position,e.position++,i=e.position}else m(r)?(O(e,n,i,!0),M(e,I(e,!1,t)),n=i=e.position):e.position===e.lineStart&&L(e)?A(e,\"unexpected end of the document within a single quoted scalar\"):(e.position++,i=e.position);A(e,\"unexpected end of the stream within a single quoted scalar\")}(e,f)||function(e,t){var r,n,i,o,a,s,u;if(34!==(s=e.input.charCodeAt(e.position)))return!1;for(e.kind=\"scalar\",e.result=\"\",e.position++,r=n=e.position;0!==(s=e.input.charCodeAt(e.position));){if(34===s)return O(e,r,e.position,!0),e.position++,!0;if(92===s){if(O(e,r,e.position,!0),m(s=e.input.charCodeAt(++e.position)))I(e,!1,t);else if(s<256&&w[s])e.result+=E[s],e.position++;else if((a=120===(u=s)?2:117===u?4:85===u?8:0)>0){for(i=a,o=0;i>0;i--)(a=g(s=e.input.charCodeAt(++e.position)))>=0?o=(o<<4)+a:A(e,\"expected hexadecimal character\");e.result+=x(o),e.position++}else A(e,\"unknown escape sequence\");r=n=e.position}else m(s)?(O(e,r,n,!0),M(e,I(e,!1,t)),r=n=e.position):e.position===e.lineStart&&L(e)?A(e,\"unexpected end of the document within a double quoted scalar\"):(e.position++,n=e.position)}A(e,\"unexpected end of the stream within a double quoted scalar\")}(e,f)?S=!0:!function(e){var t,r,n;if(42!==(n=e.input.charCodeAt(e.position)))return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!v(n)&&!_(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&A(e,\"name of an alias node must contain at least one character\"),r=e.input.slice(t,e.position),e.anchorMap.hasOwnProperty(r)||A(e,'unidentified alias \"'+r+'\"'),e.result=e.anchorMap[r],I(e,!0,-1),!0}(e)?function(e,t,r){var n,i,o,a,s,u,l,c,h=e.kind,p=e.result;if(v(c=e.input.charCodeAt(e.position))||_(c)||35===c||38===c||42===c||33===c||124===c||62===c||39===c||34===c||37===c||64===c||96===c)return!1;if((63===c||45===c)&&(v(n=e.input.charCodeAt(e.position+1))||r&&_(n)))return!1;for(e.kind=\"scalar\",e.result=\"\",i=o=e.position,a=!1;0!==c;){if(58===c){if(v(n=e.input.charCodeAt(e.position+1))||r&&_(n))break}else if(35===c){if(v(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&L(e)||r&&_(c))break;if(m(c)){if(s=e.line,u=e.lineStart,l=e.lineIndent,I(e,!1,-1),e.lineIndent>=t){a=!0,c=e.input.charCodeAt(e.position);continue}e.position=o,e.line=s,e.lineStart=u,e.lineIndent=l;break}}a&&(O(e,i,o,!1),M(e,e.line-s),i=o=e.position,a=!1),y(c)||(o=e.position+1),c=e.input.charCodeAt(++e.position)}return O(e,i,o,!1),!!e.result||(e.kind=h,e.result=p,!1)}(e,f,1===r)&&(S=!0,null===e.tag&&(e.tag=\"?\")):(S=!0,null===e.tag&&null===e.anchor||A(e,\"alias node should not have any properties\")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===b&&(S=l&&B(e,d))),null!==e.tag&&\"!\"!==e.tag)if(\"?\"===e.tag){for(null!==e.result&&\"scalar\"!==e.kind&&A(e,'unacceptable node kind for !<?> tag; it should be \"scalar\", not \"'+e.kind+'\"'),c=0,h=e.implicitTypes.length;c<h;c+=1)if((p=e.implicitTypes[c]).resolve(e.result)){e.result=p.construct(e.result),e.tag=p.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else u.call(e.typeMap[e.kind||\"fallback\"],e.tag)?(p=e.typeMap[e.kind||\"fallback\"][e.tag],null!==e.result&&p.kind!==e.kind&&A(e,\"unacceptable node kind for !<\"+e.tag+'> tag; it should be \"'+p.kind+'\", not \"'+e.kind+'\"'),p.resolve(e.result)?(e.result=p.construct(e.result),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):A(e,\"cannot resolve a node with !<\"+e.tag+\"> explicit tag\")):A(e,\"unknown tag !<\"+e.tag+\">\");return null!==e.listener&&e.listener(\"close\",e),null!==e.tag||null!==e.anchor||S}function U(e){var t,r,n,i,o=e.position,a=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap={},e.anchorMap={};0!==(i=e.input.charCodeAt(e.position))&&(I(e,!0,-1),i=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==i));){for(a=!0,i=e.input.charCodeAt(++e.position),t=e.position;0!==i&&!v(i);)i=e.input.charCodeAt(++e.position);for(n=[],(r=e.input.slice(t,e.position)).length<1&&A(e,\"directive name must not be less than one character in length\");0!==i;){for(;y(i);)i=e.input.charCodeAt(++e.position);if(35===i){do{i=e.input.charCodeAt(++e.position)}while(0!==i&&!m(i));break}if(m(i))break;for(t=e.position;0!==i&&!v(i);)i=e.input.charCodeAt(++e.position);n.push(e.input.slice(t,e.position))}0!==i&&P(e),u.call(T,r)?T[r](e,r,n):N(e,'unknown document directive \"'+r+'\"')}I(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,I(e,!0,-1)):a&&A(e,\"directives end mark is expected\"),z(e,e.lineIndent-1,4,!1,!0),I(e,!0,-1),e.checkLineBreaks&&c.test(e.input.slice(o,e.position))&&N(e,\"non-ASCII line breaks are interpreted as content\"),e.documents.push(e.result),e.position===e.lineStart&&L(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,I(e,!0,-1)):e.position<e.length-1&&A(e,\"end of the stream or a document separator is expected\")}function G(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+=\"\\n\"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var r=new S(e,t),n=e.indexOf(\"\\0\");for(-1!==n&&(r.position=n,A(r,\"null byte is not allowed in input\")),r.input+=\"\\0\";32===r.input.charCodeAt(r.position);)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)U(r);return r.documents}function X(e,t,r){null!==t&&\"object\"==typeof t&&void 0===r&&(r=t,t=null);var n=G(e,r);if(\"function\"!=typeof t)return n;for(var i=0,o=n.length;i<o;i+=1)t(n[i])}function q(e,t){var r=G(e,t);if(0!==r.length){if(1===r.length)return r[0];throw new i(\"expected a single document in the stream, but found more\")}}e.exports.loadAll=X,e.exports.load=q,e.exports.safeLoadAll=function(e,t,r){return\"object\"==typeof t&&null!==t&&void 0===r&&(r=t,t=null),X(e,t,n.extend({schema:a},r))},e.exports.safeLoad=function(e,t){return q(e,n.extend({schema:a},t))}},function(e,t,r){\"use strict\";var n=r(38);function i(e,t,r,n,i){this.name=e,this.buffer=t,this.position=r,this.line=n,this.column=i}i.prototype.getSnippet=function(e,t){var r,i,o,a,s;if(!this.buffer)return null;for(e=e||4,t=t||75,r=\"\",i=this.position;i>0&&-1===\"\\0\\r\\n\\u2028\\u2029\".indexOf(this.buffer.charAt(i-1));)if(i-=1,this.position-i>t/2-1){r=\" ... \",i+=5;break}for(o=\"\",a=this.position;a<this.buffer.length&&-1===\"\\0\\r\\n\\u2028\\u2029\".indexOf(this.buffer.charAt(a));)if((a+=1)-this.position>t/2-1){o=\" ... \",a-=5;break}return s=this.buffer.slice(i,a),n.repeat(\" \",e)+r+s+o+\"\\n\"+n.repeat(\" \",e+this.position-i+r.length)+\"^\"},i.prototype.toString=function(e){var t,r=\"\";return this.name&&(r+='in \"'+this.name+'\" '),r+=\"at line \"+(this.line+1)+\", column \"+(this.column+1),e||(t=this.getSnippet())&&(r+=\":\\n\"+t),r},e.exports=i},function(e,t,r){\"use strict\";var n=r(10);e.exports=new n(\"tag:yaml.org,2002:str\",{kind:\"scalar\",construct:function(e){return null!==e?e:\"\"}})},function(e,t,r){\"use strict\";var n=r(10);e.exports=new n(\"tag:yaml.org,2002:seq\",{kind:\"sequence\",construct:function(e){return null!==e?e:[]}})},function(e,t,r){\"use strict\";var n=r(10);e.exports=new n(\"tag:yaml.org,2002:map\",{kind:\"mapping\",construct:function(e){return null!==e?e:{}}})},function(e,t,r){\"use strict\";var n=r(10);e.exports=new n(\"tag:yaml.org,2002:null\",{kind:\"scalar\",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&\"~\"===e||4===t&&(\"null\"===e||\"Null\"===e||\"NULL\"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return\"~\"},lowercase:function(){return\"null\"},uppercase:function(){return\"NULL\"},camelcase:function(){return\"Null\"}},defaultStyle:\"lowercase\"})},function(e,t,r){\"use strict\";var n=r(10);e.exports=new n(\"tag:yaml.org,2002:bool\",{kind:\"scalar\",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&(\"true\"===e||\"True\"===e||\"TRUE\"===e)||5===t&&(\"false\"===e||\"False\"===e||\"FALSE\"===e)},construct:function(e){return\"true\"===e||\"True\"===e||\"TRUE\"===e},predicate:function(e){return\"[object Boolean]\"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?\"true\":\"false\"},uppercase:function(e){return e?\"TRUE\":\"FALSE\"},camelcase:function(e){return e?\"True\":\"False\"}},defaultStyle:\"lowercase\"})},function(e,t,r){\"use strict\";var n=r(38),i=r(10);function o(e){return 48<=e&&e<=55}function a(e){return 48<=e&&e<=57}e.exports=new i(\"tag:yaml.org,2002:int\",{kind:\"scalar\",resolve:function(e){if(null===e)return!1;var t,r,n=e.length,i=0,s=!1;if(!n)return!1;if(\"-\"!==(t=e[i])&&\"+\"!==t||(t=e[++i]),\"0\"===t){if(i+1===n)return!0;if(\"b\"===(t=e[++i])){for(i++;i<n;i++)if(\"_\"!==(t=e[i])){if(\"0\"!==t&&\"1\"!==t)return!1;s=!0}return s&&\"_\"!==t}if(\"x\"===t){for(i++;i<n;i++)if(\"_\"!==(t=e[i])){if(!(48<=(r=e.charCodeAt(i))&&r<=57||65<=r&&r<=70||97<=r&&r<=102))return!1;s=!0}return s&&\"_\"!==t}for(;i<n;i++)if(\"_\"!==(t=e[i])){if(!o(e.charCodeAt(i)))return!1;s=!0}return s&&\"_\"!==t}if(\"_\"===t)return!1;for(;i<n;i++)if(\"_\"!==(t=e[i])){if(\":\"===t)break;if(!a(e.charCodeAt(i)))return!1;s=!0}return!(!s||\"_\"===t)&&(\":\"!==t||/^(:[0-5]?[0-9])+$/.test(e.slice(i)))},construct:function(e){var t,r,n=e,i=1,o=[];return-1!==n.indexOf(\"_\")&&(n=n.replace(/_/g,\"\")),\"-\"!==(t=n[0])&&\"+\"!==t||(\"-\"===t&&(i=-1),t=(n=n.slice(1))[0]),\"0\"===n?0:\"0\"===t?\"b\"===n[1]?i*parseInt(n.slice(2),2):\"x\"===n[1]?i*parseInt(n,16):i*parseInt(n,8):-1!==n.indexOf(\":\")?(n.split(\":\").forEach((function(e){o.unshift(parseInt(e,10))})),n=0,r=1,o.forEach((function(e){n+=e*r,r*=60})),i*n):i*parseInt(n,10)},predicate:function(e){return\"[object Number]\"===Object.prototype.toString.call(e)&&e%1==0&&!n.isNegativeZero(e)},represent:{binary:function(e){return e>=0?\"0b\"+e.toString(2):\"-0b\"+e.toString(2).slice(1)},octal:function(e){return e>=0?\"0\"+e.toString(8):\"-0\"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?\"0x\"+e.toString(16).toUpperCase():\"-0x\"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:\"decimal\",styleAliases:{binary:[2,\"bin\"],octal:[8,\"oct\"],decimal:[10,\"dec\"],hexadecimal:[16,\"hex\"]}})},function(e,t,r){\"use strict\";var n=r(38),i=r(10),o=new RegExp(\"^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\\\.[0-9_]*|[-+]?\\\\.(?:inf|Inf|INF)|\\\\.(?:nan|NaN|NAN))$\");var a=/^[-+]?[0-9]+e/;e.exports=new i(\"tag:yaml.org,2002:float\",{kind:\"scalar\",resolve:function(e){return null!==e&&!(!o.test(e)||\"_\"===e[e.length-1])},construct:function(e){var t,r,n,i;return r=\"-\"===(t=e.replace(/_/g,\"\").toLowerCase())[0]?-1:1,i=[],\"+-\".indexOf(t[0])>=0&&(t=t.slice(1)),\".inf\"===t?1===r?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:\".nan\"===t?NaN:t.indexOf(\":\")>=0?(t.split(\":\").forEach((function(e){i.unshift(parseFloat(e,10))})),t=0,n=1,i.forEach((function(e){t+=e*n,n*=60})),r*t):r*parseFloat(t,10)},predicate:function(e){return\"[object Number]\"===Object.prototype.toString.call(e)&&(e%1!=0||n.isNegativeZero(e))},represent:function(e,t){var r;if(isNaN(e))switch(t){case\"lowercase\":return\".nan\";case\"uppercase\":return\".NAN\";case\"camelcase\":return\".NaN\"}else if(Number.POSITIVE_INFINITY===e)switch(t){case\"lowercase\":return\".inf\";case\"uppercase\":return\".INF\";case\"camelcase\":return\".Inf\"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case\"lowercase\":return\"-.inf\";case\"uppercase\":return\"-.INF\";case\"camelcase\":return\"-.Inf\"}else if(n.isNegativeZero(e))return\"-0.0\";return r=e.toString(10),a.test(r)?r.replace(\"e\",\".e\"):r},defaultStyle:\"lowercase\"})},function(e,t,r){\"use strict\";var n=r(10),i=new RegExp(\"^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$\"),o=new RegExp(\"^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\\\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\\\.([0-9]*))?(?:[ \\\\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$\");e.exports=new n(\"tag:yaml.org,2002:timestamp\",{kind:\"scalar\",resolve:function(e){return null!==e&&(null!==i.exec(e)||null!==o.exec(e))},construct:function(e){var t,r,n,a,s,u,l,c,h=0,p=null;if(null===(t=i.exec(e))&&(t=o.exec(e)),null===t)throw new Error(\"Date resolve error\");if(r=+t[1],n=+t[2]-1,a=+t[3],!t[4])return new Date(Date.UTC(r,n,a));if(s=+t[4],u=+t[5],l=+t[6],t[7]){for(h=t[7].slice(0,3);h.length<3;)h+=\"0\";h=+h}return t[9]&&(p=6e4*(60*+t[10]+ +(t[11]||0)),\"-\"===t[9]&&(p=-p)),c=new Date(Date.UTC(r,n,a,s,u,l,h)),p&&c.setTime(c.getTime()-p),c},instanceOf:Date,represent:function(e){return e.toISOString()}})},function(e,t,r){\"use strict\";var n=r(10);e.exports=new n(\"tag:yaml.org,2002:merge\",{kind:\"scalar\",resolve:function(e){return\"<<\"===e||null===e}})},function(e,t,r){\"use strict\";var n;try{n=r(145).Buffer}catch(e){}var i=r(10),o=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\\n\\r\";e.exports=new i(\"tag:yaml.org,2002:binary\",{kind:\"scalar\",resolve:function(e){if(null===e)return!1;var t,r,n=0,i=e.length,a=o;for(r=0;r<i;r++)if(!((t=a.indexOf(e.charAt(r)))>64)){if(t<0)return!1;n+=6}return n%8==0},construct:function(e){var t,r,i=e.replace(/[\\r\\n=]/g,\"\"),a=i.length,s=o,u=0,l=[];for(t=0;t<a;t++)t%4==0&&t&&(l.push(u>>16&255),l.push(u>>8&255),l.push(255&u)),u=u<<6|s.indexOf(i.charAt(t));return 0===(r=a%4*6)?(l.push(u>>16&255),l.push(u>>8&255),l.push(255&u)):18===r?(l.push(u>>10&255),l.push(u>>2&255)):12===r&&l.push(u>>4&255),n?n.from?n.from(l):new n(l):l},predicate:function(e){return n&&n.isBuffer(e)},represent:function(e){var t,r,n=\"\",i=0,a=e.length,s=o;for(t=0;t<a;t++)t%3==0&&t&&(n+=s[i>>18&63],n+=s[i>>12&63],n+=s[i>>6&63],n+=s[63&i]),i=(i<<8)+e[t];return 0===(r=a%3)?(n+=s[i>>18&63],n+=s[i>>12&63],n+=s[i>>6&63],n+=s[63&i]):2===r?(n+=s[i>>10&63],n+=s[i>>4&63],n+=s[i<<2&63],n+=s[64]):1===r&&(n+=s[i>>2&63],n+=s[i<<4&63],n+=s[64],n+=s[64]),n}})},function(e,t,r){\"use strict\";var n=r(10),i=Object.prototype.hasOwnProperty,o=Object.prototype.toString;e.exports=new n(\"tag:yaml.org,2002:omap\",{kind:\"sequence\",resolve:function(e){if(null===e)return!0;var t,r,n,a,s,u=[],l=e;for(t=0,r=l.length;t<r;t+=1){if(n=l[t],s=!1,\"[object Object]\"!==o.call(n))return!1;for(a in n)if(i.call(n,a)){if(s)return!1;s=!0}if(!s)return!1;if(-1!==u.indexOf(a))return!1;u.push(a)}return!0},construct:function(e){return null!==e?e:[]}})},function(e,t,r){\"use strict\";var n=r(10),i=Object.prototype.toString;e.exports=new n(\"tag:yaml.org,2002:pairs\",{kind:\"sequence\",resolve:function(e){if(null===e)return!0;var t,r,n,o,a,s=e;for(a=new Array(s.length),t=0,r=s.length;t<r;t+=1){if(n=s[t],\"[object Object]\"!==i.call(n))return!1;if(1!==(o=Object.keys(n)).length)return!1;a[t]=[o[0],n[o[0]]]}return!0},construct:function(e){if(null===e)return[];var t,r,n,i,o,a=e;for(o=new Array(a.length),t=0,r=a.length;t<r;t+=1)n=a[t],i=Object.keys(n),o[t]=[i[0],n[i[0]]];return o}})},function(e,t,r){\"use strict\";var n=r(10),i=Object.prototype.hasOwnProperty;e.exports=new n(\"tag:yaml.org,2002:set\",{kind:\"mapping\",resolve:function(e){if(null===e)return!0;var t,r=e;for(t in r)if(i.call(r,t)&&null!==r[t])return!1;return!0},construct:function(e){return null!==e?e:{}}})},function(e,t,r){\"use strict\";var n=r(10);e.exports=new n(\"tag:yaml.org,2002:js/undefined\",{kind:\"scalar\",resolve:function(){return!0},construct:function(){},predicate:function(e){return void 0===e},represent:function(){return\"\"}})},function(e,t,r){\"use strict\";var n=r(10);e.exports=new n(\"tag:yaml.org,2002:js/regexp\",{kind:\"scalar\",resolve:function(e){if(null===e)return!1;if(0===e.length)return!1;var t=e,r=/\\/([gim]*)$/.exec(e),n=\"\";if(\"/\"===t[0]){if(r&&(n=r[1]),n.length>3)return!1;if(\"/\"!==t[t.length-n.length-1])return!1}return!0},construct:function(e){var t=e,r=/\\/([gim]*)$/.exec(e),n=\"\";return\"/\"===t[0]&&(r&&(n=r[1]),t=t.slice(1,t.length-n.length-1)),new RegExp(t,n)},predicate:function(e){return\"[object RegExp]\"===Object.prototype.toString.call(e)},represent:function(e){var t=\"/\"+e.source+\"/\";return e.global&&(t+=\"g\"),e.multiline&&(t+=\"m\"),e.ignoreCase&&(t+=\"i\"),t}})},function(e,t,r){\"use strict\";var n;try{n=r(302)}catch(e){\"undefined\"!=typeof window&&(n=window.esprima)}var i=r(10);e.exports=new i(\"tag:yaml.org,2002:js/function\",{kind:\"scalar\",resolve:function(e){if(null===e)return!1;try{var t=\"(\"+e+\")\",r=n.parse(t,{range:!0});return\"Program\"===r.type&&1===r.body.length&&\"ExpressionStatement\"===r.body[0].type&&(\"ArrowFunctionExpression\"===r.body[0].expression.type||\"FunctionExpression\"===r.body[0].expression.type)}catch(e){return!1}},construct:function(e){var t,r=\"(\"+e+\")\",i=n.parse(r,{range:!0}),o=[];if(\"Program\"!==i.type||1!==i.body.length||\"ExpressionStatement\"!==i.body[0].type||\"ArrowFunctionExpression\"!==i.body[0].expression.type&&\"FunctionExpression\"!==i.body[0].expression.type)throw new Error(\"Failed to resolve function\");return i.body[0].expression.params.forEach((function(e){o.push(e.name)})),t=i.body[0].expression.body.range,\"BlockStatement\"===i.body[0].expression.body.type?new Function(o,r.slice(t[0]+1,t[1]-1)):new Function(o,\"return \"+r.slice(t[0],t[1]))},predicate:function(e){return\"[object Function]\"===Object.prototype.toString.call(e)},represent:function(e){return e.toString()}})},function(e,t,r){var n;n=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}return r.m=e,r.c=t,r.p=\"\",r(0)}([function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(1),i=r(3),o=r(8),a=r(15);function s(e,t,r){var a=null,s=function(e,t){r&&r(e,t),a&&a.visit(e,t)},u=\"function\"==typeof r?s:null,l=!1;if(t){l=\"boolean\"==typeof t.comment&&t.comment;var c=\"boolean\"==typeof t.attachComment&&t.attachComment;(l||c)&&((a=new n.CommentHandler).attach=c,t.comment=!0,u=s)}var h,p=!1;t&&\"string\"==typeof t.sourceType&&(p=\"module\"===t.sourceType),h=t&&\"boolean\"==typeof t.jsx&&t.jsx?new i.JSXParser(e,t,u):new o.Parser(e,t,u);var f=p?h.parseModule():h.parseScript();return l&&a&&(f.comments=a.comments),h.config.tokens&&(f.tokens=h.tokens),h.config.tolerant&&(f.errors=h.errorHandler.errors),f}t.parse=s,t.parseModule=function(e,t,r){var n=t||{};return n.sourceType=\"module\",s(e,n,r)},t.parseScript=function(e,t,r){var n=t||{};return n.sourceType=\"script\",s(e,n,r)},t.tokenize=function(e,t,r){var n,i=new a.Tokenizer(e,t);n=[];try{for(;;){var o=i.getNextToken();if(!o)break;r&&(o=r(o)),n.push(o)}}catch(e){i.errorHandler.tolerate(e)}return i.errorHandler.tolerant&&(n.errors=i.errors()),n};var u=r(2);t.Syntax=u.Syntax,t.version=\"4.0.1\"},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(2),i=function(){function e(){this.attach=!1,this.comments=[],this.stack=[],this.leading=[],this.trailing=[]}return e.prototype.insertInnerComments=function(e,t){if(e.type===n.Syntax.BlockStatement&&0===e.body.length){for(var r=[],i=this.leading.length-1;i>=0;--i){var o=this.leading[i];t.end.offset>=o.start&&(r.unshift(o.comment),this.leading.splice(i,1),this.trailing.splice(i,1))}r.length&&(e.innerComments=r)}},e.prototype.findTrailingComments=function(e){var t=[];if(this.trailing.length>0){for(var r=this.trailing.length-1;r>=0;--r){var n=this.trailing[r];n.start>=e.end.offset&&t.unshift(n.comment)}return this.trailing.length=0,t}var i=this.stack[this.stack.length-1];if(i&&i.node.trailingComments){var o=i.node.trailingComments[0];o&&o.range[0]>=e.end.offset&&(t=i.node.trailingComments,delete i.node.trailingComments)}return t},e.prototype.findLeadingComments=function(e){for(var t,r=[];this.stack.length>0&&((o=this.stack[this.stack.length-1])&&o.start>=e.start.offset);)t=o.node,this.stack.pop();if(t){for(var n=(t.leadingComments?t.leadingComments.length:0)-1;n>=0;--n){var i=t.leadingComments[n];i.range[1]<=e.start.offset&&(r.unshift(i),t.leadingComments.splice(n,1))}return t.leadingComments&&0===t.leadingComments.length&&delete t.leadingComments,r}for(n=this.leading.length-1;n>=0;--n){var o;(o=this.leading[n]).start<=e.start.offset&&(r.unshift(o.comment),this.leading.splice(n,1))}return r},e.prototype.visitNode=function(e,t){if(!(e.type===n.Syntax.Program&&e.body.length>0)){this.insertInnerComments(e,t);var r=this.findTrailingComments(t),i=this.findLeadingComments(t);i.length>0&&(e.leadingComments=i),r.length>0&&(e.trailingComments=r),this.stack.push({node:e,start:t.start.offset})}},e.prototype.visitComment=function(e,t){var r=\"L\"===e.type[0]?\"Line\":\"Block\",n={type:r,value:e.value};if(e.range&&(n.range=e.range),e.loc&&(n.loc=e.loc),this.comments.push(n),this.attach){var i={comment:{type:r,value:e.value,range:[t.start.offset,t.end.offset]},start:t.start.offset};e.loc&&(i.comment.loc=e.loc),e.type=r,this.leading.push(i),this.trailing.push(i)}},e.prototype.visit=function(e,t){\"LineComment\"===e.type||\"BlockComment\"===e.type?this.visitComment(e,t):this.attach&&this.visitNode(e,t)},e}();t.CommentHandler=i},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.Syntax={AssignmentExpression:\"AssignmentExpression\",AssignmentPattern:\"AssignmentPattern\",ArrayExpression:\"ArrayExpression\",ArrayPattern:\"ArrayPattern\",ArrowFunctionExpression:\"ArrowFunctionExpression\",AwaitExpression:\"AwaitExpression\",BlockStatement:\"BlockStatement\",BinaryExpression:\"BinaryExpression\",BreakStatement:\"BreakStatement\",CallExpression:\"CallExpression\",CatchClause:\"CatchClause\",ClassBody:\"ClassBody\",ClassDeclaration:\"ClassDeclaration\",ClassExpression:\"ClassExpression\",ConditionalExpression:\"ConditionalExpression\",ContinueStatement:\"ContinueStatement\",DoWhileStatement:\"DoWhileStatement\",DebuggerStatement:\"DebuggerStatement\",EmptyStatement:\"EmptyStatement\",ExportAllDeclaration:\"ExportAllDeclaration\",ExportDefaultDeclaration:\"ExportDefaultDeclaration\",ExportNamedDeclaration:\"ExportNamedDeclaration\",ExportSpecifier:\"ExportSpecifier\",ExpressionStatement:\"ExpressionStatement\",ForStatement:\"ForStatement\",ForOfStatement:\"ForOfStatement\",ForInStatement:\"ForInStatement\",FunctionDeclaration:\"FunctionDeclaration\",FunctionExpression:\"FunctionExpression\",Identifier:\"Identifier\",IfStatement:\"IfStatement\",ImportDeclaration:\"ImportDeclaration\",ImportDefaultSpecifier:\"ImportDefaultSpecifier\",ImportNamespaceSpecifier:\"ImportNamespaceSpecifier\",ImportSpecifier:\"ImportSpecifier\",Literal:\"Literal\",LabeledStatement:\"LabeledStatement\",LogicalExpression:\"LogicalExpression\",MemberExpression:\"MemberExpression\",MetaProperty:\"MetaProperty\",MethodDefinition:\"MethodDefinition\",NewExpression:\"NewExpression\",ObjectExpression:\"ObjectExpression\",ObjectPattern:\"ObjectPattern\",Program:\"Program\",Property:\"Property\",RestElement:\"RestElement\",ReturnStatement:\"ReturnStatement\",SequenceExpression:\"SequenceExpression\",SpreadElement:\"SpreadElement\",Super:\"Super\",SwitchCase:\"SwitchCase\",SwitchStatement:\"SwitchStatement\",TaggedTemplateExpression:\"TaggedTemplateExpression\",TemplateElement:\"TemplateElement\",TemplateLiteral:\"TemplateLiteral\",ThisExpression:\"ThisExpression\",ThrowStatement:\"ThrowStatement\",TryStatement:\"TryStatement\",UnaryExpression:\"UnaryExpression\",UpdateExpression:\"UpdateExpression\",VariableDeclaration:\"VariableDeclaration\",VariableDeclarator:\"VariableDeclarator\",WhileStatement:\"WhileStatement\",WithStatement:\"WithStatement\",YieldExpression:\"YieldExpression\"}},function(e,t,r){\"use strict\";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(4),a=r(5),s=r(6),u=r(7),l=r(8),c=r(13),h=r(14);function p(e){var t;switch(e.type){case s.JSXSyntax.JSXIdentifier:t=e.name;break;case s.JSXSyntax.JSXNamespacedName:var r=e;t=p(r.namespace)+\":\"+p(r.name);break;case s.JSXSyntax.JSXMemberExpression:var n=e;t=p(n.object)+\".\"+p(n.property)}return t}c.TokenName[100]=\"JSXIdentifier\",c.TokenName[101]=\"JSXText\";var f=function(e){function t(t,r,n){return e.call(this,t,r,n)||this}return i(t,e),t.prototype.parsePrimaryExpression=function(){return this.match(\"<\")?this.parseJSXRoot():e.prototype.parsePrimaryExpression.call(this)},t.prototype.startJSX=function(){this.scanner.index=this.startMarker.index,this.scanner.lineNumber=this.startMarker.line,this.scanner.lineStart=this.startMarker.index-this.startMarker.column},t.prototype.finishJSX=function(){this.nextToken()},t.prototype.reenterJSX=function(){this.startJSX(),this.expectJSX(\"}\"),this.config.tokens&&this.tokens.pop()},t.prototype.createJSXNode=function(){return this.collectComments(),{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},t.prototype.createJSXChildNode=function(){return{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},t.prototype.scanXHTMLEntity=function(e){for(var t=\"&\",r=!0,n=!1,i=!1,a=!1;!this.scanner.eof()&&r&&!n;){var s=this.scanner.source[this.scanner.index];if(s===e)break;if(n=\";\"===s,t+=s,++this.scanner.index,!n)switch(t.length){case 2:i=\"#\"===s;break;case 3:i&&(r=(a=\"x\"===s)||o.Character.isDecimalDigit(s.charCodeAt(0)),i=i&&!a);break;default:r=(r=r&&!(i&&!o.Character.isDecimalDigit(s.charCodeAt(0))))&&!(a&&!o.Character.isHexDigit(s.charCodeAt(0)))}}if(r&&n&&t.length>2){var u=t.substr(1,t.length-2);i&&u.length>1?t=String.fromCharCode(parseInt(u.substr(1),10)):a&&u.length>2?t=String.fromCharCode(parseInt(\"0\"+u.substr(1),16)):i||a||!h.XHTMLEntities[u]||(t=h.XHTMLEntities[u])}return t},t.prototype.lexJSX=function(){var e=this.scanner.source.charCodeAt(this.scanner.index);if(60===e||62===e||47===e||58===e||61===e||123===e||125===e)return{type:7,value:s=this.scanner.source[this.scanner.index++],lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index-1,end:this.scanner.index};if(34===e||39===e){for(var t=this.scanner.index,r=this.scanner.source[this.scanner.index++],n=\"\";!this.scanner.eof()&&(u=this.scanner.source[this.scanner.index++])!==r;)n+=\"&\"===u?this.scanXHTMLEntity(r):u;return{type:8,value:n,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:t,end:this.scanner.index}}if(46===e){var i=this.scanner.source.charCodeAt(this.scanner.index+1),a=this.scanner.source.charCodeAt(this.scanner.index+2),s=46===i&&46===a?\"...\":\".\";return t=this.scanner.index,this.scanner.index+=s.length,{type:7,value:s,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:t,end:this.scanner.index}}if(96===e)return{type:10,value:\"\",lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index,end:this.scanner.index};if(o.Character.isIdentifierStart(e)&&92!==e){for(t=this.scanner.index,++this.scanner.index;!this.scanner.eof();){var u=this.scanner.source.charCodeAt(this.scanner.index);if(o.Character.isIdentifierPart(u)&&92!==u)++this.scanner.index;else{if(45!==u)break;++this.scanner.index}}return{type:100,value:this.scanner.source.slice(t,this.scanner.index),lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:t,end:this.scanner.index}}return this.scanner.lex()},t.prototype.nextJSXToken=function(){this.collectComments(),this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;var e=this.lexJSX();return this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.config.tokens&&this.tokens.push(this.convertToken(e)),e},t.prototype.nextJSXText=function(){this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;for(var e=this.scanner.index,t=\"\";!this.scanner.eof();){var r=this.scanner.source[this.scanner.index];if(\"{\"===r||\"<\"===r)break;++this.scanner.index,t+=r,o.Character.isLineTerminator(r.charCodeAt(0))&&(++this.scanner.lineNumber,\"\\r\"===r&&\"\\n\"===this.scanner.source[this.scanner.index]&&++this.scanner.index,this.scanner.lineStart=this.scanner.index)}this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart;var n={type:101,value:t,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:e,end:this.scanner.index};return t.length>0&&this.config.tokens&&this.tokens.push(this.convertToken(n)),n},t.prototype.peekJSXToken=function(){var e=this.scanner.saveState();this.scanner.scanComments();var t=this.lexJSX();return this.scanner.restoreState(e),t},t.prototype.expectJSX=function(e){var t=this.nextJSXToken();7===t.type&&t.value===e||this.throwUnexpectedToken(t)},t.prototype.matchJSX=function(e){var t=this.peekJSXToken();return 7===t.type&&t.value===e},t.prototype.parseJSXIdentifier=function(){var e=this.createJSXNode(),t=this.nextJSXToken();return 100!==t.type&&this.throwUnexpectedToken(t),this.finalize(e,new a.JSXIdentifier(t.value))},t.prototype.parseJSXElementName=function(){var e=this.createJSXNode(),t=this.parseJSXIdentifier();if(this.matchJSX(\":\")){var r=t;this.expectJSX(\":\");var n=this.parseJSXIdentifier();t=this.finalize(e,new a.JSXNamespacedName(r,n))}else if(this.matchJSX(\".\"))for(;this.matchJSX(\".\");){var i=t;this.expectJSX(\".\");var o=this.parseJSXIdentifier();t=this.finalize(e,new a.JSXMemberExpression(i,o))}return t},t.prototype.parseJSXAttributeName=function(){var e,t=this.createJSXNode(),r=this.parseJSXIdentifier();if(this.matchJSX(\":\")){var n=r;this.expectJSX(\":\");var i=this.parseJSXIdentifier();e=this.finalize(t,new a.JSXNamespacedName(n,i))}else e=r;return e},t.prototype.parseJSXStringLiteralAttribute=function(){var e=this.createJSXNode(),t=this.nextJSXToken();8!==t.type&&this.throwUnexpectedToken(t);var r=this.getTokenRaw(t);return this.finalize(e,new u.Literal(t.value,r))},t.prototype.parseJSXExpressionAttribute=function(){var e=this.createJSXNode();this.expectJSX(\"{\"),this.finishJSX(),this.match(\"}\")&&this.tolerateError(\"JSX attributes must only be assigned a non-empty expression\");var t=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(e,new a.JSXExpressionContainer(t))},t.prototype.parseJSXAttributeValue=function(){return this.matchJSX(\"{\")?this.parseJSXExpressionAttribute():this.matchJSX(\"<\")?this.parseJSXElement():this.parseJSXStringLiteralAttribute()},t.prototype.parseJSXNameValueAttribute=function(){var e=this.createJSXNode(),t=this.parseJSXAttributeName(),r=null;return this.matchJSX(\"=\")&&(this.expectJSX(\"=\"),r=this.parseJSXAttributeValue()),this.finalize(e,new a.JSXAttribute(t,r))},t.prototype.parseJSXSpreadAttribute=function(){var e=this.createJSXNode();this.expectJSX(\"{\"),this.expectJSX(\"...\"),this.finishJSX();var t=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(e,new a.JSXSpreadAttribute(t))},t.prototype.parseJSXAttributes=function(){for(var e=[];!this.matchJSX(\"/\")&&!this.matchJSX(\">\");){var t=this.matchJSX(\"{\")?this.parseJSXSpreadAttribute():this.parseJSXNameValueAttribute();e.push(t)}return e},t.prototype.parseJSXOpeningElement=function(){var e=this.createJSXNode();this.expectJSX(\"<\");var t=this.parseJSXElementName(),r=this.parseJSXAttributes(),n=this.matchJSX(\"/\");return n&&this.expectJSX(\"/\"),this.expectJSX(\">\"),this.finalize(e,new a.JSXOpeningElement(t,n,r))},t.prototype.parseJSXBoundaryElement=function(){var e=this.createJSXNode();if(this.expectJSX(\"<\"),this.matchJSX(\"/\")){this.expectJSX(\"/\");var t=this.parseJSXElementName();return this.expectJSX(\">\"),this.finalize(e,new a.JSXClosingElement(t))}var r=this.parseJSXElementName(),n=this.parseJSXAttributes(),i=this.matchJSX(\"/\");return i&&this.expectJSX(\"/\"),this.expectJSX(\">\"),this.finalize(e,new a.JSXOpeningElement(r,i,n))},t.prototype.parseJSXEmptyExpression=function(){var e=this.createJSXChildNode();return this.collectComments(),this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.finalize(e,new a.JSXEmptyExpression)},t.prototype.parseJSXExpressionContainer=function(){var e,t=this.createJSXNode();return this.expectJSX(\"{\"),this.matchJSX(\"}\")?(e=this.parseJSXEmptyExpression(),this.expectJSX(\"}\")):(this.finishJSX(),e=this.parseAssignmentExpression(),this.reenterJSX()),this.finalize(t,new a.JSXExpressionContainer(e))},t.prototype.parseJSXChildren=function(){for(var e=[];!this.scanner.eof();){var t=this.createJSXChildNode(),r=this.nextJSXText();if(r.start<r.end){var n=this.getTokenRaw(r),i=this.finalize(t,new a.JSXText(r.value,n));e.push(i)}if(\"{\"!==this.scanner.source[this.scanner.index])break;var o=this.parseJSXExpressionContainer();e.push(o)}return e},t.prototype.parseComplexJSXElement=function(e){for(var t=[];!this.scanner.eof();){e.children=e.children.concat(this.parseJSXChildren());var r=this.createJSXChildNode(),n=this.parseJSXBoundaryElement();if(n.type===s.JSXSyntax.JSXOpeningElement){var i=n;if(i.selfClosing){var o=this.finalize(r,new a.JSXElement(i,[],null));e.children.push(o)}else t.push(e),e={node:r,opening:i,closing:null,children:[]}}if(n.type===s.JSXSyntax.JSXClosingElement){e.closing=n;var u=p(e.opening.name);if(u!==p(e.closing.name)&&this.tolerateError(\"Expected corresponding JSX closing tag for %0\",u),!(t.length>0))break;o=this.finalize(e.node,new a.JSXElement(e.opening,e.children,e.closing)),(e=t[t.length-1]).children.push(o),t.pop()}}return e},t.prototype.parseJSXElement=function(){var e=this.createJSXNode(),t=this.parseJSXOpeningElement(),r=[],n=null;if(!t.selfClosing){var i=this.parseComplexJSXElement({node:e,opening:t,closing:n,children:r});r=i.children,n=i.closing}return this.finalize(e,new a.JSXElement(t,r,n))},t.prototype.parseJSXRoot=function(){this.config.tokens&&this.tokens.pop(),this.startJSX();var e=this.parseJSXElement();return this.finishJSX(),e},t.prototype.isStartOfExpression=function(){return e.prototype.isStartOfExpression.call(this)||this.match(\"<\")},t}(l.Parser);t.JSXParser=f},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r={NonAsciiIdentifierStart:/[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B4\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0AF9\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58-\\u0C5A\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D5F-\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F5\\u13F8-\\u13FD\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2118-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309B-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FD5\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA7AD\\uA7B0-\\uA7B7\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA8FD\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB65\\uAB70-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]|\\uD800[\\uDC00-\\uDC0B\\uDC0D-\\uDC26\\uDC28-\\uDC3A\\uDC3C\\uDC3D\\uDC3F-\\uDC4D\\uDC50-\\uDC5D\\uDC80-\\uDCFA\\uDD40-\\uDD74\\uDE80-\\uDE9C\\uDEA0-\\uDED0\\uDF00-\\uDF1F\\uDF30-\\uDF4A\\uDF50-\\uDF75\\uDF80-\\uDF9D\\uDFA0-\\uDFC3\\uDFC8-\\uDFCF\\uDFD1-\\uDFD5]|\\uD801[\\uDC00-\\uDC9D\\uDD00-\\uDD27\\uDD30-\\uDD63\\uDE00-\\uDF36\\uDF40-\\uDF55\\uDF60-\\uDF67]|\\uD802[\\uDC00-\\uDC05\\uDC08\\uDC0A-\\uDC35\\uDC37\\uDC38\\uDC3C\\uDC3F-\\uDC55\\uDC60-\\uDC76\\uDC80-\\uDC9E\\uDCE0-\\uDCF2\\uDCF4\\uDCF5\\uDD00-\\uDD15\\uDD20-\\uDD39\\uDD80-\\uDDB7\\uDDBE\\uDDBF\\uDE00\\uDE10-\\uDE13\\uDE15-\\uDE17\\uDE19-\\uDE33\\uDE60-\\uDE7C\\uDE80-\\uDE9C\\uDEC0-\\uDEC7\\uDEC9-\\uDEE4\\uDF00-\\uDF35\\uDF40-\\uDF55\\uDF60-\\uDF72\\uDF80-\\uDF91]|\\uD803[\\uDC00-\\uDC48\\uDC80-\\uDCB2\\uDCC0-\\uDCF2]|\\uD804[\\uDC03-\\uDC37\\uDC83-\\uDCAF\\uDCD0-\\uDCE8\\uDD03-\\uDD26\\uDD50-\\uDD72\\uDD76\\uDD83-\\uDDB2\\uDDC1-\\uDDC4\\uDDDA\\uDDDC\\uDE00-\\uDE11\\uDE13-\\uDE2B\\uDE80-\\uDE86\\uDE88\\uDE8A-\\uDE8D\\uDE8F-\\uDE9D\\uDE9F-\\uDEA8\\uDEB0-\\uDEDE\\uDF05-\\uDF0C\\uDF0F\\uDF10\\uDF13-\\uDF28\\uDF2A-\\uDF30\\uDF32\\uDF33\\uDF35-\\uDF39\\uDF3D\\uDF50\\uDF5D-\\uDF61]|\\uD805[\\uDC80-\\uDCAF\\uDCC4\\uDCC5\\uDCC7\\uDD80-\\uDDAE\\uDDD8-\\uDDDB\\uDE00-\\uDE2F\\uDE44\\uDE80-\\uDEAA\\uDF00-\\uDF19]|\\uD806[\\uDCA0-\\uDCDF\\uDCFF\\uDEC0-\\uDEF8]|\\uD808[\\uDC00-\\uDF99]|\\uD809[\\uDC00-\\uDC6E\\uDC80-\\uDD43]|[\\uD80C\\uD840-\\uD868\\uD86A-\\uD86C\\uD86F-\\uD872][\\uDC00-\\uDFFF]|\\uD80D[\\uDC00-\\uDC2E]|\\uD811[\\uDC00-\\uDE46]|\\uD81A[\\uDC00-\\uDE38\\uDE40-\\uDE5E\\uDED0-\\uDEED\\uDF00-\\uDF2F\\uDF40-\\uDF43\\uDF63-\\uDF77\\uDF7D-\\uDF8F]|\\uD81B[\\uDF00-\\uDF44\\uDF50\\uDF93-\\uDF9F]|\\uD82C[\\uDC00\\uDC01]|\\uD82F[\\uDC00-\\uDC6A\\uDC70-\\uDC7C\\uDC80-\\uDC88\\uDC90-\\uDC99]|\\uD835[\\uDC00-\\uDC54\\uDC56-\\uDC9C\\uDC9E\\uDC9F\\uDCA2\\uDCA5\\uDCA6\\uDCA9-\\uDCAC\\uDCAE-\\uDCB9\\uDCBB\\uDCBD-\\uDCC3\\uDCC5-\\uDD05\\uDD07-\\uDD0A\\uDD0D-\\uDD14\\uDD16-\\uDD1C\\uDD1E-\\uDD39\\uDD3B-\\uDD3E\\uDD40-\\uDD44\\uDD46\\uDD4A-\\uDD50\\uDD52-\\uDEA5\\uDEA8-\\uDEC0\\uDEC2-\\uDEDA\\uDEDC-\\uDEFA\\uDEFC-\\uDF14\\uDF16-\\uDF34\\uDF36-\\uDF4E\\uDF50-\\uDF6E\\uDF70-\\uDF88\\uDF8A-\\uDFA8\\uDFAA-\\uDFC2\\uDFC4-\\uDFCB]|\\uD83A[\\uDC00-\\uDCC4]|\\uD83B[\\uDE00-\\uDE03\\uDE05-\\uDE1F\\uDE21\\uDE22\\uDE24\\uDE27\\uDE29-\\uDE32\\uDE34-\\uDE37\\uDE39\\uDE3B\\uDE42\\uDE47\\uDE49\\uDE4B\\uDE4D-\\uDE4F\\uDE51\\uDE52\\uDE54\\uDE57\\uDE59\\uDE5B\\uDE5D\\uDE5F\\uDE61\\uDE62\\uDE64\\uDE67-\\uDE6A\\uDE6C-\\uDE72\\uDE74-\\uDE77\\uDE79-\\uDE7C\\uDE7E\\uDE80-\\uDE89\\uDE8B-\\uDE9B\\uDEA1-\\uDEA3\\uDEA5-\\uDEA9\\uDEAB-\\uDEBB]|\\uD869[\\uDC00-\\uDED6\\uDF00-\\uDFFF]|\\uD86D[\\uDC00-\\uDF34\\uDF40-\\uDFFF]|\\uD86E[\\uDC00-\\uDC1D\\uDC20-\\uDFFF]|\\uD873[\\uDC00-\\uDEA1]|\\uD87E[\\uDC00-\\uDE1D]/,NonAsciiIdentifierPart:/[\\xAA\\xB5\\xB7\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B4\\u08E3-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0AF9\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58-\\u0C5A\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D5F-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1369-\\u1371\\u1380-\\u138F\\u13A0-\\u13F5\\u13F8-\\u13FD\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19DA\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2118-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FD5\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA7AD\\uA7B0-\\uA7B7\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA8FD\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB65\\uAB70-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2F\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]|\\uD800[\\uDC00-\\uDC0B\\uDC0D-\\uDC26\\uDC28-\\uDC3A\\uDC3C\\uDC3D\\uDC3F-\\uDC4D\\uDC50-\\uDC5D\\uDC80-\\uDCFA\\uDD40-\\uDD74\\uDDFD\\uDE80-\\uDE9C\\uDEA0-\\uDED0\\uDEE0\\uDF00-\\uDF1F\\uDF30-\\uDF4A\\uDF50-\\uDF7A\\uDF80-\\uDF9D\\uDFA0-\\uDFC3\\uDFC8-\\uDFCF\\uDFD1-\\uDFD5]|\\uD801[\\uDC00-\\uDC9D\\uDCA0-\\uDCA9\\uDD00-\\uDD27\\uDD30-\\uDD63\\uDE00-\\uDF36\\uDF40-\\uDF55\\uDF60-\\uDF67]|\\uD802[\\uDC00-\\uDC05\\uDC08\\uDC0A-\\uDC35\\uDC37\\uDC38\\uDC3C\\uDC3F-\\uDC55\\uDC60-\\uDC76\\uDC80-\\uDC9E\\uDCE0-\\uDCF2\\uDCF4\\uDCF5\\uDD00-\\uDD15\\uDD20-\\uDD39\\uDD80-\\uDDB7\\uDDBE\\uDDBF\\uDE00-\\uDE03\\uDE05\\uDE06\\uDE0C-\\uDE13\\uDE15-\\uDE17\\uDE19-\\uDE33\\uDE38-\\uDE3A\\uDE3F\\uDE60-\\uDE7C\\uDE80-\\uDE9C\\uDEC0-\\uDEC7\\uDEC9-\\uDEE6\\uDF00-\\uDF35\\uDF40-\\uDF55\\uDF60-\\uDF72\\uDF80-\\uDF91]|\\uD803[\\uDC00-\\uDC48\\uDC80-\\uDCB2\\uDCC0-\\uDCF2]|\\uD804[\\uDC00-\\uDC46\\uDC66-\\uDC6F\\uDC7F-\\uDCBA\\uDCD0-\\uDCE8\\uDCF0-\\uDCF9\\uDD00-\\uDD34\\uDD36-\\uDD3F\\uDD50-\\uDD73\\uDD76\\uDD80-\\uDDC4\\uDDCA-\\uDDCC\\uDDD0-\\uDDDA\\uDDDC\\uDE00-\\uDE11\\uDE13-\\uDE37\\uDE80-\\uDE86\\uDE88\\uDE8A-\\uDE8D\\uDE8F-\\uDE9D\\uDE9F-\\uDEA8\\uDEB0-\\uDEEA\\uDEF0-\\uDEF9\\uDF00-\\uDF03\\uDF05-\\uDF0C\\uDF0F\\uDF10\\uDF13-\\uDF28\\uDF2A-\\uDF30\\uDF32\\uDF33\\uDF35-\\uDF39\\uDF3C-\\uDF44\\uDF47\\uDF48\\uDF4B-\\uDF4D\\uDF50\\uDF57\\uDF5D-\\uDF63\\uDF66-\\uDF6C\\uDF70-\\uDF74]|\\uD805[\\uDC80-\\uDCC5\\uDCC7\\uDCD0-\\uDCD9\\uDD80-\\uDDB5\\uDDB8-\\uDDC0\\uDDD8-\\uDDDD\\uDE00-\\uDE40\\uDE44\\uDE50-\\uDE59\\uDE80-\\uDEB7\\uDEC0-\\uDEC9\\uDF00-\\uDF19\\uDF1D-\\uDF2B\\uDF30-\\uDF39]|\\uD806[\\uDCA0-\\uDCE9\\uDCFF\\uDEC0-\\uDEF8]|\\uD808[\\uDC00-\\uDF99]|\\uD809[\\uDC00-\\uDC6E\\uDC80-\\uDD43]|[\\uD80C\\uD840-\\uD868\\uD86A-\\uD86C\\uD86F-\\uD872][\\uDC00-\\uDFFF]|\\uD80D[\\uDC00-\\uDC2E]|\\uD811[\\uDC00-\\uDE46]|\\uD81A[\\uDC00-\\uDE38\\uDE40-\\uDE5E\\uDE60-\\uDE69\\uDED0-\\uDEED\\uDEF0-\\uDEF4\\uDF00-\\uDF36\\uDF40-\\uDF43\\uDF50-\\uDF59\\uDF63-\\uDF77\\uDF7D-\\uDF8F]|\\uD81B[\\uDF00-\\uDF44\\uDF50-\\uDF7E\\uDF8F-\\uDF9F]|\\uD82C[\\uDC00\\uDC01]|\\uD82F[\\uDC00-\\uDC6A\\uDC70-\\uDC7C\\uDC80-\\uDC88\\uDC90-\\uDC99\\uDC9D\\uDC9E]|\\uD834[\\uDD65-\\uDD69\\uDD6D-\\uDD72\\uDD7B-\\uDD82\\uDD85-\\uDD8B\\uDDAA-\\uDDAD\\uDE42-\\uDE44]|\\uD835[\\uDC00-\\uDC54\\uDC56-\\uDC9C\\uDC9E\\uDC9F\\uDCA2\\uDCA5\\uDCA6\\uDCA9-\\uDCAC\\uDCAE-\\uDCB9\\uDCBB\\uDCBD-\\uDCC3\\uDCC5-\\uDD05\\uDD07-\\uDD0A\\uDD0D-\\uDD14\\uDD16-\\uDD1C\\uDD1E-\\uDD39\\uDD3B-\\uDD3E\\uDD40-\\uDD44\\uDD46\\uDD4A-\\uDD50\\uDD52-\\uDEA5\\uDEA8-\\uDEC0\\uDEC2-\\uDEDA\\uDEDC-\\uDEFA\\uDEFC-\\uDF14\\uDF16-\\uDF34\\uDF36-\\uDF4E\\uDF50-\\uDF6E\\uDF70-\\uDF88\\uDF8A-\\uDFA8\\uDFAA-\\uDFC2\\uDFC4-\\uDFCB\\uDFCE-\\uDFFF]|\\uD836[\\uDE00-\\uDE36\\uDE3B-\\uDE6C\\uDE75\\uDE84\\uDE9B-\\uDE9F\\uDEA1-\\uDEAF]|\\uD83A[\\uDC00-\\uDCC4\\uDCD0-\\uDCD6]|\\uD83B[\\uDE00-\\uDE03\\uDE05-\\uDE1F\\uDE21\\uDE22\\uDE24\\uDE27\\uDE29-\\uDE32\\uDE34-\\uDE37\\uDE39\\uDE3B\\uDE42\\uDE47\\uDE49\\uDE4B\\uDE4D-\\uDE4F\\uDE51\\uDE52\\uDE54\\uDE57\\uDE59\\uDE5B\\uDE5D\\uDE5F\\uDE61\\uDE62\\uDE64\\uDE67-\\uDE6A\\uDE6C-\\uDE72\\uDE74-\\uDE77\\uDE79-\\uDE7C\\uDE7E\\uDE80-\\uDE89\\uDE8B-\\uDE9B\\uDEA1-\\uDEA3\\uDEA5-\\uDEA9\\uDEAB-\\uDEBB]|\\uD869[\\uDC00-\\uDED6\\uDF00-\\uDFFF]|\\uD86D[\\uDC00-\\uDF34\\uDF40-\\uDFFF]|\\uD86E[\\uDC00-\\uDC1D\\uDC20-\\uDFFF]|\\uD873[\\uDC00-\\uDEA1]|\\uD87E[\\uDC00-\\uDE1D]|\\uDB40[\\uDD00-\\uDDEF]/};t.Character={fromCodePoint:function(e){return e<65536?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10))+String.fromCharCode(56320+(e-65536&1023))},isWhiteSpace:function(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0},isLineTerminator:function(e){return 10===e||13===e||8232===e||8233===e},isIdentifierStart:function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&r.NonAsciiIdentifierStart.test(t.Character.fromCodePoint(e))},isIdentifierPart:function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&r.NonAsciiIdentifierPart.test(t.Character.fromCodePoint(e))},isDecimalDigit:function(e){return e>=48&&e<=57},isHexDigit:function(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102},isOctalDigit:function(e){return e>=48&&e<=55}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(6),i=function(e){this.type=n.JSXSyntax.JSXClosingElement,this.name=e};t.JSXClosingElement=i;var o=function(e,t,r){this.type=n.JSXSyntax.JSXElement,this.openingElement=e,this.children=t,this.closingElement=r};t.JSXElement=o;var a=function(){this.type=n.JSXSyntax.JSXEmptyExpression};t.JSXEmptyExpression=a;var s=function(e){this.type=n.JSXSyntax.JSXExpressionContainer,this.expression=e};t.JSXExpressionContainer=s;var u=function(e){this.type=n.JSXSyntax.JSXIdentifier,this.name=e};t.JSXIdentifier=u;var l=function(e,t){this.type=n.JSXSyntax.JSXMemberExpression,this.object=e,this.property=t};t.JSXMemberExpression=l;var c=function(e,t){this.type=n.JSXSyntax.JSXAttribute,this.name=e,this.value=t};t.JSXAttribute=c;var h=function(e,t){this.type=n.JSXSyntax.JSXNamespacedName,this.namespace=e,this.name=t};t.JSXNamespacedName=h;var p=function(e,t,r){this.type=n.JSXSyntax.JSXOpeningElement,this.name=e,this.selfClosing=t,this.attributes=r};t.JSXOpeningElement=p;var f=function(e){this.type=n.JSXSyntax.JSXSpreadAttribute,this.argument=e};t.JSXSpreadAttribute=f;var d=function(e,t){this.type=n.JSXSyntax.JSXText,this.value=e,this.raw=t};t.JSXText=d},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.JSXSyntax={JSXAttribute:\"JSXAttribute\",JSXClosingElement:\"JSXClosingElement\",JSXElement:\"JSXElement\",JSXEmptyExpression:\"JSXEmptyExpression\",JSXExpressionContainer:\"JSXExpressionContainer\",JSXIdentifier:\"JSXIdentifier\",JSXMemberExpression:\"JSXMemberExpression\",JSXNamespacedName:\"JSXNamespacedName\",JSXOpeningElement:\"JSXOpeningElement\",JSXSpreadAttribute:\"JSXSpreadAttribute\",JSXText:\"JSXText\"}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(2),i=function(e){this.type=n.Syntax.ArrayExpression,this.elements=e};t.ArrayExpression=i;var o=function(e){this.type=n.Syntax.ArrayPattern,this.elements=e};t.ArrayPattern=o;var a=function(e,t,r){this.type=n.Syntax.ArrowFunctionExpression,this.id=null,this.params=e,this.body=t,this.generator=!1,this.expression=r,this.async=!1};t.ArrowFunctionExpression=a;var s=function(e,t,r){this.type=n.Syntax.AssignmentExpression,this.operator=e,this.left=t,this.right=r};t.AssignmentExpression=s;var u=function(e,t){this.type=n.Syntax.AssignmentPattern,this.left=e,this.right=t};t.AssignmentPattern=u;var l=function(e,t,r){this.type=n.Syntax.ArrowFunctionExpression,this.id=null,this.params=e,this.body=t,this.generator=!1,this.expression=r,this.async=!0};t.AsyncArrowFunctionExpression=l;var c=function(e,t,r){this.type=n.Syntax.FunctionDeclaration,this.id=e,this.params=t,this.body=r,this.generator=!1,this.expression=!1,this.async=!0};t.AsyncFunctionDeclaration=c;var h=function(e,t,r){this.type=n.Syntax.FunctionExpression,this.id=e,this.params=t,this.body=r,this.generator=!1,this.expression=!1,this.async=!0};t.AsyncFunctionExpression=h;var p=function(e){this.type=n.Syntax.AwaitExpression,this.argument=e};t.AwaitExpression=p;var f=function(e,t,r){var i=\"||\"===e||\"&&\"===e;this.type=i?n.Syntax.LogicalExpression:n.Syntax.BinaryExpression,this.operator=e,this.left=t,this.right=r};t.BinaryExpression=f;var d=function(e){this.type=n.Syntax.BlockStatement,this.body=e};t.BlockStatement=d;var m=function(e){this.type=n.Syntax.BreakStatement,this.label=e};t.BreakStatement=m;var y=function(e,t){this.type=n.Syntax.CallExpression,this.callee=e,this.arguments=t};t.CallExpression=y;var v=function(e,t){this.type=n.Syntax.CatchClause,this.param=e,this.body=t};t.CatchClause=v;var _=function(e){this.type=n.Syntax.ClassBody,this.body=e};t.ClassBody=_;var g=function(e,t,r){this.type=n.Syntax.ClassDeclaration,this.id=e,this.superClass=t,this.body=r};t.ClassDeclaration=g;var b=function(e,t,r){this.type=n.Syntax.ClassExpression,this.id=e,this.superClass=t,this.body=r};t.ClassExpression=b;var x=function(e,t){this.type=n.Syntax.MemberExpression,this.computed=!0,this.object=e,this.property=t};t.ComputedMemberExpression=x;var w=function(e,t,r){this.type=n.Syntax.ConditionalExpression,this.test=e,this.consequent=t,this.alternate=r};t.ConditionalExpression=w;var E=function(e){this.type=n.Syntax.ContinueStatement,this.label=e};t.ContinueStatement=E;var D=function(){this.type=n.Syntax.DebuggerStatement};t.DebuggerStatement=D;var S=function(e,t){this.type=n.Syntax.ExpressionStatement,this.expression=e,this.directive=t};t.Directive=S;var C=function(e,t){this.type=n.Syntax.DoWhileStatement,this.body=e,this.test=t};t.DoWhileStatement=C;var A=function(){this.type=n.Syntax.EmptyStatement};t.EmptyStatement=A;var N=function(e){this.type=n.Syntax.ExportAllDeclaration,this.source=e};t.ExportAllDeclaration=N;var T=function(e){this.type=n.Syntax.ExportDefaultDeclaration,this.declaration=e};t.ExportDefaultDeclaration=T;var O=function(e,t,r){this.type=n.Syntax.ExportNamedDeclaration,this.declaration=e,this.specifiers=t,this.source=r};t.ExportNamedDeclaration=O;var F=function(e,t){this.type=n.Syntax.ExportSpecifier,this.exported=t,this.local=e};t.ExportSpecifier=F;var k=function(e){this.type=n.Syntax.ExpressionStatement,this.expression=e};t.ExpressionStatement=k;var P=function(e,t,r){this.type=n.Syntax.ForInStatement,this.left=e,this.right=t,this.body=r,this.each=!1};t.ForInStatement=P;var I=function(e,t,r){this.type=n.Syntax.ForOfStatement,this.left=e,this.right=t,this.body=r};t.ForOfStatement=I;var L=function(e,t,r,i){this.type=n.Syntax.ForStatement,this.init=e,this.test=t,this.update=r,this.body=i};t.ForStatement=L;var M=function(e,t,r,i){this.type=n.Syntax.FunctionDeclaration,this.id=e,this.params=t,this.body=r,this.generator=i,this.expression=!1,this.async=!1};t.FunctionDeclaration=M;var B=function(e,t,r,i){this.type=n.Syntax.FunctionExpression,this.id=e,this.params=t,this.body=r,this.generator=i,this.expression=!1,this.async=!1};t.FunctionExpression=B;var j=function(e){this.type=n.Syntax.Identifier,this.name=e};t.Identifier=j;var R=function(e,t,r){this.type=n.Syntax.IfStatement,this.test=e,this.consequent=t,this.alternate=r};t.IfStatement=R;var z=function(e,t){this.type=n.Syntax.ImportDeclaration,this.specifiers=e,this.source=t};t.ImportDeclaration=z;var U=function(e){this.type=n.Syntax.ImportDefaultSpecifier,this.local=e};t.ImportDefaultSpecifier=U;var G=function(e){this.type=n.Syntax.ImportNamespaceSpecifier,this.local=e};t.ImportNamespaceSpecifier=G;var X=function(e,t){this.type=n.Syntax.ImportSpecifier,this.local=e,this.imported=t};t.ImportSpecifier=X;var q=function(e,t){this.type=n.Syntax.LabeledStatement,this.label=e,this.body=t};t.LabeledStatement=q;var W=function(e,t){this.type=n.Syntax.Literal,this.value=e,this.raw=t};t.Literal=W;var H=function(e,t){this.type=n.Syntax.MetaProperty,this.meta=e,this.property=t};t.MetaProperty=H;var J=function(e,t,r,i,o){this.type=n.Syntax.MethodDefinition,this.key=e,this.computed=t,this.value=r,this.kind=i,this.static=o};t.MethodDefinition=J;var Y=function(e){this.type=n.Syntax.Program,this.body=e,this.sourceType=\"module\"};t.Module=Y;var V=function(e,t){this.type=n.Syntax.NewExpression,this.callee=e,this.arguments=t};t.NewExpression=V;var K=function(e){this.type=n.Syntax.ObjectExpression,this.properties=e};t.ObjectExpression=K;var $=function(e){this.type=n.Syntax.ObjectPattern,this.properties=e};t.ObjectPattern=$;var Q=function(e,t,r,i,o,a){this.type=n.Syntax.Property,this.key=t,this.computed=r,this.value=i,this.kind=e,this.method=o,this.shorthand=a};t.Property=Q;var Z=function(e,t,r,i){this.type=n.Syntax.Literal,this.value=e,this.raw=t,this.regex={pattern:r,flags:i}};t.RegexLiteral=Z;var ee=function(e){this.type=n.Syntax.RestElement,this.argument=e};t.RestElement=ee;var te=function(e){this.type=n.Syntax.ReturnStatement,this.argument=e};t.ReturnStatement=te;var re=function(e){this.type=n.Syntax.Program,this.body=e,this.sourceType=\"script\"};t.Script=re;var ne=function(e){this.type=n.Syntax.SequenceExpression,this.expressions=e};t.SequenceExpression=ne;var ie=function(e){this.type=n.Syntax.SpreadElement,this.argument=e};t.SpreadElement=ie;var oe=function(e,t){this.type=n.Syntax.MemberExpression,this.computed=!1,this.object=e,this.property=t};t.StaticMemberExpression=oe;var ae=function(){this.type=n.Syntax.Super};t.Super=ae;var se=function(e,t){this.type=n.Syntax.SwitchCase,this.test=e,this.consequent=t};t.SwitchCase=se;var ue=function(e,t){this.type=n.Syntax.SwitchStatement,this.discriminant=e,this.cases=t};t.SwitchStatement=ue;var le=function(e,t){this.type=n.Syntax.TaggedTemplateExpression,this.tag=e,this.quasi=t};t.TaggedTemplateExpression=le;var ce=function(e,t){this.type=n.Syntax.TemplateElement,this.value=e,this.tail=t};t.TemplateElement=ce;var he=function(e,t){this.type=n.Syntax.TemplateLiteral,this.quasis=e,this.expressions=t};t.TemplateLiteral=he;var pe=function(){this.type=n.Syntax.ThisExpression};t.ThisExpression=pe;var fe=function(e){this.type=n.Syntax.ThrowStatement,this.argument=e};t.ThrowStatement=fe;var de=function(e,t,r){this.type=n.Syntax.TryStatement,this.block=e,this.handler=t,this.finalizer=r};t.TryStatement=de;var me=function(e,t){this.type=n.Syntax.UnaryExpression,this.operator=e,this.argument=t,this.prefix=!0};t.UnaryExpression=me;var ye=function(e,t,r){this.type=n.Syntax.UpdateExpression,this.operator=e,this.argument=t,this.prefix=r};t.UpdateExpression=ye;var ve=function(e,t){this.type=n.Syntax.VariableDeclaration,this.declarations=e,this.kind=t};t.VariableDeclaration=ve;var _e=function(e,t){this.type=n.Syntax.VariableDeclarator,this.id=e,this.init=t};t.VariableDeclarator=_e;var ge=function(e,t){this.type=n.Syntax.WhileStatement,this.test=e,this.body=t};t.WhileStatement=ge;var be=function(e,t){this.type=n.Syntax.WithStatement,this.object=e,this.body=t};t.WithStatement=be;var xe=function(e,t){this.type=n.Syntax.YieldExpression,this.argument=e,this.delegate=t};t.YieldExpression=xe},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(9),i=r(10),o=r(11),a=r(7),s=r(12),u=r(2),l=r(13),c=function(){function e(e,t,r){void 0===t&&(t={}),this.config={range:\"boolean\"==typeof t.range&&t.range,loc:\"boolean\"==typeof t.loc&&t.loc,source:null,tokens:\"boolean\"==typeof t.tokens&&t.tokens,comment:\"boolean\"==typeof t.comment&&t.comment,tolerant:\"boolean\"==typeof t.tolerant&&t.tolerant},this.config.loc&&t.source&&null!==t.source&&(this.config.source=String(t.source)),this.delegate=r,this.errorHandler=new i.ErrorHandler,this.errorHandler.tolerant=this.config.tolerant,this.scanner=new s.Scanner(e,this.errorHandler),this.scanner.trackComment=this.config.comment,this.operatorPrecedence={\")\":0,\";\":0,\",\":0,\"=\":0,\"]\":0,\"||\":1,\"&&\":2,\"|\":3,\"^\":4,\"&\":5,\"==\":6,\"!=\":6,\"===\":6,\"!==\":6,\"<\":7,\">\":7,\"<=\":7,\">=\":7,\"<<\":8,\">>\":8,\">>>\":8,\"+\":9,\"-\":9,\"*\":11,\"/\":11,\"%\":11},this.lookahead={type:2,value:\"\",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.hasLineTerminator=!1,this.context={isModule:!1,await:!1,allowIn:!0,allowStrictDirective:!0,allowYield:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:!1},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.lastMarker={index:0,line:this.scanner.lineNumber,column:0},this.nextToken(),this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}return e.prototype.throwError=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=Array.prototype.slice.call(arguments,1),o=e.replace(/%(\\d)/g,(function(e,t){return n.assert(t<i.length,\"Message reference must be in range\"),i[t]})),a=this.lastMarker.index,s=this.lastMarker.line,u=this.lastMarker.column+1;throw this.errorHandler.createError(a,s,u,o)},e.prototype.tolerateError=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=Array.prototype.slice.call(arguments,1),o=e.replace(/%(\\d)/g,(function(e,t){return n.assert(t<i.length,\"Message reference must be in range\"),i[t]})),a=this.lastMarker.index,s=this.scanner.lineNumber,u=this.lastMarker.column+1;this.errorHandler.tolerateError(a,s,u,o)},e.prototype.unexpectedTokenError=function(e,t){var r,n=t||o.Messages.UnexpectedToken;if(e?(t||(n=2===e.type?o.Messages.UnexpectedEOS:3===e.type?o.Messages.UnexpectedIdentifier:6===e.type?o.Messages.UnexpectedNumber:8===e.type?o.Messages.UnexpectedString:10===e.type?o.Messages.UnexpectedTemplate:o.Messages.UnexpectedToken,4===e.type&&(this.scanner.isFutureReservedWord(e.value)?n=o.Messages.UnexpectedReserved:this.context.strict&&this.scanner.isStrictModeReservedWord(e.value)&&(n=o.Messages.StrictReservedWord))),r=e.value):r=\"ILLEGAL\",n=n.replace(\"%0\",r),e&&\"number\"==typeof e.lineNumber){var i=e.start,a=e.lineNumber,s=this.lastMarker.index-this.lastMarker.column,u=e.start-s+1;return this.errorHandler.createError(i,a,u,n)}return i=this.lastMarker.index,a=this.lastMarker.line,u=this.lastMarker.column+1,this.errorHandler.createError(i,a,u,n)},e.prototype.throwUnexpectedToken=function(e,t){throw this.unexpectedTokenError(e,t)},e.prototype.tolerateUnexpectedToken=function(e,t){this.errorHandler.tolerate(this.unexpectedTokenError(e,t))},e.prototype.collectComments=function(){if(this.config.comment){var e=this.scanner.scanComments();if(e.length>0&&this.delegate)for(var t=0;t<e.length;++t){var r=e[t],n=void 0;n={type:r.multiLine?\"BlockComment\":\"LineComment\",value:this.scanner.source.slice(r.slice[0],r.slice[1])},this.config.range&&(n.range=r.range),this.config.loc&&(n.loc=r.loc);var i={start:{line:r.loc.start.line,column:r.loc.start.column,offset:r.range[0]},end:{line:r.loc.end.line,column:r.loc.end.column,offset:r.range[1]}};this.delegate(n,i)}}else this.scanner.scanComments()},e.prototype.getTokenRaw=function(e){return this.scanner.source.slice(e.start,e.end)},e.prototype.convertToken=function(e){var t={type:l.TokenName[e.type],value:this.getTokenRaw(e)};if(this.config.range&&(t.range=[e.start,e.end]),this.config.loc&&(t.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}),9===e.type){var r=e.pattern,n=e.flags;t.regex={pattern:r,flags:n}}return t},e.prototype.nextToken=function(){var e=this.lookahead;this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.collectComments(),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var t=this.scanner.lex();return this.hasLineTerminator=e.lineNumber!==t.lineNumber,t&&this.context.strict&&3===t.type&&this.scanner.isStrictModeReservedWord(t.value)&&(t.type=4),this.lookahead=t,this.config.tokens&&2!==t.type&&this.tokens.push(this.convertToken(t)),e},e.prototype.nextRegexToken=function(){this.collectComments();var e=this.scanner.scanRegExp();return this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(e))),this.lookahead=e,this.nextToken(),e},e.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}},e.prototype.startNode=function(e,t){void 0===t&&(t=0);var r=e.start-e.lineStart,n=e.lineNumber;return r<0&&(r+=t,n--),{index:e.start,line:n,column:r}},e.prototype.finalize=function(e,t){if(this.config.range&&(t.range=[e.index,this.lastMarker.index]),this.config.loc&&(t.loc={start:{line:e.line,column:e.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(t.loc.source=this.config.source)),this.delegate){var r={start:{line:e.line,column:e.column,offset:e.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}};this.delegate(t,r)}return t},e.prototype.expect=function(e){var t=this.nextToken();7===t.type&&t.value===e||this.throwUnexpectedToken(t)},e.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var e=this.lookahead;7===e.type&&\",\"===e.value?this.nextToken():7===e.type&&\";\"===e.value?(this.nextToken(),this.tolerateUnexpectedToken(e)):this.tolerateUnexpectedToken(e,o.Messages.UnexpectedToken)}else this.expect(\",\")},e.prototype.expectKeyword=function(e){var t=this.nextToken();4===t.type&&t.value===e||this.throwUnexpectedToken(t)},e.prototype.match=function(e){return 7===this.lookahead.type&&this.lookahead.value===e},e.prototype.matchKeyword=function(e){return 4===this.lookahead.type&&this.lookahead.value===e},e.prototype.matchContextualKeyword=function(e){return 3===this.lookahead.type&&this.lookahead.value===e},e.prototype.matchAssign=function(){if(7!==this.lookahead.type)return!1;var e=this.lookahead.value;return\"=\"===e||\"*=\"===e||\"**=\"===e||\"/=\"===e||\"%=\"===e||\"+=\"===e||\"-=\"===e||\"<<=\"===e||\">>=\"===e||\">>>=\"===e||\"&=\"===e||\"^=\"===e||\"|=\"===e},e.prototype.isolateCoverGrammar=function(e){var t=this.context.isBindingElement,r=this.context.isAssignmentTarget,n=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var i=e.call(this);return null!==this.context.firstCoverInitializedNameError&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError),this.context.isBindingElement=t,this.context.isAssignmentTarget=r,this.context.firstCoverInitializedNameError=n,i},e.prototype.inheritCoverGrammar=function(e){var t=this.context.isBindingElement,r=this.context.isAssignmentTarget,n=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var i=e.call(this);return this.context.isBindingElement=this.context.isBindingElement&&t,this.context.isAssignmentTarget=this.context.isAssignmentTarget&&r,this.context.firstCoverInitializedNameError=n||this.context.firstCoverInitializedNameError,i},e.prototype.consumeSemicolon=function(){this.match(\";\")?this.nextToken():this.hasLineTerminator||(2===this.lookahead.type||this.match(\"}\")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)},e.prototype.parsePrimaryExpression=function(){var e,t,r,n=this.createNode();switch(this.lookahead.type){case 3:(this.context.isModule||this.context.await)&&\"await\"===this.lookahead.value&&this.tolerateUnexpectedToken(this.lookahead),e=this.matchAsyncFunction()?this.parseFunctionExpression():this.finalize(n,new a.Identifier(this.nextToken().value));break;case 6:case 8:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,o.Messages.StrictOctalLiteral),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),r=this.getTokenRaw(t),e=this.finalize(n,new a.Literal(t.value,r));break;case 1:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),r=this.getTokenRaw(t),e=this.finalize(n,new a.Literal(\"true\"===t.value,r));break;case 5:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),r=this.getTokenRaw(t),e=this.finalize(n,new a.Literal(null,r));break;case 10:e=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case\"(\":this.context.isBindingElement=!1,e=this.inheritCoverGrammar(this.parseGroupExpression);break;case\"[\":e=this.inheritCoverGrammar(this.parseArrayInitializer);break;case\"{\":e=this.inheritCoverGrammar(this.parseObjectInitializer);break;case\"/\":case\"/=\":this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.scanner.index=this.startMarker.index,t=this.nextRegexToken(),r=this.getTokenRaw(t),e=this.finalize(n,new a.RegexLiteral(t.regex,r,t.pattern,t.flags));break;default:e=this.throwUnexpectedToken(this.nextToken())}break;case 4:!this.context.strict&&this.context.allowYield&&this.matchKeyword(\"yield\")?e=this.parseIdentifierName():!this.context.strict&&this.matchKeyword(\"let\")?e=this.finalize(n,new a.Identifier(this.nextToken().value)):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.matchKeyword(\"function\")?e=this.parseFunctionExpression():this.matchKeyword(\"this\")?(this.nextToken(),e=this.finalize(n,new a.ThisExpression)):e=this.matchKeyword(\"class\")?this.parseClassExpression():this.throwUnexpectedToken(this.nextToken()));break;default:e=this.throwUnexpectedToken(this.nextToken())}return e},e.prototype.parseSpreadElement=function(){var e=this.createNode();this.expect(\"...\");var t=this.inheritCoverGrammar(this.parseAssignmentExpression);return this.finalize(e,new a.SpreadElement(t))},e.prototype.parseArrayInitializer=function(){var e=this.createNode(),t=[];for(this.expect(\"[\");!this.match(\"]\");)if(this.match(\",\"))this.nextToken(),t.push(null);else if(this.match(\"...\")){var r=this.parseSpreadElement();this.match(\"]\")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.expect(\",\")),t.push(r)}else t.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match(\"]\")||this.expect(\",\");return this.expect(\"]\"),this.finalize(e,new a.ArrayExpression(t))},e.prototype.parsePropertyMethod=function(e){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var t=this.context.strict,r=this.context.allowStrictDirective;this.context.allowStrictDirective=e.simple;var n=this.isolateCoverGrammar(this.parseFunctionSourceElements);return this.context.strict&&e.firstRestricted&&this.tolerateUnexpectedToken(e.firstRestricted,e.message),this.context.strict&&e.stricted&&this.tolerateUnexpectedToken(e.stricted,e.message),this.context.strict=t,this.context.allowStrictDirective=r,n},e.prototype.parsePropertyMethodFunction=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var r=this.parseFormalParameters(),n=this.parsePropertyMethod(r);return this.context.allowYield=t,this.finalize(e,new a.FunctionExpression(null,r.params,n,!1))},e.prototype.parsePropertyMethodAsyncFunction=function(){var e=this.createNode(),t=this.context.allowYield,r=this.context.await;this.context.allowYield=!1,this.context.await=!0;var n=this.parseFormalParameters(),i=this.parsePropertyMethod(n);return this.context.allowYield=t,this.context.await=r,this.finalize(e,new a.AsyncFunctionExpression(null,n.params,i))},e.prototype.parseObjectPropertyKey=function(){var e,t=this.createNode(),r=this.nextToken();switch(r.type){case 8:case 6:this.context.strict&&r.octal&&this.tolerateUnexpectedToken(r,o.Messages.StrictOctalLiteral);var n=this.getTokenRaw(r);e=this.finalize(t,new a.Literal(r.value,n));break;case 3:case 1:case 5:case 4:e=this.finalize(t,new a.Identifier(r.value));break;case 7:\"[\"===r.value?(e=this.isolateCoverGrammar(this.parseAssignmentExpression),this.expect(\"]\")):e=this.throwUnexpectedToken(r);break;default:e=this.throwUnexpectedToken(r)}return e},e.prototype.isPropertyKey=function(e,t){return e.type===u.Syntax.Identifier&&e.name===t||e.type===u.Syntax.Literal&&e.value===t},e.prototype.parseObjectProperty=function(e){var t,r=this.createNode(),n=this.lookahead,i=null,s=null,u=!1,l=!1,c=!1,h=!1;if(3===n.type){var p=n.value;this.nextToken(),u=this.match(\"[\"),i=(h=!(this.hasLineTerminator||\"async\"!==p||this.match(\":\")||this.match(\"(\")||this.match(\"*\")||this.match(\",\")))?this.parseObjectPropertyKey():this.finalize(r,new a.Identifier(p))}else this.match(\"*\")?this.nextToken():(u=this.match(\"[\"),i=this.parseObjectPropertyKey());var f=this.qualifiedPropertyName(this.lookahead);if(3===n.type&&!h&&\"get\"===n.value&&f)t=\"get\",u=this.match(\"[\"),i=this.parseObjectPropertyKey(),this.context.allowYield=!1,s=this.parseGetterMethod();else if(3===n.type&&!h&&\"set\"===n.value&&f)t=\"set\",u=this.match(\"[\"),i=this.parseObjectPropertyKey(),s=this.parseSetterMethod();else if(7===n.type&&\"*\"===n.value&&f)t=\"init\",u=this.match(\"[\"),i=this.parseObjectPropertyKey(),s=this.parseGeneratorMethod(),l=!0;else if(i||this.throwUnexpectedToken(this.lookahead),t=\"init\",this.match(\":\")&&!h)!u&&this.isPropertyKey(i,\"__proto__\")&&(e.value&&this.tolerateError(o.Messages.DuplicateProtoProperty),e.value=!0),this.nextToken(),s=this.inheritCoverGrammar(this.parseAssignmentExpression);else if(this.match(\"(\"))s=h?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),l=!0;else if(3===n.type)if(p=this.finalize(r,new a.Identifier(n.value)),this.match(\"=\")){this.context.firstCoverInitializedNameError=this.lookahead,this.nextToken(),c=!0;var d=this.isolateCoverGrammar(this.parseAssignmentExpression);s=this.finalize(r,new a.AssignmentPattern(p,d))}else c=!0,s=p;else this.throwUnexpectedToken(this.nextToken());return this.finalize(r,new a.Property(t,i,u,s,l,c))},e.prototype.parseObjectInitializer=function(){var e=this.createNode();this.expect(\"{\");for(var t=[],r={value:!1};!this.match(\"}\");)t.push(this.parseObjectProperty(r)),this.match(\"}\")||this.expectCommaSeparator();return this.expect(\"}\"),this.finalize(e,new a.ObjectExpression(t))},e.prototype.parseTemplateHead=function(){n.assert(this.lookahead.head,\"Template literal must start with a template head\");var e=this.createNode(),t=this.nextToken(),r=t.value,i=t.cooked;return this.finalize(e,new a.TemplateElement({raw:r,cooked:i},t.tail))},e.prototype.parseTemplateElement=function(){10!==this.lookahead.type&&this.throwUnexpectedToken();var e=this.createNode(),t=this.nextToken(),r=t.value,n=t.cooked;return this.finalize(e,new a.TemplateElement({raw:r,cooked:n},t.tail))},e.prototype.parseTemplateLiteral=function(){var e=this.createNode(),t=[],r=[],n=this.parseTemplateHead();for(r.push(n);!n.tail;)t.push(this.parseExpression()),n=this.parseTemplateElement(),r.push(n);return this.finalize(e,new a.TemplateLiteral(r,t))},e.prototype.reinterpretExpressionAsPattern=function(e){switch(e.type){case u.Syntax.Identifier:case u.Syntax.MemberExpression:case u.Syntax.RestElement:case u.Syntax.AssignmentPattern:break;case u.Syntax.SpreadElement:e.type=u.Syntax.RestElement,this.reinterpretExpressionAsPattern(e.argument);break;case u.Syntax.ArrayExpression:e.type=u.Syntax.ArrayPattern;for(var t=0;t<e.elements.length;t++)null!==e.elements[t]&&this.reinterpretExpressionAsPattern(e.elements[t]);break;case u.Syntax.ObjectExpression:for(e.type=u.Syntax.ObjectPattern,t=0;t<e.properties.length;t++)this.reinterpretExpressionAsPattern(e.properties[t].value);break;case u.Syntax.AssignmentExpression:e.type=u.Syntax.AssignmentPattern,delete e.operator,this.reinterpretExpressionAsPattern(e.left)}},e.prototype.parseGroupExpression=function(){var e;if(this.expect(\"(\"),this.match(\")\"))this.nextToken(),this.match(\"=>\")||this.expect(\"=>\"),e={type:\"ArrowParameterPlaceHolder\",params:[],async:!1};else{var t=this.lookahead,r=[];if(this.match(\"...\"))e=this.parseRestElement(r),this.expect(\")\"),this.match(\"=>\")||this.expect(\"=>\"),e={type:\"ArrowParameterPlaceHolder\",params:[e],async:!1};else{var n=!1;if(this.context.isBindingElement=!0,e=this.inheritCoverGrammar(this.parseAssignmentExpression),this.match(\",\")){var i=[];for(this.context.isAssignmentTarget=!1,i.push(e);2!==this.lookahead.type&&this.match(\",\");){if(this.nextToken(),this.match(\")\")){this.nextToken();for(var o=0;o<i.length;o++)this.reinterpretExpressionAsPattern(i[o]);n=!0,e={type:\"ArrowParameterPlaceHolder\",params:i,async:!1}}else if(this.match(\"...\")){for(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),i.push(this.parseRestElement(r)),this.expect(\")\"),this.match(\"=>\")||this.expect(\"=>\"),this.context.isBindingElement=!1,o=0;o<i.length;o++)this.reinterpretExpressionAsPattern(i[o]);n=!0,e={type:\"ArrowParameterPlaceHolder\",params:i,async:!1}}else i.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(n)break}n||(e=this.finalize(this.startNode(t),new a.SequenceExpression(i)))}if(!n){if(this.expect(\")\"),this.match(\"=>\")&&(e.type===u.Syntax.Identifier&&\"yield\"===e.name&&(n=!0,e={type:\"ArrowParameterPlaceHolder\",params:[e],async:!1}),!n)){if(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),e.type===u.Syntax.SequenceExpression)for(o=0;o<e.expressions.length;o++)this.reinterpretExpressionAsPattern(e.expressions[o]);else this.reinterpretExpressionAsPattern(e);e={type:\"ArrowParameterPlaceHolder\",params:e.type===u.Syntax.SequenceExpression?e.expressions:[e],async:!1}}this.context.isBindingElement=!1}}}return e},e.prototype.parseArguments=function(){this.expect(\"(\");var e=[];if(!this.match(\")\"))for(;;){var t=this.match(\"...\")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAssignmentExpression);if(e.push(t),this.match(\")\"))break;if(this.expectCommaSeparator(),this.match(\")\"))break}return this.expect(\")\"),e},e.prototype.isIdentifierName=function(e){return 3===e.type||4===e.type||1===e.type||5===e.type},e.prototype.parseIdentifierName=function(){var e=this.createNode(),t=this.nextToken();return this.isIdentifierName(t)||this.throwUnexpectedToken(t),this.finalize(e,new a.Identifier(t.value))},e.prototype.parseNewExpression=function(){var e,t=this.createNode(),r=this.parseIdentifierName();if(n.assert(\"new\"===r.name,\"New expression must start with `new`\"),this.match(\".\"))if(this.nextToken(),3===this.lookahead.type&&this.context.inFunctionBody&&\"target\"===this.lookahead.value){var i=this.parseIdentifierName();e=new a.MetaProperty(r,i)}else this.throwUnexpectedToken(this.lookahead);else{var o=this.isolateCoverGrammar(this.parseLeftHandSideExpression),s=this.match(\"(\")?this.parseArguments():[];e=new a.NewExpression(o,s),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return this.finalize(t,e)},e.prototype.parseAsyncArgument=function(){var e=this.parseAssignmentExpression();return this.context.firstCoverInitializedNameError=null,e},e.prototype.parseAsyncArguments=function(){this.expect(\"(\");var e=[];if(!this.match(\")\"))for(;;){var t=this.match(\"...\")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAsyncArgument);if(e.push(t),this.match(\")\"))break;if(this.expectCommaSeparator(),this.match(\")\"))break}return this.expect(\")\"),e},e.prototype.parseLeftHandSideExpressionAllowCall=function(){var e,t=this.lookahead,r=this.matchContextualKeyword(\"async\"),n=this.context.allowIn;for(this.context.allowIn=!0,this.matchKeyword(\"super\")&&this.context.inFunctionBody?(e=this.createNode(),this.nextToken(),e=this.finalize(e,new a.Super),this.match(\"(\")||this.match(\".\")||this.match(\"[\")||this.throwUnexpectedToken(this.lookahead)):e=this.inheritCoverGrammar(this.matchKeyword(\"new\")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match(\".\")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(\".\");var i=this.parseIdentifierName();e=this.finalize(this.startNode(t),new a.StaticMemberExpression(e,i))}else if(this.match(\"(\")){var o=r&&t.lineNumber===this.lookahead.lineNumber;this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1;var s=o?this.parseAsyncArguments():this.parseArguments();if(e=this.finalize(this.startNode(t),new a.CallExpression(e,s)),o&&this.match(\"=>\")){for(var u=0;u<s.length;++u)this.reinterpretExpressionAsPattern(s[u]);e={type:\"ArrowParameterPlaceHolder\",params:s,async:!0}}}else if(this.match(\"[\"))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(\"[\"),i=this.isolateCoverGrammar(this.parseExpression),this.expect(\"]\"),e=this.finalize(this.startNode(t),new a.ComputedMemberExpression(e,i));else{if(10!==this.lookahead.type||!this.lookahead.head)break;var l=this.parseTemplateLiteral();e=this.finalize(this.startNode(t),new a.TaggedTemplateExpression(e,l))}return this.context.allowIn=n,e},e.prototype.parseSuper=function(){var e=this.createNode();return this.expectKeyword(\"super\"),this.match(\"[\")||this.match(\".\")||this.throwUnexpectedToken(this.lookahead),this.finalize(e,new a.Super)},e.prototype.parseLeftHandSideExpression=function(){n.assert(this.context.allowIn,\"callee of new expression always allow in keyword.\");for(var e=this.startNode(this.lookahead),t=this.matchKeyword(\"super\")&&this.context.inFunctionBody?this.parseSuper():this.inheritCoverGrammar(this.matchKeyword(\"new\")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match(\"[\")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(\"[\");var r=this.isolateCoverGrammar(this.parseExpression);this.expect(\"]\"),t=this.finalize(e,new a.ComputedMemberExpression(t,r))}else if(this.match(\".\"))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(\".\"),r=this.parseIdentifierName(),t=this.finalize(e,new a.StaticMemberExpression(t,r));else{if(10!==this.lookahead.type||!this.lookahead.head)break;var i=this.parseTemplateLiteral();t=this.finalize(e,new a.TaggedTemplateExpression(t,i))}return t},e.prototype.parseUpdateExpression=function(){var e,t=this.lookahead;if(this.match(\"++\")||this.match(\"--\")){var r=this.startNode(t),n=this.nextToken();e=this.inheritCoverGrammar(this.parseUnaryExpression),this.context.strict&&e.type===u.Syntax.Identifier&&this.scanner.isRestrictedWord(e.name)&&this.tolerateError(o.Messages.StrictLHSPrefix),this.context.isAssignmentTarget||this.tolerateError(o.Messages.InvalidLHSInAssignment);var i=!0;e=this.finalize(r,new a.UpdateExpression(n.value,e,i)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else if(e=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),!this.hasLineTerminator&&7===this.lookahead.type&&(this.match(\"++\")||this.match(\"--\"))){this.context.strict&&e.type===u.Syntax.Identifier&&this.scanner.isRestrictedWord(e.name)&&this.tolerateError(o.Messages.StrictLHSPostfix),this.context.isAssignmentTarget||this.tolerateError(o.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var s=this.nextToken().value;i=!1,e=this.finalize(this.startNode(t),new a.UpdateExpression(s,e,i))}return e},e.prototype.parseAwaitExpression=function(){var e=this.createNode();this.nextToken();var t=this.parseUnaryExpression();return this.finalize(e,new a.AwaitExpression(t))},e.prototype.parseUnaryExpression=function(){var e;if(this.match(\"+\")||this.match(\"-\")||this.match(\"~\")||this.match(\"!\")||this.matchKeyword(\"delete\")||this.matchKeyword(\"void\")||this.matchKeyword(\"typeof\")){var t=this.startNode(this.lookahead),r=this.nextToken();e=this.inheritCoverGrammar(this.parseUnaryExpression),e=this.finalize(t,new a.UnaryExpression(r.value,e)),this.context.strict&&\"delete\"===e.operator&&e.argument.type===u.Syntax.Identifier&&this.tolerateError(o.Messages.StrictDelete),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else e=this.context.await&&this.matchContextualKeyword(\"await\")?this.parseAwaitExpression():this.parseUpdateExpression();return e},e.prototype.parseExponentiationExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseUnaryExpression);if(t.type!==u.Syntax.UnaryExpression&&this.match(\"**\")){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var r=t,n=this.isolateCoverGrammar(this.parseExponentiationExpression);t=this.finalize(this.startNode(e),new a.BinaryExpression(\"**\",r,n))}return t},e.prototype.binaryPrecedence=function(e){var t=e.value;return 7===e.type?this.operatorPrecedence[t]||0:4===e.type&&(\"instanceof\"===t||this.context.allowIn&&\"in\"===t)?7:0},e.prototype.parseBinaryExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseExponentiationExpression),r=this.lookahead,n=this.binaryPrecedence(r);if(n>0){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;for(var i=[e,this.lookahead],o=t,s=this.isolateCoverGrammar(this.parseExponentiationExpression),u=[o,r.value,s],l=[n];!((n=this.binaryPrecedence(this.lookahead))<=0);){for(;u.length>2&&n<=l[l.length-1];){s=u.pop();var c=u.pop();l.pop(),o=u.pop(),i.pop();var h=this.startNode(i[i.length-1]);u.push(this.finalize(h,new a.BinaryExpression(c,o,s)))}u.push(this.nextToken().value),l.push(n),i.push(this.lookahead),u.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}var p=u.length-1;t=u[p];for(var f=i.pop();p>1;){var d=i.pop(),m=f&&f.lineStart;h=this.startNode(d,m),c=u[p-1],t=this.finalize(h,new a.BinaryExpression(c,u[p-2],t)),p-=2,f=d}}return t},e.prototype.parseConditionalExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match(\"?\")){this.nextToken();var r=this.context.allowIn;this.context.allowIn=!0;var n=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=r,this.expect(\":\");var i=this.isolateCoverGrammar(this.parseAssignmentExpression);t=this.finalize(this.startNode(e),new a.ConditionalExpression(t,n,i)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return t},e.prototype.checkPatternParam=function(e,t){switch(t.type){case u.Syntax.Identifier:this.validateParam(e,t,t.name);break;case u.Syntax.RestElement:this.checkPatternParam(e,t.argument);break;case u.Syntax.AssignmentPattern:this.checkPatternParam(e,t.left);break;case u.Syntax.ArrayPattern:for(var r=0;r<t.elements.length;r++)null!==t.elements[r]&&this.checkPatternParam(e,t.elements[r]);break;case u.Syntax.ObjectPattern:for(r=0;r<t.properties.length;r++)this.checkPatternParam(e,t.properties[r].value)}e.simple=e.simple&&t instanceof a.Identifier},e.prototype.reinterpretAsCoverFormalsList=function(e){var t,r=[e],n=!1;switch(e.type){case u.Syntax.Identifier:break;case\"ArrowParameterPlaceHolder\":r=e.params,n=e.async;break;default:return null}t={simple:!0,paramSet:{}};for(var i=0;i<r.length;++i)(a=r[i]).type===u.Syntax.AssignmentPattern?a.right.type===u.Syntax.YieldExpression&&(a.right.argument&&this.throwUnexpectedToken(this.lookahead),a.right.type=u.Syntax.Identifier,a.right.name=\"yield\",delete a.right.argument,delete a.right.delegate):n&&a.type===u.Syntax.Identifier&&\"await\"===a.name&&this.throwUnexpectedToken(this.lookahead),this.checkPatternParam(t,a),r[i]=a;if(this.context.strict||!this.context.allowYield)for(i=0;i<r.length;++i){var a;(a=r[i]).type===u.Syntax.YieldExpression&&this.throwUnexpectedToken(this.lookahead)}if(t.message===o.Messages.StrictParamDupe){var s=this.context.strict?t.stricted:t.firstRestricted;this.throwUnexpectedToken(s,t.message)}return{simple:t.simple,params:r,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}},e.prototype.parseAssignmentExpression=function(){var e;if(!this.context.allowYield&&this.matchKeyword(\"yield\"))e=this.parseYieldExpression();else{var t=this.lookahead,r=t;if(e=this.parseConditionalExpression(),3===r.type&&r.lineNumber===this.lookahead.lineNumber&&\"async\"===r.value&&(3===this.lookahead.type||this.matchKeyword(\"yield\"))){var n=this.parsePrimaryExpression();this.reinterpretExpressionAsPattern(n),e={type:\"ArrowParameterPlaceHolder\",params:[n],async:!0}}if(\"ArrowParameterPlaceHolder\"===e.type||this.match(\"=>\")){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var i=e.async,s=this.reinterpretAsCoverFormalsList(e);if(s){this.hasLineTerminator&&this.tolerateUnexpectedToken(this.lookahead),this.context.firstCoverInitializedNameError=null;var l=this.context.strict,c=this.context.allowStrictDirective;this.context.allowStrictDirective=s.simple;var h=this.context.allowYield,p=this.context.await;this.context.allowYield=!0,this.context.await=i;var f=this.startNode(t);this.expect(\"=>\");var d=void 0;if(this.match(\"{\")){var m=this.context.allowIn;this.context.allowIn=!0,d=this.parseFunctionSourceElements(),this.context.allowIn=m}else d=this.isolateCoverGrammar(this.parseAssignmentExpression);var y=d.type!==u.Syntax.BlockStatement;this.context.strict&&s.firstRestricted&&this.throwUnexpectedToken(s.firstRestricted,s.message),this.context.strict&&s.stricted&&this.tolerateUnexpectedToken(s.stricted,s.message),e=i?this.finalize(f,new a.AsyncArrowFunctionExpression(s.params,d,y)):this.finalize(f,new a.ArrowFunctionExpression(s.params,d,y)),this.context.strict=l,this.context.allowStrictDirective=c,this.context.allowYield=h,this.context.await=p}}else if(this.matchAssign()){if(this.context.isAssignmentTarget||this.tolerateError(o.Messages.InvalidLHSInAssignment),this.context.strict&&e.type===u.Syntax.Identifier){var v=e;this.scanner.isRestrictedWord(v.name)&&this.tolerateUnexpectedToken(r,o.Messages.StrictLHSAssignment),this.scanner.isStrictModeReservedWord(v.name)&&this.tolerateUnexpectedToken(r,o.Messages.StrictReservedWord)}this.match(\"=\")?this.reinterpretExpressionAsPattern(e):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1);var _=(r=this.nextToken()).value,g=this.isolateCoverGrammar(this.parseAssignmentExpression);e=this.finalize(this.startNode(t),new a.AssignmentExpression(_,e,g)),this.context.firstCoverInitializedNameError=null}}return e},e.prototype.parseExpression=function(){var e=this.lookahead,t=this.isolateCoverGrammar(this.parseAssignmentExpression);if(this.match(\",\")){var r=[];for(r.push(t);2!==this.lookahead.type&&this.match(\",\");)this.nextToken(),r.push(this.isolateCoverGrammar(this.parseAssignmentExpression));t=this.finalize(this.startNode(e),new a.SequenceExpression(r))}return t},e.prototype.parseStatementListItem=function(){var e;if(this.context.isAssignmentTarget=!0,this.context.isBindingElement=!0,4===this.lookahead.type)switch(this.lookahead.value){case\"export\":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,o.Messages.IllegalExportDeclaration),e=this.parseExportDeclaration();break;case\"import\":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,o.Messages.IllegalImportDeclaration),e=this.parseImportDeclaration();break;case\"const\":e=this.parseLexicalDeclaration({inFor:!1});break;case\"function\":e=this.parseFunctionDeclaration();break;case\"class\":e=this.parseClassDeclaration();break;case\"let\":e=this.isLexicalDeclaration()?this.parseLexicalDeclaration({inFor:!1}):this.parseStatement();break;default:e=this.parseStatement()}else e=this.parseStatement();return e},e.prototype.parseBlock=function(){var e=this.createNode();this.expect(\"{\");for(var t=[];!this.match(\"}\");)t.push(this.parseStatementListItem());return this.expect(\"}\"),this.finalize(e,new a.BlockStatement(t))},e.prototype.parseLexicalBinding=function(e,t){var r=this.createNode(),n=this.parsePattern([],e);this.context.strict&&n.type===u.Syntax.Identifier&&this.scanner.isRestrictedWord(n.name)&&this.tolerateError(o.Messages.StrictVarName);var i=null;return\"const\"===e?this.matchKeyword(\"in\")||this.matchContextualKeyword(\"of\")||(this.match(\"=\")?(this.nextToken(),i=this.isolateCoverGrammar(this.parseAssignmentExpression)):this.throwError(o.Messages.DeclarationMissingInitializer,\"const\")):(!t.inFor&&n.type!==u.Syntax.Identifier||this.match(\"=\"))&&(this.expect(\"=\"),i=this.isolateCoverGrammar(this.parseAssignmentExpression)),this.finalize(r,new a.VariableDeclarator(n,i))},e.prototype.parseBindingList=function(e,t){for(var r=[this.parseLexicalBinding(e,t)];this.match(\",\");)this.nextToken(),r.push(this.parseLexicalBinding(e,t));return r},e.prototype.isLexicalDeclaration=function(){var e=this.scanner.saveState();this.scanner.scanComments();var t=this.scanner.lex();return this.scanner.restoreState(e),3===t.type||7===t.type&&\"[\"===t.value||7===t.type&&\"{\"===t.value||4===t.type&&\"let\"===t.value||4===t.type&&\"yield\"===t.value},e.prototype.parseLexicalDeclaration=function(e){var t=this.createNode(),r=this.nextToken().value;n.assert(\"let\"===r||\"const\"===r,\"Lexical declaration must be either let or const\");var i=this.parseBindingList(r,e);return this.consumeSemicolon(),this.finalize(t,new a.VariableDeclaration(i,r))},e.prototype.parseBindingRestElement=function(e,t){var r=this.createNode();this.expect(\"...\");var n=this.parsePattern(e,t);return this.finalize(r,new a.RestElement(n))},e.prototype.parseArrayPattern=function(e,t){var r=this.createNode();this.expect(\"[\");for(var n=[];!this.match(\"]\");)if(this.match(\",\"))this.nextToken(),n.push(null);else{if(this.match(\"...\")){n.push(this.parseBindingRestElement(e,t));break}n.push(this.parsePatternWithDefault(e,t)),this.match(\"]\")||this.expect(\",\")}return this.expect(\"]\"),this.finalize(r,new a.ArrayPattern(n))},e.prototype.parsePropertyPattern=function(e,t){var r,n,i=this.createNode(),o=!1,s=!1;if(3===this.lookahead.type){var u=this.lookahead;r=this.parseVariableIdentifier();var l=this.finalize(i,new a.Identifier(u.value));if(this.match(\"=\")){e.push(u),s=!0,this.nextToken();var c=this.parseAssignmentExpression();n=this.finalize(this.startNode(u),new a.AssignmentPattern(l,c))}else this.match(\":\")?(this.expect(\":\"),n=this.parsePatternWithDefault(e,t)):(e.push(u),s=!0,n=l)}else o=this.match(\"[\"),r=this.parseObjectPropertyKey(),this.expect(\":\"),n=this.parsePatternWithDefault(e,t);return this.finalize(i,new a.Property(\"init\",r,o,n,!1,s))},e.prototype.parseObjectPattern=function(e,t){var r=this.createNode(),n=[];for(this.expect(\"{\");!this.match(\"}\");)n.push(this.parsePropertyPattern(e,t)),this.match(\"}\")||this.expect(\",\");return this.expect(\"}\"),this.finalize(r,new a.ObjectPattern(n))},e.prototype.parsePattern=function(e,t){var r;return this.match(\"[\")?r=this.parseArrayPattern(e,t):this.match(\"{\")?r=this.parseObjectPattern(e,t):(!this.matchKeyword(\"let\")||\"const\"!==t&&\"let\"!==t||this.tolerateUnexpectedToken(this.lookahead,o.Messages.LetInLexicalBinding),e.push(this.lookahead),r=this.parseVariableIdentifier(t)),r},e.prototype.parsePatternWithDefault=function(e,t){var r=this.lookahead,n=this.parsePattern(e,t);if(this.match(\"=\")){this.nextToken();var i=this.context.allowYield;this.context.allowYield=!0;var o=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowYield=i,n=this.finalize(this.startNode(r),new a.AssignmentPattern(n,o))}return n},e.prototype.parseVariableIdentifier=function(e){var t=this.createNode(),r=this.nextToken();return 4===r.type&&\"yield\"===r.value?this.context.strict?this.tolerateUnexpectedToken(r,o.Messages.StrictReservedWord):this.context.allowYield||this.throwUnexpectedToken(r):3!==r.type?this.context.strict&&4===r.type&&this.scanner.isStrictModeReservedWord(r.value)?this.tolerateUnexpectedToken(r,o.Messages.StrictReservedWord):(this.context.strict||\"let\"!==r.value||\"var\"!==e)&&this.throwUnexpectedToken(r):(this.context.isModule||this.context.await)&&3===r.type&&\"await\"===r.value&&this.tolerateUnexpectedToken(r),this.finalize(t,new a.Identifier(r.value))},e.prototype.parseVariableDeclaration=function(e){var t=this.createNode(),r=this.parsePattern([],\"var\");this.context.strict&&r.type===u.Syntax.Identifier&&this.scanner.isRestrictedWord(r.name)&&this.tolerateError(o.Messages.StrictVarName);var n=null;return this.match(\"=\")?(this.nextToken(),n=this.isolateCoverGrammar(this.parseAssignmentExpression)):r.type===u.Syntax.Identifier||e.inFor||this.expect(\"=\"),this.finalize(t,new a.VariableDeclarator(r,n))},e.prototype.parseVariableDeclarationList=function(e){var t={inFor:e.inFor},r=[];for(r.push(this.parseVariableDeclaration(t));this.match(\",\");)this.nextToken(),r.push(this.parseVariableDeclaration(t));return r},e.prototype.parseVariableStatement=function(){var e=this.createNode();this.expectKeyword(\"var\");var t=this.parseVariableDeclarationList({inFor:!1});return this.consumeSemicolon(),this.finalize(e,new a.VariableDeclaration(t,\"var\"))},e.prototype.parseEmptyStatement=function(){var e=this.createNode();return this.expect(\";\"),this.finalize(e,new a.EmptyStatement)},e.prototype.parseExpressionStatement=function(){var e=this.createNode(),t=this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new a.ExpressionStatement(t))},e.prototype.parseIfClause=function(){return this.context.strict&&this.matchKeyword(\"function\")&&this.tolerateError(o.Messages.StrictFunction),this.parseStatement()},e.prototype.parseIfStatement=function(){var e,t=this.createNode(),r=null;this.expectKeyword(\"if\"),this.expect(\"(\");var n=this.parseExpression();return!this.match(\")\")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new a.EmptyStatement)):(this.expect(\")\"),e=this.parseIfClause(),this.matchKeyword(\"else\")&&(this.nextToken(),r=this.parseIfClause())),this.finalize(t,new a.IfStatement(n,e,r))},e.prototype.parseDoWhileStatement=function(){var e=this.createNode();this.expectKeyword(\"do\");var t=this.context.inIteration;this.context.inIteration=!0;var r=this.parseStatement();this.context.inIteration=t,this.expectKeyword(\"while\"),this.expect(\"(\");var n=this.parseExpression();return!this.match(\")\")&&this.config.tolerant?this.tolerateUnexpectedToken(this.nextToken()):(this.expect(\")\"),this.match(\";\")&&this.nextToken()),this.finalize(e,new a.DoWhileStatement(r,n))},e.prototype.parseWhileStatement=function(){var e,t=this.createNode();this.expectKeyword(\"while\"),this.expect(\"(\");var r=this.parseExpression();if(!this.match(\")\")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new a.EmptyStatement);else{this.expect(\")\");var n=this.context.inIteration;this.context.inIteration=!0,e=this.parseStatement(),this.context.inIteration=n}return this.finalize(t,new a.WhileStatement(r,e))},e.prototype.parseForStatement=function(){var e,t,r,n=null,i=null,s=null,l=!0,c=this.createNode();if(this.expectKeyword(\"for\"),this.expect(\"(\"),this.match(\";\"))this.nextToken();else if(this.matchKeyword(\"var\")){n=this.createNode(),this.nextToken();var h=this.context.allowIn;this.context.allowIn=!1;var p=this.parseVariableDeclarationList({inFor:!0});if(this.context.allowIn=h,1===p.length&&this.matchKeyword(\"in\")){var f=p[0];f.init&&(f.id.type===u.Syntax.ArrayPattern||f.id.type===u.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(o.Messages.ForInOfLoopInitializer,\"for-in\"),n=this.finalize(n,new a.VariableDeclaration(p,\"var\")),this.nextToken(),e=n,t=this.parseExpression(),n=null}else 1===p.length&&null===p[0].init&&this.matchContextualKeyword(\"of\")?(n=this.finalize(n,new a.VariableDeclaration(p,\"var\")),this.nextToken(),e=n,t=this.parseAssignmentExpression(),n=null,l=!1):(n=this.finalize(n,new a.VariableDeclaration(p,\"var\")),this.expect(\";\"))}else if(this.matchKeyword(\"const\")||this.matchKeyword(\"let\")){n=this.createNode();var d=this.nextToken().value;this.context.strict||\"in\"!==this.lookahead.value?(h=this.context.allowIn,this.context.allowIn=!1,p=this.parseBindingList(d,{inFor:!0}),this.context.allowIn=h,1===p.length&&null===p[0].init&&this.matchKeyword(\"in\")?(n=this.finalize(n,new a.VariableDeclaration(p,d)),this.nextToken(),e=n,t=this.parseExpression(),n=null):1===p.length&&null===p[0].init&&this.matchContextualKeyword(\"of\")?(n=this.finalize(n,new a.VariableDeclaration(p,d)),this.nextToken(),e=n,t=this.parseAssignmentExpression(),n=null,l=!1):(this.consumeSemicolon(),n=this.finalize(n,new a.VariableDeclaration(p,d)))):(n=this.finalize(n,new a.Identifier(d)),this.nextToken(),e=n,t=this.parseExpression(),n=null)}else{var m=this.lookahead;if(h=this.context.allowIn,this.context.allowIn=!1,n=this.inheritCoverGrammar(this.parseAssignmentExpression),this.context.allowIn=h,this.matchKeyword(\"in\"))this.context.isAssignmentTarget&&n.type!==u.Syntax.AssignmentExpression||this.tolerateError(o.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(n),e=n,t=this.parseExpression(),n=null;else if(this.matchContextualKeyword(\"of\"))this.context.isAssignmentTarget&&n.type!==u.Syntax.AssignmentExpression||this.tolerateError(o.Messages.InvalidLHSInForLoop),this.nextToken(),this.reinterpretExpressionAsPattern(n),e=n,t=this.parseAssignmentExpression(),n=null,l=!1;else{if(this.match(\",\")){for(var y=[n];this.match(\",\");)this.nextToken(),y.push(this.isolateCoverGrammar(this.parseAssignmentExpression));n=this.finalize(this.startNode(m),new a.SequenceExpression(y))}this.expect(\";\")}}if(void 0===e&&(this.match(\";\")||(i=this.parseExpression()),this.expect(\";\"),this.match(\")\")||(s=this.parseExpression())),!this.match(\")\")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),r=this.finalize(this.createNode(),new a.EmptyStatement);else{this.expect(\")\");var v=this.context.inIteration;this.context.inIteration=!0,r=this.isolateCoverGrammar(this.parseStatement),this.context.inIteration=v}return void 0===e?this.finalize(c,new a.ForStatement(n,i,s,r)):l?this.finalize(c,new a.ForInStatement(e,t,r)):this.finalize(c,new a.ForOfStatement(e,t,r))},e.prototype.parseContinueStatement=function(){var e=this.createNode();this.expectKeyword(\"continue\");var t=null;if(3===this.lookahead.type&&!this.hasLineTerminator){var r=this.parseVariableIdentifier();t=r;var n=\"$\"+r.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,n)||this.throwError(o.Messages.UnknownLabel,r.name)}return this.consumeSemicolon(),null!==t||this.context.inIteration||this.throwError(o.Messages.IllegalContinue),this.finalize(e,new a.ContinueStatement(t))},e.prototype.parseBreakStatement=function(){var e=this.createNode();this.expectKeyword(\"break\");var t=null;if(3===this.lookahead.type&&!this.hasLineTerminator){var r=this.parseVariableIdentifier(),n=\"$\"+r.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,n)||this.throwError(o.Messages.UnknownLabel,r.name),t=r}return this.consumeSemicolon(),null!==t||this.context.inIteration||this.context.inSwitch||this.throwError(o.Messages.IllegalBreak),this.finalize(e,new a.BreakStatement(t))},e.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(o.Messages.IllegalReturn);var e=this.createNode();this.expectKeyword(\"return\");var t=(this.match(\";\")||this.match(\"}\")||this.hasLineTerminator||2===this.lookahead.type)&&8!==this.lookahead.type&&10!==this.lookahead.type?null:this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new a.ReturnStatement(t))},e.prototype.parseWithStatement=function(){this.context.strict&&this.tolerateError(o.Messages.StrictModeWith);var e,t=this.createNode();this.expectKeyword(\"with\"),this.expect(\"(\");var r=this.parseExpression();return!this.match(\")\")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new a.EmptyStatement)):(this.expect(\")\"),e=this.parseStatement()),this.finalize(t,new a.WithStatement(r,e))},e.prototype.parseSwitchCase=function(){var e,t=this.createNode();this.matchKeyword(\"default\")?(this.nextToken(),e=null):(this.expectKeyword(\"case\"),e=this.parseExpression()),this.expect(\":\");for(var r=[];!(this.match(\"}\")||this.matchKeyword(\"default\")||this.matchKeyword(\"case\"));)r.push(this.parseStatementListItem());return this.finalize(t,new a.SwitchCase(e,r))},e.prototype.parseSwitchStatement=function(){var e=this.createNode();this.expectKeyword(\"switch\"),this.expect(\"(\");var t=this.parseExpression();this.expect(\")\");var r=this.context.inSwitch;this.context.inSwitch=!0;var n=[],i=!1;for(this.expect(\"{\");!this.match(\"}\");){var s=this.parseSwitchCase();null===s.test&&(i&&this.throwError(o.Messages.MultipleDefaultsInSwitch),i=!0),n.push(s)}return this.expect(\"}\"),this.context.inSwitch=r,this.finalize(e,new a.SwitchStatement(t,n))},e.prototype.parseLabelledStatement=function(){var e,t=this.createNode(),r=this.parseExpression();if(r.type===u.Syntax.Identifier&&this.match(\":\")){this.nextToken();var n=r,i=\"$\"+n.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,i)&&this.throwError(o.Messages.Redeclaration,\"Label\",n.name),this.context.labelSet[i]=!0;var s=void 0;if(this.matchKeyword(\"class\"))this.tolerateUnexpectedToken(this.lookahead),s=this.parseClassDeclaration();else if(this.matchKeyword(\"function\")){var l=this.lookahead,c=this.parseFunctionDeclaration();this.context.strict?this.tolerateUnexpectedToken(l,o.Messages.StrictFunction):c.generator&&this.tolerateUnexpectedToken(l,o.Messages.GeneratorInLegacyContext),s=c}else s=this.parseStatement();delete this.context.labelSet[i],e=new a.LabeledStatement(n,s)}else this.consumeSemicolon(),e=new a.ExpressionStatement(r);return this.finalize(t,e)},e.prototype.parseThrowStatement=function(){var e=this.createNode();this.expectKeyword(\"throw\"),this.hasLineTerminator&&this.throwError(o.Messages.NewlineAfterThrow);var t=this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new a.ThrowStatement(t))},e.prototype.parseCatchClause=function(){var e=this.createNode();this.expectKeyword(\"catch\"),this.expect(\"(\"),this.match(\")\")&&this.throwUnexpectedToken(this.lookahead);for(var t=[],r=this.parsePattern(t),n={},i=0;i<t.length;i++){var s=\"$\"+t[i].value;Object.prototype.hasOwnProperty.call(n,s)&&this.tolerateError(o.Messages.DuplicateBinding,t[i].value),n[s]=!0}this.context.strict&&r.type===u.Syntax.Identifier&&this.scanner.isRestrictedWord(r.name)&&this.tolerateError(o.Messages.StrictCatchVariable),this.expect(\")\");var l=this.parseBlock();return this.finalize(e,new a.CatchClause(r,l))},e.prototype.parseFinallyClause=function(){return this.expectKeyword(\"finally\"),this.parseBlock()},e.prototype.parseTryStatement=function(){var e=this.createNode();this.expectKeyword(\"try\");var t=this.parseBlock(),r=this.matchKeyword(\"catch\")?this.parseCatchClause():null,n=this.matchKeyword(\"finally\")?this.parseFinallyClause():null;return r||n||this.throwError(o.Messages.NoCatchOrFinally),this.finalize(e,new a.TryStatement(t,r,n))},e.prototype.parseDebuggerStatement=function(){var e=this.createNode();return this.expectKeyword(\"debugger\"),this.consumeSemicolon(),this.finalize(e,new a.DebuggerStatement)},e.prototype.parseStatement=function(){var e;switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 9:e=this.parseExpressionStatement();break;case 7:var t=this.lookahead.value;e=\"{\"===t?this.parseBlock():\"(\"===t?this.parseExpressionStatement():\";\"===t?this.parseEmptyStatement():this.parseExpressionStatement();break;case 3:e=this.matchAsyncFunction()?this.parseFunctionDeclaration():this.parseLabelledStatement();break;case 4:switch(this.lookahead.value){case\"break\":e=this.parseBreakStatement();break;case\"continue\":e=this.parseContinueStatement();break;case\"debugger\":e=this.parseDebuggerStatement();break;case\"do\":e=this.parseDoWhileStatement();break;case\"for\":e=this.parseForStatement();break;case\"function\":e=this.parseFunctionDeclaration();break;case\"if\":e=this.parseIfStatement();break;case\"return\":e=this.parseReturnStatement();break;case\"switch\":e=this.parseSwitchStatement();break;case\"throw\":e=this.parseThrowStatement();break;case\"try\":e=this.parseTryStatement();break;case\"var\":e=this.parseVariableStatement();break;case\"while\":e=this.parseWhileStatement();break;case\"with\":e=this.parseWithStatement();break;default:e=this.parseExpressionStatement()}break;default:e=this.throwUnexpectedToken(this.lookahead)}return e},e.prototype.parseFunctionSourceElements=function(){var e=this.createNode();this.expect(\"{\");var t=this.parseDirectivePrologues(),r=this.context.labelSet,n=this.context.inIteration,i=this.context.inSwitch,o=this.context.inFunctionBody;for(this.context.labelSet={},this.context.inIteration=!1,this.context.inSwitch=!1,this.context.inFunctionBody=!0;2!==this.lookahead.type&&!this.match(\"}\");)t.push(this.parseStatementListItem());return this.expect(\"}\"),this.context.labelSet=r,this.context.inIteration=n,this.context.inSwitch=i,this.context.inFunctionBody=o,this.finalize(e,new a.BlockStatement(t))},e.prototype.validateParam=function(e,t,r){var n=\"$\"+r;this.context.strict?(this.scanner.isRestrictedWord(r)&&(e.stricted=t,e.message=o.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(e.paramSet,n)&&(e.stricted=t,e.message=o.Messages.StrictParamDupe)):e.firstRestricted||(this.scanner.isRestrictedWord(r)?(e.firstRestricted=t,e.message=o.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(r)?(e.firstRestricted=t,e.message=o.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(e.paramSet,n)&&(e.stricted=t,e.message=o.Messages.StrictParamDupe)),\"function\"==typeof Object.defineProperty?Object.defineProperty(e.paramSet,n,{value:!0,enumerable:!0,writable:!0,configurable:!0}):e.paramSet[n]=!0},e.prototype.parseRestElement=function(e){var t=this.createNode();this.expect(\"...\");var r=this.parsePattern(e);return this.match(\"=\")&&this.throwError(o.Messages.DefaultRestParameter),this.match(\")\")||this.throwError(o.Messages.ParameterAfterRestParameter),this.finalize(t,new a.RestElement(r))},e.prototype.parseFormalParameter=function(e){for(var t=[],r=this.match(\"...\")?this.parseRestElement(t):this.parsePatternWithDefault(t),n=0;n<t.length;n++)this.validateParam(e,t[n],t[n].value);e.simple=e.simple&&r instanceof a.Identifier,e.params.push(r)},e.prototype.parseFormalParameters=function(e){var t;if(t={simple:!0,params:[],firstRestricted:e},this.expect(\"(\"),!this.match(\")\"))for(t.paramSet={};2!==this.lookahead.type&&(this.parseFormalParameter(t),!this.match(\")\"))&&(this.expect(\",\"),!this.match(\")\")););return this.expect(\")\"),{simple:t.simple,params:t.params,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}},e.prototype.matchAsyncFunction=function(){var e=this.matchContextualKeyword(\"async\");if(e){var t=this.scanner.saveState();this.scanner.scanComments();var r=this.scanner.lex();this.scanner.restoreState(t),e=t.lineNumber===r.lineNumber&&4===r.type&&\"function\"===r.value}return e},e.prototype.parseFunctionDeclaration=function(e){var t=this.createNode(),r=this.matchContextualKeyword(\"async\");r&&this.nextToken(),this.expectKeyword(\"function\");var n,i=!r&&this.match(\"*\");i&&this.nextToken();var s=null,u=null;if(!e||!this.match(\"(\")){var l=this.lookahead;s=this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(l.value)&&this.tolerateUnexpectedToken(l,o.Messages.StrictFunctionName):this.scanner.isRestrictedWord(l.value)?(u=l,n=o.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(l.value)&&(u=l,n=o.Messages.StrictReservedWord)}var c=this.context.await,h=this.context.allowYield;this.context.await=r,this.context.allowYield=!i;var p=this.parseFormalParameters(u),f=p.params,d=p.stricted;u=p.firstRestricted,p.message&&(n=p.message);var m=this.context.strict,y=this.context.allowStrictDirective;this.context.allowStrictDirective=p.simple;var v=this.parseFunctionSourceElements();return this.context.strict&&u&&this.throwUnexpectedToken(u,n),this.context.strict&&d&&this.tolerateUnexpectedToken(d,n),this.context.strict=m,this.context.allowStrictDirective=y,this.context.await=c,this.context.allowYield=h,r?this.finalize(t,new a.AsyncFunctionDeclaration(s,f,v)):this.finalize(t,new a.FunctionDeclaration(s,f,v,i))},e.prototype.parseFunctionExpression=function(){var e=this.createNode(),t=this.matchContextualKeyword(\"async\");t&&this.nextToken(),this.expectKeyword(\"function\");var r,n=!t&&this.match(\"*\");n&&this.nextToken();var i,s=null,u=this.context.await,l=this.context.allowYield;if(this.context.await=t,this.context.allowYield=!n,!this.match(\"(\")){var c=this.lookahead;s=this.context.strict||n||!this.matchKeyword(\"yield\")?this.parseVariableIdentifier():this.parseIdentifierName(),this.context.strict?this.scanner.isRestrictedWord(c.value)&&this.tolerateUnexpectedToken(c,o.Messages.StrictFunctionName):this.scanner.isRestrictedWord(c.value)?(i=c,r=o.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(c.value)&&(i=c,r=o.Messages.StrictReservedWord)}var h=this.parseFormalParameters(i),p=h.params,f=h.stricted;i=h.firstRestricted,h.message&&(r=h.message);var d=this.context.strict,m=this.context.allowStrictDirective;this.context.allowStrictDirective=h.simple;var y=this.parseFunctionSourceElements();return this.context.strict&&i&&this.throwUnexpectedToken(i,r),this.context.strict&&f&&this.tolerateUnexpectedToken(f,r),this.context.strict=d,this.context.allowStrictDirective=m,this.context.await=u,this.context.allowYield=l,t?this.finalize(e,new a.AsyncFunctionExpression(s,p,y)):this.finalize(e,new a.FunctionExpression(s,p,y,n))},e.prototype.parseDirective=function(){var e=this.lookahead,t=this.createNode(),r=this.parseExpression(),n=r.type===u.Syntax.Literal?this.getTokenRaw(e).slice(1,-1):null;return this.consumeSemicolon(),this.finalize(t,n?new a.Directive(r,n):new a.ExpressionStatement(r))},e.prototype.parseDirectivePrologues=function(){for(var e=null,t=[];;){var r=this.lookahead;if(8!==r.type)break;var n=this.parseDirective();t.push(n);var i=n.directive;if(\"string\"!=typeof i)break;\"use strict\"===i?(this.context.strict=!0,e&&this.tolerateUnexpectedToken(e,o.Messages.StrictOctalLiteral),this.context.allowStrictDirective||this.tolerateUnexpectedToken(r,o.Messages.IllegalLanguageModeDirective)):!e&&r.octal&&(e=r)}return t},e.prototype.qualifiedPropertyName=function(e){switch(e.type){case 3:case 8:case 1:case 5:case 6:case 4:return!0;case 7:return\"[\"===e.value}return!1},e.prototype.parseGetterMethod=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var r=this.parseFormalParameters();r.params.length>0&&this.tolerateError(o.Messages.BadGetterArity);var n=this.parsePropertyMethod(r);return this.context.allowYield=t,this.finalize(e,new a.FunctionExpression(null,r.params,n,!1))},e.prototype.parseSetterMethod=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var r=this.parseFormalParameters();1!==r.params.length?this.tolerateError(o.Messages.BadSetterArity):r.params[0]instanceof a.RestElement&&this.tolerateError(o.Messages.BadSetterRestParameter);var n=this.parsePropertyMethod(r);return this.context.allowYield=t,this.finalize(e,new a.FunctionExpression(null,r.params,n,!1))},e.prototype.parseGeneratorMethod=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var r=this.parseFormalParameters();this.context.allowYield=!1;var n=this.parsePropertyMethod(r);return this.context.allowYield=t,this.finalize(e,new a.FunctionExpression(null,r.params,n,!0))},e.prototype.isStartOfExpression=function(){var e=!0,t=this.lookahead.value;switch(this.lookahead.type){case 7:e=\"[\"===t||\"(\"===t||\"{\"===t||\"+\"===t||\"-\"===t||\"!\"===t||\"~\"===t||\"++\"===t||\"--\"===t||\"/\"===t||\"/=\"===t;break;case 4:e=\"class\"===t||\"delete\"===t||\"function\"===t||\"let\"===t||\"new\"===t||\"super\"===t||\"this\"===t||\"typeof\"===t||\"void\"===t||\"yield\"===t}return e},e.prototype.parseYieldExpression=function(){var e=this.createNode();this.expectKeyword(\"yield\");var t=null,r=!1;if(!this.hasLineTerminator){var n=this.context.allowYield;this.context.allowYield=!1,(r=this.match(\"*\"))?(this.nextToken(),t=this.parseAssignmentExpression()):this.isStartOfExpression()&&(t=this.parseAssignmentExpression()),this.context.allowYield=n}return this.finalize(e,new a.YieldExpression(t,r))},e.prototype.parseClassElement=function(e){var t=this.lookahead,r=this.createNode(),n=\"\",i=null,s=null,u=!1,l=!1,c=!1,h=!1;if(this.match(\"*\"))this.nextToken();else if(u=this.match(\"[\"),\"static\"===(i=this.parseObjectPropertyKey()).name&&(this.qualifiedPropertyName(this.lookahead)||this.match(\"*\"))&&(t=this.lookahead,c=!0,u=this.match(\"[\"),this.match(\"*\")?this.nextToken():i=this.parseObjectPropertyKey()),3===t.type&&!this.hasLineTerminator&&\"async\"===t.value){var p=this.lookahead.value;\":\"!==p&&\"(\"!==p&&\"*\"!==p&&(h=!0,t=this.lookahead,i=this.parseObjectPropertyKey(),3===t.type&&\"constructor\"===t.value&&this.tolerateUnexpectedToken(t,o.Messages.ConstructorIsAsync))}var f=this.qualifiedPropertyName(this.lookahead);return 3===t.type?\"get\"===t.value&&f?(n=\"get\",u=this.match(\"[\"),i=this.parseObjectPropertyKey(),this.context.allowYield=!1,s=this.parseGetterMethod()):\"set\"===t.value&&f&&(n=\"set\",u=this.match(\"[\"),i=this.parseObjectPropertyKey(),s=this.parseSetterMethod()):7===t.type&&\"*\"===t.value&&f&&(n=\"init\",u=this.match(\"[\"),i=this.parseObjectPropertyKey(),s=this.parseGeneratorMethod(),l=!0),!n&&i&&this.match(\"(\")&&(n=\"init\",s=h?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),l=!0),n||this.throwUnexpectedToken(this.lookahead),\"init\"===n&&(n=\"method\"),u||(c&&this.isPropertyKey(i,\"prototype\")&&this.throwUnexpectedToken(t,o.Messages.StaticPrototype),!c&&this.isPropertyKey(i,\"constructor\")&&((\"method\"!==n||!l||s&&s.generator)&&this.throwUnexpectedToken(t,o.Messages.ConstructorSpecialMethod),e.value?this.throwUnexpectedToken(t,o.Messages.DuplicateConstructor):e.value=!0,n=\"constructor\")),this.finalize(r,new a.MethodDefinition(i,u,s,n,c))},e.prototype.parseClassElementList=function(){var e=[],t={value:!1};for(this.expect(\"{\");!this.match(\"}\");)this.match(\";\")?this.nextToken():e.push(this.parseClassElement(t));return this.expect(\"}\"),e},e.prototype.parseClassBody=function(){var e=this.createNode(),t=this.parseClassElementList();return this.finalize(e,new a.ClassBody(t))},e.prototype.parseClassDeclaration=function(e){var t=this.createNode(),r=this.context.strict;this.context.strict=!0,this.expectKeyword(\"class\");var n=e&&3!==this.lookahead.type?null:this.parseVariableIdentifier(),i=null;this.matchKeyword(\"extends\")&&(this.nextToken(),i=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var o=this.parseClassBody();return this.context.strict=r,this.finalize(t,new a.ClassDeclaration(n,i,o))},e.prototype.parseClassExpression=function(){var e=this.createNode(),t=this.context.strict;this.context.strict=!0,this.expectKeyword(\"class\");var r=3===this.lookahead.type?this.parseVariableIdentifier():null,n=null;this.matchKeyword(\"extends\")&&(this.nextToken(),n=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var i=this.parseClassBody();return this.context.strict=t,this.finalize(e,new a.ClassExpression(r,n,i))},e.prototype.parseModule=function(){this.context.strict=!0,this.context.isModule=!0,this.scanner.isModule=!0;for(var e=this.createNode(),t=this.parseDirectivePrologues();2!==this.lookahead.type;)t.push(this.parseStatementListItem());return this.finalize(e,new a.Module(t))},e.prototype.parseScript=function(){for(var e=this.createNode(),t=this.parseDirectivePrologues();2!==this.lookahead.type;)t.push(this.parseStatementListItem());return this.finalize(e,new a.Script(t))},e.prototype.parseModuleSpecifier=function(){var e=this.createNode();8!==this.lookahead.type&&this.throwError(o.Messages.InvalidModuleSpecifier);var t=this.nextToken(),r=this.getTokenRaw(t);return this.finalize(e,new a.Literal(t.value,r))},e.prototype.parseImportSpecifier=function(){var e,t,r=this.createNode();return 3===this.lookahead.type?(t=e=this.parseVariableIdentifier(),this.matchContextualKeyword(\"as\")&&(this.nextToken(),t=this.parseVariableIdentifier())):(t=e=this.parseIdentifierName(),this.matchContextualKeyword(\"as\")?(this.nextToken(),t=this.parseVariableIdentifier()):this.throwUnexpectedToken(this.nextToken())),this.finalize(r,new a.ImportSpecifier(t,e))},e.prototype.parseNamedImports=function(){this.expect(\"{\");for(var e=[];!this.match(\"}\");)e.push(this.parseImportSpecifier()),this.match(\"}\")||this.expect(\",\");return this.expect(\"}\"),e},e.prototype.parseImportDefaultSpecifier=function(){var e=this.createNode(),t=this.parseIdentifierName();return this.finalize(e,new a.ImportDefaultSpecifier(t))},e.prototype.parseImportNamespaceSpecifier=function(){var e=this.createNode();this.expect(\"*\"),this.matchContextualKeyword(\"as\")||this.throwError(o.Messages.NoAsAfterImportNamespace),this.nextToken();var t=this.parseIdentifierName();return this.finalize(e,new a.ImportNamespaceSpecifier(t))},e.prototype.parseImportDeclaration=function(){this.context.inFunctionBody&&this.throwError(o.Messages.IllegalImportDeclaration);var e,t=this.createNode();this.expectKeyword(\"import\");var r=[];if(8===this.lookahead.type)e=this.parseModuleSpecifier();else{if(this.match(\"{\")?r=r.concat(this.parseNamedImports()):this.match(\"*\")?r.push(this.parseImportNamespaceSpecifier()):this.isIdentifierName(this.lookahead)&&!this.matchKeyword(\"default\")?(r.push(this.parseImportDefaultSpecifier()),this.match(\",\")&&(this.nextToken(),this.match(\"*\")?r.push(this.parseImportNamespaceSpecifier()):this.match(\"{\")?r=r.concat(this.parseNamedImports()):this.throwUnexpectedToken(this.lookahead))):this.throwUnexpectedToken(this.nextToken()),!this.matchContextualKeyword(\"from\")){var n=this.lookahead.value?o.Messages.UnexpectedToken:o.Messages.MissingFromClause;this.throwError(n,this.lookahead.value)}this.nextToken(),e=this.parseModuleSpecifier()}return this.consumeSemicolon(),this.finalize(t,new a.ImportDeclaration(r,e))},e.prototype.parseExportSpecifier=function(){var e=this.createNode(),t=this.parseIdentifierName(),r=t;return this.matchContextualKeyword(\"as\")&&(this.nextToken(),r=this.parseIdentifierName()),this.finalize(e,new a.ExportSpecifier(t,r))},e.prototype.parseExportDeclaration=function(){this.context.inFunctionBody&&this.throwError(o.Messages.IllegalExportDeclaration);var e,t=this.createNode();if(this.expectKeyword(\"export\"),this.matchKeyword(\"default\"))if(this.nextToken(),this.matchKeyword(\"function\")){var r=this.parseFunctionDeclaration(!0);e=this.finalize(t,new a.ExportDefaultDeclaration(r))}else this.matchKeyword(\"class\")?(r=this.parseClassDeclaration(!0),e=this.finalize(t,new a.ExportDefaultDeclaration(r))):this.matchContextualKeyword(\"async\")?(r=this.matchAsyncFunction()?this.parseFunctionDeclaration(!0):this.parseAssignmentExpression(),e=this.finalize(t,new a.ExportDefaultDeclaration(r))):(this.matchContextualKeyword(\"from\")&&this.throwError(o.Messages.UnexpectedToken,this.lookahead.value),r=this.match(\"{\")?this.parseObjectInitializer():this.match(\"[\")?this.parseArrayInitializer():this.parseAssignmentExpression(),this.consumeSemicolon(),e=this.finalize(t,new a.ExportDefaultDeclaration(r)));else if(this.match(\"*\")){if(this.nextToken(),!this.matchContextualKeyword(\"from\")){var n=this.lookahead.value?o.Messages.UnexpectedToken:o.Messages.MissingFromClause;this.throwError(n,this.lookahead.value)}this.nextToken();var i=this.parseModuleSpecifier();this.consumeSemicolon(),e=this.finalize(t,new a.ExportAllDeclaration(i))}else if(4===this.lookahead.type){switch(r=void 0,this.lookahead.value){case\"let\":case\"const\":r=this.parseLexicalDeclaration({inFor:!1});break;case\"var\":case\"class\":case\"function\":r=this.parseStatementListItem();break;default:this.throwUnexpectedToken(this.lookahead)}e=this.finalize(t,new a.ExportNamedDeclaration(r,[],null))}else if(this.matchAsyncFunction())r=this.parseFunctionDeclaration(),e=this.finalize(t,new a.ExportNamedDeclaration(r,[],null));else{var s=[],u=null,l=!1;for(this.expect(\"{\");!this.match(\"}\");)l=l||this.matchKeyword(\"default\"),s.push(this.parseExportSpecifier()),this.match(\"}\")||this.expect(\",\");this.expect(\"}\"),this.matchContextualKeyword(\"from\")?(this.nextToken(),u=this.parseModuleSpecifier(),this.consumeSemicolon()):l?(n=this.lookahead.value?o.Messages.UnexpectedToken:o.Messages.MissingFromClause,this.throwError(n,this.lookahead.value)):this.consumeSemicolon(),e=this.finalize(t,new a.ExportNamedDeclaration(null,s,u))}return e},e}();t.Parser=c},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.assert=function(e,t){if(!e)throw new Error(\"ASSERT: \"+t)}},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function e(){this.errors=[],this.tolerant=!1}return e.prototype.recordError=function(e){this.errors.push(e)},e.prototype.tolerate=function(e){if(!this.tolerant)throw e;this.recordError(e)},e.prototype.constructError=function(e,t){var r=new Error(e);try{throw r}catch(e){Object.create&&Object.defineProperty&&(r=Object.create(e),Object.defineProperty(r,\"column\",{value:t}))}return r},e.prototype.createError=function(e,t,r,n){var i=\"Line \"+t+\": \"+n,o=this.constructError(i,r);return o.index=e,o.lineNumber=t,o.description=n,o},e.prototype.throwError=function(e,t,r,n){throw this.createError(e,t,r,n)},e.prototype.tolerateError=function(e,t,r,n){var i=this.createError(e,t,r,n);if(!this.tolerant)throw i;this.recordError(i)},e}();t.ErrorHandler=r},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.Messages={BadGetterArity:\"Getter must not have any formal parameters\",BadSetterArity:\"Setter must have exactly one formal parameter\",BadSetterRestParameter:\"Setter function argument must not be a rest parameter\",ConstructorIsAsync:\"Class constructor may not be an async method\",ConstructorSpecialMethod:\"Class constructor may not be an accessor\",DeclarationMissingInitializer:\"Missing initializer in %0 declaration\",DefaultRestParameter:\"Unexpected token =\",DuplicateBinding:\"Duplicate binding %0\",DuplicateConstructor:\"A class may only have one constructor\",DuplicateProtoProperty:\"Duplicate __proto__ fields are not allowed in object literals\",ForInOfLoopInitializer:\"%0 loop variable declaration may not have an initializer\",GeneratorInLegacyContext:\"Generator declarations are not allowed in legacy contexts\",IllegalBreak:\"Illegal break statement\",IllegalContinue:\"Illegal continue statement\",IllegalExportDeclaration:\"Unexpected token\",IllegalImportDeclaration:\"Unexpected token\",IllegalLanguageModeDirective:\"Illegal 'use strict' directive in function with non-simple parameter list\",IllegalReturn:\"Illegal return statement\",InvalidEscapedReservedWord:\"Keyword must not contain escaped characters\",InvalidHexEscapeSequence:\"Invalid hexadecimal escape sequence\",InvalidLHSInAssignment:\"Invalid left-hand side in assignment\",InvalidLHSInForIn:\"Invalid left-hand side in for-in\",InvalidLHSInForLoop:\"Invalid left-hand side in for-loop\",InvalidModuleSpecifier:\"Unexpected token\",InvalidRegExp:\"Invalid regular expression\",LetInLexicalBinding:\"let is disallowed as a lexically bound name\",MissingFromClause:\"Unexpected token\",MultipleDefaultsInSwitch:\"More than one default clause in switch statement\",NewlineAfterThrow:\"Illegal newline after throw\",NoAsAfterImportNamespace:\"Unexpected token\",NoCatchOrFinally:\"Missing catch or finally after try\",ParameterAfterRestParameter:\"Rest parameter must be last formal parameter\",Redeclaration:\"%0 '%1' has already been declared\",StaticPrototype:\"Classes may not have static property named prototype\",StrictCatchVariable:\"Catch variable may not be eval or arguments in strict mode\",StrictDelete:\"Delete of an unqualified identifier in strict mode.\",StrictFunction:\"In strict mode code, functions can only be declared at top level or inside a block\",StrictFunctionName:\"Function name may not be eval or arguments in strict mode\",StrictLHSAssignment:\"Assignment to eval or arguments is not allowed in strict mode\",StrictLHSPostfix:\"Postfix increment/decrement may not have eval or arguments operand in strict mode\",StrictLHSPrefix:\"Prefix increment/decrement may not have eval or arguments operand in strict mode\",StrictModeWith:\"Strict mode code may not include a with statement\",StrictOctalLiteral:\"Octal literals are not allowed in strict mode.\",StrictParamDupe:\"Strict mode function may not have duplicate parameter names\",StrictParamName:\"Parameter name eval or arguments is not allowed in strict mode\",StrictReservedWord:\"Use of future reserved word in strict mode\",StrictVarName:\"Variable name may not be eval or arguments in strict mode\",TemplateOctalLiteral:\"Octal literals are not allowed in template strings.\",UnexpectedEOS:\"Unexpected end of input\",UnexpectedIdentifier:\"Unexpected identifier\",UnexpectedNumber:\"Unexpected number\",UnexpectedReserved:\"Unexpected reserved word\",UnexpectedString:\"Unexpected string\",UnexpectedTemplate:\"Unexpected quasi %0\",UnexpectedToken:\"Unexpected token %0\",UnexpectedTokenIllegal:\"Unexpected token ILLEGAL\",UnknownLabel:\"Undefined label '%0'\",UnterminatedRegExp:\"Invalid regular expression: missing /\"}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(9),i=r(4),o=r(11);function a(e){return\"0123456789abcdef\".indexOf(e.toLowerCase())}function s(e){return\"01234567\".indexOf(e)}var u=function(){function e(e,t){this.source=e,this.errorHandler=t,this.trackComment=!1,this.isModule=!1,this.length=e.length,this.index=0,this.lineNumber=e.length>0?1:0,this.lineStart=0,this.curlyStack=[]}return e.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart}},e.prototype.restoreState=function(e){this.index=e.index,this.lineNumber=e.lineNumber,this.lineStart=e.lineStart},e.prototype.eof=function(){return this.index>=this.length},e.prototype.throwUnexpectedToken=function(e){return void 0===e&&(e=o.Messages.UnexpectedTokenIllegal),this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,e)},e.prototype.tolerateUnexpectedToken=function(e){void 0===e&&(e=o.Messages.UnexpectedTokenIllegal),this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,e)},e.prototype.skipSingleLineComment=function(e){var t,r,n=[];for(this.trackComment&&(n=[],t=this.index-e,r={start:{line:this.lineNumber,column:this.index-this.lineStart-e},end:{}});!this.eof();){var o=this.source.charCodeAt(this.index);if(++this.index,i.Character.isLineTerminator(o)){if(this.trackComment){r.end={line:this.lineNumber,column:this.index-this.lineStart-1};var a={multiLine:!1,slice:[t+e,this.index-1],range:[t,this.index-1],loc:r};n.push(a)}return 13===o&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,n}}return this.trackComment&&(r.end={line:this.lineNumber,column:this.index-this.lineStart},a={multiLine:!1,slice:[t+e,this.index],range:[t,this.index],loc:r},n.push(a)),n},e.prototype.skipMultiLineComment=function(){var e,t,r=[];for(this.trackComment&&(r=[],e=this.index-2,t={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}});!this.eof();){var n=this.source.charCodeAt(this.index);if(i.Character.isLineTerminator(n))13===n&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else if(42===n){if(47===this.source.charCodeAt(this.index+1)){if(this.index+=2,this.trackComment){t.end={line:this.lineNumber,column:this.index-this.lineStart};var o={multiLine:!0,slice:[e+2,this.index-2],range:[e,this.index],loc:t};r.push(o)}return r}++this.index}else++this.index}return this.trackComment&&(t.end={line:this.lineNumber,column:this.index-this.lineStart},o={multiLine:!0,slice:[e+2,this.index],range:[e,this.index],loc:t},r.push(o)),this.tolerateUnexpectedToken(),r},e.prototype.scanComments=function(){var e;this.trackComment&&(e=[]);for(var t=0===this.index;!this.eof();){var r=this.source.charCodeAt(this.index);if(i.Character.isWhiteSpace(r))++this.index;else if(i.Character.isLineTerminator(r))++this.index,13===r&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,t=!0;else if(47===r)if(47===(r=this.source.charCodeAt(this.index+1))){this.index+=2;var n=this.skipSingleLineComment(2);this.trackComment&&(e=e.concat(n)),t=!0}else{if(42!==r)break;this.index+=2,n=this.skipMultiLineComment(),this.trackComment&&(e=e.concat(n))}else if(t&&45===r){if(45!==this.source.charCodeAt(this.index+1)||62!==this.source.charCodeAt(this.index+2))break;this.index+=3,n=this.skipSingleLineComment(3),this.trackComment&&(e=e.concat(n))}else{if(60!==r||this.isModule)break;if(\"!--\"!==this.source.slice(this.index+1,this.index+4))break;this.index+=4,n=this.skipSingleLineComment(4),this.trackComment&&(e=e.concat(n))}}return e},e.prototype.isFutureReservedWord=function(e){switch(e){case\"enum\":case\"export\":case\"import\":case\"super\":return!0;default:return!1}},e.prototype.isStrictModeReservedWord=function(e){switch(e){case\"implements\":case\"interface\":case\"package\":case\"private\":case\"protected\":case\"public\":case\"static\":case\"yield\":case\"let\":return!0;default:return!1}},e.prototype.isRestrictedWord=function(e){return\"eval\"===e||\"arguments\"===e},e.prototype.isKeyword=function(e){switch(e.length){case 2:return\"if\"===e||\"in\"===e||\"do\"===e;case 3:return\"var\"===e||\"for\"===e||\"new\"===e||\"try\"===e||\"let\"===e;case 4:return\"this\"===e||\"else\"===e||\"case\"===e||\"void\"===e||\"with\"===e||\"enum\"===e;case 5:return\"while\"===e||\"break\"===e||\"catch\"===e||\"throw\"===e||\"const\"===e||\"yield\"===e||\"class\"===e||\"super\"===e;case 6:return\"return\"===e||\"typeof\"===e||\"delete\"===e||\"switch\"===e||\"export\"===e||\"import\"===e;case 7:return\"default\"===e||\"finally\"===e||\"extends\"===e;case 8:return\"function\"===e||\"continue\"===e||\"debugger\"===e;case 10:return\"instanceof\"===e;default:return!1}},e.prototype.codePointAt=function(e){var t=this.source.charCodeAt(e);if(t>=55296&&t<=56319){var r=this.source.charCodeAt(e+1);r>=56320&&r<=57343&&(t=1024*(t-55296)+r-56320+65536)}return t},e.prototype.scanHexEscape=function(e){for(var t=\"u\"===e?4:2,r=0,n=0;n<t;++n){if(this.eof()||!i.Character.isHexDigit(this.source.charCodeAt(this.index)))return null;r=16*r+a(this.source[this.index++])}return String.fromCharCode(r)},e.prototype.scanUnicodeCodePointEscape=function(){var e=this.source[this.index],t=0;for(\"}\"===e&&this.throwUnexpectedToken();!this.eof()&&(e=this.source[this.index++],i.Character.isHexDigit(e.charCodeAt(0)));)t=16*t+a(e);return(t>1114111||\"}\"!==e)&&this.throwUnexpectedToken(),i.Character.fromCodePoint(t)},e.prototype.getIdentifier=function(){for(var e=this.index++;!this.eof();){var t=this.source.charCodeAt(this.index);if(92===t)return this.index=e,this.getComplexIdentifier();if(t>=55296&&t<57343)return this.index=e,this.getComplexIdentifier();if(!i.Character.isIdentifierPart(t))break;++this.index}return this.source.slice(e,this.index)},e.prototype.getComplexIdentifier=function(){var e,t=this.codePointAt(this.index),r=i.Character.fromCodePoint(t);for(this.index+=r.length,92===t&&(117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,\"{\"===this.source[this.index]?(++this.index,e=this.scanUnicodeCodePointEscape()):null!==(e=this.scanHexEscape(\"u\"))&&\"\\\\\"!==e&&i.Character.isIdentifierStart(e.charCodeAt(0))||this.throwUnexpectedToken(),r=e);!this.eof()&&(t=this.codePointAt(this.index),i.Character.isIdentifierPart(t));)r+=e=i.Character.fromCodePoint(t),this.index+=e.length,92===t&&(r=r.substr(0,r.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,\"{\"===this.source[this.index]?(++this.index,e=this.scanUnicodeCodePointEscape()):null!==(e=this.scanHexEscape(\"u\"))&&\"\\\\\"!==e&&i.Character.isIdentifierPart(e.charCodeAt(0))||this.throwUnexpectedToken(),r+=e);return r},e.prototype.octalToDecimal=function(e){var t=\"0\"!==e,r=s(e);return!this.eof()&&i.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(t=!0,r=8*r+s(this.source[this.index++]),\"0123\".indexOf(e)>=0&&!this.eof()&&i.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(r=8*r+s(this.source[this.index++]))),{code:r,octal:t}},e.prototype.scanIdentifier=function(){var e,t=this.index,r=92===this.source.charCodeAt(t)?this.getComplexIdentifier():this.getIdentifier();if(3!=(e=1===r.length?3:this.isKeyword(r)?4:\"null\"===r?5:\"true\"===r||\"false\"===r?1:3)&&t+r.length!==this.index){var n=this.index;this.index=t,this.tolerateUnexpectedToken(o.Messages.InvalidEscapedReservedWord),this.index=n}return{type:e,value:r,lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}},e.prototype.scanPunctuator=function(){var e=this.index,t=this.source[this.index];switch(t){case\"(\":case\"{\":\"{\"===t&&this.curlyStack.push(\"{\"),++this.index;break;case\".\":++this.index,\".\"===this.source[this.index]&&\".\"===this.source[this.index+1]&&(this.index+=2,t=\"...\");break;case\"}\":++this.index,this.curlyStack.pop();break;case\")\":case\";\":case\",\":case\"[\":case\"]\":case\":\":case\"?\":case\"~\":++this.index;break;default:\">>>=\"===(t=this.source.substr(this.index,4))?this.index+=4:\"===\"===(t=t.substr(0,3))||\"!==\"===t||\">>>\"===t||\"<<=\"===t||\">>=\"===t||\"**=\"===t?this.index+=3:\"&&\"===(t=t.substr(0,2))||\"||\"===t||\"==\"===t||\"!=\"===t||\"+=\"===t||\"-=\"===t||\"*=\"===t||\"/=\"===t||\"++\"===t||\"--\"===t||\"<<\"===t||\">>\"===t||\"&=\"===t||\"|=\"===t||\"^=\"===t||\"%=\"===t||\"<=\"===t||\">=\"===t||\"=>\"===t||\"**\"===t?this.index+=2:(t=this.source[this.index],\"<>=!+-*%&|^/\".indexOf(t)>=0&&++this.index)}return this.index===e&&this.throwUnexpectedToken(),{type:7,value:t,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanHexLiteral=function(e){for(var t=\"\";!this.eof()&&i.Character.isHexDigit(this.source.charCodeAt(this.index));)t+=this.source[this.index++];return 0===t.length&&this.throwUnexpectedToken(),i.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseInt(\"0x\"+t,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanBinaryLiteral=function(e){for(var t,r=\"\";!this.eof()&&(\"0\"===(t=this.source[this.index])||\"1\"===t);)r+=this.source[this.index++];return 0===r.length&&this.throwUnexpectedToken(),this.eof()||(t=this.source.charCodeAt(this.index),(i.Character.isIdentifierStart(t)||i.Character.isDecimalDigit(t))&&this.throwUnexpectedToken()),{type:6,value:parseInt(r,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanOctalLiteral=function(e,t){var r=\"\",n=!1;for(i.Character.isOctalDigit(e.charCodeAt(0))?(n=!0,r=\"0\"+this.source[this.index++]):++this.index;!this.eof()&&i.Character.isOctalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index++];return n||0!==r.length||this.throwUnexpectedToken(),(i.Character.isIdentifierStart(this.source.charCodeAt(this.index))||i.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:6,value:parseInt(r,8),octal:n,lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}},e.prototype.isImplicitOctalLiteral=function(){for(var e=this.index+1;e<this.length;++e){var t=this.source[e];if(\"8\"===t||\"9\"===t)return!1;if(!i.Character.isOctalDigit(t.charCodeAt(0)))return!0}return!0},e.prototype.scanNumericLiteral=function(){var e=this.index,t=this.source[e];n.assert(i.Character.isDecimalDigit(t.charCodeAt(0))||\".\"===t,\"Numeric literal must start with a decimal digit or a decimal point\");var r=\"\";if(\".\"!==t){if(r=this.source[this.index++],t=this.source[this.index],\"0\"===r){if(\"x\"===t||\"X\"===t)return++this.index,this.scanHexLiteral(e);if(\"b\"===t||\"B\"===t)return++this.index,this.scanBinaryLiteral(e);if(\"o\"===t||\"O\"===t)return this.scanOctalLiteral(t,e);if(t&&i.Character.isOctalDigit(t.charCodeAt(0))&&this.isImplicitOctalLiteral())return this.scanOctalLiteral(t,e)}for(;i.Character.isDecimalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index++];t=this.source[this.index]}if(\".\"===t){for(r+=this.source[this.index++];i.Character.isDecimalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index++];t=this.source[this.index]}if(\"e\"===t||\"E\"===t)if(r+=this.source[this.index++],\"+\"!==(t=this.source[this.index])&&\"-\"!==t||(r+=this.source[this.index++]),i.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;i.Character.isDecimalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index++];else this.throwUnexpectedToken();return i.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseFloat(r),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanStringLiteral=function(){var e=this.index,t=this.source[e];n.assert(\"'\"===t||'\"'===t,\"String literal must starts with a quote\"),++this.index;for(var r=!1,a=\"\";!this.eof();){var s=this.source[this.index++];if(s===t){t=\"\";break}if(\"\\\\\"===s)if((s=this.source[this.index++])&&i.Character.isLineTerminator(s.charCodeAt(0)))++this.lineNumber,\"\\r\"===s&&\"\\n\"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(s){case\"u\":if(\"{\"===this.source[this.index])++this.index,a+=this.scanUnicodeCodePointEscape();else{var u=this.scanHexEscape(s);null===u&&this.throwUnexpectedToken(),a+=u}break;case\"x\":var l=this.scanHexEscape(s);null===l&&this.throwUnexpectedToken(o.Messages.InvalidHexEscapeSequence),a+=l;break;case\"n\":a+=\"\\n\";break;case\"r\":a+=\"\\r\";break;case\"t\":a+=\"\\t\";break;case\"b\":a+=\"\\b\";break;case\"f\":a+=\"\\f\";break;case\"v\":a+=\"\\v\";break;case\"8\":case\"9\":a+=s,this.tolerateUnexpectedToken();break;default:if(s&&i.Character.isOctalDigit(s.charCodeAt(0))){var c=this.octalToDecimal(s);r=c.octal||r,a+=String.fromCharCode(c.code)}else a+=s}else{if(i.Character.isLineTerminator(s.charCodeAt(0)))break;a+=s}}return\"\"!==t&&(this.index=e,this.throwUnexpectedToken()),{type:8,value:a,octal:r,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanTemplate=function(){var e=\"\",t=!1,r=this.index,n=\"`\"===this.source[r],a=!1,s=2;for(++this.index;!this.eof();){var u=this.source[this.index++];if(\"`\"===u){s=1,a=!0,t=!0;break}if(\"$\"===u){if(\"{\"===this.source[this.index]){this.curlyStack.push(\"${\"),++this.index,t=!0;break}e+=u}else if(\"\\\\\"===u)if(u=this.source[this.index++],i.Character.isLineTerminator(u.charCodeAt(0)))++this.lineNumber,\"\\r\"===u&&\"\\n\"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(u){case\"n\":e+=\"\\n\";break;case\"r\":e+=\"\\r\";break;case\"t\":e+=\"\\t\";break;case\"u\":if(\"{\"===this.source[this.index])++this.index,e+=this.scanUnicodeCodePointEscape();else{var l=this.index,c=this.scanHexEscape(u);null!==c?e+=c:(this.index=l,e+=u)}break;case\"x\":var h=this.scanHexEscape(u);null===h&&this.throwUnexpectedToken(o.Messages.InvalidHexEscapeSequence),e+=h;break;case\"b\":e+=\"\\b\";break;case\"f\":e+=\"\\f\";break;case\"v\":e+=\"\\v\";break;default:\"0\"===u?(i.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(o.Messages.TemplateOctalLiteral),e+=\"\\0\"):i.Character.isOctalDigit(u.charCodeAt(0))?this.throwUnexpectedToken(o.Messages.TemplateOctalLiteral):e+=u}else i.Character.isLineTerminator(u.charCodeAt(0))?(++this.lineNumber,\"\\r\"===u&&\"\\n\"===this.source[this.index]&&++this.index,this.lineStart=this.index,e+=\"\\n\"):e+=u}return t||this.throwUnexpectedToken(),n||this.curlyStack.pop(),{type:10,value:this.source.slice(r+1,this.index-s),cooked:e,head:n,tail:a,lineNumber:this.lineNumber,lineStart:this.lineStart,start:r,end:this.index}},e.prototype.testRegExp=function(e,t){var r=e,n=this;t.indexOf(\"u\")>=0&&(r=r.replace(/\\\\u\\{([0-9a-fA-F]+)\\}|\\\\u([a-fA-F0-9]{4})/g,(function(e,t,r){var i=parseInt(t||r,16);return i>1114111&&n.throwUnexpectedToken(o.Messages.InvalidRegExp),i<=65535?String.fromCharCode(i):\"\"})).replace(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g,\"\"));try{RegExp(r)}catch(e){this.throwUnexpectedToken(o.Messages.InvalidRegExp)}try{return new RegExp(e,t)}catch(e){return null}},e.prototype.scanRegExpBody=function(){var e=this.source[this.index];n.assert(\"/\"===e,\"Regular expression literal must start with a slash\");for(var t=this.source[this.index++],r=!1,a=!1;!this.eof();)if(t+=e=this.source[this.index++],\"\\\\\"===e)e=this.source[this.index++],i.Character.isLineTerminator(e.charCodeAt(0))&&this.throwUnexpectedToken(o.Messages.UnterminatedRegExp),t+=e;else if(i.Character.isLineTerminator(e.charCodeAt(0)))this.throwUnexpectedToken(o.Messages.UnterminatedRegExp);else if(r)\"]\"===e&&(r=!1);else{if(\"/\"===e){a=!0;break}\"[\"===e&&(r=!0)}return a||this.throwUnexpectedToken(o.Messages.UnterminatedRegExp),t.substr(1,t.length-2)},e.prototype.scanRegExpFlags=function(){for(var e=\"\";!this.eof();){var t=this.source[this.index];if(!i.Character.isIdentifierPart(t.charCodeAt(0)))break;if(++this.index,\"\\\\\"!==t||this.eof())e+=t;else if(\"u\"===(t=this.source[this.index])){++this.index;var r=this.index,n=this.scanHexEscape(\"u\");if(null!==n)for(e+=n;r<this.index;++r)this.source[r];else this.index=r,e+=\"u\";this.tolerateUnexpectedToken()}else this.tolerateUnexpectedToken()}return e},e.prototype.scanRegExp=function(){var e=this.index,t=this.scanRegExpBody(),r=this.scanRegExpFlags();return{type:9,value:\"\",pattern:t,flags:r,regex:this.testRegExp(t,r),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.lex=function(){if(this.eof())return{type:2,value:\"\",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var e=this.source.charCodeAt(this.index);return i.Character.isIdentifierStart(e)?this.scanIdentifier():40===e||41===e||59===e?this.scanPunctuator():39===e||34===e?this.scanStringLiteral():46===e?i.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():i.Character.isDecimalDigit(e)?this.scanNumericLiteral():96===e||125===e&&\"${\"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():e>=55296&&e<57343&&i.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()},e}();t.Scanner=u},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.TokenName={},t.TokenName[1]=\"Boolean\",t.TokenName[2]=\"<end>\",t.TokenName[3]=\"Identifier\",t.TokenName[4]=\"Keyword\",t.TokenName[5]=\"Null\",t.TokenName[6]=\"Numeric\",t.TokenName[7]=\"Punctuator\",t.TokenName[8]=\"String\",t.TokenName[9]=\"RegularExpression\",t.TokenName[10]=\"Template\"},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.XHTMLEntities={quot:'\"',amp:\"&\",apos:\"'\",gt:\">\",nbsp:\"\",iexcl:\"\",cent:\"\",pound:\"\",curren:\"\",yen:\"\",brvbar:\"\",sect:\"\",uml:\"\",copy:\"\",ordf:\"\",laquo:\"\",not:\"\",shy:\"\",reg:\"\",macr:\"\",deg:\"\",plusmn:\"\",sup2:\"\",sup3:\"\",acute:\"\",micro:\"\",para:\"\",middot:\"\",cedil:\"\",sup1:\"\",ordm:\"\",raquo:\"\",frac14:\"\",frac12:\"\",frac34:\"\",iquest:\"\",Agrave:\"\",Aacute:\"\",Acirc:\"\",Atilde:\"\",Auml:\"\",Aring:\"\",AElig:\"\",Ccedil:\"\",Egrave:\"\",Eacute:\"\",Ecirc:\"\",Euml:\"\",Igrave:\"\",Iacute:\"\",Icirc:\"\",Iuml:\"\",ETH:\"\",Ntilde:\"\",Ograve:\"\",Oacute:\"\",Ocirc:\"\",Otilde:\"\",Ouml:\"\",times:\"\",Oslash:\"\",Ugrave:\"\",Uacute:\"\",Ucirc:\"\",Uuml:\"\",Yacute:\"\",THORN:\"\",szlig:\"\",agrave:\"\",aacute:\"\",acirc:\"\",atilde:\"\",auml:\"\",aring:\"\",aelig:\"\",ccedil:\"\",egrave:\"\",eacute:\"\",ecirc:\"\",euml:\"\",igrave:\"\",iacute:\"\",icirc:\"\",iuml:\"\",eth:\"\",ntilde:\"\",ograve:\"\",oacute:\"\",ocirc:\"\",otilde:\"\",ouml:\"\",divide:\"\",oslash:\"\",ugrave:\"\",uacute:\"\",ucirc:\"\",uuml:\"\",yacute:\"\",thorn:\"\",yuml:\"\",OElig:\"\",oelig:\"\",Scaron:\"\",scaron:\"\",Yuml:\"\",fnof:\"\",circ:\"\",tilde:\"\",Alpha:\"\",Beta:\"\",Gamma:\"\",Delta:\"\",Epsilon:\"\",Zeta:\"\",Eta:\"\",Theta:\"\",Iota:\"\",Kappa:\"\",Lambda:\"\",Mu:\"\",Nu:\"\",Xi:\"\",Omicron:\"\",Pi:\"\",Rho:\"\",Sigma:\"\",Tau:\"\",Upsilon:\"\",Phi:\"\",Chi:\"\",Psi:\"\",Omega:\"\",alpha:\"\",beta:\"\",gamma:\"\",delta:\"\",epsilon:\"\",zeta:\"\",eta:\"\",theta:\"\",iota:\"\",kappa:\"\",lambda:\"\",mu:\"\",nu:\"\",xi:\"\",omicron:\"\",pi:\"\",rho:\"\",sigmaf:\"\",sigma:\"\",tau:\"\",upsilon:\"\",phi:\"\",chi:\"\",psi:\"\",omega:\"\",thetasym:\"\",upsih:\"\",piv:\"\",ensp:\"\",emsp:\"\",thinsp:\"\",zwnj:\"\",zwj:\"\",lrm:\"\",rlm:\"\",ndash:\"\",mdash:\"\",lsquo:\"\",rsquo:\"\",sbquo:\"\",ldquo:\"\",rdquo:\"\",bdquo:\"\",dagger:\"\",Dagger:\"\",bull:\"\",hellip:\"\",permil:\"\",prime:\"\",Prime:\"\",lsaquo:\"\",rsaquo:\"\",oline:\"\",frasl:\"\",euro:\"\",image:\"\",weierp:\"\",real:\"\",trade:\"\",alefsym:\"\",larr:\"\",uarr:\"\",rarr:\"\",darr:\"\",harr:\"\",crarr:\"\",lArr:\"\",uArr:\"\",rArr:\"\",dArr:\"\",hArr:\"\",forall:\"\",part:\"\",exist:\"\",empty:\"\",nabla:\"\",isin:\"\",notin:\"\",ni:\"\",prod:\"\",sum:\"\",minus:\"\",lowast:\"\",radic:\"\",prop:\"\",infin:\"\",ang:\"\",and:\"\",or:\"\",cap:\"\",cup:\"\",int:\"\",there4:\"\",sim:\"\",cong:\"\",asymp:\"\",ne:\"\",equiv:\"\",le:\"\",ge:\"\",sub:\"\",sup:\"\",nsub:\"\",sube:\"\",supe:\"\",oplus:\"\",otimes:\"\",perp:\"\",sdot:\"\",lceil:\"\",rceil:\"\",lfloor:\"\",rfloor:\"\",loz:\"\",spades:\"\",clubs:\"\",hearts:\"\",diams:\"\",lang:\"\",rang:\"\"}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(10),i=r(12),o=r(13),a=function(){function e(){this.values=[],this.curly=this.paren=-1}return e.prototype.beforeFunctionExpression=function(e){return[\"(\",\"{\",\"[\",\"in\",\"typeof\",\"instanceof\",\"new\",\"return\",\"case\",\"delete\",\"throw\",\"void\",\"=\",\"+=\",\"-=\",\"*=\",\"**=\",\"/=\",\"%=\",\"<<=\",\">>=\",\">>>=\",\"&=\",\"|=\",\"^=\",\",\",\"+\",\"-\",\"*\",\"**\",\"/\",\"%\",\"++\",\"--\",\"<<\",\">>\",\">>>\",\"&\",\"|\",\"^\",\"!\",\"~\",\"&&\",\"||\",\"?\",\":\",\"===\",\"==\",\">=\",\"<=\",\"<\",\">\",\"!=\",\"!==\"].indexOf(e)>=0},e.prototype.isRegexStart=function(){var e=this.values[this.values.length-1],t=null!==e;switch(e){case\"this\":case\"]\":t=!1;break;case\")\":var r=this.values[this.paren-1];t=\"if\"===r||\"while\"===r||\"for\"===r||\"with\"===r;break;case\"}\":if(t=!1,\"function\"===this.values[this.curly-3])t=!!(n=this.values[this.curly-4])&&!this.beforeFunctionExpression(n);else if(\"function\"===this.values[this.curly-4]){var n;t=!(n=this.values[this.curly-5])||!this.beforeFunctionExpression(n)}}return t},e.prototype.push=function(e){7===e.type||4===e.type?(\"{\"===e.value?this.curly=this.values.length:\"(\"===e.value&&(this.paren=this.values.length),this.values.push(e.value)):this.values.push(null)},e}(),s=function(){function e(e,t){this.errorHandler=new n.ErrorHandler,this.errorHandler.tolerant=!!t&&\"boolean\"==typeof t.tolerant&&t.tolerant,this.scanner=new i.Scanner(e,this.errorHandler),this.scanner.trackComment=!!t&&\"boolean\"==typeof t.comment&&t.comment,this.trackRange=!!t&&\"boolean\"==typeof t.range&&t.range,this.trackLoc=!!t&&\"boolean\"==typeof t.loc&&t.loc,this.buffer=[],this.reader=new a}return e.prototype.errors=function(){return this.errorHandler.errors},e.prototype.getNextToken=function(){if(0===this.buffer.length){var e=this.scanner.scanComments();if(this.scanner.trackComment)for(var t=0;t<e.length;++t){var r=e[t],n=this.scanner.source.slice(r.slice[0],r.slice[1]),i={type:r.multiLine?\"BlockComment\":\"LineComment\",value:n};this.trackRange&&(i.range=r.range),this.trackLoc&&(i.loc=r.loc),this.buffer.push(i)}if(!this.scanner.eof()){var a=void 0;this.trackLoc&&(a={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});var s=\"/\"===this.scanner.source[this.scanner.index]&&this.reader.isRegexStart()?this.scanner.scanRegExp():this.scanner.lex();this.reader.push(s);var u={type:o.TokenName[s.type],value:this.scanner.source.slice(s.start,s.end)};if(this.trackRange&&(u.range=[s.start,s.end]),this.trackLoc&&(a.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},u.loc=a),9===s.type){var l=s.pattern,c=s.flags;u.regex={pattern:l,flags:c}}this.buffer.push(u)}}return this.buffer.shift()},e}();t.Tokenizer=s}])},e.exports=n()},function(e,t,r){\"use strict\";var n=r(38),i=r(53),o=r(76),a=r(54),s=Object.prototype.toString,u=Object.prototype.hasOwnProperty,l={0:\"\\\\0\",7:\"\\\\a\",8:\"\\\\b\",9:\"\\\\t\",10:\"\\\\n\",11:\"\\\\v\",12:\"\\\\f\",13:\"\\\\r\",27:\"\\\\e\",34:'\\\\\"',92:\"\\\\\\\\\",133:\"\\\\N\",160:\"\\\\_\",8232:\"\\\\L\",8233:\"\\\\P\"},c=[\"y\",\"Y\",\"yes\",\"Yes\",\"YES\",\"on\",\"On\",\"ON\",\"n\",\"N\",\"no\",\"No\",\"NO\",\"off\",\"Off\",\"OFF\"];function h(e){var t,r,o;if(t=e.toString(16).toUpperCase(),e<=255)r=\"x\",o=2;else if(e<=65535)r=\"u\",o=4;else{if(!(e<=4294967295))throw new i(\"code point within a string may not be greater than 0xFFFFFFFF\");r=\"U\",o=8}return\"\\\\\"+r+n.repeat(\"0\",o-t.length)+t}function p(e){this.schema=e.schema||o,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=n.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var r,n,i,o,a,s,l;if(null===t)return{};for(r={},i=0,o=(n=Object.keys(t)).length;i<o;i+=1)a=n[i],s=String(t[a]),\"!!\"===a.slice(0,2)&&(a=\"tag:yaml.org,2002:\"+a.slice(2)),(l=e.compiledTypeMap.fallback[a])&&u.call(l.styleAliases,s)&&(s=l.styleAliases[s]),r[a]=s;return r}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result=\"\",this.duplicates=[],this.usedDuplicates=null}function f(e,t){for(var r,i=n.repeat(\" \",t),o=0,a=-1,s=\"\",u=e.length;o<u;)-1===(a=e.indexOf(\"\\n\",o))?(r=e.slice(o),o=u):(r=e.slice(o,a+1),o=a+1),r.length&&\"\\n\"!==r&&(s+=i),s+=r;return s}function d(e,t){return\"\\n\"+n.repeat(\" \",e.indent*t)}function m(e){return 32===e||9===e}function y(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&65279!==e||65536<=e&&e<=1114111}function v(e,t){return y(e)&&65279!==e&&44!==e&&91!==e&&93!==e&&123!==e&&125!==e&&58!==e&&(35!==e||t&&function(e){return y(e)&&!m(e)&&65279!==e&&13!==e&&10!==e}(t))}function _(e){return/^\\n* /.test(e)}function g(e,t,r,n,i){var o,a,s,u,l=!1,c=!1,h=-1!==n,p=-1,f=y(u=e.charCodeAt(0))&&65279!==u&&!m(u)&&45!==u&&63!==u&&58!==u&&44!==u&&91!==u&&93!==u&&123!==u&&125!==u&&35!==u&&38!==u&&42!==u&&33!==u&&124!==u&&61!==u&&62!==u&&39!==u&&34!==u&&37!==u&&64!==u&&96!==u&&!m(e.charCodeAt(e.length-1));if(t)for(o=0;o<e.length;o++){if(!y(a=e.charCodeAt(o)))return 5;s=o>0?e.charCodeAt(o-1):null,f=f&&v(a,s)}else{for(o=0;o<e.length;o++){if(10===(a=e.charCodeAt(o)))l=!0,h&&(c=c||o-p-1>n&&\" \"!==e[p+1],p=o);else if(!y(a))return 5;s=o>0?e.charCodeAt(o-1):null,f=f&&v(a,s)}c=c||h&&o-p-1>n&&\" \"!==e[p+1]}return l||c?r>9&&_(e)?5:c?4:3:f&&!i(e)?1:2}function b(e,t,r,n){e.dump=function(){if(0===t.length)return\"''\";if(!e.noCompatMode&&-1!==c.indexOf(t))return\"'\"+t+\"'\";var o=e.indent*Math.max(1,r),a=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),s=n||e.flowLevel>-1&&r>=e.flowLevel;switch(g(t,s,e.indent,a,(function(t){return function(e,t){var r,n;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(e.implicitTypes[r].resolve(t))return!0;return!1}(e,t)}))){case 1:return t;case 2:return\"'\"+t.replace(/'/g,\"''\")+\"'\";case 3:return\"|\"+x(t,e.indent)+w(f(t,o));case 4:return\">\"+x(t,e.indent)+w(f(function(e,t){var r,n,i=/(\\n+)([^\\n]*)/g,o=(s=e.indexOf(\"\\n\"),s=-1!==s?s:e.length,i.lastIndex=s,E(e.slice(0,s),t)),a=\"\\n\"===e[0]||\" \"===e[0];var s;for(;n=i.exec(e);){var u=n[1],l=n[2];r=\" \"===l[0],o+=u+(a||r||\"\"===l?\"\":\"\\n\")+E(l,t),a=r}return o}(t,a),o));case 5:return'\"'+function(e){for(var t,r,n,i=\"\",o=0;o<e.length;o++)(t=e.charCodeAt(o))>=55296&&t<=56319&&(r=e.charCodeAt(o+1))>=56320&&r<=57343?(i+=h(1024*(t-55296)+r-56320+65536),o++):(n=l[t],i+=!n&&y(t)?e[o]:n||h(t));return i}(t)+'\"';default:throw new i(\"impossible error: invalid scalar style\")}}()}function x(e,t){var r=_(e)?String(t):\"\",n=\"\\n\"===e[e.length-1];return r+(n&&(\"\\n\"===e[e.length-2]||\"\\n\"===e)?\"+\":n?\"\":\"-\")+\"\\n\"}function w(e){return\"\\n\"===e[e.length-1]?e.slice(0,-1):e}function E(e,t){if(\"\"===e||\" \"===e[0])return e;for(var r,n,i=/ [^ ]/g,o=0,a=0,s=0,u=\"\";r=i.exec(e);)(s=r.index)-o>t&&(n=a>o?a:s,u+=\"\\n\"+e.slice(o,n),o=n+1),a=s;return u+=\"\\n\",e.length-o>t&&a>o?u+=e.slice(o,a)+\"\\n\"+e.slice(a+1):u+=e.slice(o),u.slice(1)}function D(e,t,r){var n,o,a,l,c,h;for(a=0,l=(o=r?e.explicitTypes:e.implicitTypes).length;a<l;a+=1)if(((c=o[a]).instanceOf||c.predicate)&&(!c.instanceOf||\"object\"==typeof t&&t instanceof c.instanceOf)&&(!c.predicate||c.predicate(t))){if(e.tag=r?c.tag:\"?\",c.represent){if(h=e.styleMap[c.tag]||c.defaultStyle,\"[object Function]\"===s.call(c.represent))n=c.represent(t,h);else{if(!u.call(c.represent,h))throw new i(\"!<\"+c.tag+'> tag resolver accepts not \"'+h+'\" style');n=c.represent[h](t,h)}e.dump=n}return!0}return!1}function S(e,t,r,n,o,a){e.tag=null,e.dump=r,D(e,r,!1)||D(e,r,!0);var u=s.call(e.dump);n&&(n=e.flowLevel<0||e.flowLevel>t);var l,c,h=\"[object Object]\"===u||\"[object Array]\"===u;if(h&&(c=-1!==(l=e.duplicates.indexOf(r))),(null!==e.tag&&\"?\"!==e.tag||c||2!==e.indent&&t>0)&&(o=!1),c&&e.usedDuplicates[l])e.dump=\"*ref_\"+l;else{if(h&&c&&!e.usedDuplicates[l]&&(e.usedDuplicates[l]=!0),\"[object Object]\"===u)n&&0!==Object.keys(e.dump).length?(!function(e,t,r,n){var o,a,s,u,l,c,h=\"\",p=e.tag,f=Object.keys(r);if(!0===e.sortKeys)f.sort();else if(\"function\"==typeof e.sortKeys)f.sort(e.sortKeys);else if(e.sortKeys)throw new i(\"sortKeys must be a boolean or a function\");for(o=0,a=f.length;o<a;o+=1)c=\"\",n&&0===o||(c+=d(e,t)),u=r[s=f[o]],S(e,t+1,s,!0,!0,!0)&&((l=null!==e.tag&&\"?\"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&10===e.dump.charCodeAt(0)?c+=\"?\":c+=\"? \"),c+=e.dump,l&&(c+=d(e,t)),S(e,t+1,u,!0,l)&&(e.dump&&10===e.dump.charCodeAt(0)?c+=\":\":c+=\": \",h+=c+=e.dump));e.tag=p,e.dump=h||\"{}\"}(e,t,e.dump,o),c&&(e.dump=\"&ref_\"+l+e.dump)):(!function(e,t,r){var n,i,o,a,s,u=\"\",l=e.tag,c=Object.keys(r);for(n=0,i=c.length;n<i;n+=1)s=\"\",0!==n&&(s+=\", \"),e.condenseFlow&&(s+='\"'),a=r[o=c[n]],S(e,t,o,!1,!1)&&(e.dump.length>1024&&(s+=\"? \"),s+=e.dump+(e.condenseFlow?'\"':\"\")+\":\"+(e.condenseFlow?\"\":\" \"),S(e,t,a,!1,!1)&&(u+=s+=e.dump));e.tag=l,e.dump=\"{\"+u+\"}\"}(e,t,e.dump),c&&(e.dump=\"&ref_\"+l+\" \"+e.dump));else if(\"[object Array]\"===u){var p=e.noArrayIndent&&t>0?t-1:t;n&&0!==e.dump.length?(!function(e,t,r,n){var i,o,a=\"\",s=e.tag;for(i=0,o=r.length;i<o;i+=1)S(e,t+1,r[i],!0,!0)&&(n&&0===i||(a+=d(e,t)),e.dump&&10===e.dump.charCodeAt(0)?a+=\"-\":a+=\"- \",a+=e.dump);e.tag=s,e.dump=a||\"[]\"}(e,p,e.dump,o),c&&(e.dump=\"&ref_\"+l+e.dump)):(!function(e,t,r){var n,i,o=\"\",a=e.tag;for(n=0,i=r.length;n<i;n+=1)S(e,t,r[n],!1,!1)&&(0!==n&&(o+=\",\"+(e.condenseFlow?\"\":\" \")),o+=e.dump);e.tag=a,e.dump=\"[\"+o+\"]\"}(e,p,e.dump),c&&(e.dump=\"&ref_\"+l+\" \"+e.dump))}else{if(\"[object String]\"!==u){if(e.skipInvalid)return!1;throw new i(\"unacceptable kind of an object to dump \"+u)}\"?\"!==e.tag&&b(e,e.dump,t,a)}null!==e.tag&&\"?\"!==e.tag&&(e.dump=\"!<\"+e.tag+\"> \"+e.dump)}return!0}function C(e,t){var r,n,i=[],o=[];for(function e(t,r,n){var i,o,a;if(null!==t&&\"object\"==typeof t)if(-1!==(o=r.indexOf(t)))-1===n.indexOf(o)&&n.push(o);else if(r.push(t),Array.isArray(t))for(o=0,a=t.length;o<a;o+=1)e(t[o],r,n);else for(i=Object.keys(t),o=0,a=i.length;o<a;o+=1)e(t[i[o]],r,n)}(e,i,o),r=0,n=o.length;r<n;r+=1)t.duplicates.push(i[o[r]]);t.usedDuplicates=new Array(n)}function A(e,t){var r=new p(t=t||{});return r.noRefs||C(e,r),S(r,0,e,!0,!0)?r.dump+\"\\n\":\"\"}e.exports.dump=A,e.exports.safeDump=function(e,t){return A(e,n.extend({schema:a},t))}},function(e,t,r){\"use strict\";r(31),r(32),r(33),r(64),r(19),r(65),r(20),r(68),r(92),r(144),r(22),r(94),r(23);var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__values||function(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},a=this&&this.__read||function(e,t){var r=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(t,\"__esModule\",{value:!0});var s=r(91),u=r(1),l=r(183),c=r(0),h=r(7),p=r(95),f=r(69),d=r(3),m=r(305),y=r(306),v=r(307),_=function(e){function t(t,r){void 0===r&&(r=!1);var n=e.call(this)||this;return n._hasDeclaration=!1,n._docTypeName=\"\",n._hasDocumentElement=!1,n._currentElementSerialized=!1,n._openTags=[],n._ended=!1,n._fragment=r,n._options=u.applyDefaults(t||{},s.DefaultXMLBuilderCBOptions),n._builderOptions={defaultNamespace:n._options.defaultNamespace,namespaceAlias:n._options.namespaceAlias},\"json\"===n._options.format?n._writer=new y.JSONCBWriter(n._options):\"yaml\"===n._options.format?n._writer=new v.YAMLCBWriter(n._options):n._writer=new m.XMLCBWriter(n._options),void 0!==n._options.data&&n.on(\"data\",n._options.data),void 0!==n._options.end&&n.on(\"end\",n._options.end),void 0!==n._options.error&&n.on(\"error\",n._options.error),n._prefixMap=new p.NamespacePrefixMap,n._prefixMap.set(\"xml\",h.namespace.XML),n._prefixIndex={value:1},n._push(n._writer.frontMatter()),n}return i(t,e),t.prototype.ele=function(e,t,r){var n,i;if(u.isObject(e)||u.isString(e)&&(/^\\s*</.test(e)||/^\\s*[\\{\\[]/.test(e)||/^(\\s*|(#.*)|(%.*))*---/.test(e))){var a=l.fragment().set(this._options);try{a.ele(e)}catch(e){return this.emit(\"error\",e),this}try{for(var s=o(a.node.childNodes),c=s.next();!c.done;c=s.next()){var h=c.value;this._fromNode(h)}}catch(e){n={error:e}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return this}if(this._serializeOpenTag(!0),!this._fragment&&this._hasDocumentElement&&0===this._writer.level)return this.emit(\"error\",new Error(\"Document cannot have multiple document element nodes.\")),this;try{this._currentElement=l.fragment(this._builderOptions).ele(e,t,r)}catch(e){return this.emit(\"error\",e),this}return this._fragment||this._hasDocumentElement||\"\"===this._docTypeName||this._currentElement.node._qualifiedName===this._docTypeName?(this._currentElementSerialized=!1,this._fragment||(this._hasDocumentElement=!0),this):(this.emit(\"error\",new Error(\"Document element name does not match DocType declaration name.\")),this)},t.prototype.att=function(e,t,r){if(void 0===this._currentElement)return this.emit(\"error\",new Error(\"Cannot insert an attribute node as child of a document node.\")),this;try{this._currentElement.att(e,t,r)}catch(e){return this.emit(\"error\",e),this}return this},t.prototype.com=function(e){var t;this._serializeOpenTag(!0);try{t=l.fragment(this._builderOptions).com(e).first().node}catch(e){return this.emit(\"error\",e),this}return!this._options.wellFormed||c.xml_isLegalChar(t.data)&&-1===t.data.indexOf(\"--\")&&!t.data.endsWith(\"-\")?(this._push(this._writer.comment(t.data)),this):(this.emit(\"error\",new Error(\"Comment data contains invalid characters (well-formed required).\")),this)},t.prototype.txt=function(e){if(!this._fragment&&void 0===this._currentElement)return this.emit(\"error\",new Error(\"Cannot insert a text node as child of a document node.\")),this;var t;this._serializeOpenTag(!0);try{t=l.fragment(this._builderOptions).txt(e).first().node}catch(e){return this.emit(\"error\",e),this}if(this._options.wellFormed&&!c.xml_isLegalChar(t.data))return this.emit(\"error\",new Error(\"Text data contains invalid characters (well-formed required).\")),this;var r=t.data.replace(/(?!&(lt|gt|amp|apos|quot);)&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\");return this._push(this._writer.text(r)),this},t.prototype.ins=function(e,t){var r;void 0===t&&(t=\"\"),this._serializeOpenTag(!0);try{r=l.fragment(this._builderOptions).ins(e,t).first().node}catch(e){return this.emit(\"error\",e),this}return this._options.wellFormed&&(-1!==r.target.indexOf(\":\")||/^xml$/i.test(r.target))?(this.emit(\"error\",new Error(\"Processing instruction target contains invalid characters (well-formed required).\")),this):this._options.wellFormed&&!c.xml_isLegalChar(r.data)?(this.emit(\"error\",Error(\"Processing instruction data contains invalid characters (well-formed required).\")),this):(this._push(this._writer.instruction(r.target,r.data)),this)},t.prototype.dat=function(e){var t;this._serializeOpenTag(!0);try{t=l.fragment(this._builderOptions).dat(e).first().node}catch(e){return this.emit(\"error\",e),this}return this._push(this._writer.cdata(t.data)),this},t.prototype.dec=function(e){return void 0===e&&(e={version:\"1.0\"}),this._fragment?(this.emit(\"error\",Error(\"Cannot insert an XML declaration into a document fragment.\")),this):this._hasDeclaration?(this.emit(\"error\",Error(\"XML declaration is already inserted.\")),this):(this._push(this._writer.declaration(e.version||\"1.0\",e.encoding,e.standalone)),this._hasDeclaration=!0,this)},t.prototype.dtd=function(e){if(this._fragment)return this.emit(\"error\",Error(\"Cannot insert a DocType declaration into a document fragment.\")),this;if(\"\"!==this._docTypeName)return this.emit(\"error\",new Error(\"DocType declaration is already inserted.\")),this;if(this._hasDocumentElement)return this.emit(\"error\",new Error(\"Cannot insert DocType declaration after document element.\")),this;var t;try{t=l.create().dtd(e).first().node}catch(e){return this.emit(\"error\",e),this}return this._options.wellFormed&&!c.xml_isPubidChar(t.publicId)?(this.emit(\"error\",new Error(\"DocType public identifier does not match PubidChar construct (well-formed required).\")),this):this._options.wellFormed&&(!c.xml_isLegalChar(t.systemId)||-1!==t.systemId.indexOf('\"')&&-1!==t.systemId.indexOf(\"'\"))?(this.emit(\"error\",new Error(\"DocType system identifier contains invalid characters (well-formed required).\")),this):(this._docTypeName=e.name,this._push(this._writer.docType(e.name,t.publicId,t.systemId)),this)},t.prototype.import=function(e){var t,r,n=l.fragment().set(this._options);try{n.import(e)}catch(e){return this.emit(\"error\",e),this}try{for(var i=o(n.node.childNodes),a=i.next();!a.done;a=i.next()){var s=a.value;this._fromNode(s)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return this},t.prototype.up=function(){return this._serializeOpenTag(!1),this._serializeCloseTag(),this},t.prototype.end=function(){for(this._serializeOpenTag(!1);this._openTags.length>0;)this._serializeCloseTag();return this._push(null),this},t.prototype._serializeOpenTag=function(e){if(!this._currentElementSerialized&&void 0!==this._currentElement){var r=this._currentElement.node;if(!this._options.wellFormed||-1===r.localName.indexOf(\":\")&&c.xml_isName(r.localName)){var n=\"\",i=!1,o=this._prefixMap.copy(),a={},s=this._recordNamespaceInformation(r,o,a),u=0===this._openTags.length?null:this._openTags[this._openTags.length-1][1],l=r.namespaceURI;if(null===l&&(l=u),u===l)null!==s&&(i=!0),n=l===h.namespace.XML?\"xml:\"+r.localName:r.localName,this._writer.beginElement(n),this._push(this._writer.openTagBegin(n));else{var p=r.prefix,f=null;if(null===p&&l===s||(f=o.get(p,l)),\"xmlns\"===p){if(this._options.wellFormed)return void this.emit(\"error\",new Error(\"An element cannot have the 'xmlns' prefix (well-formed required).\"));f=p}null!==f?(n=f+\":\"+r.localName,null!==s&&s!==h.namespace.XML&&(u=s||null),this._writer.beginElement(n),this._push(this._writer.openTagBegin(n))):null!==p?(p in a&&(p=this._generatePrefix(l,o,this._prefixIndex)),o.set(p,l),n+=p+\":\"+r.localName,this._writer.beginElement(n),this._push(this._writer.openTagBegin(n)),this._push(this._writer.attribute(\"xmlns:\"+p,this._serializeAttributeValue(l,this._options.wellFormed))),null!==s&&(u=s||null)):null===s||null!==s&&s!==l?(i=!0,n+=r.localName,u=l,this._writer.beginElement(n),this._push(this._writer.openTagBegin(n)),this._push(this._writer.attribute(\"xmlns\",this._serializeAttributeValue(l,this._options.wellFormed)))):(n+=r.localName,u=l,this._writer.beginElement(n),this._push(this._writer.openTagBegin(n)))}this._serializeAttributes(r,o,this._prefixIndex,a,i,this._options.wellFormed);var d=l===h.namespace.HTML;d&&!e&&t._VoidElementNames.has(r.localName)?(this._push(this._writer.openTagEnd(n,!0,!0)),this._writer.endElement(n)):d||e?this._push(this._writer.openTagEnd(n,!1,!1)):(this._push(this._writer.openTagEnd(n,!0,!1)),this._writer.endElement(n)),this._currentElementSerialized=!0,this._openTags.push([n,u,this._prefixMap,e]),this._isPrefixMapModified(this._prefixMap,o)&&(this._prefixMap=o),this._writer.level++}else this.emit(\"error\",new Error(\"Node local name contains invalid characters (well-formed required).\"))}},t.prototype._serializeCloseTag=function(){this._writer.level--;var e=this._openTags.pop();if(void 0!==e){var t=a(e,4),r=t[0],n=(t[1],t[2]),i=t[3];this._prefixMap=n,i&&(this._push(this._writer.closeTag(r)),this._writer.endElement(r))}else this.emit(\"error\",new Error(\"Last element is undefined.\"))},t.prototype._push=function(e){null===e?(this._ended=!0,this.emit(\"end\")):this._ended?this.emit(\"error\",new Error(\"Cannot push to ended stream.\")):0!==e.length&&(this._writer.hasData=!0,this.emit(\"data\",e,this._writer.level))},t.prototype._fromNode=function(e){var t,r,n,i;if(d.Guard.isElementNode(e)){var a=e.prefix?e.prefix+\":\"+e.localName:e.localName;null!==e.namespaceURI?this.ele(e.namespaceURI,a):this.ele(a);try{for(var s=o(e.attributes),u=s.next();!u.done;u=s.next()){var l=u.value,c=l.prefix?l.prefix+\":\"+l.localName:l.localName;null!==l.namespaceURI?this.att(l.namespaceURI,c,l.value):this.att(c,l.value)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}try{for(var h=o(e.childNodes),p=h.next();!p.done;p=h.next()){var f=p.value;this._fromNode(f)}}catch(e){n={error:e}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}this.up()}else d.Guard.isExclusiveTextNode(e)&&e.data?this.txt(e.data):d.Guard.isCommentNode(e)?this.com(e.data):d.Guard.isCDATASectionNode(e)?this.dat(e.data):d.Guard.isProcessingInstructionNode(e)&&this.ins(e.target,e.data)},t.prototype._serializeAttributes=function(e,t,r,n,i,a){var s,u,l=a?new f.LocalNameSet:void 0;try{for(var p=o(e.attributes),d=p.next();!d.done;d=p.next()){var m=d.value;if(a||i||null!==m.namespaceURI){if(a&&l&&l.has(m.namespaceURI,m.localName))return void this.emit(\"error\",new Error(\"Element contains duplicate attributes (well-formed required).\"));a&&l&&l.set(m.namespaceURI,m.localName);var y=m.namespaceURI,v=null;if(null!==y)if(v=t.get(m.prefix,y),y===h.namespace.XMLNS){if(m.value===h.namespace.XML||null===m.prefix&&i||null!==m.prefix&&(!(m.localName in n)||n[m.localName]!==m.value)&&t.has(m.localName,m.value))continue;if(a&&m.value===h.namespace.XMLNS)return void this.emit(\"error\",new Error(\"XMLNS namespace is reserved (well-formed required).\"));if(a&&\"\"===m.value)return void this.emit(\"error\",new Error(\"Namespace prefix declarations cannot be used to undeclare a namespace (well-formed required).\"));\"xmlns\"===m.prefix&&(v=\"xmlns\")}else null===v&&(v=null===m.prefix||t.hasPrefix(m.prefix)&&!t.has(m.prefix,y)?this._generatePrefix(y,t,r):m.prefix,this._push(this._writer.attribute(\"xmlns:\"+v,this._serializeAttributeValue(y,this._options.wellFormed))));if(a&&(-1!==m.localName.indexOf(\":\")||!c.xml_isName(m.localName)||\"xmlns\"===m.localName&&null===y))return void this.emit(\"error\",new Error(\"Attribute local name contains invalid characters (well-formed required).\"));this._push(this._writer.attribute((null!==v?v+\":\":\"\")+m.localName,this._serializeAttributeValue(m.value,this._options.wellFormed)))}else this._push(this._writer.attribute(m.localName,this._serializeAttributeValue(m.value,this._options.wellFormed)))}}catch(e){s={error:e}}finally{try{d&&!d.done&&(u=p.return)&&u.call(p)}finally{if(s)throw s.error}}},t.prototype._serializeAttributeValue=function(e,t){return t&&null!==e&&!c.xml_isLegalChar(e)?(this.emit(\"error\",new Error(\"Invalid characters in attribute value.\")),\"\"):null===e?\"\":e.replace(/(?!&(lt|gt|amp|apos|quot);)&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/\"/g,\"&quot;\")},t.prototype._recordNamespaceInformation=function(e,t,r){var n,i,a=null;try{for(var s=o(e.attributes),u=s.next();!u.done;u=s.next()){var l=u.value,c=l.namespaceURI,p=l.prefix;if(c===h.namespace.XMLNS){if(null===p){a=l.value;continue}var f=l.localName,d=l.value;if(d===h.namespace.XML)continue;if(\"\"===d&&(d=null),t.has(f,d))continue;t.set(f,d),r[f]=d||\"\"}}}catch(e){n={error:e}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return a},t.prototype._generatePrefix=function(e,t,r){var n=\"ns\"+r.value;return r.value++,t.set(n,e),n},t.prototype._isPrefixMapModified=function(e,t){var r=e._items,n=t._items,i=e._nullItems,o=t._nullItems;for(var a in n){var s=r[a];if(void 0===s)return!0;var u=n[a];if(s.length!==u.length)return!0;for(var l=0;l<s.length;l++)if(s[l]!==u[l])return!0}if(i.length!==o.length)return!0;for(l=0;l<i.length;l++)if(i[l]!==o[l])return!0;return!1},t._VoidElementNames=new Set([\"area\",\"base\",\"basefont\",\"bgsound\",\"br\",\"col\",\"embed\",\"frame\",\"hr\",\"img\",\"input\",\"keygen\",\"link\",\"menuitem\",\"meta\",\"param\",\"source\",\"track\",\"wbr\"]),t}(r(308).EventEmitter);t.XMLBuilderCBImpl=_},function(e,t,r){\"use strict\";r(74);var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=function(e){function t(t){var r=e.call(this,t)||this;return r._lineLength=0,r}return i(t,e),t.prototype.frontMatter=function(){return\"\"},t.prototype.declaration=function(e,t,r){var n=this._beginLine()+\"<?xml\";return n+=' version=\"'+e+'\"',void 0!==t&&(n+=' encoding=\"'+t+'\"'),void 0!==r&&(n+=' standalone=\"'+(r?\"yes\":\"no\")+'\"'),n+=\"?>\"},t.prototype.docType=function(e,t,r){var n=this._beginLine();return n+=t&&r?\"<!DOCTYPE \"+e+' PUBLIC \"'+t+'\" \"'+r+'\">':t?\"<!DOCTYPE \"+e+' PUBLIC \"'+t+'\">':r?\"<!DOCTYPE \"+e+' SYSTEM \"'+r+'\">':\"<!DOCTYPE \"+e+\">\"},t.prototype.comment=function(e){return this._beginLine()+\"\\x3c!--\"+e+\"--\\x3e\"},t.prototype.text=function(e){return this._beginLine()+e},t.prototype.instruction=function(e,t){return t?this._beginLine()+\"<?\"+e+\" \"+t+\"?>\":this._beginLine()+\"<?\"+e+\"?>\"},t.prototype.cdata=function(e){return this._beginLine()+\"<![CDATA[\"+e+\"]]>\"},t.prototype.openTagBegin=function(e){return this._lineLength+=1+e.length,this._beginLine()+\"<\"+e},t.prototype.openTagEnd=function(e,t,r){return r?\" />\":t?this._writerOptions.allowEmptyTags?\"></\"+e+\">\":this._writerOptions.spaceBeforeSlash?\" />\":\"/>\":\">\"},t.prototype.closeTag=function(e){return this._beginLine()+\"</\"+e+\">\"},t.prototype.attribute=function(e,t){var r=e+'=\"'+t+'\"';return this._writerOptions.prettyPrint&&this._writerOptions.width>0&&this._lineLength+1+r.length>this._writerOptions.width?(r=this._beginLine()+this._indent(1)+r,this._lineLength=r.length,r):(this._lineLength+=1+r.length,\" \"+r)},t.prototype.beginElement=function(e){},t.prototype.endElement=function(e){},t.prototype._beginLine=function(){if(this._writerOptions.prettyPrint){var e=(this.hasData?this._writerOptions.newline:\"\")+this._indent(this._writerOptions.offset+this.level);return this._lineLength=e.length,e}return\"\"},t.prototype._indent=function(e){return e<=0?\"\":this._writerOptions.indent.repeat(e)},t}(r(114).BaseCBWriter);t.XMLCBWriter=o},function(e,t,r){\"use strict\";r(74);var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=function(e){function t(t){var r=e.call(this,t)||this;return r._hasChildren=[],r._additionalLevel=0,r}return i(t,e),t.prototype.frontMatter=function(){return\"\"},t.prototype.declaration=function(e,t,r){return\"\"},t.prototype.docType=function(e,t,r){return\"\"},t.prototype.comment=function(e){return this._comma()+this._beginLine()+\"{\"+this._sep()+this._key(this._builderOptions.convert.comment)+this._sep()+this._val(e)+this._sep()+\"}\"},t.prototype.text=function(e){return this._comma()+this._beginLine()+\"{\"+this._sep()+this._key(this._builderOptions.convert.text)+this._sep()+this._val(e)+this._sep()+\"}\"},t.prototype.instruction=function(e,t){return this._comma()+this._beginLine()+\"{\"+this._sep()+this._key(this._builderOptions.convert.ins)+this._sep()+this._val(t?e+\" \"+t:e)+this._sep()+\"}\"},t.prototype.cdata=function(e){return this._comma()+this._beginLine()+\"{\"+this._sep()+this._key(this._builderOptions.convert.cdata)+this._sep()+this._val(e)+this._sep()+\"}\"},t.prototype.attribute=function(e,t){return this._comma()+this._beginLine(1)+\"{\"+this._sep()+this._key(this._builderOptions.convert.att+e)+this._sep()+this._val(t)+this._sep()+\"}\"},t.prototype.openTagBegin=function(e){var t=this._comma()+this._beginLine()+\"{\"+this._sep()+this._key(e)+this._sep()+\"{\";return this._additionalLevel++,this.hasData=!0,t+=this._beginLine()+this._key(this._builderOptions.convert.text)+this._sep()+\"[\",this._hasChildren.push(!1),t},t.prototype.openTagEnd=function(e,t,r){if(t){var n=this._sep()+\"]\";return this._additionalLevel--,n+=this._beginLine()+\"}\"+this._sep()+\"}\"}return\"\"},t.prototype.closeTag=function(e){var t=this._beginLine()+\"]\";return this._additionalLevel--,t+=this._beginLine()+\"}\"+this._sep()+\"}\"},t.prototype.beginElement=function(e){},t.prototype.endElement=function(e){this._hasChildren.pop()},t.prototype._beginLine=function(e){return void 0===e&&(e=0),this._writerOptions.prettyPrint?(this.hasData?this._writerOptions.newline:\"\")+this._indent(this._writerOptions.offset+this.level+e):\"\"},t.prototype._indent=function(e){return e+this._additionalLevel<=0?\"\":this._writerOptions.indent.repeat(e+this._additionalLevel)},t.prototype._comma=function(){var e=this._hasChildren[this._hasChildren.length-1]?\",\":\"\";return this._hasChildren.length>0&&(this._hasChildren[this._hasChildren.length-1]=!0),e},t.prototype._sep=function(){return this._writerOptions.prettyPrint?\" \":\"\"},t.prototype._key=function(e){return'\"'+e+'\":'},t.prototype._val=function(e){return JSON.stringify(e)},t}(r(114).BaseCBWriter);t.JSONCBWriter=o},function(e,t,r){\"use strict\";r(74);var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=function(e){function t(t){var r=e.call(this,t)||this;if(r._rootWritten=!1,r._additionalLevel=0,t.indent.length<2)throw new Error(\"YAML indententation string must be at least two characters long.\");if(t.offset<0)throw new Error(\"YAML offset should be zero or a positive number.\");return r}return i(t,e),t.prototype.frontMatter=function(){return this._beginLine()+\"---\"},t.prototype.declaration=function(e,t,r){return\"\"},t.prototype.docType=function(e,t,r){return\"\"},t.prototype.comment=function(e){return this._beginLine()+this._key(this._builderOptions.convert.comment)+\" \"+this._val(e)},t.prototype.text=function(e){return this._beginLine()+this._key(this._builderOptions.convert.text)+\" \"+this._val(e)},t.prototype.instruction=function(e,t){return this._beginLine()+this._key(this._builderOptions.convert.ins)+\" \"+this._val(t?e+\" \"+t:e)},t.prototype.cdata=function(e){return this._beginLine()+this._key(this._builderOptions.convert.cdata)+\" \"+this._val(e)},t.prototype.attribute=function(e,t){this._additionalLevel++;var r=this._beginLine()+this._key(this._builderOptions.convert.att+e)+\" \"+this._val(t);return this._additionalLevel--,r},t.prototype.openTagBegin=function(e){var t=this._beginLine()+this._key(e);return this._rootWritten||(this._rootWritten=!0),this.hasData=!0,this._additionalLevel++,t+=this._beginLine(!0)+this._key(this._builderOptions.convert.text)},t.prototype.openTagEnd=function(e,t,r){return t?\" \"+this._val(\"\"):\"\"},t.prototype.closeTag=function(e){return this._additionalLevel--,\"\"},t.prototype.beginElement=function(e){},t.prototype.endElement=function(e){},t.prototype._beginLine=function(e){return void 0===e&&(e=!1),(this.hasData?this._writerOptions.newline:\"\")+this._indent(this._writerOptions.offset+this.level,e)},t.prototype._indent=function(e,t){if(e+this._additionalLevel<=0)return\"\";var r=this._writerOptions.indent.repeat(e+this._additionalLevel);return!t&&this._rootWritten?r.substr(0,r.length-2)+\"-\"+r.substr(-1,1):r},t.prototype._key=function(e){return'\"'+e+'\":'},t.prototype._val=function(e){return JSON.stringify(e)},t}(r(114).BaseCBWriter);t.YAMLCBWriter=o},function(e,t,r){\"use strict\";var n,i=\"object\"==typeof Reflect?Reflect:null,o=i&&\"function\"==typeof i.apply?i.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=i&&\"function\"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function l(e){if(\"function\"!=typeof e)throw new TypeError('The \"listener\" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function h(e,t,r,n){var i,o,a,s;if(l(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit(\"newListener\",t,r.listener?r.listener:r),o=e._events),a=o[t]),void 0===a)a=o[t]=r,++e._eventsCount;else if(\"function\"==typeof a?a=o[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(i=c(e))>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error(\"Possible EventEmitter memory leak detected. \"+a.length+\" \"+String(t)+\" listeners added. Use emitter.setMaxListeners() to increase limit\");u.name=\"MaxListenersExceededWarning\",u.emitter=e,u.type=t,u.count=a.length,s=u,console&&console.warn&&console.warn(s)}return e}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=p.bind(n);return i.listener=r,n.wrapFn=i,i}function d(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:\"function\"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):y(i,i.length)}function m(e){var t=this._events;if(void 0!==t){var r=t[e];if(\"function\"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function y(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}Object.defineProperty(s,\"defaultMaxListeners\",{enumerable:!0,get:function(){return u},set:function(e){if(\"number\"!=typeof e||e<0||a(e))throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received '+e+\".\");u=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if(\"number\"!=typeof e||e<0||a(e))throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received '+e+\".\");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n=\"error\"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error(\"Unhandled error.\"+(a?\" (\"+a.message+\")\":\"\"));throw s.context=a,s}var u=i[e];if(void 0===u)return!1;if(\"function\"==typeof u)o(u,this,t);else{var l=u.length,c=y(u,l);for(r=0;r<l;++r)o(c[r],this,t)}return!0},s.prototype.addListener=function(e,t){return h(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return h(this,e,t,!0)},s.prototype.once=function(e,t){return l(t),this.on(e,f(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,f(this,e,t)),this},s.prototype.removeListener=function(e,t){var r,n,i,o,a;if(l(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit(\"removeListener\",e,r.listener||t));else if(\"function\"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){a=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit(\"removeListener\",e,a||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)\"removeListener\"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners(\"removeListener\"),this._events=Object.create(null),this._eventsCount=0,this}if(\"function\"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},s.prototype.listeners=function(e){return d(this,e,!0)},s.prototype.rawListeners=function(e){return d(this,e,!1)},s.listenerCount=function(e,t){return\"function\"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(77);t.createCB=function(e){return new n.XMLBuilderCBImpl(e)},t.fragmentCB=function(e){return new n.XMLBuilderCBImpl(e,!0)}}])}));"],"names":["MouseBindings","KeyboardBindings","ToolModes","AnnotationStyleStates","Events","SegmentationRepresentations","Swipe","globalLockedAnnotationsSet","Set","setAnnotationLocked","annotation","locked","detail","makeEventDetail","lockedAnnotationsSet","has","add","added","push","lock","unlock","publish","unlockAllAnnotations","forEach","clearLockedAnnotationsSet","getAnnotationsLocked","Array","from","isAnnotationLocked","getAnnotationsLockedCount","size","checkAndDefineIsLockedProperty","isLocked","descriptor","Object","getOwnPropertyDescriptor","configurable","set","setIsLocked","get","getIsLocked","isExtensible","shouldDefineIsLockedProperty","defineProperty","enumerable","freeze","removed","delete","length","item","triggerEvent","eventTarget","ANNOTATION_LOCK_CHANGE","this","selectedAnnotationUIDs","setAnnotationSelected","annotationUID","selected","preserveSelected","clearSelectionSet","selectAnnotation","deselectAnnotation","getAnnotationsSelected","getAnnotationsSelectedByToolName","toolName","filter","getAnnotation","metadata","isAnnotationSelected","getAnnotationsSelectedCount","selection","selectionSet","value","ANNOTATION_SELECTION_CHANGE","globalHiddenAnnotationUIDsSet","setAnnotationVisibility","visible","show","annotationUIDsSet","lastHidden","hide","showAllAnnotations","isAnnotationVisible","checkAndDefineIsVisibleProperty","isVisible","setIsVisible","getIsVisible","shouldDefineIsVisibleProperty","lastVisible","hidden","ANNOTATION_VISIBILITY_CHANGE","FrameOfReferenceSpecificAnnotationManager","constructor","uid","getGroupKey","annotationGroupSelector","element","enabledElement","getEnabledElement","Error","FrameOfReferenceUID","_imageVolumeModifiedHandler","evt","eventDetail","frameOfReferenceSpecificAnnotations","annotations","keys","undefined","invalidated","getFramesOfReference","getAnnotations","groupKey","frameOfReferenceUID","frameOfReferenceAnnotations","toolSpecificAnnotations","getNumberOfAnnotations","total","addAnnotation","removeAnnotation","groupAnnotations","toolAnnotations","index","findIndex","splice","removeAnnotations","saveAnnotations","restoreAnnotations","state","getNumberOfAllAnnotations","count","removeAllAnnotations","utilities","addEventListener","Enums","IMAGE_VOLUME_MODIFIED","defaultFrameOfReferenceSpecificAnnotationManager","svgNodeCache","defaultState","isInteractingWithTool","isMultiPartToolActive","tools","toolGroups","synchronizers","enabledElements","handleRadius","resetCornerstoneToolsState","addTool","ToolClass","toolAlreadyAdded","name","toolClass","removeTool","getMouseEventPoints","elementToUse","currentTarget","viewport","clientPoint","clientX","clientY","_clientToPoint","pagePoint","pageX","pageY","_pageToPoint","canvasPoint","rect","getBoundingClientRect","left","window","pageXOffset","top","pageYOffset","_pagePointsToCanvasPoints","page","client","canvas","world","canvasToWorld","viewportId","renderingEngineId","startPoints","event","eventName","MOUSE_DOUBLE_CLICK","camera","lastPoints","currentPoints","deltaPoints","stopImmediatePropagation","preventDefault","MOUSE_MOVE","MOUSE_DOWN","MOUSE_DOWN_ACTIVATE","MOUSE_CLICK","MOUSE_UP","MOUSE_DRAG","DOUBLE_CLICK_DRAG_TOLERANCE","mouseButton","isClickEvent","clickDelay","preventClickTimeout","doubleClickState","doubleClickTimeout","mouseDownEvent","mouseUpEvent","ignoreDoubleClick","_onMouseDrag","_updateMouseEventsLastPoints","_getDeltaPoints","_isDragPastDoubleClickTolerance","_doStateMouseDownAndUp","_copyPoints","_onMouseUp","clearTimeout","_cleanUp","_onMouseMove","document","removeEventListener","delta","Math","abs","_preventClickHandler","_clearDoubleClickTimeoutAndEvents","_doMouseDown","JSON","parse","stringify","points","_subtractPoints2D","point0","point1","mouseDoubleClickIgnoreListener","buttons","setTimeout","disable","capture","enable","pointerType","mouse","touch","lastInteractionType","lastInteractionTime","handleTap","type","e","now","Date","stopPropagation","handleTapMouse","bind","handleTapTouch","attachEvents","eventList","interactionType","tapHandler","passive","removeEvents","mouseEvents","touchEvents","getTouchEventPoints","touches","changedTouches","map","i","identifier","radiusX","radiusY","force","rotationAngle","getDeltaPoints","curr","getMeanPoints","last","getDeltaDistance","_getDistance2D","_getDistance3D","getDeltaRotation","getDeltaDistanceBetweenIPoints","currentDistance","_getMeanDistanceBetweenAllIPoints","lastDistance","copyPointsList","copyPoints","reduce","prev","getMeanTouchPoints","pairedDistance","j","sqrt","pow","Settings","getRuntimeSettings","TOUCH_START","TOUCH_START_ACTIVATE","TOUCH_PRESS","TOUCH_DRAG","TOUCH_END","TOUCH_TAP","TOUCH_SWIPE","zeroIPoint","zeroIDistance","startPointsList","lastPointsList","isTouchStart","startTime","pressTimeout","pressDelay","pressMaxDistance","accumulatedDistance","swipeDistanceThreshold","swiped","swipeToleranceMs","defaultTapState","taps","tapTimeout","tapMaxDistance","tapToleranceMs","tapState","triggerEventCallback","ele","_onTouchDrag","currentPointsList","_updateTouchEventsLastPoints","deltaDistance","totalDistance","currentTime","getTime","x","y","swipe","RIGHT","LEFT","DOWN","UP","_checkTouchSwipe","_onTouchEnd","distanceFromStart","_checkTouchTap","lp","_onTouchPress","_onTouchStart","preventGhostClick","PIXEL_STEP","LINE_HEIGHT","PAGE_HEIGHT","deltaY","spinX","spinY","pixelX","pixelY","wheelDelta","wheelDeltaY","wheelDeltaX","deltaX","deltaMode","normalizeWheel","direction","MOUSE_WHEEL","wheel","key","keyCode","keyListener","KEY_DOWN","_onKeyUp","_onVisibilityChange","visibilityState","resetModifierKey","KEY_UP","keyDownListener","getModifierKey","defaultContourConfig","renderOutline","outlineWidthActive","outlineWidthInactive","outlineOpacity","outlineOpacityInactive","renderFill","fillAlpha","fillAlphaInactive","defaultLabelmapConfig","renderFillInactive","initialDefaultState","colorLUT","segmentations","globalConfig","renderInactiveSegmentations","representations","Labelmap","Contour","defaultSegmentationStateManager","getState","getToolGroups","getColorLUT","lutIndex","resetState","getSegmentation","segmentationId","find","segmentation","addSegmentation","_initDefaultColorLUTIfNecessary","getSegmentationRepresentations","toolGroupId","toolGroupSegRepresentationsWithConfig","segmentationRepresentations","getAllSegmentationRepresentations","toolGroupSegReps","entries","addSegmentationRepresentation","segmentationRepresentation","config","_handleActiveSegmentation","getGlobalConfig","setGlobalConfig","getSegmentationRepresentationByUID","segmentationRepresentationUID","representation","removeSegmentation","removeSegmentationRepresentation","toolGroupSegmentationRepresentations","segData","console","warn","removedSegmentationRepresentation","setActiveSegmentationRepresentation","toolGroupSegmentations","segmentationData","active","getToolGroupSpecificConfig","toolGroupStateWithConfig","getSegmentationRepresentationSpecificConfig","segmentationRepresentationSpecificConfig","setSegmentationRepresentationSpecificConfig","getSegmentSpecificConfig","segmentIndex","segmentSpecificConfig","setSegmentSpecificConfig","setSegmentationRepresentationConfig","addColorLUT","log","removeColorLUT","colorLUTIndex","recentlyAddedOrRemovedSegmentationRepresentation","triggerSegmentationRemoved","SEGMENTATION_REMOVED","triggerSegmentationRepresentationRemoved","SEGMENTATION_REPRESENTATION_REMOVED","triggerSegmentationRepresentationModified","SEGMENTATION_REPRESENTATION_MODIFIED","triggerSegmentationModified","segmentationIds","getSegmentations","SEGMENTATION_MODIFIED","triggerSegmentationDataModified","modifiedSlicesToUse","SEGMENTATION_DATA_MODIFIED","segmentationInput","cachedStats","segmentLabels","label","segmentsLocked","activeSegmentIndex","representationData","data","getDefaultSegmentationStateManager","suppressEvents","segmentationStateManager","getToolGroupIdsWithSegmentation","toolGroupIds","foundToolGroupIds","setToolGroupSpecificConfig","getSegmentSpecificRepresentationConfig","setSegmentSpecificRepresentationConfig","segmentationConfig","getGlobalRepresentationConfig","representationType","setGlobalRepresentationConfig","segmentationRepresentationConfig","async","volumeId","renderingEngine","id","volumeInputs","actorUID","visibility","blendMode","MAXIMUM_INTENSITY_BLEND","addVolumesToViewports","removeFromCache","StackViewport","removeVolumeActors","MAX_NUMBER_COLORS","labelMapConfigCache","Map","_getLabelmapConfig","toolGroupLabelmapConfig","segmentationRepresentationLabelmapConfig","isActiveLabelmap","segmentsLabelmapConfig","configToUse","outlineWidth","_needsTransferFunctionUpdate","segmentColor","segmentsHidden","cacheUID","oldConfig","slice","forceOpacityUpdate","forceColorUpdate","oldFillAlpha","oldRenderFill","oldRenderOutline","oldOutlineWidth","oldSegmentColor","oldSegmentsHidden","render","toolGroupConfig","renderingConfig","labelmapData","labelmapUID","cache","getVolume","referencedVolumeId","defaultActor","getDefaultActor","defaultActorUID","volume","referencedVolume","isSameFrameOfReference","actorEntry","getActor","_addLabelmapToViewport","cfun","ofun","numColors","min","volumeActor","actor","segmentSpecificLabelmapConfig","addRGBPoint","segmentOpacity","removePoint","addPointLong","getProperty","setRGBTransferFunction","setClamping","setScalarOpacity","setInterpolationTypeToNearest","setUseLabelOutline","setLabelOutlineOpacity","setLabelOutlineThickness","setVisibility","_setLabelmapColorAndOpacity","representationInput","toolGroupSpecificConfig","addPoint","toolGroupSpecificRepresentation","currentToolGroupConfig","mergedConfig","renderImmediate","toolGroup","viewportsInfo","viewportInfo","getEnabledElementByIds","_removeLabelmapFromToolGroupViewports","getViewportsInfo","vtkErrorMacro","appendCellData","dest","src","ptOffset","cellOffset","offset","currentIdx","DEFAULT_VALUES","outputPointsPrecision","DEFAULT","extend","publicAPI","model","initialValues","arguments","assign","classHierarchy","requestData","inData","outData","numberOfInputs","getNumberOfInputPorts","output","numPts","pointType","ttype","firstType","numVerts","numLines","numStrips","numPolys","hasPtNormals","hasPtTCoords","hasPtScalars","ds","dsNumPts","getPoints","getNumberOfPoints","getVerts","getNumberOfValues","getLines","getStrips","getPolys","getDataType","ptD","getPointData","getNormals","getTCoords","getScalars","SINGLE","FLOAT","DOUBLE","dataType","setNumberOfPoints","pointData","getData","vertData","Uint32Array","lineData","stripData","polyData","newPtNormals","newPtTCoords","newPtScalars","lds","dsNormals","numberOfComponents","numberOfTuples","getName","dsTCoords","dsScalars","getNumberOfComponents","_i","_ds","dsPD","ptNorms","ptTCoords","ptScalars","setPoints","setData","setNormals","setTCoords","setScalars","vtkAppendPolyData","vtkAppendPolyData$1","newInstance","contourRepresentation","segmentId","CONTOUR","configCachePerSegmentationRepresentationUID","getConfigCache","setConfigCache","addContourSetsToElement","geometryIds","contourRepresentationConfig","contourActorUID","appendPolyData","scalarToColorMap","segmentSpecificMap","geometryId","geometry","getGeometry","getSegmentIndex","validateGeometry","contourSet","pointArray","lines","pointIndex","getContours","contour","pointList","flatPoints","getFlatPointsArray","getType","pointIndexes","_","pointListIndex","CLOSED_PLANAR","linePoints","Float32Array","insertNextCell","polygon","setLines","getPolyData","color","getColor","scalars","setTuple","setInputData","addInputData","polyDataOutput","getOutputData","mapper","setMapper","setLineWidth","setForceOpaque","addActor","resetCamera","updateContourSets","newContourConfig","cachedConfig","contourSetsActor","newOutlineWithActive","getMapper","lut","getLookupTable","segmentsToSetToInvisible","segmentsToSetToVisible","mergedInvisibleSegments","includes","concat","contourSets","segmentSpecificConfigs","acc","affectedSegments","hasCustomSegmentSpecificConfig","values","some","polyDataModified","getInputData","appendScalarsData","getTotalNumberOfPoints","segmentConfig","modified","setLookupTable","actorUIDsToRemove","getActors","Boolean","removeActors","representationConfig","contourData","addOrUpdateContourSets","_removeContourFromToolGroupViewports","deleteConfigCache","segmentationRepresentationUIDs","immediate","toolGroupSegRepresentations","toolGroupSegRepresentationUIDs","segRepresentationUIDsToRemove","invalidSegRepresentationUIDs","segRepresentationUID","segmentationDataUID","labelmapDisplay","contourDisplay","_removeSegmentation","segmentationInputArray","segInput","startsWith","elements","priority","pop","shift","deleteById","_ref","vtkPriorityQueue","vtkPriorityQueue$1","EPSILON","FLOAT_EPSILON","PolygonWithPointIntersectionState","FAILURE","OUTSIDE","INSIDE","INTERSECTION","ON_LINE","ownKeys","object","enumerableOnly","getOwnPropertySymbols","symbols","sym","apply","pointLocation","axis0","axis1","p0","p1","point","STATIC","pointInPolygon","vertices","bounds","normal","tol2","_vtkLine$distanceToLi","distanceToLine","distance","t","wn","getBounds","poly","n","p","getPoint","d","getNormal","p2","v1","v2","s","vtkPolygon","computeMeasure","v3","v4","previous","next","area","perimeter","canRemoveVertex","pointCount","v","sN","val","evaluate","currentSign","oneNegative","vertex","previousVertex","sign","intersection","YES_INTERSECTION","queue","tris","previousMeasure","nextMeasure","firstPoint","earCutTriangulation","anchor","computeNormal","vertexQueue","measure","_pointToRemove","triangulate","currentPoint","getPointArray","vtkPolygon$1","target","source","getOwnPropertyDescriptors","defineProperties","_objectSpread","OCTREENODE_INSERTPOINT","pointIdx","coords","insertNextTuple","OCTREE_CHILD_BOUNDS_LUT","pointIdSet","minBounds","maxBounds","minDataBounds","maxDataBounds","parent","children","createPointIdSet","initSize","growSize","setBounds","x1","x2","y1","y2","z1","z2","getChildIndex","Number","getMaxBoundsByReference","containsPoint","pnt","containsPointByData","updateCounterAndDataBounds","nHits","updateData","numberOfPoints","updated","updateCounterAndDataBoundsRecursively","endNode","containsDuplicatePointsOnly","isLeaf","getChild","separateExactlyDuplicatePointsFromNewInsertion","pntIds","newPnt","pntIdx","maxPts","ptMode","dupPnt","octMin","octMid","octMax","boxPtr","ocNode","duplic","single","setParent","getPointIdSet","setPointIdSet","createChildNodes","numberOfNodes","nbNodes","sample","success","tempId","dvidId","fullId","numIds","tempPt","_model$children$targe","insertPoint","pntId","_publicAPI$createChil","getDistance2ToBoundary","closest","innerOnly","rootNode","checkData","thisMin","thisMax","rootMin","rootMax","minDist","MAX_VALUE","getMinDataBounds","getMaxDataBounds","getMinBounds","getMaxBounds","minFace","beXless","beXmore","beYless","beYmore","beZless","beZmore","withinX","withinY","faceDst","tmpDist","pMinMax","xyzIndx","getDistance2ToInnerBoundary","vtkIncrementalOctreeNode","vtkIncrementalOctreeNode$1","dataSet","maxLevel","level","automatic","tolerance","useExistingSearchStructure","vtkLocator$1","vtkLocator","defaultValues","numberOfBuckets","vtkAbstractPointLocator$1","vtkAbstractPointLocator","fudgeFactor","octreeMaxDimSize","buildCubicOctree","maxPointsPerLeaf","insertTolerance2","locatorPoints","octreeRootNode","getLeafContainer","node","freeSearchStructure","findClosestPointInLeafNode","leafNode","dist2","tmpDst","tmpPnt","tmpIdx","idList","distance2BetweenPoints","findClosestPointInSphere","radius2","maskNode","refDist2","checkNode","childNode","distToData","tempDist2","tempPntId","pointIndx","minDist2","nodesBase","_publicAPI$findCloses","_publicAPI$findCloses2","initPointInsertion","_model$octreeRootNode","bbIndex","tmpBbox","dimDiff","max","minSideSize","tempVal","findClosestPointInSphereWithTolerance","findDuplicateFloatTypePointInVisitedLeafNode","findDuplicateDoubleTypePointInVisitedLeafNode","findDuplicatePointInLeafNode","ptId","_leafcontainer$insert","insertUniquePoint","_publicAPI$isInserted","isInsertedPoint","leafContainer","idx","_leafContainer$insert","insertNextPoint","_leafContainer$insert2","isInsertedPointForZeroTolerance","isInsertedPointForNonZeroTolerance","dist2Ext","pntIdExt","_publicAPI$findCloses3","_publicAPI$findCloses4","vtkIncrementalOctreePointLocator","vtkIncrementalOctreePointLocator$1","CCS_POLYGON_TOLERANCE","reverseElements","arr","firstIdx","lastIdx","first","mid","floor","vtkCCSTriangleQuality","u","w","area2","perim","vtkCCSInsertTriangle","polys","trids","polyEdges","originalEdges","nextVert","edgeCount","edgeLocs","vert","currId","edgeLoc","nextId","edgePts","maxPoints","currSide","_edgeLoc","npts","pts","prevSide","nextSide","prevNeeded","nextNeeded","tailPtIds","side","m","k","vtkCCSTriangulate","triangulationFailure","ppoint","npoint","verts","foundEar","concave","maxq","maxi","_ref2","q","MIN_VALUE","jj","foundNegative","_ref3","sside","IntersectionState","NO_INTERSECTION","kk","kq","_jj","jq","_q","vtkCCSVectorProgression","p3","w1","w2","s1","s2","sb1","sb2","c1","l1","ck","vtkCCSFindTrueEdges","l2","atol2","polyId","oldPoly","newEdges","newPoly","cornerPointId","oldOriginalId","partialEdge","cellCount","c","pointId","countLocation","ii","_pointId","_countLocation","vtkCCSReversePoly","edges","reverse","firstPtsIdx","vtkCCSCheckPolygonSense","pnormal","isNormalNotZero","sense","vtkCCSPolyInPoly","outerPoly","innerPoly","pp","q1","q2","intersectionState","pointOnEdge","vtkCCSPrepareForPolyInPoly","vtkCCSCheckCut","polyGroup","outerPolyId","innerPolyId","outerIdx","innerIdx","ptId1","ptId2","tol","l","polyIdx","r","r1","r2","r3","prevIdx","nextIdx","pc","_poly2","_n","qtId1","qtId2","c2","qc","u1","u2","d2","vtkCCSCutQuality","a","b","qmax","vtkCCSFindCuts","cuts","exhaustive","innerSize","minVal","vtkCCSFindSharpestVerts","cutlist","cutId","foundCut","sort","lid","vtkCCSMakeCuts","bb","outerEdges","innerEdges","n1","n2","poly1","edges1","i1","i2","_k2","m1","m2","poly2","edges2","j1","_k3","j2","_k4","TRIANGULATION_ERROR_DISPLAY","triangulateContours","firstLine","triangulatePolys","newPolys","incompletePolys","oriented","endLine","usedLines","Uint8Array","buildLinks","numNewPolys","remainingLines","lineId","completePoly","getCellPoints","cellPointIds","noLinesMatch","npoly","lineEndPts","endPts","endIdx","matches","cells","getPointCells","icell","_i2","unshift","pit","ptsIt","ptsEnd","vtkCCSMakePolysFromLines","computedNormal","maxnorm","norm","pt1","pt2","dMin","iMin","removePolys","_i3","pm","badPoint","_poly","id2","vtkCCSJoinLooseEnds","polyGroups","groupCount","polyReversed","innerPolys","Int32Array","nmax","Float64Array","_vtkCCSCheckPolygonSe","subarray","_j2","_k","_kk","_jj3","_jj4","_j","outerPolyStack","ll","_jj2","vtkCCSMakeHoleyPolys","cutFailure","groupId","innerBySize","madeCut","inner","nextGroupId","vtkCCSCutHoleyPolys","tryPoints","empty","locator","splitCount","initialize","setTolerance","foundMatch","idx1","idx2","unique","_locator$insertUnique","midIdx","oldEdges","newPoly1","newEdges1","newPoly2","newEdges2","vtkCCSSplitAtPinchPoints","triangulatePolygon","triangles","input","getNumberOfCells","buildCells","polysArray","setPolys","passData","getNumberOfVerts","vtkContourTriangulator","vtkContourTriangulator$1","ScalarMode","NONE","COLORS","LABELS","capitalize","vtkClipClosedSurface","interpolateEdge","i0","v0","edge","insertUniqueEdge","interpolateData","clipLines","pointScalars","edgeLocator","inputLines","outputLines","inLineData","outLineData","c0","linePts","cellId","newCellId","outputPolys","triangulationErrorDisplay","clipAndContourPolys","inputPolys","inCellData","outPolyData","_idList","polyMax","j0","idListIdx","numPoints","ncells","_newCellId","_newCellId2","getMTime","clippingPlanes","mtime","_input$getVerts","_input$getStrips","inputPoints","inputPointsType","inPointData","passPointData","lineScalars","polyScalars","inputScalars","tmpContourData","firstLineScalar","firstPolyScalar","firstStripScalar","numberOfScalarComponents","colors","scalarMode","color1","color2","color3","dcolors","clamp","round","createColorValues","baseColor","clipColor","activePlaneColor","UNSIGNED_CHAR","tryInputScalars","getCellData","cellColor","getTuple","breakPolylines","deepCopy","scalarValue","insertTuple","copyPolygons","inputStrips","getNumberOfTuples","breakTriangleStrips","getCellSizes","newLines","copyScalarsOn","inPolyData","planes","planeId","plane","activePlaneId","getOrigin","pointScalarsData","pointsData","numClipLines","_scalars","activeColor","numNewLines","oldColor","numClipAndContourLines","_color","numCells","_color2","_numCells","lineCellId","_ref4","_ref5","_ref6","generateOutline","generateFaces","pScalars","_color3","setName","categories","newClone","outputPointDataType","numNewPoints","outPointData","pointMap","cellArrays","cellArray","newPointId","newPoints","squeezeOutputPoints","toLowerCase","vtkClipClosedSurface$1","pointToString","decimals","parseFloat","toFixed","polyDataCache","updateSurfacePlanes","vtkPlanes","clippingFilter","viewPlaneNormal","getCamera","imageIndex","getCurrentImageIdIndex","cacheId","actorCache","setClippingPlanes","update","error","surface","VolumeViewport3D","setGenerateOutline","setGenerateFaces","filteredData","setColor","CLIPPING_PLANES_UPDATED","SurfaceData","Surface","SURFACE","surfaceUID","_renderSurface","removeSurfaceFromElement","_removeSurfaceFromToolGroupViewports","representationInputArray","toolGroupSpecificRepresentationConfig","promises","surfaceDisplay","_addSegmentationRepresentation","Promise","all","getActiveSegmentationRepresentation","isSegmentIndexLocked","setSegmentIndexLocked","getLockedSegments","setColorLUT","segRepresentation","getColorForSegmentIndex","setColorForSegmentIndex","colorReference","setSegmentationVisibility","indices","scalarData","getScalarData","keySet","it","parseInt","getSegmentationIndices","clear","getSegmentationVisibility","setSegmentsVisibility","segmentIndices","setSegmentVisibility","setActiveSegmentIndex","getActiveSegmentIndex","BaseTool","toolProps","defaultToolProps","initialProps","configuration","supportedInteractionTypes","strategies","defaultStrategy","activeStrategy","strategyOptions","mode","Disabled","getToolName","applyActiveStrategy","operationData","call","setConfiguration","newConfiguration","setActiveStrategy","strategyName","getTargetVolumeId","actorEntries","getClassName","getTargetIdImage","targetId","imageId","split","imageURI","viewports","getCurrentImageId","getImageData","getTargetId","BaseVolumeViewport","VideoViewport","VIEWPORT_ELEMENT","getSvgNode","canvasHash","cacheKey","domRef","appendNode","svgLayerElement","svgNode","touched","appendChild","setNodeTouched","clearUntouched","cacheEntry","removeChild","viewportElement","internalDivElement","querySelector","_getSvgLayer","svgNodeCacheForCanvas","fn","svgDrawingHelper","drawingElementType","nodeUID","attributes","currentValue","getAttribute","newValue","removeAttribute","setAttribute","circleUID","center","radius","options","dataId","fill","width","lineWidth","lineDash","fillOpacity","strokeOpacity","strokeWidth","svgNodeHash","existingCircleElement","cx","cy","stroke","newCircleElement","createElementNS","ellipseUID","corner1","corner2","existingEllipse","h","rx","ry","svgEllipseElement","handleGroupUID","handlePoints","opacity","handle","svgns","height","existingHandleElement","newHandleElement","drawLine","lineUID","start","end","isNaN","shadow","existingLine","dropShadowStyle","style","newLine","drawPolyline","polylineUID","fillColor","connectLastToFirst","existingPolyLine","pointsAttribute","newPolyLine","_createTextSpan","text","textSpanElement","textContent","_drawTextBackground","group","getBBox","insertBefore","firstChild","bBox","textUID","textLines","position","textGroupBoundingBox","padding","fontFamily","fontSize","background","existingTextGroup","textElement","textSpans","textSpan","textGroupAttributes","transform","textGroup","noSelectStyle","combinedStyle","_createTextElement","_drawTextGroup","centerX","centerY","findClosestPoint","sourcePoints","targetPoint","minPoint","minDistance","MAX_SAFE_INTEGER","sourcePoint","_distanceBetween","linkUID","annotationAnchorPoints","refPoint","boundingBox","boundingBoxPoints","halfWidth","halfHeight","_boundingBoxPoints","textBoxUID","textBoxPosition","textBox","mergedOptions","centering","canvasBoundingBox","drawRect","rectangleUID","_width","existingRect","tlhc","svgRectElement","drawArrow","arrowUID","angle","atan2","cos","PI","sin","secondLine","drawRedactionRect","modesFilter","enabledTools","toolGroupToolNames","toolOptions","toolInstance","getToolInstance","Active","Passive","Enabled","annotationRenderingEngine","_needsRender","_animationFrameSet","_animationFrameHandle","_renderFlaggedViewports","_throwIfDestroyed","_viewportElements","_triggerRender","addViewportElement","removeViewportElement","_reset","renderViewport","_setViewportsToBeRenderedNextFrame","hasBeenDestroyed","_setAllViewportsToBeRenderedNextFrame","elementsEnabled","indexOf","_render","requestAnimationFrame","getRenderingEngine","anyRendered","tool","renderAnnotation","rendered","ANNOTATION_RENDERED","cancelAnimationFrame","CONSTANTS","PARALLEL_THRESHOLD","filterAnnotationsWithinSlice","spacingInNormalDirection","annotationsWithParallelNormals","td","annotationViewPlaneNormal","referencedImageId","imageOrientationPatient","metaData","rowCosineVec","colCosineVec","isParallel","halfSpacingInNormalDirection","focalPoint","annotationsWithinSlice","handles","dir","dot","filterAnnotationsForDisplay","colonIndex","substring","getFrameOfReferenceUID","toolData","VolumeViewport","_initializeConfig","colorHighlighted","colorSelected","colorLocked","textBoxVisibility","textBoxFontFamily","textBoxFontSize","textBoxColor","textBoxColorHighlighted","textBoxColorSelected","textBoxColorLocked","textBoxBackground","textBoxLinkLineWidth","textBoxLinkLineDash","textBoxShadow","getAnnotationToolStyles","getViewportToolStyles","getToolGroupToolStyles","getDefaultToolStyles","default","setAnnotationStyles","styles","annotationSpecificStyles","setViewportToolStyles","viewportSpecificStyles","setToolGroupToolStyles","toolGroupSpecificStyles","setDefaultToolStyles","getStyleProperty","toolStyle","specifications","_getToolStyle","property","global","globalStyles","toolStyles","styleSpecifier","alternatives","list","getHierarchalPropertyStyles","highlighted","Highlighted","Selected","Locked","Default","AnnotationDisplayTool","onImageSpacingCalibrated","annotationManager","getAnnotationManager","frameOfReference","filterInteractableAnnotationsForElement","getReferencedImageId","worldPos","viewUp","imageVolume","getStyle","AnnotationTool","super","mouseMoveCallback","filteredAnnotations","canvasCoords","annotationsNeedToBeRedrawn","activateHandleIndex","activeHandleIndex","near","_imagePointNearToolOrHandle","nearToolAndNotMarkedActive","notNearToolAndMarkedActive","getTextLines","statsCalculator","getHandleNearImagePoint","proximity","worldBoundingBox","topLeft","worldToCanvas","topRight","bottomLeft","bottomRight","annotationCanvasCoordinate","getLinkedTextBoxStyle","isSuvScaled","scaling","PT","scalingModule","suvbw","isPointNearTool","SegmentationDisplayTool","renderSegmentation","toolGroupViewports","segmentationRenderList","_getMergedRepresentationsConfig","viewportsRenderList","display","renderedViewport","allSettled","then","onSetToolEnabled","onSetToolDisabled","segmentationRenderingEngine","_renderFlaggedToolGroups","removeToolGroup","renderToolGroupSegmentations","_setToolGroupSegmentationToBeRenderedNextFrame","getViewport","segmentationDisplayToolInstance","onSegmentationRender","IMAGE_RENDERED","SEGMENTATION_RENDERED","triggerSegmentationRender","segmentationVolume","imageData","vtkOpenGLTexture","slicesToUpdate","isArray","numSlices","getDimensions","setUpdatedFrame","getAnnotationNearPoint","getAnnotationNearPointOnEnabledElement","_toolInstances","found","findAnnotationNearPointByTool","currentId","func","wait","lastArgs","lastThis","maxWait","result","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","useRAF","TypeError","invokeFunc","time","args","thisArg","startTimer","pendingFunc","shouldInvoke","timeSinceLastCall","timerExpired","trailingEdge","timeSinceLastInvoke","timeWaiting","remainingWait","debounced","isInvoking","leadingEdge","cancel","cancelTimer","flush","pending","clip","low","high","calibratedPixelSpacingMetadataProvider","calibrateImageSpacing","calibrationOrScale","USER","scale","getStackViewports","getImageIds","calibrateSpacing","viewportIdsToRender","viewportType","scroll","debounceLoading","loop","numScrollSteps","currentStepIndex","sliceRangeInfo","sliceRange","newFocalPoint","newPosition","setCamera","desiredStepIndex","VolumeScrollEventDetail","currentImageId","EVENTS","VOLUME_SCROLL_OUT_OF_BOUNDS","scrollVolume","currentImageIndex","numberOfSlices","getTargetImageIdIndex","_getImageSliceData","imageIndexToJump","lastSliceIndex","_getImageIndexToJump","pointInShapeCallback","pointInShapeFn","callback","boundsIJK","iMax","jMin","jMax","kMin","kMax","dimensions","getDirection","rowCosines","columnCosines","scanAxisNormal","spacing","getSpacing","rowSpacing","columnSpacing","scanAxisSpacing","worldPosStart","indexToWorld","rowStep","columnStep","scanAxisStep","yMultiple","zMultiple","pointsInShape","pointIJK","dI","dJ","dK","startWorld","pointLPS","numSlicesToProject","sliceNormalIndex","xMin","Infinity","xMax","yMin","yMax","zMin","zMax","depth","transformWorldToIndex","pointInSurroundingSphereCallback","circlePoints","centerWorld","radiusWorld","bottom","centerIJK","spacings","minSpacing","maxRadiusIJK","ceil","viewRight","topLeftWorld","bottomRightWorld","sphereCornersIJK","_computeBoundsIJKWithCamera","_getBounds","sphereObj","sphere","pointInSphere","precision","fixedPrecision","strategySpecificConfiguration","THRESHOLD_INSIDE_CIRCLE","voxelValue","threshold","fillSphere","_inside","scalarIndex","minSlice","maxSlice","fillInsideSphere","thresholdInsideSphere","eraseInsideSphere","pointInEllipse","ellipse","circleCenterWorld","xRadius","yRadius","zRadius","z","x0","y0","z0","inside","getCanvasEllipseCorners","ellipseCanvasPoints","right","fillCircle","canvasCoordinates","topLeftCanvas","bottomRightCanvas","ellipsoidCornersIJK","ellipseObj","fillInsideCircle","thresholdInsideCircle","eraseInsideCircle","DEFINED_CURSORS","Symbol","STANDARD_CURSORS","MouseCursor","fallback","addFallbackStyleProperty","getDefinedCursor","definedCursors","getDefinedCursors","mouseCursor","setDefinedCursor","cursor","context","symbol","standardCursorNames","ImageMouseCursor","url","getUniqueInstanceName","prefix","BASE","iconContent","iconSize","viewBox","mousePoint","mousePointerGroupString","SEGMENTATION_CURSOR_BOUNDARIES","MINUS_RECT","PLUS_RECT","SCISSOR_ICON","RECTANGLE_ICON","CIRCLE_ICON","CursorSVG","Angle","ArrowAnnotate","Bidirectional","CobbAngle","CircleROI","EllipticalROI","FreehandROI","FreehandROISculptor","Length","Probe","RectangleROI","TextMarker","Crosshairs","Eraser","Magnify","Pan","Rotate","StackScroll","WindowLevelRegion","WindowLevel","Zoom","SegmentationFreeHandEraseInside","SegmentationFreeHandFillInside","SegmentationFreeHandEraseOutside","SegmentationFreeHandFillOutside","SegmentationRectangleEraseInside","RectangleScissor","CircleScissor","base","create","registerCursor","svgCursorNames","STATE","MODE","SVGMouseCursor","pointer","urn","getCursorURN","getDefinedSVGCursorDescriptor","URL","createObjectURL","svgString","createSVGIconWithPointer","createSVGIcon","Blob","createSVGIconBlob","createSVGIconUrl","createSVGMouseCursor","format","template","dictionary","dict","defined","prototype","hasOwnProperty","replace","match","svgSize","cursorName","CursorNames","ELEMENT_CURSORS_MAP","initElementCursor","_getElementCursors","_setElementCursor","cursors","resetElementCursor","hideElementCursor","WeakMap","BrushTool","FILL_INSIDE_CIRCLE","ERASE_INSIDE_CIRCLE","FILL_INSIDE_SPHERE","ERASE_INSIDE_SPHERE","THRESHOLD_INSIDE_SPHERE","brushSize","onSetToolPassive","disableCursor","preMouseDownCallback","eventData","activeSegmentationRepresentation","firstVolumeActorUID","_editData","_activateDraw","updateCursor","_dragCallback","brushCursor","_hoverData","_endCallback","_deactivateDraw","centerCanvas","_calculateCursor","centerCursorInWorld","bottomCursorInWorld","topCursorInWorld","leftCursorInWorld","rightCursorInWorld","invalidateBrushCursor","toolMetadata","brushCursorUID","getBrushToolInstances","toolInstances","equalsCheck","getVoxelOverlap","voxelSpacing","voxelCenter","voxelCornersWorld","voxelCornersIJK","processVolumes","thresholdVolumeInformation","segmentationSpacing","volumeInfoList","baseVolumeIdx","volumeSize","referenceValues","lower","upper","segmentationImageData","overwrite","overlapType","overlaps","range","testOverlapRange","volumeInfo","overlapBounds","overlapTest","testRange","computeOffsetIndex","insert","PanTool","touchDragCallback","mouseDragCallback","deltaPointsWorld","updatedPosition","updatedFocalPoint","TrackballRotateTool","rotateIncrementDegrees","rotateCamera","axis","vtkCamera","getVtkActiveCamera","getViewUp","getFocalPoint","getPosition","newViewUp","currentPointsCanvas","lastPointsCanvas","clientWidth","clientHeight","normalizedPosition","normalizedPreviousPosition","radsq","op","oe","opsq","oesq","lop","loe","nop","noe","angleX","acos","upVec","atV","rightV","forwardV","angleY","WindowLevelTool","_getImageDynamicRangeFromMiddleSlice","middleSliceIndex","frameLength","bytesPerVoxel","TypedArrayConstructor","Uint16Array","Int16Array","frame","buffer","_getMinMax","modality","newRange","viewportsContainingVolumeUID","isPreScaled","properties","getProperties","voiRange","Modality","preScale","scaled","scalingParameters","getPTScaledNewRange","deltaPointsCanvas","getNewRange","setProperties","vp","multiplier","_getMultiplierFromDynamicRange","wwDelta","wcDelta","windowWidth","windowCenter","imageDynamicRange","calculatedDynamicRange","BitsStored","metadataDynamicRange","_getImageDynamicRangeFromViewport","ratio","getRange","voxel","StackScrollTool","invert","debounceIfNotLoaded","deltaPointY","pixelsPerImage","_getPixelPerImage","imageIdIndexOffset","_getNumberOfSlices","offsetHeight","angleBetweenLines","line1","line2","p4","angleBetween3DLines","angleBetween2DLines","PlanarRotateTool","currentPointWorld","startPointWorld","cross","rotAngle","rotMat","rotatedViewUp","rotation","StackScrollMouseWheelTool","mouseWheelCallback","ZoomTool","zoomToCenter","minZoomScale","maxZoomScale","pinchToZoom","pan","initialMousePosWorld","dirVec","preTouchStartCallback","_dragParallelProjection","pinch","parallelScale","parallelScaleToSet","focalPointToSet","positionToSet","distanceToCanvasCenter","cappedParallelScale","thresholdExceeded","_dragPerspectiveProjection","zoomScale","directionOfProjection","tmp","_pinchCallback","parallelProjection","_panCallback","DIRECTIONS","VolumeRotateMouseWheelTool","cz","ax","ay","az","getWorldWidthAndHeightFromCorners","pos1","pos2","diagonal","diagonalLength","worldWidth","worldHeight","cosTheta","getPointInLineOfSightWithCriteria","targetVolumeId","criteriaFunction","stepSize","cameraPosition","step","vector","pickedPoint","pointT","_inBounds","pointToPick","getIntensityFromWorld","jumpToWorld","jumpWorld","dotProd","projectedDelta","_applyShift","MIPJumpToClickTool","targetViewportIds","mouseClickCallback","maxIntensity","brightestPoint","intensity","getViewports","foundToolGroup","filterViewportsWithFrameOfReferenceUID","numViewports","viewportsWithFrameOfReferenceUID","filterViewportsWithToolEnabled","viewportsWithToolEnabled","_toolGroupHasActiveEnabledOrPassiveTool","toolMode","EPS","vpCamera","getViewportIdsWithToolToRender","requireParallelNormals","clipT","num","denom","tE","tL","box","da","db","dx","dy","distanceToPointSquared","lineStart","lineEnd","NaN","intersectLine","line1Start","line1End","line2Start","line2End","x3","y3","x4","y4","a1","b1","r4","a2","b2","RENDERING_DEFAULTS","defaultReferenceLineColor","defaultReferenceLineControllable","defaultReferenceLineDraggableRotatable","defaultReferenceLineSlabThicknessControlsOn","OPERATION","CrosshairsTool","viewportIndicators","autoPan","enabled","panSize","referenceLinesCenterGapRadius","filterActorUIDsToSetSlabThickness","slabThicknessBlendMode","mobile","toolCenter","initializeViewport","_getAnnotations","cameraFocalPoint","rotationPoints","slabThicknessPoints","activeOperation","activeViewportIds","_getViewportsInfo","computeToolCenter","firstViewport","secondViewport","thirdViewport","normal1","normal2","point2","normal3","point3","firstPlane","secondPlane","thirdPlane","addNewAnnotation","_jump","viewportIdArray","otherViewport","viewportControllable","_getReferenceLineControllable","viewportDraggableRotatable","_getReferenceLineDraggableRotatable","_activateModify","handleSelectedCallback","_pointNearTool","toolSelectedCallback","onCameraModified","viewportAnnotation","currentCamera","oldCameraPosition","deltaCameraPosition","oldCameraFocalPoint","deltaCameraFocalPoint","isRotation","cameraModifiedInPlane","getViewportIds","_autoPanViewportIfNecessary","filteredToolAnnotations","imageNeedsUpdate","previousActiveOperation","previousActiveViewportIds","_areViewportIdArraysEqual","renderStatus","canvasDiagonalLength","canvasMinDimensionLength","crosshairCenterCanvas","otherViewportAnnotations","_filterAnnotationsByUniqueViewportOrientations","referenceLines","canvasBox","otherCamera","otherViewportControllable","otherViewportDraggableRotatable","otherViewportSlabThicknessControlsOn","_getReferenceLineSlabThicknessControlsOn","otherCanvasDiagonalLength","otherCanvasCenter","otherViewportCenterWorld","pointWorld0","pointWorld1","pointCanvas0","otherViewportCenterCanvas","canvasUnitVectorFromCenter","canvasVectorFromCenterLong","canvasVectorFromCenterMid","canvasVectorFromCenterShort","canvasVectorFromCenterStart","centerGap","refLinePointOne","refLinePointTwo","refLinePointThree","refLinePointFour","refLinesCenter","rotHandleOne","rotHandleTwo","stHandlesCenterCanvas","stHandlesCenterWorld","worldUnitVectorFromCenter","matrix","buildFromDegree","rotate","worldUnitOrthoVectorFromCenter","slabThicknessValue","getSlabThickness","worldOrthoVectorFromCenter","worldVerticalRefPoint","canvasVerticalRefPoint","canvasOrthoVectorFromCenter","stLinePointOne","stLinePointTwo","stLinePointThree","stLinePointFour","stHandleOne","stHandleTwo","stHandleThree","stHandleFour","newRtpoints","newStpoints","viewportColor","_getReferenceLineColor","line","lineIndex","viewportSlabThicknessControlsOn","selectedViewportId","lineActive","rotHandlesActive","rotationHandles","rotHandleWorldOne","rotHandleWorldTwo","slabThicknessHandlesActive","slabThicknessHandles","slabThicknessHandleWorldOne","slabThicknessHandleWorldTwo","slabThicknessHandleWorldThree","slabThicknessHandleWorldFour","handleUID","_onNewVolume","viewportIdArrayOne","viewportIdArrayTwo","itemFound","_getAnnotationsForViewportsWithDifferentCameras","viewportsWithDifferentCameras","cameraOfTarget","_filterViewportWithSameOrientation","referenceAnnotation","linkedViewportAnnotations","otherViewPlaneNormal","otherLinkedViewportAnnotationsFromSameScene","otherViewportsAnnotationsWithUniqueCameras","cameraFound","cameraOfStocked","otherNonLinkedViewportAnnotationsFromSameScene","_checkIfViewportsRenderingSameScene","actors","otherViewportActors","sameScene","viewportsAnnotationsToUpdate","_applyDeltaShiftToSelectedViewportCameras","_deactivateModify","editData","dir1","dir2","finalPointCanvas","originalPointCanvas","_isClockWise","rotationAxis","buildFromRadian","translate","otherViewportsIds","renderViewports","referenceAnnotations","viewportsIds","mod","currentCenter","otherViewportRotationPoints","dotProdDirection","projectedDirection","normalizedProjectedDirection","normalizedProjectedDelta","MINIMUM_SLAB_THICKNESS","_pointNearReferenceLine","setSlabThickness","lineViewport","lineSegment1","distanceToPoint1","lineSegment2","distanceToPoint2","getReferenceLineColor","getReferenceLineControllable","getReferenceLineDraggableRotatable","getReferenceLineSlabThicknessControlsOn","onSetToolActive","_unsubscribeToViewportNewVolumeSet","_subscribeToViewportNewVolumeSet","_getRotationHandleNearImagePoint","_getSlabThicknessHandleNearImagePoint","VOLUME_VIEWPORT_NEW_VOLUME","toolCenterCanvas","visiblePointCanvas","visiblePointWorld","slabThickness","actorUIDs","blendModeToUse","COMPOSITE","setBlendMode","_applyDeltaShiftToViewportCamera","stPointLineCanvas1","stPointLineCanvas2","stPointLineCanvas1Start","stPointLineCanvas2Start","MAGNIFY_VIEWPORT_ID","MagnifyTool","magnifySize","magnifyWidth","magnifyHeight","_getReferencedImageId","_createMagnificationViewport","viewportProperties","canvasPos","magnifyToolElement","magnifyElement","createElement","classList","viewportInput","STACK","enableElement","magnifyViewport","setStack","_dragEndCallback","disableElement","getCanvasCircleRadius","circleCanvasPoints","getCanvasCircleCorners","isSegmentation","referenceId","AdvancedMagnifyViewport","magnifyViewportId","sourceEnabledElement","zoomFactor","_enabledElement","_sourceToolGroup","_magnifyToolGroup","_isViewportReady","_radius","_resized","_canAutoPan","_viewportId","_sourceEnabledElement","_autoPan","_browserMouseDownCallback","_browserMouseUpCallback","_handleToolModeChanged","_mouseDragCallback","_resizeViewportAsync","_resizeViewport","_initialize","_syncViewports","dispose","_removeEventListeners","parentNode","magnifyToolGroup","toolBindingsOptions","setToolActive","setToolPassive","setToolEnabled","setToolDisabled","_inheritBorderRadius","borderRadius","_createViewportNode","overflow","boxSizing","_convertZoomFactorToParalellScale","offsetWidth","_isStackViewport","_isVolumeViewport","_cloneToolGroups","sourceViewport","sourceActors","magnifyToolGroupId","sourceToolGroup","clone","AdvancedMagnifyTool","addViewport","_cloneStack","imageIds","_cloneVolumes","volumeInputArray","setVolumes","_cloneViewport","sourceViewportOptions","defaultOptions","_cancelMouseEventCallback","canvasCurrent","magnifyRadius","canvasCenter","dist","maxDist","panDist","canvasDeltaPos","newCanvasPosition","currentWorldPos","newWorldPos","worldDeltaPos","autoPanCallbackData","currentPosition","_addBrowserEventListeners","_removeBrowserEventListeners","_addEventListeners","TOOL_MODE_CHANGED","sourceCanvas","_syncViewportsCameras","_syncStackViewports","setImageIdIndex","sourceProperties","resize","AdvancedMagnifyViewportManager","createViewport","sourceElement","_addSourceElementEventListener","_magnifyViewportsMap","_annotationRemovedCallback","_destroyViewport","_newStackImageCallback","sourceViewportId","_getMagnifyViewportsMapEntriesBySourceViewportId","_newVolumeImageCallback","currentViewPlaneNormal","worldImagePlanePoint","vecHandleToImagePlane","worldDist","worldDelta","len","getInstance","_singleton","_destroyViewports","magnifyViewportMapEntry","_removeSourceElementEventListener","ANNOTATION_REMOVED","STACK_NEW_IMAGE","VOLUME_NEW_IMAGE","magnifyingGlass","zoomFactorList","actions","method","bindings","Secondary","modifierKey","Shift","worldHandlesPoints","_getWorldHandlesPoints","magnifyViewportManager","annotationPoints","canvasTop","canvasBottom","canvasLeft","radiusPoint","handleIndex","newAnnotation","isDrawing","eventType","ANNOTATION_COMPLETED","_dragDrawCallback","worldPosDelta","hasMoved","_dragModifyCallback","_dragHandle","newRadius","newWorldHandlesPoints","activeHandleCanvasCoords","canvasCenterPos","canvasRadius","showZoomFactorsList","currentZoomFactor","dropdown","_getZoomFactorsListDropdown","newZoomFactor","parentElement","focus","onChangeCallback","which","option","title","defaultSelected","ReferenceLines","showFullDimension","_init","getRenderingEngines","sourceViewportCanvasCornersInWorld","targetViewport","sourceViewPlaneNormal","targetViewportPlane","pointSet1","pointSet2","pointSetToUse","topBottomVec","topRightVec","newNormal","isPerpendicular","lineStartWorld","lineEndWorld","handleFullDimension","vec1","vec2","targetImage","topLeftImageCoord","topRightImageCoord","bottomRightImageCoord","bottomLeftImageCoord","lineStartImageCoord","lineEndImageCoord","intersectInfiniteLines","isInBound","err","OverlayGridTool","sourceImageIds","imagePlaneModule","pointSets","calculateImageIdPointSets","viewportData","imagePositionPatient","rows","columns","rowPixelSpacing","columnPixelSpacing","imageIdNormal","getImageIdNormal","targetData","initializeViewportData","pointSetsToUse","lineStartsWorld","lineEndsWorld","SegmentationIntersectionTool","actorsWorldPointsMap","calculateSurfaceSegmentationIntersectionsForViewport","calculateSurfaceSegmentationIntersections","getCacheId","actorWorldPointMap","polyLineIdx","worldPointsSet","canvasPoints","polyLineUID","actorWorldPointsMap","colorArray","colorComponentToString","component","componentString","toString","colorToString","CalibrationTypes","PIXEL_UNITS","getCalibratedLengthUnits","image","calibration","hasPixelSpacing","units","UNCALIBRATED","SequenceOfUltrasoundRegions","getCalibratedAreaUnits","getCalibratedScale","getCalibratedAspect","aspect","getTextBoxCoordsCanvas","annotationCanvasPoints","corners","handlesLeftToRight","_compareX","handlesTopToBottom","_compareY","_determineCorners","BidirectionalTool","preventHandleOutsideImage","defaultGetTextLines","canvasPoint1","canvasPoint2","distanceToPoint","movingTextBox","worldPosition","firstLineSegmentLength","longAxis","shortAxisPoint0","shortAxisPoint1","longAxisVector","counterClockWisePerpendicularToLongAxis","currentShortAxisVector","shortAxis","isHandleOutsideImage","canvasCoordPoints","shortAxisDistFromCenter","vectorX","vectorY","xMid","yMid","startX","startY","endX","endY","_dragModifyHandle","movingHandleIndex","canvasCoordHandlesCurrent","firstLineSegment","secondLineSegment","proposedPoint","proposedCanvasCoord","fixedHandleCanvasCoord","fixedHandleToProposedCoordVec","fixedHandleToOldCoordVec","proposedFirstLineSegment","_movingLongAxisWouldPutItThroughShortAxis","centerOfRotation","_getSignedAngle","firstPointX","firstPointY","secondPointX","secondPointY","rotatedFirstPoint","rotatedFirstPointY","rotatedSecondPoint","rotatedSecondPointY","newFirstPoint","newSecondPoint","translateHandleIndex","canvasCoordsCurrent","longLineSegment","shortLineSegment","longLineSegmentVec","longLineSegmentVecNormalized","proposedToCurrentVec","movementLength","movementAlongLineSegmentLength","newTranslatedPoint","unit","_throttledCalculateCachedStats","_calculateCachedStats","dataId1","dataId2","canvasTextBoxCoords","vectorInSecondLineDirection","extendedSecondLineSegment","worldPos1","worldPos2","worldPos3","worldPos4","targetIds","dist1","_calculateLength","index1","index2","index3","index4","_isInsideVolume","ANNOTATION_MODIFIED","vector1","vector2","dz","LengthTool","cachedVolumeStats","getModalityUnit","generalSeriesModule","petSeriesModule","_handlePTModality","isViewportPreScaled","targetIdTokens","ProbeTool","eventDispatchDetail","referencedImageURI","hasImageURI","currentImageURI","textCanvasCoordinates","modalityUnitOptions","modalityUnit","DragProbeTool","postMouseDownCallback","postTouchStartCallback","lineSegments","rectToLineSegments","segment","BasicStatsCalculator","currentMax","sum","sumSquares","squaredDiffSum","statsCallback","getStatistics","mean","stdDev","stdDevWithSumSquare","RectangleROITool","_getRectangleImageCoordinates","bottomLeftCanvas","topRightCanvas","bottomLeftWorld","topRightWorld","areaUnit","worldPos1Index","worldPos2Index","stats","statsArray","getWorldWidthAndHeightFromTwoPoints","EllipticalROITool","centerPointRadius","initialRotation","getRotation","canvasCorners","minorEllipse","majorEllipse","pointInMinorEllipse","_pointInEllipseCanvas","canvasWidth","canvasHeight","originalHandleCanvas","pointsCanvas","currentCanvasPoints","dX","dY","bottomCanvas","topCanvas","leftCanvas","rightCanvas","dYCanvas","newHalfCanvasWidth","canvasRight","dXCanvas","newHalfCanvasHeight","centerPoint","_getCanvasEllipseCenter","isEmptyArea","location","normalized","areaLine","CircleROITool","canvasEnd","radiusUnit","radiusLine","getIntersectionCoordinatesWithPolyline","closed","polylineIndexes","initialI","intersections","doesIntersect","getAllIntersectionsWithPolyline","getIntersection","getFirstIntersectionWithPolyline","getClosestIntersectionWithPolyline","distances","intersectionPoints","midpoint","orient","orientation","onSegment","orientationValue","denominator","numerator1","numerator2","subPixelResolution","xDir","yDir","volumeSpacing","iVector","jVector","kVector","absViewRightDotI","absViewRightDotJ","absViewRightDotK","xSpacing","absViewUpDotI","absViewUpDotJ","absViewUpDotK","ySpacing","closeContourProximity","newCanvasPoint","commonData","lastWorldPos","worldPosDiff","xDist","yDist","numPointsToAdd","lastCanvasPoint","canvasDist","canvasDir","distPerPoint","p1p","p1p2","p1p2Mag","projectionVectorMag","p1p2UnitVector","projectionVector","projectionPoint","calculateAreaOfPoints","interpolateSegmentPoints","iniIndex","endIndex","knotsRatioPercentage","segmentSize","amountOfKnots","minKnotDistance","interpolationIniIndex","interpolationEndIndex","segmentPointsUnchangedBeg","segmentPointsUnchangedEnd","knotsIndexes","minDistributionDistance","closedInterval","intervalIni","intervalEnd","intervalSize","continuosDistributionValue","getContinuousUniformDistributionValues","interpolatedPoints","originalPoints","xInterpolator","yInterpolator","zInterpolator","interpolatePoints","shouldInterpolate","interpolation","interpolateOnAdd","interpolateOnEdit","followingIndex","circularFindNextIndexBy","listParams","otherListParams","criteria","indexDelimiter","otherIndexDelimiter","otherPoints","pointsLength","otherPointsLength","startIndex","otherStartIndex","findChangedSegment","previousPoints","firstMatchIndex","previousFirstMatchIndex","pointA","pointB","findMatchIndexes","toBeNotEqualCriteria","isEqualByProximity","lowDiffIndex","lowOtherDiffIndex","highIndex","getInterpolatedPoints","pointsOfReference","knotsRatioPercentageOnAdd","knotsRatioPercentageOnEdit","changedIniIndex","changedEndIndex","findOpenUShapedContourVectorToPeak","firstToLastUnitVector","normalVector1","normalVector2","centerOfFirstToLast","furthest","addCanvasPointsToArray","pointsAreWithinCloseContourProximity","getSubPixelSpacingAndXYDirections","activateDraw","drawData","polylineIndex","mouseUpDrawCallback","mouseDragDrawCallback","deactivateDraw","lastWorldPoint","crossingIndex","findCrossingIndexDuringCreate","applyCreateOnCross","numPointsAdded","allowOpenContours","lastPoint","completeDrawOpenContour","completeDrawClosedContour","removeCrossedLinesOnCompleteDraw","haltDrawing","worldPoints","polyline","isOpenContour","triggerAnnotationCompleted","endToStart","canvasPointsMinusEnds","lineSegment","indexToRemoveUpTo","isOpenUShapeContour","openUShapeContourVectorToPeak","pointsLessLastOne","activateClosedContourEdit","cancelDrawing","minPoints","shouldHaltDrawing","checkForFirstCrossing","isClosedContour","editCanvasPoints","prevCanvasPoints","crossedLineSegment","startCrossingIndex","removePointsUpUntilFirstCrossing","checkCanvasEditFallbackProximity","firstEditCanvasPoint","distanceIndexPairs","prevCanvasPoint","twoClosestDistanceIndexPairs","lowestIndex","extendedPoint","crossedLineSegmentFromExtendedPoint","pointsToPrepend","editIndex","numPointsToRemove","checkForSecondCrossing","removePointsAfterSecondCrossing","lastLine","didCrossLine","findSnapIndex","lastEditCanvasPoint","editCanvasPointsLessLastOne","snapCanvasPosition","checkAndRemoveCrossesOnEditLine","editIndexCrossed","isEditingClosed","mouseUpClosedContourEditCallback","mouseDragClosedContourEditCallback","deactivateClosedContourEdit","currentEditIndex","snapIndex","fusedCanvasPoints","fuseEditPointsWithClosedContour","finishEditAndStartNewEdit","triggerAnnotationModified","augmentedEditCanvasPoints","lowIndex","distanceBetweenLowAndFirstPoint","distanceBetweenLowAndLastPoint","distanceBetweenHighAndFirstPoint","distanceBetweenHighAndLastPoint","inPlaceDistance","reverseDistance","completeClosedContourEdit","cancelClosedContourEdit","activateOpenContourEdit","isEditingOpen","mouseUpOpenContourEditCallback","mouseDragOpenContourEditCallback","deactivateOpenContourEdit","fuseEditPointsWithOpenContour","finishEditOpenOnSecondCrossing","checkIfShouldOverwriteAnEnd","openContourEditOverwriteEnd","fuseEditPointsForOpenContourEndEdit","activateOpenContourEndEdit","lastCanvasPos","aDotb","magA","magB","newCanvasPoints","pointsToRender","completeOpenContourEdit","cancelOpenContourEdit","_getRenderingOptions","renderContour","findOpenUShapedContourVectorToPeakOnRender","calculateUShapeContourVectorToPeakIfNotPresent","renderOpenUShapedContour","renderOpenContour","renderClosedContour","alwaysRenderOpenContourHandles","handlePoint","firstCanvasPoint","openUShapeContourVectorToPeakCanvas","renderContourBeingDrawn","renderClosedContourBeingEdited","renderOpenContourBeingEdited","pointCanProjectOnLine","PlanarFreehandROITool","calculateStats","previousPoint","pStart","pEnd","activeAnnotationUID","_renderStats","originalWorldPoint","deltaXPoint","deltaYPoint","deltaInX","deltaInY","worldPosIndex","iDelta","jDelta","kDelta","worldPosEnd","canvasPosEnd","curRow","intersectionCounter","annotationsToDisplay","ArrowAnnotateTool","getTextCallback","changeTextCallback","arrowFirst","touchTapCallback","doubleClickCallback","clickedAnnotation","_doneChangingTextCallback","updatedText","doneChangingTextCallback","prompt","AngleTool","angleStartedNotYetCompleted","canvasPoint3","String","fromCharCode","midPoint","ret","arg","midPoint2","CobbAngleTool","distanceToLines","isNearFirstLine","isNearSecondLine","_mouseUpCallback","_mouseDownCallback","arc1Angle","arc2Angle","arc1Start","arc1End","arc2Start","arc2End","arc1TextBoxUID","arc1TextLine","arch1TextPosCanvas","arc2TextBoxUID","arc2TextLine","arch2TextPosCanvas","point4","canvasPoint4","getArcsStartEndPoints","mid1","mid2","linkLine","arc1Side","arc2Side","midLinkLine","linkLineLength","midFirstLine","midSecondLine","directionVectorStartArc1","magnitudeStartArc1","normalizedDirectionStartArc1","directionVectorEndArc1","magnitudeEndArc1","normalizedDirectionEndArc1","directionVectorStartArc2","magnitudeStartArc2","normalizedDirectionStartArc2","directionVectorEndArc2","magnitudeEndArc2","normalizedDirectionEndArc2","seg1","seg2","ReferenceCursors","displayThreshold","positionSync","_elementWithCursor","_currentCursorWorldPosition","_currentCanvasPosition","_disableCursorEnabled","getActiveAnnotation","createInitialAnnotation","updateAnnotationPosition","previousCamera","oldFocalPoint","cameraNormal","dotProduct","isElementWithCursor","updateViewportImage","lineWidthBase","crosshairUIDs","centerSpace","lineLength","viewportIds","currentMousePosition","closestIndex","normalizedViewPlane","scaledPlaneNormal","viewportsWithAnnotations","ScaleOverlayTool","scaleLocation","viewportCanvasCornersInWorld","thisAnnotation","computeScaleSize","worldWidthViewport","worldHeightViewport","scaleSizes","currentScaleSize","scaleSize","computeEndScaleTicks","locationTickOffset","endTick1","endTick2","computeInnerScaleTicks","leftTick","rightTick","canvasScaleSize","tickIds","tickUIDs","tickCoordinates","numberSmallTicks","tickSpacing","locationOffset","computeWorldScaleCoordinates","pointSet","worldCoordinates","midpointLocation","computeCanvasScaleCoordinates","canvasSize","vscaleBounds","hscaleBounds","scaleCanvasCoordinates","worldDistanceOnCanvas","computeScaleBounds","horizontalReduction","verticalReduction","hReduction","vReduction","locationBounds","canvasBounds","scaleTicks","scaleId","leftTickId","rightTickId","locationTextOffest","textBoxLines","_getTextLines","scaleSizeDisplayValue","scaleSizeUnits","fillRectangle","constraintFn","rectangleCornersIJK","coord","fillInsideRectangle","eraseRectangle","eraseInsideRectangle","RectangleScissorsTool","FILL_INSIDE","ERASE_INSIDE","CircleScissorsTool","SphereScissorsTool","RectangleROIThresholdTool","RectangleROIStartEndThresholdTool","numSlicesToPropagate","spacingInNormal","_getEndSliceIndex","startSlice","endSlice","projectionPoints","projectionPointsImageIds","_computeProjectionPoints","sliceIndex","firstOrLastSlice","lineDashToUse","_calculateCachedStatsTool","startIJK","endIJK","indexToWorldVec3","endWorld","newProjectionPoints","newPoint","RectanglePoints","endPos","imageIdIndex","defaultEquals","lpad","string","character","join","getter","seed","onFlood","onBoundary","equals","diagonals","startNode","permutations","perms","permutation","permute","perm","array","countNonZeroes","prunedPermutations","stack","flooded","visits","currentArgs","flood","boundaries","job","getArgs","prevArgs","previousArgs","markAsVisited","safely","member","markAsFlooded","nextArgs","pushAdjacent","markAsBoundary","f","isEqual","PaintFillTool","fixedDimension","getFixedDimension","floodFillGetter","getLabelValue","getScalarDataPositionFromPlane","inPlaneSeedPoint","fixedDimensionValue","generateHelpers","clickedLabelValue","floodFillResult","scalarDataPosition","getFramesModified","minJ","maxJ","framesModified","seedIndex3D","getScalarDataPosition","generateFloodFillGetter","generateGetScalarDataPositionFromPlane","xDirection","yDirection","zDirection","absoluteOfViewPlaneNormal","absoluteOfXDirection","absoluteOfYDirection","absoluteOfZDirection","Corners","TOP_LEFT","TOP_RIGHT","BOTTOM_LEFT","BOTTOM_RIGHT","viewportCorner","viewportSize","minPixelSize","maxPixelSize","parentRenderer","superClass","previousCameraInput","selfRenderer","resizeObserver","ResizeObserver","updateViewport","onCameraChangedSub","onCameraModifiedSub","onAnimationSub","onEndAnimationSub","selfSubscription","_interactor","isAnimating","updateMarkerOrientation","_onParentRendererChanged","computeViewport","parentRen","getCurrentRenderer","_parentRen$getViewpor","_parentRen$getViewpor2","view","getView","getSize","_view$getViewportSize","getViewportSize","_view$getViewportSize2","viewXSize","viewYSize","minViewSize","pixelSize","xFrac","yFrac","setViewport","getActiveCamera","getReferenceByName","activeCamera","setPosition","setFocalPoint","setViewUp","setEnabled","enabling","ren","renderWindow","getRenderWindow","addRenderer","getNumberOfLayers","setNumberOfLayers","setLayer","setInteractive","addViewProp","onEvent","unsubscribe","onModified","onAnimation","onEndAnimation","observe","getCanvas","_model$_interactor","_model$_interactor$fi","disconnect","removeViewProp","_renderWindow","findPokedRenderer","removeRenderer","setViewportCorner","corner","setViewportSize","sizeFactor","setActor","previousState","getRenderer","vtkOrientationMarkerWidget","vtkOrientationMarkerWidget$1","canvasToImageData","_boundingBox","idata","getContext","setOrigin","setSpacing","setExtent","ImageHelper","imageToImageData","flipX","flipY","ctx","drawImage","STYLES","defaultStyle","fontStyle","fontColor","fontSizeScale","res","faceColor","edgeThickness","edgeColor","resolution","xMinusFaceProperty","xPlusFaceProperty","yMinusFaceProperty","yPlusFaceProperty","zMinusFaceProperty","zPlusFaceProperty","lps","faceRotation","applyDefinitions","definitions","cubeActor","AnnotatedCubePresets","applyPreset","registerStylePreset","FACE_TO_INDEX","xPlus","xMinus","yPlus","yMinus","zPlus","zMinus","cubeSource","texture","updateFaceTexture","faceName","newProp","prop","ctxt","fillStyle","fillRect","strokeStyle","strokeRect","save","textSize","textAlign","textBaseline","font","fillText","restore","vtkImage","updateAllFaceTextures","generate3DTextureCoordinates","setInputConnection","getOutputPort","setInterpolate","setDefaultStyle","setXPlusFaceProperty","setXMinusFaceProperty","setYPlusFaceProperty","setYMinusFaceProperty","setZPlusFaceProperty","setZMinusFaceProperty","addTexture","vtkAnnotatedCubeActor","vtkAnnotatedCubeActor$1","Presets","capping","_vtkMatrixBuilder$bui","deleted","dataset","xbot","cellArraySize","cellLocation","rotateFromDirections","vtkConeSource","vtkConeSource$1","initAngle","_vtkMatrixBuilder$bui2","numberOfPolys","normalsData","normals","tcData","tcoords","nbot","ntop","xtop","tcbot","tctop","otherRadius","pt","botIdx","topIdx","_i4","vtkCylinderSource","vtkCylinderSource$1","tipResolution","tipRadius","tipLength","shaftResolution","shaftRadius","cylinder","setResolution","setRadius","setHeight","setCenter","cylinderPD","cylinderPts","cylinderNormals","rotateZ","cone","conePD","conePts","append","appendPD","appendPts","vtkArrowSource","vtkArrowSource$1","centerDataSet","shiftDataset","addColor","g","rgbArray","recenter","xAxisColor","yAxisColor","zAxisColor","_mapper","xAxis","yAxis","zAxis","_debouncedUpdate","setConfig","setXAxisColor","setYAxisColor","setZAxisColor","vtkAxesActor","vtkAxesActor$1","u8","u16","u32","fleb","fdeb","clim","freb","eb","_a","fl","revfl","_b","fd","rev","hMap","cd","mb","co","le","rvb","sv","r_1","flt","fdt","bits","o","bits16","shft","slc","BYTES_PER_ELEMENT","ec","ind","msg","nt","code","captureStackTrace","inflt","dat","buf","st","sl","noBuf","noSt","cbuf","bl","nbuf","final","pos","bt","lm","dm","lbt","dbt","tbts","flrm","fdrm","hLit","hcLen","tl","ldt","clt","clb","clbmsk","clm","lt","dt","lms","dms","lpos","dsym","et","gzs","flg","zs","gzl","zlv","inflateSync","out","gunzipSync","unzlibSync","TextDecoder","decode","stream","queueMicrotask","TYPE_MAPPING","registerType","DataAccessHelper","REVERSE_LOOKUP","charCodeAt","BASE64_CODE","isValidChar","writeChunk","b64Str","chunk","dstOffset","uint8","remain","fourCharProcessCount","charIdx","encodeTriplet","triplet","Base64","toArrayBuffer","chunks","strSize","currentChunk","extractChunks","totalEncodedLength","arrayBuffer","ArrayBuffer","fromArrayBuffer","ab","leftoverLength","byteLength","maxTripletIndex","segments","bufOffset","substr","arrayBufferToString","BinaryHelper","extractBinary","prefixRegex","suffixRegex","str","prefixMatch","exec","dataStartIndex","strFirstHalf","suffixMatch","binaryBuffer","getEndianness","Endian","ENDIANNESS","swapBytes","wordSize","bytes","Int8Array","tempBuffer","vtkDebugMacro","REJECT_COMPRESSION","reject","requestCount","openAsyncXHR","xhr","XMLHttpRequest","open","headers","setRequestHeader","progressCallback","LiteHttpDataAccessHelper","fetchArray","instance","baseURL","compression","ref","resolve","basepath","onreadystatechange","readyState","invokeBusy","status","response","encode","responseType","send","fetchJSON","responseText","fetchText","fetchBinary","fetchImage","img","Image","crossOrigin","onload","onerror","findAllTags","tagName","getElementsByTagName","findFirstTag","TYPED_ARRAY","Int8","UInt8","Int16","UInt16","Int32","UInt32","Int64","UInt64","Float32","Float64","TYPED_ARRAY_BYTES","integer64to32","maxIdx","readerHeader","headerType","_uint","_nbBlocks","_resultArray","uint32","nbBlocks","resultArray","uncompressBlock","compressedUint8","uncompressedBlock","processDataArray","dataArrayElem","compressor","byteOrder","nodeValue","token","trim","header","_offset2","blockSize","_header","_offset3","arraySize","vtkXMLReader","dataAccessHelper","setUrl","path","loadData","fetchData","parseAsArrayBuffer","rawDataBuffer","_extractAppendedData","extractAppendedData","content","xmlStr","rootElem","root","appendedDataElem","encoding","arrayElems","appendedBuffer","dataArrays","nextOffset","arrayidx","dataArray","compressedOffset","_buffer","uncompressed","bufferLength","_offset4","parseXML","fieldDataElem","fieldDataArrays","daElem","handleFieldDataArrays","fieldData","getFieldData","addArray","vtkXMLReader$1","processFieldData","fieldElem","fieldContainer","nameBinding","attrName","arrayName","dataArrayElems","nbArrays","processCells","containerElem","elIdx","el","offsets","connectivitySize","connectivity","writeOffset","previousOffset","cellSize","vtkXMLPolyDataReader","pieces","nbPieces","_loop","outputIndex","polydata","piece","nbPoints","cellType","_vtkXMLReader$process","handleArray","nbCells","handleCells","vtkXMLPolyDataReader$1","OverlayMarkerType","ANNOTATED_CUBE","AXES","CUSTOM","OrientationMarkerTool","orientationWidget","overlayMarkerType","OVERLAY_MARKER_TYPES","overlayConfiguration","faceProperties","polyDataURL","configuration_invalidated","initViewports","cleanUpData","orientationMarkers","CUBE","AXIS","VTPFILE","orientationMarker","offscreenMultiRenderWindow","addAxisActorInViewport","removeActor","createAnnotationCube","createCustomActor","renderer","interactor","getInteractor","setMinPixelSize","setMaxPixelSize","fetch","vtpReader","shallowCopy","setActiveScalars","setColorModeToDirectScalars","createAnnotatedCubeActor","axes","annotatedCube","methodName","charAt","toUpperCase","referenceVolume","AllBoundsIJK","pointsToUse","accumulator","annotationUIDs","validToolNames","_validateAnnotations","labelmaps","origin","labelmap","outputData","arrayType","volumeLoader","isValidRepresentationConfig","isValidLabelmapConfig","getDefaultRepresentationConfig","createLabelmapVolumeForViewport","_cloneDeep","setBrushSizeForToolGroup","viewportsInfoArray","getBrushSizeForToolGroup","brushToolInstance","setBrushThresholdForToolGroup","getBrushThresholdForToolGroup","segmentationIndex","_handleSameSizeVolume","callbackOverlap","_handleDifferentSizeVolume","getOrientationStringLPS","orientationX","orientationY","orientationZ","MIN","invertOrientationStringLPS","orientationString","inverted","addToolState","getToolState","ViewportStatus","dynamicVolumesPlayingMap","playClip","playClipOptions","playClipTimeouts","playClipIsTimeVarying","dynamicCineEnabled","_getVolumeFromViewport","playClipContext","waitForRendered","frameTimeVectorEnabled","waitForRenderedCount","viewportStatus","RENDERED","_createStackViewportCinePlayContext","isDynamicVolume","numTimePoints","timePointIndex","_createDynamicVolumeViewportCinePlayContext","cachedScrollInfo","scrollInfo","getScrollInfo","volumeViewPlaneNormal","_createVolumeViewportCinePlayContext","_createCinePlayContext","playClipData","isDynamicCinePlaying","_stopDynamicVolumeCine","_stopClip","intervalId","framesPerSecond","lastFrameTimeStamp","ignoreFrameTimeVector","usingFrameTimeVector","frameTimeVector","speed","frameTimeVectorSpeedMultiplier","timeouts","isTimeVarying","delay","limit","_getPlayClipTimeouts","playClipAction","newStepIndex","CLIP_STOPPED","playClipTimeoutHandler","setInterval","CLIP_STARTED","stopClip","stopDynamicCine","cineToolData","clearInterval","_stopClipWithData","dynamicCineElement","volumes","_getVolumesFromViewport","interpolateAnnotation","shouldPreventInterpolation","interpolatedCanvasPoints","requestType","Prefetch","lowEnd","highEnd","getStackData","currentImageIdIndex","getPromiseRemovedHandler","stackData","stackPrefetchData","indicesToRequest","clearFromImageIds","imageIdSet","requestDetails","additionalDetails","resetPrefetchTimeout","maxImagesToPrefetch","preserveExistingPool","resetPrefetchDelay","prefetch","stackPrefetch","removeFromList","getImageLoadObject","isLoaded","imageLoadPoolManager","clearRequestStack","nearest","nearestIndex","nextImageIdIndex","lowerIndex","higherIndex","imageIdsToPrefetch","currentIndex","shouldLoadLower","shouldLoadHigher","requestFn","imageLoader","useNorm16Texture","rendering","targetBuffer","addRequest","onImageUpdated","indexOfCurrentImage","promiseRemovedHandler","IMAGE_CACHE_IMAGE_REMOVED","getConfiguration","minBefore","maxAfter","directionExtraImages","indicesToRequestCopy","filterRequests","getCachedImageBasedOnImageURI","decodeTimeInMS","loadTimeInMS","sizeInBytes","usage","getMaxCacheSize","cacheFill","fillTime","fillSize","initialTime","initialSize","updateToolState","doneCallback","stackCount","totalBytes","signum","positionFraction","minIndex","maxIndex","dynamicVolume","frames","frameNumbers","maskVolumeId","imageCoordinate","dataInTime","maskImageData","segScalarData","nonZeroVoxelIndices","actualLen","dynamicVolumeScalarDataArray","getScalarDataArrays","isSameVolume","indexValues","activeScalarData","segPointLPS","segValue","overlapIJKMinMax","perFrameSum","averageCallback","averageValues","_getTimePointDataMask","coordinate","worldToIndex","allScalarData","_getTimePointDataCoordinate","operation","numFrames","typedArrays","arrayLength","finalArray","SUM","currentArray","SUBTRACT","AVERAGE","getPolyDataPointIndexes","linesData","contours","findStartingPoint","startPoint","nextPoint","getPolyDataPoints","contoursIndexes","rawPointsData","contourIndexes","ColorbarRangeTextPosition","isRangeValid","isColorbarSizeValid","areColorbarRangesEqual","areColorbarSizesEqual","ColorbarCanvas","props","validateProps","colormap","imageRange","container","showFullPixelValueRange","_colormap","_imageRange","_voiRange","_showFullImageRange","_canvas","_createRootElement","appendTo","_setCanvasSize","showFullImageRange","pointerEvents","isConnected","RGBPoints","rgbPoints","colorsCount","getColorPoint","canvasContext","isHorizontal","maxValue","previousColorPoint","currentColorPoint","incRawPixelValue","rawPixelValue","tVoiRange","normColor","tColorRange","DEFAULTS","FONT","COLOR","TICK_SIZE","TICK_WIDTH","TICK_LABEL_MARGIN","MAX_NUM_TICKS","TICKS_STEPS","ColorbarTicks","ticks","ticksProps","ticksStyle","rangeTextPosition","_font","_tickSize","tickSize","_tickWidth","tickWidth","_labelMargin","labelMargin","_maxNumTicks","maxNumTicks","_rangeTextPosition","Right","_showFullPixelValueRange","_createCanvasElement","showFullRange","_getTicks","roughStep","stepPower","log10","roughtStepNormalized","scaleMax","scaleMin","ticksCount","_getLeftTickInfo","labelMeasure","labelPoint","tickPoints","_getRightTickInfo","_getTopTickInfo","_getBottomTickInfo","maxCanvasPixelValue","rangeWidth","clearRect","tick","measureText","tickInfo","Top","Left","tickStart","tickEnd","beginPath","moveTo","lineTo","Widget","_containerResizeCallback","contentRect","contentBoxSize","inlineSize","_containerSize","onContainerResize","_id","_rootElement","createRootElement","_containerResizeObserver","rootElement","currentContainer","unobserve","destroy","containerSize","MULTIPLIER","RANGE_TEXT_POSITION","TICKS_BAR_SIZE","Colorbar","_isMouseOver","_isInteracting","_mouseOverCallback","showTicks","_mouseOutCallback","hideTicks","_addVOIEventListeners","initialState","multipliers","getVOIMultipliers","_getPointsFromMouseEvent","startVOIRange","canvasDelta","local","voiLower","voiUpper","newVoiRange","_removeVOIEventListeners","_eventListenersManager","_colormaps","getColormapsMap","_activeColormapName","getInitialColormapName","_createCanvas","_ticksBar","_createTicksBar","_addRootElementEventListeners","activeColormapName","colormapName","currentVoiRange","onVoiChange","reset","updateTicksBar","colormaps","items","Name","cm","containerWidth","containerHeight","ticksBar","colorbarWidth","colorbarHeight","Bottom","isRangeTextPositionValid","ticksBarTop","ticksBarLeft","manager","initialDragState","defaultImageRange","ViewportColorbar","_getImageRange","_getVOIRange","autoHideTicks","_hideTicksTimeoutId","timeLeft","_hideTicksTime","_stackNewImageCallback","_element","_imageVolumeModifiedCallback","_volumeId","_viewportVOIModifiedCallback","showAndAutoHideTicks","_addCornerstoneEventListener","ptMultiplier","fixedPTWindowWidth","xMultiplier","getRGBTransferFunction","interval","VOI_MODIFIED","onImageRendered","customCallbackHandler","handlerType","customFunction","activeTool","filterToolsWithMoveableHandles","ToolAndAnnotations","toolsWithMoveableHandles","filterMoveableAnnotationTools","moveableAnnotationTools","shiftKey","ctrlKey","ShiftCtrl","altKey","ShiftAlt","metaKey","ShiftMeta","CtrlAlt","CtrlMeta","Ctrl","AltMeta","Alt","Meta","getActiveToolForMouseEvent","mouseEvent","getMouseModifier","defaultMousePrimary","getDefaultMousePrimary","correctBinding","binding","getToolsWithModesForMouseEvent","evtButton","mouseDownAnnotationAction","toolsWithActions","toolModes","action","getToolsWithActionsForMouseEvent","mouseDown","isPrimaryClick","applicableTools","annotationToolsWithAnnotations","annotationToolsWithMoveableHandles","isMultiSelect","getAnnotationForSelection","toggleAnnotationSelection","toolsWithMovableHandles","mouseDownActivate","mouseDrag","mouseMove","activeAndPassiveTools","toolsWithAnnotations","toolsWithoutAnnotations","toolAndAnnotation","getActiveToolForKeyboardEvent","keyDown","setViewportsCursorByToolName","keyUp","CAMERA_MODIFIED","IMAGE_SPACING_CALIBRATED","getActiveToolForTouchEvent","touchEvent","numTouchPoints","getToolsWithModesForTouchEvent","touchStart","touchStartActivate","touchDrag","addEnabledElement","svgLayer","svgLayerId","defs","feOffset","feColorMatrix","feBlend","_createSvgAnnotationLayer","newNode","viewportUid","renderingEngineUid","elementHash","_setSvgNodeCache","imageRenderedEventDispatcher","cameraModifiedEventDispatcher","imageSpacingCalibratedEventDispatcher","synchronizersFilteredByIds","synchronizer","notDisabled","isDisabled","hasSourceViewport","hasTargetViewport","toolGroupFilteredByIds","tg","_removeViewportFromSynchronizers","sync","remove","_removeViewportFromToolGroup","removeViewports","_removeEnabledElement","foundElementIndex","elementDisabledEvt","_resetSvgNodeCache","internalViewportNode","_removeSvgNode","cancelActiveManipulations","toolsWithData","_getViewportIndex","ar","_containsViewport","synchronizerId","eventHandler","_viewportOptions","_onEvent","_ignoreFiredEvents","_targetViewports","_sourceViewports","fireEvent","_enabled","_eventName","_eventHandler","_options","_hasSourceElements","setOptions","getOptions","addTarget","addSource","_updateDisableHandlers","getSourceViewports","getTargetViewports","removeSource","removeTarget","_getViewportElement","sourceEvent","ex","vp1","vp2","vps","_getUniqueViewports","_remove","disableHandler","elementDisabledEvent","vUid","ELEMENT_DISABLED","synchronizerIndex","ToolGroup","toolInstanceName","toolDefinition","hasToolName","localToolInstance","instantiatedTool","addToolInstance","parentClassName","ToolClassToUse","ParentClass","ToolInstance","renderingEngines","renderingEngineUIDToUse","vpId","getActivePrimaryMouseButtonTool","vpInfo","setToolMode","TouchBinding","MouseBinding","obj","binding1","binding2","hasSameBinding","useCursor","_hasMousePrimaryButtonBinding","_setCursorForViewports","_renderViewports","TOOL_ACTIVATED","_triggerToolModeChangedEvent","prevToolOptions","getToolOptions","toolOptionsForTool","_getCursor","setToolConfiguration","_configuration","Primary","getToolConfiguration","configurationPath","newToolGroupId","fnToolFilter","sourceToolInstance","sourceToolOptions","sourceToolMode","toolGroupIndex","MODES","defaultManager","setAnnotationManager","resetAnnotationManager","HTMLDivElement","ANNOTATION_ADDED","triggerAnnotationAddedForElement","viewportsToRender","triggerAnnotationAddedForFOR","annotationManagerUID","csToolsInitialized","init","defaultConfiguration","_removeCornerstoneEventListeners","elementEnabledEvent","ELEMENT_ENABLED","_addCornerstoneEventListeners","_removeCornerstoneToolsEventListeners","segmentationDataModifiedEventListener","segmentationRepresentationModifiedEventListener","cameraSyncCallback","synchronizerInstance","cameraModifiedEvent","tViewport","createCameraPositionSynchronizer","synchronizerName","voiSyncCallback","voiModifiedEvent","invertStateChanged","tProperties","syncInvertState","createVOISynchronizer","zoomPanSyncCallback","sViewport","syncZoom","srcZoom","getZoom","setZoom","syncPan","srcPan","getPan","setPan","createZoomPanSynchronizer","getSpatialRegistration","sourceId","stackImageSyncCallback","disabled","imageId1","sourceImagePositionPatient","targetImageIds","viewport1","viewport2","viewPlaneNormal1","viewPlaneNormal2","dotProducts","areViewportsCoplanar","registrationMatrixMat4","useInitialPosition","targetImagePositionPatientWithRegistrationMatrix","closestImageIdIndex2","closestImageIdIndex","createStackImageSynchronizer","VideoRedactionTool","toolConfiguration","viewportUIDsToRender","toolDataCanvasCoordinate","viewportUID","renderingEngineUID","sceneUID","targetUIDs","targetUID","_getImageVolumeFromTargetUID","vtkImageData","worldToIndexVec3","valueMinusMean","_getTargetVolumeUID","scene","volumeUID","volumeActors","getVolumeActors","coloneIndex","_getTargetStackUID","EdgeLocator","edgeMap","pointId0","pointId1","newEdgeValue","computeEdgeKey","edgeId","vtkEdgeLocator","HASH_UNDEFINED","INFINITY","funcTag","genTag","symbolTag","reIsDeepProp","reIsPlainProp","reLeadingDot","rePropName","reEscapeChar","reIsHostCtor","freeGlobal","freeSelf","self","Function","arrayProto","funcProto","objectProto","coreJsData","maskSrcKey","IE_PROTO","funcToString","objectToString","reIsNative","RegExp","getNative","nativeCreate","symbolProto","symbolToString","Hash","entry","ListCache","MapCache","assocIndexOf","other","baseGet","isSymbol","test","isKey","stringToPath","toKey","baseIsNative","isObject","pattern","tag","isFunction","isHostObject","toSource","getMapData","__data__","getValue","memoize","baseToString","number","quote","resolver","memoized","Cache","isObjectLike","module","exports","defaultValue","toStringTag","__esModule","__values","iterator","done","FixedSizeSet","ObjectCache","CompareCache","Lazy","return","getPrototypeOf","StringWalker","applyMixin","getOwnPropertyNames","applyDefaults","forEachArray","forEachObject","objectLength","getObjectValue","removeObjectValue","isBoolean","isNumber","isString","isSet","isMap","isEmpty","isPlainObject","isIterable","valueOf","utf8Encode","utf8Decode","Before","Equal","After","BoundaryPosition","None","Capturing","AtTarget","Bubbling","EventPhase","Element","Attribute","Text","CData","EntityReference","Entity","ProcessingInstruction","Comment","Document","DocumentType","DocumentFragment","Notation","NodeType","Disconnected","Preceding","Following","Contains","ContainedBy","ImplementationSpecific","Position","Accept","Reject","Skip","FilterResult","All","CDataSection","WhatToShow","StartToStart","StartToEnd","EndToEnd","EndToStart","HowToCompare","Cast","Guard","EmptySet","stat","noTargetGet","forced","sham","withoutSetter","_features","mutationObservers","customElements","slots","steps","_window","_compareCache","_rangeList","setFeatures","create_window","_instance","dom","__importStar","base64","byte","byteSequence","codePoint","json","namespace","__extends","setPrototypeOf","__proto__","DOMException","DOMStringSizeError","WrongDocumentError","NoDataAllowedError","NoModificationAllowedError","NotSupportedError","InUseAttributeError","InvalidStateError","InvalidModificationError","NamespaceError","InvalidAccessError","ValidationError","TypeMismatchError","SecurityError","NetworkError","AbortError","URLMismatchError","QuotaExceededError","E","TimeoutError","D","InvalidNodeTypeError","S","DataCloneError","C","NotImplementedError","A","HierarchyRequestError","N","NotFoundError","T","IndexSizeError","O","SyntaxError","F","InvalidCharacterError","kind","construct","instanceOf","predicate","represent","styleAliases","globalThis","idl_defineConst","writable","isElementNode","isShadowRoot","shadowRoot","_firstChild","_nextSibling","_parent","_children","isDocumentTypeNode","isCharacterDataNode","_data","_host","tree_getFirstDescendantNode","tree_getNextDescendantNode","tree_getDescendantNodes","tree_getDescendantElements","tree_getSiblingNodes","tree_getFirstAncestorNode","tree_getNextAncestorNode","tree_getAncestorNodes","tree_getCommonAncestor","tree_getFollowingNode","tree_getPrecedingNode","_previousSibling","_lastChild","tree_isConstrained","_nodeType","hasChildNodes","tree_nodeLength","tree_isEmpty","tree_rootNode","tree_isDescendantOf","tree_isAncestorOf","tree_isHostIncludingAncestorOf","isDocumentFragmentNode","tree_isSiblingOf","tree_isPreceding","tree_isFollowing","tree_isParentOf","tree_isChildOf","tree_previousSibling","tree_nextSibling","tree_firstChild","tree_lastChild","tree_treePosition","tree_index","tree_retarget","isNode","host","getterFor","Arguments","unsafe","enforce","ACCESSORS","create_domImplementation","DOMImplementationImpl","_create","WindowImpl","create_xmlDocument","XMLDocumentImpl","create_document","DocumentImpl","create_abortController","AbortControllerImpl","create_abortSignal","AbortSignalImpl","create_documentType","DocumentTypeImpl","create_element","ElementImpl","create_htmlElement","create_htmlUnknownElement","create_documentFragment","DocumentFragmentImpl","create_shadowRoot","ShadowRootImpl","create_attr","AttrImpl","create_text","TextImpl","create_cdataSection","CDATASectionImpl","create_comment","CommentImpl","create_processingInstruction","ProcessingInstructionImpl","create_htmlCollection","HTMLCollectionImpl","create_nodeList","NodeListImpl","create_nodeListStatic","NodeListStaticImpl","create_namedNodeMap","NamedNodeMapImpl","create_range","RangeImpl","create_nodeIterator","NodeIteratorImpl","create_treeWalker","TreeWalkerImpl","create_nodeFilter","NodeFilterImpl","create_mutationRecord","MutationRecordImpl","create_domTokenList","DOMTokenListImpl","_root","_reference","_pointerBeforeReference","isSlot","_name","shadowTree_assignSlotablesForATree","isSlotable","shadowTree_isAssigned","shadowTree_assignSlotables","_assignedSlot","shadowTree_assignASlot","_uniqueIdentifier","dom_runRemovingSteps","dom_runCloningSteps","dom_runAdoptingSteps","dom_runAttributeChangeSteps","features","_attributeChangeSteps","dom_runInsertionSteps","dom_runNodeIteratorPreRemovingSteps","dom_hasSupportedTokens","dom_getSupportedTokens","dom_runEventConstructingSteps","dom_runChildTextContentChangeSteps","P","I","L","M","B","R","U","G","X","W","H","J","Y","V","K","$","Q","Z","ee","te","QObject","re","findChild","ne","ie","description","ae","se","he","ue","ce","wrap","for","keyFor","useSetter","useSimple","__childNodes","_nodeDocumentOverride","_associatedDocument","__registeredObserverList","_htmlUppercasedQualifiedName","isAttrNode","_qualifiedName","isExclusiveTextNode","isCDATASectionNode","isProcessingInstructionNode","_target","isCommentNode","isDocumentNode","urlSerializer","_nodeDocument","_URL","shadowTree_isConnected","getRootNode","composed","_childNodes","_value","attr_setAnExistingAttributeValue","characterData_replaceData","text_descendantTextContent","node_stringReplaceAll","normalize","text_contiguousExclusiveTextNodes","rangeList","_start","_end","mutation_remove","cloneNode","node_clone","isEqualNode","node_equals","isSameNode","compareDocumentPosition","_attributeList","compareCache","check","contains","lookupPrefix","node_locateANamespacePrefix","documentElement","lookupNamespaceURI","node_locateANamespace","isDefaultNamespace","mutation_preInsert","mutation_append","replaceChild","mutation_replace","mutation_preRemove","_getTheParent","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","DOCUMENT_POSITION_DISCONNECTED","DOCUMENT_POSITION_PRECEDING","DOCUMENT_POSITION_FOLLOWING","DOCUMENT_POSITION_CONTAINS","DOCUMENT_POSITION_CONTAINED_BY","DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC","EventTargetImpl","NodeImpl","every","__read","__spread","nodeName","document_adopt","observer_queueTreeMutationRecord","_documentElement","_hasNamespaces","_namespace","_namespacePrefix","_shadowRoot","isTextNode","_assignedNodes","shadowTree_signalASlotChange","isCustomElementNode","customElement_enqueueACustomElementCallbackReaction","customElement_tryToUpgrade","nodeIterator_iteratorList","_registeredObserverList","subtree","observer","mutation_ensurePreInsertionValidity","mutation_insert","mutation_replaceAll","isNothing","toArray","repeat","isNegativeZero","NEGATIVE_INFINITY","include","implicit","explicit","loadKind","compiledImplicit","compiledExplicit","compiledTypeMap","scalar","sequence","mapping","propertyIsEnumerable","_builderOptions","declaration","docType","comment","instruction","cdata","openTagBegin","openTagEnd","closeTag","attribute","beginElement","endElement","serializeNode","currentNode","NamespacePrefixMap","XML","_serializeNodeNS","_serializeNode","nodeType","_serializeElementNS","_serializeDocumentNS","_serializeComment","_serializeText","_serializeDocumentFragmentNS","_serializeDocumentType","_serializeProcessingInstruction","_serializeCData","_serializeElement","_serializeDocument","_serializeDocumentFragment","localName","xml_isName","copy","_recordNamespaceInformation","namespaceURI","_generatePrefix","_serializeAttributeValue","_serializeAttributesNS","HTML","childNodes","_VoidElementNames","_serializeAttributes","xml_isLegalChar","endsWith","xml_isPubidChar","publicId","systemId","LocalNameSet","XMLNS","hasPrefix","BaseWriter","_mutationObserverMicrotaskQueued","_mutationObservers","_signalSlots","_recordQueue","_nodeList","isTransientRegisteredObserver","_callback","event_fireAnEvent","bubbles","attributeFilter","characterData","childList","attributeOldValue","characterDataOldValue","observer_queueAMutationObserverMicrotask","observer_notifyMutationObservers","observer_queueMutationRecord","observer_queueAttributeMutationRecord","_localName","_asArray","_type","element_has","element_change","element_append","element_remove","element_replace","element_getAnAttributeByName","element_getAnAttributeByNamespaceAndLocalName","element_getAnAttributeValue","element_setAnAttribute","element_setAnAttributeValue","element_removeAnAttributeByName","element_removeAnAttributeByNamespaceAndLocalName","element_createAnElement","_customElementState","_customElementDefinition","_is","customElement_lookUpACustomElementDefinition","document_elementInterface","customElement_upgrade","customElement_enqueueACustomElementUpgradeReaction","assert","customElement_isValidCustomElementName","element_insertAdjacent","reason","mark","message","random","domain","ActiveXObject","write","close","parentWindow","contentWindow","foo","proto","flags","_writerOptions","wellFormed","verbose","serialize","_currentList","_currentIndex","_listRegister","_process","_getAttrKey","_getNodeKey","_processSpecItem","_isElementNode","_isAttrNode","_isCommentNode","_isTextNode","_isInstructionNode","_isCDATANode","convert","att","ins","ObjectWriter","_items","_nullItems","__eventListenerList","__eventHandlerMap","once","eventTarget_flattenMore","isEventListener","handleEvent","eventTarget_addEventListener","eventTarget_flatten","_eventListenerList","eventTarget_removeEventListener","dispatchEvent","_dispatchFlag","_initializedFlag","_isTrusted","event_dispatch","substringData","characterData_substringData","appendData","insertData","deleteData","replaceData","before","after","replaceWith","CharacterDataImpl","asNode","_mode","shadowTree_findASlot","shadowTree_findSlotables","shadowTree_findFlattenedSlotables","customElement_isValidElementName","customElement_isVoidElementName","customElement_isValidShadowHostName","parser","_docType","dtd","pubID","sysID","_comment","com","_text","txt","_instruction","_cdata","_attribute","_sanitize","sanitizeInput","invalidCharReplacement","_decodeText","_entityTable","fromCodePoint","_decodeAttributeValue","_parse","sanitize","gt","amp","quot","apos","BaseReader","XMLBuilderImpl","XMLBuilderCBImpl","builder","fragment","createCB","fragmentCB","version","copyright","IteratorPrototype","BUGGY_SAFARI_ITERATORS","DefaultBuilderOptions","standalone","keepNullNodes","keepNullAttributes","ignoreConverters","defaultNamespace","namespaceAlias","html","xml","xmlns","mathml","svg","xlink","XMLBuilderOptionKeys","DefaultXMLBuilderCBOptions","prettyPrint","indent","newline","allowEmptyTags","spaceBeforeSlash","lastIndex","UNSUPPORTED_Y","BROKEN_CARET","sticky","multiline","REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE","REPLACE_KEEPS_$0","unicode","groups","Surrogate","ScalarValue","NonCharacter","ASCIICodePoint","ASCIITabOrNewLine","ASCIIWhiteSpace","C0Control","C0ControlOrSpace","Control","ASCIIDigit","ASCIIUpperHexDigit","ASCIILowerHexDigit","ASCIIHexDigit","ASCIIUpperAlpha","ASCIILowerAlpha","ASCIIAlpha","ASCIIAlphanumeric","_timeStamp","_relatedTarget","_touchTargetList","isMouseEvent","_activationBehavior","isWindow","_bubbles","_path","shadowAdjustedTarget","relatedTarget","touchTargetList","_legacyPreActivationBehavior","_eventPhase","_currentTarget","_stopPropagationFlag","_stopImmediatePropagationFlag","_canceledFlag","_legacyCanceledActivationBehavior","invocationTarget","invocationTargetInShadowTree","rootOfClosedTree","slotInClosedTree","_currentEvent","_inPassiveListenerFlag","event_setTheCanceledFlag","_cancelable","event_initialize","event_createAnEvent","event_innerEventCreationSteps","event_appendToAnEventPath","event_invoke","event_innerInvoke","EventImpl","event_createLegacyEvent","CustomEventImpl","event_getterEventHandlerIDLAttribute","event_setterEventHandlerIDLAttribute","event_determineTheTargetOfAnEventHandler","event_getTheCurrentValueOfAnEventHandler","event_activateAnEventHandler","event_deactivateAnEventHandler","_encoding","labels","_contentType","scheme","username","password","port","query","_cannotBeABaseURLFlag","_blobURLEntry","_origin","_nodeDocumentOverwrite","_implementation","node_listOfElementsWithQualifiedName","getElementsByTagNameNS","node_listOfElementsWithNamespace","getElementsByClassName","node_listOfElementsWithClassNames","is","document_internalCreateElementNS","createDocumentFragment","createTextNode","createCDATASection","createComment","createProcessingInstruction","importNode","adoptNode","createAttribute","createAttributeNS","namespace_validateAndExtract","createEvent","createRange","createNodeIterator","_whatToShow","_iteratorCollection","_filter","acceptNode","createTreeWalker","getElementById","prepend","querySelectorAll","hasAttributes","getAttributeNames","getAttributeNS","setAttributeNS","removeAttributeNS","hasAttribute","toggleAttribute","hasAttributeNS","getAttributeNode","getAttributeNodeNS","setAttributeNode","setAttributeNodeNS","removeAttributeNode","attachShadow","disableShadow","webkitMatchesSelector","insertAdjacentElement","insertAdjacentText","text_contiguousTextNodes","splitText","text_split","_startNode","_startOffset","_endNode","_endOffset","_collapsed","AbstractRangeImpl","_activeFlag","TraverserImpl","_composedFlag","cancelable","composedPath","initEvent","CAPTURING_PHASE","AT_TARGET","BUBBLING_PHASE","traversal_filter","whatToShow","splitAStringOnASCIIWhitespace","orderedSet_parse","orderedSet_serialize","orderedSet_sanitize","orderedSet_contains","createDocument","DOMImplementation","AbortController","AbortSignal","AbstractRange","Attr","CDATASection","CharacterData","CustomEvent","DOMTokenList","Event","EventTarget","HTMLCollection","MutationObserver","MutationObserverImpl","MutationRecord","NamedNodeMap","NodeFilter","Node","NodeIterator","NodeList","NodeListStatic","Range","ShadowRoot","StaticRange","StaticRangeImpl","Traverser","TreeWalker","Window","XMLDocument","ChildNodeImpl","DocumentOrShadowRootImpl","NonDocumentTypeChildNodeImpl","NonElementParentNodeImpl","ParentNodeImpl","SlotableImpl","EOF","Declaration","DocType","CDATA","ClosingTag","TokenType","_debugInfo","ObjectReader","BaseCBWriter","inspectSource","NATIVE","POLYFILL","process","versions","v8","callee","ignoreCase","dotAll","codeAt","getConstructor","REQUIRED","setStrong","objectID","weakData","fastKey","getWeakData","onFreeze","stopped","stop","TYPED_ARRAY_SUPPORT","RangeError","isEncoding","isBuffer","isView","lastIndexOf","readUInt16BE","fromByteArray","Buffer","SlowBuffer","alloc","INSPECT_MAX_BYTES","kMaxLength","poolSize","_augment","species","allocUnsafe","allocUnsafeSlow","_isBuffer","compare","swap16","swap32","swap64","inspect","isFinite","toJSON","_arr","readUIntLE","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","read","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","toByteArray","isASCIIByte","byteLowercase","byteUppercase","byteCaseInsensitiveMatch","byteLessThan","isomorphicDecode","createDocumentType","namespace_validate","SVG","createHTMLDocument","hasFeature","_iteratorList","screenX","screenY","navigator","isRegisteredObserver","ftp","file","http","https","ws","wss","ParserState","SchemeStart","Scheme","NoScheme","remaining","File","SpecialRelativeOrAuthority","SpecialAuthoritySlashes","PathOrAuthority","CannotBeABaseURLPath","Fragment","Relative","SpecialAuthorityIgnoreSlashes","Authority","Path","RelativeSlash","Query","Host","Hostname","FileHost","PathStart","Port","FileSlash","eof","of","domainToASCII","setValidationErrorCallback","newURL","isSpecialScheme","isSpecial","defaultPort","includesCredentials","cannotHaveAUsernamePasswordPort","hostSerializer","iPv4Serializer","iPv6Serializer","urlParser","basicURLParser","setTheUsername","setThePassword","isSingleDotPathSegment","isDoubleDotPathSegment","shorten","isNormalizedWindowsDriveLetter","isWindowsDriveLetter","startsWithAWindowsDriveLetter","hostParser","iPv4NumberParser","iPv4Parser","iPv6Parser","opaqueHostParser","resolveABlobURL","percentEncode","percentDecode","stringPercentDecode","utf8PercentEncode","hostEquals","urlEquals","urlEncodedStringParser","urlEncodedParser","urlEncodedByteSerializer","urlEncodedSerializer","OpaqueOrigin","domainToUnicode","asciiSerializationOfAnOrigin","_signal","abort","abort_signalAbort","_abortedFlag","_abortAlgorithms","_publicId","_systemId","_live","Proxy","namedItem","reservedNames","Reflect","_length","getNamedItem","getNamedItemNS","setNamedItem","setNamedItemNS","removeNamedItem","removeNamedItemNS","setStart","range_setTheStart","setEnd","range_setTheEnd","setStartBefore","setStartAfter","setEndBefore","setEndAfter","collapse","selectNode","range_select","selectNodeContents","compareBoundaryPoints","range_root","boundaryPoint_position","deleteContents","range_collapsed","range_getContainedNodes","range_isContained","extractContents","range_extract","cloneContents","range_cloneTheContents","insertNode","range_insert","surroundContents","range_getPartiallyContainedNodes","cloneRange","detach","isPointInRange","comparePoint","intersectsNode","START_TO_START","START_TO_END","END_TO_END","END_TO_START","nextNode","nodeIterator_traverse","previousNode","_current","treeWalker_traverseChildren","lastChild","nextSibling","treeWalker_traverseSiblings","previousSibling","FILTER_ACCEPT","FILTER_REJECT","FILTER_SKIP","SHOW_ALL","SHOW_ELEMENT","SHOW_ATTRIBUTE","SHOW_TEXT","SHOW_CDATA_SECTION","SHOW_ENTITY_REFERENCE","SHOW_ENTITY","SHOW_PROCESSING_INSTRUCTION","SHOW_COMMENT","SHOW_DOCUMENT","SHOW_DOCUMENT_TYPE","SHOW_DOCUMENT_FRAGMENT","SHOW_NOTATION","_addedNodes","_removedNodes","_attributeName","_attributeNamespace","_oldValue","_tokenSet","tokenList_updateSteps","toggle","supports","tokenList_validationSteps","tokenList_serializeSteps","_detail","initCustomEvent","xml_isQName","namespace_extractQName","skipWhitespaceOnlyText","col","_str","_index","nextToken","skipIfStartsWith","openBracket","isWhiteSpaceToken","isSpace","seek","pi","doctype","throwError","openTag","skipSpace","takeUntil2","quotedString","skipUntil","pubId","sysId","takeUntilStartsWith","takeUntil","selfClosing","take","isQuote","XMLStringLexer","_xmlBuilderOptions","_isFragment","_domNode","XMLReader","JSONReader","YAMLReader","_extractNamespace","_doc","implementation","up","_updateNamespace","removeAtt","dec","import","doc","each","_getFirstDescendantNode","_getNextDescendantNode","_serialize","toObject","XMLWriter","MapWriter","JSONWriter","YAMLWriter","ownerDocument","CSSRuleList","CSSStyleDeclaration","CSSValueList","ClientRectList","DOMRectList","DOMStringList","DataTransferItemList","FileList","HTMLAllCollection","HTMLFormElement","HTMLSelectElement","MediaList","MimeTypeArray","PaintRequestList","Plugin","PluginArray","SVGLengthList","SVGNumberList","SVGPathSegList","SVGPointList","SVGStringList","SVGTransformList","SourceBufferList","StyleSheetList","TextTrackCueList","TextTrackList","TouchList","preventExtensions","__generator","sent","trys","ops","throw","_limit","_initialized","_initFunc","_pointer","_chars","_codePoint","codePointAt","_c","_remaining","_substring","_convertObject","forgivingBase64Encode","forgivingBase64Decode","LN2","parseJSONFromBytes","serializeJSONToBytes","parseJSONIntoInfraValues","convertAJSONDerivedJavaScriptValueToAnInfraValue","sortInAscendingOrder","sortInDescendingOrder","MathML","XLink","enqueue","dequeue","isSubsetOf","isSupersetOf","union","isCodeUnitPrefix","isCodeUnitLessThan","isomorphicEncode","isASCIIString","asciiLowercase","asciiUppercase","asciiCaseInsensitiveMatch","asciiEncode","asciiDecode","stripNewlines","normalizeNewlines","stripLeadingAndTrailingASCIIWhitespace","stripAndCollapseASCIIWhitespace","collectASequenceOfCodePoints","skipASCIIWhitespace","strictlySplit","splitAStringOnCommas","concatenate","abort_add","abort_remove","protocol","slashes","auth","hostname","hash","search","pathname","href","resolveObject","Url","javascript","gopher","decodeURIComponent","parseHost","toASCII","encodeURIComponent","escape","isNullOrUndefined","isNull","ucs2","toUnicode","webpackPolyfill","deprecate","paths","maxKeys","eventTarget_removeAllEventListeners","parentNode_convertNodesIntoANode","range_isPartiallyContained","commonAncestorContainer","selectors_scopeMatchASelectorsString","_indentation","_lengthToLastNewline","headless","indentTextOnlyNodes","_refs","suppressPretty","emptyNode","markup","_beginLine","_endLine","_indent","_isLeafNode","_key","_val","_descendantCount","DOMParser","XMLSerializer","takeRecords","__name","__assignedSlot","startContainer","endContainer","startOffset","endOffset","DOMParserImpl","parseFromString","XMLParserImpl","XMLSerializerImpl","serializeToString","_xmlSerialization","safeLoad","Type","Schema","FAILSAFE_SCHEMA","JSON_SCHEMA","CORE_SCHEMA","DEFAULT_SAFE_SCHEMA","DEFAULT_FULL_SCHEMA","load","loadAll","safeLoadAll","dump","safeDump","YAMLException","MINIMAL_SCHEMA","SAFE_SCHEMA","DEFAULT_SCHEMA","scan","compose","addConstructor","filename","schema","onWarning","legacy","listener","implicitTypes","typeMap","lineIndent","documents","YAML","checkLineBreaks","TAG","tagMap","anchorMap","column","getSnippet","canonical","lowercase","uppercase","camelcase","binary","octal","decimal","hexadecimal","POSITIVE_INFINITY","UTC","setTime","toISOString","esprima","body","expression","params","loaded","visit","attachComment","CommentHandler","attach","sourceType","jsx","JSXParser","Parser","parseModule","parseScript","comments","tokens","tolerant","errors","errorHandler","tokenize","Tokenizer","getNextToken","tolerate","Syntax","insertInnerComments","BlockStatement","innerComments","findTrailingComments","trailingComments","findLeadingComments","leadingComments","visitNode","Program","visitComment","loc","AssignmentExpression","AssignmentPattern","ArrayExpression","ArrayPattern","ArrowFunctionExpression","AwaitExpression","BinaryExpression","BreakStatement","CallExpression","CatchClause","ClassBody","ClassDeclaration","ClassExpression","ConditionalExpression","ContinueStatement","DoWhileStatement","DebuggerStatement","EmptyStatement","ExportAllDeclaration","ExportDefaultDeclaration","ExportNamedDeclaration","ExportSpecifier","ExpressionStatement","ForStatement","ForOfStatement","ForInStatement","FunctionDeclaration","FunctionExpression","Identifier","IfStatement","ImportDeclaration","ImportDefaultSpecifier","ImportNamespaceSpecifier","ImportSpecifier","Literal","LabeledStatement","LogicalExpression","MemberExpression","MetaProperty","MethodDefinition","NewExpression","ObjectExpression","ObjectPattern","Property","RestElement","ReturnStatement","SequenceExpression","SpreadElement","Super","SwitchCase","SwitchStatement","TaggedTemplateExpression","TemplateElement","TemplateLiteral","ThisExpression","ThrowStatement","TryStatement","UnaryExpression","UpdateExpression","VariableDeclaration","VariableDeclarator","WhileStatement","WithStatement","YieldExpression","JSXSyntax","JSXIdentifier","JSXNamespacedName","JSXMemberExpression","TokenName","parsePrimaryExpression","parseJSXRoot","startJSX","scanner","startMarker","lineNumber","finishJSX","reenterJSX","expectJSX","createJSXNode","collectComments","createJSXChildNode","scanXHTMLEntity","Character","isDecimalDigit","isHexDigit","XHTMLEntities","lexJSX","isIdentifierStart","isIdentifierPart","lex","nextJSXToken","lastMarker","convertToken","nextJSXText","isLineTerminator","peekJSXToken","saveState","scanComments","restoreState","throwUnexpectedToken","matchJSX","parseJSXIdentifier","finalize","parseJSXElementName","parseJSXAttributeName","parseJSXStringLiteralAttribute","getTokenRaw","parseJSXExpressionAttribute","tolerateError","parseAssignmentExpression","JSXExpressionContainer","parseJSXAttributeValue","parseJSXElement","parseJSXNameValueAttribute","JSXAttribute","parseJSXSpreadAttribute","JSXSpreadAttribute","parseJSXAttributes","parseJSXOpeningElement","JSXOpeningElement","parseJSXBoundaryElement","JSXClosingElement","parseJSXEmptyExpression","JSXEmptyExpression","parseJSXExpressionContainer","parseJSXChildren","JSXText","parseComplexJSXElement","JSXElement","opening","closing","isStartOfExpression","NonAsciiIdentifierStart","NonAsciiIdentifierPart","isWhiteSpace","isOctalDigit","openingElement","closingElement","argument","raw","generator","operator","AsyncArrowFunctionExpression","AsyncFunctionDeclaration","AsyncFunctionExpression","param","computed","ComputedMemberExpression","consequent","alternate","directive","Directive","specifiers","exported","imported","meta","static","Module","shorthand","regex","RegexLiteral","Script","expressions","StaticMemberExpression","discriminant","cases","quasi","tail","quasis","pe","fe","de","block","handler","finalizer","me","ye","ve","declarations","_e","ge","be","xe","delegate","ErrorHandler","Scanner","trackComment","operatorPrecedence","lookahead","hasLineTerminator","isModule","await","allowIn","allowStrictDirective","allowYield","firstCoverInitializedNameError","isAssignmentTarget","isBindingElement","inFunctionBody","inIteration","inSwitch","labelSet","strict","createError","unexpectedTokenError","Messages","UnexpectedToken","UnexpectedEOS","UnexpectedIdentifier","UnexpectedNumber","UnexpectedString","UnexpectedTemplate","isFutureReservedWord","UnexpectedReserved","isStrictModeReservedWord","StrictReservedWord","tolerateUnexpectedToken","multiLine","nextRegexToken","scanRegExp","createNode","expect","expectCommaSeparator","expectKeyword","matchKeyword","matchContextualKeyword","matchAssign","isolateCoverGrammar","inheritCoverGrammar","consumeSemicolon","matchAsyncFunction","parseFunctionExpression","StrictOctalLiteral","parseTemplateLiteral","parseGroupExpression","parseArrayInitializer","parseObjectInitializer","parseIdentifierName","parseClassExpression","parseSpreadElement","parsePropertyMethod","simple","parseFunctionSourceElements","firstRestricted","stricted","parsePropertyMethodFunction","parseFormalParameters","parsePropertyMethodAsyncFunction","parseObjectPropertyKey","isPropertyKey","parseObjectProperty","qualifiedPropertyName","parseGetterMethod","parseSetterMethod","parseGeneratorMethod","DuplicateProtoProperty","parseTemplateHead","head","cooked","parseTemplateElement","parseExpression","reinterpretExpressionAsPattern","parseRestElement","parseArguments","isIdentifierName","parseNewExpression","parseLeftHandSideExpression","parseAsyncArgument","parseAsyncArguments","parseLeftHandSideExpressionAllowCall","parseSuper","parseUpdateExpression","parseUnaryExpression","isRestrictedWord","StrictLHSPrefix","InvalidLHSInAssignment","StrictLHSPostfix","parseAwaitExpression","StrictDelete","parseExponentiationExpression","binaryPrecedence","parseBinaryExpression","parseConditionalExpression","checkPatternParam","validateParam","reinterpretAsCoverFormalsList","paramSet","StrictParamDupe","parseYieldExpression","StrictLHSAssignment","parseStatementListItem","IllegalExportDeclaration","parseExportDeclaration","IllegalImportDeclaration","parseImportDeclaration","parseLexicalDeclaration","inFor","parseFunctionDeclaration","parseClassDeclaration","isLexicalDeclaration","parseStatement","parseBlock","parseLexicalBinding","parsePattern","StrictVarName","DeclarationMissingInitializer","parseBindingList","parseBindingRestElement","parseArrayPattern","parsePatternWithDefault","parsePropertyPattern","parseVariableIdentifier","parseObjectPattern","LetInLexicalBinding","parseVariableDeclaration","parseVariableDeclarationList","parseVariableStatement","parseEmptyStatement","parseExpressionStatement","parseIfClause","StrictFunction","parseIfStatement","parseDoWhileStatement","parseWhileStatement","parseForStatement","ForInOfLoopInitializer","InvalidLHSInForIn","InvalidLHSInForLoop","parseContinueStatement","UnknownLabel","IllegalContinue","parseBreakStatement","IllegalBreak","parseReturnStatement","IllegalReturn","parseWithStatement","StrictModeWith","parseSwitchCase","parseSwitchStatement","MultipleDefaultsInSwitch","parseLabelledStatement","Redeclaration","GeneratorInLegacyContext","parseThrowStatement","NewlineAfterThrow","parseCatchClause","DuplicateBinding","StrictCatchVariable","parseFinallyClause","parseTryStatement","NoCatchOrFinally","parseDebuggerStatement","parseDirectivePrologues","StrictParamName","DefaultRestParameter","ParameterAfterRestParameter","parseFormalParameter","StrictFunctionName","parseDirective","IllegalLanguageModeDirective","BadGetterArity","BadSetterArity","BadSetterRestParameter","parseClassElement","ConstructorIsAsync","StaticPrototype","ConstructorSpecialMethod","DuplicateConstructor","parseClassElementList","parseClassBody","parseModuleSpecifier","InvalidModuleSpecifier","parseImportSpecifier","parseNamedImports","parseImportDefaultSpecifier","parseImportNamespaceSpecifier","NoAsAfterImportNamespace","MissingFromClause","parseExportSpecifier","recordError","constructError","InvalidEscapedReservedWord","InvalidHexEscapeSequence","InvalidRegExp","TemplateOctalLiteral","UnexpectedTokenIllegal","UnterminatedRegExp","curlyStack","skipSingleLineComment","skipMultiLineComment","isKeyword","scanHexEscape","scanUnicodeCodePointEscape","getIdentifier","getComplexIdentifier","octalToDecimal","scanIdentifier","scanPunctuator","scanHexLiteral","scanBinaryLiteral","scanOctalLiteral","isImplicitOctalLiteral","scanNumericLiteral","scanStringLiteral","scanTemplate","testRegExp","scanRegExpBody","scanRegExpFlags","nbsp","iexcl","cent","pound","curren","yen","brvbar","sect","uml","ordf","laquo","not","shy","reg","macr","deg","plusmn","sup2","sup3","acute","micro","para","middot","cedil","sup1","ordm","raquo","frac14","frac12","frac34","iquest","Agrave","Aacute","Acirc","Atilde","Auml","Aring","AElig","Ccedil","Egrave","Eacute","Ecirc","Euml","Igrave","Iacute","Icirc","Iuml","ETH","Ntilde","Ograve","Oacute","Ocirc","Otilde","Ouml","times","Oslash","Ugrave","Uacute","Ucirc","Uuml","Yacute","THORN","szlig","agrave","aacute","acirc","atilde","auml","aring","aelig","ccedil","egrave","eacute","ecirc","euml","igrave","iacute","icirc","iuml","eth","ntilde","ograve","oacute","ocirc","otilde","ouml","divide","oslash","ugrave","uacute","ucirc","uuml","yacute","thorn","yuml","OElig","oelig","Scaron","scaron","Yuml","fnof","circ","tilde","Alpha","Beta","Gamma","Delta","Epsilon","Zeta","Eta","Theta","Iota","Kappa","Lambda","Mu","Nu","Xi","Omicron","Pi","Rho","Sigma","Tau","Upsilon","Phi","Chi","Psi","Omega","alpha","beta","gamma","epsilon","zeta","eta","theta","iota","kappa","lambda","mu","nu","xi","omicron","rho","sigmaf","sigma","tau","upsilon","phi","chi","psi","omega","thetasym","upsih","piv","ensp","emsp","thinsp","zwnj","zwj","lrm","rlm","ndash","mdash","lsquo","rsquo","sbquo","ldquo","rdquo","bdquo","dagger","Dagger","bull","hellip","permil","prime","Prime","lsaquo","rsaquo","oline","frasl","euro","weierp","real","trade","alefsym","larr","uarr","rarr","darr","harr","crarr","lArr","uArr","rArr","dArr","hArr","forall","part","exist","nabla","isin","notin","ni","prod","minus","lowast","radic","infin","ang","and","or","cap","cup","int","there4","sim","cong","asymp","equiv","sub","sup","nsub","sube","supe","oplus","otimes","perp","sdot","lceil","rceil","lfloor","rfloor","loz","spades","clubs","hearts","diams","lang","rang","curly","paren","beforeFunctionExpression","isRegexStart","trackRange","trackLoc","reader","noArrayIndent","skipInvalid","flowLevel","styleMap","sortKeys","noRefs","noCompatMode","condenseFlow","explicitTypes","duplicates","usedDuplicates","_hasDeclaration","_docTypeName","_hasDocumentElement","_currentElementSerialized","_openTags","_ended","_fragment","_writer","JSONCBWriter","YAMLCBWriter","XMLCBWriter","on","_prefixMap","_prefixIndex","_push","frontMatter","emit","_fromNode","_serializeOpenTag","_currentElement","_serializeCloseTag","_isPrefixMapModified","hasData","EventEmitter","_lineLength","_hasChildren","_additionalLevel","_comma","_sep","_rootWritten","_events","_eventsCount","_maxListeners","defaultMaxListeners","newListener","warned","emitter","fired","removeListener","wrapFn","setMaxListeners","getMaxListeners","addListener","prependListener","prependOnceListener","off","removeAllListeners","listeners","rawListeners","listenerCount","eventNames"],"sourceRoot":""}